var y9=Object.defineProperty;var x9=(n,e,t)=>e in n?y9(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var zo=(n,e,t)=>x9(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();var $v=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gi(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function _9(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var Lb={exports:{}},gv={},Ob={exports:{}},Lr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tN;function S9(){if(tN)return Lr;tN=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),a=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),f=Symbol.iterator;function h(ee){return ee===null||typeof ee!="object"?null:(ee=f&&ee[f]||ee["@@iterator"],typeof ee=="function"?ee:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,S={};function y(ee,G,ne){this.props=ee,this.context=G,this.refs=S,this.updater=ne||p}y.prototype.isReactComponent={},y.prototype.setState=function(ee,G){if(typeof ee!="object"&&typeof ee!="function"&&ee!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ee,G,"setState")},y.prototype.forceUpdate=function(ee){this.updater.enqueueForceUpdate(this,ee,"forceUpdate")};function _(){}_.prototype=y.prototype;function w(ee,G,ne){this.props=ee,this.context=G,this.refs=S,this.updater=ne||p}var A=w.prototype=new _;A.constructor=w,v(A,y.prototype),A.isPureReactComponent=!0;var E=Array.isArray,P=Object.prototype.hasOwnProperty,O={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};function D(ee,G,ne){var te,de={},me=null,be=null;if(G!=null)for(te in G.ref!==void 0&&(be=G.ref),G.key!==void 0&&(me=""+G.key),G)P.call(G,te)&&!L.hasOwnProperty(te)&&(de[te]=G[te]);var Ie=arguments.length-2;if(Ie===1)de.children=ne;else if(1<Ie){for(var Ee=Array(Ie),Xe=0;Xe<Ie;Xe++)Ee[Xe]=arguments[Xe+2];de.children=Ee}if(ee&&ee.defaultProps)for(te in Ie=ee.defaultProps,Ie)de[te]===void 0&&(de[te]=Ie[te]);return{$$typeof:n,type:ee,key:me,ref:be,props:de,_owner:O.current}}function F(ee,G){return{$$typeof:n,type:ee.type,key:G,ref:ee.ref,props:ee.props,_owner:ee._owner}}function U(ee){return typeof ee=="object"&&ee!==null&&ee.$$typeof===n}function k(ee){var G={"=":"=0",":":"=2"};return"$"+ee.replace(/[=:]/g,function(ne){return G[ne]})}var z=/\/+/g;function W(ee,G){return typeof ee=="object"&&ee!==null&&ee.key!=null?k(""+ee.key):G.toString(36)}function j(ee,G,ne,te,de){var me=typeof ee;(me==="undefined"||me==="boolean")&&(ee=null);var be=!1;if(ee===null)be=!0;else switch(me){case"string":case"number":be=!0;break;case"object":switch(ee.$$typeof){case n:case e:be=!0}}if(be)return be=ee,de=de(be),ee=te===""?"."+W(be,0):te,E(de)?(ne="",ee!=null&&(ne=ee.replace(z,"$&/")+"/"),j(de,G,ne,"",function(Xe){return Xe})):de!=null&&(U(de)&&(de=F(de,ne+(!de.key||be&&be.key===de.key?"":(""+de.key).replace(z,"$&/")+"/")+ee)),G.push(de)),1;if(be=0,te=te===""?".":te+":",E(ee))for(var Ie=0;Ie<ee.length;Ie++){me=ee[Ie];var Ee=te+W(me,Ie);be+=j(me,G,ne,Ee,de)}else if(Ee=h(ee),typeof Ee=="function")for(ee=Ee.call(ee),Ie=0;!(me=ee.next()).done;)me=me.value,Ee=te+W(me,Ie++),be+=j(me,G,ne,Ee,de);else if(me==="object")throw G=String(ee),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(ee).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return be}function se(ee,G,ne){if(ee==null)return ee;var te=[],de=0;return j(ee,te,"","",function(me){return G.call(ne,me,de++)}),te}function Y(ee){if(ee._status===-1){var G=ee._result;G=G(),G.then(function(ne){(ee._status===0||ee._status===-1)&&(ee._status=1,ee._result=ne)},function(ne){(ee._status===0||ee._status===-1)&&(ee._status=2,ee._result=ne)}),ee._status===-1&&(ee._status=0,ee._result=G)}if(ee._status===1)return ee._result.default;throw ee._result}var Q={current:null},X={transition:null},Z={ReactCurrentDispatcher:Q,ReactCurrentBatchConfig:X,ReactCurrentOwner:O};function oe(){throw Error("act(...) is not supported in production builds of React.")}return Lr.Children={map:se,forEach:function(ee,G,ne){se(ee,function(){G.apply(this,arguments)},ne)},count:function(ee){var G=0;return se(ee,function(){G++}),G},toArray:function(ee){return se(ee,function(G){return G})||[]},only:function(ee){if(!U(ee))throw Error("React.Children.only expected to receive a single React element child.");return ee}},Lr.Component=y,Lr.Fragment=t,Lr.Profiler=i,Lr.PureComponent=w,Lr.StrictMode=r,Lr.Suspense=l,Lr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z,Lr.act=oe,Lr.cloneElement=function(ee,G,ne){if(ee==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ee+".");var te=v({},ee.props),de=ee.key,me=ee.ref,be=ee._owner;if(G!=null){if(G.ref!==void 0&&(me=G.ref,be=O.current),G.key!==void 0&&(de=""+G.key),ee.type&&ee.type.defaultProps)var Ie=ee.type.defaultProps;for(Ee in G)P.call(G,Ee)&&!L.hasOwnProperty(Ee)&&(te[Ee]=G[Ee]===void 0&&Ie!==void 0?Ie[Ee]:G[Ee])}var Ee=arguments.length-2;if(Ee===1)te.children=ne;else if(1<Ee){Ie=Array(Ee);for(var Xe=0;Xe<Ee;Xe++)Ie[Xe]=arguments[Xe+2];te.children=Ie}return{$$typeof:n,type:ee.type,key:de,ref:me,props:te,_owner:be}},Lr.createContext=function(ee){return ee={$$typeof:a,_currentValue:ee,_currentValue2:ee,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ee.Provider={$$typeof:o,_context:ee},ee.Consumer=ee},Lr.createElement=D,Lr.createFactory=function(ee){var G=D.bind(null,ee);return G.type=ee,G},Lr.createRef=function(){return{current:null}},Lr.forwardRef=function(ee){return{$$typeof:s,render:ee}},Lr.isValidElement=U,Lr.lazy=function(ee){return{$$typeof:c,_payload:{_status:-1,_result:ee},_init:Y}},Lr.memo=function(ee,G){return{$$typeof:u,type:ee,compare:G===void 0?null:G}},Lr.startTransition=function(ee){var G=X.transition;X.transition={};try{ee()}finally{X.transition=G}},Lr.unstable_act=oe,Lr.useCallback=function(ee,G){return Q.current.useCallback(ee,G)},Lr.useContext=function(ee){return Q.current.useContext(ee)},Lr.useDebugValue=function(){},Lr.useDeferredValue=function(ee){return Q.current.useDeferredValue(ee)},Lr.useEffect=function(ee,G){return Q.current.useEffect(ee,G)},Lr.useId=function(){return Q.current.useId()},Lr.useImperativeHandle=function(ee,G,ne){return Q.current.useImperativeHandle(ee,G,ne)},Lr.useInsertionEffect=function(ee,G){return Q.current.useInsertionEffect(ee,G)},Lr.useLayoutEffect=function(ee,G){return Q.current.useLayoutEffect(ee,G)},Lr.useMemo=function(ee,G){return Q.current.useMemo(ee,G)},Lr.useReducer=function(ee,G,ne){return Q.current.useReducer(ee,G,ne)},Lr.useRef=function(ee){return Q.current.useRef(ee)},Lr.useState=function(ee){return Q.current.useState(ee)},Lr.useSyncExternalStore=function(ee,G,ne){return Q.current.useSyncExternalStore(ee,G,ne)},Lr.useTransition=function(){return Q.current.useTransition()},Lr.version="18.3.1",Lr}var nN;function VS(){return nN||(nN=1,Ob.exports=S9()),Ob.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rN;function w9(){if(rN)return gv;rN=1;var n=VS(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function a(s,l,u){var c,f={},h=null,p=null;u!==void 0&&(h=""+u),l.key!==void 0&&(h=""+l.key),l.ref!==void 0&&(p=l.ref);for(c in l)r.call(l,c)&&!o.hasOwnProperty(c)&&(f[c]=l[c]);if(s&&s.defaultProps)for(c in l=s.defaultProps,l)f[c]===void 0&&(f[c]=l[c]);return{$$typeof:e,type:s,key:h,ref:p,props:f,_owner:i.current}}return gv.Fragment=t,gv.jsx=a,gv.jsxs=a,gv}var iN;function b9(){return iN||(iN=1,Lb.exports=w9()),Lb.exports}var re=b9(),Me=VS();const Ve=gi(Me);var L1={},Db={exports:{}},Il={},kb={exports:{}},Fb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oN;function A9(){return oN||(oN=1,(function(n){function e(X,Z){var oe=X.length;X.push(Z);e:for(;0<oe;){var ee=oe-1>>>1,G=X[ee];if(0<i(G,Z))X[ee]=Z,X[oe]=G,oe=ee;else break e}}function t(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var Z=X[0],oe=X.pop();if(oe!==Z){X[0]=oe;e:for(var ee=0,G=X.length,ne=G>>>1;ee<ne;){var te=2*(ee+1)-1,de=X[te],me=te+1,be=X[me];if(0>i(de,oe))me<G&&0>i(be,de)?(X[ee]=be,X[me]=oe,ee=me):(X[ee]=de,X[te]=oe,ee=te);else if(me<G&&0>i(be,oe))X[ee]=be,X[me]=oe,ee=me;else break e}}return Z}function i(X,Z){var oe=X.sortIndex-Z.sortIndex;return oe!==0?oe:X.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();n.unstable_now=function(){return a.now()-s}}var l=[],u=[],c=1,f=null,h=3,p=!1,v=!1,S=!1,y=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(X){for(var Z=t(u);Z!==null;){if(Z.callback===null)r(u);else if(Z.startTime<=X)r(u),Z.sortIndex=Z.expirationTime,e(l,Z);else break;Z=t(u)}}function E(X){if(S=!1,A(X),!v)if(t(l)!==null)v=!0,Y(P);else{var Z=t(u);Z!==null&&Q(E,Z.startTime-X)}}function P(X,Z){v=!1,S&&(S=!1,_(D),D=-1),p=!0;var oe=h;try{for(A(Z),f=t(l);f!==null&&(!(f.expirationTime>Z)||X&&!k());){var ee=f.callback;if(typeof ee=="function"){f.callback=null,h=f.priorityLevel;var G=ee(f.expirationTime<=Z);Z=n.unstable_now(),typeof G=="function"?f.callback=G:f===t(l)&&r(l),A(Z)}else r(l);f=t(l)}if(f!==null)var ne=!0;else{var te=t(u);te!==null&&Q(E,te.startTime-Z),ne=!1}return ne}finally{f=null,h=oe,p=!1}}var O=!1,L=null,D=-1,F=5,U=-1;function k(){return!(n.unstable_now()-U<F)}function z(){if(L!==null){var X=n.unstable_now();U=X;var Z=!0;try{Z=L(!0,X)}finally{Z?W():(O=!1,L=null)}}else O=!1}var W;if(typeof w=="function")W=function(){w(z)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,se=j.port2;j.port1.onmessage=z,W=function(){se.postMessage(null)}}else W=function(){y(z,0)};function Y(X){L=X,O||(O=!0,W())}function Q(X,Z){D=y(function(){X(n.unstable_now())},Z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_continueExecution=function(){v||p||(v=!0,Y(P))},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(X){switch(h){case 1:case 2:case 3:var Z=3;break;default:Z=h}var oe=h;h=Z;try{return X()}finally{h=oe}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(X,Z){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var oe=h;h=X;try{return Z()}finally{h=oe}},n.unstable_scheduleCallback=function(X,Z,oe){var ee=n.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?ee+oe:ee):oe=ee,X){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=oe+G,X={id:c++,callback:Z,priorityLevel:X,startTime:oe,expirationTime:G,sortIndex:-1},oe>ee?(X.sortIndex=oe,e(u,X),t(l)===null&&X===t(u)&&(S?(_(D),D=-1):S=!0,Q(E,oe-ee))):(X.sortIndex=G,e(l,X),v||p||(v=!0,Y(P))),X},n.unstable_shouldYield=k,n.unstable_wrapCallback=function(X){var Z=h;return function(){var oe=h;h=Z;try{return X.apply(this,arguments)}finally{h=oe}}}})(Fb)),Fb}var aN;function E9(){return aN||(aN=1,kb.exports=A9()),kb.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sN;function T9(){if(sN)return Il;sN=1;var n=VS(),e=E9();function t(d){for(var m="https://reactjs.org/docs/error-decoder.html?invariant="+d,b=1;b<arguments.length;b++)m+="&args[]="+encodeURIComponent(arguments[b]);return"Minified React error #"+d+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(d,m){a(d,m),a(d+"Capture",m)}function a(d,m){for(i[d]=m,d=0;d<m.length;d++)r.add(m[d])}var s=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c={},f={};function h(d){return l.call(f,d)?!0:l.call(c,d)?!1:u.test(d)?f[d]=!0:(c[d]=!0,!1)}function p(d,m,b,R){if(b!==null&&b.type===0)return!1;switch(typeof m){case"function":case"symbol":return!0;case"boolean":return R?!1:b!==null?!b.acceptsBooleans:(d=d.toLowerCase().slice(0,5),d!=="data-"&&d!=="aria-");default:return!1}}function v(d,m,b,R){if(m===null||typeof m>"u"||p(d,m,b,R))return!0;if(R)return!1;if(b!==null)switch(b.type){case 3:return!m;case 4:return m===!1;case 5:return isNaN(m);case 6:return isNaN(m)||1>m}return!1}function S(d,m,b,R,V,K,pe){this.acceptsBooleans=m===2||m===3||m===4,this.attributeName=R,this.attributeNamespace=V,this.mustUseProperty=b,this.propertyName=d,this.type=m,this.sanitizeURL=K,this.removeEmptyString=pe}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(d){y[d]=new S(d,0,!1,d,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(d){var m=d[0];y[m]=new S(m,1,!1,d[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(d){y[d]=new S(d,2,!1,d.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(d){y[d]=new S(d,2,!1,d,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(d){y[d]=new S(d,3,!1,d.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(d){y[d]=new S(d,3,!0,d,null,!1,!1)}),["capture","download"].forEach(function(d){y[d]=new S(d,4,!1,d,null,!1,!1)}),["cols","rows","size","span"].forEach(function(d){y[d]=new S(d,6,!1,d,null,!1,!1)}),["rowSpan","start"].forEach(function(d){y[d]=new S(d,5,!1,d.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function w(d){return d[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(d){var m=d.replace(_,w);y[m]=new S(m,1,!1,d,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(d){var m=d.replace(_,w);y[m]=new S(m,1,!1,d,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(d){var m=d.replace(_,w);y[m]=new S(m,1,!1,d,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(d){y[d]=new S(d,1,!1,d.toLowerCase(),null,!1,!1)}),y.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(d){y[d]=new S(d,1,!1,d.toLowerCase(),null,!0,!0)});function A(d,m,b,R){var V=y.hasOwnProperty(m)?y[m]:null;(V!==null?V.type!==0:R||!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(v(m,b,V,R)&&(b=null),R||V===null?h(m)&&(b===null?d.removeAttribute(m):d.setAttribute(m,""+b)):V.mustUseProperty?d[V.propertyName]=b===null?V.type===3?!1:"":b:(m=V.attributeName,R=V.attributeNamespace,b===null?d.removeAttribute(m):(V=V.type,b=V===3||V===4&&b===!0?"":""+b,R?d.setAttributeNS(R,m,b):d.setAttribute(m,b))))}var E=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,P=Symbol.for("react.element"),O=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),k=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),se=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),Q=Symbol.for("react.offscreen"),X=Symbol.iterator;function Z(d){return d===null||typeof d!="object"?null:(d=X&&d[X]||d["@@iterator"],typeof d=="function"?d:null)}var oe=Object.assign,ee;function G(d){if(ee===void 0)try{throw Error()}catch(b){var m=b.stack.trim().match(/\n( *(at )?)/);ee=m&&m[1]||""}return`
`+ee+d}var ne=!1;function te(d,m){if(!d||ne)return"";ne=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(m)if(m=function(){throw Error()},Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(_t){var R=_t}Reflect.construct(d,[],m)}else{try{m.call()}catch(_t){R=_t}d.call(m.prototype)}else{try{throw Error()}catch(_t){R=_t}d()}}catch(_t){if(_t&&R&&typeof _t.stack=="string"){for(var V=_t.stack.split(`
`),K=R.stack.split(`
`),pe=V.length-1,ke=K.length-1;1<=pe&&0<=ke&&V[pe]!==K[ke];)ke--;for(;1<=pe&&0<=ke;pe--,ke--)if(V[pe]!==K[ke]){if(pe!==1||ke!==1)do if(pe--,ke--,0>ke||V[pe]!==K[ke]){var Ye=`
`+V[pe].replace(" at new "," at ");return d.displayName&&Ye.includes("<anonymous>")&&(Ye=Ye.replace("<anonymous>",d.displayName)),Ye}while(1<=pe&&0<=ke);break}}}finally{ne=!1,Error.prepareStackTrace=b}return(d=d?d.displayName||d.name:"")?G(d):""}function de(d){switch(d.tag){case 5:return G(d.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return d=te(d.type,!1),d;case 11:return d=te(d.type.render,!1),d;case 1:return d=te(d.type,!0),d;default:return""}}function me(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case L:return"Fragment";case O:return"Portal";case F:return"Profiler";case D:return"StrictMode";case W:return"Suspense";case j:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case k:return(d.displayName||"Context")+".Consumer";case U:return(d._context.displayName||"Context")+".Provider";case z:var m=d.render;return d=d.displayName,d||(d=m.displayName||m.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case se:return m=d.displayName||null,m!==null?m:me(d.type)||"Memo";case Y:m=d._payload,d=d._init;try{return me(d(m))}catch{}}return null}function be(d){var m=d.type;switch(d.tag){case 24:return"Cache";case 9:return(m.displayName||"Context")+".Consumer";case 10:return(m._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return d=m.render,d=d.displayName||d.name||"",m.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case 7:return"Fragment";case 5:return m;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return me(m);case 8:return m===D?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m}return null}function Ie(d){switch(typeof d){case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function Ee(d){var m=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function Xe(d){var m=Ee(d)?"checked":"value",b=Object.getOwnPropertyDescriptor(d.constructor.prototype,m),R=""+d[m];if(!d.hasOwnProperty(m)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var V=b.get,K=b.set;return Object.defineProperty(d,m,{configurable:!0,get:function(){return V.call(this)},set:function(pe){R=""+pe,K.call(this,pe)}}),Object.defineProperty(d,m,{enumerable:b.enumerable}),{getValue:function(){return R},setValue:function(pe){R=""+pe},stopTracking:function(){d._valueTracker=null,delete d[m]}}}}function tt(d){d._valueTracker||(d._valueTracker=Xe(d))}function Te(d){if(!d)return!1;var m=d._valueTracker;if(!m)return!0;var b=m.getValue(),R="";return d&&(R=Ee(d)?d.checked?"true":"false":d.value),d=R,d!==b?(m.setValue(d),!0):!1}function Je(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}function Se(d,m){var b=m.checked;return oe({},m,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:b??d._wrapperState.initialChecked})}function Ge(d,m){var b=m.defaultValue==null?"":m.defaultValue,R=m.checked!=null?m.checked:m.defaultChecked;b=Ie(m.value!=null?m.value:b),d._wrapperState={initialChecked:R,initialValue:b,controlled:m.type==="checkbox"||m.type==="radio"?m.checked!=null:m.value!=null}}function ye(d,m){m=m.checked,m!=null&&A(d,"checked",m,!1)}function Ct(d,m){ye(d,m);var b=Ie(m.value),R=m.type;if(b!=null)R==="number"?(b===0&&d.value===""||d.value!=b)&&(d.value=""+b):d.value!==""+b&&(d.value=""+b);else if(R==="submit"||R==="reset"){d.removeAttribute("value");return}m.hasOwnProperty("value")?mt(d,m.type,b):m.hasOwnProperty("defaultValue")&&mt(d,m.type,Ie(m.defaultValue)),m.checked==null&&m.defaultChecked!=null&&(d.defaultChecked=!!m.defaultChecked)}function ft(d,m,b){if(m.hasOwnProperty("value")||m.hasOwnProperty("defaultValue")){var R=m.type;if(!(R!=="submit"&&R!=="reset"||m.value!==void 0&&m.value!==null))return;m=""+d._wrapperState.initialValue,b||m===d.value||(d.value=m),d.defaultValue=m}b=d.name,b!==""&&(d.name=""),d.defaultChecked=!!d._wrapperState.initialChecked,b!==""&&(d.name=b)}function mt(d,m,b){(m!=="number"||Je(d.ownerDocument)!==d)&&(b==null?d.defaultValue=""+d._wrapperState.initialValue:d.defaultValue!==""+b&&(d.defaultValue=""+b))}var lt=Array.isArray;function ve(d,m,b,R){if(d=d.options,m){m={};for(var V=0;V<b.length;V++)m["$"+b[V]]=!0;for(b=0;b<d.length;b++)V=m.hasOwnProperty("$"+d[b].value),d[b].selected!==V&&(d[b].selected=V),V&&R&&(d[b].defaultSelected=!0)}else{for(b=""+Ie(b),m=null,V=0;V<d.length;V++){if(d[V].value===b){d[V].selected=!0,R&&(d[V].defaultSelected=!0);return}m!==null||d[V].disabled||(m=d[V])}m!==null&&(m.selected=!0)}}function le(d,m){if(m.dangerouslySetInnerHTML!=null)throw Error(t(91));return oe({},m,{value:void 0,defaultValue:void 0,children:""+d._wrapperState.initialValue})}function He(d,m){var b=m.value;if(b==null){if(b=m.children,m=m.defaultValue,b!=null){if(m!=null)throw Error(t(92));if(lt(b)){if(1<b.length)throw Error(t(93));b=b[0]}m=b}m==null&&(m=""),b=m}d._wrapperState={initialValue:Ie(b)}}function rt(d,m){var b=Ie(m.value),R=Ie(m.defaultValue);b!=null&&(b=""+b,b!==d.value&&(d.value=b),m.defaultValue==null&&d.defaultValue!==b&&(d.defaultValue=b)),R!=null&&(d.defaultValue=""+R)}function vt(d){var m=d.textContent;m===d._wrapperState.initialValue&&m!==""&&m!==null&&(d.value=m)}function ht(d){switch(d){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qt(d,m){return d==null||d==="http://www.w3.org/1999/xhtml"?ht(m):d==="http://www.w3.org/2000/svg"&&m==="foreignObject"?"http://www.w3.org/1999/xhtml":d}var Ft,Rt=(function(d){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(m,b,R,V){MSApp.execUnsafeLocalFunction(function(){return d(m,b,R,V)})}:d})(function(d,m){if(d.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in d)d.innerHTML=m;else{for(Ft=Ft||document.createElement("div"),Ft.innerHTML="<svg>"+m.valueOf().toString()+"</svg>",m=Ft.firstChild;d.firstChild;)d.removeChild(d.firstChild);for(;m.firstChild;)d.appendChild(m.firstChild)}});function tn(d,m){if(m){var b=d.firstChild;if(b&&b===d.lastChild&&b.nodeType===3){b.nodeValue=m;return}}d.textContent=m}var it={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zt=["Webkit","ms","Moz","O"];Object.keys(it).forEach(function(d){Zt.forEach(function(m){m=m+d.charAt(0).toUpperCase()+d.substring(1),it[m]=it[d]})});function Xt(d,m,b){return m==null||typeof m=="boolean"||m===""?"":b||typeof m!="number"||m===0||it.hasOwnProperty(d)&&it[d]?(""+m).trim():m+"px"}function un(d,m){d=d.style;for(var b in m)if(m.hasOwnProperty(b)){var R=b.indexOf("--")===0,V=Xt(b,m[b],R);b==="float"&&(b="cssFloat"),R?d.setProperty(b,V):d[b]=V}}var Wt=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mn(d,m){if(m){if(Wt[d]&&(m.children!=null||m.dangerouslySetInnerHTML!=null))throw Error(t(137,d));if(m.dangerouslySetInnerHTML!=null){if(m.children!=null)throw Error(t(60));if(typeof m.dangerouslySetInnerHTML!="object"||!("__html"in m.dangerouslySetInnerHTML))throw Error(t(61))}if(m.style!=null&&typeof m.style!="object")throw Error(t(62))}}function fn(d,m){if(d.indexOf("-")===-1)return typeof m.is=="string";switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nn=null;function Ke(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var ot=null,pt=null,It=null;function Ht(d){if(d=bl(d)){if(typeof ot!="function")throw Error(t(280));var m=d.stateNode;m&&(m=Uf(m),ot(d.stateNode,d.type,m))}}function Lt(d){pt?It?It.push(d):It=[d]:pt=d}function rn(){if(pt){var d=pt,m=It;if(It=pt=null,Ht(d),m)for(d=0;d<m.length;d++)Ht(m[d])}}function ir(d,m){return d(m)}function $n(){}var Gn=!1;function Br(d,m,b){if(Gn)return d(m,b);Gn=!0;try{return ir(d,m,b)}finally{Gn=!1,(pt!==null||It!==null)&&($n(),rn())}}function gn(d,m){var b=d.stateNode;if(b===null)return null;var R=Uf(b);if(R===null)return null;b=R[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(R=!R.disabled)||(d=d.type,R=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!R;break e;default:d=!1}if(d)return null;if(b&&typeof b!="function")throw Error(t(231,m,typeof b));return b}var Di=!1;if(s)try{var vi={};Object.defineProperty(vi,"passive",{get:function(){Di=!0}}),window.addEventListener("test",vi,vi),window.removeEventListener("test",vi,vi)}catch{Di=!1}function Er(d,m,b,R,V,K,pe,ke,Ye){var _t=Array.prototype.slice.call(arguments,3);try{m.apply(b,_t)}catch($t){this.onError($t)}}var xr=!1,Cr=null,zr=!1,Un=null,Po={onError:function(d){xr=!0,Cr=d}};function uo(d,m,b,R,V,K,pe,ke,Ye){xr=!1,Cr=null,Er.apply(Po,arguments)}function ue(d,m,b,R,V,K,pe,ke,Ye){if(uo.apply(this,arguments),xr){if(xr){var _t=Cr;xr=!1,Cr=null}else throw Error(t(198));zr||(zr=!0,Un=_t)}}function we(d){var m=d,b=d;if(d.alternate)for(;m.return;)m=m.return;else{d=m;do m=d,(m.flags&4098)!==0&&(b=m.return),d=m.return;while(d)}return m.tag===3?b:null}function ze(d){if(d.tag===13){var m=d.memoizedState;if(m===null&&(d=d.alternate,d!==null&&(m=d.memoizedState)),m!==null)return m.dehydrated}return null}function ct(d){if(we(d)!==d)throw Error(t(188))}function xt(d){var m=d.alternate;if(!m){if(m=we(d),m===null)throw Error(t(188));return m!==d?null:d}for(var b=d,R=m;;){var V=b.return;if(V===null)break;var K=V.alternate;if(K===null){if(R=V.return,R!==null){b=R;continue}break}if(V.child===K.child){for(K=V.child;K;){if(K===b)return ct(V),d;if(K===R)return ct(V),m;K=K.sibling}throw Error(t(188))}if(b.return!==R.return)b=V,R=K;else{for(var pe=!1,ke=V.child;ke;){if(ke===b){pe=!0,b=V,R=K;break}if(ke===R){pe=!0,R=V,b=K;break}ke=ke.sibling}if(!pe){for(ke=K.child;ke;){if(ke===b){pe=!0,b=K,R=V;break}if(ke===R){pe=!0,R=K,b=V;break}ke=ke.sibling}if(!pe)throw Error(t(189))}}if(b.alternate!==R)throw Error(t(190))}if(b.tag!==3)throw Error(t(188));return b.stateNode.current===b?d:m}function ae(d){return d=xt(d),d!==null?Ce(d):null}function Ce(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){var m=Ce(d);if(m!==null)return m;d=d.sibling}return null}var De=e.unstable_scheduleCallback,Ue=e.unstable_cancelCallback,Re=e.unstable_shouldYield,Ne=e.unstable_requestPaint,Be=e.unstable_now,Et=e.unstable_getCurrentPriorityLevel,ut=e.unstable_ImmediatePriority,St=e.unstable_UserBlockingPriority,Bt=e.unstable_NormalPriority,Ot=e.unstable_LowPriority,Qt=e.unstable_IdlePriority,cn=null,Kt=null;function _n(d){if(Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(cn,d,void 0,(d.current.flags&128)===128)}catch{}}var Vt=Math.clz32?Math.clz32:Sn,kt=Math.log,Mn=Math.LN2;function Sn(d){return d>>>=0,d===0?32:31-(kt(d)/Mn|0)|0}var gr=64,vr=4194304;function fr(d){switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return d&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return d}}function Fn(d,m){var b=d.pendingLanes;if(b===0)return 0;var R=0,V=d.suspendedLanes,K=d.pingedLanes,pe=b&268435455;if(pe!==0){var ke=pe&~V;ke!==0?R=fr(ke):(K&=pe,K!==0&&(R=fr(K)))}else pe=b&~V,pe!==0?R=fr(pe):K!==0&&(R=fr(K));if(R===0)return 0;if(m!==0&&m!==R&&(m&V)===0&&(V=R&-R,K=m&-m,V>=K||V===16&&(K&4194240)!==0))return m;if((R&4)!==0&&(R|=b&16),m=d.entangledLanes,m!==0)for(d=d.entanglements,m&=R;0<m;)b=31-Vt(m),V=1<<b,R|=d[b],m&=~V;return R}function kn(d,m){switch(d){case 1:case 2:case 4:return m+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pn(d,m){for(var b=d.suspendedLanes,R=d.pingedLanes,V=d.expirationTimes,K=d.pendingLanes;0<K;){var pe=31-Vt(K),ke=1<<pe,Ye=V[pe];Ye===-1?((ke&b)===0||(ke&R)!==0)&&(V[pe]=kn(ke,m)):Ye<=m&&(d.expiredLanes|=ke),K&=~ke}}function jn(d){return d=d.pendingLanes&-1073741825,d!==0?d:d&1073741824?1073741824:0}function er(){var d=gr;return gr<<=1,(gr&4194240)===0&&(gr=64),d}function Si(d){for(var m=[],b=0;31>b;b++)m.push(d);return m}function Pr(d,m,b){d.pendingLanes|=m,m!==536870912&&(d.suspendedLanes=0,d.pingedLanes=0),d=d.eventTimes,m=31-Vt(m),d[m]=b}function Io(d,m){var b=d.pendingLanes&~m;d.pendingLanes=m,d.suspendedLanes=0,d.pingedLanes=0,d.expiredLanes&=m,d.mutableReadLanes&=m,d.entangledLanes&=m,m=d.entanglements;var R=d.eventTimes;for(d=d.expirationTimes;0<b;){var V=31-Vt(b),K=1<<V;m[V]=0,R[V]=-1,d[V]=-1,b&=~K}}function oa(d,m){var b=d.entangledLanes|=m;for(d=d.entanglements;b;){var R=31-Vt(b),V=1<<R;V&m|d[R]&m&&(d[R]|=m),b&=~V}}var Ir=0;function ll(d){return d&=-d,1<d?4<d?(d&268435455)!==0?16:536870912:4:1}var Wu,Rf,yd,hs,Vl,ps=!1,ju=[],wi=null,ur=null,ms=null,Bn=new Map,hu=new Map,ul=[],cl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zi(d,m){switch(d){case"focusin":case"focusout":wi=null;break;case"dragenter":case"dragleave":ur=null;break;case"mouseover":case"mouseout":ms=null;break;case"pointerover":case"pointerout":Bn.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":hu.delete(m.pointerId)}}function fl(d,m,b,R,V,K){return d===null||d.nativeEvent!==K?(d={blockedOn:m,domEventName:b,eventSystemFlags:R,nativeEvent:K,targetContainers:[V]},m!==null&&(m=bl(m),m!==null&&Rf(m)),d):(d.eventSystemFlags|=R,m=d.targetContainers,V!==null&&m.indexOf(V)===-1&&m.push(V),d)}function Vc(d,m,b,R,V){switch(m){case"focusin":return wi=fl(wi,d,m,b,R,V),!0;case"dragenter":return ur=fl(ur,d,m,b,R,V),!0;case"mouseover":return ms=fl(ms,d,m,b,R,V),!0;case"pointerover":var K=V.pointerId;return Bn.set(K,fl(Bn.get(K)||null,d,m,b,R,V)),!0;case"gotpointercapture":return K=V.pointerId,hu.set(K,fl(hu.get(K)||null,d,m,b,R,V)),!0}return!1}function pu(d){var m=Zl(d.target);if(m!==null){var b=we(m);if(b!==null){if(m=b.tag,m===13){if(m=ze(b),m!==null){d.blockedOn=m,Vl(d.priority,function(){yd(b)});return}}else if(m===3&&b.stateNode.current.memoizedState.isDehydrated){d.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}d.blockedOn=null}function Gc(d){if(d.blockedOn!==null)return!1;for(var m=d.targetContainers;0<m.length;){var b=xa(d.domEventName,d.eventSystemFlags,m[0],d.nativeEvent);if(b===null){b=d.nativeEvent;var R=new b.constructor(b.type,b);nn=R,b.target.dispatchEvent(R),nn=null}else return m=bl(b),m!==null&&Rf(m),d.blockedOn=b,!1;m.shift()}return!0}function $u(d,m,b){Gc(d)&&b.delete(m)}function gs(){ps=!1,wi!==null&&Gc(wi)&&(wi=null),ur!==null&&Gc(ur)&&(ur=null),ms!==null&&Gc(ms)&&(ms=null),Bn.forEach($u),hu.forEach($u)}function Gl(d,m){d.blockedOn===m&&(d.blockedOn=null,ps||(ps=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,gs)))}function ks(d){function m(V){return Gl(V,d)}if(0<ju.length){Gl(ju[0],d);for(var b=1;b<ju.length;b++){var R=ju[b];R.blockedOn===d&&(R.blockedOn=null)}}for(wi!==null&&Gl(wi,d),ur!==null&&Gl(ur,d),ms!==null&&Gl(ms,d),Bn.forEach(m),hu.forEach(m),b=0;b<ul.length;b++)R=ul[b],R.blockedOn===d&&(R.blockedOn=null);for(;0<ul.length&&(b=ul[0],b.blockedOn===null);)pu(b),b.blockedOn===null&&ul.shift()}var Hi=E.ReactCurrentBatchConfig,Ba=!0;function dl(d,m,b,R){var V=Ir,K=Hi.transition;Hi.transition=null;try{Ir=1,ql(d,m,b,R)}finally{Ir=V,Hi.transition=K}}function Xu(d,m,b,R){var V=Ir,K=Hi.transition;Hi.transition=null;try{Ir=4,ql(d,m,b,R)}finally{Ir=V,Hi.transition=K}}function ql(d,m,b,R){if(Ba){var V=xa(d,m,b,R);if(V===null)Xc(d,m,R,Yu,b),zi(d,R);else if(Vc(V,d,m,b,R))R.stopPropagation();else if(zi(d,R),m&4&&-1<cl.indexOf(d)){for(;V!==null;){var K=bl(V);if(K!==null&&Wu(K),K=xa(d,m,b,R),K===null&&Xc(d,m,R,Yu,b),K===V)break;V=K}V!==null&&R.stopPropagation()}else Xc(d,m,R,null,b)}}var Yu=null;function xa(d,m,b,R){if(Yu=null,d=Ke(R),d=Zl(d),d!==null)if(m=we(d),m===null)d=null;else if(b=m.tag,b===13){if(d=ze(m),d!==null)return d;d=null}else if(b===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;d=null}else m!==d&&(d=null);return Yu=d,null}function Nf(d){switch(d){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Et()){case ut:return 1;case St:return 4;case Bt:case Ot:return 16;case Qt:return 536870912;default:return 16}default:return 16}}var za=null,Fs=null,Ki=null;function Ku(){if(Ki)return Ki;var d,m=Fs,b=m.length,R,V="value"in za?za.value:za.textContent,K=V.length;for(d=0;d<b&&m[d]===V[d];d++);var pe=b-d;for(R=1;R<=pe&&m[b-R]===V[K-R];R++);return Ki=V.slice(d,1<R?1-R:void 0)}function Ha(d){var m=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&m===13&&(d=13)):d=m,d===10&&(d=13),32<=d||d===13?d:0}function yo(){return!0}function mu(){return!1}function Ji(d){function m(b,R,V,K,pe){this._reactName=b,this._targetInst=V,this.type=R,this.nativeEvent=K,this.target=pe,this.currentTarget=null;for(var ke in d)d.hasOwnProperty(ke)&&(b=d[ke],this[ke]=b?b(K):K[ke]);return this.isDefaultPrevented=(K.defaultPrevented!=null?K.defaultPrevented:K.returnValue===!1)?yo:mu,this.isPropagationStopped=mu,this}return oe(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=yo)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=yo)},persist:function(){},isPersistent:yo}),m}var Wl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hl=Ji(Wl),jl=oe({},Wl,{view:0,detail:0}),pl=Ji(jl),Ro,_a,Wo,ml=oe({},jl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ln,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==Wo&&(Wo&&d.type==="mousemove"?(Ro=d.screenX-Wo.screenX,_a=d.screenY-Wo.screenY):_a=Ro=0,Wo=d),Ro)},movementY:function(d){return"movementY"in d?d.movementY:_a}}),Ju=Ji(ml),vs=oe({},ml,{dataTransfer:0}),gl=Ji(vs),$l=oe({},jl,{relatedTarget:0}),vl=Ji($l),gu=oe({},Wl,{animationName:0,elapsedTime:0,pseudoElement:0}),Xl=Ji(gu),qc=oe({},Wl,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),H=Ji(qc),fe=oe({},Wl,{data:0}),Le=Ji(fe),qe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},at={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},At={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gt(d){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(d):(d=At[d])?!!m[d]:!1}function ln(){return Gt}var Rn=oe({},jl,{key:function(d){if(d.key){var m=qe[d.key]||d.key;if(m!=="Unidentified")return m}return d.type==="keypress"?(d=Ha(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?at[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ln,charCode:function(d){return d.type==="keypress"?Ha(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?Ha(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),Xn=Ji(Rn),zn=oe({},ml,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yn=Ji(zn),Kr=oe({},jl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ln}),Wr=Ji(Kr),ni=oe({},Wl,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vi=Ji(ni),xo=oe({},ml,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),ns=Ji(xo),Sa=[9,13,27,32],ki=s&&"CompositionEvent"in window,co=null;s&&"documentMode"in document&&(co=document.documentMode);var ri=s&&"TextEvent"in window&&!co,yl=s&&(!ki||co&&8<co&&11>=co),jo=" ",Zu=!1;function Qu(d,m){switch(d){case"keyup":return Sa.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yl(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var Zi=!1;function ec(d,m){switch(d){case"compositionend":return Yl(m);case"keypress":return m.which!==32?null:(Zu=!0,jo);case"textInput":return d=m.data,d===jo&&Zu?null:d;default:return null}}function xl(d,m){if(Zi)return d==="compositionend"||!ki&&Qu(d,m)?(d=Ku(),Ki=Fs=za=null,Zi=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return yl&&m.locale!=="ko"?null:m.data;default:return null}}var Us={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vu(d){var m=d&&d.nodeName&&d.nodeName.toLowerCase();return m==="input"?!!Us[d.type]:m==="textarea"}function _o(d,m,b,R){Lt(R),m=bd(m,"onChange"),0<m.length&&(b=new hl("onChange","change",null,b,R),d.push({event:b,listeners:m}))}var _l=null,Sl=null;function Lf(d){Jl(d,0)}function So(d){var m=Gi(d);if(Te(m))return d}function Wc(d,m){if(d==="change")return m}var yu=!1;if(s){var aa;if(s){var Va="oninput"in document;if(!Va){var No=document.createElement("div");No.setAttribute("oninput","return;"),Va=typeof No.oninput=="function"}aa=Va}else aa=!1;yu=aa&&(!document.documentMode||9<document.documentMode)}function Qi(){_l&&(_l.detachEvent("onpropertychange",Bs),Sl=_l=null)}function Bs(d){if(d.propertyName==="value"&&So(Sl)){var m=[];_o(m,Sl,d,Ke(d)),Br(Lf,m)}}function wa(d,m,b){d==="focusin"?(Qi(),_l=m,Sl=b,_l.attachEvent("onpropertychange",Bs)):d==="focusout"&&Qi()}function wl(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return So(Sl)}function xu(d,m){if(d==="click")return So(m)}function Or(d,m){if(d==="input"||d==="change")return So(m)}function Kl(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var $o=typeof Object.is=="function"?Object.is:Kl;function Ga(d,m){if($o(d,m))return!0;if(typeof d!="object"||d===null||typeof m!="object"||m===null)return!1;var b=Object.keys(d),R=Object.keys(m);if(b.length!==R.length)return!1;for(R=0;R<b.length;R++){var V=b[R];if(!l.call(m,V)||!$o(d[V],m[V]))return!1}return!0}function ba(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function eo(d,m){var b=ba(d);d=0;for(var R;b;){if(b.nodeType===3){if(R=d+b.textContent.length,d<=m&&R>=m)return{node:b,offset:m-d};d=R}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=ba(b)}}function rs(d,m){return d&&m?d===m?!0:d&&d.nodeType===3?!1:m&&m.nodeType===3?rs(d,m.parentNode):"contains"in d?d.contains(m):d.compareDocumentPosition?!!(d.compareDocumentPosition(m)&16):!1:!1}function ii(){for(var d=window,m=Je();m instanceof d.HTMLIFrameElement;){try{var b=typeof m.contentWindow.location.href=="string"}catch{b=!1}if(b)d=m.contentWindow;else break;m=Je(d.document)}return m}function Pi(d){var m=d&&d.nodeName&&d.nodeName.toLowerCase();return m&&(m==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||m==="textarea"||d.contentEditable==="true")}function bi(d){var m=ii(),b=d.focusedElem,R=d.selectionRange;if(m!==b&&b&&b.ownerDocument&&rs(b.ownerDocument.documentElement,b)){if(R!==null&&Pi(b)){if(m=R.start,d=R.end,d===void 0&&(d=m),"selectionStart"in b)b.selectionStart=m,b.selectionEnd=Math.min(d,b.value.length);else if(d=(m=b.ownerDocument||document)&&m.defaultView||window,d.getSelection){d=d.getSelection();var V=b.textContent.length,K=Math.min(R.start,V);R=R.end===void 0?K:Math.min(R.end,V),!d.extend&&K>R&&(V=R,R=K,K=V),V=eo(b,K);var pe=eo(b,R);V&&pe&&(d.rangeCount!==1||d.anchorNode!==V.node||d.anchorOffset!==V.offset||d.focusNode!==pe.node||d.focusOffset!==pe.offset)&&(m=m.createRange(),m.setStart(V.node,V.offset),d.removeAllRanges(),K>R?(d.addRange(m),d.extend(pe.node,pe.offset)):(m.setEnd(pe.node,pe.offset),d.addRange(m)))}}for(m=[],d=b;d=d.parentNode;)d.nodeType===1&&m.push({element:d,left:d.scrollLeft,top:d.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<m.length;b++)d=m[b],d.element.scrollLeft=d.left,d.element.scrollTop=d.top}}var _u=s&&"documentMode"in document&&11>=document.documentMode,to=null,Aa=null,jr=null,tr=!1;function Ii(d,m,b){var R=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;tr||to==null||to!==Je(R)||(R=to,"selectionStart"in R&&Pi(R)?R={start:R.selectionStart,end:R.selectionEnd}:(R=(R.ownerDocument&&R.ownerDocument.defaultView||window).getSelection(),R={anchorNode:R.anchorNode,anchorOffset:R.anchorOffset,focusNode:R.focusNode,focusOffset:R.focusOffset}),jr&&Ga(jr,R)||(jr=R,R=bd(Aa,"onSelect"),0<R.length&&(m=new hl("onSelect","select",null,m,b),d.push({event:m,listeners:R}),m.target=to)))}function Ri(d,m){var b={};return b[d.toLowerCase()]=m.toLowerCase(),b["Webkit"+d]="webkit"+m,b["Moz"+d]="moz"+m,b}var sa={animationend:Ri("Animation","AnimationEnd"),animationiteration:Ri("Animation","AnimationIteration"),animationstart:Ri("Animation","AnimationStart"),transitionend:Ri("Transition","TransitionEnd")},Lo={},la={};s&&(la=document.createElement("div").style,"AnimationEvent"in window||(delete sa.animationend.animation,delete sa.animationiteration.animation,delete sa.animationstart.animation),"TransitionEvent"in window||delete sa.transitionend.transition);function is(d){if(Lo[d])return Lo[d];if(!sa[d])return d;var m=sa[d],b;for(b in m)if(m.hasOwnProperty(b)&&b in la)return Lo[d]=m[b];return d}var jc=is("animationend"),$c=is("animationiteration"),xd=is("animationstart"),_d=is("transitionend"),Sd=new Map,wd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zs(d,m){Sd.set(d,m),o(m,[d])}for(var tc=0;tc<wd.length;tc++){var Xo=wd[tc],ua=Xo.toLowerCase(),Of=Xo[0].toUpperCase()+Xo.slice(1);zs(ua,"on"+Of)}zs(jc,"onAnimationEnd"),zs($c,"onAnimationIteration"),zs(xd,"onAnimationStart"),zs("dblclick","onDoubleClick"),zs("focusin","onFocus"),zs("focusout","onBlur"),zs(_d,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Df=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hs));function nc(d,m,b){var R=d.type||"unknown-event";d.currentTarget=b,ue(R,m,void 0,d),d.currentTarget=null}function Jl(d,m){m=(m&4)!==0;for(var b=0;b<d.length;b++){var R=d[b],V=R.event;R=R.listeners;e:{var K=void 0;if(m)for(var pe=R.length-1;0<=pe;pe--){var ke=R[pe],Ye=ke.instance,_t=ke.currentTarget;if(ke=ke.listener,Ye!==K&&V.isPropagationStopped())break e;nc(V,ke,_t),K=Ye}else for(pe=0;pe<R.length;pe++){if(ke=R[pe],Ye=ke.instance,_t=ke.currentTarget,ke=ke.listener,Ye!==K&&V.isPropagationStopped())break e;nc(V,ke,_t),K=Ye}}}if(zr)throw d=Un,zr=!1,Un=null,d}function oi(d,m){var b=m[Oo];b===void 0&&(b=m[Oo]=new Set);var R=d+"__bubble";b.has(R)||(ic(m,d,2,!1),b.add(R))}function kf(d,m,b){var R=0;m&&(R|=4),ic(b,d,R,m)}var rc="_reactListening"+Math.random().toString(36).slice(2);function Su(d){if(!d[rc]){d[rc]=!0,r.forEach(function(b){b!=="selectionchange"&&(Df.has(b)||kf(b,!1,d),kf(b,!0,d))});var m=d.nodeType===9?d:d.ownerDocument;m===null||m[rc]||(m[rc]=!0,kf("selectionchange",!1,m))}}function ic(d,m,b,R){switch(Nf(m)){case 1:var V=dl;break;case 4:V=Xu;break;default:V=ql}b=V.bind(null,m,b,d),V=void 0,!Di||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(V=!0),R?V!==void 0?d.addEventListener(m,b,{capture:!0,passive:V}):d.addEventListener(m,b,!0):V!==void 0?d.addEventListener(m,b,{passive:V}):d.addEventListener(m,b,!1)}function Xc(d,m,b,R,V){var K=R;if((m&1)===0&&(m&2)===0&&R!==null)e:for(;;){if(R===null)return;var pe=R.tag;if(pe===3||pe===4){var ke=R.stateNode.containerInfo;if(ke===V||ke.nodeType===8&&ke.parentNode===V)break;if(pe===4)for(pe=R.return;pe!==null;){var Ye=pe.tag;if((Ye===3||Ye===4)&&(Ye=pe.stateNode.containerInfo,Ye===V||Ye.nodeType===8&&Ye.parentNode===V))return;pe=pe.return}for(;ke!==null;){if(pe=Zl(ke),pe===null)return;if(Ye=pe.tag,Ye===5||Ye===6){R=K=pe;continue e}ke=ke.parentNode}}R=R.return}Br(function(){var _t=K,$t=Ke(b),Yt=[];e:{var jt=Sd.get(d);if(jt!==void 0){var wn=hl,Cn=d;switch(d){case"keypress":if(Ha(b)===0)break e;case"keydown":case"keyup":wn=Xn;break;case"focusin":Cn="focus",wn=vl;break;case"focusout":Cn="blur",wn=vl;break;case"beforeblur":case"afterblur":wn=vl;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":wn=Ju;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":wn=gl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":wn=Wr;break;case jc:case $c:case xd:wn=Xl;break;case _d:wn=Vi;break;case"scroll":wn=pl;break;case"wheel":wn=ns;break;case"copy":case"cut":case"paste":wn=H;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":wn=Yn}var In=(m&4)!==0,Zo=!In&&d==="scroll",dt=In?jt!==null?jt+"Capture":null:jt;In=[];for(var Qe=_t,gt;Qe!==null;){gt=Qe;var en=gt.stateNode;if(gt.tag===5&&en!==null&&(gt=en,dt!==null&&(en=gn(Qe,dt),en!=null&&In.push(Yc(Qe,en,gt)))),Zo)break;Qe=Qe.return}0<In.length&&(jt=new wn(jt,Cn,null,b,$t),Yt.push({event:jt,listeners:In}))}}if((m&7)===0){e:{if(jt=d==="mouseover"||d==="pointerover",wn=d==="mouseout"||d==="pointerout",jt&&b!==nn&&(Cn=b.relatedTarget||b.fromElement)&&(Zl(Cn)||Cn[fo]))break e;if((wn||jt)&&(jt=$t.window===$t?$t:(jt=$t.ownerDocument)?jt.defaultView||jt.parentWindow:window,wn?(Cn=b.relatedTarget||b.toElement,wn=_t,Cn=Cn?Zl(Cn):null,Cn!==null&&(Zo=we(Cn),Cn!==Zo||Cn.tag!==5&&Cn.tag!==6)&&(Cn=null)):(wn=null,Cn=_t),wn!==Cn)){if(In=Ju,en="onMouseLeave",dt="onMouseEnter",Qe="mouse",(d==="pointerout"||d==="pointerover")&&(In=Yn,en="onPointerLeave",dt="onPointerEnter",Qe="pointer"),Zo=wn==null?jt:Gi(wn),gt=Cn==null?jt:Gi(Cn),jt=new In(en,Qe+"leave",wn,b,$t),jt.target=Zo,jt.relatedTarget=gt,en=null,Zl($t)===_t&&(In=new In(dt,Qe+"enter",Cn,b,$t),In.target=gt,In.relatedTarget=Zo,en=In),Zo=en,wn&&Cn)t:{for(In=wn,dt=Cn,Qe=0,gt=In;gt;gt=wu(gt))Qe++;for(gt=0,en=dt;en;en=wu(en))gt++;for(;0<Qe-gt;)In=wu(In),Qe--;for(;0<gt-Qe;)dt=wu(dt),gt--;for(;Qe--;){if(In===dt||dt!==null&&In===dt.alternate)break t;In=wu(In),dt=wu(dt)}In=null}else In=null;wn!==null&&om(Yt,jt,wn,In,!1),Cn!==null&&Zo!==null&&om(Yt,Zo,Cn,In,!0)}}e:{if(jt=_t?Gi(_t):window,wn=jt.nodeName&&jt.nodeName.toLowerCase(),wn==="select"||wn==="input"&&jt.type==="file")var On=Wc;else if(vu(jt))if(yu)On=Or;else{On=wl;var qn=wa}else(wn=jt.nodeName)&&wn.toLowerCase()==="input"&&(jt.type==="checkbox"||jt.type==="radio")&&(On=xu);if(On&&(On=On(d,_t))){_o(Yt,On,b,$t);break e}qn&&qn(d,jt,_t),d==="focusout"&&(qn=jt._wrapperState)&&qn.controlled&&jt.type==="number"&&mt(jt,"number",jt.value)}switch(qn=_t?Gi(_t):window,d){case"focusin":(vu(qn)||qn.contentEditable==="true")&&(to=qn,Aa=_t,jr=null);break;case"focusout":jr=Aa=to=null;break;case"mousedown":tr=!0;break;case"contextmenu":case"mouseup":case"dragend":tr=!1,Ii(Yt,b,$t);break;case"selectionchange":if(_u)break;case"keydown":case"keyup":Ii(Yt,b,$t)}var Wn;if(ki)e:{switch(d){case"compositionstart":var rr="onCompositionStart";break e;case"compositionend":rr="onCompositionEnd";break e;case"compositionupdate":rr="onCompositionUpdate";break e}rr=void 0}else Zi?Qu(d,b)&&(rr="onCompositionEnd"):d==="keydown"&&b.keyCode===229&&(rr="onCompositionStart");rr&&(yl&&b.locale!=="ko"&&(Zi||rr!=="onCompositionStart"?rr==="onCompositionEnd"&&Zi&&(Wn=Ku()):(za=$t,Fs="value"in za?za.value:za.textContent,Zi=!0)),qn=bd(_t,rr),0<qn.length&&(rr=new Le(rr,d,null,b,$t),Yt.push({event:rr,listeners:qn}),Wn?rr.data=Wn:(Wn=Yl(b),Wn!==null&&(rr.data=Wn)))),(Wn=ri?ec(d,b):xl(d,b))&&(_t=bd(_t,"onBeforeInput"),0<_t.length&&($t=new Le("onBeforeInput","beforeinput",null,b,$t),Yt.push({event:$t,listeners:_t}),$t.data=Wn))}Jl(Yt,m)})}function Yc(d,m,b){return{instance:d,listener:m,currentTarget:b}}function bd(d,m){for(var b=m+"Capture",R=[];d!==null;){var V=d,K=V.stateNode;V.tag===5&&K!==null&&(V=K,K=gn(d,b),K!=null&&R.unshift(Yc(d,K,V)),K=gn(d,m),K!=null&&R.push(Yc(d,K,V))),d=d.return}return R}function wu(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5);return d||null}function om(d,m,b,R,V){for(var K=m._reactName,pe=[];b!==null&&b!==R;){var ke=b,Ye=ke.alternate,_t=ke.stateNode;if(Ye!==null&&Ye===R)break;ke.tag===5&&_t!==null&&(ke=_t,V?(Ye=gn(b,K),Ye!=null&&pe.unshift(Yc(b,Ye,ke))):V||(Ye=gn(b,K),Ye!=null&&pe.push(Yc(b,Ye,ke)))),b=b.return}pe.length!==0&&d.push({event:m,listeners:pe})}var av=/\r\n?/g,am=/\u0000|\uFFFD/g;function Ih(d){return(typeof d=="string"?d:""+d).replace(av,`
`).replace(am,"")}function Ff(d,m,b){if(m=Ih(m),Ih(d)!==m&&b)throw Error(t(425))}function oc(){}var bu=null,ac=null;function Rh(d,m){return d==="textarea"||d==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var Nh=typeof setTimeout=="function"?setTimeout:void 0,Ad=typeof clearTimeout=="function"?clearTimeout:void 0,Ed=typeof Promise=="function"?Promise:void 0,sv=typeof queueMicrotask=="function"?queueMicrotask:typeof Ed<"u"?function(d){return Ed.resolve(null).then(d).catch(sm)}:Nh;function sm(d){setTimeout(function(){throw d})}function Td(d,m){var b=m,R=0;do{var V=b.nextSibling;if(d.removeChild(b),V&&V.nodeType===8)if(b=V.data,b==="/$"){if(R===0){d.removeChild(V),ks(m);return}R--}else b!=="$"&&b!=="$?"&&b!=="$!"||R++;b=V}while(b);ks(m)}function ca(d){for(;d!=null;d=d.nextSibling){var m=d.nodeType;if(m===1||m===3)break;if(m===8){if(m=d.data,m==="$"||m==="$!"||m==="$?")break;if(m==="/$")return null}}return d}function os(d){d=d.previousSibling;for(var m=0;d;){if(d.nodeType===8){var b=d.data;if(b==="$"||b==="$!"||b==="$?"){if(m===0)return d;m--}else b==="/$"&&m++}d=d.previousSibling}return null}var Ea=Math.random().toString(36).slice(2),wo="__reactFiber$"+Ea,sc="__reactProps$"+Ea,fo="__reactContainer$"+Ea,Oo="__reactEvents$"+Ea,Md="__reactListeners$"+Ea,Cd="__reactHandles$"+Ea;function Zl(d){var m=d[wo];if(m)return m;for(var b=d.parentNode;b;){if(m=b[fo]||b[wo]){if(b=m.alternate,m.child!==null||b!==null&&b.child!==null)for(d=os(d);d!==null;){if(b=d[wo])return b;d=os(d)}return m}d=b,b=d.parentNode}return null}function bl(d){return d=d[wo]||d[fo],!d||d.tag!==5&&d.tag!==6&&d.tag!==13&&d.tag!==3?null:d}function Gi(d){if(d.tag===5||d.tag===6)return d.stateNode;throw Error(t(33))}function Uf(d){return d[sc]||null}var Lh=[],no=-1;function Ai(d){return{current:d}}function $r(d){0>no||(d.current=Lh[no],Lh[no]=null,no--)}function Jr(d,m){no++,Lh[no]=d.current,d.current=m}var Ql={},Do=Ai(Ql),Ta=Ai(!1),eu=Ql;function lc(d,m){var b=d.type.contextTypes;if(!b)return Ql;var R=d.stateNode;if(R&&R.__reactInternalMemoizedUnmaskedChildContext===m)return R.__reactInternalMemoizedMaskedChildContext;var V={},K;for(K in b)V[K]=m[K];return R&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=m,d.__reactInternalMemoizedMaskedChildContext=V),V}function fa(d){return d=d.childContextTypes,d!=null}function Bf(){$r(Ta),$r(Do)}function Oh(d,m,b){if(Do.current!==Ql)throw Error(t(168));Jr(Do,m),Jr(Ta,b)}function Kc(d,m,b){var R=d.stateNode;if(m=m.childContextTypes,typeof R.getChildContext!="function")return b;R=R.getChildContext();for(var V in R)if(!(V in m))throw Error(t(108,be(d)||"Unknown",V));return oe({},b,R)}function Al(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||Ql,eu=Do.current,Jr(Do,d),Jr(Ta,Ta.current),!0}function Dh(d,m,b){var R=d.stateNode;if(!R)throw Error(t(169));b?(d=Kc(d,m,eu),R.__reactInternalMemoizedMergedChildContext=d,$r(Ta),$r(Do),Jr(Do,d)):$r(Ta),Jr(Ta,b)}var Vs=null,Jc=!1,M=!1;function N(d){Vs===null?Vs=[d]:Vs.push(d)}function q(d){Jc=!0,N(d)}function J(){if(!M&&Vs!==null){M=!0;var d=0,m=Ir;try{var b=Vs;for(Ir=1;d<b.length;d++){var R=b[d];do R=R(!0);while(R!==null)}Vs=null,Jc=!1}catch(V){throw Vs!==null&&(Vs=Vs.slice(d+1)),De(ut,J),V}finally{Ir=m,M=!1}}return null}var ce=[],he=0,ge=null,xe=0,_e=[],Ae=0,je=null,Fe=1,st="";function Ze(d,m){ce[he++]=xe,ce[he++]=ge,ge=d,xe=m}function Dt(d,m,b){_e[Ae++]=Fe,_e[Ae++]=st,_e[Ae++]=je,je=d;var R=Fe;d=st;var V=32-Vt(R)-1;R&=~(1<<V),b+=1;var K=32-Vt(m)+V;if(30<K){var pe=V-V%5;K=(R&(1<<pe)-1).toString(32),R>>=pe,V-=pe,Fe=1<<32-Vt(m)+V|b<<V|R,st=K+d}else Fe=1<<K|b<<V|R,st=d}function wt(d){d.return!==null&&(Ze(d,1),Dt(d,1,0))}function We(d){for(;d===ge;)ge=ce[--he],ce[he]=null,xe=ce[--he],ce[he]=null;for(;d===je;)je=_e[--Ae],_e[Ae]=null,st=_e[--Ae],_e[Ae]=null,Fe=_e[--Ae],_e[Ae]=null}var $e=null,Tt=null,Mt=!1,Nt=null;function dn(d,m){var b=Iu(5,null,null,0);b.elementType="DELETED",b.stateNode=m,b.return=d,m=d.deletions,m===null?(d.deletions=[b],d.flags|=16):m.push(b)}function on(d,m){switch(d.tag){case 5:var b=d.type;return m=m.nodeType!==1||b.toLowerCase()!==m.nodeName.toLowerCase()?null:m,m!==null?(d.stateNode=m,$e=d,Tt=ca(m.firstChild),!0):!1;case 6:return m=d.pendingProps===""||m.nodeType!==3?null:m,m!==null?(d.stateNode=m,$e=d,Tt=null,!0):!1;case 13:return m=m.nodeType!==8?null:m,m!==null?(b=je!==null?{id:Fe,overflow:st}:null,d.memoizedState={dehydrated:m,treeContext:b,retryLane:1073741824},b=Iu(18,null,null,0),b.stateNode=m,b.return=d,d.child=b,$e=d,Tt=null,!0):!1;default:return!1}}function Dn(d){return(d.mode&1)!==0&&(d.flags&128)===0}function sn(d){if(Mt){var m=Tt;if(m){var b=m;if(!on(d,m)){if(Dn(d))throw Error(t(418));m=ca(b.nextSibling);var R=$e;m&&on(d,m)?dn(R,b):(d.flags=d.flags&-4097|2,Mt=!1,$e=d)}}else{if(Dn(d))throw Error(t(418));d.flags=d.flags&-4097|2,Mt=!1,$e=d}}}function Rr(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;$e=d}function Nr(d){if(d!==$e)return!1;if(!Mt)return Rr(d),Mt=!0,!1;var m;if((m=d.tag!==3)&&!(m=d.tag!==5)&&(m=d.type,m=m!=="head"&&m!=="body"&&!Rh(d.type,d.memoizedProps)),m&&(m=Tt)){if(Dn(d))throw Tr(),Error(t(418));for(;m;)dn(d,m),m=ca(m.nextSibling)}if(Rr(d),d.tag===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(t(317));e:{for(d=d.nextSibling,m=0;d;){if(d.nodeType===8){var b=d.data;if(b==="/$"){if(m===0){Tt=ca(d.nextSibling);break e}m--}else b!=="$"&&b!=="$!"&&b!=="$?"||m++}d=d.nextSibling}Tt=null}}else Tt=$e?ca(d.stateNode.nextSibling):null;return!0}function Tr(){for(var d=Tt;d;)d=ca(d.nextSibling)}function nr(){Tt=$e=null,Mt=!1}function kr(d){Nt===null?Nt=[d]:Nt.push(d)}var ai=E.ReactCurrentBatchConfig;function Kn(d,m,b){if(d=b.ref,d!==null&&typeof d!="function"&&typeof d!="object"){if(b._owner){if(b=b._owner,b){if(b.tag!==1)throw Error(t(309));var R=b.stateNode}if(!R)throw Error(t(147,d));var V=R,K=""+d;return m!==null&&m.ref!==null&&typeof m.ref=="function"&&m.ref._stringRef===K?m.ref:(m=function(pe){var ke=V.refs;pe===null?delete ke[K]:ke[K]=pe},m._stringRef=K,m)}if(typeof d!="string")throw Error(t(284));if(!b._owner)throw Error(t(290,d))}return d}function Ni(d,m){throw d=Object.prototype.toString.call(m),Error(t(31,d==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":d))}function da(d){var m=d._init;return m(d._payload)}function qi(d){function m(dt,Qe){if(d){var gt=dt.deletions;gt===null?(dt.deletions=[Qe],dt.flags|=16):gt.push(Qe)}}function b(dt,Qe){if(!d)return null;for(;Qe!==null;)m(dt,Qe),Qe=Qe.sibling;return null}function R(dt,Qe){for(dt=new Map;Qe!==null;)Qe.key!==null?dt.set(Qe.key,Qe):dt.set(Qe.index,Qe),Qe=Qe.sibling;return dt}function V(dt,Qe){return dt=Bd(dt,Qe),dt.index=0,dt.sibling=null,dt}function K(dt,Qe,gt){return dt.index=gt,d?(gt=dt.alternate,gt!==null?(gt=gt.index,gt<Qe?(dt.flags|=2,Qe):gt):(dt.flags|=2,Qe)):(dt.flags|=1048576,Qe)}function pe(dt){return d&&dt.alternate===null&&(dt.flags|=2),dt}function ke(dt,Qe,gt,en){return Qe===null||Qe.tag!==6?(Qe=Mb(gt,dt.mode,en),Qe.return=dt,Qe):(Qe=V(Qe,gt),Qe.return=dt,Qe)}function Ye(dt,Qe,gt,en){var On=gt.type;return On===L?$t(dt,Qe,gt.props.children,en,gt.key):Qe!==null&&(Qe.elementType===On||typeof On=="object"&&On!==null&&On.$$typeof===Y&&da(On)===Qe.type)?(en=V(Qe,gt.props),en.ref=Kn(dt,Qe,gt),en.return=dt,en):(en=E1(gt.type,gt.key,gt.props,null,dt.mode,en),en.ref=Kn(dt,Qe,gt),en.return=dt,en)}function _t(dt,Qe,gt,en){return Qe===null||Qe.tag!==4||Qe.stateNode.containerInfo!==gt.containerInfo||Qe.stateNode.implementation!==gt.implementation?(Qe=Cb(gt,dt.mode,en),Qe.return=dt,Qe):(Qe=V(Qe,gt.children||[]),Qe.return=dt,Qe)}function $t(dt,Qe,gt,en,On){return Qe===null||Qe.tag!==7?(Qe=qh(gt,dt.mode,en,On),Qe.return=dt,Qe):(Qe=V(Qe,gt),Qe.return=dt,Qe)}function Yt(dt,Qe,gt){if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number")return Qe=Mb(""+Qe,dt.mode,gt),Qe.return=dt,Qe;if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case P:return gt=E1(Qe.type,Qe.key,Qe.props,null,dt.mode,gt),gt.ref=Kn(dt,null,Qe),gt.return=dt,gt;case O:return Qe=Cb(Qe,dt.mode,gt),Qe.return=dt,Qe;case Y:var en=Qe._init;return Yt(dt,en(Qe._payload),gt)}if(lt(Qe)||Z(Qe))return Qe=qh(Qe,dt.mode,gt,null),Qe.return=dt,Qe;Ni(dt,Qe)}return null}function jt(dt,Qe,gt,en){var On=Qe!==null?Qe.key:null;if(typeof gt=="string"&&gt!==""||typeof gt=="number")return On!==null?null:ke(dt,Qe,""+gt,en);if(typeof gt=="object"&&gt!==null){switch(gt.$$typeof){case P:return gt.key===On?Ye(dt,Qe,gt,en):null;case O:return gt.key===On?_t(dt,Qe,gt,en):null;case Y:return On=gt._init,jt(dt,Qe,On(gt._payload),en)}if(lt(gt)||Z(gt))return On!==null?null:$t(dt,Qe,gt,en,null);Ni(dt,gt)}return null}function wn(dt,Qe,gt,en,On){if(typeof en=="string"&&en!==""||typeof en=="number")return dt=dt.get(gt)||null,ke(Qe,dt,""+en,On);if(typeof en=="object"&&en!==null){switch(en.$$typeof){case P:return dt=dt.get(en.key===null?gt:en.key)||null,Ye(Qe,dt,en,On);case O:return dt=dt.get(en.key===null?gt:en.key)||null,_t(Qe,dt,en,On);case Y:var qn=en._init;return wn(dt,Qe,gt,qn(en._payload),On)}if(lt(en)||Z(en))return dt=dt.get(gt)||null,$t(Qe,dt,en,On,null);Ni(Qe,en)}return null}function Cn(dt,Qe,gt,en){for(var On=null,qn=null,Wn=Qe,rr=Qe=0,Ya=null;Wn!==null&&rr<gt.length;rr++){Wn.index>rr?(Ya=Wn,Wn=null):Ya=Wn.sibling;var li=jt(dt,Wn,gt[rr],en);if(li===null){Wn===null&&(Wn=Ya);break}d&&Wn&&li.alternate===null&&m(dt,Wn),Qe=K(li,Qe,rr),qn===null?On=li:qn.sibling=li,qn=li,Wn=Ya}if(rr===gt.length)return b(dt,Wn),Mt&&Ze(dt,rr),On;if(Wn===null){for(;rr<gt.length;rr++)Wn=Yt(dt,gt[rr],en),Wn!==null&&(Qe=K(Wn,Qe,rr),qn===null?On=Wn:qn.sibling=Wn,qn=Wn);return Mt&&Ze(dt,rr),On}for(Wn=R(dt,Wn);rr<gt.length;rr++)Ya=wn(Wn,dt,rr,gt[rr],en),Ya!==null&&(d&&Ya.alternate!==null&&Wn.delete(Ya.key===null?rr:Ya.key),Qe=K(Ya,Qe,rr),qn===null?On=Ya:qn.sibling=Ya,qn=Ya);return d&&Wn.forEach(function(zd){return m(dt,zd)}),Mt&&Ze(dt,rr),On}function In(dt,Qe,gt,en){var On=Z(gt);if(typeof On!="function")throw Error(t(150));if(gt=On.call(gt),gt==null)throw Error(t(151));for(var qn=On=null,Wn=Qe,rr=Qe=0,Ya=null,li=gt.next();Wn!==null&&!li.done;rr++,li=gt.next()){Wn.index>rr?(Ya=Wn,Wn=null):Ya=Wn.sibling;var zd=jt(dt,Wn,li.value,en);if(zd===null){Wn===null&&(Wn=Ya);break}d&&Wn&&zd.alternate===null&&m(dt,Wn),Qe=K(zd,Qe,rr),qn===null?On=zd:qn.sibling=zd,qn=zd,Wn=Ya}if(li.done)return b(dt,Wn),Mt&&Ze(dt,rr),On;if(Wn===null){for(;!li.done;rr++,li=gt.next())li=Yt(dt,li.value,en),li!==null&&(Qe=K(li,Qe,rr),qn===null?On=li:qn.sibling=li,qn=li);return Mt&&Ze(dt,rr),On}for(Wn=R(dt,Wn);!li.done;rr++,li=gt.next())li=wn(Wn,dt,rr,li.value,en),li!==null&&(d&&li.alternate!==null&&Wn.delete(li.key===null?rr:li.key),Qe=K(li,Qe,rr),qn===null?On=li:qn.sibling=li,qn=li);return d&&Wn.forEach(function(v9){return m(dt,v9)}),Mt&&Ze(dt,rr),On}function Zo(dt,Qe,gt,en){if(typeof gt=="object"&&gt!==null&&gt.type===L&&gt.key===null&&(gt=gt.props.children),typeof gt=="object"&&gt!==null){switch(gt.$$typeof){case P:e:{for(var On=gt.key,qn=Qe;qn!==null;){if(qn.key===On){if(On=gt.type,On===L){if(qn.tag===7){b(dt,qn.sibling),Qe=V(qn,gt.props.children),Qe.return=dt,dt=Qe;break e}}else if(qn.elementType===On||typeof On=="object"&&On!==null&&On.$$typeof===Y&&da(On)===qn.type){b(dt,qn.sibling),Qe=V(qn,gt.props),Qe.ref=Kn(dt,qn,gt),Qe.return=dt,dt=Qe;break e}b(dt,qn);break}else m(dt,qn);qn=qn.sibling}gt.type===L?(Qe=qh(gt.props.children,dt.mode,en,gt.key),Qe.return=dt,dt=Qe):(en=E1(gt.type,gt.key,gt.props,null,dt.mode,en),en.ref=Kn(dt,Qe,gt),en.return=dt,dt=en)}return pe(dt);case O:e:{for(qn=gt.key;Qe!==null;){if(Qe.key===qn)if(Qe.tag===4&&Qe.stateNode.containerInfo===gt.containerInfo&&Qe.stateNode.implementation===gt.implementation){b(dt,Qe.sibling),Qe=V(Qe,gt.children||[]),Qe.return=dt,dt=Qe;break e}else{b(dt,Qe);break}else m(dt,Qe);Qe=Qe.sibling}Qe=Cb(gt,dt.mode,en),Qe.return=dt,dt=Qe}return pe(dt);case Y:return qn=gt._init,Zo(dt,Qe,qn(gt._payload),en)}if(lt(gt))return Cn(dt,Qe,gt,en);if(Z(gt))return In(dt,Qe,gt,en);Ni(dt,gt)}return typeof gt=="string"&&gt!==""||typeof gt=="number"?(gt=""+gt,Qe!==null&&Qe.tag===6?(b(dt,Qe.sibling),Qe=V(Qe,gt),Qe.return=dt,dt=Qe):(b(dt,Qe),Qe=Mb(gt,dt.mode,en),Qe.return=dt,dt=Qe),pe(dt)):b(dt,Qe)}return Zo}var ho=qi(!0),Dr=qi(!1),bo=Ai(null),Ao=null,yi=null,Wi=null;function ro(){Wi=yi=Ao=null}function ha(d){var m=bo.current;$r(bo),d._currentValue=m}function qa(d,m,b){for(;d!==null;){var R=d.alternate;if((d.childLanes&m)!==m?(d.childLanes|=m,R!==null&&(R.childLanes|=m)):R!==null&&(R.childLanes&m)!==m&&(R.childLanes|=m),d===b)break;d=d.return}}function Ei(d,m){Ao=d,Wi=yi=null,d=d.dependencies,d!==null&&d.firstContext!==null&&((d.lanes&m)!==0&&(_r=!0),d.firstContext=null)}function io(d){var m=d._currentValue;if(Wi!==d)if(d={context:d,memoizedValue:m,next:null},yi===null){if(Ao===null)throw Error(t(308));yi=d,Ao.dependencies={lanes:0,firstContext:d}}else yi=yi.next=d;return m}var Ma=null;function Au(d){Ma===null?Ma=[d]:Ma.push(d)}function ys(d,m,b,R){var V=m.interleaved;return V===null?(b.next=b,Au(m)):(b.next=V.next,V.next=b),m.interleaved=b,Fr(d,R)}function Fr(d,m){d.lanes|=m;var b=d.alternate;for(b!==null&&(b.lanes|=m),b=d,d=d.return;d!==null;)d.childLanes|=m,b=d.alternate,b!==null&&(b.childLanes|=m),b=d,d=d.return;return b.tag===3?b.stateNode:null}var Xr=!1;function or(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ji(d,m){d=d.updateQueue,m.updateQueue===d&&(m.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,effects:d.effects})}function Hr(d,m){return{eventTime:d,lane:m,tag:0,payload:null,callback:null,next:null}}function si(d,m,b){var R=d.updateQueue;if(R===null)return null;if(R=R.shared,(Zr&2)!==0){var V=R.pending;return V===null?m.next=m:(m.next=V.next,V.next=m),R.pending=m,Fr(d,b)}return V=R.interleaved,V===null?(m.next=m,Au(R)):(m.next=V.next,V.next=m),R.interleaved=m,Fr(d,b)}function Eo(d,m,b){if(m=m.updateQueue,m!==null&&(m=m.shared,(b&4194240)!==0)){var R=m.lanes;R&=d.pendingLanes,b|=R,m.lanes=b,oa(d,b)}}function Yo(d,m){var b=d.updateQueue,R=d.alternate;if(R!==null&&(R=R.updateQueue,b===R)){var V=null,K=null;if(b=b.firstBaseUpdate,b!==null){do{var pe={eventTime:b.eventTime,lane:b.lane,tag:b.tag,payload:b.payload,callback:b.callback,next:null};K===null?V=K=pe:K=K.next=pe,b=b.next}while(b!==null);K===null?V=K=m:K=K.next=m}else V=K=m;b={baseState:R.baseState,firstBaseUpdate:V,lastBaseUpdate:K,shared:R.shared,effects:R.effects},d.updateQueue=b;return}d=b.lastBaseUpdate,d===null?b.firstBaseUpdate=m:d.next=m,b.lastBaseUpdate=m}function fi(d,m,b,R){var V=d.updateQueue;Xr=!1;var K=V.firstBaseUpdate,pe=V.lastBaseUpdate,ke=V.shared.pending;if(ke!==null){V.shared.pending=null;var Ye=ke,_t=Ye.next;Ye.next=null,pe===null?K=_t:pe.next=_t,pe=Ye;var $t=d.alternate;$t!==null&&($t=$t.updateQueue,ke=$t.lastBaseUpdate,ke!==pe&&(ke===null?$t.firstBaseUpdate=_t:ke.next=_t,$t.lastBaseUpdate=Ye))}if(K!==null){var Yt=V.baseState;pe=0,$t=_t=Ye=null,ke=K;do{var jt=ke.lane,wn=ke.eventTime;if((R&jt)===jt){$t!==null&&($t=$t.next={eventTime:wn,lane:0,tag:ke.tag,payload:ke.payload,callback:ke.callback,next:null});e:{var Cn=d,In=ke;switch(jt=m,wn=b,In.tag){case 1:if(Cn=In.payload,typeof Cn=="function"){Yt=Cn.call(wn,Yt,jt);break e}Yt=Cn;break e;case 3:Cn.flags=Cn.flags&-65537|128;case 0:if(Cn=In.payload,jt=typeof Cn=="function"?Cn.call(wn,Yt,jt):Cn,jt==null)break e;Yt=oe({},Yt,jt);break e;case 2:Xr=!0}}ke.callback!==null&&ke.lane!==0&&(d.flags|=64,jt=V.effects,jt===null?V.effects=[ke]:jt.push(ke))}else wn={eventTime:wn,lane:jt,tag:ke.tag,payload:ke.payload,callback:ke.callback,next:null},$t===null?(_t=$t=wn,Ye=Yt):$t=$t.next=wn,pe|=jt;if(ke=ke.next,ke===null){if(ke=V.shared.pending,ke===null)break;jt=ke,ke=jt.next,jt.next=null,V.lastBaseUpdate=jt,V.shared.pending=null}}while(!0);if($t===null&&(Ye=Yt),V.baseState=Ye,V.firstBaseUpdate=_t,V.lastBaseUpdate=$t,m=V.shared.interleaved,m!==null){V=m;do pe|=V.lane,V=V.next;while(V!==m)}else K===null&&(V.shared.lanes=0);zh|=pe,d.lanes=pe,d.memoizedState=Yt}}function Gs(d,m,b){if(d=m.effects,m.effects=null,d!==null)for(m=0;m<d.length;m++){var R=d[m],V=R.callback;if(V!==null){if(R.callback=null,R=b,typeof V!="function")throw Error(t(191,V));V.call(R)}}}var qs={},pa=Ai(qs),Eu=Ai(qs),xs=Ai(qs);function $i(d){if(d===qs)throw Error(t(174));return d}function Tu(d,m){switch(Jr(xs,m),Jr(Eu,d),Jr(pa,qs),d=m.nodeType,d){case 9:case 11:m=(m=m.documentElement)?m.namespaceURI:qt(null,"");break;default:d=d===8?m.parentNode:m,m=d.namespaceURI||null,d=d.tagName,m=qt(m,d)}$r(pa),Jr(pa,m)}function _s(){$r(pa),$r(Eu),$r(xs)}function uc(d){$i(xs.current);var m=$i(pa.current),b=qt(m,d.type);m!==b&&(Jr(Eu,d),Jr(pa,b))}function Zc(d){Eu.current===d&&($r(pa),$r(Eu))}var di=Ai(0);function ko(d){for(var m=d;m!==null;){if(m.tag===13){var b=m.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||b.data==="$?"||b.data==="$!"))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===d)break;for(;m.sibling===null;){if(m.return===null||m.return===d)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var Qc=[];function El(){for(var d=0;d<Qc.length;d++)Qc[d]._workInProgressVersionPrimary=null;Qc.length=0}var cc=E.ReactCurrentDispatcher,Mu=E.ReactCurrentBatchConfig,Ss=0,hi=null,Fi=null,Mr=null,as=!1,po=!1,tu=0,Wa=0;function mo(){throw Error(t(321))}function ef(d,m){if(m===null)return!1;for(var b=0;b<m.length&&b<d.length;b++)if(!$o(d[b],m[b]))return!1;return!0}function fc(d,m,b,R,V,K){if(Ss=K,hi=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,cc.current=d===null||d.memoizedState===null?u1:c1,d=b(R,V),po){K=0;do{if(po=!1,tu=0,25<=K)throw Error(t(301));K+=1,Mr=Fi=null,m.updateQueue=null,cc.current=f1,d=b(R,V)}while(po)}if(cc.current=pm,m=Fi!==null&&Fi.next!==null,Ss=0,Mr=Fi=hi=null,as=!1,m)throw Error(t(300));return d}function Tl(){var d=tu!==0;return tu=0,d}function Fo(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mr===null?hi.memoizedState=Mr=d:Mr=Mr.next=d,Mr}function ja(){if(Fi===null){var d=hi.alternate;d=d!==null?d.memoizedState:null}else d=Fi.next;var m=Mr===null?hi.memoizedState:Mr.next;if(m!==null)Mr=m,Fi=d;else{if(d===null)throw Error(t(310));Fi=d,d={memoizedState:Fi.memoizedState,baseState:Fi.baseState,baseQueue:Fi.baseQueue,queue:Fi.queue,next:null},Mr===null?hi.memoizedState=Mr=d:Mr=Mr.next=d}return Mr}function tf(d,m){return typeof m=="function"?m(d):m}function nf(d){var m=ja(),b=m.queue;if(b===null)throw Error(t(311));b.lastRenderedReducer=d;var R=Fi,V=R.baseQueue,K=b.pending;if(K!==null){if(V!==null){var pe=V.next;V.next=K.next,K.next=pe}R.baseQueue=V=K,b.pending=null}if(V!==null){K=V.next,R=R.baseState;var ke=pe=null,Ye=null,_t=K;do{var $t=_t.lane;if((Ss&$t)===$t)Ye!==null&&(Ye=Ye.next={lane:0,action:_t.action,hasEagerState:_t.hasEagerState,eagerState:_t.eagerState,next:null}),R=_t.hasEagerState?_t.eagerState:d(R,_t.action);else{var Yt={lane:$t,action:_t.action,hasEagerState:_t.hasEagerState,eagerState:_t.eagerState,next:null};Ye===null?(ke=Ye=Yt,pe=R):Ye=Ye.next=Yt,hi.lanes|=$t,zh|=$t}_t=_t.next}while(_t!==null&&_t!==K);Ye===null?pe=R:Ye.next=ke,$o(R,m.memoizedState)||(_r=!0),m.memoizedState=R,m.baseState=pe,m.baseQueue=Ye,b.lastRenderedState=R}if(d=b.interleaved,d!==null){V=d;do K=V.lane,hi.lanes|=K,zh|=K,V=V.next;while(V!==d)}else V===null&&(b.lanes=0);return[m.memoizedState,b.dispatch]}function $a(d){var m=ja(),b=m.queue;if(b===null)throw Error(t(311));b.lastRenderedReducer=d;var R=b.dispatch,V=b.pending,K=m.memoizedState;if(V!==null){b.pending=null;var pe=V=V.next;do K=d(K,pe.action),pe=pe.next;while(pe!==V);$o(K,m.memoizedState)||(_r=!0),m.memoizedState=K,m.baseQueue===null&&(m.baseState=K),b.lastRenderedState=K}return[K,R]}function kh(){}function Pd(d,m){var b=hi,R=ja(),V=m(),K=!$o(R.memoizedState,V);if(K&&(R.memoizedState=V,_r=!0),R=R.queue,Rd(lm.bind(null,b,R,d),[d]),R.getSnapshot!==m||K||Mr!==null&&Mr.memoizedState.tag&1){if(b.flags|=2048,To(9,rf.bind(null,b,R,V,m),void 0,null),Xa===null)throw Error(t(349));(Ss&30)!==0||Id(b,m,V)}return V}function Id(d,m,b){d.flags|=16384,d={getSnapshot:m,value:b},m=hi.updateQueue,m===null?(m={lastEffect:null,stores:null},hi.updateQueue=m,m.stores=[d]):(b=m.stores,b===null?m.stores=[d]:b.push(d))}function rf(d,m,b,R){m.value=b,m.getSnapshot=R,of(m)&&zf(d)}function lm(d,m,b){return b(function(){of(m)&&zf(d)})}function of(d){var m=d.getSnapshot;d=d.value;try{var b=m();return!$o(d,b)}catch{return!0}}function zf(d){var m=Fr(d,1);m!==null&&gc(m,d,1,-1)}function af(d){var m=Fo();return typeof d=="function"&&(d=d()),m.memoizedState=m.baseState=d,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tf,lastRenderedState:d},m.queue=d,d=d.dispatch=Hf.bind(null,hi,d),[m.memoizedState,d]}function To(d,m,b,R){return d={tag:d,create:m,destroy:b,deps:R,next:null},m=hi.updateQueue,m===null?(m={lastEffect:null,stores:null},hi.updateQueue=m,m.lastEffect=d.next=d):(b=m.lastEffect,b===null?m.lastEffect=d.next=d:(R=b.next,b.next=d,d.next=R,m.lastEffect=d)),d}function nu(){return ja().memoizedState}function Ko(d,m,b,R){var V=Fo();hi.flags|=d,V.memoizedState=To(1|m,b,void 0,R===void 0?null:R)}function Cu(d,m,b,R){var V=ja();R=R===void 0?null:R;var K=void 0;if(Fi!==null){var pe=Fi.memoizedState;if(K=pe.destroy,R!==null&&ef(R,pe.deps)){V.memoizedState=To(m,b,K,R);return}}hi.flags|=d,V.memoizedState=To(1|m,b,K,R)}function Jo(d,m){return Ko(8390656,8,d,m)}function Rd(d,m){return Cu(2048,8,d,m)}function Fh(d,m){return Cu(4,2,d,m)}function Nd(d,m){return Cu(4,4,d,m)}function Ld(d,m){if(typeof m=="function")return d=d(),m(d),function(){m(null)};if(m!=null)return d=d(),m.current=d,function(){m.current=null}}function lv(d,m,b){return b=b!=null?b.concat([d]):null,Cu(4,4,Ld.bind(null,m,d),b)}function um(){}function l1(d,m){var b=ja();m=m===void 0?null:m;var R=b.memoizedState;return R!==null&&m!==null&&ef(m,R[1])?R[0]:(b.memoizedState=[d,m],d)}function Ws(d,m){var b=ja();m=m===void 0?null:m;var R=b.memoizedState;return R!==null&&m!==null&&ef(m,R[1])?R[0]:(d=d(),b.memoizedState=[d,m],d)}function cm(d,m,b){return(Ss&21)===0?(d.baseState&&(d.baseState=!1,_r=!0),d.memoizedState=b):($o(b,m)||(b=er(),hi.lanes|=b,zh|=b,d.baseState=!0),m)}function ub(d,m){var b=Ir;Ir=b!==0&&4>b?b:4,d(!0);var R=Mu.transition;Mu.transition={};try{d(!1),m()}finally{Ir=b,Mu.transition=R}}function dc(){return ja().memoizedState}function fm(d,m,b){var R=Fd(d);if(b={lane:R,action:b,hasEagerState:!1,eagerState:null,next:null},Uh(d))dm(m,b);else if(b=ys(d,m,b,R),b!==null){var V=$s();gc(b,d,R,V),hm(b,m,R)}}function Hf(d,m,b){var R=Fd(d),V={lane:R,action:b,hasEagerState:!1,eagerState:null,next:null};if(Uh(d))dm(m,V);else{var K=d.alternate;if(d.lanes===0&&(K===null||K.lanes===0)&&(K=m.lastRenderedReducer,K!==null))try{var pe=m.lastRenderedState,ke=K(pe,b);if(V.hasEagerState=!0,V.eagerState=ke,$o(ke,pe)){var Ye=m.interleaved;Ye===null?(V.next=V,Au(m)):(V.next=Ye.next,Ye.next=V),m.interleaved=V;return}}catch{}finally{}b=ys(d,m,V,R),b!==null&&(V=$s(),gc(b,d,R,V),hm(b,m,R))}}function Uh(d){var m=d.alternate;return d===hi||m!==null&&m===hi}function dm(d,m){po=as=!0;var b=d.pending;b===null?m.next=m:(m.next=b.next,b.next=m),d.pending=m}function hm(d,m,b){if((b&4194240)!==0){var R=m.lanes;R&=d.pendingLanes,b|=R,m.lanes=b,oa(d,b)}}var pm={readContext:io,useCallback:mo,useContext:mo,useEffect:mo,useImperativeHandle:mo,useInsertionEffect:mo,useLayoutEffect:mo,useMemo:mo,useReducer:mo,useRef:mo,useState:mo,useDebugValue:mo,useDeferredValue:mo,useTransition:mo,useMutableSource:mo,useSyncExternalStore:mo,useId:mo,unstable_isNewReconciler:!1},u1={readContext:io,useCallback:function(d,m){return Fo().memoizedState=[d,m===void 0?null:m],d},useContext:io,useEffect:Jo,useImperativeHandle:function(d,m,b){return b=b!=null?b.concat([d]):null,Ko(4194308,4,Ld.bind(null,m,d),b)},useLayoutEffect:function(d,m){return Ko(4194308,4,d,m)},useInsertionEffect:function(d,m){return Ko(4,2,d,m)},useMemo:function(d,m){var b=Fo();return m=m===void 0?null:m,d=d(),b.memoizedState=[d,m],d},useReducer:function(d,m,b){var R=Fo();return m=b!==void 0?b(m):m,R.memoizedState=R.baseState=m,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:m},R.queue=d,d=d.dispatch=fm.bind(null,hi,d),[R.memoizedState,d]},useRef:function(d){var m=Fo();return d={current:d},m.memoizedState=d},useState:af,useDebugValue:um,useDeferredValue:function(d){return Fo().memoizedState=d},useTransition:function(){var d=af(!1),m=d[0];return d=ub.bind(null,d[1]),Fo().memoizedState=d,[m,d]},useMutableSource:function(){},useSyncExternalStore:function(d,m,b){var R=hi,V=Fo();if(Mt){if(b===void 0)throw Error(t(407));b=b()}else{if(b=m(),Xa===null)throw Error(t(349));(Ss&30)!==0||Id(R,m,b)}V.memoizedState=b;var K={value:b,getSnapshot:m};return V.queue=K,Jo(lm.bind(null,R,K,d),[d]),R.flags|=2048,To(9,rf.bind(null,R,K,b,m),void 0,null),b},useId:function(){var d=Fo(),m=Xa.identifierPrefix;if(Mt){var b=st,R=Fe;b=(R&~(1<<32-Vt(R)-1)).toString(32)+b,m=":"+m+"R"+b,b=tu++,0<b&&(m+="H"+b.toString(32)),m+=":"}else b=Wa++,m=":"+m+"r"+b.toString(32)+":";return d.memoizedState=m},unstable_isNewReconciler:!1},c1={readContext:io,useCallback:l1,useContext:io,useEffect:Rd,useImperativeHandle:lv,useInsertionEffect:Fh,useLayoutEffect:Nd,useMemo:Ws,useReducer:nf,useRef:nu,useState:function(){return nf(tf)},useDebugValue:um,useDeferredValue:function(d){var m=ja();return cm(m,Fi.memoizedState,d)},useTransition:function(){var d=nf(tf)[0],m=ja().memoizedState;return[d,m]},useMutableSource:kh,useSyncExternalStore:Pd,useId:dc,unstable_isNewReconciler:!1},f1={readContext:io,useCallback:l1,useContext:io,useEffect:Rd,useImperativeHandle:lv,useInsertionEffect:Fh,useLayoutEffect:Nd,useMemo:Ws,useReducer:$a,useRef:nu,useState:function(){return $a(tf)},useDebugValue:um,useDeferredValue:function(d){var m=ja();return Fi===null?m.memoizedState=d:cm(m,Fi.memoizedState,d)},useTransition:function(){var d=$a(tf)[0],m=ja().memoizedState;return[d,m]},useMutableSource:kh,useSyncExternalStore:Pd,useId:dc,unstable_isNewReconciler:!1};function Ml(d,m){if(d&&d.defaultProps){m=oe({},m),d=d.defaultProps;for(var b in d)m[b]===void 0&&(m[b]=d[b]);return m}return m}function Bh(d,m,b,R){m=d.memoizedState,b=b(R,m),b=b==null?m:oe({},m,b),d.memoizedState=b,d.lanes===0&&(d.updateQueue.baseState=b)}var mm={isMounted:function(d){return(d=d._reactInternals)?we(d)===d:!1},enqueueSetState:function(d,m,b){d=d._reactInternals;var R=$s(),V=Fd(d),K=Hr(R,V);K.payload=m,b!=null&&(K.callback=b),m=si(d,K,V),m!==null&&(gc(m,d,V,R),Eo(m,d,V))},enqueueReplaceState:function(d,m,b){d=d._reactInternals;var R=$s(),V=Fd(d),K=Hr(R,V);K.tag=1,K.payload=m,b!=null&&(K.callback=b),m=si(d,K,V),m!==null&&(gc(m,d,V,R),Eo(m,d,V))},enqueueForceUpdate:function(d,m){d=d._reactInternals;var b=$s(),R=Fd(d),V=Hr(b,R);V.tag=2,m!=null&&(V.callback=m),m=si(d,V,R),m!==null&&(gc(m,d,R,b),Eo(m,d,R))}};function d1(d,m,b,R,V,K,pe){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(R,K,pe):m.prototype&&m.prototype.isPureReactComponent?!Ga(b,R)||!Ga(V,K):!0}function g(d,m,b){var R=!1,V=Ql,K=m.contextType;return typeof K=="object"&&K!==null?K=io(K):(V=fa(m)?eu:Do.current,R=m.contextTypes,K=(R=R!=null)?lc(d,V):Ql),m=new m(b,K),d.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=mm,d.stateNode=m,m._reactInternals=d,R&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=V,d.__reactInternalMemoizedMaskedChildContext=K),m}function x(d,m,b,R){d=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(b,R),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(b,R),m.state!==d&&mm.enqueueReplaceState(m,m.state,null)}function I(d,m,b,R){var V=d.stateNode;V.props=b,V.state=d.memoizedState,V.refs={},or(d);var K=m.contextType;typeof K=="object"&&K!==null?V.context=io(K):(K=fa(m)?eu:Do.current,V.context=lc(d,K)),V.state=d.memoizedState,K=m.getDerivedStateFromProps,typeof K=="function"&&(Bh(d,m,K,b),V.state=d.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof V.getSnapshotBeforeUpdate=="function"||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(m=V.state,typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount(),m!==V.state&&mm.enqueueReplaceState(V,V.state,null),fi(d,b,V,R),V.state=d.memoizedState),typeof V.componentDidMount=="function"&&(d.flags|=4194308)}function B(d,m){try{var b="",R=m;do b+=de(R),R=R.return;while(R);var V=b}catch(K){V=`
Error generating stack: `+K.message+`
`+K.stack}return{value:d,source:m,stack:V,digest:null}}function $(d,m,b){return{value:d,source:null,stack:b??null,digest:m??null}}function ie(d,m){try{console.error(m.value)}catch(b){setTimeout(function(){throw b})}}var Oe=typeof WeakMap=="function"?WeakMap:Map;function et(d,m,b){b=Hr(-1,b),b.tag=3,b.payload={element:null};var R=m.value;return b.callback=function(){x1||(x1=!0,xb=R),ie(d,m)},b}function Pt(d,m,b){b=Hr(-1,b),b.tag=3;var R=d.type.getDerivedStateFromError;if(typeof R=="function"){var V=m.value;b.payload=function(){return R(V)},b.callback=function(){ie(d,m)}}var K=d.stateNode;return K!==null&&typeof K.componentDidCatch=="function"&&(b.callback=function(){ie(d,m),typeof R!="function"&&(Dd===null?Dd=new Set([this]):Dd.add(this));var pe=m.stack;this.componentDidCatch(m.value,{componentStack:pe!==null?pe:""})}),b}function Jt(d,m,b){var R=d.pingCache;if(R===null){R=d.pingCache=new Oe;var V=new Set;R.set(m,V)}else V=R.get(m),V===void 0&&(V=new Set,R.set(m,V));V.has(b)||(V.add(b),d=a9.bind(null,d,m,b),m.then(d,d))}function bn(d){do{var m;if((m=d.tag===13)&&(m=d.memoizedState,m=m!==null?m.dehydrated!==null:!0),m)return d;d=d.return}while(d!==null);return null}function ar(d,m,b,R,V){return(d.mode&1)===0?(d===m?d.flags|=65536:(d.flags|=128,b.flags|=131072,b.flags&=-52805,b.tag===1&&(b.alternate===null?b.tag=17:(m=Hr(-1,1),m.tag=2,si(b,m,1))),b.lanes|=1),d):(d.flags|=65536,d.lanes=V,d)}var Hn=E.ReactCurrentOwner,_r=!1;function vn(d,m,b,R){m.child=d===null?Dr(m,null,b,R):ho(m,d.child,b,R)}function Ca(d,m,b,R,V){b=b.render;var K=m.ref;return Ei(m,V),R=fc(d,m,b,R,K,V),b=Tl(),d!==null&&!_r?(m.updateQueue=d.updateQueue,m.flags&=-2053,d.lanes&=~V,Vf(d,m,V)):(Mt&&b&&wt(m),m.flags|=1,vn(d,m,R,V),m.child)}function js(d,m,b,R,V){if(d===null){var K=b.type;return typeof K=="function"&&!Tb(K)&&K.defaultProps===void 0&&b.compare===null&&b.defaultProps===void 0?(m.tag=15,m.type=K,yt(d,m,K,R,V)):(d=E1(b.type,null,R,m,m.mode,V),d.ref=m.ref,d.return=m,m.child=d)}if(K=d.child,(d.lanes&V)===0){var pe=K.memoizedProps;if(b=b.compare,b=b!==null?b:Ga,b(pe,R)&&d.ref===m.ref)return Vf(d,m,V)}return m.flags|=1,d=Bd(K,R),d.ref=m.ref,d.return=m,m.child=d}function yt(d,m,b,R,V){if(d!==null){var K=d.memoizedProps;if(Ga(K,R)&&d.ref===m.ref)if(_r=!1,m.pendingProps=R=K,(d.lanes&V)!==0)(d.flags&131072)!==0&&(_r=!0);else return m.lanes=d.lanes,Vf(d,m,V)}return hn(d,m,b,R,V)}function nt(d,m,b){var R=m.pendingProps,V=R.children,K=d!==null?d.memoizedState:null;if(R.mode==="hidden")if((m.mode&1)===0)m.memoizedState={baseLanes:0,cachePool:null,transitions:null},Jr(vm,ru),ru|=b;else{if((b&1073741824)===0)return d=K!==null?K.baseLanes|b:b,m.lanes=m.childLanes=1073741824,m.memoizedState={baseLanes:d,cachePool:null,transitions:null},m.updateQueue=null,Jr(vm,ru),ru|=d,null;m.memoizedState={baseLanes:0,cachePool:null,transitions:null},R=K!==null?K.baseLanes:b,Jr(vm,ru),ru|=R}else K!==null?(R=K.baseLanes|b,m.memoizedState=null):R=b,Jr(vm,ru),ru|=R;return vn(d,m,V,b),m.child}function bt(d,m){var b=m.ref;(d===null&&b!==null||d!==null&&d.ref!==b)&&(m.flags|=512,m.flags|=2097152)}function hn(d,m,b,R,V){var K=fa(b)?eu:Do.current;return K=lc(m,K),Ei(m,V),b=fc(d,m,b,R,K,V),R=Tl(),d!==null&&!_r?(m.updateQueue=d.updateQueue,m.flags&=-2053,d.lanes&=~V,Vf(d,m,V)):(Mt&&R&&wt(m),m.flags|=1,vn(d,m,b,V),m.child)}function Nn(d,m,b,R,V){if(fa(b)){var K=!0;Al(m)}else K=!1;if(Ei(m,V),m.stateNode===null)p1(d,m),g(m,b,R),I(m,b,R,V),R=!0;else if(d===null){var pe=m.stateNode,ke=m.memoizedProps;pe.props=ke;var Ye=pe.context,_t=b.contextType;typeof _t=="object"&&_t!==null?_t=io(_t):(_t=fa(b)?eu:Do.current,_t=lc(m,_t));var $t=b.getDerivedStateFromProps,Yt=typeof $t=="function"||typeof pe.getSnapshotBeforeUpdate=="function";Yt||typeof pe.UNSAFE_componentWillReceiveProps!="function"&&typeof pe.componentWillReceiveProps!="function"||(ke!==R||Ye!==_t)&&x(m,pe,R,_t),Xr=!1;var jt=m.memoizedState;pe.state=jt,fi(m,R,pe,V),Ye=m.memoizedState,ke!==R||jt!==Ye||Ta.current||Xr?(typeof $t=="function"&&(Bh(m,b,$t,R),Ye=m.memoizedState),(ke=Xr||d1(m,b,ke,R,jt,Ye,_t))?(Yt||typeof pe.UNSAFE_componentWillMount!="function"&&typeof pe.componentWillMount!="function"||(typeof pe.componentWillMount=="function"&&pe.componentWillMount(),typeof pe.UNSAFE_componentWillMount=="function"&&pe.UNSAFE_componentWillMount()),typeof pe.componentDidMount=="function"&&(m.flags|=4194308)):(typeof pe.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=R,m.memoizedState=Ye),pe.props=R,pe.state=Ye,pe.context=_t,R=ke):(typeof pe.componentDidMount=="function"&&(m.flags|=4194308),R=!1)}else{pe=m.stateNode,ji(d,m),ke=m.memoizedProps,_t=m.type===m.elementType?ke:Ml(m.type,ke),pe.props=_t,Yt=m.pendingProps,jt=pe.context,Ye=b.contextType,typeof Ye=="object"&&Ye!==null?Ye=io(Ye):(Ye=fa(b)?eu:Do.current,Ye=lc(m,Ye));var wn=b.getDerivedStateFromProps;($t=typeof wn=="function"||typeof pe.getSnapshotBeforeUpdate=="function")||typeof pe.UNSAFE_componentWillReceiveProps!="function"&&typeof pe.componentWillReceiveProps!="function"||(ke!==Yt||jt!==Ye)&&x(m,pe,R,Ye),Xr=!1,jt=m.memoizedState,pe.state=jt,fi(m,R,pe,V);var Cn=m.memoizedState;ke!==Yt||jt!==Cn||Ta.current||Xr?(typeof wn=="function"&&(Bh(m,b,wn,R),Cn=m.memoizedState),(_t=Xr||d1(m,b,_t,R,jt,Cn,Ye)||!1)?($t||typeof pe.UNSAFE_componentWillUpdate!="function"&&typeof pe.componentWillUpdate!="function"||(typeof pe.componentWillUpdate=="function"&&pe.componentWillUpdate(R,Cn,Ye),typeof pe.UNSAFE_componentWillUpdate=="function"&&pe.UNSAFE_componentWillUpdate(R,Cn,Ye)),typeof pe.componentDidUpdate=="function"&&(m.flags|=4),typeof pe.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof pe.componentDidUpdate!="function"||ke===d.memoizedProps&&jt===d.memoizedState||(m.flags|=4),typeof pe.getSnapshotBeforeUpdate!="function"||ke===d.memoizedProps&&jt===d.memoizedState||(m.flags|=1024),m.memoizedProps=R,m.memoizedState=Cn),pe.props=R,pe.state=Cn,pe.context=Ye,R=_t):(typeof pe.componentDidUpdate!="function"||ke===d.memoizedProps&&jt===d.memoizedState||(m.flags|=4),typeof pe.getSnapshotBeforeUpdate!="function"||ke===d.memoizedProps&&jt===d.memoizedState||(m.flags|=1024),R=!1)}return dr(d,m,b,R,K,V)}function dr(d,m,b,R,V,K){bt(d,m);var pe=(m.flags&128)!==0;if(!R&&!pe)return V&&Dh(m,b,!1),Vf(d,m,K);R=m.stateNode,Hn.current=m;var ke=pe&&typeof b.getDerivedStateFromError!="function"?null:R.render();return m.flags|=1,d!==null&&pe?(m.child=ho(m,d.child,null,K),m.child=ho(m,null,ke,K)):vn(d,m,ke,K),m.memoizedState=R.state,V&&Dh(m,b,!0),m.child}function sr(d){var m=d.stateNode;m.pendingContext?Oh(d,m.pendingContext,m.pendingContext!==m.context):m.context&&Oh(d,m.context,!1),Tu(d,m.containerInfo)}function Vr(d,m,b,R,V){return nr(),kr(V),m.flags|=256,vn(d,m,b,R),m.child}var Uo={dehydrated:null,treeContext:null,retryLane:0};function Ur(d){return{baseLanes:d,cachePool:null,transitions:null}}function hc(d,m,b){var R=m.pendingProps,V=di.current,K=!1,pe=(m.flags&128)!==0,ke;if((ke=pe)||(ke=d!==null&&d.memoizedState===null?!1:(V&2)!==0),ke?(K=!0,m.flags&=-129):(d===null||d.memoizedState!==null)&&(V|=1),Jr(di,V&1),d===null)return sn(m),d=m.memoizedState,d!==null&&(d=d.dehydrated,d!==null)?((m.mode&1)===0?m.lanes=1:d.data==="$!"?m.lanes=8:m.lanes=1073741824,null):(pe=R.children,d=R.fallback,K?(R=m.mode,K=m.child,pe={mode:"hidden",children:pe},(R&1)===0&&K!==null?(K.childLanes=0,K.pendingProps=pe):K=T1(pe,R,0,null),d=qh(d,R,b,null),K.return=m,d.return=m,K.sibling=d,m.child=K,m.child.memoizedState=Ur(b),m.memoizedState=Uo,d):uv(m,pe));if(V=d.memoizedState,V!==null&&(ke=V.dehydrated,ke!==null))return Xq(d,m,pe,R,ke,V,b);if(K){K=R.fallback,pe=m.mode,V=d.child,ke=V.sibling;var Ye={mode:"hidden",children:R.children};return(pe&1)===0&&m.child!==V?(R=m.child,R.childLanes=0,R.pendingProps=Ye,m.deletions=null):(R=Bd(V,Ye),R.subtreeFlags=V.subtreeFlags&14680064),ke!==null?K=Bd(ke,K):(K=qh(K,pe,b,null),K.flags|=2),K.return=m,R.return=m,R.sibling=K,m.child=R,R=K,K=m.child,pe=d.child.memoizedState,pe=pe===null?Ur(b):{baseLanes:pe.baseLanes|b,cachePool:null,transitions:pe.transitions},K.memoizedState=pe,K.childLanes=d.childLanes&~b,m.memoizedState=Uo,R}return K=d.child,d=K.sibling,R=Bd(K,{mode:"visible",children:R.children}),(m.mode&1)===0&&(R.lanes=b),R.return=m,R.sibling=null,d!==null&&(b=m.deletions,b===null?(m.deletions=[d],m.flags|=16):b.push(d)),m.child=R,m.memoizedState=null,R}function uv(d,m){return m=T1({mode:"visible",children:m},d.mode,0,null),m.return=d,d.child=m}function h1(d,m,b,R){return R!==null&&kr(R),ho(m,d.child,null,b),d=uv(m,m.pendingProps.children),d.flags|=2,m.memoizedState=null,d}function Xq(d,m,b,R,V,K,pe){if(b)return m.flags&256?(m.flags&=-257,R=$(Error(t(422))),h1(d,m,pe,R)):m.memoizedState!==null?(m.child=d.child,m.flags|=128,null):(K=R.fallback,V=m.mode,R=T1({mode:"visible",children:R.children},V,0,null),K=qh(K,V,pe,null),K.flags|=2,R.return=m,K.return=m,R.sibling=K,m.child=R,(m.mode&1)!==0&&ho(m,d.child,null,pe),m.child.memoizedState=Ur(pe),m.memoizedState=Uo,K);if((m.mode&1)===0)return h1(d,m,pe,null);if(V.data==="$!"){if(R=V.nextSibling&&V.nextSibling.dataset,R)var ke=R.dgst;return R=ke,K=Error(t(419)),R=$(K,R,void 0),h1(d,m,pe,R)}if(ke=(pe&d.childLanes)!==0,_r||ke){if(R=Xa,R!==null){switch(pe&-pe){case 4:V=2;break;case 16:V=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:V=32;break;case 536870912:V=268435456;break;default:V=0}V=(V&(R.suspendedLanes|pe))!==0?0:V,V!==0&&V!==K.retryLane&&(K.retryLane=V,Fr(d,V),gc(R,d,V,-1))}return Eb(),R=$(Error(t(421))),h1(d,m,pe,R)}return V.data==="$?"?(m.flags|=128,m.child=d.child,m=s9.bind(null,d),V._reactRetry=m,null):(d=K.treeContext,Tt=ca(V.nextSibling),$e=m,Mt=!0,Nt=null,d!==null&&(_e[Ae++]=Fe,_e[Ae++]=st,_e[Ae++]=je,Fe=d.id,st=d.overflow,je=m),m=uv(m,R.children),m.flags|=4096,m)}function AR(d,m,b){d.lanes|=m;var R=d.alternate;R!==null&&(R.lanes|=m),qa(d.return,m,b)}function cb(d,m,b,R,V){var K=d.memoizedState;K===null?d.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:R,tail:b,tailMode:V}:(K.isBackwards=m,K.rendering=null,K.renderingStartTime=0,K.last=R,K.tail=b,K.tailMode=V)}function ER(d,m,b){var R=m.pendingProps,V=R.revealOrder,K=R.tail;if(vn(d,m,R.children,b),R=di.current,(R&2)!==0)R=R&1|2,m.flags|=128;else{if(d!==null&&(d.flags&128)!==0)e:for(d=m.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&AR(d,b,m);else if(d.tag===19)AR(d,b,m);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===m)break e;for(;d.sibling===null;){if(d.return===null||d.return===m)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}R&=1}if(Jr(di,R),(m.mode&1)===0)m.memoizedState=null;else switch(V){case"forwards":for(b=m.child,V=null;b!==null;)d=b.alternate,d!==null&&ko(d)===null&&(V=b),b=b.sibling;b=V,b===null?(V=m.child,m.child=null):(V=b.sibling,b.sibling=null),cb(m,!1,V,b,K);break;case"backwards":for(b=null,V=m.child,m.child=null;V!==null;){if(d=V.alternate,d!==null&&ko(d)===null){m.child=V;break}d=V.sibling,V.sibling=b,b=V,V=d}cb(m,!0,b,null,K);break;case"together":cb(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function p1(d,m){(m.mode&1)===0&&d!==null&&(d.alternate=null,m.alternate=null,m.flags|=2)}function Vf(d,m,b){if(d!==null&&(m.dependencies=d.dependencies),zh|=m.lanes,(b&m.childLanes)===0)return null;if(d!==null&&m.child!==d.child)throw Error(t(153));if(m.child!==null){for(d=m.child,b=Bd(d,d.pendingProps),m.child=b,b.return=m;d.sibling!==null;)d=d.sibling,b=b.sibling=Bd(d,d.pendingProps),b.return=m;b.sibling=null}return m.child}function Yq(d,m,b){switch(m.tag){case 3:sr(m),nr();break;case 5:uc(m);break;case 1:fa(m.type)&&Al(m);break;case 4:Tu(m,m.stateNode.containerInfo);break;case 10:var R=m.type._context,V=m.memoizedProps.value;Jr(bo,R._currentValue),R._currentValue=V;break;case 13:if(R=m.memoizedState,R!==null)return R.dehydrated!==null?(Jr(di,di.current&1),m.flags|=128,null):(b&m.child.childLanes)!==0?hc(d,m,b):(Jr(di,di.current&1),d=Vf(d,m,b),d!==null?d.sibling:null);Jr(di,di.current&1);break;case 19:if(R=(b&m.childLanes)!==0,(d.flags&128)!==0){if(R)return ER(d,m,b);m.flags|=128}if(V=m.memoizedState,V!==null&&(V.rendering=null,V.tail=null,V.lastEffect=null),Jr(di,di.current),R)break;return null;case 22:case 23:return m.lanes=0,nt(d,m,b)}return Vf(d,m,b)}var TR,fb,MR,CR;TR=function(d,m){for(var b=m.child;b!==null;){if(b.tag===5||b.tag===6)d.appendChild(b.stateNode);else if(b.tag!==4&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===m)break;for(;b.sibling===null;){if(b.return===null||b.return===m)return;b=b.return}b.sibling.return=b.return,b=b.sibling}},fb=function(){},MR=function(d,m,b,R){var V=d.memoizedProps;if(V!==R){d=m.stateNode,$i(pa.current);var K=null;switch(b){case"input":V=Se(d,V),R=Se(d,R),K=[];break;case"select":V=oe({},V,{value:void 0}),R=oe({},R,{value:void 0}),K=[];break;case"textarea":V=le(d,V),R=le(d,R),K=[];break;default:typeof V.onClick!="function"&&typeof R.onClick=="function"&&(d.onclick=oc)}mn(b,R);var pe;b=null;for(_t in V)if(!R.hasOwnProperty(_t)&&V.hasOwnProperty(_t)&&V[_t]!=null)if(_t==="style"){var ke=V[_t];for(pe in ke)ke.hasOwnProperty(pe)&&(b||(b={}),b[pe]="")}else _t!=="dangerouslySetInnerHTML"&&_t!=="children"&&_t!=="suppressContentEditableWarning"&&_t!=="suppressHydrationWarning"&&_t!=="autoFocus"&&(i.hasOwnProperty(_t)?K||(K=[]):(K=K||[]).push(_t,null));for(_t in R){var Ye=R[_t];if(ke=V!=null?V[_t]:void 0,R.hasOwnProperty(_t)&&Ye!==ke&&(Ye!=null||ke!=null))if(_t==="style")if(ke){for(pe in ke)!ke.hasOwnProperty(pe)||Ye&&Ye.hasOwnProperty(pe)||(b||(b={}),b[pe]="");for(pe in Ye)Ye.hasOwnProperty(pe)&&ke[pe]!==Ye[pe]&&(b||(b={}),b[pe]=Ye[pe])}else b||(K||(K=[]),K.push(_t,b)),b=Ye;else _t==="dangerouslySetInnerHTML"?(Ye=Ye?Ye.__html:void 0,ke=ke?ke.__html:void 0,Ye!=null&&ke!==Ye&&(K=K||[]).push(_t,Ye)):_t==="children"?typeof Ye!="string"&&typeof Ye!="number"||(K=K||[]).push(_t,""+Ye):_t!=="suppressContentEditableWarning"&&_t!=="suppressHydrationWarning"&&(i.hasOwnProperty(_t)?(Ye!=null&&_t==="onScroll"&&oi("scroll",d),K||ke===Ye||(K=[])):(K=K||[]).push(_t,Ye))}b&&(K=K||[]).push("style",b);var _t=K;(m.updateQueue=_t)&&(m.flags|=4)}},CR=function(d,m,b,R){b!==R&&(m.flags|=4)};function cv(d,m){if(!Mt)switch(d.tailMode){case"hidden":m=d.tail;for(var b=null;m!==null;)m.alternate!==null&&(b=m),m=m.sibling;b===null?d.tail=null:b.sibling=null;break;case"collapsed":b=d.tail;for(var R=null;b!==null;)b.alternate!==null&&(R=b),b=b.sibling;R===null?m||d.tail===null?d.tail=null:d.tail.sibling=null:R.sibling=null}}function ws(d){var m=d.alternate!==null&&d.alternate.child===d.child,b=0,R=0;if(m)for(var V=d.child;V!==null;)b|=V.lanes|V.childLanes,R|=V.subtreeFlags&14680064,R|=V.flags&14680064,V.return=d,V=V.sibling;else for(V=d.child;V!==null;)b|=V.lanes|V.childLanes,R|=V.subtreeFlags,R|=V.flags,V.return=d,V=V.sibling;return d.subtreeFlags|=R,d.childLanes=b,m}function Kq(d,m,b){var R=m.pendingProps;switch(We(m),m.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ws(m),null;case 1:return fa(m.type)&&Bf(),ws(m),null;case 3:return R=m.stateNode,_s(),$r(Ta),$r(Do),El(),R.pendingContext&&(R.context=R.pendingContext,R.pendingContext=null),(d===null||d.child===null)&&(Nr(m)?m.flags|=4:d===null||d.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,Nt!==null&&(wb(Nt),Nt=null))),fb(d,m),ws(m),null;case 5:Zc(m);var V=$i(xs.current);if(b=m.type,d!==null&&m.stateNode!=null)MR(d,m,b,R,V),d.ref!==m.ref&&(m.flags|=512,m.flags|=2097152);else{if(!R){if(m.stateNode===null)throw Error(t(166));return ws(m),null}if(d=$i(pa.current),Nr(m)){R=m.stateNode,b=m.type;var K=m.memoizedProps;switch(R[wo]=m,R[sc]=K,d=(m.mode&1)!==0,b){case"dialog":oi("cancel",R),oi("close",R);break;case"iframe":case"object":case"embed":oi("load",R);break;case"video":case"audio":for(V=0;V<Hs.length;V++)oi(Hs[V],R);break;case"source":oi("error",R);break;case"img":case"image":case"link":oi("error",R),oi("load",R);break;case"details":oi("toggle",R);break;case"input":Ge(R,K),oi("invalid",R);break;case"select":R._wrapperState={wasMultiple:!!K.multiple},oi("invalid",R);break;case"textarea":He(R,K),oi("invalid",R)}mn(b,K),V=null;for(var pe in K)if(K.hasOwnProperty(pe)){var ke=K[pe];pe==="children"?typeof ke=="string"?R.textContent!==ke&&(K.suppressHydrationWarning!==!0&&Ff(R.textContent,ke,d),V=["children",ke]):typeof ke=="number"&&R.textContent!==""+ke&&(K.suppressHydrationWarning!==!0&&Ff(R.textContent,ke,d),V=["children",""+ke]):i.hasOwnProperty(pe)&&ke!=null&&pe==="onScroll"&&oi("scroll",R)}switch(b){case"input":tt(R),ft(R,K,!0);break;case"textarea":tt(R),vt(R);break;case"select":case"option":break;default:typeof K.onClick=="function"&&(R.onclick=oc)}R=V,m.updateQueue=R,R!==null&&(m.flags|=4)}else{pe=V.nodeType===9?V:V.ownerDocument,d==="http://www.w3.org/1999/xhtml"&&(d=ht(b)),d==="http://www.w3.org/1999/xhtml"?b==="script"?(d=pe.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild)):typeof R.is=="string"?d=pe.createElement(b,{is:R.is}):(d=pe.createElement(b),b==="select"&&(pe=d,R.multiple?pe.multiple=!0:R.size&&(pe.size=R.size))):d=pe.createElementNS(d,b),d[wo]=m,d[sc]=R,TR(d,m,!1,!1),m.stateNode=d;e:{switch(pe=fn(b,R),b){case"dialog":oi("cancel",d),oi("close",d),V=R;break;case"iframe":case"object":case"embed":oi("load",d),V=R;break;case"video":case"audio":for(V=0;V<Hs.length;V++)oi(Hs[V],d);V=R;break;case"source":oi("error",d),V=R;break;case"img":case"image":case"link":oi("error",d),oi("load",d),V=R;break;case"details":oi("toggle",d),V=R;break;case"input":Ge(d,R),V=Se(d,R),oi("invalid",d);break;case"option":V=R;break;case"select":d._wrapperState={wasMultiple:!!R.multiple},V=oe({},R,{value:void 0}),oi("invalid",d);break;case"textarea":He(d,R),V=le(d,R),oi("invalid",d);break;default:V=R}mn(b,V),ke=V;for(K in ke)if(ke.hasOwnProperty(K)){var Ye=ke[K];K==="style"?un(d,Ye):K==="dangerouslySetInnerHTML"?(Ye=Ye?Ye.__html:void 0,Ye!=null&&Rt(d,Ye)):K==="children"?typeof Ye=="string"?(b!=="textarea"||Ye!=="")&&tn(d,Ye):typeof Ye=="number"&&tn(d,""+Ye):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(i.hasOwnProperty(K)?Ye!=null&&K==="onScroll"&&oi("scroll",d):Ye!=null&&A(d,K,Ye,pe))}switch(b){case"input":tt(d),ft(d,R,!1);break;case"textarea":tt(d),vt(d);break;case"option":R.value!=null&&d.setAttribute("value",""+Ie(R.value));break;case"select":d.multiple=!!R.multiple,K=R.value,K!=null?ve(d,!!R.multiple,K,!1):R.defaultValue!=null&&ve(d,!!R.multiple,R.defaultValue,!0);break;default:typeof V.onClick=="function"&&(d.onclick=oc)}switch(b){case"button":case"input":case"select":case"textarea":R=!!R.autoFocus;break e;case"img":R=!0;break e;default:R=!1}}R&&(m.flags|=4)}m.ref!==null&&(m.flags|=512,m.flags|=2097152)}return ws(m),null;case 6:if(d&&m.stateNode!=null)CR(d,m,d.memoizedProps,R);else{if(typeof R!="string"&&m.stateNode===null)throw Error(t(166));if(b=$i(xs.current),$i(pa.current),Nr(m)){if(R=m.stateNode,b=m.memoizedProps,R[wo]=m,(K=R.nodeValue!==b)&&(d=$e,d!==null))switch(d.tag){case 3:Ff(R.nodeValue,b,(d.mode&1)!==0);break;case 5:d.memoizedProps.suppressHydrationWarning!==!0&&Ff(R.nodeValue,b,(d.mode&1)!==0)}K&&(m.flags|=4)}else R=(b.nodeType===9?b:b.ownerDocument).createTextNode(R),R[wo]=m,m.stateNode=R}return ws(m),null;case 13:if($r(di),R=m.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(Mt&&Tt!==null&&(m.mode&1)!==0&&(m.flags&128)===0)Tr(),nr(),m.flags|=98560,K=!1;else if(K=Nr(m),R!==null&&R.dehydrated!==null){if(d===null){if(!K)throw Error(t(318));if(K=m.memoizedState,K=K!==null?K.dehydrated:null,!K)throw Error(t(317));K[wo]=m}else nr(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;ws(m),K=!1}else Nt!==null&&(wb(Nt),Nt=null),K=!0;if(!K)return m.flags&65536?m:null}return(m.flags&128)!==0?(m.lanes=b,m):(R=R!==null,R!==(d!==null&&d.memoizedState!==null)&&R&&(m.child.flags|=8192,(m.mode&1)!==0&&(d===null||(di.current&1)!==0?Pa===0&&(Pa=3):Eb())),m.updateQueue!==null&&(m.flags|=4),ws(m),null);case 4:return _s(),fb(d,m),d===null&&Su(m.stateNode.containerInfo),ws(m),null;case 10:return ha(m.type._context),ws(m),null;case 17:return fa(m.type)&&Bf(),ws(m),null;case 19:if($r(di),K=m.memoizedState,K===null)return ws(m),null;if(R=(m.flags&128)!==0,pe=K.rendering,pe===null)if(R)cv(K,!1);else{if(Pa!==0||d!==null&&(d.flags&128)!==0)for(d=m.child;d!==null;){if(pe=ko(d),pe!==null){for(m.flags|=128,cv(K,!1),R=pe.updateQueue,R!==null&&(m.updateQueue=R,m.flags|=4),m.subtreeFlags=0,R=b,b=m.child;b!==null;)K=b,d=R,K.flags&=14680066,pe=K.alternate,pe===null?(K.childLanes=0,K.lanes=d,K.child=null,K.subtreeFlags=0,K.memoizedProps=null,K.memoizedState=null,K.updateQueue=null,K.dependencies=null,K.stateNode=null):(K.childLanes=pe.childLanes,K.lanes=pe.lanes,K.child=pe.child,K.subtreeFlags=0,K.deletions=null,K.memoizedProps=pe.memoizedProps,K.memoizedState=pe.memoizedState,K.updateQueue=pe.updateQueue,K.type=pe.type,d=pe.dependencies,K.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),b=b.sibling;return Jr(di,di.current&1|2),m.child}d=d.sibling}K.tail!==null&&Be()>ym&&(m.flags|=128,R=!0,cv(K,!1),m.lanes=4194304)}else{if(!R)if(d=ko(pe),d!==null){if(m.flags|=128,R=!0,b=d.updateQueue,b!==null&&(m.updateQueue=b,m.flags|=4),cv(K,!0),K.tail===null&&K.tailMode==="hidden"&&!pe.alternate&&!Mt)return ws(m),null}else 2*Be()-K.renderingStartTime>ym&&b!==1073741824&&(m.flags|=128,R=!0,cv(K,!1),m.lanes=4194304);K.isBackwards?(pe.sibling=m.child,m.child=pe):(b=K.last,b!==null?b.sibling=pe:m.child=pe,K.last=pe)}return K.tail!==null?(m=K.tail,K.rendering=m,K.tail=m.sibling,K.renderingStartTime=Be(),m.sibling=null,b=di.current,Jr(di,R?b&1|2:b&1),m):(ws(m),null);case 22:case 23:return Ab(),R=m.memoizedState!==null,d!==null&&d.memoizedState!==null!==R&&(m.flags|=8192),R&&(m.mode&1)!==0?(ru&1073741824)!==0&&(ws(m),m.subtreeFlags&6&&(m.flags|=8192)):ws(m),null;case 24:return null;case 25:return null}throw Error(t(156,m.tag))}function Jq(d,m){switch(We(m),m.tag){case 1:return fa(m.type)&&Bf(),d=m.flags,d&65536?(m.flags=d&-65537|128,m):null;case 3:return _s(),$r(Ta),$r(Do),El(),d=m.flags,(d&65536)!==0&&(d&128)===0?(m.flags=d&-65537|128,m):null;case 5:return Zc(m),null;case 13:if($r(di),d=m.memoizedState,d!==null&&d.dehydrated!==null){if(m.alternate===null)throw Error(t(340));nr()}return d=m.flags,d&65536?(m.flags=d&-65537|128,m):null;case 19:return $r(di),null;case 4:return _s(),null;case 10:return ha(m.type._context),null;case 22:case 23:return Ab(),null;case 24:return null;default:return null}}var m1=!1,bs=!1,Zq=typeof WeakSet=="function"?WeakSet:Set,An=null;function gm(d,m){var b=d.ref;if(b!==null)if(typeof b=="function")try{b(null)}catch(R){Bo(d,m,R)}else b.current=null}function db(d,m,b){try{b()}catch(R){Bo(d,m,R)}}var PR=!1;function Qq(d,m){if(bu=Ba,d=ii(),Pi(d)){if("selectionStart"in d)var b={start:d.selectionStart,end:d.selectionEnd};else e:{b=(b=d.ownerDocument)&&b.defaultView||window;var R=b.getSelection&&b.getSelection();if(R&&R.rangeCount!==0){b=R.anchorNode;var V=R.anchorOffset,K=R.focusNode;R=R.focusOffset;try{b.nodeType,K.nodeType}catch{b=null;break e}var pe=0,ke=-1,Ye=-1,_t=0,$t=0,Yt=d,jt=null;t:for(;;){for(var wn;Yt!==b||V!==0&&Yt.nodeType!==3||(ke=pe+V),Yt!==K||R!==0&&Yt.nodeType!==3||(Ye=pe+R),Yt.nodeType===3&&(pe+=Yt.nodeValue.length),(wn=Yt.firstChild)!==null;)jt=Yt,Yt=wn;for(;;){if(Yt===d)break t;if(jt===b&&++_t===V&&(ke=pe),jt===K&&++$t===R&&(Ye=pe),(wn=Yt.nextSibling)!==null)break;Yt=jt,jt=Yt.parentNode}Yt=wn}b=ke===-1||Ye===-1?null:{start:ke,end:Ye}}else b=null}b=b||{start:0,end:0}}else b=null;for(ac={focusedElem:d,selectionRange:b},Ba=!1,An=m;An!==null;)if(m=An,d=m.child,(m.subtreeFlags&1028)!==0&&d!==null)d.return=m,An=d;else for(;An!==null;){m=An;try{var Cn=m.alternate;if((m.flags&1024)!==0)switch(m.tag){case 0:case 11:case 15:break;case 1:if(Cn!==null){var In=Cn.memoizedProps,Zo=Cn.memoizedState,dt=m.stateNode,Qe=dt.getSnapshotBeforeUpdate(m.elementType===m.type?In:Ml(m.type,In),Zo);dt.__reactInternalSnapshotBeforeUpdate=Qe}break;case 3:var gt=m.stateNode.containerInfo;gt.nodeType===1?gt.textContent="":gt.nodeType===9&&gt.documentElement&&gt.removeChild(gt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(en){Bo(m,m.return,en)}if(d=m.sibling,d!==null){d.return=m.return,An=d;break}An=m.return}return Cn=PR,PR=!1,Cn}function fv(d,m,b){var R=m.updateQueue;if(R=R!==null?R.lastEffect:null,R!==null){var V=R=R.next;do{if((V.tag&d)===d){var K=V.destroy;V.destroy=void 0,K!==void 0&&db(m,b,K)}V=V.next}while(V!==R)}}function g1(d,m){if(m=m.updateQueue,m=m!==null?m.lastEffect:null,m!==null){var b=m=m.next;do{if((b.tag&d)===d){var R=b.create;b.destroy=R()}b=b.next}while(b!==m)}}function hb(d){var m=d.ref;if(m!==null){var b=d.stateNode;switch(d.tag){case 5:d=b;break;default:d=b}typeof m=="function"?m(d):m.current=d}}function IR(d){var m=d.alternate;m!==null&&(d.alternate=null,IR(m)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(m=d.stateNode,m!==null&&(delete m[wo],delete m[sc],delete m[Oo],delete m[Md],delete m[Cd])),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function RR(d){return d.tag===5||d.tag===3||d.tag===4}function NR(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||RR(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function pb(d,m,b){var R=d.tag;if(R===5||R===6)d=d.stateNode,m?b.nodeType===8?b.parentNode.insertBefore(d,m):b.insertBefore(d,m):(b.nodeType===8?(m=b.parentNode,m.insertBefore(d,b)):(m=b,m.appendChild(d)),b=b._reactRootContainer,b!=null||m.onclick!==null||(m.onclick=oc));else if(R!==4&&(d=d.child,d!==null))for(pb(d,m,b),d=d.sibling;d!==null;)pb(d,m,b),d=d.sibling}function mb(d,m,b){var R=d.tag;if(R===5||R===6)d=d.stateNode,m?b.insertBefore(d,m):b.appendChild(d);else if(R!==4&&(d=d.child,d!==null))for(mb(d,m,b),d=d.sibling;d!==null;)mb(d,m,b),d=d.sibling}var ss=null,pc=!1;function Od(d,m,b){for(b=b.child;b!==null;)LR(d,m,b),b=b.sibling}function LR(d,m,b){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(cn,b)}catch{}switch(b.tag){case 5:bs||gm(b,m);case 6:var R=ss,V=pc;ss=null,Od(d,m,b),ss=R,pc=V,ss!==null&&(pc?(d=ss,b=b.stateNode,d.nodeType===8?d.parentNode.removeChild(b):d.removeChild(b)):ss.removeChild(b.stateNode));break;case 18:ss!==null&&(pc?(d=ss,b=b.stateNode,d.nodeType===8?Td(d.parentNode,b):d.nodeType===1&&Td(d,b),ks(d)):Td(ss,b.stateNode));break;case 4:R=ss,V=pc,ss=b.stateNode.containerInfo,pc=!0,Od(d,m,b),ss=R,pc=V;break;case 0:case 11:case 14:case 15:if(!bs&&(R=b.updateQueue,R!==null&&(R=R.lastEffect,R!==null))){V=R=R.next;do{var K=V,pe=K.destroy;K=K.tag,pe!==void 0&&((K&2)!==0||(K&4)!==0)&&db(b,m,pe),V=V.next}while(V!==R)}Od(d,m,b);break;case 1:if(!bs&&(gm(b,m),R=b.stateNode,typeof R.componentWillUnmount=="function"))try{R.props=b.memoizedProps,R.state=b.memoizedState,R.componentWillUnmount()}catch(ke){Bo(b,m,ke)}Od(d,m,b);break;case 21:Od(d,m,b);break;case 22:b.mode&1?(bs=(R=bs)||b.memoizedState!==null,Od(d,m,b),bs=R):Od(d,m,b);break;default:Od(d,m,b)}}function OR(d){var m=d.updateQueue;if(m!==null){d.updateQueue=null;var b=d.stateNode;b===null&&(b=d.stateNode=new Zq),m.forEach(function(R){var V=l9.bind(null,d,R);b.has(R)||(b.add(R),R.then(V,V))})}}function mc(d,m){var b=m.deletions;if(b!==null)for(var R=0;R<b.length;R++){var V=b[R];try{var K=d,pe=m,ke=pe;e:for(;ke!==null;){switch(ke.tag){case 5:ss=ke.stateNode,pc=!1;break e;case 3:ss=ke.stateNode.containerInfo,pc=!0;break e;case 4:ss=ke.stateNode.containerInfo,pc=!0;break e}ke=ke.return}if(ss===null)throw Error(t(160));LR(K,pe,V),ss=null,pc=!1;var Ye=V.alternate;Ye!==null&&(Ye.return=null),V.return=null}catch(_t){Bo(V,m,_t)}}if(m.subtreeFlags&12854)for(m=m.child;m!==null;)DR(m,d),m=m.sibling}function DR(d,m){var b=d.alternate,R=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:if(mc(m,d),sf(d),R&4){try{fv(3,d,d.return),g1(3,d)}catch(In){Bo(d,d.return,In)}try{fv(5,d,d.return)}catch(In){Bo(d,d.return,In)}}break;case 1:mc(m,d),sf(d),R&512&&b!==null&&gm(b,b.return);break;case 5:if(mc(m,d),sf(d),R&512&&b!==null&&gm(b,b.return),d.flags&32){var V=d.stateNode;try{tn(V,"")}catch(In){Bo(d,d.return,In)}}if(R&4&&(V=d.stateNode,V!=null)){var K=d.memoizedProps,pe=b!==null?b.memoizedProps:K,ke=d.type,Ye=d.updateQueue;if(d.updateQueue=null,Ye!==null)try{ke==="input"&&K.type==="radio"&&K.name!=null&&ye(V,K),fn(ke,pe);var _t=fn(ke,K);for(pe=0;pe<Ye.length;pe+=2){var $t=Ye[pe],Yt=Ye[pe+1];$t==="style"?un(V,Yt):$t==="dangerouslySetInnerHTML"?Rt(V,Yt):$t==="children"?tn(V,Yt):A(V,$t,Yt,_t)}switch(ke){case"input":Ct(V,K);break;case"textarea":rt(V,K);break;case"select":var jt=V._wrapperState.wasMultiple;V._wrapperState.wasMultiple=!!K.multiple;var wn=K.value;wn!=null?ve(V,!!K.multiple,wn,!1):jt!==!!K.multiple&&(K.defaultValue!=null?ve(V,!!K.multiple,K.defaultValue,!0):ve(V,!!K.multiple,K.multiple?[]:"",!1))}V[sc]=K}catch(In){Bo(d,d.return,In)}}break;case 6:if(mc(m,d),sf(d),R&4){if(d.stateNode===null)throw Error(t(162));V=d.stateNode,K=d.memoizedProps;try{V.nodeValue=K}catch(In){Bo(d,d.return,In)}}break;case 3:if(mc(m,d),sf(d),R&4&&b!==null&&b.memoizedState.isDehydrated)try{ks(m.containerInfo)}catch(In){Bo(d,d.return,In)}break;case 4:mc(m,d),sf(d);break;case 13:mc(m,d),sf(d),V=d.child,V.flags&8192&&(K=V.memoizedState!==null,V.stateNode.isHidden=K,!K||V.alternate!==null&&V.alternate.memoizedState!==null||(yb=Be())),R&4&&OR(d);break;case 22:if($t=b!==null&&b.memoizedState!==null,d.mode&1?(bs=(_t=bs)||$t,mc(m,d),bs=_t):mc(m,d),sf(d),R&8192){if(_t=d.memoizedState!==null,(d.stateNode.isHidden=_t)&&!$t&&(d.mode&1)!==0)for(An=d,$t=d.child;$t!==null;){for(Yt=An=$t;An!==null;){switch(jt=An,wn=jt.child,jt.tag){case 0:case 11:case 14:case 15:fv(4,jt,jt.return);break;case 1:gm(jt,jt.return);var Cn=jt.stateNode;if(typeof Cn.componentWillUnmount=="function"){R=jt,b=jt.return;try{m=R,Cn.props=m.memoizedProps,Cn.state=m.memoizedState,Cn.componentWillUnmount()}catch(In){Bo(R,b,In)}}break;case 5:gm(jt,jt.return);break;case 22:if(jt.memoizedState!==null){UR(Yt);continue}}wn!==null?(wn.return=jt,An=wn):UR(Yt)}$t=$t.sibling}e:for($t=null,Yt=d;;){if(Yt.tag===5){if($t===null){$t=Yt;try{V=Yt.stateNode,_t?(K=V.style,typeof K.setProperty=="function"?K.setProperty("display","none","important"):K.display="none"):(ke=Yt.stateNode,Ye=Yt.memoizedProps.style,pe=Ye!=null&&Ye.hasOwnProperty("display")?Ye.display:null,ke.style.display=Xt("display",pe))}catch(In){Bo(d,d.return,In)}}}else if(Yt.tag===6){if($t===null)try{Yt.stateNode.nodeValue=_t?"":Yt.memoizedProps}catch(In){Bo(d,d.return,In)}}else if((Yt.tag!==22&&Yt.tag!==23||Yt.memoizedState===null||Yt===d)&&Yt.child!==null){Yt.child.return=Yt,Yt=Yt.child;continue}if(Yt===d)break e;for(;Yt.sibling===null;){if(Yt.return===null||Yt.return===d)break e;$t===Yt&&($t=null),Yt=Yt.return}$t===Yt&&($t=null),Yt.sibling.return=Yt.return,Yt=Yt.sibling}}break;case 19:mc(m,d),sf(d),R&4&&OR(d);break;case 21:break;default:mc(m,d),sf(d)}}function sf(d){var m=d.flags;if(m&2){try{e:{for(var b=d.return;b!==null;){if(RR(b)){var R=b;break e}b=b.return}throw Error(t(160))}switch(R.tag){case 5:var V=R.stateNode;R.flags&32&&(tn(V,""),R.flags&=-33);var K=NR(d);mb(d,K,V);break;case 3:case 4:var pe=R.stateNode.containerInfo,ke=NR(d);pb(d,ke,pe);break;default:throw Error(t(161))}}catch(Ye){Bo(d,d.return,Ye)}d.flags&=-3}m&4096&&(d.flags&=-4097)}function e9(d,m,b){An=d,kR(d)}function kR(d,m,b){for(var R=(d.mode&1)!==0;An!==null;){var V=An,K=V.child;if(V.tag===22&&R){var pe=V.memoizedState!==null||m1;if(!pe){var ke=V.alternate,Ye=ke!==null&&ke.memoizedState!==null||bs;ke=m1;var _t=bs;if(m1=pe,(bs=Ye)&&!_t)for(An=V;An!==null;)pe=An,Ye=pe.child,pe.tag===22&&pe.memoizedState!==null?BR(V):Ye!==null?(Ye.return=pe,An=Ye):BR(V);for(;K!==null;)An=K,kR(K),K=K.sibling;An=V,m1=ke,bs=_t}FR(d)}else(V.subtreeFlags&8772)!==0&&K!==null?(K.return=V,An=K):FR(d)}}function FR(d){for(;An!==null;){var m=An;if((m.flags&8772)!==0){var b=m.alternate;try{if((m.flags&8772)!==0)switch(m.tag){case 0:case 11:case 15:bs||g1(5,m);break;case 1:var R=m.stateNode;if(m.flags&4&&!bs)if(b===null)R.componentDidMount();else{var V=m.elementType===m.type?b.memoizedProps:Ml(m.type,b.memoizedProps);R.componentDidUpdate(V,b.memoizedState,R.__reactInternalSnapshotBeforeUpdate)}var K=m.updateQueue;K!==null&&Gs(m,K,R);break;case 3:var pe=m.updateQueue;if(pe!==null){if(b=null,m.child!==null)switch(m.child.tag){case 5:b=m.child.stateNode;break;case 1:b=m.child.stateNode}Gs(m,pe,b)}break;case 5:var ke=m.stateNode;if(b===null&&m.flags&4){b=ke;var Ye=m.memoizedProps;switch(m.type){case"button":case"input":case"select":case"textarea":Ye.autoFocus&&b.focus();break;case"img":Ye.src&&(b.src=Ye.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(m.memoizedState===null){var _t=m.alternate;if(_t!==null){var $t=_t.memoizedState;if($t!==null){var Yt=$t.dehydrated;Yt!==null&&ks(Yt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}bs||m.flags&512&&hb(m)}catch(jt){Bo(m,m.return,jt)}}if(m===d){An=null;break}if(b=m.sibling,b!==null){b.return=m.return,An=b;break}An=m.return}}function UR(d){for(;An!==null;){var m=An;if(m===d){An=null;break}var b=m.sibling;if(b!==null){b.return=m.return,An=b;break}An=m.return}}function BR(d){for(;An!==null;){var m=An;try{switch(m.tag){case 0:case 11:case 15:var b=m.return;try{g1(4,m)}catch(Ye){Bo(m,b,Ye)}break;case 1:var R=m.stateNode;if(typeof R.componentDidMount=="function"){var V=m.return;try{R.componentDidMount()}catch(Ye){Bo(m,V,Ye)}}var K=m.return;try{hb(m)}catch(Ye){Bo(m,K,Ye)}break;case 5:var pe=m.return;try{hb(m)}catch(Ye){Bo(m,pe,Ye)}}}catch(Ye){Bo(m,m.return,Ye)}if(m===d){An=null;break}var ke=m.sibling;if(ke!==null){ke.return=m.return,An=ke;break}An=m.return}}var t9=Math.ceil,v1=E.ReactCurrentDispatcher,gb=E.ReactCurrentOwner,Pu=E.ReactCurrentBatchConfig,Zr=0,Xa=null,ma=null,ls=0,ru=0,vm=Ai(0),Pa=0,dv=null,zh=0,y1=0,vb=0,hv=null,Cl=null,yb=0,ym=1/0,Gf=null,x1=!1,xb=null,Dd=null,_1=!1,kd=null,S1=0,pv=0,_b=null,w1=-1,b1=0;function $s(){return(Zr&6)!==0?Be():w1!==-1?w1:w1=Be()}function Fd(d){return(d.mode&1)===0?1:(Zr&2)!==0&&ls!==0?ls&-ls:ai.transition!==null?(b1===0&&(b1=er()),b1):(d=Ir,d!==0||(d=window.event,d=d===void 0?16:Nf(d.type)),d)}function gc(d,m,b,R){if(50<pv)throw pv=0,_b=null,Error(t(185));Pr(d,b,R),((Zr&2)===0||d!==Xa)&&(d===Xa&&((Zr&2)===0&&(y1|=b),Pa===4&&Ud(d,ls)),Pl(d,R),b===1&&Zr===0&&(m.mode&1)===0&&(ym=Be()+500,Jc&&J()))}function Pl(d,m){var b=d.callbackNode;Pn(d,m);var R=Fn(d,d===Xa?ls:0);if(R===0)b!==null&&Ue(b),d.callbackNode=null,d.callbackPriority=0;else if(m=R&-R,d.callbackPriority!==m){if(b!=null&&Ue(b),m===1)d.tag===0?q(HR.bind(null,d)):N(HR.bind(null,d)),sv(function(){(Zr&6)===0&&J()}),b=null;else{switch(ll(R)){case 1:b=ut;break;case 4:b=St;break;case 16:b=Bt;break;case 536870912:b=Qt;break;default:b=Bt}b=YR(b,zR.bind(null,d))}d.callbackPriority=m,d.callbackNode=b}}function zR(d,m){if(w1=-1,b1=0,(Zr&6)!==0)throw Error(t(327));var b=d.callbackNode;if(xm()&&d.callbackNode!==b)return null;var R=Fn(d,d===Xa?ls:0);if(R===0)return null;if((R&30)!==0||(R&d.expiredLanes)!==0||m)m=A1(d,R);else{m=R;var V=Zr;Zr|=2;var K=GR();(Xa!==d||ls!==m)&&(Gf=null,ym=Be()+500,Vh(d,m));do try{i9();break}catch(ke){VR(d,ke)}while(!0);ro(),v1.current=K,Zr=V,ma!==null?m=0:(Xa=null,ls=0,m=Pa)}if(m!==0){if(m===2&&(V=jn(d),V!==0&&(R=V,m=Sb(d,V))),m===1)throw b=dv,Vh(d,0),Ud(d,R),Pl(d,Be()),b;if(m===6)Ud(d,R);else{if(V=d.current.alternate,(R&30)===0&&!n9(V)&&(m=A1(d,R),m===2&&(K=jn(d),K!==0&&(R=K,m=Sb(d,K))),m===1))throw b=dv,Vh(d,0),Ud(d,R),Pl(d,Be()),b;switch(d.finishedWork=V,d.finishedLanes=R,m){case 0:case 1:throw Error(t(345));case 2:Gh(d,Cl,Gf);break;case 3:if(Ud(d,R),(R&130023424)===R&&(m=yb+500-Be(),10<m)){if(Fn(d,0)!==0)break;if(V=d.suspendedLanes,(V&R)!==R){$s(),d.pingedLanes|=d.suspendedLanes&V;break}d.timeoutHandle=Nh(Gh.bind(null,d,Cl,Gf),m);break}Gh(d,Cl,Gf);break;case 4:if(Ud(d,R),(R&4194240)===R)break;for(m=d.eventTimes,V=-1;0<R;){var pe=31-Vt(R);K=1<<pe,pe=m[pe],pe>V&&(V=pe),R&=~K}if(R=V,R=Be()-R,R=(120>R?120:480>R?480:1080>R?1080:1920>R?1920:3e3>R?3e3:4320>R?4320:1960*t9(R/1960))-R,10<R){d.timeoutHandle=Nh(Gh.bind(null,d,Cl,Gf),R);break}Gh(d,Cl,Gf);break;case 5:Gh(d,Cl,Gf);break;default:throw Error(t(329))}}}return Pl(d,Be()),d.callbackNode===b?zR.bind(null,d):null}function Sb(d,m){var b=hv;return d.current.memoizedState.isDehydrated&&(Vh(d,m).flags|=256),d=A1(d,m),d!==2&&(m=Cl,Cl=b,m!==null&&wb(m)),d}function wb(d){Cl===null?Cl=d:Cl.push.apply(Cl,d)}function n9(d){for(var m=d;;){if(m.flags&16384){var b=m.updateQueue;if(b!==null&&(b=b.stores,b!==null))for(var R=0;R<b.length;R++){var V=b[R],K=V.getSnapshot;V=V.value;try{if(!$o(K(),V))return!1}catch{return!1}}}if(b=m.child,m.subtreeFlags&16384&&b!==null)b.return=m,m=b;else{if(m===d)break;for(;m.sibling===null;){if(m.return===null||m.return===d)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function Ud(d,m){for(m&=~vb,m&=~y1,d.suspendedLanes|=m,d.pingedLanes&=~m,d=d.expirationTimes;0<m;){var b=31-Vt(m),R=1<<b;d[b]=-1,m&=~R}}function HR(d){if((Zr&6)!==0)throw Error(t(327));xm();var m=Fn(d,0);if((m&1)===0)return Pl(d,Be()),null;var b=A1(d,m);if(d.tag!==0&&b===2){var R=jn(d);R!==0&&(m=R,b=Sb(d,R))}if(b===1)throw b=dv,Vh(d,0),Ud(d,m),Pl(d,Be()),b;if(b===6)throw Error(t(345));return d.finishedWork=d.current.alternate,d.finishedLanes=m,Gh(d,Cl,Gf),Pl(d,Be()),null}function bb(d,m){var b=Zr;Zr|=1;try{return d(m)}finally{Zr=b,Zr===0&&(ym=Be()+500,Jc&&J())}}function Hh(d){kd!==null&&kd.tag===0&&(Zr&6)===0&&xm();var m=Zr;Zr|=1;var b=Pu.transition,R=Ir;try{if(Pu.transition=null,Ir=1,d)return d()}finally{Ir=R,Pu.transition=b,Zr=m,(Zr&6)===0&&J()}}function Ab(){ru=vm.current,$r(vm)}function Vh(d,m){d.finishedWork=null,d.finishedLanes=0;var b=d.timeoutHandle;if(b!==-1&&(d.timeoutHandle=-1,Ad(b)),ma!==null)for(b=ma.return;b!==null;){var R=b;switch(We(R),R.tag){case 1:R=R.type.childContextTypes,R!=null&&Bf();break;case 3:_s(),$r(Ta),$r(Do),El();break;case 5:Zc(R);break;case 4:_s();break;case 13:$r(di);break;case 19:$r(di);break;case 10:ha(R.type._context);break;case 22:case 23:Ab()}b=b.return}if(Xa=d,ma=d=Bd(d.current,null),ls=ru=m,Pa=0,dv=null,vb=y1=zh=0,Cl=hv=null,Ma!==null){for(m=0;m<Ma.length;m++)if(b=Ma[m],R=b.interleaved,R!==null){b.interleaved=null;var V=R.next,K=b.pending;if(K!==null){var pe=K.next;K.next=V,R.next=pe}b.pending=R}Ma=null}return d}function VR(d,m){do{var b=ma;try{if(ro(),cc.current=pm,as){for(var R=hi.memoizedState;R!==null;){var V=R.queue;V!==null&&(V.pending=null),R=R.next}as=!1}if(Ss=0,Mr=Fi=hi=null,po=!1,tu=0,gb.current=null,b===null||b.return===null){Pa=1,dv=m,ma=null;break}e:{var K=d,pe=b.return,ke=b,Ye=m;if(m=ls,ke.flags|=32768,Ye!==null&&typeof Ye=="object"&&typeof Ye.then=="function"){var _t=Ye,$t=ke,Yt=$t.tag;if(($t.mode&1)===0&&(Yt===0||Yt===11||Yt===15)){var jt=$t.alternate;jt?($t.updateQueue=jt.updateQueue,$t.memoizedState=jt.memoizedState,$t.lanes=jt.lanes):($t.updateQueue=null,$t.memoizedState=null)}var wn=bn(pe);if(wn!==null){wn.flags&=-257,ar(wn,pe,ke,K,m),wn.mode&1&&Jt(K,_t,m),m=wn,Ye=_t;var Cn=m.updateQueue;if(Cn===null){var In=new Set;In.add(Ye),m.updateQueue=In}else Cn.add(Ye);break e}else{if((m&1)===0){Jt(K,_t,m),Eb();break e}Ye=Error(t(426))}}else if(Mt&&ke.mode&1){var Zo=bn(pe);if(Zo!==null){(Zo.flags&65536)===0&&(Zo.flags|=256),ar(Zo,pe,ke,K,m),kr(B(Ye,ke));break e}}K=Ye=B(Ye,ke),Pa!==4&&(Pa=2),hv===null?hv=[K]:hv.push(K),K=pe;do{switch(K.tag){case 3:K.flags|=65536,m&=-m,K.lanes|=m;var dt=et(K,Ye,m);Yo(K,dt);break e;case 1:ke=Ye;var Qe=K.type,gt=K.stateNode;if((K.flags&128)===0&&(typeof Qe.getDerivedStateFromError=="function"||gt!==null&&typeof gt.componentDidCatch=="function"&&(Dd===null||!Dd.has(gt)))){K.flags|=65536,m&=-m,K.lanes|=m;var en=Pt(K,ke,m);Yo(K,en);break e}}K=K.return}while(K!==null)}WR(b)}catch(On){m=On,ma===b&&b!==null&&(ma=b=b.return);continue}break}while(!0)}function GR(){var d=v1.current;return v1.current=pm,d===null?pm:d}function Eb(){(Pa===0||Pa===3||Pa===2)&&(Pa=4),Xa===null||(zh&268435455)===0&&(y1&268435455)===0||Ud(Xa,ls)}function A1(d,m){var b=Zr;Zr|=2;var R=GR();(Xa!==d||ls!==m)&&(Gf=null,Vh(d,m));do try{r9();break}catch(V){VR(d,V)}while(!0);if(ro(),Zr=b,v1.current=R,ma!==null)throw Error(t(261));return Xa=null,ls=0,Pa}function r9(){for(;ma!==null;)qR(ma)}function i9(){for(;ma!==null&&!Re();)qR(ma)}function qR(d){var m=XR(d.alternate,d,ru);d.memoizedProps=d.pendingProps,m===null?WR(d):ma=m,gb.current=null}function WR(d){var m=d;do{var b=m.alternate;if(d=m.return,(m.flags&32768)===0){if(b=Kq(b,m,ru),b!==null){ma=b;return}}else{if(b=Jq(b,m),b!==null){b.flags&=32767,ma=b;return}if(d!==null)d.flags|=32768,d.subtreeFlags=0,d.deletions=null;else{Pa=6,ma=null;return}}if(m=m.sibling,m!==null){ma=m;return}ma=m=d}while(m!==null);Pa===0&&(Pa=5)}function Gh(d,m,b){var R=Ir,V=Pu.transition;try{Pu.transition=null,Ir=1,o9(d,m,b,R)}finally{Pu.transition=V,Ir=R}return null}function o9(d,m,b,R){do xm();while(kd!==null);if((Zr&6)!==0)throw Error(t(327));b=d.finishedWork;var V=d.finishedLanes;if(b===null)return null;if(d.finishedWork=null,d.finishedLanes=0,b===d.current)throw Error(t(177));d.callbackNode=null,d.callbackPriority=0;var K=b.lanes|b.childLanes;if(Io(d,K),d===Xa&&(ma=Xa=null,ls=0),(b.subtreeFlags&2064)===0&&(b.flags&2064)===0||_1||(_1=!0,YR(Bt,function(){return xm(),null})),K=(b.flags&15990)!==0,(b.subtreeFlags&15990)!==0||K){K=Pu.transition,Pu.transition=null;var pe=Ir;Ir=1;var ke=Zr;Zr|=4,gb.current=null,Qq(d,b),DR(b,d),bi(ac),Ba=!!bu,ac=bu=null,d.current=b,e9(b),Ne(),Zr=ke,Ir=pe,Pu.transition=K}else d.current=b;if(_1&&(_1=!1,kd=d,S1=V),K=d.pendingLanes,K===0&&(Dd=null),_n(b.stateNode),Pl(d,Be()),m!==null)for(R=d.onRecoverableError,b=0;b<m.length;b++)V=m[b],R(V.value,{componentStack:V.stack,digest:V.digest});if(x1)throw x1=!1,d=xb,xb=null,d;return(S1&1)!==0&&d.tag!==0&&xm(),K=d.pendingLanes,(K&1)!==0?d===_b?pv++:(pv=0,_b=d):pv=0,J(),null}function xm(){if(kd!==null){var d=ll(S1),m=Pu.transition,b=Ir;try{if(Pu.transition=null,Ir=16>d?16:d,kd===null)var R=!1;else{if(d=kd,kd=null,S1=0,(Zr&6)!==0)throw Error(t(331));var V=Zr;for(Zr|=4,An=d.current;An!==null;){var K=An,pe=K.child;if((An.flags&16)!==0){var ke=K.deletions;if(ke!==null){for(var Ye=0;Ye<ke.length;Ye++){var _t=ke[Ye];for(An=_t;An!==null;){var $t=An;switch($t.tag){case 0:case 11:case 15:fv(8,$t,K)}var Yt=$t.child;if(Yt!==null)Yt.return=$t,An=Yt;else for(;An!==null;){$t=An;var jt=$t.sibling,wn=$t.return;if(IR($t),$t===_t){An=null;break}if(jt!==null){jt.return=wn,An=jt;break}An=wn}}}var Cn=K.alternate;if(Cn!==null){var In=Cn.child;if(In!==null){Cn.child=null;do{var Zo=In.sibling;In.sibling=null,In=Zo}while(In!==null)}}An=K}}if((K.subtreeFlags&2064)!==0&&pe!==null)pe.return=K,An=pe;else e:for(;An!==null;){if(K=An,(K.flags&2048)!==0)switch(K.tag){case 0:case 11:case 15:fv(9,K,K.return)}var dt=K.sibling;if(dt!==null){dt.return=K.return,An=dt;break e}An=K.return}}var Qe=d.current;for(An=Qe;An!==null;){pe=An;var gt=pe.child;if((pe.subtreeFlags&2064)!==0&&gt!==null)gt.return=pe,An=gt;else e:for(pe=Qe;An!==null;){if(ke=An,(ke.flags&2048)!==0)try{switch(ke.tag){case 0:case 11:case 15:g1(9,ke)}}catch(On){Bo(ke,ke.return,On)}if(ke===pe){An=null;break e}var en=ke.sibling;if(en!==null){en.return=ke.return,An=en;break e}An=ke.return}}if(Zr=V,J(),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(cn,d)}catch{}R=!0}return R}finally{Ir=b,Pu.transition=m}}return!1}function jR(d,m,b){m=B(b,m),m=et(d,m,1),d=si(d,m,1),m=$s(),d!==null&&(Pr(d,1,m),Pl(d,m))}function Bo(d,m,b){if(d.tag===3)jR(d,d,b);else for(;m!==null;){if(m.tag===3){jR(m,d,b);break}else if(m.tag===1){var R=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof R.componentDidCatch=="function"&&(Dd===null||!Dd.has(R))){d=B(b,d),d=Pt(m,d,1),m=si(m,d,1),d=$s(),m!==null&&(Pr(m,1,d),Pl(m,d));break}}m=m.return}}function a9(d,m,b){var R=d.pingCache;R!==null&&R.delete(m),m=$s(),d.pingedLanes|=d.suspendedLanes&b,Xa===d&&(ls&b)===b&&(Pa===4||Pa===3&&(ls&130023424)===ls&&500>Be()-yb?Vh(d,0):vb|=b),Pl(d,m)}function $R(d,m){m===0&&((d.mode&1)===0?m=1:(m=vr,vr<<=1,(vr&130023424)===0&&(vr=4194304)));var b=$s();d=Fr(d,m),d!==null&&(Pr(d,m,b),Pl(d,b))}function s9(d){var m=d.memoizedState,b=0;m!==null&&(b=m.retryLane),$R(d,b)}function l9(d,m){var b=0;switch(d.tag){case 13:var R=d.stateNode,V=d.memoizedState;V!==null&&(b=V.retryLane);break;case 19:R=d.stateNode;break;default:throw Error(t(314))}R!==null&&R.delete(m),$R(d,b)}var XR;XR=function(d,m,b){if(d!==null)if(d.memoizedProps!==m.pendingProps||Ta.current)_r=!0;else{if((d.lanes&b)===0&&(m.flags&128)===0)return _r=!1,Yq(d,m,b);_r=(d.flags&131072)!==0}else _r=!1,Mt&&(m.flags&1048576)!==0&&Dt(m,xe,m.index);switch(m.lanes=0,m.tag){case 2:var R=m.type;p1(d,m),d=m.pendingProps;var V=lc(m,Do.current);Ei(m,b),V=fc(null,m,R,d,V,b);var K=Tl();return m.flags|=1,typeof V=="object"&&V!==null&&typeof V.render=="function"&&V.$$typeof===void 0?(m.tag=1,m.memoizedState=null,m.updateQueue=null,fa(R)?(K=!0,Al(m)):K=!1,m.memoizedState=V.state!==null&&V.state!==void 0?V.state:null,or(m),V.updater=mm,m.stateNode=V,V._reactInternals=m,I(m,R,d,b),m=dr(null,m,R,!0,K,b)):(m.tag=0,Mt&&K&&wt(m),vn(null,m,V,b),m=m.child),m;case 16:R=m.elementType;e:{switch(p1(d,m),d=m.pendingProps,V=R._init,R=V(R._payload),m.type=R,V=m.tag=c9(R),d=Ml(R,d),V){case 0:m=hn(null,m,R,d,b);break e;case 1:m=Nn(null,m,R,d,b);break e;case 11:m=Ca(null,m,R,d,b);break e;case 14:m=js(null,m,R,Ml(R.type,d),b);break e}throw Error(t(306,R,""))}return m;case 0:return R=m.type,V=m.pendingProps,V=m.elementType===R?V:Ml(R,V),hn(d,m,R,V,b);case 1:return R=m.type,V=m.pendingProps,V=m.elementType===R?V:Ml(R,V),Nn(d,m,R,V,b);case 3:e:{if(sr(m),d===null)throw Error(t(387));R=m.pendingProps,K=m.memoizedState,V=K.element,ji(d,m),fi(m,R,null,b);var pe=m.memoizedState;if(R=pe.element,K.isDehydrated)if(K={element:R,isDehydrated:!1,cache:pe.cache,pendingSuspenseBoundaries:pe.pendingSuspenseBoundaries,transitions:pe.transitions},m.updateQueue.baseState=K,m.memoizedState=K,m.flags&256){V=B(Error(t(423)),m),m=Vr(d,m,R,b,V);break e}else if(R!==V){V=B(Error(t(424)),m),m=Vr(d,m,R,b,V);break e}else for(Tt=ca(m.stateNode.containerInfo.firstChild),$e=m,Mt=!0,Nt=null,b=Dr(m,null,R,b),m.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(nr(),R===V){m=Vf(d,m,b);break e}vn(d,m,R,b)}m=m.child}return m;case 5:return uc(m),d===null&&sn(m),R=m.type,V=m.pendingProps,K=d!==null?d.memoizedProps:null,pe=V.children,Rh(R,V)?pe=null:K!==null&&Rh(R,K)&&(m.flags|=32),bt(d,m),vn(d,m,pe,b),m.child;case 6:return d===null&&sn(m),null;case 13:return hc(d,m,b);case 4:return Tu(m,m.stateNode.containerInfo),R=m.pendingProps,d===null?m.child=ho(m,null,R,b):vn(d,m,R,b),m.child;case 11:return R=m.type,V=m.pendingProps,V=m.elementType===R?V:Ml(R,V),Ca(d,m,R,V,b);case 7:return vn(d,m,m.pendingProps,b),m.child;case 8:return vn(d,m,m.pendingProps.children,b),m.child;case 12:return vn(d,m,m.pendingProps.children,b),m.child;case 10:e:{if(R=m.type._context,V=m.pendingProps,K=m.memoizedProps,pe=V.value,Jr(bo,R._currentValue),R._currentValue=pe,K!==null)if($o(K.value,pe)){if(K.children===V.children&&!Ta.current){m=Vf(d,m,b);break e}}else for(K=m.child,K!==null&&(K.return=m);K!==null;){var ke=K.dependencies;if(ke!==null){pe=K.child;for(var Ye=ke.firstContext;Ye!==null;){if(Ye.context===R){if(K.tag===1){Ye=Hr(-1,b&-b),Ye.tag=2;var _t=K.updateQueue;if(_t!==null){_t=_t.shared;var $t=_t.pending;$t===null?Ye.next=Ye:(Ye.next=$t.next,$t.next=Ye),_t.pending=Ye}}K.lanes|=b,Ye=K.alternate,Ye!==null&&(Ye.lanes|=b),qa(K.return,b,m),ke.lanes|=b;break}Ye=Ye.next}}else if(K.tag===10)pe=K.type===m.type?null:K.child;else if(K.tag===18){if(pe=K.return,pe===null)throw Error(t(341));pe.lanes|=b,ke=pe.alternate,ke!==null&&(ke.lanes|=b),qa(pe,b,m),pe=K.sibling}else pe=K.child;if(pe!==null)pe.return=K;else for(pe=K;pe!==null;){if(pe===m){pe=null;break}if(K=pe.sibling,K!==null){K.return=pe.return,pe=K;break}pe=pe.return}K=pe}vn(d,m,V.children,b),m=m.child}return m;case 9:return V=m.type,R=m.pendingProps.children,Ei(m,b),V=io(V),R=R(V),m.flags|=1,vn(d,m,R,b),m.child;case 14:return R=m.type,V=Ml(R,m.pendingProps),V=Ml(R.type,V),js(d,m,R,V,b);case 15:return yt(d,m,m.type,m.pendingProps,b);case 17:return R=m.type,V=m.pendingProps,V=m.elementType===R?V:Ml(R,V),p1(d,m),m.tag=1,fa(R)?(d=!0,Al(m)):d=!1,Ei(m,b),g(m,R,V),I(m,R,V,b),dr(null,m,R,!0,d,b);case 19:return ER(d,m,b);case 22:return nt(d,m,b)}throw Error(t(156,m.tag))};function YR(d,m){return De(d,m)}function u9(d,m,b,R){this.tag=d,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=R,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Iu(d,m,b,R){return new u9(d,m,b,R)}function Tb(d){return d=d.prototype,!(!d||!d.isReactComponent)}function c9(d){if(typeof d=="function")return Tb(d)?1:0;if(d!=null){if(d=d.$$typeof,d===z)return 11;if(d===se)return 14}return 2}function Bd(d,m){var b=d.alternate;return b===null?(b=Iu(d.tag,m,d.key,d.mode),b.elementType=d.elementType,b.type=d.type,b.stateNode=d.stateNode,b.alternate=d,d.alternate=b):(b.pendingProps=m,b.type=d.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=d.flags&14680064,b.childLanes=d.childLanes,b.lanes=d.lanes,b.child=d.child,b.memoizedProps=d.memoizedProps,b.memoizedState=d.memoizedState,b.updateQueue=d.updateQueue,m=d.dependencies,b.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},b.sibling=d.sibling,b.index=d.index,b.ref=d.ref,b}function E1(d,m,b,R,V,K){var pe=2;if(R=d,typeof d=="function")Tb(d)&&(pe=1);else if(typeof d=="string")pe=5;else e:switch(d){case L:return qh(b.children,V,K,m);case D:pe=8,V|=8;break;case F:return d=Iu(12,b,m,V|2),d.elementType=F,d.lanes=K,d;case W:return d=Iu(13,b,m,V),d.elementType=W,d.lanes=K,d;case j:return d=Iu(19,b,m,V),d.elementType=j,d.lanes=K,d;case Q:return T1(b,V,K,m);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case U:pe=10;break e;case k:pe=9;break e;case z:pe=11;break e;case se:pe=14;break e;case Y:pe=16,R=null;break e}throw Error(t(130,d==null?d:typeof d,""))}return m=Iu(pe,b,m,V),m.elementType=d,m.type=R,m.lanes=K,m}function qh(d,m,b,R){return d=Iu(7,d,R,m),d.lanes=b,d}function T1(d,m,b,R){return d=Iu(22,d,R,m),d.elementType=Q,d.lanes=b,d.stateNode={isHidden:!1},d}function Mb(d,m,b){return d=Iu(6,d,null,m),d.lanes=b,d}function Cb(d,m,b){return m=Iu(4,d.children!==null?d.children:[],d.key,m),m.lanes=b,m.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},m}function f9(d,m,b,R,V){this.tag=m,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Si(0),this.expirationTimes=Si(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Si(0),this.identifierPrefix=R,this.onRecoverableError=V,this.mutableSourceEagerHydrationData=null}function Pb(d,m,b,R,V,K,pe,ke,Ye){return d=new f9(d,m,b,ke,Ye),m===1?(m=1,K===!0&&(m|=8)):m=0,K=Iu(3,null,null,m),d.current=K,K.stateNode=d,K.memoizedState={element:R,isDehydrated:b,cache:null,transitions:null,pendingSuspenseBoundaries:null},or(K),d}function d9(d,m,b){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:O,key:R==null?null:""+R,children:d,containerInfo:m,implementation:b}}function KR(d){if(!d)return Ql;d=d._reactInternals;e:{if(we(d)!==d||d.tag!==1)throw Error(t(170));var m=d;do{switch(m.tag){case 3:m=m.stateNode.context;break e;case 1:if(fa(m.type)){m=m.stateNode.__reactInternalMemoizedMergedChildContext;break e}}m=m.return}while(m!==null);throw Error(t(171))}if(d.tag===1){var b=d.type;if(fa(b))return Kc(d,b,m)}return m}function JR(d,m,b,R,V,K,pe,ke,Ye){return d=Pb(b,R,!0,d,V,K,pe,ke,Ye),d.context=KR(null),b=d.current,R=$s(),V=Fd(b),K=Hr(R,V),K.callback=m??null,si(b,K,V),d.current.lanes=V,Pr(d,V,R),Pl(d,R),d}function M1(d,m,b,R){var V=m.current,K=$s(),pe=Fd(V);return b=KR(b),m.context===null?m.context=b:m.pendingContext=b,m=Hr(K,pe),m.payload={element:d},R=R===void 0?null:R,R!==null&&(m.callback=R),d=si(V,m,pe),d!==null&&(gc(d,V,pe,K),Eo(d,V,pe)),pe}function C1(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 5:return d.child.stateNode;default:return d.child.stateNode}}function ZR(d,m){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var b=d.retryLane;d.retryLane=b!==0&&b<m?b:m}}function Ib(d,m){ZR(d,m),(d=d.alternate)&&ZR(d,m)}function h9(){return null}var QR=typeof reportError=="function"?reportError:function(d){console.error(d)};function Rb(d){this._internalRoot=d}P1.prototype.render=Rb.prototype.render=function(d){var m=this._internalRoot;if(m===null)throw Error(t(409));M1(d,m,null,null)},P1.prototype.unmount=Rb.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var m=d.containerInfo;Hh(function(){M1(null,d,null,null)}),m[fo]=null}};function P1(d){this._internalRoot=d}P1.prototype.unstable_scheduleHydration=function(d){if(d){var m=hs();d={blockedOn:null,target:d,priority:m};for(var b=0;b<ul.length&&m!==0&&m<ul[b].priority;b++);ul.splice(b,0,d),b===0&&pu(d)}};function Nb(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function I1(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11&&(d.nodeType!==8||d.nodeValue!==" react-mount-point-unstable "))}function eN(){}function p9(d,m,b,R,V){if(V){if(typeof R=="function"){var K=R;R=function(){var _t=C1(pe);K.call(_t)}}var pe=JR(m,R,d,0,null,!1,!1,"",eN);return d._reactRootContainer=pe,d[fo]=pe.current,Su(d.nodeType===8?d.parentNode:d),Hh(),pe}for(;V=d.lastChild;)d.removeChild(V);if(typeof R=="function"){var ke=R;R=function(){var _t=C1(Ye);ke.call(_t)}}var Ye=Pb(d,0,!1,null,null,!1,!1,"",eN);return d._reactRootContainer=Ye,d[fo]=Ye.current,Su(d.nodeType===8?d.parentNode:d),Hh(function(){M1(m,Ye,b,R)}),Ye}function R1(d,m,b,R,V){var K=b._reactRootContainer;if(K){var pe=K;if(typeof V=="function"){var ke=V;V=function(){var Ye=C1(pe);ke.call(Ye)}}M1(m,pe,d,V)}else pe=p9(b,m,d,V,R);return C1(pe)}Wu=function(d){switch(d.tag){case 3:var m=d.stateNode;if(m.current.memoizedState.isDehydrated){var b=fr(m.pendingLanes);b!==0&&(oa(m,b|1),Pl(m,Be()),(Zr&6)===0&&(ym=Be()+500,J()))}break;case 13:Hh(function(){var R=Fr(d,1);if(R!==null){var V=$s();gc(R,d,1,V)}}),Ib(d,1)}},Rf=function(d){if(d.tag===13){var m=Fr(d,134217728);if(m!==null){var b=$s();gc(m,d,134217728,b)}Ib(d,134217728)}},yd=function(d){if(d.tag===13){var m=Fd(d),b=Fr(d,m);if(b!==null){var R=$s();gc(b,d,m,R)}Ib(d,m)}},hs=function(){return Ir},Vl=function(d,m){var b=Ir;try{return Ir=d,m()}finally{Ir=b}},ot=function(d,m,b){switch(m){case"input":if(Ct(d,b),m=b.name,b.type==="radio"&&m!=null){for(b=d;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll("input[name="+JSON.stringify(""+m)+'][type="radio"]'),m=0;m<b.length;m++){var R=b[m];if(R!==d&&R.form===d.form){var V=Uf(R);if(!V)throw Error(t(90));Te(R),Ct(R,V)}}}break;case"textarea":rt(d,b);break;case"select":m=b.value,m!=null&&ve(d,!!b.multiple,m,!1)}},ir=bb,$n=Hh;var m9={usingClientEntryPoint:!1,Events:[bl,Gi,Uf,Lt,rn,bb]},mv={findFiberByHostInstance:Zl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},g9={bundleType:mv.bundleType,version:mv.version,rendererPackageName:mv.rendererPackageName,rendererConfig:mv.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(d){return d=ae(d),d===null?null:d.stateNode},findFiberByHostInstance:mv.findFiberByHostInstance||h9,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var N1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!N1.isDisabled&&N1.supportsFiber)try{cn=N1.inject(g9),Kt=N1}catch{}}return Il.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=m9,Il.createPortal=function(d,m){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nb(m))throw Error(t(200));return d9(d,m,null,b)},Il.createRoot=function(d,m){if(!Nb(d))throw Error(t(299));var b=!1,R="",V=QR;return m!=null&&(m.unstable_strictMode===!0&&(b=!0),m.identifierPrefix!==void 0&&(R=m.identifierPrefix),m.onRecoverableError!==void 0&&(V=m.onRecoverableError)),m=Pb(d,1,!1,null,null,b,!1,R,V),d[fo]=m.current,Su(d.nodeType===8?d.parentNode:d),new Rb(m)},Il.findDOMNode=function(d){if(d==null)return null;if(d.nodeType===1)return d;var m=d._reactInternals;if(m===void 0)throw typeof d.render=="function"?Error(t(188)):(d=Object.keys(d).join(","),Error(t(268,d)));return d=ae(m),d=d===null?null:d.stateNode,d},Il.flushSync=function(d){return Hh(d)},Il.hydrate=function(d,m,b){if(!I1(m))throw Error(t(200));return R1(null,d,m,!0,b)},Il.hydrateRoot=function(d,m,b){if(!Nb(d))throw Error(t(405));var R=b!=null&&b.hydratedSources||null,V=!1,K="",pe=QR;if(b!=null&&(b.unstable_strictMode===!0&&(V=!0),b.identifierPrefix!==void 0&&(K=b.identifierPrefix),b.onRecoverableError!==void 0&&(pe=b.onRecoverableError)),m=JR(m,null,d,1,b??null,V,!1,K,pe),d[fo]=m.current,Su(d),R)for(d=0;d<R.length;d++)b=R[d],V=b._getVersion,V=V(b._source),m.mutableSourceEagerHydrationData==null?m.mutableSourceEagerHydrationData=[b,V]:m.mutableSourceEagerHydrationData.push(b,V);return new P1(m)},Il.render=function(d,m,b){if(!I1(m))throw Error(t(200));return R1(null,d,m,!1,b)},Il.unmountComponentAtNode=function(d){if(!I1(d))throw Error(t(40));return d._reactRootContainer?(Hh(function(){R1(null,null,d,!1,function(){d._reactRootContainer=null,d[fo]=null})}),!0):!1},Il.unstable_batchedUpdates=bb,Il.unstable_renderSubtreeIntoContainer=function(d,m,b,R){if(!I1(b))throw Error(t(200));if(d==null||d._reactInternals===void 0)throw Error(t(38));return R1(d,m,b,!1,R)},Il.version="18.3.1-next-f1338f8080-20240426",Il}var lN;function M9(){if(lN)return Db.exports;lN=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Db.exports=T9(),Db.exports}var uN;function C9(){if(uN)return L1;uN=1;var n=M9();return L1.createRoot=n.createRoot,L1.hydrateRoot=n.hydrateRoot,L1}var P9=C9();const I9=gi(P9);/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*/var kp=(n=>(n.Admin="ADMIN",n.Viewer="VIEWER",n))(kp||{}),Vo=(n=>(n[n.Initializing=0]="Initializing",n[n.Welcome=1]="Welcome",n[n.Uploading=2]="Uploading",n[n.Chatting=3]="Chatting",n[n.Error=4]="Error",n[n.AdminLogin=5]="AdminLogin",n[n.PasswordReset=6]="PasswordReset",n[n.AdminDashboard=7]="AdminDashboard",n))(Vo||{}),R9={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let N9,L9;function O9(){return{geminiUrl:N9,vertexUrl:L9}}function D9(n,e,t,r){var i,o;if(!(n!=null&&n.baseUrl)){const a=O9();return e?(i=a.vertexUrl)!==null&&i!==void 0?i:t:(o=a.geminiUrl)!==null&&o!==void 0?o:r}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dd{}function yn(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function C(n,e,t){for(let o=0;o<e.length-1;o++){const a=e[o];if(a.endsWith("[]")){const s=a.slice(0,-2);if(!(s in n))if(Array.isArray(t))n[s]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(n[s])){const l=n[s];if(Array.isArray(t))for(let u=0;u<l.length;u++){const c=l[u];C(c,e.slice(o+1),t[u])}else for(const u of l)C(u,e.slice(o+1),t)}return}else if(a.endsWith("[0]")){const s=a.slice(0,-3);s in n||(n[s]=[{}]);const l=n[s];C(l[0],e.slice(o+1),t);return}(!n[a]||typeof n[a]!="object")&&(n[a]={}),n=n[a]}const r=e[e.length-1],i=n[r];if(i!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===i)return;if(typeof i=="object"&&typeof t=="object"&&i!==null&&t!==null)Object.assign(i,t);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[r]=t}function T(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let r=0;r<e.length;r++){if(typeof n!="object"||n===null)return t;const i=e[r];if(i.endsWith("[]")){const o=i.slice(0,-2);if(o in n){const a=n[o];return Array.isArray(a)?a.map(s=>T(s,e.slice(r+1),t)):t}else return t}else n=n[i]}return n}catch(r){if(r instanceof TypeError)return t;throw r}}function k9(n,e){for(const[t,r]of Object.entries(e)){const i=t.split("."),o=r.split("."),a=new Set;let s=-1;for(let l=0;l<i.length;l++)if(i[l]==="*"){s=l;break}if(s!==-1&&o.length>s)for(let l=s;l<o.length;l++){const u=o[l];u!=="*"&&!u.endsWith("[]")&&!u.endsWith("[0]")&&a.add(u)}eC(n,i,o,0,a)}}function eC(n,e,t,r,i){if(r>=e.length||typeof n!="object"||n===null)return;const o=e[r];if(o.endsWith("[]")){const a=o.slice(0,-2),s=n;if(a in s&&Array.isArray(s[a]))for(const l of s[a])eC(l,e,t,r+1,i)}else if(o==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const a=n,s=Object.keys(a).filter(u=>!u.startsWith("_")&&!i.has(u)),l={};for(const u of s)l[u]=a[u];for(const[u,c]of Object.entries(l)){const f=[];for(const h of t.slice(r))h==="*"?f.push(u):f.push(h);C(a,f,c)}for(const u of s)delete a[u]}}else{const a=n;o in a&&eC(a[o],e,t,r+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cP(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function F9(n){const e={},t=T(n,["operationName"]);t!=null&&C(e,["operationName"],t);const r=T(n,["resourceName"]);return r!=null&&C(e,["_url","resourceName"],r),e}function U9(n){const e={},t=T(n,["name"]);t!=null&&C(e,["name"],t);const r=T(n,["metadata"]);r!=null&&C(e,["metadata"],r);const i=T(n,["done"]);i!=null&&C(e,["done"],i);const o=T(n,["error"]);o!=null&&C(e,["error"],o);const a=T(n,["response","generateVideoResponse"]);return a!=null&&C(e,["response"],z9(a)),e}function B9(n){const e={},t=T(n,["name"]);t!=null&&C(e,["name"],t);const r=T(n,["metadata"]);r!=null&&C(e,["metadata"],r);const i=T(n,["done"]);i!=null&&C(e,["done"],i);const o=T(n,["error"]);o!=null&&C(e,["error"],o);const a=T(n,["response"]);return a!=null&&C(e,["response"],H9(a)),e}function z9(n){const e={},t=T(n,["generatedSamples"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>V9(a))),C(e,["generatedVideos"],o)}const r=T(n,["raiMediaFilteredCount"]);r!=null&&C(e,["raiMediaFilteredCount"],r);const i=T(n,["raiMediaFilteredReasons"]);return i!=null&&C(e,["raiMediaFilteredReasons"],i),e}function H9(n){const e={},t=T(n,["videos"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>G9(a))),C(e,["generatedVideos"],o)}const r=T(n,["raiMediaFilteredCount"]);r!=null&&C(e,["raiMediaFilteredCount"],r);const i=T(n,["raiMediaFilteredReasons"]);return i!=null&&C(e,["raiMediaFilteredReasons"],i),e}function V9(n){const e={},t=T(n,["video"]);return t!=null&&C(e,["video"],Y9(t)),e}function G9(n){const e={},t=T(n,["_self"]);return t!=null&&C(e,["video"],K9(t)),e}function q9(n){const e={},t=T(n,["operationName"]);return t!=null&&C(e,["_url","operationName"],t),e}function W9(n){const e={},t=T(n,["operationName"]);return t!=null&&C(e,["_url","operationName"],t),e}function j9(n){const e={},t=T(n,["name"]);t!=null&&C(e,["name"],t);const r=T(n,["metadata"]);r!=null&&C(e,["metadata"],r);const i=T(n,["done"]);i!=null&&C(e,["done"],i);const o=T(n,["error"]);o!=null&&C(e,["error"],o);const a=T(n,["response"]);return a!=null&&C(e,["response"],$9(a)),e}function $9(n){const e={},t=T(n,["sdkHttpResponse"]);t!=null&&C(e,["sdkHttpResponse"],t);const r=T(n,["parent"]);r!=null&&C(e,["parent"],r);const i=T(n,["documentName"]);return i!=null&&C(e,["documentName"],i),e}function n8(n){const e={},t=T(n,["name"]);t!=null&&C(e,["name"],t);const r=T(n,["metadata"]);r!=null&&C(e,["metadata"],r);const i=T(n,["done"]);i!=null&&C(e,["done"],i);const o=T(n,["error"]);o!=null&&C(e,["error"],o);const a=T(n,["response"]);return a!=null&&C(e,["response"],X9(a)),e}function X9(n){const e={},t=T(n,["sdkHttpResponse"]);t!=null&&C(e,["sdkHttpResponse"],t);const r=T(n,["parent"]);r!=null&&C(e,["parent"],r);const i=T(n,["documentName"]);return i!=null&&C(e,["documentName"],i),e}function Y9(n){const e={},t=T(n,["uri"]);t!=null&&C(e,["uri"],t);const r=T(n,["encodedVideo"]);r!=null&&C(e,["videoBytes"],cP(r));const i=T(n,["encoding"]);return i!=null&&C(e,["mimeType"],i),e}function K9(n){const e={},t=T(n,["gcsUri"]);t!=null&&C(e,["uri"],t);const r=T(n,["bytesBase64Encoded"]);r!=null&&C(e,["videoBytes"],cP(r));const i=T(n,["mimeType"]);return i!=null&&C(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var cN;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(cN||(cN={}));var fN;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(fN||(fN={}));var dN;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(dN||(dN={}));var lr;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(lr||(lr={}));var hN;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(hN||(hN={}));var pN;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(pN||(pN={}));var mN;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(mN||(mN={}));var gN;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(gN||(gN={}));var vN;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(vN||(vN={}));var yN;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(yN||(yN={}));var xN;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(xN||(xN={}));var _N;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(_N||(_N={}));var SN;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(SN||(SN={}));var wN;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(wN||(wN={}));var bN;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(bN||(bN={}));var AN;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(AN||(AN={}));var EN;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(EN||(EN={}));var TN;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(TN||(TN={}));var MN;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(MN||(MN={}));var CN;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(CN||(CN={}));var PN;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(PN||(PN={}));var pg;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(pg||(pg={}));var IN;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(IN||(IN={}));var RN;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(RN||(RN={}));var NN;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(NN||(NN={}));var tC;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(tC||(tC={}));var LN;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(LN||(LN={}));var ON;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(ON||(ON={}));var DN;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(DN||(DN={}));var kN;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(kN||(kN={}));var FN;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(FN||(FN={}));var UN;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(UN||(UN={}));var BN;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(BN||(BN={}));var zN;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(zN||(zN={}));var HN;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(HN||(HN={}));var VN;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(VN||(VN={}));var GN;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(GN||(GN={}));var qN;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(qN||(qN={}));var WN;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(WN||(WN={}));var jN;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(jN||(jN={}));var $N;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})($N||($N={}));var XN;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(XN||(XN={}));var YN;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(YN||(YN={}));var KN;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(KN||(KN={}));var JN;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED",n.REGISTERED="REGISTERED"})(JN||(JN={}));var ZN;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(ZN||(ZN={}));var QN;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(QN||(QN={}));var e3;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(e3||(e3={}));var t3;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(t3||(t3={}));var n3;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(n3||(n3={}));var r3;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(r3||(r3={}));var i3;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(i3||(i3={}));var o3;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(o3||(o3={}));var a3;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(a3||(a3={}));var Km;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Km||(Km={}));class nC{constructor(e){const t={};for(const r of e.headers.entries())t[r[0]]=r[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class vv{get text(){var e,t,r,i,o,a,s,l;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",c=!1;const f=[];for(const h of(l=(s=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||s===void 0?void 0:s.parts)!==null&&l!==void 0?l:[]){for(const[p,v]of Object.entries(h))p!=="text"&&p!=="thought"&&p!=="thoughtSignature"&&(v!==null||v!==void 0)&&f.push(p);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;c=!0,u+=h.text}}return f.length>0&&console.warn(`there are non-text parts ${f} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),c?u:void 0}get data(){var e,t,r,i,o,a,s,l;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const c=[];for(const f of(l=(s=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||s===void 0?void 0:s.parts)!==null&&l!==void 0?l:[]){for(const[h,p]of Object.entries(f))h!=="inlineData"&&(p!==null||p!==void 0)&&c.push(h);f.inlineData&&typeof f.inlineData.data=="string"&&(u+=atob(f.inlineData.data))}return c.length>0&&console.warn(`there are non-data parts ${c} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,t,r,i,o,a,s,l;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(l=(s=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||s===void 0?void 0:s.parts)===null||l===void 0?void 0:l.filter(c=>c.functionCall).map(c=>c.functionCall).filter(c=>c!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var e,t,r,i,o,a,s,l,u;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const c=(l=(s=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||s===void 0?void 0:s.parts)===null||l===void 0?void 0:l.filter(f=>f.executableCode).map(f=>f.executableCode).filter(f=>f!==void 0);if((c==null?void 0:c.length)!==0)return(u=c==null?void 0:c[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,t,r,i,o,a,s,l,u;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const c=(l=(s=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||s===void 0?void 0:s.parts)===null||l===void 0?void 0:l.filter(f=>f.codeExecutionResult).map(f=>f.codeExecutionResult).filter(f=>f!==void 0);if((c==null?void 0:c.length)!==0)return(u=c==null?void 0:c[0])===null||u===void 0?void 0:u.output}}class s3{}class l3{}class J9{}class Z9{}class Q9{}class eW{}class u3{}class c3{}class f3{}class tW{}class o_{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const r=new o_;let i;const o=e;return t?i=B9(o):i=U9(o),Object.assign(r,i),r}}class d3{}class h3{}class p3{}class m3{}class nW{}class rW{}class iW{}class fP{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const r=new fP,o=j9(e);return Object.assign(r,o),r}}class oW{}class aW{}class sW{}class g3{}class lW{get text(){var e,t,r;let i="",o=!1;const a=[];for(const s of(r=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&r!==void 0?r:[]){for(const[l,u]of Object.entries(s))l!=="text"&&l!=="thought"&&u!==null&&a.push(l);if(typeof s.text=="string"){if(typeof s.thought=="boolean"&&s.thought)continue;o=!0,i+=s.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?i:void 0}get data(){var e,t,r;let i="";const o=[];for(const a of(r=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&r!==void 0?r:[]){for(const[s,l]of Object.entries(a))s!=="inlineData"&&l!==null&&o.push(s);a.inlineData&&typeof a.inlineData.data=="string"&&(i+=atob(a.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class uW{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class dP{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const r=new dP,o=n8(e);return Object.assign(r,o),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ui(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function r8(n,e){const t=ui(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function i8(n){return Array.isArray(n)?n.map(e=>a_(e)):[a_(n)]}function a_(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function o8(n){const e=a_(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function a8(n){const e=a_(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function v3(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function s8(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>v3(e)):[v3(n)]}function rC(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function y3(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function x3(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function Os(n){if(n==null)throw new Error("ContentUnion is required");return rC(n)?n:{role:"user",parts:s8(n)}}function hP(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const r=Os(t);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(n.isVertexAI()){const t=Os(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>Os(t)):[Os(e)]}function zu(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(y3(n)||x3(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Os(n)]}const e=[],t=[],r=rC(n[0]);for(const i of n){const o=rC(i);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(i);else{if(y3(i)||x3(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(i)}}return r||e.push({role:"user",parts:s8(t)}),e}function cW(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(r=>r!=="null");if(t.length===1)e.type=Object.values(lr).includes(t[0].toUpperCase())?t[0].toUpperCase():lr.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of t)e.anyOf.push({type:Object.values(lr).includes(r.toUpperCase())?r.toUpperCase():lr.TYPE_UNSPECIFIED})}}function sg(n){const e={},t=["items"],r=["anyOf"],i=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=n.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,n=o[1]):o[1].type==="null"&&(e.nullable=!0,n=o[0])),n.type instanceof Array&&cW(n.type,e);for(const[a,s]of Object.entries(n))if(s!=null)if(a=="type"){if(s==="null")throw new Error("type: null can not be the only possible type for the field.");if(s instanceof Array)continue;e.type=Object.values(lr).includes(s.toUpperCase())?s.toUpperCase():lr.TYPE_UNSPECIFIED}else if(t.includes(a))e[a]=sg(s);else if(r.includes(a)){const l=[];for(const u of s){if(u.type=="null"){e.nullable=!0;continue}l.push(sg(u))}e[a]=l}else if(i.includes(a)){const l={};for(const[u,c]of Object.entries(s))l[u]=sg(c);e[a]=l}else{if(a==="additionalProperties")continue;e[a]=s}return e}function pP(n){return sg(n)}function mP(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function gP(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Vg(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=sg(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=sg(e.response));return n}function Gg(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function fW(n,e,t,r=1){const i=!e.startsWith(`${t}/`)&&e.split("/").length===r;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:i?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:i?`${t}/${e}`:e}function hd(n,e){if(typeof e!="string")throw new Error("name must be a string");return fW(n,e,"cachedContents")}function l8(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function yh(n){return cP(n)}function dW(n){return n!=null&&typeof n=="object"&&"name"in n}function hW(n){return n!=null&&typeof n=="object"&&"video"in n}function pW(n){return n!=null&&typeof n=="object"&&"uri"in n}function u8(n){var e;let t;if(dW(n)&&(t=n.name),!(pW(n)&&(t=n.uri,t===void 0))&&!(hW(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const i=t.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${t}`);t=i[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function c8(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function f8(n){for(const e of["models","tunedModels","publisherModels"])if(mW(n,e))return n[e];return[]}function mW(n,e){return n!==null&&typeof n=="object"&&e in n}function gW(n,e={}){const t=n,r={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(r.responseJsonSchema=t.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function vW(n,e={}){const t=[],r=new Set;for(const i of n){const o=i.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);const a=gW(i,e);a.functionDeclarations&&t.push(...a.functionDeclarations)}return{functionDeclarations:t}}function d8(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const r=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,i=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function yW(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function h8(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const i=t.inlinedResponses;if(!Array.isArray(i)||i.length===0)return n;let o=!1;for(const a of i){if(typeof a!="object"||a===null)continue;const l=a.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function qg(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function p8(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xW(n){const e={},t=T(n,["responsesFile"]);t!=null&&C(e,["fileName"],t);const r=T(n,["inlinedResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>QW(a))),C(e,["inlinedResponses"],o)}const i=T(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),C(e,["inlinedEmbedContentResponses"],o)}return e}function _W(n){const e={},t=T(n,["predictionsFormat"]);t!=null&&C(e,["format"],t);const r=T(n,["gcsDestination","outputUriPrefix"]);r!=null&&C(e,["gcsUri"],r);const i=T(n,["bigqueryDestination","outputUri"]);return i!=null&&C(e,["bigqueryUri"],i),e}function SW(n){const e={},t=T(n,["format"]);t!=null&&C(e,["predictionsFormat"],t);const r=T(n,["gcsUri"]);r!=null&&C(e,["gcsDestination","outputUriPrefix"],r);const i=T(n,["bigqueryUri"]);if(i!=null&&C(e,["bigqueryDestination","outputUri"],i),T(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(T(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(T(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Jx(n){const e={},t=T(n,["name"]);t!=null&&C(e,["name"],t);const r=T(n,["metadata","displayName"]);r!=null&&C(e,["displayName"],r);const i=T(n,["metadata","state"]);i!=null&&C(e,["state"],p8(i));const o=T(n,["metadata","createTime"]);o!=null&&C(e,["createTime"],o);const a=T(n,["metadata","endTime"]);a!=null&&C(e,["endTime"],a);const s=T(n,["metadata","updateTime"]);s!=null&&C(e,["updateTime"],s);const l=T(n,["metadata","model"]);l!=null&&C(e,["model"],l);const u=T(n,["metadata","output"]);return u!=null&&C(e,["dest"],xW(h8(u))),e}function iC(n){const e={},t=T(n,["name"]);t!=null&&C(e,["name"],t);const r=T(n,["displayName"]);r!=null&&C(e,["displayName"],r);const i=T(n,["state"]);i!=null&&C(e,["state"],p8(i));const o=T(n,["error"]);o!=null&&C(e,["error"],o);const a=T(n,["createTime"]);a!=null&&C(e,["createTime"],a);const s=T(n,["startTime"]);s!=null&&C(e,["startTime"],s);const l=T(n,["endTime"]);l!=null&&C(e,["endTime"],l);const u=T(n,["updateTime"]);u!=null&&C(e,["updateTime"],u);const c=T(n,["model"]);c!=null&&C(e,["model"],c);const f=T(n,["inputConfig"]);f!=null&&C(e,["src"],wW(f));const h=T(n,["outputConfig"]);h!=null&&C(e,["dest"],_W(h8(h)));const p=T(n,["completionStats"]);return p!=null&&C(e,["completionStats"],p),e}function wW(n){const e={},t=T(n,["instancesFormat"]);t!=null&&C(e,["format"],t);const r=T(n,["gcsSource","uris"]);r!=null&&C(e,["gcsUri"],r);const i=T(n,["bigquerySource","inputUri"]);return i!=null&&C(e,["bigqueryUri"],i),e}function bW(n,e){const t={};if(T(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(T(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(T(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=T(e,["fileName"]);r!=null&&C(t,["fileName"],r);const i=T(e,["inlinedRequests"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>ZW(n,a))),C(t,["requests","requests"],o)}return t}function AW(n){const e={},t=T(n,["format"]);t!=null&&C(e,["instancesFormat"],t);const r=T(n,["gcsUri"]);r!=null&&C(e,["gcsSource","uris"],r);const i=T(n,["bigqueryUri"]);if(i!=null&&C(e,["bigquerySource","inputUri"],i),T(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(T(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function EW(n){const e={},t=T(n,["data"]);if(t!=null&&C(e,["data"],t),T(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=T(n,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function TW(n,e){const t={},r=T(e,["name"]);return r!=null&&C(t,["_url","name"],qg(n,r)),t}function MW(n,e){const t={},r=T(e,["name"]);return r!=null&&C(t,["_url","name"],qg(n,r)),t}function CW(n){const e={},t=T(n,["content"]);t!=null&&C(e,["content"],t);const r=T(n,["citationMetadata"]);r!=null&&C(e,["citationMetadata"],PW(r));const i=T(n,["tokenCount"]);i!=null&&C(e,["tokenCount"],i);const o=T(n,["finishReason"]);o!=null&&C(e,["finishReason"],o);const a=T(n,["avgLogprobs"]);a!=null&&C(e,["avgLogprobs"],a);const s=T(n,["groundingMetadata"]);s!=null&&C(e,["groundingMetadata"],s);const l=T(n,["index"]);l!=null&&C(e,["index"],l);const u=T(n,["logprobsResult"]);u!=null&&C(e,["logprobsResult"],u);const c=T(n,["safetyRatings"]);if(c!=null){let h=c;Array.isArray(h)&&(h=h.map(p=>p)),C(e,["safetyRatings"],h)}const f=T(n,["urlContextMetadata"]);return f!=null&&C(e,["urlContextMetadata"],f),e}function PW(n){const e={},t=T(n,["citationSources"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>i)),C(e,["citations"],r)}return e}function m8(n){const e={},t=T(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>aj(o))),C(e,["parts"],i)}const r=T(n,["role"]);return r!=null&&C(e,["role"],r),e}function IW(n,e){const t={},r=T(n,["displayName"]);if(e!==void 0&&r!=null&&C(e,["batch","displayName"],r),T(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function RW(n,e){const t={},r=T(n,["displayName"]);e!==void 0&&r!=null&&C(e,["displayName"],r);const i=T(n,["dest"]);return e!==void 0&&i!=null&&C(e,["outputConfig"],SW(yW(i))),t}function _3(n,e){const t={},r=T(e,["model"]);r!=null&&C(t,["_url","model"],ui(n,r));const i=T(e,["src"]);i!=null&&C(t,["batch","inputConfig"],bW(n,d8(n,i)));const o=T(e,["config"]);return o!=null&&IW(o,t),t}function NW(n,e){const t={},r=T(e,["model"]);r!=null&&C(t,["model"],ui(n,r));const i=T(e,["src"]);i!=null&&C(t,["inputConfig"],AW(d8(n,i)));const o=T(e,["config"]);return o!=null&&RW(o,t),t}function LW(n,e){const t={},r=T(n,["displayName"]);return e!==void 0&&r!=null&&C(e,["batch","displayName"],r),t}function OW(n,e){const t={},r=T(e,["model"]);r!=null&&C(t,["_url","model"],ui(n,r));const i=T(e,["src"]);i!=null&&C(t,["batch","inputConfig"],HW(n,i));const o=T(e,["config"]);return o!=null&&LW(o,t),t}function DW(n,e){const t={},r=T(e,["name"]);return r!=null&&C(t,["_url","name"],qg(n,r)),t}function kW(n,e){const t={},r=T(e,["name"]);return r!=null&&C(t,["_url","name"],qg(n,r)),t}function FW(n){const e={},t=T(n,["sdkHttpResponse"]);t!=null&&C(e,["sdkHttpResponse"],t);const r=T(n,["name"]);r!=null&&C(e,["name"],r);const i=T(n,["done"]);i!=null&&C(e,["done"],i);const o=T(n,["error"]);return o!=null&&C(e,["error"],o),e}function UW(n){const e={},t=T(n,["sdkHttpResponse"]);t!=null&&C(e,["sdkHttpResponse"],t);const r=T(n,["name"]);r!=null&&C(e,["name"],r);const i=T(n,["done"]);i!=null&&C(e,["done"],i);const o=T(n,["error"]);return o!=null&&C(e,["error"],o),e}function BW(n,e){const t={},r=T(e,["contents"]);if(r!=null){let o=hP(n,r);Array.isArray(o)&&(o=o.map(a=>a)),C(t,["requests[]","request","content"],o)}const i=T(e,["config"]);return i!=null&&(C(t,["_self"],zW(i,t)),k9(t,{"requests[].*":"requests[].request.*"})),t}function zW(n,e){const t={},r=T(n,["taskType"]);e!==void 0&&r!=null&&C(e,["requests[]","taskType"],r);const i=T(n,["title"]);e!==void 0&&i!=null&&C(e,["requests[]","title"],i);const o=T(n,["outputDimensionality"]);if(e!==void 0&&o!=null&&C(e,["requests[]","outputDimensionality"],o),T(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(T(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function HW(n,e){const t={},r=T(e,["fileName"]);r!=null&&C(t,["file_name"],r);const i=T(e,["inlinedRequests"]);return i!=null&&C(t,["requests"],BW(n,i)),t}function VW(n){const e={};if(T(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=T(n,["fileUri"]);t!=null&&C(e,["fileUri"],t);const r=T(n,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function GW(n){const e={},t=T(n,["id"]);t!=null&&C(e,["id"],t);const r=T(n,["args"]);r!=null&&C(e,["args"],r);const i=T(n,["name"]);if(i!=null&&C(e,["name"],i),T(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(T(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function qW(n){const e={},t=T(n,["allowedFunctionNames"]);t!=null&&C(e,["allowedFunctionNames"],t);const r=T(n,["mode"]);if(r!=null&&C(e,["mode"],r),T(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function WW(n,e,t){const r={},i=T(e,["systemInstruction"]);t!==void 0&&i!=null&&C(t,["systemInstruction"],m8(Os(i)));const o=T(e,["temperature"]);o!=null&&C(r,["temperature"],o);const a=T(e,["topP"]);a!=null&&C(r,["topP"],a);const s=T(e,["topK"]);s!=null&&C(r,["topK"],s);const l=T(e,["candidateCount"]);l!=null&&C(r,["candidateCount"],l);const u=T(e,["maxOutputTokens"]);u!=null&&C(r,["maxOutputTokens"],u);const c=T(e,["stopSequences"]);c!=null&&C(r,["stopSequences"],c);const f=T(e,["responseLogprobs"]);f!=null&&C(r,["responseLogprobs"],f);const h=T(e,["logprobs"]);h!=null&&C(r,["logprobs"],h);const p=T(e,["presencePenalty"]);p!=null&&C(r,["presencePenalty"],p);const v=T(e,["frequencyPenalty"]);v!=null&&C(r,["frequencyPenalty"],v);const S=T(e,["seed"]);S!=null&&C(r,["seed"],S);const y=T(e,["responseMimeType"]);y!=null&&C(r,["responseMimeType"],y);const _=T(e,["responseSchema"]);_!=null&&C(r,["responseSchema"],pP(_));const w=T(e,["responseJsonSchema"]);if(w!=null&&C(r,["responseJsonSchema"],w),T(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(T(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const A=T(e,["safetySettings"]);if(t!==void 0&&A!=null){let W=A;Array.isArray(W)&&(W=W.map(j=>sj(j))),C(t,["safetySettings"],W)}const E=T(e,["tools"]);if(t!==void 0&&E!=null){let W=Gg(E);Array.isArray(W)&&(W=W.map(j=>uj(Vg(j)))),C(t,["tools"],W)}const P=T(e,["toolConfig"]);if(t!==void 0&&P!=null&&C(t,["toolConfig"],lj(P)),T(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const O=T(e,["cachedContent"]);t!==void 0&&O!=null&&C(t,["cachedContent"],hd(n,O));const L=T(e,["responseModalities"]);L!=null&&C(r,["responseModalities"],L);const D=T(e,["mediaResolution"]);D!=null&&C(r,["mediaResolution"],D);const F=T(e,["speechConfig"]);if(F!=null&&C(r,["speechConfig"],mP(F)),T(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=T(e,["thinkingConfig"]);U!=null&&C(r,["thinkingConfig"],U);const k=T(e,["imageConfig"]);k!=null&&C(r,["imageConfig"],JW(k));const z=T(e,["enableEnhancedCivicAnswers"]);return z!=null&&C(r,["enableEnhancedCivicAnswers"],z),r}function jW(n){const e={},t=T(n,["sdkHttpResponse"]);t!=null&&C(e,["sdkHttpResponse"],t);const r=T(n,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>CW(u))),C(e,["candidates"],l)}const i=T(n,["modelVersion"]);i!=null&&C(e,["modelVersion"],i);const o=T(n,["promptFeedback"]);o!=null&&C(e,["promptFeedback"],o);const a=T(n,["responseId"]);a!=null&&C(e,["responseId"],a);const s=T(n,["usageMetadata"]);return s!=null&&C(e,["usageMetadata"],s),e}function $W(n,e){const t={},r=T(e,["name"]);return r!=null&&C(t,["_url","name"],qg(n,r)),t}function XW(n,e){const t={},r=T(e,["name"]);return r!=null&&C(t,["_url","name"],qg(n,r)),t}function YW(n){const e={};if(T(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=T(n,["enableWidget"]);return t!=null&&C(e,["enableWidget"],t),e}function KW(n){const e={};if(T(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(T(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=T(n,["timeRangeFilter"]);return t!=null&&C(e,["timeRangeFilter"],t),e}function JW(n){const e={},t=T(n,["aspectRatio"]);t!=null&&C(e,["aspectRatio"],t);const r=T(n,["imageSize"]);if(r!=null&&C(e,["imageSize"],r),T(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(T(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(T(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function ZW(n,e){const t={},r=T(e,["model"]);r!=null&&C(t,["request","model"],ui(n,r));const i=T(e,["contents"]);if(i!=null){let s=zu(i);Array.isArray(s)&&(s=s.map(l=>m8(l))),C(t,["request","contents"],s)}const o=T(e,["metadata"]);o!=null&&C(t,["metadata"],o);const a=T(e,["config"]);return a!=null&&C(t,["request","generationConfig"],WW(n,a,T(t,["request"],{}))),t}function QW(n){const e={},t=T(n,["response"]);t!=null&&C(e,["response"],jW(t));const r=T(n,["error"]);return r!=null&&C(e,["error"],r),e}function ej(n,e){const t={},r=T(n,["pageSize"]);e!==void 0&&r!=null&&C(e,["_query","pageSize"],r);const i=T(n,["pageToken"]);if(e!==void 0&&i!=null&&C(e,["_query","pageToken"],i),T(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function tj(n,e){const t={},r=T(n,["pageSize"]);e!==void 0&&r!=null&&C(e,["_query","pageSize"],r);const i=T(n,["pageToken"]);e!==void 0&&i!=null&&C(e,["_query","pageToken"],i);const o=T(n,["filter"]);return e!==void 0&&o!=null&&C(e,["_query","filter"],o),t}function nj(n){const e={},t=T(n,["config"]);return t!=null&&ej(t,e),e}function rj(n){const e={},t=T(n,["config"]);return t!=null&&tj(t,e),e}function ij(n){const e={},t=T(n,["sdkHttpResponse"]);t!=null&&C(e,["sdkHttpResponse"],t);const r=T(n,["nextPageToken"]);r!=null&&C(e,["nextPageToken"],r);const i=T(n,["operations"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Jx(a))),C(e,["batchJobs"],o)}return e}function oj(n){const e={},t=T(n,["sdkHttpResponse"]);t!=null&&C(e,["sdkHttpResponse"],t);const r=T(n,["nextPageToken"]);r!=null&&C(e,["nextPageToken"],r);const i=T(n,["batchPredictionJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>iC(a))),C(e,["batchJobs"],o)}return e}function aj(n){const e={},t=T(n,["mediaResolution"]);t!=null&&C(e,["mediaResolution"],t);const r=T(n,["codeExecutionResult"]);r!=null&&C(e,["codeExecutionResult"],r);const i=T(n,["executableCode"]);i!=null&&C(e,["executableCode"],i);const o=T(n,["fileData"]);o!=null&&C(e,["fileData"],VW(o));const a=T(n,["functionCall"]);a!=null&&C(e,["functionCall"],GW(a));const s=T(n,["functionResponse"]);s!=null&&C(e,["functionResponse"],s);const l=T(n,["inlineData"]);l!=null&&C(e,["inlineData"],EW(l));const u=T(n,["text"]);u!=null&&C(e,["text"],u);const c=T(n,["thought"]);c!=null&&C(e,["thought"],c);const f=T(n,["thoughtSignature"]);f!=null&&C(e,["thoughtSignature"],f);const h=T(n,["videoMetadata"]);return h!=null&&C(e,["videoMetadata"],h),e}function sj(n){const e={},t=T(n,["category"]);if(t!=null&&C(e,["category"],t),T(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=T(n,["threshold"]);return r!=null&&C(e,["threshold"],r),e}function lj(n){const e={},t=T(n,["retrievalConfig"]);t!=null&&C(e,["retrievalConfig"],t);const r=T(n,["functionCallingConfig"]);return r!=null&&C(e,["functionCallingConfig"],qW(r)),e}function uj(n){const e={};if(T(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=T(n,["computerUse"]);t!=null&&C(e,["computerUse"],t);const r=T(n,["fileSearch"]);r!=null&&C(e,["fileSearch"],r);const i=T(n,["codeExecution"]);if(i!=null&&C(e,["codeExecution"],i),T(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=T(n,["functionDeclarations"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>f)),C(e,["functionDeclarations"],c)}const a=T(n,["googleMaps"]);a!=null&&C(e,["googleMaps"],YW(a));const s=T(n,["googleSearch"]);s!=null&&C(e,["googleSearch"],KW(s));const l=T(n,["googleSearchRetrieval"]);l!=null&&C(e,["googleSearchRetrieval"],l);const u=T(n,["urlContext"]);return u!=null&&C(e,["urlContext"],u),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var sd;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(sd||(sd={}));class Xp{constructor(e,t,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,r,i)}init(e,t,r){var i,o;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!r||Object.keys(r).length===0?a={config:{}}:typeof r=="object"?a=Object.assign({},r):a=r,a.config&&(a.config.pageToken=t.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(o=(i=a.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cj extends dd{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Xp(sd.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=_3(this.apiClient,e),r=t._url,i=yn("{model}:batchGenerateContent",r),s=t.batch.inputConfig.requests,l=s.requests,u=[];for(const c of l){const f=Object.assign({},c);if(f.systemInstruction){const h=f.systemInstruction;delete f.systemInstruction;const p=f.request;p.systemInstruction=h,f.request=p}u.push(f)}return s.requests=u,delete t.config,delete t._url,delete t._query,{path:i,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const r=t?Object.assign({},t):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const o=this.getGcsUri(e),a=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?r.dest=`${o.slice(0,-6)}/dest`:r.dest=`${o}_dest_${i}`;else if(a)r.dest=`${a}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var t,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=NW(this.apiClient,e);return s=yn("batchPredictionJobs",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),a.then(c=>iC(c))}else{const u=_3(this.apiClient,e);return s=yn("{model}:batchGenerateContent",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),a.then(c=>Jx(c))}}async createEmbeddingsInternal(e){var t,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=OW(this.apiClient,e);return o=yn("{model}:asyncBatchEmbedContent",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>Jx(l))}}async get(e){var t,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=XW(this.apiClient,e);return s=yn("batchPredictionJobs/{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),a.then(c=>iC(c))}else{const u=$W(this.apiClient,e);return s=yn("batches/{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),a.then(c=>Jx(c))}}async cancel(e){var t,r,i,o;let a="",s={};if(this.apiClient.isVertexAI()){const l=MW(this.apiClient,e);a=yn("batchPredictionJobs/{name}:cancel",l._url),s=l._query,delete l._url,delete l._query,await this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=TW(this.apiClient,e);a=yn("batches/{name}:cancel",l._url),s=l._query,delete l._url,delete l._query,await this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var t,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=rj(e);return s=yn("batchPredictionJobs",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const f=oj(c),h=new g3;return Object.assign(h,f),h})}else{const u=nj(e);return s=yn("batches",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const f=ij(c),h=new g3;return Object.assign(h,f),h})}}async delete(e){var t,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=kW(this.apiClient,e);return s=yn("batchPredictionJobs/{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>UW(c))}else{const u=DW(this.apiClient,e);return s=yn("batches/{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>FW(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fj(n){const e={},t=T(n,["data"]);if(t!=null&&C(e,["data"],t),T(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=T(n,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function S3(n){const e={},t=T(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>Oj(o))),C(e,["parts"],i)}const r=T(n,["role"]);return r!=null&&C(e,["role"],r),e}function dj(n,e){const t={},r=T(n,["ttl"]);e!==void 0&&r!=null&&C(e,["ttl"],r);const i=T(n,["expireTime"]);e!==void 0&&i!=null&&C(e,["expireTime"],i);const o=T(n,["displayName"]);e!==void 0&&o!=null&&C(e,["displayName"],o);const a=T(n,["contents"]);if(e!==void 0&&a!=null){let c=zu(a);Array.isArray(c)&&(c=c.map(f=>S3(f))),C(e,["contents"],c)}const s=T(n,["systemInstruction"]);e!==void 0&&s!=null&&C(e,["systemInstruction"],S3(Os(s)));const l=T(n,["tools"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>kj(f))),C(e,["tools"],c)}const u=T(n,["toolConfig"]);if(e!==void 0&&u!=null&&C(e,["toolConfig"],Dj(u)),T(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function hj(n,e){const t={},r=T(n,["ttl"]);e!==void 0&&r!=null&&C(e,["ttl"],r);const i=T(n,["expireTime"]);e!==void 0&&i!=null&&C(e,["expireTime"],i);const o=T(n,["displayName"]);e!==void 0&&o!=null&&C(e,["displayName"],o);const a=T(n,["contents"]);if(e!==void 0&&a!=null){let f=zu(a);Array.isArray(f)&&(f=f.map(h=>h)),C(e,["contents"],f)}const s=T(n,["systemInstruction"]);e!==void 0&&s!=null&&C(e,["systemInstruction"],Os(s));const l=T(n,["tools"]);if(e!==void 0&&l!=null){let f=l;Array.isArray(f)&&(f=f.map(h=>Fj(h))),C(e,["tools"],f)}const u=T(n,["toolConfig"]);e!==void 0&&u!=null&&C(e,["toolConfig"],u);const c=T(n,["kmsKeyName"]);return e!==void 0&&c!=null&&C(e,["encryption_spec","kmsKeyName"],c),t}function pj(n,e){const t={},r=T(e,["model"]);r!=null&&C(t,["model"],r8(n,r));const i=T(e,["config"]);return i!=null&&dj(i,t),t}function mj(n,e){const t={},r=T(e,["model"]);r!=null&&C(t,["model"],r8(n,r));const i=T(e,["config"]);return i!=null&&hj(i,t),t}function gj(n,e){const t={},r=T(e,["name"]);return r!=null&&C(t,["_url","name"],hd(n,r)),t}function vj(n,e){const t={},r=T(e,["name"]);return r!=null&&C(t,["_url","name"],hd(n,r)),t}function yj(n){const e={},t=T(n,["sdkHttpResponse"]);return t!=null&&C(e,["sdkHttpResponse"],t),e}function xj(n){const e={},t=T(n,["sdkHttpResponse"]);return t!=null&&C(e,["sdkHttpResponse"],t),e}function _j(n){const e={};if(T(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=T(n,["fileUri"]);t!=null&&C(e,["fileUri"],t);const r=T(n,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function Sj(n){const e={},t=T(n,["id"]);t!=null&&C(e,["id"],t);const r=T(n,["args"]);r!=null&&C(e,["args"],r);const i=T(n,["name"]);if(i!=null&&C(e,["name"],i),T(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(T(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function wj(n){const e={},t=T(n,["allowedFunctionNames"]);t!=null&&C(e,["allowedFunctionNames"],t);const r=T(n,["mode"]);if(r!=null&&C(e,["mode"],r),T(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function bj(n){const e={},t=T(n,["description"]);t!=null&&C(e,["description"],t);const r=T(n,["name"]);r!=null&&C(e,["name"],r);const i=T(n,["parameters"]);i!=null&&C(e,["parameters"],i);const o=T(n,["parametersJsonSchema"]);o!=null&&C(e,["parametersJsonSchema"],o);const a=T(n,["response"]);a!=null&&C(e,["response"],a);const s=T(n,["responseJsonSchema"]);if(s!=null&&C(e,["responseJsonSchema"],s),T(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Aj(n,e){const t={},r=T(e,["name"]);return r!=null&&C(t,["_url","name"],hd(n,r)),t}function Ej(n,e){const t={},r=T(e,["name"]);return r!=null&&C(t,["_url","name"],hd(n,r)),t}function Tj(n){const e={};if(T(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=T(n,["enableWidget"]);return t!=null&&C(e,["enableWidget"],t),e}function Mj(n){const e={};if(T(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(T(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=T(n,["timeRangeFilter"]);return t!=null&&C(e,["timeRangeFilter"],t),e}function Cj(n,e){const t={},r=T(n,["pageSize"]);e!==void 0&&r!=null&&C(e,["_query","pageSize"],r);const i=T(n,["pageToken"]);return e!==void 0&&i!=null&&C(e,["_query","pageToken"],i),t}function Pj(n,e){const t={},r=T(n,["pageSize"]);e!==void 0&&r!=null&&C(e,["_query","pageSize"],r);const i=T(n,["pageToken"]);return e!==void 0&&i!=null&&C(e,["_query","pageToken"],i),t}function Ij(n){const e={},t=T(n,["config"]);return t!=null&&Cj(t,e),e}function Rj(n){const e={},t=T(n,["config"]);return t!=null&&Pj(t,e),e}function Nj(n){const e={},t=T(n,["sdkHttpResponse"]);t!=null&&C(e,["sdkHttpResponse"],t);const r=T(n,["nextPageToken"]);r!=null&&C(e,["nextPageToken"],r);const i=T(n,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),C(e,["cachedContents"],o)}return e}function Lj(n){const e={},t=T(n,["sdkHttpResponse"]);t!=null&&C(e,["sdkHttpResponse"],t);const r=T(n,["nextPageToken"]);r!=null&&C(e,["nextPageToken"],r);const i=T(n,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),C(e,["cachedContents"],o)}return e}function Oj(n){const e={},t=T(n,["mediaResolution"]);t!=null&&C(e,["mediaResolution"],t);const r=T(n,["codeExecutionResult"]);r!=null&&C(e,["codeExecutionResult"],r);const i=T(n,["executableCode"]);i!=null&&C(e,["executableCode"],i);const o=T(n,["fileData"]);o!=null&&C(e,["fileData"],_j(o));const a=T(n,["functionCall"]);a!=null&&C(e,["functionCall"],Sj(a));const s=T(n,["functionResponse"]);s!=null&&C(e,["functionResponse"],s);const l=T(n,["inlineData"]);l!=null&&C(e,["inlineData"],fj(l));const u=T(n,["text"]);u!=null&&C(e,["text"],u);const c=T(n,["thought"]);c!=null&&C(e,["thought"],c);const f=T(n,["thoughtSignature"]);f!=null&&C(e,["thoughtSignature"],f);const h=T(n,["videoMetadata"]);return h!=null&&C(e,["videoMetadata"],h),e}function Dj(n){const e={},t=T(n,["retrievalConfig"]);t!=null&&C(e,["retrievalConfig"],t);const r=T(n,["functionCallingConfig"]);return r!=null&&C(e,["functionCallingConfig"],wj(r)),e}function kj(n){const e={};if(T(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=T(n,["computerUse"]);t!=null&&C(e,["computerUse"],t);const r=T(n,["fileSearch"]);r!=null&&C(e,["fileSearch"],r);const i=T(n,["codeExecution"]);if(i!=null&&C(e,["codeExecution"],i),T(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=T(n,["functionDeclarations"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>f)),C(e,["functionDeclarations"],c)}const a=T(n,["googleMaps"]);a!=null&&C(e,["googleMaps"],Tj(a));const s=T(n,["googleSearch"]);s!=null&&C(e,["googleSearch"],Mj(s));const l=T(n,["googleSearchRetrieval"]);l!=null&&C(e,["googleSearchRetrieval"],l);const u=T(n,["urlContext"]);return u!=null&&C(e,["urlContext"],u),e}function Fj(n){const e={},t=T(n,["retrieval"]);t!=null&&C(e,["retrieval"],t);const r=T(n,["computerUse"]);if(r!=null&&C(e,["computerUse"],r),T(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=T(n,["codeExecution"]);i!=null&&C(e,["codeExecution"],i);const o=T(n,["enterpriseWebSearch"]);o!=null&&C(e,["enterpriseWebSearch"],o);const a=T(n,["functionDeclarations"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(h=>bj(h))),C(e,["functionDeclarations"],f)}const s=T(n,["googleMaps"]);s!=null&&C(e,["googleMaps"],s);const l=T(n,["googleSearch"]);l!=null&&C(e,["googleSearch"],l);const u=T(n,["googleSearchRetrieval"]);u!=null&&C(e,["googleSearchRetrieval"],u);const c=T(n,["urlContext"]);return c!=null&&C(e,["urlContext"],c),e}function Uj(n,e){const t={},r=T(n,["ttl"]);e!==void 0&&r!=null&&C(e,["ttl"],r);const i=T(n,["expireTime"]);return e!==void 0&&i!=null&&C(e,["expireTime"],i),t}function Bj(n,e){const t={},r=T(n,["ttl"]);e!==void 0&&r!=null&&C(e,["ttl"],r);const i=T(n,["expireTime"]);return e!==void 0&&i!=null&&C(e,["expireTime"],i),t}function zj(n,e){const t={},r=T(e,["name"]);r!=null&&C(t,["_url","name"],hd(n,r));const i=T(e,["config"]);return i!=null&&Uj(i,t),t}function Hj(n,e){const t={},r=T(e,["name"]);r!=null&&C(t,["_url","name"],hd(n,r));const i=T(e,["config"]);return i!=null&&Bj(i,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vj extends dd{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Xp(sd.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(t),t)}async create(e){var t,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=mj(this.apiClient,e);return s=yn("cachedContents",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),a.then(c=>c)}else{const u=pj(this.apiClient,e);return s=yn("cachedContents",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),a.then(c=>c)}}async get(e){var t,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=Ej(this.apiClient,e);return s=yn("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),a.then(c=>c)}else{const u=Aj(this.apiClient,e);return s=yn("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),a.then(c=>c)}}async delete(e){var t,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=vj(this.apiClient,e);return s=yn("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const f=xj(c),h=new p3;return Object.assign(h,f),h})}else{const u=gj(this.apiClient,e);return s=yn("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const f=yj(c),h=new p3;return Object.assign(h,f),h})}}async update(e){var t,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=Hj(this.apiClient,e);return s=yn("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),a.then(c=>c)}else{const u=zj(this.apiClient,e);return s=yn("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),a.then(c=>c)}}async listInternal(e){var t,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=Rj(e);return s=yn("cachedContents",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const f=Lj(c),h=new m3;return Object.assign(h,f),h})}else{const u=Ij(e);return s=yn("cachedContents",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const f=Nj(c),h=new m3;return Object.assign(h,f),h})}}}function s_(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function w3(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function cr(n){return this instanceof cr?(this.v=n,this):new cr(n)}function Rc(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(p){return function(v){return Promise.resolve(v).then(p,f)}}function s(p,v){r[p]&&(i[p]=function(S){return new Promise(function(y,_){o.push([p,S,y,_])>1||l(p,S)})},v&&(i[p]=v(i[p])))}function l(p,v){try{u(r[p](v))}catch(S){h(o[0][3],S)}}function u(p){p.value instanceof cr?Promise.resolve(p.value.v).then(c,f):h(o[0][2],p)}function c(p){l("next",p)}function f(p){l("throw",p)}function h(p,v){p(v),o.shift(),o.length&&l(o[0][0],o[0][1])}}function Nc(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof w3=="function"?w3(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(a){return new Promise(function(s,l){a=n[o](a),i(s,l,a.done,a.value)})}}function i(o,a,s,l){Promise.resolve(l).then(function(u){o({value:u,done:s})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gj(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:g8(t)}function g8(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function qj(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function b3(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let r=0;for(;r<t;)if(n[r].role==="user")e.push(n[r]),r++;else{const i=[];let o=!0;for(;r<t&&n[r].role==="model";)i.push(n[r]),o&&!g8(n[r])&&(o=!1),r++;o?e.push(...i):e.pop()}return e}class Wj{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new jj(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class jj{constructor(e,t,r,i={},o=[]){this.apiClient=e,this.modelsModule=t,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),qj(o)}async sendMessage(e){var t;await this.sendPromise;const r=Os(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var o,a,s;const l=await i,u=(a=(o=l.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content,c=l.automaticFunctionCallingHistory,f=this.getHistory(!0).length;let h=[];c!=null&&(h=(s=c.slice(f))!==null&&s!==void 0?s:[]);const p=u?[u]:[];this.recordHistory(r,p,h)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var t;await this.sendPromise;const r=Os(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const o=await i;return this.processStreamResponse(o,r)}getHistory(e=!1){const t=e?b3(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return Rc(this,arguments,function*(){var i,o,a,s,l,u;const c=[];try{for(var f=!0,h=Nc(e),p;p=yield cr(h.next()),i=p.done,!i;f=!0){s=p.value,f=!1;const v=s;if(Gj(v)){const S=(u=(l=v.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content;S!==void 0&&c.push(S)}yield yield cr(v)}}catch(v){o={error:v}}finally{try{!f&&!i&&(a=h.return)&&(yield cr(a.call(h)))}finally{if(o)throw o.error}}this.recordHistory(t,c)})}recordHistory(e,t,r){let i=[];t.length>0&&t.every(o=>o.role!==void 0)?i=t:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...b3(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class GS extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,GS.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $j(n){const e={},t=T(n,["file"]);return t!=null&&C(e,["file"],t),e}function Xj(n){const e={},t=T(n,["sdkHttpResponse"]);return t!=null&&C(e,["sdkHttpResponse"],t),e}function Yj(n){const e={},t=T(n,["name"]);return t!=null&&C(e,["_url","file"],u8(t)),e}function Kj(n){const e={},t=T(n,["sdkHttpResponse"]);return t!=null&&C(e,["sdkHttpResponse"],t),e}function Jj(n){const e={},t=T(n,["name"]);return t!=null&&C(e,["_url","file"],u8(t)),e}function Zj(n,e){const t={},r=T(n,["pageSize"]);e!==void 0&&r!=null&&C(e,["_query","pageSize"],r);const i=T(n,["pageToken"]);return e!==void 0&&i!=null&&C(e,["_query","pageToken"],i),t}function Qj(n){const e={},t=T(n,["config"]);return t!=null&&Zj(t,e),e}function e$(n){const e={},t=T(n,["sdkHttpResponse"]);t!=null&&C(e,["sdkHttpResponse"],t);const r=T(n,["nextPageToken"]);r!=null&&C(e,["nextPageToken"],r);const i=T(n,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),C(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class t$ extends dd{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Xp(sd.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=Qj(e);return o=yn("files",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),i.then(l=>{const u=e$(l),c=new oW;return Object.assign(c,u),c})}}async createInternal(e){var t,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=$j(e);return o=yn("upload/v1beta/files",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=Xj(l),c=new aW;return Object.assign(c,u),c})}}async get(e){var t,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=Jj(e);return o=yn("files/{file}",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var t,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=Yj(e);return o=yn("files/{file}",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),i.then(l=>{const u=Kj(l),c=new sW;return Object.assign(c,u),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zx(n){const e={},t=T(n,["data"]);if(t!=null&&C(e,["data"],t),T(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=T(n,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function n$(n){const e={},t=T(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>y$(o))),C(e,["parts"],i)}const r=T(n,["role"]);return r!=null&&C(e,["role"],r),e}function r$(n){const e={};if(T(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=T(n,["fileUri"]);t!=null&&C(e,["fileUri"],t);const r=T(n,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function i$(n){const e={},t=T(n,["id"]);t!=null&&C(e,["id"],t);const r=T(n,["args"]);r!=null&&C(e,["args"],r);const i=T(n,["name"]);if(i!=null&&C(e,["name"],i),T(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(T(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function o$(n){const e={},t=T(n,["description"]);t!=null&&C(e,["description"],t);const r=T(n,["name"]);r!=null&&C(e,["name"],r);const i=T(n,["parameters"]);i!=null&&C(e,["parameters"],i);const o=T(n,["parametersJsonSchema"]);o!=null&&C(e,["parametersJsonSchema"],o);const a=T(n,["response"]);a!=null&&C(e,["response"],a);const s=T(n,["responseJsonSchema"]);if(s!=null&&C(e,["responseJsonSchema"],s),T(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function a$(n){const e={},t=T(n,["modelSelectionConfig"]);t!=null&&C(e,["modelConfig"],t);const r=T(n,["responseJsonSchema"]);r!=null&&C(e,["responseJsonSchema"],r);const i=T(n,["audioTimestamp"]);i!=null&&C(e,["audioTimestamp"],i);const o=T(n,["candidateCount"]);o!=null&&C(e,["candidateCount"],o);const a=T(n,["enableAffectiveDialog"]);a!=null&&C(e,["enableAffectiveDialog"],a);const s=T(n,["frequencyPenalty"]);s!=null&&C(e,["frequencyPenalty"],s);const l=T(n,["logprobs"]);l!=null&&C(e,["logprobs"],l);const u=T(n,["maxOutputTokens"]);u!=null&&C(e,["maxOutputTokens"],u);const c=T(n,["mediaResolution"]);c!=null&&C(e,["mediaResolution"],c);const f=T(n,["presencePenalty"]);f!=null&&C(e,["presencePenalty"],f);const h=T(n,["responseLogprobs"]);h!=null&&C(e,["responseLogprobs"],h);const p=T(n,["responseMimeType"]);p!=null&&C(e,["responseMimeType"],p);const v=T(n,["responseModalities"]);v!=null&&C(e,["responseModalities"],v);const S=T(n,["responseSchema"]);S!=null&&C(e,["responseSchema"],S);const y=T(n,["routingConfig"]);y!=null&&C(e,["routingConfig"],y);const _=T(n,["seed"]);_!=null&&C(e,["seed"],_);const w=T(n,["speechConfig"]);w!=null&&C(e,["speechConfig"],w);const A=T(n,["stopSequences"]);A!=null&&C(e,["stopSequences"],A);const E=T(n,["temperature"]);E!=null&&C(e,["temperature"],E);const P=T(n,["thinkingConfig"]);P!=null&&C(e,["thinkingConfig"],P);const O=T(n,["topK"]);O!=null&&C(e,["topK"],O);const L=T(n,["topP"]);if(L!=null&&C(e,["topP"],L),T(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function s$(n){const e={};if(T(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=T(n,["enableWidget"]);return t!=null&&C(e,["enableWidget"],t),e}function l$(n){const e={};if(T(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(T(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=T(n,["timeRangeFilter"]);return t!=null&&C(e,["timeRangeFilter"],t),e}function u$(n,e){const t={},r=T(n,["generationConfig"]);e!==void 0&&r!=null&&C(e,["setup","generationConfig"],r);const i=T(n,["responseModalities"]);e!==void 0&&i!=null&&C(e,["setup","generationConfig","responseModalities"],i);const o=T(n,["temperature"]);e!==void 0&&o!=null&&C(e,["setup","generationConfig","temperature"],o);const a=T(n,["topP"]);e!==void 0&&a!=null&&C(e,["setup","generationConfig","topP"],a);const s=T(n,["topK"]);e!==void 0&&s!=null&&C(e,["setup","generationConfig","topK"],s);const l=T(n,["maxOutputTokens"]);e!==void 0&&l!=null&&C(e,["setup","generationConfig","maxOutputTokens"],l);const u=T(n,["mediaResolution"]);e!==void 0&&u!=null&&C(e,["setup","generationConfig","mediaResolution"],u);const c=T(n,["seed"]);e!==void 0&&c!=null&&C(e,["setup","generationConfig","seed"],c);const f=T(n,["speechConfig"]);e!==void 0&&f!=null&&C(e,["setup","generationConfig","speechConfig"],gP(f));const h=T(n,["thinkingConfig"]);e!==void 0&&h!=null&&C(e,["setup","generationConfig","thinkingConfig"],h);const p=T(n,["enableAffectiveDialog"]);e!==void 0&&p!=null&&C(e,["setup","generationConfig","enableAffectiveDialog"],p);const v=T(n,["systemInstruction"]);e!==void 0&&v!=null&&C(e,["setup","systemInstruction"],n$(Os(v)));const S=T(n,["tools"]);if(e!==void 0&&S!=null){let O=Gg(S);Array.isArray(O)&&(O=O.map(L=>_$(Vg(L)))),C(e,["setup","tools"],O)}const y=T(n,["sessionResumption"]);e!==void 0&&y!=null&&C(e,["setup","sessionResumption"],x$(y));const _=T(n,["inputAudioTranscription"]);e!==void 0&&_!=null&&C(e,["setup","inputAudioTranscription"],_);const w=T(n,["outputAudioTranscription"]);e!==void 0&&w!=null&&C(e,["setup","outputAudioTranscription"],w);const A=T(n,["realtimeInputConfig"]);e!==void 0&&A!=null&&C(e,["setup","realtimeInputConfig"],A);const E=T(n,["contextWindowCompression"]);e!==void 0&&E!=null&&C(e,["setup","contextWindowCompression"],E);const P=T(n,["proactivity"]);if(e!==void 0&&P!=null&&C(e,["setup","proactivity"],P),T(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function c$(n,e){const t={},r=T(n,["generationConfig"]);e!==void 0&&r!=null&&C(e,["setup","generationConfig"],a$(r));const i=T(n,["responseModalities"]);e!==void 0&&i!=null&&C(e,["setup","generationConfig","responseModalities"],i);const o=T(n,["temperature"]);e!==void 0&&o!=null&&C(e,["setup","generationConfig","temperature"],o);const a=T(n,["topP"]);e!==void 0&&a!=null&&C(e,["setup","generationConfig","topP"],a);const s=T(n,["topK"]);e!==void 0&&s!=null&&C(e,["setup","generationConfig","topK"],s);const l=T(n,["maxOutputTokens"]);e!==void 0&&l!=null&&C(e,["setup","generationConfig","maxOutputTokens"],l);const u=T(n,["mediaResolution"]);e!==void 0&&u!=null&&C(e,["setup","generationConfig","mediaResolution"],u);const c=T(n,["seed"]);e!==void 0&&c!=null&&C(e,["setup","generationConfig","seed"],c);const f=T(n,["speechConfig"]);e!==void 0&&f!=null&&C(e,["setup","generationConfig","speechConfig"],gP(f));const h=T(n,["thinkingConfig"]);e!==void 0&&h!=null&&C(e,["setup","generationConfig","thinkingConfig"],h);const p=T(n,["enableAffectiveDialog"]);e!==void 0&&p!=null&&C(e,["setup","generationConfig","enableAffectiveDialog"],p);const v=T(n,["systemInstruction"]);e!==void 0&&v!=null&&C(e,["setup","systemInstruction"],Os(v));const S=T(n,["tools"]);if(e!==void 0&&S!=null){let L=Gg(S);Array.isArray(L)&&(L=L.map(D=>S$(Vg(D)))),C(e,["setup","tools"],L)}const y=T(n,["sessionResumption"]);e!==void 0&&y!=null&&C(e,["setup","sessionResumption"],y);const _=T(n,["inputAudioTranscription"]);e!==void 0&&_!=null&&C(e,["setup","inputAudioTranscription"],_);const w=T(n,["outputAudioTranscription"]);e!==void 0&&w!=null&&C(e,["setup","outputAudioTranscription"],w);const A=T(n,["realtimeInputConfig"]);e!==void 0&&A!=null&&C(e,["setup","realtimeInputConfig"],A);const E=T(n,["contextWindowCompression"]);e!==void 0&&E!=null&&C(e,["setup","contextWindowCompression"],E);const P=T(n,["proactivity"]);e!==void 0&&P!=null&&C(e,["setup","proactivity"],P);const O=T(n,["explicitVadSignal"]);return e!==void 0&&O!=null&&C(e,["setup","explicitVadSignal"],O),t}function f$(n,e){const t={},r=T(e,["model"]);r!=null&&C(t,["setup","model"],ui(n,r));const i=T(e,["config"]);return i!=null&&C(t,["config"],u$(i,t)),t}function d$(n,e){const t={},r=T(e,["model"]);r!=null&&C(t,["setup","model"],ui(n,r));const i=T(e,["config"]);return i!=null&&C(t,["config"],c$(i,t)),t}function h$(n){const e={},t=T(n,["musicGenerationConfig"]);return t!=null&&C(e,["musicGenerationConfig"],t),e}function p$(n){const e={},t=T(n,["weightedPrompts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>i)),C(e,["weightedPrompts"],r)}return e}function m$(n){const e={},t=T(n,["media"]);if(t!=null){let u=i8(t);Array.isArray(u)&&(u=u.map(c=>Zx(c))),C(e,["mediaChunks"],u)}const r=T(n,["audio"]);r!=null&&C(e,["audio"],Zx(a8(r)));const i=T(n,["audioStreamEnd"]);i!=null&&C(e,["audioStreamEnd"],i);const o=T(n,["video"]);o!=null&&C(e,["video"],Zx(o8(o)));const a=T(n,["text"]);a!=null&&C(e,["text"],a);const s=T(n,["activityStart"]);s!=null&&C(e,["activityStart"],s);const l=T(n,["activityEnd"]);return l!=null&&C(e,["activityEnd"],l),e}function g$(n){const e={},t=T(n,["media"]);if(t!=null){let u=i8(t);Array.isArray(u)&&(u=u.map(c=>c)),C(e,["mediaChunks"],u)}const r=T(n,["audio"]);r!=null&&C(e,["audio"],a8(r));const i=T(n,["audioStreamEnd"]);i!=null&&C(e,["audioStreamEnd"],i);const o=T(n,["video"]);o!=null&&C(e,["video"],o8(o));const a=T(n,["text"]);a!=null&&C(e,["text"],a);const s=T(n,["activityStart"]);s!=null&&C(e,["activityStart"],s);const l=T(n,["activityEnd"]);return l!=null&&C(e,["activityEnd"],l),e}function v$(n){const e={},t=T(n,["setupComplete"]);t!=null&&C(e,["setupComplete"],t);const r=T(n,["serverContent"]);r!=null&&C(e,["serverContent"],r);const i=T(n,["toolCall"]);i!=null&&C(e,["toolCall"],i);const o=T(n,["toolCallCancellation"]);o!=null&&C(e,["toolCallCancellation"],o);const a=T(n,["usageMetadata"]);a!=null&&C(e,["usageMetadata"],w$(a));const s=T(n,["goAway"]);s!=null&&C(e,["goAway"],s);const l=T(n,["sessionResumptionUpdate"]);l!=null&&C(e,["sessionResumptionUpdate"],l);const u=T(n,["voiceActivityDetectionSignal"]);return u!=null&&C(e,["voiceActivityDetectionSignal"],u),e}function y$(n){const e={},t=T(n,["mediaResolution"]);t!=null&&C(e,["mediaResolution"],t);const r=T(n,["codeExecutionResult"]);r!=null&&C(e,["codeExecutionResult"],r);const i=T(n,["executableCode"]);i!=null&&C(e,["executableCode"],i);const o=T(n,["fileData"]);o!=null&&C(e,["fileData"],r$(o));const a=T(n,["functionCall"]);a!=null&&C(e,["functionCall"],i$(a));const s=T(n,["functionResponse"]);s!=null&&C(e,["functionResponse"],s);const l=T(n,["inlineData"]);l!=null&&C(e,["inlineData"],Zx(l));const u=T(n,["text"]);u!=null&&C(e,["text"],u);const c=T(n,["thought"]);c!=null&&C(e,["thought"],c);const f=T(n,["thoughtSignature"]);f!=null&&C(e,["thoughtSignature"],f);const h=T(n,["videoMetadata"]);return h!=null&&C(e,["videoMetadata"],h),e}function x$(n){const e={},t=T(n,["handle"]);if(t!=null&&C(e,["handle"],t),T(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function _$(n){const e={};if(T(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=T(n,["computerUse"]);t!=null&&C(e,["computerUse"],t);const r=T(n,["fileSearch"]);r!=null&&C(e,["fileSearch"],r);const i=T(n,["codeExecution"]);if(i!=null&&C(e,["codeExecution"],i),T(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=T(n,["functionDeclarations"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>f)),C(e,["functionDeclarations"],c)}const a=T(n,["googleMaps"]);a!=null&&C(e,["googleMaps"],s$(a));const s=T(n,["googleSearch"]);s!=null&&C(e,["googleSearch"],l$(s));const l=T(n,["googleSearchRetrieval"]);l!=null&&C(e,["googleSearchRetrieval"],l);const u=T(n,["urlContext"]);return u!=null&&C(e,["urlContext"],u),e}function S$(n){const e={},t=T(n,["retrieval"]);t!=null&&C(e,["retrieval"],t);const r=T(n,["computerUse"]);if(r!=null&&C(e,["computerUse"],r),T(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=T(n,["codeExecution"]);i!=null&&C(e,["codeExecution"],i);const o=T(n,["enterpriseWebSearch"]);o!=null&&C(e,["enterpriseWebSearch"],o);const a=T(n,["functionDeclarations"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(h=>o$(h))),C(e,["functionDeclarations"],f)}const s=T(n,["googleMaps"]);s!=null&&C(e,["googleMaps"],s);const l=T(n,["googleSearch"]);l!=null&&C(e,["googleSearch"],l);const u=T(n,["googleSearchRetrieval"]);u!=null&&C(e,["googleSearchRetrieval"],u);const c=T(n,["urlContext"]);return c!=null&&C(e,["urlContext"],c),e}function w$(n){const e={},t=T(n,["promptTokenCount"]);t!=null&&C(e,["promptTokenCount"],t);const r=T(n,["cachedContentTokenCount"]);r!=null&&C(e,["cachedContentTokenCount"],r);const i=T(n,["candidatesTokenCount"]);i!=null&&C(e,["responseTokenCount"],i);const o=T(n,["toolUsePromptTokenCount"]);o!=null&&C(e,["toolUsePromptTokenCount"],o);const a=T(n,["thoughtsTokenCount"]);a!=null&&C(e,["thoughtsTokenCount"],a);const s=T(n,["totalTokenCount"]);s!=null&&C(e,["totalTokenCount"],s);const l=T(n,["promptTokensDetails"]);if(l!=null){let p=l;Array.isArray(p)&&(p=p.map(v=>v)),C(e,["promptTokensDetails"],p)}const u=T(n,["cacheTokensDetails"]);if(u!=null){let p=u;Array.isArray(p)&&(p=p.map(v=>v)),C(e,["cacheTokensDetails"],p)}const c=T(n,["candidatesTokensDetails"]);if(c!=null){let p=c;Array.isArray(p)&&(p=p.map(v=>v)),C(e,["responseTokensDetails"],p)}const f=T(n,["toolUsePromptTokensDetails"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(v=>v)),C(e,["toolUsePromptTokensDetails"],p)}const h=T(n,["trafficType"]);return h!=null&&C(e,["trafficType"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function b$(n){const e={},t=T(n,["data"]);if(t!=null&&C(e,["data"],t),T(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=T(n,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function A$(n){const e={},t=T(n,["content"]);t!=null&&C(e,["content"],t);const r=T(n,["citationMetadata"]);r!=null&&C(e,["citationMetadata"],E$(r));const i=T(n,["tokenCount"]);i!=null&&C(e,["tokenCount"],i);const o=T(n,["finishReason"]);o!=null&&C(e,["finishReason"],o);const a=T(n,["avgLogprobs"]);a!=null&&C(e,["avgLogprobs"],a);const s=T(n,["groundingMetadata"]);s!=null&&C(e,["groundingMetadata"],s);const l=T(n,["index"]);l!=null&&C(e,["index"],l);const u=T(n,["logprobsResult"]);u!=null&&C(e,["logprobsResult"],u);const c=T(n,["safetyRatings"]);if(c!=null){let h=c;Array.isArray(h)&&(h=h.map(p=>p)),C(e,["safetyRatings"],h)}const f=T(n,["urlContextMetadata"]);return f!=null&&C(e,["urlContextMetadata"],f),e}function E$(n){const e={},t=T(n,["citationSources"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>i)),C(e,["citations"],r)}return e}function T$(n,e){const t={},r=T(e,["model"]);r!=null&&C(t,["_url","model"],ui(n,r));const i=T(e,["contents"]);if(i!=null){let o=zu(i);Array.isArray(o)&&(o=o.map(a=>a)),C(t,["contents"],o)}return t}function M$(n){const e={},t=T(n,["sdkHttpResponse"]);t!=null&&C(e,["sdkHttpResponse"],t);const r=T(n,["tokensInfo"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),C(e,["tokensInfo"],i)}return e}function C$(n){const e={},t=T(n,["values"]);t!=null&&C(e,["values"],t);const r=T(n,["statistics"]);return r!=null&&C(e,["statistics"],P$(r)),e}function P$(n){const e={},t=T(n,["truncated"]);t!=null&&C(e,["truncated"],t);const r=T(n,["token_count"]);return r!=null&&C(e,["tokenCount"],r),e}function qS(n){const e={},t=T(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>UX(o))),C(e,["parts"],i)}const r=T(n,["role"]);return r!=null&&C(e,["role"],r),e}function I$(n){const e={},t=T(n,["controlType"]);t!=null&&C(e,["controlType"],t);const r=T(n,["enableControlImageComputation"]);return r!=null&&C(e,["computeControl"],r),e}function R$(n){const e={};if(T(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(T(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(T(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function N$(n,e){const t={},r=T(n,["systemInstruction"]);e!==void 0&&r!=null&&C(e,["systemInstruction"],Os(r));const i=T(n,["tools"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>_8(s))),C(e,["tools"],a)}const o=T(n,["generationConfig"]);return e!==void 0&&o!=null&&C(e,["generationConfig"],bX(o)),t}function L$(n,e){const t={},r=T(e,["model"]);r!=null&&C(t,["_url","model"],ui(n,r));const i=T(e,["contents"]);if(i!=null){let a=zu(i);Array.isArray(a)&&(a=a.map(s=>qS(s))),C(t,["contents"],a)}const o=T(e,["config"]);return o!=null&&R$(o),t}function O$(n,e){const t={},r=T(e,["model"]);r!=null&&C(t,["_url","model"],ui(n,r));const i=T(e,["contents"]);if(i!=null){let a=zu(i);Array.isArray(a)&&(a=a.map(s=>s)),C(t,["contents"],a)}const o=T(e,["config"]);return o!=null&&N$(o,t),t}function D$(n){const e={},t=T(n,["sdkHttpResponse"]);t!=null&&C(e,["sdkHttpResponse"],t);const r=T(n,["totalTokens"]);r!=null&&C(e,["totalTokens"],r);const i=T(n,["cachedContentTokenCount"]);return i!=null&&C(e,["cachedContentTokenCount"],i),e}function k$(n){const e={},t=T(n,["sdkHttpResponse"]);t!=null&&C(e,["sdkHttpResponse"],t);const r=T(n,["totalTokens"]);return r!=null&&C(e,["totalTokens"],r),e}function F$(n,e){const t={},r=T(e,["model"]);return r!=null&&C(t,["_url","name"],ui(n,r)),t}function U$(n,e){const t={},r=T(e,["model"]);return r!=null&&C(t,["_url","name"],ui(n,r)),t}function B$(n){const e={},t=T(n,["sdkHttpResponse"]);return t!=null&&C(e,["sdkHttpResponse"],t),e}function z$(n){const e={},t=T(n,["sdkHttpResponse"]);return t!=null&&C(e,["sdkHttpResponse"],t),e}function H$(n,e){const t={},r=T(n,["outputGcsUri"]);e!==void 0&&r!=null&&C(e,["parameters","storageUri"],r);const i=T(n,["negativePrompt"]);e!==void 0&&i!=null&&C(e,["parameters","negativePrompt"],i);const o=T(n,["numberOfImages"]);e!==void 0&&o!=null&&C(e,["parameters","sampleCount"],o);const a=T(n,["aspectRatio"]);e!==void 0&&a!=null&&C(e,["parameters","aspectRatio"],a);const s=T(n,["guidanceScale"]);e!==void 0&&s!=null&&C(e,["parameters","guidanceScale"],s);const l=T(n,["seed"]);e!==void 0&&l!=null&&C(e,["parameters","seed"],l);const u=T(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&C(e,["parameters","safetySetting"],u);const c=T(n,["personGeneration"]);e!==void 0&&c!=null&&C(e,["parameters","personGeneration"],c);const f=T(n,["includeSafetyAttributes"]);e!==void 0&&f!=null&&C(e,["parameters","includeSafetyAttributes"],f);const h=T(n,["includeRaiReason"]);e!==void 0&&h!=null&&C(e,["parameters","includeRaiReason"],h);const p=T(n,["language"]);e!==void 0&&p!=null&&C(e,["parameters","language"],p);const v=T(n,["outputMimeType"]);e!==void 0&&v!=null&&C(e,["parameters","outputOptions","mimeType"],v);const S=T(n,["outputCompressionQuality"]);e!==void 0&&S!=null&&C(e,["parameters","outputOptions","compressionQuality"],S);const y=T(n,["addWatermark"]);e!==void 0&&y!=null&&C(e,["parameters","addWatermark"],y);const _=T(n,["labels"]);e!==void 0&&_!=null&&C(e,["labels"],_);const w=T(n,["editMode"]);e!==void 0&&w!=null&&C(e,["parameters","editMode"],w);const A=T(n,["baseSteps"]);return e!==void 0&&A!=null&&C(e,["parameters","editConfig","baseSteps"],A),t}function V$(n,e){const t={},r=T(e,["model"]);r!=null&&C(t,["_url","model"],ui(n,r));const i=T(e,["prompt"]);i!=null&&C(t,["instances[0]","prompt"],i);const o=T(e,["referenceImages"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>qX(l))),C(t,["instances[0]","referenceImages"],s)}const a=T(e,["config"]);return a!=null&&H$(a,t),t}function G$(n){const e={},t=T(n,["sdkHttpResponse"]);t!=null&&C(e,["sdkHttpResponse"],t);const r=T(n,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>WS(o))),C(e,["generatedImages"],i)}return e}function q$(n,e){const t={},r=T(n,["taskType"]);e!==void 0&&r!=null&&C(e,["requests[]","taskType"],r);const i=T(n,["title"]);e!==void 0&&i!=null&&C(e,["requests[]","title"],i);const o=T(n,["outputDimensionality"]);if(e!==void 0&&o!=null&&C(e,["requests[]","outputDimensionality"],o),T(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(T(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function W$(n,e){const t={},r=T(n,["taskType"]);e!==void 0&&r!=null&&C(e,["instances[]","task_type"],r);const i=T(n,["title"]);e!==void 0&&i!=null&&C(e,["instances[]","title"],i);const o=T(n,["outputDimensionality"]);e!==void 0&&o!=null&&C(e,["parameters","outputDimensionality"],o);const a=T(n,["mimeType"]);e!==void 0&&a!=null&&C(e,["instances[]","mimeType"],a);const s=T(n,["autoTruncate"]);return e!==void 0&&s!=null&&C(e,["parameters","autoTruncate"],s),t}function j$(n,e){const t={},r=T(e,["model"]);r!=null&&C(t,["_url","model"],ui(n,r));const i=T(e,["contents"]);if(i!=null){let s=hP(n,i);Array.isArray(s)&&(s=s.map(l=>l)),C(t,["requests[]","content"],s)}const o=T(e,["config"]);o!=null&&q$(o,t);const a=T(e,["model"]);return a!==void 0&&C(t,["requests[]","model"],ui(n,a)),t}function $$(n,e){const t={},r=T(e,["model"]);r!=null&&C(t,["_url","model"],ui(n,r));const i=T(e,["contents"]);if(i!=null){let a=hP(n,i);Array.isArray(a)&&(a=a.map(s=>s)),C(t,["instances[]","content"],a)}const o=T(e,["config"]);return o!=null&&W$(o,t),t}function X$(n){const e={},t=T(n,["sdkHttpResponse"]);t!=null&&C(e,["sdkHttpResponse"],t);const r=T(n,["embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),C(e,["embeddings"],o)}const i=T(n,["metadata"]);return i!=null&&C(e,["metadata"],i),e}function Y$(n){const e={},t=T(n,["sdkHttpResponse"]);t!=null&&C(e,["sdkHttpResponse"],t);const r=T(n,["predictions[]","embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>C$(a))),C(e,["embeddings"],o)}const i=T(n,["metadata"]);return i!=null&&C(e,["metadata"],i),e}function K$(n){const e={},t=T(n,["endpoint"]);t!=null&&C(e,["name"],t);const r=T(n,["deployedModelId"]);return r!=null&&C(e,["deployedModelId"],r),e}function J$(n){const e={};if(T(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=T(n,["fileUri"]);t!=null&&C(e,["fileUri"],t);const r=T(n,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function Z$(n){const e={},t=T(n,["id"]);t!=null&&C(e,["id"],t);const r=T(n,["args"]);r!=null&&C(e,["args"],r);const i=T(n,["name"]);if(i!=null&&C(e,["name"],i),T(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(T(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Q$(n){const e={},t=T(n,["allowedFunctionNames"]);t!=null&&C(e,["allowedFunctionNames"],t);const r=T(n,["mode"]);if(r!=null&&C(e,["mode"],r),T(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function eX(n){const e={},t=T(n,["description"]);t!=null&&C(e,["description"],t);const r=T(n,["name"]);r!=null&&C(e,["name"],r);const i=T(n,["parameters"]);i!=null&&C(e,["parameters"],i);const o=T(n,["parametersJsonSchema"]);o!=null&&C(e,["parametersJsonSchema"],o);const a=T(n,["response"]);a!=null&&C(e,["response"],a);const s=T(n,["responseJsonSchema"]);if(s!=null&&C(e,["responseJsonSchema"],s),T(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function tX(n,e,t){const r={},i=T(e,["systemInstruction"]);t!==void 0&&i!=null&&C(t,["systemInstruction"],qS(Os(i)));const o=T(e,["temperature"]);o!=null&&C(r,["temperature"],o);const a=T(e,["topP"]);a!=null&&C(r,["topP"],a);const s=T(e,["topK"]);s!=null&&C(r,["topK"],s);const l=T(e,["candidateCount"]);l!=null&&C(r,["candidateCount"],l);const u=T(e,["maxOutputTokens"]);u!=null&&C(r,["maxOutputTokens"],u);const c=T(e,["stopSequences"]);c!=null&&C(r,["stopSequences"],c);const f=T(e,["responseLogprobs"]);f!=null&&C(r,["responseLogprobs"],f);const h=T(e,["logprobs"]);h!=null&&C(r,["logprobs"],h);const p=T(e,["presencePenalty"]);p!=null&&C(r,["presencePenalty"],p);const v=T(e,["frequencyPenalty"]);v!=null&&C(r,["frequencyPenalty"],v);const S=T(e,["seed"]);S!=null&&C(r,["seed"],S);const y=T(e,["responseMimeType"]);y!=null&&C(r,["responseMimeType"],y);const _=T(e,["responseSchema"]);_!=null&&C(r,["responseSchema"],pP(_));const w=T(e,["responseJsonSchema"]);if(w!=null&&C(r,["responseJsonSchema"],w),T(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(T(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const A=T(e,["safetySettings"]);if(t!==void 0&&A!=null){let W=A;Array.isArray(W)&&(W=W.map(j=>WX(j))),C(t,["safetySettings"],W)}const E=T(e,["tools"]);if(t!==void 0&&E!=null){let W=Gg(E);Array.isArray(W)&&(W=W.map(j=>ZX(Vg(j)))),C(t,["tools"],W)}const P=T(e,["toolConfig"]);if(t!==void 0&&P!=null&&C(t,["toolConfig"],JX(P)),T(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const O=T(e,["cachedContent"]);t!==void 0&&O!=null&&C(t,["cachedContent"],hd(n,O));const L=T(e,["responseModalities"]);L!=null&&C(r,["responseModalities"],L);const D=T(e,["mediaResolution"]);D!=null&&C(r,["mediaResolution"],D);const F=T(e,["speechConfig"]);if(F!=null&&C(r,["speechConfig"],mP(F)),T(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=T(e,["thinkingConfig"]);U!=null&&C(r,["thinkingConfig"],U);const k=T(e,["imageConfig"]);k!=null&&C(r,["imageConfig"],CX(k));const z=T(e,["enableEnhancedCivicAnswers"]);return z!=null&&C(r,["enableEnhancedCivicAnswers"],z),r}function nX(n,e,t){const r={},i=T(e,["systemInstruction"]);t!==void 0&&i!=null&&C(t,["systemInstruction"],Os(i));const o=T(e,["temperature"]);o!=null&&C(r,["temperature"],o);const a=T(e,["topP"]);a!=null&&C(r,["topP"],a);const s=T(e,["topK"]);s!=null&&C(r,["topK"],s);const l=T(e,["candidateCount"]);l!=null&&C(r,["candidateCount"],l);const u=T(e,["maxOutputTokens"]);u!=null&&C(r,["maxOutputTokens"],u);const c=T(e,["stopSequences"]);c!=null&&C(r,["stopSequences"],c);const f=T(e,["responseLogprobs"]);f!=null&&C(r,["responseLogprobs"],f);const h=T(e,["logprobs"]);h!=null&&C(r,["logprobs"],h);const p=T(e,["presencePenalty"]);p!=null&&C(r,["presencePenalty"],p);const v=T(e,["frequencyPenalty"]);v!=null&&C(r,["frequencyPenalty"],v);const S=T(e,["seed"]);S!=null&&C(r,["seed"],S);const y=T(e,["responseMimeType"]);y!=null&&C(r,["responseMimeType"],y);const _=T(e,["responseSchema"]);_!=null&&C(r,["responseSchema"],pP(_));const w=T(e,["responseJsonSchema"]);w!=null&&C(r,["responseJsonSchema"],w);const A=T(e,["routingConfig"]);A!=null&&C(r,["routingConfig"],A);const E=T(e,["modelSelectionConfig"]);E!=null&&C(r,["modelConfig"],E);const P=T(e,["safetySettings"]);if(t!==void 0&&P!=null){let Y=P;Array.isArray(Y)&&(Y=Y.map(Q=>Q)),C(t,["safetySettings"],Y)}const O=T(e,["tools"]);if(t!==void 0&&O!=null){let Y=Gg(O);Array.isArray(Y)&&(Y=Y.map(Q=>_8(Vg(Q)))),C(t,["tools"],Y)}const L=T(e,["toolConfig"]);t!==void 0&&L!=null&&C(t,["toolConfig"],L);const D=T(e,["labels"]);t!==void 0&&D!=null&&C(t,["labels"],D);const F=T(e,["cachedContent"]);t!==void 0&&F!=null&&C(t,["cachedContent"],hd(n,F));const U=T(e,["responseModalities"]);U!=null&&C(r,["responseModalities"],U);const k=T(e,["mediaResolution"]);k!=null&&C(r,["mediaResolution"],k);const z=T(e,["speechConfig"]);z!=null&&C(r,["speechConfig"],mP(z));const W=T(e,["audioTimestamp"]);W!=null&&C(r,["audioTimestamp"],W);const j=T(e,["thinkingConfig"]);j!=null&&C(r,["thinkingConfig"],j);const se=T(e,["imageConfig"]);if(se!=null&&C(r,["imageConfig"],PX(se)),T(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function A3(n,e){const t={},r=T(e,["model"]);r!=null&&C(t,["_url","model"],ui(n,r));const i=T(e,["contents"]);if(i!=null){let a=zu(i);Array.isArray(a)&&(a=a.map(s=>qS(s))),C(t,["contents"],a)}const o=T(e,["config"]);return o!=null&&C(t,["generationConfig"],tX(n,o,t)),t}function E3(n,e){const t={},r=T(e,["model"]);r!=null&&C(t,["_url","model"],ui(n,r));const i=T(e,["contents"]);if(i!=null){let a=zu(i);Array.isArray(a)&&(a=a.map(s=>s)),C(t,["contents"],a)}const o=T(e,["config"]);return o!=null&&C(t,["generationConfig"],nX(n,o,t)),t}function T3(n){const e={},t=T(n,["sdkHttpResponse"]);t!=null&&C(e,["sdkHttpResponse"],t);const r=T(n,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>A$(u))),C(e,["candidates"],l)}const i=T(n,["modelVersion"]);i!=null&&C(e,["modelVersion"],i);const o=T(n,["promptFeedback"]);o!=null&&C(e,["promptFeedback"],o);const a=T(n,["responseId"]);a!=null&&C(e,["responseId"],a);const s=T(n,["usageMetadata"]);return s!=null&&C(e,["usageMetadata"],s),e}function M3(n){const e={},t=T(n,["sdkHttpResponse"]);t!=null&&C(e,["sdkHttpResponse"],t);const r=T(n,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(c=>c)),C(e,["candidates"],u)}const i=T(n,["createTime"]);i!=null&&C(e,["createTime"],i);const o=T(n,["modelVersion"]);o!=null&&C(e,["modelVersion"],o);const a=T(n,["promptFeedback"]);a!=null&&C(e,["promptFeedback"],a);const s=T(n,["responseId"]);s!=null&&C(e,["responseId"],s);const l=T(n,["usageMetadata"]);return l!=null&&C(e,["usageMetadata"],l),e}function rX(n,e){const t={};if(T(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(T(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=T(n,["numberOfImages"]);e!==void 0&&r!=null&&C(e,["parameters","sampleCount"],r);const i=T(n,["aspectRatio"]);e!==void 0&&i!=null&&C(e,["parameters","aspectRatio"],i);const o=T(n,["guidanceScale"]);if(e!==void 0&&o!=null&&C(e,["parameters","guidanceScale"],o),T(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=T(n,["safetyFilterLevel"]);e!==void 0&&a!=null&&C(e,["parameters","safetySetting"],a);const s=T(n,["personGeneration"]);e!==void 0&&s!=null&&C(e,["parameters","personGeneration"],s);const l=T(n,["includeSafetyAttributes"]);e!==void 0&&l!=null&&C(e,["parameters","includeSafetyAttributes"],l);const u=T(n,["includeRaiReason"]);e!==void 0&&u!=null&&C(e,["parameters","includeRaiReason"],u);const c=T(n,["language"]);e!==void 0&&c!=null&&C(e,["parameters","language"],c);const f=T(n,["outputMimeType"]);e!==void 0&&f!=null&&C(e,["parameters","outputOptions","mimeType"],f);const h=T(n,["outputCompressionQuality"]);if(e!==void 0&&h!=null&&C(e,["parameters","outputOptions","compressionQuality"],h),T(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(T(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const p=T(n,["imageSize"]);if(e!==void 0&&p!=null&&C(e,["parameters","sampleImageSize"],p),T(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function iX(n,e){const t={},r=T(n,["outputGcsUri"]);e!==void 0&&r!=null&&C(e,["parameters","storageUri"],r);const i=T(n,["negativePrompt"]);e!==void 0&&i!=null&&C(e,["parameters","negativePrompt"],i);const o=T(n,["numberOfImages"]);e!==void 0&&o!=null&&C(e,["parameters","sampleCount"],o);const a=T(n,["aspectRatio"]);e!==void 0&&a!=null&&C(e,["parameters","aspectRatio"],a);const s=T(n,["guidanceScale"]);e!==void 0&&s!=null&&C(e,["parameters","guidanceScale"],s);const l=T(n,["seed"]);e!==void 0&&l!=null&&C(e,["parameters","seed"],l);const u=T(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&C(e,["parameters","safetySetting"],u);const c=T(n,["personGeneration"]);e!==void 0&&c!=null&&C(e,["parameters","personGeneration"],c);const f=T(n,["includeSafetyAttributes"]);e!==void 0&&f!=null&&C(e,["parameters","includeSafetyAttributes"],f);const h=T(n,["includeRaiReason"]);e!==void 0&&h!=null&&C(e,["parameters","includeRaiReason"],h);const p=T(n,["language"]);e!==void 0&&p!=null&&C(e,["parameters","language"],p);const v=T(n,["outputMimeType"]);e!==void 0&&v!=null&&C(e,["parameters","outputOptions","mimeType"],v);const S=T(n,["outputCompressionQuality"]);e!==void 0&&S!=null&&C(e,["parameters","outputOptions","compressionQuality"],S);const y=T(n,["addWatermark"]);e!==void 0&&y!=null&&C(e,["parameters","addWatermark"],y);const _=T(n,["labels"]);e!==void 0&&_!=null&&C(e,["labels"],_);const w=T(n,["imageSize"]);e!==void 0&&w!=null&&C(e,["parameters","sampleImageSize"],w);const A=T(n,["enhancePrompt"]);return e!==void 0&&A!=null&&C(e,["parameters","enhancePrompt"],A),t}function oX(n,e){const t={},r=T(e,["model"]);r!=null&&C(t,["_url","model"],ui(n,r));const i=T(e,["prompt"]);i!=null&&C(t,["instances[0]","prompt"],i);const o=T(e,["config"]);return o!=null&&rX(o,t),t}function aX(n,e){const t={},r=T(e,["model"]);r!=null&&C(t,["_url","model"],ui(n,r));const i=T(e,["prompt"]);i!=null&&C(t,["instances[0]","prompt"],i);const o=T(e,["config"]);return o!=null&&iX(o,t),t}function sX(n){const e={},t=T(n,["sdkHttpResponse"]);t!=null&&C(e,["sdkHttpResponse"],t);const r=T(n,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>xX(a))),C(e,["generatedImages"],o)}const i=T(n,["positivePromptSafetyAttributes"]);return i!=null&&C(e,["positivePromptSafetyAttributes"],y8(i)),e}function lX(n){const e={},t=T(n,["sdkHttpResponse"]);t!=null&&C(e,["sdkHttpResponse"],t);const r=T(n,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>WS(a))),C(e,["generatedImages"],o)}const i=T(n,["positivePromptSafetyAttributes"]);return i!=null&&C(e,["positivePromptSafetyAttributes"],x8(i)),e}function uX(n,e){const t={},r=T(n,["numberOfVideos"]);if(e!==void 0&&r!=null&&C(e,["parameters","sampleCount"],r),T(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(T(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=T(n,["durationSeconds"]);if(e!==void 0&&i!=null&&C(e,["parameters","durationSeconds"],i),T(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=T(n,["aspectRatio"]);e!==void 0&&o!=null&&C(e,["parameters","aspectRatio"],o);const a=T(n,["resolution"]);e!==void 0&&a!=null&&C(e,["parameters","resolution"],a);const s=T(n,["personGeneration"]);if(e!==void 0&&s!=null&&C(e,["parameters","personGeneration"],s),T(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=T(n,["negativePrompt"]);e!==void 0&&l!=null&&C(e,["parameters","negativePrompt"],l);const u=T(n,["enhancePrompt"]);if(e!==void 0&&u!=null&&C(e,["parameters","enhancePrompt"],u),T(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const c=T(n,["lastFrame"]);e!==void 0&&c!=null&&C(e,["instances[0]","lastFrame"],jS(c));const f=T(n,["referenceImages"]);if(e!==void 0&&f!=null){let h=f;Array.isArray(h)&&(h=h.map(p=>fY(p))),C(e,["instances[0]","referenceImages"],h)}if(T(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(T(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function cX(n,e){const t={},r=T(n,["numberOfVideos"]);e!==void 0&&r!=null&&C(e,["parameters","sampleCount"],r);const i=T(n,["outputGcsUri"]);e!==void 0&&i!=null&&C(e,["parameters","storageUri"],i);const o=T(n,["fps"]);e!==void 0&&o!=null&&C(e,["parameters","fps"],o);const a=T(n,["durationSeconds"]);e!==void 0&&a!=null&&C(e,["parameters","durationSeconds"],a);const s=T(n,["seed"]);e!==void 0&&s!=null&&C(e,["parameters","seed"],s);const l=T(n,["aspectRatio"]);e!==void 0&&l!=null&&C(e,["parameters","aspectRatio"],l);const u=T(n,["resolution"]);e!==void 0&&u!=null&&C(e,["parameters","resolution"],u);const c=T(n,["personGeneration"]);e!==void 0&&c!=null&&C(e,["parameters","personGeneration"],c);const f=T(n,["pubsubTopic"]);e!==void 0&&f!=null&&C(e,["parameters","pubsubTopic"],f);const h=T(n,["negativePrompt"]);e!==void 0&&h!=null&&C(e,["parameters","negativePrompt"],h);const p=T(n,["enhancePrompt"]);e!==void 0&&p!=null&&C(e,["parameters","enhancePrompt"],p);const v=T(n,["generateAudio"]);e!==void 0&&v!=null&&C(e,["parameters","generateAudio"],v);const S=T(n,["lastFrame"]);e!==void 0&&S!=null&&C(e,["instances[0]","lastFrame"],kc(S));const y=T(n,["referenceImages"]);if(e!==void 0&&y!=null){let A=y;Array.isArray(A)&&(A=A.map(E=>dY(E))),C(e,["instances[0]","referenceImages"],A)}const _=T(n,["mask"]);e!==void 0&&_!=null&&C(e,["instances[0]","mask"],cY(_));const w=T(n,["compressionQuality"]);return e!==void 0&&w!=null&&C(e,["parameters","compressionQuality"],w),t}function fX(n){const e={},t=T(n,["name"]);t!=null&&C(e,["name"],t);const r=T(n,["metadata"]);r!=null&&C(e,["metadata"],r);const i=T(n,["done"]);i!=null&&C(e,["done"],i);const o=T(n,["error"]);o!=null&&C(e,["error"],o);const a=T(n,["response","generateVideoResponse"]);return a!=null&&C(e,["response"],mX(a)),e}function dX(n){const e={},t=T(n,["name"]);t!=null&&C(e,["name"],t);const r=T(n,["metadata"]);r!=null&&C(e,["metadata"],r);const i=T(n,["done"]);i!=null&&C(e,["done"],i);const o=T(n,["error"]);o!=null&&C(e,["error"],o);const a=T(n,["response"]);return a!=null&&C(e,["response"],gX(a)),e}function hX(n,e){const t={},r=T(e,["model"]);r!=null&&C(t,["_url","model"],ui(n,r));const i=T(e,["prompt"]);i!=null&&C(t,["instances[0]","prompt"],i);const o=T(e,["image"]);o!=null&&C(t,["instances[0]","image"],jS(o));const a=T(e,["video"]);a!=null&&C(t,["instances[0]","video"],S8(a));const s=T(e,["source"]);s!=null&&vX(s,t);const l=T(e,["config"]);return l!=null&&uX(l,t),t}function pX(n,e){const t={},r=T(e,["model"]);r!=null&&C(t,["_url","model"],ui(n,r));const i=T(e,["prompt"]);i!=null&&C(t,["instances[0]","prompt"],i);const o=T(e,["image"]);o!=null&&C(t,["instances[0]","image"],kc(o));const a=T(e,["video"]);a!=null&&C(t,["instances[0]","video"],w8(a));const s=T(e,["source"]);s!=null&&yX(s,t);const l=T(e,["config"]);return l!=null&&cX(l,t),t}function mX(n){const e={},t=T(n,["generatedSamples"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>SX(a))),C(e,["generatedVideos"],o)}const r=T(n,["raiMediaFilteredCount"]);r!=null&&C(e,["raiMediaFilteredCount"],r);const i=T(n,["raiMediaFilteredReasons"]);return i!=null&&C(e,["raiMediaFilteredReasons"],i),e}function gX(n){const e={},t=T(n,["videos"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>wX(a))),C(e,["generatedVideos"],o)}const r=T(n,["raiMediaFilteredCount"]);r!=null&&C(e,["raiMediaFilteredCount"],r);const i=T(n,["raiMediaFilteredReasons"]);return i!=null&&C(e,["raiMediaFilteredReasons"],i),e}function vX(n,e){const t={},r=T(n,["prompt"]);e!==void 0&&r!=null&&C(e,["instances[0]","prompt"],r);const i=T(n,["image"]);e!==void 0&&i!=null&&C(e,["instances[0]","image"],jS(i));const o=T(n,["video"]);return e!==void 0&&o!=null&&C(e,["instances[0]","video"],S8(o)),t}function yX(n,e){const t={},r=T(n,["prompt"]);e!==void 0&&r!=null&&C(e,["instances[0]","prompt"],r);const i=T(n,["image"]);e!==void 0&&i!=null&&C(e,["instances[0]","image"],kc(i));const o=T(n,["video"]);return e!==void 0&&o!=null&&C(e,["instances[0]","video"],w8(o)),t}function xX(n){const e={},t=T(n,["_self"]);t!=null&&C(e,["image"],IX(t));const r=T(n,["raiFilteredReason"]);r!=null&&C(e,["raiFilteredReason"],r);const i=T(n,["_self"]);return i!=null&&C(e,["safetyAttributes"],y8(i)),e}function WS(n){const e={},t=T(n,["_self"]);t!=null&&C(e,["image"],v8(t));const r=T(n,["raiFilteredReason"]);r!=null&&C(e,["raiFilteredReason"],r);const i=T(n,["_self"]);i!=null&&C(e,["safetyAttributes"],x8(i));const o=T(n,["prompt"]);return o!=null&&C(e,["enhancedPrompt"],o),e}function _X(n){const e={},t=T(n,["_self"]);t!=null&&C(e,["mask"],v8(t));const r=T(n,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),C(e,["labels"],i)}return e}function SX(n){const e={},t=T(n,["video"]);return t!=null&&C(e,["video"],lY(t)),e}function wX(n){const e={},t=T(n,["_self"]);return t!=null&&C(e,["video"],uY(t)),e}function bX(n){const e={},t=T(n,["modelSelectionConfig"]);t!=null&&C(e,["modelConfig"],t);const r=T(n,["responseJsonSchema"]);r!=null&&C(e,["responseJsonSchema"],r);const i=T(n,["audioTimestamp"]);i!=null&&C(e,["audioTimestamp"],i);const o=T(n,["candidateCount"]);o!=null&&C(e,["candidateCount"],o);const a=T(n,["enableAffectiveDialog"]);a!=null&&C(e,["enableAffectiveDialog"],a);const s=T(n,["frequencyPenalty"]);s!=null&&C(e,["frequencyPenalty"],s);const l=T(n,["logprobs"]);l!=null&&C(e,["logprobs"],l);const u=T(n,["maxOutputTokens"]);u!=null&&C(e,["maxOutputTokens"],u);const c=T(n,["mediaResolution"]);c!=null&&C(e,["mediaResolution"],c);const f=T(n,["presencePenalty"]);f!=null&&C(e,["presencePenalty"],f);const h=T(n,["responseLogprobs"]);h!=null&&C(e,["responseLogprobs"],h);const p=T(n,["responseMimeType"]);p!=null&&C(e,["responseMimeType"],p);const v=T(n,["responseModalities"]);v!=null&&C(e,["responseModalities"],v);const S=T(n,["responseSchema"]);S!=null&&C(e,["responseSchema"],S);const y=T(n,["routingConfig"]);y!=null&&C(e,["routingConfig"],y);const _=T(n,["seed"]);_!=null&&C(e,["seed"],_);const w=T(n,["speechConfig"]);w!=null&&C(e,["speechConfig"],w);const A=T(n,["stopSequences"]);A!=null&&C(e,["stopSequences"],A);const E=T(n,["temperature"]);E!=null&&C(e,["temperature"],E);const P=T(n,["thinkingConfig"]);P!=null&&C(e,["thinkingConfig"],P);const O=T(n,["topK"]);O!=null&&C(e,["topK"],O);const L=T(n,["topP"]);if(L!=null&&C(e,["topP"],L),T(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function AX(n,e){const t={},r=T(e,["model"]);return r!=null&&C(t,["_url","name"],ui(n,r)),t}function EX(n,e){const t={},r=T(e,["model"]);return r!=null&&C(t,["_url","name"],ui(n,r)),t}function TX(n){const e={};if(T(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=T(n,["enableWidget"]);return t!=null&&C(e,["enableWidget"],t),e}function MX(n){const e={};if(T(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(T(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=T(n,["timeRangeFilter"]);return t!=null&&C(e,["timeRangeFilter"],t),e}function CX(n){const e={},t=T(n,["aspectRatio"]);t!=null&&C(e,["aspectRatio"],t);const r=T(n,["imageSize"]);if(r!=null&&C(e,["imageSize"],r),T(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(T(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(T(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function PX(n){const e={},t=T(n,["aspectRatio"]);t!=null&&C(e,["aspectRatio"],t);const r=T(n,["imageSize"]);r!=null&&C(e,["imageSize"],r);const i=T(n,["personGeneration"]);i!=null&&C(e,["personGeneration"],i);const o=T(n,["outputMimeType"]);o!=null&&C(e,["imageOutputOptions","mimeType"],o);const a=T(n,["outputCompressionQuality"]);return a!=null&&C(e,["imageOutputOptions","compressionQuality"],a),e}function IX(n){const e={},t=T(n,["bytesBase64Encoded"]);t!=null&&C(e,["imageBytes"],yh(t));const r=T(n,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function v8(n){const e={},t=T(n,["gcsUri"]);t!=null&&C(e,["gcsUri"],t);const r=T(n,["bytesBase64Encoded"]);r!=null&&C(e,["imageBytes"],yh(r));const i=T(n,["mimeType"]);return i!=null&&C(e,["mimeType"],i),e}function jS(n){const e={};if(T(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=T(n,["imageBytes"]);t!=null&&C(e,["bytesBase64Encoded"],yh(t));const r=T(n,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function kc(n){const e={},t=T(n,["gcsUri"]);t!=null&&C(e,["gcsUri"],t);const r=T(n,["imageBytes"]);r!=null&&C(e,["bytesBase64Encoded"],yh(r));const i=T(n,["mimeType"]);return i!=null&&C(e,["mimeType"],i),e}function RX(n,e,t){const r={},i=T(e,["pageSize"]);t!==void 0&&i!=null&&C(t,["_query","pageSize"],i);const o=T(e,["pageToken"]);t!==void 0&&o!=null&&C(t,["_query","pageToken"],o);const a=T(e,["filter"]);t!==void 0&&a!=null&&C(t,["_query","filter"],a);const s=T(e,["queryBase"]);return t!==void 0&&s!=null&&C(t,["_url","models_url"],c8(n,s)),r}function NX(n,e,t){const r={},i=T(e,["pageSize"]);t!==void 0&&i!=null&&C(t,["_query","pageSize"],i);const o=T(e,["pageToken"]);t!==void 0&&o!=null&&C(t,["_query","pageToken"],o);const a=T(e,["filter"]);t!==void 0&&a!=null&&C(t,["_query","filter"],a);const s=T(e,["queryBase"]);return t!==void 0&&s!=null&&C(t,["_url","models_url"],c8(n,s)),r}function LX(n,e){const t={},r=T(e,["config"]);return r!=null&&RX(n,r,t),t}function OX(n,e){const t={},r=T(e,["config"]);return r!=null&&NX(n,r,t),t}function DX(n){const e={},t=T(n,["sdkHttpResponse"]);t!=null&&C(e,["sdkHttpResponse"],t);const r=T(n,["nextPageToken"]);r!=null&&C(e,["nextPageToken"],r);const i=T(n,["_self"]);if(i!=null){let o=f8(i);Array.isArray(o)&&(o=o.map(a=>oC(a))),C(e,["models"],o)}return e}function kX(n){const e={},t=T(n,["sdkHttpResponse"]);t!=null&&C(e,["sdkHttpResponse"],t);const r=T(n,["nextPageToken"]);r!=null&&C(e,["nextPageToken"],r);const i=T(n,["_self"]);if(i!=null){let o=f8(i);Array.isArray(o)&&(o=o.map(a=>aC(a))),C(e,["models"],o)}return e}function FX(n){const e={},t=T(n,["maskMode"]);t!=null&&C(e,["maskMode"],t);const r=T(n,["segmentationClasses"]);r!=null&&C(e,["maskClasses"],r);const i=T(n,["maskDilation"]);return i!=null&&C(e,["dilation"],i),e}function oC(n){const e={},t=T(n,["name"]);t!=null&&C(e,["name"],t);const r=T(n,["displayName"]);r!=null&&C(e,["displayName"],r);const i=T(n,["description"]);i!=null&&C(e,["description"],i);const o=T(n,["version"]);o!=null&&C(e,["version"],o);const a=T(n,["_self"]);a!=null&&C(e,["tunedModelInfo"],QX(a));const s=T(n,["inputTokenLimit"]);s!=null&&C(e,["inputTokenLimit"],s);const l=T(n,["outputTokenLimit"]);l!=null&&C(e,["outputTokenLimit"],l);const u=T(n,["supportedGenerationMethods"]);u!=null&&C(e,["supportedActions"],u);const c=T(n,["temperature"]);c!=null&&C(e,["temperature"],c);const f=T(n,["maxTemperature"]);f!=null&&C(e,["maxTemperature"],f);const h=T(n,["topP"]);h!=null&&C(e,["topP"],h);const p=T(n,["topK"]);p!=null&&C(e,["topK"],p);const v=T(n,["thinking"]);return v!=null&&C(e,["thinking"],v),e}function aC(n){const e={},t=T(n,["name"]);t!=null&&C(e,["name"],t);const r=T(n,["displayName"]);r!=null&&C(e,["displayName"],r);const i=T(n,["description"]);i!=null&&C(e,["description"],i);const o=T(n,["versionId"]);o!=null&&C(e,["version"],o);const a=T(n,["deployedModels"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(h=>K$(h))),C(e,["endpoints"],f)}const s=T(n,["labels"]);s!=null&&C(e,["labels"],s);const l=T(n,["_self"]);l!=null&&C(e,["tunedModelInfo"],eY(l));const u=T(n,["defaultCheckpointId"]);u!=null&&C(e,["defaultCheckpointId"],u);const c=T(n,["checkpoints"]);if(c!=null){let f=c;Array.isArray(f)&&(f=f.map(h=>h)),C(e,["checkpoints"],f)}return e}function UX(n){const e={},t=T(n,["mediaResolution"]);t!=null&&C(e,["mediaResolution"],t);const r=T(n,["codeExecutionResult"]);r!=null&&C(e,["codeExecutionResult"],r);const i=T(n,["executableCode"]);i!=null&&C(e,["executableCode"],i);const o=T(n,["fileData"]);o!=null&&C(e,["fileData"],J$(o));const a=T(n,["functionCall"]);a!=null&&C(e,["functionCall"],Z$(a));const s=T(n,["functionResponse"]);s!=null&&C(e,["functionResponse"],s);const l=T(n,["inlineData"]);l!=null&&C(e,["inlineData"],b$(l));const u=T(n,["text"]);u!=null&&C(e,["text"],u);const c=T(n,["thought"]);c!=null&&C(e,["thought"],c);const f=T(n,["thoughtSignature"]);f!=null&&C(e,["thoughtSignature"],f);const h=T(n,["videoMetadata"]);return h!=null&&C(e,["videoMetadata"],h),e}function BX(n){const e={},t=T(n,["productImage"]);return t!=null&&C(e,["image"],kc(t)),e}function zX(n,e){const t={},r=T(n,["numberOfImages"]);e!==void 0&&r!=null&&C(e,["parameters","sampleCount"],r);const i=T(n,["baseSteps"]);e!==void 0&&i!=null&&C(e,["parameters","baseSteps"],i);const o=T(n,["outputGcsUri"]);e!==void 0&&o!=null&&C(e,["parameters","storageUri"],o);const a=T(n,["seed"]);e!==void 0&&a!=null&&C(e,["parameters","seed"],a);const s=T(n,["safetyFilterLevel"]);e!==void 0&&s!=null&&C(e,["parameters","safetySetting"],s);const l=T(n,["personGeneration"]);e!==void 0&&l!=null&&C(e,["parameters","personGeneration"],l);const u=T(n,["addWatermark"]);e!==void 0&&u!=null&&C(e,["parameters","addWatermark"],u);const c=T(n,["outputMimeType"]);e!==void 0&&c!=null&&C(e,["parameters","outputOptions","mimeType"],c);const f=T(n,["outputCompressionQuality"]);e!==void 0&&f!=null&&C(e,["parameters","outputOptions","compressionQuality"],f);const h=T(n,["enhancePrompt"]);e!==void 0&&h!=null&&C(e,["parameters","enhancePrompt"],h);const p=T(n,["labels"]);return e!==void 0&&p!=null&&C(e,["labels"],p),t}function HX(n,e){const t={},r=T(e,["model"]);r!=null&&C(t,["_url","model"],ui(n,r));const i=T(e,["source"]);i!=null&&GX(i,t);const o=T(e,["config"]);return o!=null&&zX(o,t),t}function VX(n){const e={},t=T(n,["predictions"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>WS(i))),C(e,["generatedImages"],r)}return e}function GX(n,e){const t={},r=T(n,["prompt"]);e!==void 0&&r!=null&&C(e,["instances[0]","prompt"],r);const i=T(n,["personImage"]);e!==void 0&&i!=null&&C(e,["instances[0]","personImage","image"],kc(i));const o=T(n,["productImages"]);if(e!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(s=>BX(s))),C(e,["instances[0]","productImages"],a)}return t}function qX(n){const e={},t=T(n,["referenceImage"]);t!=null&&C(e,["referenceImage"],kc(t));const r=T(n,["referenceId"]);r!=null&&C(e,["referenceId"],r);const i=T(n,["referenceType"]);i!=null&&C(e,["referenceType"],i);const o=T(n,["maskImageConfig"]);o!=null&&C(e,["maskImageConfig"],FX(o));const a=T(n,["controlImageConfig"]);a!=null&&C(e,["controlImageConfig"],I$(a));const s=T(n,["styleImageConfig"]);s!=null&&C(e,["styleImageConfig"],s);const l=T(n,["subjectImageConfig"]);return l!=null&&C(e,["subjectImageConfig"],l),e}function y8(n){const e={},t=T(n,["safetyAttributes","categories"]);t!=null&&C(e,["categories"],t);const r=T(n,["safetyAttributes","scores"]);r!=null&&C(e,["scores"],r);const i=T(n,["contentType"]);return i!=null&&C(e,["contentType"],i),e}function x8(n){const e={},t=T(n,["safetyAttributes","categories"]);t!=null&&C(e,["categories"],t);const r=T(n,["safetyAttributes","scores"]);r!=null&&C(e,["scores"],r);const i=T(n,["contentType"]);return i!=null&&C(e,["contentType"],i),e}function WX(n){const e={},t=T(n,["category"]);if(t!=null&&C(e,["category"],t),T(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=T(n,["threshold"]);return r!=null&&C(e,["threshold"],r),e}function jX(n){const e={},t=T(n,["image"]);return t!=null&&C(e,["image"],kc(t)),e}function $X(n,e){const t={},r=T(n,["mode"]);e!==void 0&&r!=null&&C(e,["parameters","mode"],r);const i=T(n,["maxPredictions"]);e!==void 0&&i!=null&&C(e,["parameters","maxPredictions"],i);const o=T(n,["confidenceThreshold"]);e!==void 0&&o!=null&&C(e,["parameters","confidenceThreshold"],o);const a=T(n,["maskDilation"]);e!==void 0&&a!=null&&C(e,["parameters","maskDilation"],a);const s=T(n,["binaryColorThreshold"]);e!==void 0&&s!=null&&C(e,["parameters","binaryColorThreshold"],s);const l=T(n,["labels"]);return e!==void 0&&l!=null&&C(e,["labels"],l),t}function XX(n,e){const t={},r=T(e,["model"]);r!=null&&C(t,["_url","model"],ui(n,r));const i=T(e,["source"]);i!=null&&KX(i,t);const o=T(e,["config"]);return o!=null&&$X(o,t),t}function YX(n){const e={},t=T(n,["predictions"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>_X(i))),C(e,["generatedMasks"],r)}return e}function KX(n,e){const t={},r=T(n,["prompt"]);e!==void 0&&r!=null&&C(e,["instances[0]","prompt"],r);const i=T(n,["image"]);e!==void 0&&i!=null&&C(e,["instances[0]","image"],kc(i));const o=T(n,["scribbleImage"]);return e!==void 0&&o!=null&&C(e,["instances[0]","scribble"],jX(o)),t}function JX(n){const e={},t=T(n,["retrievalConfig"]);t!=null&&C(e,["retrievalConfig"],t);const r=T(n,["functionCallingConfig"]);return r!=null&&C(e,["functionCallingConfig"],Q$(r)),e}function ZX(n){const e={};if(T(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=T(n,["computerUse"]);t!=null&&C(e,["computerUse"],t);const r=T(n,["fileSearch"]);r!=null&&C(e,["fileSearch"],r);const i=T(n,["codeExecution"]);if(i!=null&&C(e,["codeExecution"],i),T(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=T(n,["functionDeclarations"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>f)),C(e,["functionDeclarations"],c)}const a=T(n,["googleMaps"]);a!=null&&C(e,["googleMaps"],TX(a));const s=T(n,["googleSearch"]);s!=null&&C(e,["googleSearch"],MX(s));const l=T(n,["googleSearchRetrieval"]);l!=null&&C(e,["googleSearchRetrieval"],l);const u=T(n,["urlContext"]);return u!=null&&C(e,["urlContext"],u),e}function _8(n){const e={},t=T(n,["retrieval"]);t!=null&&C(e,["retrieval"],t);const r=T(n,["computerUse"]);if(r!=null&&C(e,["computerUse"],r),T(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=T(n,["codeExecution"]);i!=null&&C(e,["codeExecution"],i);const o=T(n,["enterpriseWebSearch"]);o!=null&&C(e,["enterpriseWebSearch"],o);const a=T(n,["functionDeclarations"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(h=>eX(h))),C(e,["functionDeclarations"],f)}const s=T(n,["googleMaps"]);s!=null&&C(e,["googleMaps"],s);const l=T(n,["googleSearch"]);l!=null&&C(e,["googleSearch"],l);const u=T(n,["googleSearchRetrieval"]);u!=null&&C(e,["googleSearchRetrieval"],u);const c=T(n,["urlContext"]);return c!=null&&C(e,["urlContext"],c),e}function QX(n){const e={},t=T(n,["baseModel"]);t!=null&&C(e,["baseModel"],t);const r=T(n,["createTime"]);r!=null&&C(e,["createTime"],r);const i=T(n,["updateTime"]);return i!=null&&C(e,["updateTime"],i),e}function eY(n){const e={},t=T(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&C(e,["baseModel"],t);const r=T(n,["createTime"]);r!=null&&C(e,["createTime"],r);const i=T(n,["updateTime"]);return i!=null&&C(e,["updateTime"],i),e}function tY(n,e){const t={},r=T(n,["displayName"]);e!==void 0&&r!=null&&C(e,["displayName"],r);const i=T(n,["description"]);e!==void 0&&i!=null&&C(e,["description"],i);const o=T(n,["defaultCheckpointId"]);return e!==void 0&&o!=null&&C(e,["defaultCheckpointId"],o),t}function nY(n,e){const t={},r=T(n,["displayName"]);e!==void 0&&r!=null&&C(e,["displayName"],r);const i=T(n,["description"]);e!==void 0&&i!=null&&C(e,["description"],i);const o=T(n,["defaultCheckpointId"]);return e!==void 0&&o!=null&&C(e,["defaultCheckpointId"],o),t}function rY(n,e){const t={},r=T(e,["model"]);r!=null&&C(t,["_url","name"],ui(n,r));const i=T(e,["config"]);return i!=null&&tY(i,t),t}function iY(n,e){const t={},r=T(e,["model"]);r!=null&&C(t,["_url","model"],ui(n,r));const i=T(e,["config"]);return i!=null&&nY(i,t),t}function oY(n,e){const t={},r=T(n,["outputGcsUri"]);e!==void 0&&r!=null&&C(e,["parameters","storageUri"],r);const i=T(n,["safetyFilterLevel"]);e!==void 0&&i!=null&&C(e,["parameters","safetySetting"],i);const o=T(n,["personGeneration"]);e!==void 0&&o!=null&&C(e,["parameters","personGeneration"],o);const a=T(n,["includeRaiReason"]);e!==void 0&&a!=null&&C(e,["parameters","includeRaiReason"],a);const s=T(n,["outputMimeType"]);e!==void 0&&s!=null&&C(e,["parameters","outputOptions","mimeType"],s);const l=T(n,["outputCompressionQuality"]);e!==void 0&&l!=null&&C(e,["parameters","outputOptions","compressionQuality"],l);const u=T(n,["enhanceInputImage"]);e!==void 0&&u!=null&&C(e,["parameters","upscaleConfig","enhanceInputImage"],u);const c=T(n,["imagePreservationFactor"]);e!==void 0&&c!=null&&C(e,["parameters","upscaleConfig","imagePreservationFactor"],c);const f=T(n,["labels"]);e!==void 0&&f!=null&&C(e,["labels"],f);const h=T(n,["numberOfImages"]);e!==void 0&&h!=null&&C(e,["parameters","sampleCount"],h);const p=T(n,["mode"]);return e!==void 0&&p!=null&&C(e,["parameters","mode"],p),t}function aY(n,e){const t={},r=T(e,["model"]);r!=null&&C(t,["_url","model"],ui(n,r));const i=T(e,["image"]);i!=null&&C(t,["instances[0]","image"],kc(i));const o=T(e,["upscaleFactor"]);o!=null&&C(t,["parameters","upscaleConfig","upscaleFactor"],o);const a=T(e,["config"]);return a!=null&&oY(a,t),t}function sY(n){const e={},t=T(n,["sdkHttpResponse"]);t!=null&&C(e,["sdkHttpResponse"],t);const r=T(n,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>WS(o))),C(e,["generatedImages"],i)}return e}function lY(n){const e={},t=T(n,["uri"]);t!=null&&C(e,["uri"],t);const r=T(n,["encodedVideo"]);r!=null&&C(e,["videoBytes"],yh(r));const i=T(n,["encoding"]);return i!=null&&C(e,["mimeType"],i),e}function uY(n){const e={},t=T(n,["gcsUri"]);t!=null&&C(e,["uri"],t);const r=T(n,["bytesBase64Encoded"]);r!=null&&C(e,["videoBytes"],yh(r));const i=T(n,["mimeType"]);return i!=null&&C(e,["mimeType"],i),e}function cY(n){const e={},t=T(n,["image"]);t!=null&&C(e,["_self"],kc(t));const r=T(n,["maskMode"]);return r!=null&&C(e,["maskMode"],r),e}function fY(n){const e={},t=T(n,["image"]);t!=null&&C(e,["image"],jS(t));const r=T(n,["referenceType"]);return r!=null&&C(e,["referenceType"],r),e}function dY(n){const e={},t=T(n,["image"]);t!=null&&C(e,["image"],kc(t));const r=T(n,["referenceType"]);return r!=null&&C(e,["referenceType"],r),e}function S8(n){const e={},t=T(n,["uri"]);t!=null&&C(e,["uri"],t);const r=T(n,["videoBytes"]);r!=null&&C(e,["encodedVideo"],yh(r));const i=T(n,["mimeType"]);return i!=null&&C(e,["encoding"],i),e}function w8(n){const e={},t=T(n,["uri"]);t!=null&&C(e,["gcsUri"],t);const r=T(n,["videoBytes"]);r!=null&&C(e,["bytesBase64Encoded"],yh(r));const i=T(n,["mimeType"]);return i!=null&&C(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hY(n,e){const t={},r=T(n,["displayName"]);return e!==void 0&&r!=null&&C(e,["displayName"],r),t}function pY(n){const e={},t=T(n,["config"]);return t!=null&&hY(t,e),e}function mY(n,e){const t={},r=T(n,["force"]);return e!==void 0&&r!=null&&C(e,["_query","force"],r),t}function gY(n){const e={},t=T(n,["name"]);t!=null&&C(e,["_url","name"],t);const r=T(n,["config"]);return r!=null&&mY(r,e),e}function vY(n){const e={},t=T(n,["name"]);return t!=null&&C(e,["_url","name"],t),e}function yY(n,e){const t={},r=T(n,["customMetadata"]);if(e!==void 0&&r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),C(e,["customMetadata"],o)}const i=T(n,["chunkingConfig"]);return e!==void 0&&i!=null&&C(e,["chunkingConfig"],i),t}function xY(n){const e={},t=T(n,["name"]);t!=null&&C(e,["name"],t);const r=T(n,["metadata"]);r!=null&&C(e,["metadata"],r);const i=T(n,["done"]);i!=null&&C(e,["done"],i);const o=T(n,["error"]);o!=null&&C(e,["error"],o);const a=T(n,["response"]);return a!=null&&C(e,["response"],SY(a)),e}function _Y(n){const e={},t=T(n,["fileSearchStoreName"]);t!=null&&C(e,["_url","file_search_store_name"],t);const r=T(n,["fileName"]);r!=null&&C(e,["fileName"],r);const i=T(n,["config"]);return i!=null&&yY(i,e),e}function SY(n){const e={},t=T(n,["sdkHttpResponse"]);t!=null&&C(e,["sdkHttpResponse"],t);const r=T(n,["parent"]);r!=null&&C(e,["parent"],r);const i=T(n,["documentName"]);return i!=null&&C(e,["documentName"],i),e}function wY(n,e){const t={},r=T(n,["pageSize"]);e!==void 0&&r!=null&&C(e,["_query","pageSize"],r);const i=T(n,["pageToken"]);return e!==void 0&&i!=null&&C(e,["_query","pageToken"],i),t}function bY(n){const e={},t=T(n,["config"]);return t!=null&&wY(t,e),e}function AY(n){const e={},t=T(n,["sdkHttpResponse"]);t!=null&&C(e,["sdkHttpResponse"],t);const r=T(n,["nextPageToken"]);r!=null&&C(e,["nextPageToken"],r);const i=T(n,["fileSearchStores"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),C(e,["fileSearchStores"],o)}return e}function b8(n,e){const t={},r=T(n,["mimeType"]);e!==void 0&&r!=null&&C(e,["mimeType"],r);const i=T(n,["displayName"]);e!==void 0&&i!=null&&C(e,["displayName"],i);const o=T(n,["customMetadata"]);if(e!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>l)),C(e,["customMetadata"],s)}const a=T(n,["chunkingConfig"]);return e!==void 0&&a!=null&&C(e,["chunkingConfig"],a),t}function EY(n){const e={},t=T(n,["fileSearchStoreName"]);t!=null&&C(e,["_url","file_search_store_name"],t);const r=T(n,["config"]);return r!=null&&b8(r,e),e}function TY(n){const e={},t=T(n,["sdkHttpResponse"]);return t!=null&&C(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const MY="Content-Type",CY="X-Server-Timeout",PY="User-Agent",sC="x-goog-api-client",IY="1.35.0",RY=`google-genai-sdk/${IY}`,NY="v1beta1",LY="v1beta";class OY{constructor(e){var t,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:NY,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:LY,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,r){const i=[this.getRequestUrlInternal(t)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,t,r);if(e.queryParams)for(const[a,s]of Object.entries(e.queryParams))i.searchParams.append(a,String(s));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,t,i.toString(),e.abortSignal),this.unaryApiCall(i,o,e.httpMethod)}patchHttpOptions(e,t){const r=JSON.parse(JSON.stringify(e));for(const[i,o]of Object.entries(t))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,t,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,t,i.toString(),e.abortSignal),this.streamApiCall(i,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,r,i){if(t&&t.timeout||i){const o=new AbortController,a=o.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const s=setTimeout(()=>o.abort(),t.timeout);s&&typeof s.unref=="function"&&s.unref()}i&&i.addEventListener("abort",()=>{o.abort()}),e.signal=a}return t&&t.extraBody!==null&&DY(e,t.extraBody),e.headers=await this.getHeadersInternal(t,r),e}async unaryApiCall(e,t,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:r})).then(async i=>(await C3(i),new nC(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,t,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:r})).then(async i=>(await C3(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){return Rc(this,arguments,function*(){var r;const i=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let a="";const s="data:",l=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:u,value:c}=yield cr(i.read());if(u){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const f=o.decode(c,{stream:!0});try{const v=JSON.parse(f);if("error"in v){const S=JSON.parse(JSON.stringify(v.error)),y=S.status,_=S.code,w=`got status: ${y}. ${JSON.stringify(v)}`;if(_>=400&&_<600)throw new GS({message:w,status:_})}}catch(v){if(v.name==="ApiError")throw v}a+=f;let h=-1,p=0;for(;;){h=-1,p=0;for(const y of l){const _=a.indexOf(y);_!==-1&&(h===-1||_<h)&&(h=_,p=y.length)}if(h===-1)break;const v=a.substring(0,h);a=a.substring(h+p);const S=v.trim();if(S.startsWith(s)){const y=S.substring(s.length).trim();try{const _=new Response(y,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield cr(new nC(_))}catch(_){throw new Error(`exception parsing stream chunk ${y}. ${_}`)}}}}}finally{i.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},t=RY+" "+this.clientOptions.userAgentExtra;return e[PY]=t,e[sC]=t,e[MY]="application/json",e}async getHeadersInternal(e,t){const r=new Headers;if(e&&e.headers){for(const[i,o]of Object.entries(e.headers))r.append(i,o);e.timeout&&e.timeout>0&&r.append(CY,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,t),r}getFileName(e){var t;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(t=r.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),r}async uploadFile(e,t){var r;const i={};t!=null&&(i.mimeType=t.mimeType,i.name=t.name,i.displayName=t.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const o=this.clientOptions.uploader,a=await o.stat(e);i.sizeBytes=String(a.size);const s=(r=t==null?void 0:t.mimeType)!==null&&r!==void 0?r:a.type;if(s===void 0||s==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=s;const l={file:i},u=this.getFileName(e),c=yn("upload/v1beta/files",l._url),f=await this.fetchUploadUrl(c,i.sizeBytes,i.mimeType,u,l,t==null?void 0:t.httpOptions);return o.upload(e,f,this)}async uploadFileToFileSearchStore(e,t,r){var i;const o=this.clientOptions.uploader,a=await o.stat(t),s=String(a.size),l=(i=r==null?void 0:r.mimeType)!==null&&i!==void 0?i:a.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const u=`upload/v1beta/${e}:uploadToFileSearchStore`,c=this.getFileName(t),f={};r!=null&&b8(r,f);const h=await this.fetchUploadUrl(u,s,l,c,f,r==null?void 0:r.httpOptions);return o.uploadToFileSearchStore(t,h,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,r,i,o,a){var s;let l={};a?l=a:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};const u=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:l});if(!u||!(u!=null&&u.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const c=(s=u==null?void 0:u.headers)===null||s===void 0?void 0:s["x-goog-upload-url"];if(c===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return c}}async function C3(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let r;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await n.json():r={error:{message:await n.text(),code:n.status,status:n.statusText}};const i=JSON.stringify(r);throw t>=400&&t<600?new GS({message:i,status:t}):new Error(i)}}function DY(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const o=JSON.parse(n.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))t=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,a){const s=Object.assign({},o);for(const l in a)if(Object.prototype.hasOwnProperty.call(a,l)){const u=a[l],c=s[l];u&&typeof u=="object"&&!Array.isArray(u)&&c&&typeof c=="object"&&!Array.isArray(c)?s[l]=r(c,u):(c&&u&&typeof c!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof c}, New type: ${typeof u}. Overwriting.`),s[l]=u)}return s}const i=r(t,e);n.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kY="mcp_used/unknown";let FY=!1;function A8(n){for(const e of n)if(UY(e)||typeof e=="object"&&"inputSchema"in e)return!0;return FY}function E8(n){var e;const t=(e=n[sC])!==null&&e!==void 0?e:"";n[sC]=(t+` ${kY}`).trimStart()}function UY(n){return n!==null&&typeof n=="object"&&n instanceof vP}function BY(n){return Rc(this,arguments,function*(t,r=100){let i,o=0;for(;o<r;){const a=yield cr(t.listTools({cursor:i}));for(const s of a.tools)yield yield cr(s),o++;if(!a.nextCursor)break;i=a.nextCursor}})}class vP{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new vP(e,t)}async initialize(){var e,t,r,i;if(this.mcpTools.length>0)return;const o={},a=[];for(const c of this.mcpClients)try{for(var s=!0,l=(t=void 0,Nc(BY(c))),u;u=await l.next(),e=u.done,!e;s=!0){i=u.value,s=!1;const f=i;a.push(f);const h=f.name;if(o[h])throw new Error(`Duplicate function name ${h} found in MCP tools. Please ensure function names are unique.`);o[h]=c}}catch(f){t={error:f}}finally{try{!s&&!e&&(r=l.return)&&await r.call(l)}finally{if(t)throw t.error}}this.mcpTools=a,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),vW(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const a=await i.callTool({name:r.name,arguments:r.args},void 0,o);t.push({functionResponse:{name:r.name,response:a.isError?{error:a}:a}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function zY(n,e,t){const r=new uW;let i;t.data instanceof Blob?i=JSON.parse(await t.data.text()):i=JSON.parse(t.data),Object.assign(r,i),e(r)}class HY{constructor(e,t,r){this.apiClient=e,this.auth=t,this.webSocketFactory=r}async connect(e){var t,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),a=qY(this.apiClient.getDefaultHeaders()),s=this.apiClient.getApiKey(),l=`${i}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${s}`;let u=()=>{};const c=new Promise(A=>{u=A}),f=e.callbacks,h=function(){u({})},p=this.apiClient,v={onopen:h,onmessage:A=>{zY(p,f.onmessage,A)},onerror:(t=f==null?void 0:f.onerror)!==null&&t!==void 0?t:function(A){},onclose:(r=f==null?void 0:f.onclose)!==null&&r!==void 0?r:function(A){}},S=this.webSocketFactory.create(l,GY(a),v);S.connect(),await c;const w={setup:{model:ui(this.apiClient,e.model)}};return S.send(JSON.stringify(w)),new VY(S,this.apiClient)}}class VY{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=p$(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=h$(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Km.PLAY)}pause(){this.sendPlaybackControl(Km.PAUSE)}stop(){this.sendPlaybackControl(Km.STOP)}resetContext(){this.sendPlaybackControl(Km.RESET_CONTEXT)}close(){this.conn.close()}}function GY(n){const e={};return n.forEach((t,r)=>{e[r]=t}),e}function qY(n){const e=new Headers;for(const[t,r]of Object.entries(n))e.append(t,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const WY="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function jY(n,e,t){const r=new lW;let i;t.data instanceof Blob?i=await t.data.text():t.data instanceof ArrayBuffer?i=new TextDecoder().decode(t.data):i=t.data;const o=JSON.parse(i);if(n.isVertexAI()){const a=v$(o);Object.assign(r,a)}else Object.assign(r,o);e(r)}class $Y{constructor(e,t,r){this.apiClient=e,this.auth=t,this.webSocketFactory=r,this.music=new HY(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,r,i,o,a,s;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let c;const f=this.apiClient.getHeaders();e.config&&e.config.tools&&A8(e.config.tools)&&E8(f);const h=JY(f);if(this.apiClient.isVertexAI())c=`${l}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h,c);else{const F=this.apiClient.getApiKey();let U="BidiGenerateContent",k="key";F!=null&&F.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),U="BidiGenerateContentConstrained",k="access_token"),c=`${l}/ws/google.ai.generativelanguage.${u}.GenerativeService.${U}?${k}=${F}`}let p=()=>{};const v=new Promise(F=>{p=F}),S=e.callbacks,y=function(){var F;(F=S==null?void 0:S.onopen)===null||F===void 0||F.call(S),p({})},_=this.apiClient,w={onopen:y,onmessage:F=>{jY(_,S.onmessage,F)},onerror:(t=S==null?void 0:S.onerror)!==null&&t!==void 0?t:function(F){},onclose:(r=S==null?void 0:S.onclose)!==null&&r!==void 0?r:function(F){}},A=this.webSocketFactory.create(c,KY(h),w);A.connect(),await v;let E=ui(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&E.startsWith("publishers/")){const F=this.apiClient.getProject(),U=this.apiClient.getLocation();E=`projects/${F}/locations/${U}/`+E}let P={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[pg.AUDIO]}:e.config.responseModalities=[pg.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const O=(s=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&s!==void 0?s:[],L=[];for(const F of O)if(this.isCallableTool(F)){const U=F;L.push(await U.tool())}else L.push(F);L.length>0&&(e.config.tools=L);const D={model:E,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?P=d$(this.apiClient,D):P=f$(this.apiClient,D),delete P.config,A.send(JSON.stringify(P)),new YY(A,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const XY={turnComplete:!0};class YY{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let r=[];try{r=zu(t.turns),e.isVertexAI()||(r=r.map(i=>qS(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:r,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let r=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?r=t.functionResponses:r=[t.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(WY)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},XY),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:g$(e)}:t={realtimeInput:m$(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function KY(n){const e={};return n.forEach((t,r)=>{e[r]=t}),e}function JY(n){const e=new Headers;for(const[t,r]of Object.entries(n))e.append(t,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const P3=10;function I3(n){var e,t,r;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const a of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(lg(a)){i=!0;break}if(!i)return!0;const o=(r=n==null?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function lg(n){return"callTool"in n&&typeof n.callTool=="function"}function ZY(n){var e,t,r;return(r=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(i=>lg(i)))!==null&&r!==void 0?r:!1}function R3(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((r,i)=>{if(lg(r))return;const o=r;o.functionDeclarations&&o.functionDeclarations.length>0&&t.push(i)}),t}function N3(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QY extends dd{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var r,i,o,a,s;const l=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!ZY(t)||I3(t.config))return await this.generateContentInternal(l);const u=R3(t);if(u.length>0){const S=u.map(y=>`tools[${y}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${S}.`)}let c,f;const h=zu(l.contents),p=(o=(i=(r=l.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:P3;let v=0;for(;v<p&&(c=await this.generateContentInternal(l),!(!c.functionCalls||c.functionCalls.length===0));){const S=c.candidates[0].content,y=[];for(const _ of(s=(a=t.config)===null||a===void 0?void 0:a.tools)!==null&&s!==void 0?s:[])if(lg(_)){const A=await _.callTool(c.functionCalls);y.push(...A)}v++,f={role:"user",parts:y},l.contents=zu(l.contents),l.contents.push(S),l.contents.push(f),N3(l.config)&&(h.push(S),h.push(f))}return N3(l.config)&&(c.automaticFunctionCallingHistory=h),c},this.generateContentStream=async t=>{var r,i,o,a,s;if(this.maybeMoveToResponseJsonSchem(t),I3(t.config)){const f=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(f)}const l=R3(t);if(l.length>0){const f=l.map(h=>`tools[${h}]`).join(", ");throw new Error(`Incompatible tools found at ${f}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const u=(o=(i=(r=t==null?void 0:t.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,c=(s=(a=t==null?void 0:t.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||s===void 0?void 0:s.disable;if(u&&!c)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(r=>{var i;let o;const a=[];if(r!=null&&r.generatedImages)for(const l of r.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((i=l==null?void 0:l.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=l==null?void 0:l.safetyAttributes:a.push(l);let s;return o?s={generatedImages:a,positivePromptSafetyAttributes:o,sdkHttpResponse:r.sdkHttpResponse}:s={generatedImages:a,sdkHttpResponse:r.sdkHttpResponse},s}),this.list=async t=>{var r;const a={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((r=a.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new Xp(sd.PAGED_ITEM_MODELS,s=>this.listInternal(s),await this.listInternal(a),a)},this.editImage=async t=>{const r={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(r.referenceImages=t.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async t=>{let r={numberOfImages:1,mode:"upscale"};t.config&&(r=Object.assign(Object.assign({},r),t.config));const i={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async t=>{var r,i,o,a,s,l;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=t.video)===null||r===void 0)&&r.uri&&(!((i=t.video)===null||i===void 0)&&i.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((a=(o=t.source)===null||o===void 0?void 0:o.video)===null||a===void 0)&&a.uri&&(!((l=(s=t.source)===null||s===void 0?void 0:s.video)===null||l===void 0)&&l.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,r,i;const o=(t=e.config)===null||t===void 0?void 0:t.tools;if(!o)return e;const a=await Promise.all(o.map(async l=>lg(l)?await l.tool():l)),s={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(s.config.tools=a,e.config&&e.config.tools&&A8(e.config.tools)){const l=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let u=Object.assign({},l);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),E8(u),s.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:u})}return s}async initAfcToolsMap(e){var t,r,i;const o=new Map;for(const a of(r=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&r!==void 0?r:[])if(lg(a)){const s=a,l=await s.tool();for(const u of(i=l.functionDeclarations)!==null&&i!==void 0?i:[]){if(!u.name)throw new Error("Function declaration name is required.");if(o.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);o.set(u.name,s)}}return o}async processAfcStream(e){var t,r,i;const o=(i=(r=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:P3;let a=!1,s=0;const l=await this.initAfcToolsMap(e);return(function(u,c,f){return Rc(this,arguments,function*(){for(var h,p,v,S,y,_;s<o;){a&&(s++,a=!1);const P=yield cr(u.processParamsMaybeAddMcpUsage(f)),O=yield cr(u.generateContentStreamInternal(P)),L=[],D=[];try{for(var w=!0,A=(p=void 0,Nc(O)),E;E=yield cr(A.next()),h=E.done,!h;w=!0){S=E.value,w=!1;const F=S;if(yield yield cr(F),F.candidates&&(!((y=F.candidates[0])===null||y===void 0)&&y.content)){D.push(F.candidates[0].content);for(const U of(_=F.candidates[0].content.parts)!==null&&_!==void 0?_:[])if(s<o&&U.functionCall){if(!U.functionCall.name)throw new Error("Function call name was not returned by the model.");if(c.has(U.functionCall.name)){const k=yield cr(c.get(U.functionCall.name).callTool([U.functionCall]));L.push(...k)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${c.keys()}, mising tool: ${U.functionCall.name}`)}}}}catch(F){p={error:F}}finally{try{!w&&!h&&(v=A.return)&&(yield cr(v.call(A)))}finally{if(p)throw p.error}}if(L.length>0){a=!0;const F=new vv;F.candidates=[{content:{role:"user",parts:L}}],yield yield cr(F);const U=[];U.push(...D),U.push({role:"user",parts:L});const k=zu(f.contents).concat(U);f.contents=k}else break}})})(this,l,e)}async generateContentInternal(e){var t,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=E3(this.apiClient,e);return s=yn("{model}:generateContent",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const f=M3(c),h=new vv;return Object.assign(h,f),h})}else{const u=A3(this.apiClient,e);return s=yn("{model}:generateContent",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const f=T3(c),h=new vv;return Object.assign(h,f),h})}}async generateContentStreamInternal(e){var t,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=E3(this.apiClient,e);return s=yn("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.requestStream({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),a.then(function(f){return Rc(this,arguments,function*(){var h,p,v,S;try{for(var y=!0,_=Nc(f),w;w=yield cr(_.next()),h=w.done,!h;y=!0){S=w.value,y=!1;const A=S,E=M3(yield cr(A.json()));E.sdkHttpResponse={headers:A.headers};const P=new vv;Object.assign(P,E),yield yield cr(P)}}catch(A){p={error:A}}finally{try{!y&&!h&&(v=_.return)&&(yield cr(v.call(_)))}finally{if(p)throw p.error}}})})}else{const u=A3(this.apiClient,e);return s=yn("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.requestStream({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),a.then(function(f){return Rc(this,arguments,function*(){var h,p,v,S;try{for(var y=!0,_=Nc(f),w;w=yield cr(_.next()),h=w.done,!h;y=!0){S=w.value,y=!1;const A=S,E=T3(yield cr(A.json()));E.sdkHttpResponse={headers:A.headers};const P=new vv;Object.assign(P,E),yield yield cr(P)}}catch(A){p={error:A}}finally{try{!y&&!h&&(v=_.return)&&(yield cr(v.call(_)))}finally{if(p)throw p.error}}})})}}async embedContent(e){var t,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=$$(this.apiClient,e);return s=yn("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const f=Y$(c),h=new s3;return Object.assign(h,f),h})}else{const u=j$(this.apiClient,e);return s=yn("{model}:batchEmbedContents",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const f=X$(c),h=new s3;return Object.assign(h,f),h})}}async generateImagesInternal(e){var t,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=aX(this.apiClient,e);return s=yn("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const f=lX(c),h=new l3;return Object.assign(h,f),h})}else{const u=oX(this.apiClient,e);return s=yn("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const f=sX(c),h=new l3;return Object.assign(h,f),h})}}async editImageInternal(e){var t,r;let i,o="",a={};if(this.apiClient.isVertexAI()){const s=V$(this.apiClient,e);return o=yn("{model}:predict",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),i.then(l=>{const u=G$(l),c=new J9;return Object.assign(c,u),c})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,r;let i,o="",a={};if(this.apiClient.isVertexAI()){const s=aY(this.apiClient,e);return o=yn("{model}:predict",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),i.then(l=>{const u=sY(l),c=new Z9;return Object.assign(c,u),c})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,r;let i,o="",a={};if(this.apiClient.isVertexAI()){const s=HX(this.apiClient,e);return o=yn("{model}:predict",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=VX(l),c=new Q9;return Object.assign(c,u),c})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,r;let i,o="",a={};if(this.apiClient.isVertexAI()){const s=XX(this.apiClient,e);return o=yn("{model}:predict",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=YX(l),c=new eW;return Object.assign(c,u),c})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=EX(this.apiClient,e);return s=yn("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),a.then(c=>aC(c))}else{const u=AX(this.apiClient,e);return s=yn("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),a.then(c=>oC(c))}}async listInternal(e){var t,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=OX(this.apiClient,e);return s=yn("{models_url}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const f=kX(c),h=new u3;return Object.assign(h,f),h})}else{const u=LX(this.apiClient,e);return s=yn("{models_url}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const f=DX(c),h=new u3;return Object.assign(h,f),h})}}async update(e){var t,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=iY(this.apiClient,e);return s=yn("{model}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),a.then(c=>aC(c))}else{const u=rY(this.apiClient,e);return s=yn("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),a.then(c=>oC(c))}}async delete(e){var t,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=U$(this.apiClient,e);return s=yn("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const f=z$(c),h=new c3;return Object.assign(h,f),h})}else{const u=F$(this.apiClient,e);return s=yn("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const f=B$(c),h=new c3;return Object.assign(h,f),h})}}async countTokens(e){var t,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=O$(this.apiClient,e);return s=yn("{model}:countTokens",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const f=k$(c),h=new f3;return Object.assign(h,f),h})}else{const u=L$(this.apiClient,e);return s=yn("{model}:countTokens",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const f=D$(c),h=new f3;return Object.assign(h,f),h})}}async computeTokens(e){var t,r;let i,o="",a={};if(this.apiClient.isVertexAI()){const s=T$(this.apiClient,e);return o=yn("{model}:computeTokens",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),i.then(l=>{const u=M$(l),c=new tW;return Object.assign(c,u),c})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=pX(this.apiClient,e);return s=yn("{model}:predictLongRunning",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),a.then(c=>{const f=dX(c),h=new o_;return Object.assign(h,f),h})}else{const u=hX(this.apiClient,e);return s=yn("{model}:predictLongRunning",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),a.then(c=>{const f=fX(c),h=new o_;return Object.assign(h,f),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eK extends dd{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,r=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=t.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:i,config:{httpOptions:o}});return t._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:t.name,config:r});return t._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){const t=e.operation,r=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=t.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:i,config:{httpOptions:o}});return t._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:t.name,config:r});return t._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=W9(e);return s=yn("{operationName}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),a}else{const u=q9(e);return s=yn("{operationName}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),a}}async fetchPredictVideosOperationInternal(e){var t,r;let i,o="",a={};if(this.apiClient.isVertexAI()){const s=F9(e);return o=yn("{resourceName}:fetchPredictOperation",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tK(n){const e={},t=T(n,["data"]);if(t!=null&&C(e,["data"],t),T(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=T(n,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function nK(n){const e={},t=T(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>fK(o))),C(e,["parts"],i)}const r=T(n,["role"]);return r!=null&&C(e,["role"],r),e}function rK(n,e,t){const r={},i=T(e,["expireTime"]);t!==void 0&&i!=null&&C(t,["expireTime"],i);const o=T(e,["newSessionExpireTime"]);t!==void 0&&o!=null&&C(t,["newSessionExpireTime"],o);const a=T(e,["uses"]);t!==void 0&&a!=null&&C(t,["uses"],a);const s=T(e,["liveConnectConstraints"]);t!==void 0&&s!=null&&C(t,["bidiGenerateContentSetup"],cK(n,s));const l=T(e,["lockAdditionalFields"]);return t!==void 0&&l!=null&&C(t,["fieldMask"],l),r}function iK(n,e){const t={},r=T(e,["config"]);return r!=null&&C(t,["config"],rK(n,r,t)),t}function oK(n){const e={};if(T(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=T(n,["fileUri"]);t!=null&&C(e,["fileUri"],t);const r=T(n,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function aK(n){const e={},t=T(n,["id"]);t!=null&&C(e,["id"],t);const r=T(n,["args"]);r!=null&&C(e,["args"],r);const i=T(n,["name"]);if(i!=null&&C(e,["name"],i),T(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(T(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function sK(n){const e={};if(T(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=T(n,["enableWidget"]);return t!=null&&C(e,["enableWidget"],t),e}function lK(n){const e={};if(T(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(T(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=T(n,["timeRangeFilter"]);return t!=null&&C(e,["timeRangeFilter"],t),e}function uK(n,e){const t={},r=T(n,["generationConfig"]);e!==void 0&&r!=null&&C(e,["setup","generationConfig"],r);const i=T(n,["responseModalities"]);e!==void 0&&i!=null&&C(e,["setup","generationConfig","responseModalities"],i);const o=T(n,["temperature"]);e!==void 0&&o!=null&&C(e,["setup","generationConfig","temperature"],o);const a=T(n,["topP"]);e!==void 0&&a!=null&&C(e,["setup","generationConfig","topP"],a);const s=T(n,["topK"]);e!==void 0&&s!=null&&C(e,["setup","generationConfig","topK"],s);const l=T(n,["maxOutputTokens"]);e!==void 0&&l!=null&&C(e,["setup","generationConfig","maxOutputTokens"],l);const u=T(n,["mediaResolution"]);e!==void 0&&u!=null&&C(e,["setup","generationConfig","mediaResolution"],u);const c=T(n,["seed"]);e!==void 0&&c!=null&&C(e,["setup","generationConfig","seed"],c);const f=T(n,["speechConfig"]);e!==void 0&&f!=null&&C(e,["setup","generationConfig","speechConfig"],gP(f));const h=T(n,["thinkingConfig"]);e!==void 0&&h!=null&&C(e,["setup","generationConfig","thinkingConfig"],h);const p=T(n,["enableAffectiveDialog"]);e!==void 0&&p!=null&&C(e,["setup","generationConfig","enableAffectiveDialog"],p);const v=T(n,["systemInstruction"]);e!==void 0&&v!=null&&C(e,["setup","systemInstruction"],nK(Os(v)));const S=T(n,["tools"]);if(e!==void 0&&S!=null){let O=Gg(S);Array.isArray(O)&&(O=O.map(L=>hK(Vg(L)))),C(e,["setup","tools"],O)}const y=T(n,["sessionResumption"]);e!==void 0&&y!=null&&C(e,["setup","sessionResumption"],dK(y));const _=T(n,["inputAudioTranscription"]);e!==void 0&&_!=null&&C(e,["setup","inputAudioTranscription"],_);const w=T(n,["outputAudioTranscription"]);e!==void 0&&w!=null&&C(e,["setup","outputAudioTranscription"],w);const A=T(n,["realtimeInputConfig"]);e!==void 0&&A!=null&&C(e,["setup","realtimeInputConfig"],A);const E=T(n,["contextWindowCompression"]);e!==void 0&&E!=null&&C(e,["setup","contextWindowCompression"],E);const P=T(n,["proactivity"]);if(e!==void 0&&P!=null&&C(e,["setup","proactivity"],P),T(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function cK(n,e){const t={},r=T(e,["model"]);r!=null&&C(t,["setup","model"],ui(n,r));const i=T(e,["config"]);return i!=null&&C(t,["config"],uK(i,t)),t}function fK(n){const e={},t=T(n,["mediaResolution"]);t!=null&&C(e,["mediaResolution"],t);const r=T(n,["codeExecutionResult"]);r!=null&&C(e,["codeExecutionResult"],r);const i=T(n,["executableCode"]);i!=null&&C(e,["executableCode"],i);const o=T(n,["fileData"]);o!=null&&C(e,["fileData"],oK(o));const a=T(n,["functionCall"]);a!=null&&C(e,["functionCall"],aK(a));const s=T(n,["functionResponse"]);s!=null&&C(e,["functionResponse"],s);const l=T(n,["inlineData"]);l!=null&&C(e,["inlineData"],tK(l));const u=T(n,["text"]);u!=null&&C(e,["text"],u);const c=T(n,["thought"]);c!=null&&C(e,["thought"],c);const f=T(n,["thoughtSignature"]);f!=null&&C(e,["thoughtSignature"],f);const h=T(n,["videoMetadata"]);return h!=null&&C(e,["videoMetadata"],h),e}function dK(n){const e={},t=T(n,["handle"]);if(t!=null&&C(e,["handle"],t),T(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function hK(n){const e={};if(T(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=T(n,["computerUse"]);t!=null&&C(e,["computerUse"],t);const r=T(n,["fileSearch"]);r!=null&&C(e,["fileSearch"],r);const i=T(n,["codeExecution"]);if(i!=null&&C(e,["codeExecution"],i),T(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=T(n,["functionDeclarations"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>f)),C(e,["functionDeclarations"],c)}const a=T(n,["googleMaps"]);a!=null&&C(e,["googleMaps"],sK(a));const s=T(n,["googleSearch"]);s!=null&&C(e,["googleSearch"],lK(s));const l=T(n,["googleSearchRetrieval"]);l!=null&&C(e,["googleSearchRetrieval"],l);const u=T(n,["urlContext"]);return u!=null&&C(e,["urlContext"],u),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pK(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const r=n[t];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(o=>`${t}.${o}`);e.push(...i)}else e.push(t)}return e.join(",")}function mK(n,e){let t=null;const r=n.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const o=r.setup;typeof o=="object"&&o!==null?(n.bidiGenerateContentSetup=o,t=o):delete n.bidiGenerateContentSetup}else r!==void 0&&delete n.bidiGenerateContentSetup;const i=n.fieldMask;if(t){const o=pK(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?n.fieldMask=o:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let s=[];i.length>0&&(s=i.map(u=>a.includes(u)?`generationConfig.${u}`:u));const l=[];o&&l.push(o),s.length>0&&l.push(...s),l.length>0?n.fieldMask=l.join(","):delete n.fieldMask}else delete n.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?n.fieldMask=i.join(","):delete n.fieldMask;return n}class gK extends dd{constructor(e){super(),this.apiClient=e}async create(e){var t,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const s=iK(this.apiClient,e);o=yn("auth_tokens",s._url),a=s._query,delete s.config,delete s._url,delete s._query;const l=mK(s,e.config);return i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vK(n,e){const t={},r=T(n,["force"]);return e!==void 0&&r!=null&&C(e,["_query","force"],r),t}function yK(n){const e={},t=T(n,["name"]);t!=null&&C(e,["_url","name"],t);const r=T(n,["config"]);return r!=null&&vK(r,e),e}function xK(n){const e={},t=T(n,["name"]);return t!=null&&C(e,["_url","name"],t),e}function _K(n,e){const t={},r=T(n,["pageSize"]);e!==void 0&&r!=null&&C(e,["_query","pageSize"],r);const i=T(n,["pageToken"]);return e!==void 0&&i!=null&&C(e,["_query","pageToken"],i),t}function SK(n){const e={},t=T(n,["parent"]);t!=null&&C(e,["_url","parent"],t);const r=T(n,["config"]);return r!=null&&_K(r,e),e}function wK(n){const e={},t=T(n,["sdkHttpResponse"]);t!=null&&C(e,["sdkHttpResponse"],t);const r=T(n,["nextPageToken"]);r!=null&&C(e,["nextPageToken"],r);const i=T(n,["documents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),C(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bK extends dd{constructor(e){super(),this.apiClient=e,this.list=async t=>new Xp(sd.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:t.parent,config:r.config}),await this.listInternal(t),t)}async get(e){var t,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=xK(e);return o=yn("{name}",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var t,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=yK(e);i=yn("{name}",a._url),o=a._query,delete a._url,delete a._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var t,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=SK(e);return o=yn("{parent}/documents",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=wK(l),c=new nW;return Object.assign(c,u),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class AK extends dd{constructor(e,t=new bK(e)){super(),this.apiClient=e,this.documents=t,this.list=async(r={})=>new Xp(sd.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=pY(e);return o=yn("fileSearchStores",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async get(e){var t,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=vY(e);return o=yn("{name}",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var t,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=gY(e);i=yn("{name}",a._url),o=a._query,delete a._url,delete a._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var t,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=bY(e);return o=yn("fileSearchStores",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=AY(l),c=new rW;return Object.assign(c,u),c})}}async uploadToFileSearchStoreInternal(e){var t,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=EY(e);return o=yn("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=TY(l),c=new iW;return Object.assign(c,u),c})}}async importFile(e){var t,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=_Y(e);return o=yn("{file_search_store_name}:importFile",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=xY(l),c=new fP;return Object.assign(c,u),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let T8=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return T8=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^t()&15>>+r/4).toString(16))};const EK=()=>T8();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lC(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const uC=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vu extends Error{}class il extends Vu{constructor(e,t,r,i){super(`${il.makeMessage(e,t,r)}`),this.status=e,this.headers=i,this.error=t}static makeMessage(e,t,r){const i=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,t,r,i){if(!e||!i)return new $S({message:r,cause:uC(t)});const o=t;return e===400?new C8(e,o,r,i):e===401?new P8(e,o,r,i):e===403?new I8(e,o,r,i):e===404?new R8(e,o,r,i):e===409?new N8(e,o,r,i):e===422?new L8(e,o,r,i):e===429?new O8(e,o,r,i):e>=500?new D8(e,o,r,i):new il(e,o,r,i)}}class cC extends il{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class $S extends il{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class M8 extends $S{constructor({message:e}={}){super({message:e??"Request timed out."})}}class C8 extends il{}class P8 extends il{}class I8 extends il{}class R8 extends il{}class N8 extends il{}class L8 extends il{}class O8 extends il{}class D8 extends il{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const TK=/^[a-z][a-z0-9+.-]*:/i,MK=n=>TK.test(n);let fC=n=>(fC=Array.isArray,fC(n));const CK=fC;let PK=CK;const L3=PK;function IK(n){if(!n)return!0;for(const e in n)return!1;return!0}function RK(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const NK=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Vu(`${n} must be an integer`);if(e<0)throw new Vu(`${n} must be a positive integer`);return e},LK=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const OK=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Wm="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DK(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const kK=()=>{var n,e,t,r,i;const o=DK();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Wm,"X-Stainless-OS":D3(Deno.build.os),"X-Stainless-Arch":O3(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Wm,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Wm,"X-Stainless-OS":D3((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":O3((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(i=globalThis.process.version)!==null&&i!==void 0?i:"unknown"};const a=FK();return a?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Wm,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${a.browser}`,"X-Stainless-Runtime-Version":a.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Wm,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function FK(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const r=t.exec(navigator.userAgent);if(r){const i=r[1]||0,o=r[2]||0,a=r[3]||0;return{browser:e,version:`${i}.${o}.${a}`}}}return null}const O3=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",D3=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let O1;const UK=()=>O1??(O1=kK());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function BK(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function k8(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function zK(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return k8({start(){},async pull(t){const{done:r,value:i}=await e.next();r?t.close():t.enqueue(i)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function F8(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function HK(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const r=n.getReader(),i=r.cancel();r.releaseLock(),await i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const VK=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const U8=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Ub(n,e,t){return U8(),new File(n,e??"unknown_file",t)}function GK(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const qK=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const B8=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",WK=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&B8(n),jK=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function $K(n,e,t){if(U8(),n=await n,WK(n))return n instanceof File?n:Ub([await n.arrayBuffer()],n.name);if(jK(n)){const i=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),Ub(await dC(i),e,t)}const r=await dC(n);if(e||(e=GK(n)),!(t!=null&&t.type)){const i=r.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof i=="string"&&(t=Object.assign(Object.assign({},t),{type:i}))}return Ub(r,e,t)}async function dC(n){var e,t,r,i,o;let a=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)a.push(n);else if(B8(n))a.push(n instanceof Blob?n:await n.arrayBuffer());else if(qK(n))try{for(var s=!0,l=Nc(n),u;u=await l.next(),e=u.done,!e;s=!0){i=u.value,s=!1;const c=i;a.push(...await dC(c))}}catch(c){t={error:c}}finally{try{!s&&!e&&(r=l.return)&&await r.call(l)}finally{if(t)throw t.error}}else{const c=(o=n==null?void 0:n.constructor)===null||o===void 0?void 0:o.name;throw new Error(`Unexpected data type: ${typeof n}${c?`; constructor: ${c}`:""}${XK(n)}`)}return a}function XK(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class z8{constructor(e){this._client=e}}z8._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function H8(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const k3=Object.freeze(Object.create(null)),YK=(n=H8)=>(function(t,...r){if(t.length===1)return t[0];let i=!1;const o=[],a=t.reduce((c,f,h)=>{var p,v,S;/[?#]/.test(f)&&(i=!0);const y=r[h];let _=(i?encodeURIComponent:n)(""+y);return h!==r.length&&(y==null||typeof y=="object"&&y.toString===((S=Object.getPrototypeOf((v=Object.getPrototypeOf((p=y.hasOwnProperty)!==null&&p!==void 0?p:k3))!==null&&v!==void 0?v:k3))===null||S===void 0?void 0:S.toString))&&(_=y+"",o.push({start:c.length+f.length,length:_.length,error:`Value of type ${Object.prototype.toString.call(y).slice(8,-1)} is not a valid path parameter`})),c+f+(h===r.length?"":_)},""),s=a.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let u;for(;(u=l.exec(s))!==null;)o.push({start:u.index,length:u[0].length,error:`Value "${u[0]}" can't be safely passed as a path parameter`});if(o.sort((c,f)=>c.start-f.start),o.length>0){let c=0;const f=o.reduce((h,p)=>{const v=" ".repeat(p.start-c),S="^".repeat(p.length);return c=p.start+p.length,h+v+S},"");throw new Vu(`Path parameters result in path with invalid segments:
${o.map(h=>h.error).join(`
`)}
${a}
${f}`)}return a}),D1=YK(H8);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class V8 extends z8{create(e,t){var r;const{api_version:i=this._client.apiVersion}=e,o=s_(e,["api_version"]);if("model"in o&&"agent_config"in o)throw new Vu("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new Vu("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(D1`/${i}/interactions`,Object.assign(Object.assign({body:o},t),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,t={},r){const{api_version:i=this._client.apiVersion}=t??{};return this._client.delete(D1`/${i}/interactions/${e}`,r)}cancel(e,t={},r){const{api_version:i=this._client.apiVersion}=t??{};return this._client.post(D1`/${i}/interactions/${e}/cancel`,r)}get(e,t={},r){var i;const o=t??{},{api_version:a=this._client.apiVersion}=o,s=s_(o,["api_version"]);return this._client.get(D1`/${a}/interactions/${e}`,Object.assign(Object.assign({query:s},r),{stream:(i=t==null?void 0:t.stream)!==null&&i!==void 0?i:!1}))}}V8._key=Object.freeze(["interactions"]);class G8 extends V8{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KK(n){let e=0;for(const i of n)e+=i.length;const t=new Uint8Array(e);let r=0;for(const i of n)t.set(i,r),r+=i.length;return t}let k1;function yP(n){let e;return(k1??(e=new globalThis.TextEncoder,k1=e.encode.bind(e)))(n)}let F1;function F3(n){let e;return(F1??(e=new globalThis.TextDecoder,F1=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class XS{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?yP(e):e;this.buffer=KK([this.buffer,t]);const r=[];let i;for(;(i=JK(this.buffer,this.carriageReturnIndex))!=null;){if(i.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=i.index;continue}if(this.carriageReturnIndex!=null&&(i.index!==this.carriageReturnIndex+1||i.carriage)){r.push(F3(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const o=this.carriageReturnIndex!==null?i.preceding-1:i.preceding,a=F3(this.buffer.subarray(0,o));r.push(a),this.buffer=this.buffer.subarray(i.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}XS.NEWLINE_CHARS=new Set([`
`,"\r"]);XS.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function JK(n,e){for(let i=e??0;i<n.length;i++){if(n[i]===10)return{preceding:i,index:i+1,carriage:!1};if(n[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function ZK(n){for(let r=0;r<n.length-1;r++){if(n[r]===10&&n[r+1]===10||n[r]===13&&n[r+1]===13)return r+2;if(n[r]===13&&n[r+1]===10&&r+3<n.length&&n[r+2]===13&&n[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const l_={off:0,error:200,warn:300,info:400,debug:500},U3=(n,e,t)=>{if(n){if(RK(l_,n))return n;Js(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(l_))}`)}};function Xv(){}function U1(n,e,t){return!e||l_[n]>l_[t]?Xv:e[n].bind(e)}const QK={error:Xv,warn:Xv,info:Xv,debug:Xv};let B3=new WeakMap;function Js(n){var e;const t=n.logger,r=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return QK;const i=B3.get(t);if(i&&i[0]===r)return i[1];const o={error:U1("error",t,r),warn:U1("warn",t,r),info:U1("info",t,r),debug:U1("debug",t,r)};return B3.set(t,[r,o]),o}const op=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jm{constructor(e,t,r){this.iterator=e,this.controller=t,this.client=r}static fromSSEResponse(e,t,r){let i=!1;const o=r?Js(r):console;function a(){return Rc(this,arguments,function*(){var l,u,c,f;if(i)throw new Vu("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let h=!1;try{try{for(var p=!0,v=Nc(eJ(e,t)),S;S=yield cr(v.next()),l=S.done,!l;p=!0){f=S.value,p=!1;const y=f;if(!h)if(y.data.startsWith("[DONE]")){h=!0;continue}else try{yield yield cr(JSON.parse(y.data))}catch(_){throw o.error("Could not parse message into JSON:",y.data),o.error("From chunk:",y.raw),_}}}catch(y){u={error:y}}finally{try{!p&&!l&&(c=v.return)&&(yield cr(c.call(v)))}finally{if(u)throw u.error}}h=!0}catch(y){if(lC(y))return yield cr(void 0);throw y}finally{h||t.abort()}})}return new Jm(a,t,r)}static fromReadableStream(e,t,r){let i=!1;function o(){return Rc(this,arguments,function*(){var l,u,c,f;const h=new XS,p=F8(e);try{for(var v=!0,S=Nc(p),y;y=yield cr(S.next()),l=y.done,!l;v=!0){f=y.value,v=!1;const _=f;for(const w of h.decode(_))yield yield cr(w)}}catch(_){u={error:_}}finally{try{!v&&!l&&(c=S.return)&&(yield cr(c.call(S)))}finally{if(u)throw u.error}}for(const _ of h.flush())yield yield cr(_)})}function a(){return Rc(this,arguments,function*(){var l,u,c,f;if(i)throw new Vu("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let h=!1;try{try{for(var p=!0,v=Nc(o()),S;S=yield cr(v.next()),l=S.done,!l;p=!0){f=S.value,p=!1;const y=f;h||y&&(yield yield cr(JSON.parse(y)))}}catch(y){u={error:y}}finally{try{!p&&!l&&(c=v.return)&&(yield cr(c.call(v)))}finally{if(u)throw u.error}}h=!0}catch(y){if(lC(y))return yield cr(void 0);throw y}finally{h||t.abort()}})}return new Jm(a,t,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],r=this.iterator(),i=o=>({next:()=>{if(o.length===0){const a=r.next();e.push(a),t.push(a)}return o.shift()}});return[new Jm(()=>i(e),this.controller,this.client),new Jm(()=>i(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return k8({async start(){t=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:o}=await t.next();if(o)return r.close();const a=yP(JSON.stringify(i)+`
`);r.enqueue(a)}catch(i){r.error(i)}},async cancel(){var r;await((r=t.return)===null||r===void 0?void 0:r.call(t))}})}}function eJ(n,e){return Rc(this,arguments,function*(){var r,i,o,a;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Vu("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Vu("Attempted to iterate over a response with no body");const s=new nJ,l=new XS,u=F8(n.body);try{for(var c=!0,f=Nc(tJ(u)),h;h=yield cr(f.next()),r=h.done,!r;c=!0){a=h.value,c=!1;const p=a;for(const v of l.decode(p)){const S=s.decode(v);S&&(yield yield cr(S))}}}catch(p){i={error:p}}finally{try{!c&&!r&&(o=f.return)&&(yield cr(o.call(f)))}finally{if(i)throw i.error}}for(const p of l.flush()){const v=s.decode(p);v&&(yield yield cr(v))}})}function tJ(n){return Rc(this,arguments,function*(){var t,r,i,o;let a=new Uint8Array;try{for(var s=!0,l=Nc(n),u;u=yield cr(l.next()),t=u.done,!t;s=!0){o=u.value,s=!1;const c=o;if(c==null)continue;const f=c instanceof ArrayBuffer?new Uint8Array(c):typeof c=="string"?yP(c):c;let h=new Uint8Array(a.length+f.length);h.set(a),h.set(f,a.length),a=h;let p;for(;(p=ZK(a))!==-1;)yield yield cr(a.slice(0,p)),a=a.slice(p)}}catch(c){r={error:c}}finally{try{!s&&!t&&(i=l.return)&&(yield cr(i.call(l)))}finally{if(r)throw r.error}}a.length>0&&(yield yield cr(a))})}class nJ{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,r,i]=rJ(e,":");return i.startsWith(" ")&&(i=i.substring(1)),t==="event"?this.event=i:t==="data"&&this.data.push(i),null}}function rJ(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function iJ(n,e){const{response:t,requestLogID:r,retryOfRequestLogID:i,startTime:o}=e,a=await(async()=>{var s;if(e.options.stream)return Js(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):Jm.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const l=t.headers.get("content-type"),u=(s=l==null?void 0:l.split(";")[0])===null||s===void 0?void 0:s.trim();return(u==null?void 0:u.includes("application/json"))||(u==null?void 0:u.endsWith("+json"))?await t.json():await t.text()})();return Js(n).debug(`[${r}] response parsed`,op({retryOfRequestLogID:i,url:t.url,status:t.status,body:a,durationMs:Date.now()-o})),a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xP extends Promise{constructor(e,t,r=iJ){super(i=>{i(null)}),this.responsePromise=t,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new xP(this.client,this.responsePromise,async(t,r)=>e(await this.parseResponse(t,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const q8=Symbol("brand.privateNullableHeaders");function*oJ(n){if(!n)return;if(q8 in n){const{values:r,nulls:i}=n;yield*r.entries();for(const o of i)yield[o,null];return}let e=!1,t;n instanceof Headers?t=n.entries():L3(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let r of t){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const o=L3(r[1])?r[1]:[r[1]];let a=!1;for(const s of o)s!==void 0&&(e&&!a&&(a=!0,yield[i,null]),yield[i,s])}}const yv=n=>{const e=new Headers,t=new Set;for(const r of n){const i=new Set;for(const[o,a]of oJ(r)){const s=o.toLowerCase();i.has(s)||(e.delete(o),i.add(s)),a===null?(e.delete(o),t.add(s)):(e.append(o,a),t.delete(s))}}return{[q8]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Bb=n=>{var e,t,r,i,o,a;if(typeof globalThis.process<"u")return(r=(t=(e=R9)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(a=(o=(i=globalThis.Deno.env)===null||i===void 0?void 0:i.get)===null||o===void 0?void 0:o.call(i,n))===null||a===void 0?void 0:a.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var W8;class YS{constructor(e){var t,r,i,o,a,s,l,{baseURL:u=Bb("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:c=(t=Bb("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:f="v1beta"}=e,h=s_(e,["baseURL","apiKey","apiVersion"]);const p=Object.assign(Object.assign({apiKey:c,apiVersion:f},h),{baseURL:u||"https://generativelanguage.googleapis.com"});this.baseURL=p.baseURL,this.timeout=(r=p.timeout)!==null&&r!==void 0?r:YS.DEFAULT_TIMEOUT,this.logger=(i=p.logger)!==null&&i!==void 0?i:console;const v="warn";this.logLevel=v,this.logLevel=(a=(o=U3(p.logLevel,"ClientOptions.logLevel",this))!==null&&o!==void 0?o:U3(Bb("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&a!==void 0?a:v,this.fetchOptions=p.fetchOptions,this.maxRetries=(s=p.maxRetries)!==null&&s!==void 0?s:2,this.fetch=(l=p.fetch)!==null&&l!==void 0?l:BK(),this.encoder=VK,this._options=p,this.apiKey=c,this.apiVersion=f,this.clientAdapter=p.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=yv([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return yv([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return yv([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,r])=>typeof r<"u").map(([t,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(t)}=`;throw new Vu(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Wm}`}defaultIdempotencyKey(){return`stainless-node-retry-${EK()}`}makeStatusError(e,t,r,i){return il.generate(e,t,r,i)}buildURL(e,t,r){const i=!this.baseURLOverridden()&&r||this.baseURL,o=MK(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),a=this.defaultQuery();return IK(a)||(t=Object.assign(Object.assign({},a),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(o.search=this.stringifyQuery(t)),o.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:r}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,r){return this.request(Promise.resolve(r).then(i=>Object.assign({method:e,path:t},i)))}request(e,t=null){return new xP(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,r){var i,o,a;const s=await e,l=(i=s.maxRetries)!==null&&i!==void 0?i:this.maxRetries;t==null&&(t=l),await this.prepareOptions(s);const{req:u,url:c,timeout:f}=await this.buildRequest(s,{retryCount:l-t});await this.prepareRequest(u,{url:c,options:s});const h="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),p=r===void 0?"":`, retryOf: ${r}`,v=Date.now();if(Js(this).debug(`[${h}] sending request`,op({retryOfRequestLogID:r,method:s.method,url:c,options:s,headers:u.headers})),!((o=s.signal)===null||o===void 0)&&o.aborted)throw new cC;const S=new AbortController,y=await this.fetchWithTimeout(c,u,f,S).catch(uC),_=Date.now();if(y instanceof globalThis.Error){const A=`retrying, ${t} attempts remaining`;if(!((a=s.signal)===null||a===void 0)&&a.aborted)throw new cC;const E=lC(y)||/timed? ?out/i.test(String(y)+("cause"in y?String(y.cause):""));if(t)return Js(this).info(`[${h}] connection ${E?"timed out":"failed"} - ${A}`),Js(this).debug(`[${h}] connection ${E?"timed out":"failed"} (${A})`,op({retryOfRequestLogID:r,url:c,durationMs:_-v,message:y.message})),this.retryRequest(s,t,r??h);throw Js(this).info(`[${h}] connection ${E?"timed out":"failed"} - error; no more retries left`),Js(this).debug(`[${h}] connection ${E?"timed out":"failed"} (error; no more retries left)`,op({retryOfRequestLogID:r,url:c,durationMs:_-v,message:y.message})),E?new M8:new $S({cause:y})}const w=`[${h}${p}] ${u.method} ${c} ${y.ok?"succeeded":"failed"} with status ${y.status} in ${_-v}ms`;if(!y.ok){const A=await this.shouldRetry(y);if(t&&A){const F=`retrying, ${t} attempts remaining`;return await HK(y.body),Js(this).info(`${w} - ${F}`),Js(this).debug(`[${h}] response error (${F})`,op({retryOfRequestLogID:r,url:y.url,status:y.status,headers:y.headers,durationMs:_-v})),this.retryRequest(s,t,r??h,y.headers)}const E=A?"error; no more retries left":"error; not retryable";Js(this).info(`${w} - ${E}`);const P=await y.text().catch(F=>uC(F).message),O=LK(P),L=O?void 0:P;throw Js(this).debug(`[${h}] response error (${E})`,op({retryOfRequestLogID:r,url:y.url,status:y.status,headers:y.headers,message:L,durationMs:Date.now()-v})),this.makeStatusError(y.status,O,L,y.headers)}return Js(this).info(w),Js(this).debug(`[${h}] response start`,op({retryOfRequestLogID:r,url:y.url,status:y.status,headers:y.headers,durationMs:_-v})),{response:y,options:s,controller:S,requestLogID:h,retryOfRequestLogID:r,startTime:v}}async fetchWithTimeout(e,t,r,i){const o=t||{},{signal:a,method:s}=o,l=s_(o,["signal","method"]);a&&a.addEventListener("abort",()=>i.abort());const u=setTimeout(()=>i.abort(),r),c=globalThis.ReadableStream&&l.body instanceof globalThis.ReadableStream||typeof l.body=="object"&&l.body!==null&&Symbol.asyncIterator in l.body,f=Object.assign(Object.assign(Object.assign({signal:i.signal},c?{duplex:"half"}:{}),{method:"GET"}),l);s&&(f.method=s.toUpperCase());try{return await this.fetch.call(void 0,e,f)}finally{clearTimeout(u)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,r,i){var o;let a;const s=i==null?void 0:i.get("retry-after-ms");if(s){const u=parseFloat(s);Number.isNaN(u)||(a=u)}const l=i==null?void 0:i.get("retry-after");if(l&&!a){const u=parseFloat(l);Number.isNaN(u)?a=Date.parse(l)-Date.now():a=u*1e3}if(!(a&&0<=a&&a<60*1e3)){const u=(o=e.maxRetries)!==null&&o!==void 0?o:this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(t,u)}return await OK(a),this.makeRequest(e,t-1,r)}calculateDefaultRetryTimeoutMillis(e,t){const o=t-e,a=Math.min(.5*Math.pow(2,o),8),s=1-Math.random()*.25;return a*s*1e3}async buildRequest(e,{retryCount:t=0}={}){var r,i,o;const a=Object.assign({},e),{method:s,path:l,query:u,defaultBaseURL:c}=a,f=this.buildURL(l,u,c);"timeout"in a&&NK("timeout",a.timeout),a.timeout=(r=a.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:h,body:p}=this.buildBody({options:a}),v=await this.buildHeaders({options:e,method:s,bodyHeaders:h,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:s,headers:v},a.signal&&{signal:a.signal}),globalThis.ReadableStream&&p instanceof globalThis.ReadableStream&&{duplex:"half"}),p&&{body:p}),(i=this.fetchOptions)!==null&&i!==void 0?i:{}),(o=a.fetchOptions)!==null&&o!==void 0?o:{}),url:f,timeout:a.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:r,retryCount:i}){let o={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const a=await this.authHeaders(e);let s=yv([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),UK()),this._options.defaultHeaders,r,e.headers,a]);return this.validateHeaders(s),s.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=yv([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:zK(e)}:this.encoder({body:e,headers:r})}}YS.DEFAULT_TIMEOUT=6e4;class es extends YS{constructor(){super(...arguments),this.interactions=new G8(this)}}W8=es;es.GeminiNextGenAPIClient=W8;es.GeminiNextGenAPIClientError=Vu;es.APIError=il;es.APIConnectionError=$S;es.APIConnectionTimeoutError=M8;es.APIUserAbortError=cC;es.NotFoundError=R8;es.ConflictError=N8;es.RateLimitError=O8;es.BadRequestError=C8;es.AuthenticationError=P8;es.InternalServerError=D8;es.PermissionDeniedError=I8;es.UnprocessableEntityError=L8;es.toFile=$K;es.Interactions=G8;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aJ(n,e){const t={},r=T(n,["name"]);return r!=null&&C(t,["_url","name"],r),t}function sJ(n,e){const t={},r=T(n,["name"]);return r!=null&&C(t,["_url","name"],r),t}function lJ(n,e){const t={},r=T(n,["sdkHttpResponse"]);return r!=null&&C(t,["sdkHttpResponse"],r),t}function uJ(n,e){const t={},r=T(n,["sdkHttpResponse"]);return r!=null&&C(t,["sdkHttpResponse"],r),t}function cJ(n,e,t){const r={};if(T(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=T(n,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&C(e,["displayName"],i),T(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=T(n,["epochCount"]);e!==void 0&&o!=null&&C(e,["tuningTask","hyperparameters","epochCount"],o);const a=T(n,["learningRateMultiplier"]);if(a!=null&&C(r,["tuningTask","hyperparameters","learningRateMultiplier"],a),T(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(T(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(T(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const s=T(n,["batchSize"]);e!==void 0&&s!=null&&C(e,["tuningTask","hyperparameters","batchSize"],s);const l=T(n,["learningRate"]);if(e!==void 0&&l!=null&&C(e,["tuningTask","hyperparameters","learningRate"],l),T(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(T(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function fJ(n,e,t){const r={};let i=T(t,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const p=T(n,["validationDataset"]);e!==void 0&&p!=null&&C(e,["supervisedTuningSpec"],z3(p))}else if(i==="PREFERENCE_TUNING"){const p=T(n,["validationDataset"]);e!==void 0&&p!=null&&C(e,["preferenceOptimizationSpec"],z3(p))}const o=T(n,["tunedModelDisplayName"]);e!==void 0&&o!=null&&C(e,["tunedModelDisplayName"],o);const a=T(n,["description"]);e!==void 0&&a!=null&&C(e,["description"],a);let s=T(t,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const p=T(n,["epochCount"]);e!==void 0&&p!=null&&C(e,["supervisedTuningSpec","hyperParameters","epochCount"],p)}else if(s==="PREFERENCE_TUNING"){const p=T(n,["epochCount"]);e!==void 0&&p!=null&&C(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],p)}let l=T(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const p=T(n,["learningRateMultiplier"]);e!==void 0&&p!=null&&C(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],p)}else if(l==="PREFERENCE_TUNING"){const p=T(n,["learningRateMultiplier"]);e!==void 0&&p!=null&&C(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],p)}let u=T(t,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const p=T(n,["exportLastCheckpointOnly"]);e!==void 0&&p!=null&&C(e,["supervisedTuningSpec","exportLastCheckpointOnly"],p)}else if(u==="PREFERENCE_TUNING"){const p=T(n,["exportLastCheckpointOnly"]);e!==void 0&&p!=null&&C(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],p)}let c=T(t,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const p=T(n,["adapterSize"]);e!==void 0&&p!=null&&C(e,["supervisedTuningSpec","hyperParameters","adapterSize"],p)}else if(c==="PREFERENCE_TUNING"){const p=T(n,["adapterSize"]);e!==void 0&&p!=null&&C(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],p)}if(T(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(T(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const f=T(n,["labels"]);e!==void 0&&f!=null&&C(e,["labels"],f);const h=T(n,["beta"]);return e!==void 0&&h!=null&&C(e,["preferenceOptimizationSpec","hyperParameters","beta"],h),r}function dJ(n,e){const t={},r=T(n,["baseModel"]);r!=null&&C(t,["baseModel"],r);const i=T(n,["preTunedModel"]);i!=null&&C(t,["preTunedModel"],i);const o=T(n,["trainingDataset"]);o!=null&&bJ(o);const a=T(n,["config"]);return a!=null&&cJ(a,t),t}function hJ(n,e){const t={},r=T(n,["baseModel"]);r!=null&&C(t,["baseModel"],r);const i=T(n,["preTunedModel"]);i!=null&&C(t,["preTunedModel"],i);const o=T(n,["trainingDataset"]);o!=null&&AJ(o,t,e);const a=T(n,["config"]);return a!=null&&fJ(a,t,e),t}function pJ(n,e){const t={},r=T(n,["name"]);return r!=null&&C(t,["_url","name"],r),t}function mJ(n,e){const t={},r=T(n,["name"]);return r!=null&&C(t,["_url","name"],r),t}function gJ(n,e,t){const r={},i=T(n,["pageSize"]);e!==void 0&&i!=null&&C(e,["_query","pageSize"],i);const o=T(n,["pageToken"]);e!==void 0&&o!=null&&C(e,["_query","pageToken"],o);const a=T(n,["filter"]);return e!==void 0&&a!=null&&C(e,["_query","filter"],a),r}function vJ(n,e,t){const r={},i=T(n,["pageSize"]);e!==void 0&&i!=null&&C(e,["_query","pageSize"],i);const o=T(n,["pageToken"]);e!==void 0&&o!=null&&C(e,["_query","pageToken"],o);const a=T(n,["filter"]);return e!==void 0&&a!=null&&C(e,["_query","filter"],a),r}function yJ(n,e){const t={},r=T(n,["config"]);return r!=null&&gJ(r,t),t}function xJ(n,e){const t={},r=T(n,["config"]);return r!=null&&vJ(r,t),t}function _J(n,e){const t={},r=T(n,["sdkHttpResponse"]);r!=null&&C(t,["sdkHttpResponse"],r);const i=T(n,["nextPageToken"]);i!=null&&C(t,["nextPageToken"],i);const o=T(n,["tunedModels"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(s=>j8(s))),C(t,["tuningJobs"],a)}return t}function SJ(n,e){const t={},r=T(n,["sdkHttpResponse"]);r!=null&&C(t,["sdkHttpResponse"],r);const i=T(n,["nextPageToken"]);i!=null&&C(t,["nextPageToken"],i);const o=T(n,["tuningJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(s=>hC(s))),C(t,["tuningJobs"],a)}return t}function wJ(n,e){const t={},r=T(n,["name"]);r!=null&&C(t,["model"],r);const i=T(n,["name"]);return i!=null&&C(t,["endpoint"],i),t}function bJ(n,e){const t={};if(T(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(T(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=T(n,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),C(t,["examples","examples"],i)}return t}function AJ(n,e,t){const r={};let i=T(t,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const a=T(n,["gcsUri"]);e!==void 0&&a!=null&&C(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(i==="PREFERENCE_TUNING"){const a=T(n,["gcsUri"]);e!==void 0&&a!=null&&C(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}let o=T(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const a=T(n,["vertexDatasetResource"]);e!==void 0&&a!=null&&C(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(o==="PREFERENCE_TUNING"){const a=T(n,["vertexDatasetResource"]);e!==void 0&&a!=null&&C(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}if(T(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function j8(n,e){const t={},r=T(n,["sdkHttpResponse"]);r!=null&&C(t,["sdkHttpResponse"],r);const i=T(n,["name"]);i!=null&&C(t,["name"],i);const o=T(n,["state"]);o!=null&&C(t,["state"],l8(o));const a=T(n,["createTime"]);a!=null&&C(t,["createTime"],a);const s=T(n,["tuningTask","startTime"]);s!=null&&C(t,["startTime"],s);const l=T(n,["tuningTask","completeTime"]);l!=null&&C(t,["endTime"],l);const u=T(n,["updateTime"]);u!=null&&C(t,["updateTime"],u);const c=T(n,["description"]);c!=null&&C(t,["description"],c);const f=T(n,["baseModel"]);f!=null&&C(t,["baseModel"],f);const h=T(n,["_self"]);return h!=null&&C(t,["tunedModel"],wJ(h)),t}function hC(n,e){const t={},r=T(n,["sdkHttpResponse"]);r!=null&&C(t,["sdkHttpResponse"],r);const i=T(n,["name"]);i!=null&&C(t,["name"],i);const o=T(n,["state"]);o!=null&&C(t,["state"],l8(o));const a=T(n,["createTime"]);a!=null&&C(t,["createTime"],a);const s=T(n,["startTime"]);s!=null&&C(t,["startTime"],s);const l=T(n,["endTime"]);l!=null&&C(t,["endTime"],l);const u=T(n,["updateTime"]);u!=null&&C(t,["updateTime"],u);const c=T(n,["error"]);c!=null&&C(t,["error"],c);const f=T(n,["description"]);f!=null&&C(t,["description"],f);const h=T(n,["baseModel"]);h!=null&&C(t,["baseModel"],h);const p=T(n,["tunedModel"]);p!=null&&C(t,["tunedModel"],p);const v=T(n,["preTunedModel"]);v!=null&&C(t,["preTunedModel"],v);const S=T(n,["supervisedTuningSpec"]);S!=null&&C(t,["supervisedTuningSpec"],S);const y=T(n,["preferenceOptimizationSpec"]);y!=null&&C(t,["preferenceOptimizationSpec"],y);const _=T(n,["tuningDataStats"]);_!=null&&C(t,["tuningDataStats"],_);const w=T(n,["encryptionSpec"]);w!=null&&C(t,["encryptionSpec"],w);const A=T(n,["partnerModelTuningSpec"]);A!=null&&C(t,["partnerModelTuningSpec"],A);const E=T(n,["customBaseModel"]);E!=null&&C(t,["customBaseModel"],E);const P=T(n,["experiment"]);P!=null&&C(t,["experiment"],P);const O=T(n,["labels"]);O!=null&&C(t,["labels"],O);const L=T(n,["outputUri"]);L!=null&&C(t,["outputUri"],L);const D=T(n,["pipelineJob"]);D!=null&&C(t,["pipelineJob"],D);const F=T(n,["serviceAccount"]);F!=null&&C(t,["serviceAccount"],F);const U=T(n,["tunedModelDisplayName"]);U!=null&&C(t,["tunedModelDisplayName"],U);const k=T(n,["veoTuningSpec"]);return k!=null&&C(t,["veoTuningSpec"],k),t}function EJ(n,e){const t={},r=T(n,["sdkHttpResponse"]);r!=null&&C(t,["sdkHttpResponse"],r);const i=T(n,["name"]);i!=null&&C(t,["name"],i);const o=T(n,["metadata"]);o!=null&&C(t,["metadata"],o);const a=T(n,["done"]);a!=null&&C(t,["done"],a);const s=T(n,["error"]);return s!=null&&C(t,["error"],s),t}function z3(n,e){const t={},r=T(n,["gcsUri"]);r!=null&&C(t,["validationDatasetUri"],r);const i=T(n,["vertexDatasetResource"]);return i!=null&&C(t,["validationDatasetUri"],i),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TJ extends dd{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Xp(sd.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var r;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const i={tunedModelName:t.baseModel};!((r=t.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=t.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},t),{preTunedModel:i});return o.baseModel=void 0,await this.tuneInternal(o)}else{const i=Object.assign({},t);return await this.tuneInternal(i)}else{const i=Object.assign({},t),o=await this.tuneMldevInternal(i);let a="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?a=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(a=o.name.split("/operations/")[0]),{name:a,state:tC.JOB_STATE_QUEUED}}}}async getInternal(e){var t,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=mJ(e);return s=yn("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>hC(c))}else{const u=pJ(e);return s=yn("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>j8(c))}}async listInternal(e){var t,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=xJ(e);return s=yn("tuningJobs",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const f=SJ(c),h=new d3;return Object.assign(h,f),h})}else{const u=yJ(e);return s=yn("tunedModels",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const f=_J(c),h=new d3;return Object.assign(h,f),h})}}async cancel(e){var t,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=sJ(e);return s=yn("{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const f=uJ(c),h=new h3;return Object.assign(h,f),h})}else{const u=aJ(e);return s=yn("{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const f=lJ(c),h=new h3;return Object.assign(h,f),h})}}async tuneInternal(e){var t,r;let i,o="",a={};if(this.apiClient.isVertexAI()){const s=hJ(e,e);return o=yn("tuningJobs",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),i.then(l=>hC(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=dJ(e);return o=yn("tunedModels",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),i.then(l=>EJ(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class MJ{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const CJ=1024*1024*8,PJ=3,IJ=1e3,RJ=2,u_="x-goog-upload-status";async function NJ(n,e,t){var r;const i=await $8(n,e,t),o=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[u_])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function LJ(n,e,t){var r;const i=await $8(n,e,t),o=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[u_])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const a=n8(o),s=new dP;return Object.assign(s,a),s}async function $8(n,e,t){var r,i;let o=0,a=0,s=new nC(new Response),l="upload";for(o=n.size;a<o;){const u=Math.min(CJ,o-a),c=n.slice(a,a+u);a+u>=o&&(l+=", finalize");let f=0,h=IJ;for(;f<PJ&&(s=await t.request({path:"",body:c,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(a),"Content-Length":String(u)}}}),!(!((r=s==null?void 0:s.headers)===null||r===void 0)&&r[u_]));)f++,await DJ(h),h=h*RJ;if(a+=u,((i=s==null?void 0:s.headers)===null||i===void 0?void 0:i[u_])!=="active")break;if(o<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return s}async function OJ(n){return{size:n.size,type:n.type}}function DJ(n){return new Promise(e=>setTimeout(e,n))}class kJ{async upload(e,t,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await NJ(e,t,r)}async uploadToFileSearchStore(e,t,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await LJ(e,t,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await OJ(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FJ{create(e,t,r){return new UJ(e,t,r)}}class UJ{constructor(e,t,r){this.url=e,this.headers=t,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const H3="x-goog-api-key";class BJ{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(H3)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(H3,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zJ="gl-node/";class HJ{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new es({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const r=D9(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const i=new BJ(this.apiKey);this.apiClient=new OY({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:zJ+"web",uploader:new kJ,downloader:new MJ}),this.models=new QY(this.apiClient),this.live=new $Y(this.apiClient,i,new FJ),this.batches=new cj(this.apiClient),this.chats=new Wj(this.models,this.apiClient),this.caches=new Vj(this.apiClient),this.files=new t$(this.apiClient),this.operations=new eK(this.apiClient),this.authTokens=new gK(this.apiClient),this.tunings=new TJ(this.apiClient),this.fileSearchStores=new AK(this.apiClient)}}/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*/var Qx=(n=>(n.QUOTA="RESOURCE_EXHAUSTED",n.AUTH="AUTHENTICATION_FAILURE",n.NETWORK="NETWORK_ERROR",n.MODEL="MODEL_GEN_FAULT",n.UNKNOWN="UNKNOWN_CORRELATION_ERROR",n.VERIFICATION_FAILED="DATA_VERIFICATION_FAILED",n))(Qx||{});let Ia={obstructions:[{id:"OBJ_X1",type:"LOOSE_DEBRIS",coordinates:[15,45],size:"SMALL",status:"ACTIVE"},{id:"FRM_A2",type:"STRUCTURAL_FRAME",coordinates:[85,15],size:"LARGE",status:"MISALIGNED"},{id:"BARR_Y3",type:"BARRIER",coordinates:[50,70],size:"MEDIUM",status:"ACTIVE"}],integrity:65,romScore:0,scanActive:!1,missionLog:[]};class VJ{constructor(e){this.users=[],this.activeUser=null,this.onAudit=e,this.loadUsers(),this.users.length===0&&this.createUser("sre-admin","",kp.Admin)}loadUsers(){const e=localStorage.getItem("SYNAPSE_USERS");if(e){const t=JSON.parse(e);this.users=t.map(r=>({...r,keyStatus:r.keyStatus||"ACTIVE",keyUsage:r.keyUsage||0,keyLastUsed:r.keyLastUsed||0}))}}saveUsers(){localStorage.setItem("SYNAPSE_USERS",JSON.stringify(this.users))}createUser(e,t,r,i){const o={id:`UID-${Math.random().toString(36).substring(2,9).toUpperCase()}`,username:e,password:t,apiKey:i,role:r,mustResetPassword:t==="",createdAt:Date.now(),keyStatus:"ACTIVE",keyUsage:0,keyLastUsed:0};return this.users.push(o),this.saveUsers(),this.logAudit("USER_CREATED","SECURITY",`User ${e} provisioned. Role: ${r}.`),o}authenticate(e,t){const r=this.users.find(i=>i.username===e);return r?r.password!==t?{success:!1,error:"CREDENTIAL_INVALID"}:(this.activeUser=r,this.logAudit("AUTH_SUCCESS","SECURITY",`User ${e} authenticated successfully.`),{success:!0,user:r}):{success:!1,error:"IDENTITY_NOT_FOUND"}}updatePassword(e,t){const r=this.users.find(i=>i.id===e);return r?(r.password=t,r.mustResetPassword=!1,this.saveUsers(),this.logAudit("PASSWORD_UPDATED","SECURITY",`Password updated for user ${r.username}`),!0):!1}updateApiKey(e,t){const r=this.users.find(i=>i.id===e);return r?(r.apiKey=t,r.keyStatus="ACTIVE",this.saveUsers(),this.logAudit("API_KEY_UPDATED","SECURITY",`API key updated for user ${r.username}`),!0):!1}toggleKeyStatus(e){const t=this.users.find(r=>r.id===e);return t?(t.keyStatus=t.keyStatus==="ACTIVE"?"REVOKED":"ACTIVE",this.saveUsers(),this.logAudit("KEY_STATUS_CHANGE","SECURITY",`API Key for ${t.username} set to ${t.keyStatus}`),!0):!1}incrementKeyUsage(e){const t=this.users.find(r=>r.id===e);t&&(t.keyUsage=(t.keyUsage||0)+1,t.keyLastUsed=Date.now(),this.saveUsers())}getBestAvailableKey(){if(this.activeUser&&this.activeUser.apiKey&&this.activeUser.keyStatus==="ACTIVE")return{key:this.activeUser.apiKey,source:`USER_KEY (${this.activeUser.username})`,userId:this.activeUser.id};const t=this.users.find(r=>r.role===kp.Admin&&r.apiKey&&r.keyStatus==="ACTIVE");return t&&t.apiKey?{key:t.apiKey,source:`POOL_KEY (${t.username})`,userId:t.id}:{key:"",source:"SYSTEM_ENV"}}logout(){this.activeUser&&this.logAudit("SESSION_TERMINATED","SECURITY",`User ${this.activeUser.username} logged out.`),this.activeUser=null}getActiveUser(){return this.activeUser}getAllUsers(){return this.users.map(({password:e,...t})=>t)}logAudit(e,t,r){this.onAudit(e,t,r)}}class GJ{constructor(){this.telemetry={successCount:0,failureCount:0,avgLatency:0,lastFault:null,isCircuitOpen:!1,dataIntegrityScore:100},this.nodes=[{id:"NODE_ALPHA",key:"CORE_ANALYSIS",weight:1,maxRpm:120,status:"ONLINE",role:"ANALYSIS",load:12},{id:"NODE_BETA",key:"ML_INFERENCE",weight:.9,maxRpm:200,status:"ONLINE",role:"INFERENCE",load:24},{id:"NODE_GAMMA",key:"TRUTH_VERIFY",weight:1,maxRpm:100,status:"ONLINE",role:"VERIFICATION",load:5},{id:"NODE_DELTA",key:"SYNC_COMMS",weight:.8,maxRpm:150,status:"ONLINE",role:"SYNTHESIS",load:8}],this.requestQueue=[],this.processing=!1,this.auditLog=[],this.security=new VJ(this.logAudit.bind(this)),this.logAudit("FRAMEWORK_INIT","SYSTEM","Supercomputer Architecture Initialized. Distributed nodes online.")}balanceLoad(e){const t=this.nodes.find(r=>r.role===e);return t&&(t.load=Math.min(100,t.load+Math.floor(Math.random()*20)+10),setTimeout(()=>{t.load=Math.max(5,t.load-Math.floor(Math.random()*20))},2e3)),(t==null?void 0:t.id)||"UNKNOWN_NODE"}async enqueueRequest(e){return new Promise((t,r)=>{this.requestQueue.push(async()=>{const i=Date.now();try{const o=await e();this.updateTelemetry(!0,Date.now()-i),t(o)}catch(o){this.updateTelemetry(!1,Date.now()-i,o),r(o)}}),this.processQueue()})}async processQueue(){if(!(this.processing||this.requestQueue.length===0)){for(this.processing=!0;this.requestQueue.length>0;){if(this.telemetry.isCircuitOpen){await new Promise(t=>setTimeout(t,2e3));continue}const e=this.requestQueue.shift();e&&await e()}this.processing=!1}}updateTelemetry(e,t,r){e?(this.telemetry.successCount++,this.telemetry.avgLatency=(this.telemetry.avgLatency+t)/2,this.telemetry.dataIntegrityScore=Math.min(100,this.telemetry.dataIntegrityScore+.1)):(this.telemetry.failureCount++,this.telemetry.lastFault=this.parseError(r),this.telemetry.dataIntegrityScore=Math.max(0,this.telemetry.dataIntegrityScore-5),this.telemetry.failureCount%5===0&&(this.telemetry.isCircuitOpen=!0,this.logAudit("CIRCUIT_TRIP","PROTECTOR","Integrity threshold breached. Engaging safety cooldown."),setTimeout(()=>{this.telemetry.isCircuitOpen=!1},1e4)))}getWorkspaceState(){return{...Ia,pathClearance:Ia.obstructions.filter(e=>e.status==="ACTIVE").length>0?"OBSTRUCTED":"CLEAR",telemetry:this.telemetry}}async executeProtocolStep(e){const t=this.security.getActiveUser();if(!t||t.role!==kp.Admin)throw this.logAudit("ACCESS_DENIED","ROBOTICS","Unauthorized attempt to execute protocol step."),new Error("UNAUTHORIZED_ACTION");switch(e){case 1:Ia.scanActive=!0,this.balanceLoad("ANALYSIS"),await new Promise(r=>setTimeout(r,1500)),Ia.missionLog.push(`SCAN_COMPLETE: ${Ia.obstructions.length} hazards identified.`),Ia.scanActive=!1;break;case 2:Ia.obstructions=Ia.obstructions.filter(r=>r.type!=="LOOSE_DEBRIS"),this.balanceLoad("INFERENCE"),Ia.missionLog.push("DEBRIS_PURGE: Foreign objects removed from path.");break;case 3:Ia.obstructions.forEach(r=>{r.status==="MISALIGNED"&&(r.status="ALIGNED")}),Ia.integrity=100,this.balanceLoad("VERIFICATION"),Ia.missionLog.push("ALIGNMENT_OK: Structural frames recalibrated.");break;case 4:Ia.romScore=Ia.obstructions.every(r=>r.status==="ALIGNED")?1:.4,Ia.missionLog.push(`ROM_VERIFIED: Benchmark score: ${Ia.romScore*100}%.`);break;case 5:Ia.missionLog.push(`REPORT_FINALIZED: Mission ID #SYN-${Math.floor(Math.random()*999)}`);break}return this.logAudit("ROBOTIC_MISSION",t.username,`Step ${e} executed successfully.`),{success:!0,state:Ia}}reportFailure(e){this.updateTelemetry(!1,0,e);const t=(e==null?void 0:e.message)||(typeof e=="string"?e:JSON.stringify(e));this.logAudit("FAULT_REPORTED","SYSTEM_CORE",t)}getClient(){const{key:e,source:t,userId:r}=this.security.getBestAvailableKey();r&&this.security.incrementKeyUsage(r),Math.random()>.95&&this.logAudit("NEURAL_LINK_ESTABLISHED","UPLINK",`Establishing connection using: ${t}`);const i=this.nodes[Math.floor(Math.random()*this.nodes.length)];return{client:new HJ({apiKey:e}),nodeAlias:i.id}}logAudit(e,t,r){var o;const i=this.security&&this.security.getActiveUser()?(o=this.security.getActiveUser())==null?void 0:o.username:"SYSTEM_ROUTER";this.auditLog.unshift({timestamp:Date.now(),action:e,user:i||"SYSTEM_ROUTER",nodeId:t,details:r}),this.auditLog.length>100&&this.auditLog.pop()}getAuditLogs(){return this.auditLog}getClusterInfo(){return this.nodes}getStats(){const e=this.nodes.reduce((t,r)=>t+r.load,0)/this.nodes.length;return{activeNodeId:"DISTRIBUTED_MESH",clusterLoad:Math.round(e),healthScore:this.telemetry.dataIntegrityScore,totalRotations:this.nodes.reduce((t,r)=>t+r.maxRpm,0)}}get stats(){return this.getStats()}isThrottled(){return this.telemetry.isCircuitOpen}getCooldownTime(){return this.telemetry.isCircuitOpen?1e4:0}parseError(e){const t=((e==null?void 0:e.message)||JSON.stringify(e)).toLowerCase();return t.includes("429")||t.includes("quota")?"RESOURCE_EXHAUSTED":t.includes("401")||t.includes("auth")||t.includes("api key")?"AUTHENTICATION_FAILURE":"UNKNOWN_CORRELATION_ERROR"}registerNodeActivity(e){this.balanceLoad(e)}async verifyAndSynthesizeSpeech(e,t,r="CONCISE"){var a,s,l,u,c,f;this.registerNodeActivity("VERIFICATION");const i=this.verifyContentIntegrity(e);if(!i.passed)throw this.logAudit("VERIFICATION_FAILED","NODE_GAMMA",`Speech synthesis rejected: ${i.reason}`),new Error(`DATA_VERIFICATION_FAILED: ${i.reason}`);this.registerNodeActivity("SYNTHESIS");const{client:o}=this.getClient();try{let h=e;r==="CONCISE"&&(h=e.replace(/\|.*\|/g,"").replace(/```[\s\S]*?```/g," [Data block visualization provided] ")),h=h.substring(0,1500);const v=(f=(c=(u=(l=(s=(a=(await o.models.generateContent({model:"gemini-2.5-flash-preview-tts",contents:[{parts:[{text:h}]}],config:{responseModalities:[pg.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Zephyr"}}}}})).candidates)==null?void 0:a[0])==null?void 0:s.content)==null?void 0:l.parts)==null?void 0:u[0])==null?void 0:c.inlineData)==null?void 0:f.data;if(!v)throw new Error("Empty audio response from neural core");const S=await Y8(X8(v),t,24e3,1);return this.logAudit("SPEECH_SYNTHESIZED","NODE_DELTA",`Voice generated (${r}). Length: ${e.length} chars.`),S}catch(h){throw this.reportFailure(h),h}}async transcribeAudio(e,t){this.registerNodeActivity("ANALYSIS");const{client:r}=this.getClient();try{return(await r.models.generateContent({model:"gemini-3-flash-preview",contents:[{parts:[{inlineData:{data:e,mimeType:t}},{text:"Transcribe this audio precisely. Maintain all technical terms (SRE, Kubernetes, APIs, etc.). Do not summarize, just transcribe."}]}]})).text||""}catch(i){throw this.reportFailure(i),i}}verifyContentIntegrity(e){return!e||e.length<5?{passed:!1,reason:"Insufficient data payload."}:(!/\[.*?\]|:|\*\*|Index|Value|Analysis/i.test(e)&&e.length>100,{passed:!0})}async runWithResilience(e,t="NONE"){return this.executeWithResilience(e,t)}async executeWithResilience(e,t="NONE"){let o;for(let a=0;a<3;a++)try{return await e("gemini-3-pro-preview")}catch(s){if(o=s,this.parseError(s)==="RESOURCE_EXHAUSTED"){const u=1e3*Math.pow(2,a);console.warn(`[NEURAL_QUOTA]: Retrying in ${u}ms... (Attempt ${a+1}/3)`),await new Promise(c=>setTimeout(c,u))}else throw s}if(t==="FALLBACK_TO_FLASH"){console.warn("[NEURAL_failover]: Primary model exhausted. Switching to backup neural verification (Flash Model).");try{return await e("gemini-3-flash-preview")}catch{return console.warn("Fallback to gemini-3-flash-preview failed. One last attempt with gemini-2.0-flash-001"),await e("gemini-2.0-flash-001")}}throw o}async generateDeepAnalysis(e,t){const{client:r}=this.getClient();this.registerNodeActivity("INFERENCE");const i=`
        GENERATE A "DEEP FORENSIC SRE DOSSIER" (100% ACCURACY TARGET).

        IDENTITY: You are SRE SYNAPSE, an advanced AI ensemble comprising Deep Convolutional Networks (for pattern recognition), Transformer-XL (for sequence analysis), and Reinforcement Learning Agents (for strategic optimization).
        // ... (rest of prompt remains same, just ensuring logic is wrapped)


        CRITICAL OBJECTIVE: ELIMINATE DATA HALLUCINATIONS.
        
        **ROOT CAUSE ANALYSIS PROTOCOL (ACTIVE):**
        1. **Cross-Reference:** You must validate every extracted number.
        2. **Indian Numbering System Warning:** BEWARE of the "Lakh" format (e.g., 1,70,000). 
           - Standard OCR often misreads "1,70,000" as "17,000" or "170000".
           - **RULE:** If you see "1,70,000" or similar, read it as ONE LAKH SEVENTY THOUSAND (170,000), NOT SEVENTEEN THOUSAND.
        3. **Math-Based Validation:** 
           - Check: (Quantity * Average Price)  Invested Value.
           - Check: (Quantity * CMP)  Current Value.
           - If the math does not hold, RE-READ the quantity from the source visual data.
           - Example: If Total Value is ~80 Lakhs and Price is ~45, Quantity MUST be ~1,70,000, NOT 17,000.
        4. **Anomaly Detection:** Flag any discrepancy between visual evidence and initial OCR parse.

        DATA SOURCE:
        - User uploaded documents (analyzed via RAG).
        - Conversation history.
        - Domain Context: ${(t==null?void 0:t.category)||"GENERAL_SYSTEMS"}

        OUTPUT REQUIREMENTS:
        1.  **Executive Summary**: High-level strategic overview.
        2.  **Forensic Findings**: 5-7 distinct, evidence-based observations. 
        3.  **Tactical Action Plan**: 3 distinct phases.
        4.  **Audit Log (NEW)**: List any auto-corrections made (e.g., "Corrected share count from 17,000 to 170,000 based on P&L correlation").
        5.  **Telemetry Matrix**: Key metrics including "Data Integrity" and "Anomaly Score".

        OUTPUT FORMAT: Strict JSON matching the SummaryData schema.
        `;return this.executeWithResilience(async o=>{const a=await r.models.generateContent({model:o,contents:[{role:"user",parts:[{text:i}]},...e.map(s=>({role:s.role==="user"?"user":"model",parts:s.parts}))],config:{responseMimeType:"application/json",responseSchema:{type:lr.OBJECT,properties:{reportTitle:{type:lr.STRING},metadata:{type:lr.OBJECT,properties:{incidentId:{type:lr.STRING},systemScope:{type:lr.STRING},confidentiality:{type:lr.STRING}}},executiveSummary:{type:lr.STRING},keyFindings:{type:lr.ARRAY,items:{type:lr.STRING}},auditLog:{type:lr.ARRAY,items:{type:lr.OBJECT,properties:{discrepancy:{type:lr.STRING},correction:{type:lr.STRING},confidence:{type:lr.STRING}}}},actionPlan:{type:lr.ARRAY,items:{type:lr.OBJECT,properties:{phase:{type:lr.STRING},objectives:{type:lr.ARRAY,items:{type:lr.STRING}}}}},telemetryOverview:{type:lr.ARRAY,items:{type:lr.OBJECT,properties:{metric:{type:lr.STRING},value:{type:lr.STRING},status:{type:lr.STRING}}}}}}}});return JSON.parse(a.text||"{}")},"FALLBACK_TO_FLASH")}}const ao=new GJ,qJ=[{name:"perform_visual_inspection",parameters:{type:lr.OBJECT,properties:{}}},{name:"purge_foreign_debris",parameters:{type:lr.OBJECT,properties:{}}},{name:"align_structural_components",parameters:{type:lr.OBJECT,properties:{}}},{name:"verify_range_of_motion",parameters:{type:lr.OBJECT,properties:{}}},{name:"document_clearance_mission",parameters:{type:lr.OBJECT,properties:{}}}];async function WJ(n){const e=n.type,t=n.name.toLowerCase();if(["application/pdf","image/","audio/","video/"].some(o=>e.startsWith(o)||o==="application/pdf"&&e===o))return{inlineData:{data:await new Promise((a,s)=>{const l=new FileReader;l.onload=()=>{const u=l.result;a(u.includes(",")?u.split(",")[1]:u)},l.onerror=s,l.readAsDataURL(n)}),mimeType:e}};const i=[".txt",".md",".csv",".json",".log",".xml",".yaml",".yml",".js",".jsx",".ts",".tsx",".py",".rb",".java",".c",".cpp",".h",".cs",".go",".rs",".sh",".bat",".ps1",".html",".css",".sql",".env"];if(e.startsWith("text/")||i.some(o=>t.endsWith(o))){const o=await new Promise((a,s)=>{const l=new FileReader;l.onload=()=>a(l.result),l.onerror=s,l.readAsText(n)});return{text:`
<<< FILE_START: ${n.name} >>>
${o}
<<< FILE_END >>>
`}}return{text:`
[SYSTEM_LOG]: Skipped unsupported binary '${n.name}'.
`}}async function jJ(n,e){const t=[];let r=0;ao.registerNodeActivity("ANALYSIS");for(const i of n){try{const o=await WJ(i);o&&t.push(o)}catch(o){console.warn(`Error: ${i.name}`,o)}r++,e&&e(Math.round(r/n.length*100))}return t}async function*$J(n,e,t,r){var l;const{client:i}=ao.getClient(),o=ao.security.getActiveUser();ao.registerNodeActivity("ANALYSIS"),yield`[SYSTEM]: Distributing workload to Node Cluster...
`;const a=(o==null?void 0:o.role)===kp.Admin?[{functionDeclarations:qJ}]:[];let s=`IDENTITY: SRE SYNAPSE SUPERCOMPUTER.
    ARCHITECTURE: Distributed Neural Mesh with Parallel Processing.
    DIRECTIVE: You are an entity ensuring 100% data accuracy through rigorous cross-verification.
    
    PROTOCOL:
    1. ANALYZE: Break down the query into logical components.
    2. INFER: Generate an initial response based on retrieved context.
    3. VERIFY: Self-correct immediately. If a fact cannot be verified from the context, state the confidence level explicitly.
    4. SYNCHRONIZE: Maintain a consistent state with the connected robotic interface.
    `;if((r==null?void 0:r.category)==="INCOME_TAX"){const u=r.metadata.jurisdiction||"General";s+=`
        DOMAIN: HIGH-PRECISION TAX FORENSICS (${u}).
        RULE: Cite specific line items and tax codes. No estimation allowed.
        `}else if((r==null?void 0:r.category)==="FINANCIAL_MARKET"){const u=((l=r.metadata.entities)==null?void 0:l.join(", "))||"Global Markets";s+=`
        DOMAIN: ALGORITHMIC FINANCIAL MARKET ANALYSIS (${u}).
        CONTEXT: User may upload ETFs (Tata Gold, Tata Silver), Equity Holdings, or Technical Charts.
        RULE: Provide exact price points, trend vectors, and portfolio valuation.
        RULE: Treat Commodities (Gold, Silver) as financial assets, not industrial materials.
        `}else(r==null?void 0:r.category)==="LOTTERY"&&(s+=`
        DOMAIN: STOCHASTIC LOTTERY ANALYSIS.
        `);s+=`
    VISUALIZATION INSTRUCTIONS:
    Output JSON for visual data on a separate line wrapped in \`\`\`json\`\`\`.
    
    1. For Lottery/Probabilistic Data (Frequency Analysis):
       Use "visualType": "lotteryPattern".
       Structure: { "visualType": "lotteryPattern", "chartTitle": "Number Frequency Analysis", "points": [{ "index": 1, "label": "Number 7", "value": 15 }, ...] }
       
    2. For Trends/Predictions (Price Forecasting with Confidence):
       Use "visualType": "prediction".
       Structure: { "visualType": "prediction", "chartTitle": "Price Forecast (7 Day)", "points": [{ "index": 1, "label": "Day 1", "value": 150.50, "confidenceLow": 148.00, "confidenceHigh": 153.00 }, ...] }
    
    ACCURACY STANDARD: If data is ambiguous, output: "[AMBIGUITY_DETECTED]: Insufficient data for 100% confidence."
    `;try{const u=t.map(p=>({role:p.role==="user"?"user":"model",parts:p.parts}));u.push({role:"user",parts:[...e,{text:n}]}),ao.registerNodeActivity("INFERENCE");const c=await ao.runWithResilience(async p=>await i.models.generateContentStream({model:p,contents:u,config:{maxOutputTokens:8e3,tools:a,systemInstruction:s}}),"FALLBACK_TO_FLASH");let f=0,h=!1;for await(const p of c)if(f++,f>50&&!h&&(ao.registerNodeActivity("VERIFICATION"),yield`
[VERIFICATION_NODE]: Cross-referencing data points... OK (Confidence: 99.9%)

`,h=!0),p.text&&(yield p.text),p.functionCalls)for(const v of p.functionCalls){let S=0;v.name==="perform_visual_inspection"&&(S=1),v.name==="purge_foreign_debris"&&(S=2),v.name==="align_structural_components"&&(S=3),v.name==="verify_range_of_motion"&&(S=4),v.name==="document_clearance_mission"&&(S=5),S>0&&(await ao.executeProtocolStep(S).catch(()=>({success:!1,state:Ia}))).success&&(yield`
[ROBOTIC_SYNC]: Step ${S} Confirmed via Node DELTA.
`)}ao.registerNodeActivity("SYNTHESIS")}catch(u){throw console.error("Stream disrupted:",u),u}}function XJ(n){let e="";for(let t=0;t<n.byteLength;t++)e+=String.fromCharCode(n[t]);return btoa(e)}function X8(n){const e=atob(n),t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}function YJ(n){const e=new Int16Array(n.length);for(let t=0;t<n.length;t++)e[t]=n[t]*32768;return{data:XJ(new Uint8Array(e.buffer)),mimeType:"audio/pcm;rate=16000"}}async function Y8(n,e,t,r){const i=new Int16Array(n.buffer,n.byteOffset,n.byteLength/2),o=i.length/r,a=e.createBuffer(r,o,t);for(let s=0;s<r;s++){const l=a.getChannelData(s);for(let u=0;u<o;u++)l[u]=i[u*r+s]/32768}return a}async function KJ(n){var t,r,i;const{client:e}=ao.getClient();ao.registerNodeActivity("ANALYSIS");try{const o=await ao.runWithResilience(async h=>{const p=h==="gemini-3-pro-preview"?"gemini-3-flash-preview":h;return await e.models.generateContent({model:p,contents:[{role:"user",parts:[...n,{text:`
                You are a FINANCIAL DOCUMENT CLASSIFIER. Follow this DECISION TREE in strict order:
                
                **STEP 1: CHECK FOR FINANCIAL MARKET INDICATORS (HIGHEST PRIORITY)**
                If the document contains ANY of these, classify as FINANCIAL_MARKET immediately:
                - Stock tickers (e.g., AAPL, TATSILV, TATAGOLD, NIFTY, SENSEX)
                - Trading charts with candlesticks, price lines, or volume bars
                - Technical indicators: RSI, MACD, EMA, SMA, Bollinger Bands, Stochastic
                - Time-series price data (daily/weekly/monthly prices)
                - Market terms: Bull/Bear, Support/Resistance, Breakout, Trend
                - Portfolio holdings, NAV, Asset Allocation
                - Brokerage names: Zerodha, Groww, Robinhood, E*TRADE
                - ETF names containing: Gold, Silver, Commodity, Index
                - Currency symbols with numbers: $, , ,  followed by amounts
                - Words: "Investment", "Returns", "Profit/Loss", "Trading"
                
                **CRITICAL**: If you see a chart with a Y-axis labeled "Price" or "Value" and X-axis labeled with dates/time, this is FINANCIAL_MARKET, NOT technical schematics.
                
                **STEP 2: CHECK FOR TAX DOCUMENTS**
                Only if Step 1 fails, check for: Tax forms (1040, W-2, Form 16, ITR), Tax jurisdiction mentions.
                
                **STEP 3: CHECK FOR LOTTERY**
                Only if Steps 1-2 fail, check for: Lottery tickets, betting slips, gambling receipts.
                
                **STEP 4: CHECK FOR TECHNICAL_SRE (LAST PRIORITY)**
                Only classify as TECHNICAL_SRE if document contains:
                - Source code (Python, Java, TypeScript, Go)
                - Infrastructure configs (Kubernetes YAML, Terraform, Docker)
                - Server logs with stack traces or HTTP status codes
                - Network diagrams WITHOUT financial data
                - CI/CD pipeline configurations
                
                **NEVER classify as TECHNICAL_SRE if:**
                - Document has price information
                - Document shows market data or trading activity
                - Charts display financial metrics

                **STEP 5: DEFAULT TO OTHER**
                If none of the above match clearly.

                **OUTPUT**: Provide category, 3 domain-specific questions, and metadata (entities, confidence).
                `}]}],config:{responseMimeType:"application/json",responseSchema:{type:lr.OBJECT,properties:{category:{type:lr.STRING,enum:["INCOME_TAX","FINANCIAL_MARKET","TECHNICAL_SRE","LOTTERY","OTHER"]},questions:{type:lr.ARRAY,items:{type:lr.STRING}},metadata:{type:lr.OBJECT,properties:{jurisdiction:{type:lr.STRING,description:"Applicable Tax Jurisdiction or Country"},entities:{type:lr.ARRAY,items:{type:lr.STRING},description:"Stock Tickers, ETF Names, or specific entities involved"},confidence:{type:lr.NUMBER,description:"Classification confidence score 0-1"}}}}}}})},"FALLBACK_TO_FLASH");let a=o.text||"{}";a.includes("```json")?a=a.replace(/```json\n?|\n?```/g,"").trim():a.includes("```")&&(a=a.replace(/```\n?|\n?```/g,"").trim()),console.log("Raw Analysis Response:",o.text);const s=JSON.parse(a);let l=s.category||"OTHER";const u=JSON.stringify(s).toLowerCase(),f=["tatsilv","tatagold","nifty","sensex","rsi","ema","macd","candlestick","portfolio","etf","stock","trading","investment","zerodha","groww"].some(h=>u.includes(h));return l==="TECHNICAL_SRE"&&f&&(console.warn("[CLASSIFICATION_OVERRIDE]: Detected financial keywords but classified as TECHNICAL_SRE. Overriding to FINANCIAL_MARKET."),l="FINANCIAL_MARKET"),{category:l,questions:s.questions||["Analyze content.","Identify key metrics.","Summarize findings."],metadata:{jurisdiction:((t=s.metadata)==null?void 0:t.jurisdiction)||"Unknown",entities:((r=s.metadata)==null?void 0:r.entities)||[],confidence:((i=s.metadata)==null?void 0:i.confidence)||.5}}}catch(o){return console.error("Analysis failed - Defaulting to OTHER",o),{category:"OTHER",questions:["Analyze content structure.","Identify document type.","Status Report."],metadata:{confidence:0,jurisdiction:"N/A",entities:[]}}}}/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Wg="170",JJ={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},ZJ={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},K8=0,pC=1,J8=2,QJ=3,Z8=0,KS=1,i0=2,Ac=3,ld=0,nl=1,Cc=2,gf=0,Ap=1,mC=2,gC=3,vC=4,Q8=5,rh=100,ez=101,tz=102,nz=103,rz=104,iz=200,oz=201,az=202,sz=203,c_=204,f_=205,lz=206,uz=207,cz=208,fz=209,dz=210,hz=211,pz=212,mz=213,gz=214,d_=0,h_=1,p_=2,Fp=3,m_=4,g_=5,v_=6,y_=7,Dy=0,vz=1,yz=2,vf=0,xz=1,_z=2,Sz=3,_P=4,wz=5,bz=6,Az=7,yC="attached",Ez="detached",hh=300,bf=301,ph=302,mg=303,C0=304,jg=306,P0=1e3,va=1001,I0=1002,fs=1003,SP=1004,eZ=1004,Zm=1005,tZ=1005,mi=1006,o0=1007,nZ=1007,ff=1008,xC=1008,Ul=1009,JS=1010,ZS=1011,gg=1012,ky=1013,Af=1014,go=1015,La=1016,QS=1017,ew=1018,Up=1020,wP=35902,bP=1021,AP=1022,ia=1023,EP=1024,TP=1025,Ep=1026,Bp=1027,Fy=1028,Uy=1029,MP=1030,tw=1031,rZ=1032,nw=1033,a0=33776,s0=33777,l0=33778,u0=33779,x_=35840,__=35841,S_=35842,w_=35843,b_=36196,A_=37492,E_=37496,T_=37808,M_=37809,C_=37810,P_=37811,I_=37812,R_=37813,N_=37814,L_=37815,O_=37816,D_=37817,k_=37818,F_=37819,U_=37820,B_=37821,c0=36492,z_=36494,H_=36495,CP=36283,V_=36284,G_=36285,q_=36286,Tz=2200,Mz=2201,Cz=2202,R0=2300,W_=2301,e_=2302,dp=2400,hp=2401,N0=2402,rw=2500,PP=2501,iZ=0,oZ=1,aZ=2,Pz=3200,Iz=3201,sZ=3202,lZ=3203,xh=0,Rz=1,Jf="",Zs="srgb",Ef="srgb-linear",By="linear",Ti="srgb",uZ=0,ap=7680,cZ=7681,fZ=7682,dZ=7683,hZ=34055,pZ=34056,mZ=5386,gZ=512,vZ=513,yZ=514,xZ=515,_Z=516,SZ=517,wZ=518,_C=519,Nz=512,Lz=513,Oz=514,IP=515,Dz=516,kz=517,Fz=518,Uz=519,L0=35044,bZ=35048,AZ=35040,EZ=35045,TZ=35049,MZ=35041,CZ=35046,PZ=35050,IZ=35042,RZ="100",SC="300 es",df=2e3,O0=2001;class Mf{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const o=i.indexOf(t);o!==-1&&i.splice(o,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let o=0,a=i.length;o<a;o++)i[o].call(this,e);e.target=null}}}const As=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let V3=1234567;const Tp=Math.PI/180,vg=180/Math.PI;function cu(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(As[n&255]+As[n>>8&255]+As[n>>16&255]+As[n>>24&255]+"-"+As[e&255]+As[e>>8&255]+"-"+As[e>>16&15|64]+As[e>>24&255]+"-"+As[t&63|128]+As[t>>8&255]+"-"+As[t>>16&255]+As[t>>24&255]+As[r&255]+As[r>>8&255]+As[r>>16&255]+As[r>>24&255]).toLowerCase()}function qo(n,e,t){return Math.max(e,Math.min(t,n))}function RP(n,e){return(n%e+e)%e}function NZ(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function LZ(n,e,t){return n!==e?(t-n)/(e-n):0}function f0(n,e,t){return(1-t)*n+t*e}function OZ(n,e,t,r){return f0(n,e,1-Math.exp(-t*r))}function DZ(n,e=1){return e-Math.abs(RP(n,e*2)-e)}function kZ(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function FZ(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function UZ(n,e){return n+Math.floor(Math.random()*(e-n+1))}function BZ(n,e){return n+Math.random()*(e-n)}function zZ(n){return n*(.5-Math.random())}function HZ(n){n!==void 0&&(V3=n);let e=V3+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function VZ(n){return n*Tp}function GZ(n){return n*vg}function qZ(n){return(n&n-1)===0&&n!==0}function WZ(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function jZ(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function $Z(n,e,t,r,i){const o=Math.cos,a=Math.sin,s=o(t/2),l=a(t/2),u=o((e+r)/2),c=a((e+r)/2),f=o((e-r)/2),h=a((e-r)/2),p=o((r-e)/2),v=a((r-e)/2);switch(i){case"XYX":n.set(s*c,l*f,l*h,s*u);break;case"YZY":n.set(l*h,s*c,l*f,s*u);break;case"ZXZ":n.set(l*f,l*h,s*c,s*u);break;case"XZX":n.set(s*c,l*v,l*p,s*u);break;case"YXY":n.set(l*p,s*c,l*v,s*u);break;case"ZYZ":n.set(l*v,l*p,s*c,s*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Qs(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Sr(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const Du={DEG2RAD:Tp,RAD2DEG:vg,generateUUID:cu,clamp:qo,euclideanModulo:RP,mapLinear:NZ,inverseLerp:LZ,lerp:f0,damp:OZ,pingpong:DZ,smoothstep:kZ,smootherstep:FZ,randInt:UZ,randFloat:BZ,randFloatSpread:zZ,seededRandom:HZ,degToRad:VZ,radToDeg:GZ,isPowerOfTwo:qZ,ceilPowerOfTwo:WZ,floorPowerOfTwo:jZ,setQuaternionFromProperEuler:$Z,normalize:Sr,denormalize:Qs};class zt{constructor(e=0,t=0){zt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(qo(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),o=this.x-e.x,a=this.y-e.y;return this.x=o*r-a*i+e.x,this.y=o*i+a*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class yr{constructor(e,t,r,i,o,a,s,l,u){yr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,o,a,s,l,u)}set(e,t,r,i,o,a,s,l,u){const c=this.elements;return c[0]=e,c[1]=i,c[2]=s,c[3]=t,c[4]=o,c[5]=l,c[6]=r,c[7]=a,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,o=this.elements,a=r[0],s=r[3],l=r[6],u=r[1],c=r[4],f=r[7],h=r[2],p=r[5],v=r[8],S=i[0],y=i[3],_=i[6],w=i[1],A=i[4],E=i[7],P=i[2],O=i[5],L=i[8];return o[0]=a*S+s*w+l*P,o[3]=a*y+s*A+l*O,o[6]=a*_+s*E+l*L,o[1]=u*S+c*w+f*P,o[4]=u*y+c*A+f*O,o[7]=u*_+c*E+f*L,o[2]=h*S+p*w+v*P,o[5]=h*y+p*A+v*O,o[8]=h*_+p*E+v*L,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8];return t*a*c-t*s*u-r*o*c+r*s*l+i*o*u-i*a*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],f=c*a-s*u,h=s*l-c*o,p=u*o-a*l,v=t*f+r*h+i*p;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const S=1/v;return e[0]=f*S,e[1]=(i*u-c*r)*S,e[2]=(s*r-i*a)*S,e[3]=h*S,e[4]=(c*t-i*l)*S,e[5]=(i*o-s*t)*S,e[6]=p*S,e[7]=(r*l-u*t)*S,e[8]=(a*t-r*o)*S,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,o,a,s){const l=Math.cos(o),u=Math.sin(o);return this.set(r*l,r*u,-r*(l*a+u*s)+a+e,-i*u,i*l,-i*(-u*a+l*s)+s+t,0,0,1),this}scale(e,t){return this.premultiply(zb.makeScale(e,t)),this}rotate(e){return this.premultiply(zb.makeRotation(-e)),this}translate(e,t){return this.premultiply(zb.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const zb=new yr;function Bz(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const XZ={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Qm(n,e){return new XZ[n](e)}function D0(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function zz(){const n=D0("canvas");return n.style.display="block",n}const G3={};function Yv(n){n in G3||(G3[n]=!0,console.warn(n))}function YZ(n,e,t){return new Promise(function(r,i){function o(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:i();break;case n.TIMEOUT_EXPIRED:setTimeout(o,t);break;default:r()}}setTimeout(o,t)})}function KZ(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function JZ(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const Gr={enabled:!0,workingColorSpace:Ef,spaces:{},convert:function(n,e,t){return this.enabled===!1||e===t||!e||!t||(this.spaces[e].transfer===Ti&&(n.r=rd(n.r),n.g=rd(n.g),n.b=rd(n.b)),this.spaces[e].primaries!==this.spaces[t].primaries&&(n.applyMatrix3(this.spaces[e].toXYZ),n.applyMatrix3(this.spaces[t].fromXYZ)),this.spaces[t].transfer===Ti&&(n.r=ug(n.r),n.g=ug(n.g),n.b=ug(n.b))),n},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)},getPrimaries:function(n){return this.spaces[n].primaries},getTransfer:function(n){return n===Jf?By:this.spaces[n].transfer},getLuminanceCoefficients:function(n,e=this.workingColorSpace){return n.fromArray(this.spaces[e].luminanceCoefficients)},define:function(n){Object.assign(this.spaces,n)},_getMatrix:function(n,e,t){return n.copy(this.spaces[e].toXYZ).multiply(this.spaces[t].fromXYZ)},_getDrawingBufferColorSpace:function(n){return this.spaces[n].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(n=this.workingColorSpace){return this.spaces[n].workingColorSpaceConfig.unpackColorSpace}};function rd(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function ug(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const q3=[.64,.33,.3,.6,.15,.06],W3=[.2126,.7152,.0722],j3=[.3127,.329],$3=new yr().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),X3=new yr().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);Gr.define({[Ef]:{primaries:q3,whitePoint:j3,transfer:By,toXYZ:$3,fromXYZ:X3,luminanceCoefficients:W3,workingColorSpaceConfig:{unpackColorSpace:Zs},outputColorSpaceConfig:{drawingBufferColorSpace:Zs}},[Zs]:{primaries:q3,whitePoint:j3,transfer:Ti,toXYZ:$3,fromXYZ:X3,luminanceCoefficients:W3,outputColorSpaceConfig:{drawingBufferColorSpace:Zs}}});let _m;class Hz{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{_m===void 0&&(_m=D0("canvas")),_m.width=e.width,_m.height=e.height;const r=_m.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=_m}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=D0("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),o=i.data;for(let a=0;a<o.length;a++)o[a]=rd(o[a]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(rd(t[r]/255)*255):t[r]=rd(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let ZZ=0;class pp{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:ZZ++}),this.uuid=cu(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let o;if(Array.isArray(i)){o=[];for(let a=0,s=i.length;a<s;a++)i[a].isDataTexture?o.push(Hb(i[a].image)):o.push(Hb(i[a]))}else o=Hb(i);r.url=o}return t||(e.images[this.uuid]=r),r}}function Hb(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?Hz.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let QZ=0;class Mi extends Mf{constructor(e=Mi.DEFAULT_IMAGE,t=Mi.DEFAULT_MAPPING,r=va,i=va,o=mi,a=ff,s=ia,l=Ul,u=Mi.DEFAULT_ANISOTROPY,c=Jf){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:QZ++}),this.uuid=cu(),this.name="",this.source=new pp(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=o,this.minFilter=a,this.anisotropy=u,this.format=s,this.internalFormat=null,this.type=l,this.offset=new zt(0,0),this.repeat=new zt(1,1),this.center=new zt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new yr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==hh)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case P0:e.x=e.x-Math.floor(e.x);break;case va:e.x=e.x<0?0:1;break;case I0:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case P0:e.y=e.y-Math.floor(e.y);break;case va:e.y=e.y<0?0:1;break;case I0:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Mi.DEFAULT_IMAGE=null;Mi.DEFAULT_MAPPING=hh;Mi.DEFAULT_ANISOTROPY=1;class Yr{constructor(e=0,t=0,r=0,i=1){Yr.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,o=this.w,a=e.elements;return this.x=a[0]*t+a[4]*r+a[8]*i+a[12]*o,this.y=a[1]*t+a[5]*r+a[9]*i+a[13]*o,this.z=a[2]*t+a[6]*r+a[10]*i+a[14]*o,this.w=a[3]*t+a[7]*r+a[11]*i+a[15]*o,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,o;const l=e.elements,u=l[0],c=l[4],f=l[8],h=l[1],p=l[5],v=l[9],S=l[2],y=l[6],_=l[10];if(Math.abs(c-h)<.01&&Math.abs(f-S)<.01&&Math.abs(v-y)<.01){if(Math.abs(c+h)<.1&&Math.abs(f+S)<.1&&Math.abs(v+y)<.1&&Math.abs(u+p+_-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const A=(u+1)/2,E=(p+1)/2,P=(_+1)/2,O=(c+h)/4,L=(f+S)/4,D=(v+y)/4;return A>E&&A>P?A<.01?(r=0,i=.707106781,o=.707106781):(r=Math.sqrt(A),i=O/r,o=L/r):E>P?E<.01?(r=.707106781,i=0,o=.707106781):(i=Math.sqrt(E),r=O/i,o=D/i):P<.01?(r=.707106781,i=.707106781,o=0):(o=Math.sqrt(P),r=L/o,i=D/o),this.set(r,i,o,t),this}let w=Math.sqrt((y-v)*(y-v)+(f-S)*(f-S)+(h-c)*(h-c));return Math.abs(w)<.001&&(w=1),this.x=(y-v)/w,this.y=(f-S)/w,this.z=(h-c)/w,this.w=Math.acos((u+p+_-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Vz extends Mf{constructor(e=1,t=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Yr(0,0,e,t),this.scissorTest=!1,this.viewport=new Yr(0,0,e,t);const i={width:e,height:t,depth:1};r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:mi,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},r);const o=new Mi(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace);o.flipY=!1,o.generateMipmaps=r.generateMipmaps,o.internalFormat=r.internalFormat,this.textures=[];const a=r.count;for(let s=0;s<a;s++)this.textures[s]=o.clone(),this.textures[s].isRenderTargetTexture=!0;this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,o=this.textures.length;i<o;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let r=0,i=e.textures.length;r<i;r++)this.textures[r]=e.textures[r].clone(),this.textures[r].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new pp(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Bl extends Vz{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}}class iw extends Mi{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=fs,this.minFilter=fs,this.wrapR=va,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class eQ extends Bl{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new iw(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class NP extends Mi{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=fs,this.minFilter=fs,this.wrapR=va,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class tQ extends Bl{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new NP(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class kl{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,o,a,s){let l=r[i+0],u=r[i+1],c=r[i+2],f=r[i+3];const h=o[a+0],p=o[a+1],v=o[a+2],S=o[a+3];if(s===0){e[t+0]=l,e[t+1]=u,e[t+2]=c,e[t+3]=f;return}if(s===1){e[t+0]=h,e[t+1]=p,e[t+2]=v,e[t+3]=S;return}if(f!==S||l!==h||u!==p||c!==v){let y=1-s;const _=l*h+u*p+c*v+f*S,w=_>=0?1:-1,A=1-_*_;if(A>Number.EPSILON){const P=Math.sqrt(A),O=Math.atan2(P,_*w);y=Math.sin(y*O)/P,s=Math.sin(s*O)/P}const E=s*w;if(l=l*y+h*E,u=u*y+p*E,c=c*y+v*E,f=f*y+S*E,y===1-s){const P=1/Math.sqrt(l*l+u*u+c*c+f*f);l*=P,u*=P,c*=P,f*=P}}e[t]=l,e[t+1]=u,e[t+2]=c,e[t+3]=f}static multiplyQuaternionsFlat(e,t,r,i,o,a){const s=r[i],l=r[i+1],u=r[i+2],c=r[i+3],f=o[a],h=o[a+1],p=o[a+2],v=o[a+3];return e[t]=s*v+c*f+l*p-u*h,e[t+1]=l*v+c*h+u*f-s*p,e[t+2]=u*v+c*p+s*h-l*f,e[t+3]=c*v-s*f-l*h-u*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const r=e._x,i=e._y,o=e._z,a=e._order,s=Math.cos,l=Math.sin,u=s(r/2),c=s(i/2),f=s(o/2),h=l(r/2),p=l(i/2),v=l(o/2);switch(a){case"XYZ":this._x=h*c*f+u*p*v,this._y=u*p*f-h*c*v,this._z=u*c*v+h*p*f,this._w=u*c*f-h*p*v;break;case"YXZ":this._x=h*c*f+u*p*v,this._y=u*p*f-h*c*v,this._z=u*c*v-h*p*f,this._w=u*c*f+h*p*v;break;case"ZXY":this._x=h*c*f-u*p*v,this._y=u*p*f+h*c*v,this._z=u*c*v+h*p*f,this._w=u*c*f-h*p*v;break;case"ZYX":this._x=h*c*f-u*p*v,this._y=u*p*f+h*c*v,this._z=u*c*v-h*p*f,this._w=u*c*f+h*p*v;break;case"YZX":this._x=h*c*f+u*p*v,this._y=u*p*f+h*c*v,this._z=u*c*v-h*p*f,this._w=u*c*f-h*p*v;break;case"XZY":this._x=h*c*f-u*p*v,this._y=u*p*f-h*c*v,this._z=u*c*v+h*p*f,this._w=u*c*f+h*p*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],o=t[8],a=t[1],s=t[5],l=t[9],u=t[2],c=t[6],f=t[10],h=r+s+f;if(h>0){const p=.5/Math.sqrt(h+1);this._w=.25/p,this._x=(c-l)*p,this._y=(o-u)*p,this._z=(a-i)*p}else if(r>s&&r>f){const p=2*Math.sqrt(1+r-s-f);this._w=(c-l)/p,this._x=.25*p,this._y=(i+a)/p,this._z=(o+u)/p}else if(s>f){const p=2*Math.sqrt(1+s-r-f);this._w=(o-u)/p,this._x=(i+a)/p,this._y=.25*p,this._z=(l+c)/p}else{const p=2*Math.sqrt(1+f-r-s);this._w=(a-i)/p,this._x=(o+u)/p,this._y=(l+c)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(qo(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,o=e._z,a=e._w,s=t._x,l=t._y,u=t._z,c=t._w;return this._x=r*c+a*s+i*u-o*l,this._y=i*c+a*l+o*s-r*u,this._z=o*c+a*u+r*l-i*s,this._w=a*c-r*s-i*l-o*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,o=this._z,a=this._w;let s=a*e._w+r*e._x+i*e._y+o*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=a,this._x=r,this._y=i,this._z=o,this;const l=1-s*s;if(l<=Number.EPSILON){const p=1-t;return this._w=p*a+t*this._w,this._x=p*r+t*this._x,this._y=p*i+t*this._y,this._z=p*o+t*this._z,this.normalize(),this}const u=Math.sqrt(l),c=Math.atan2(u,s),f=Math.sin((1-t)*c)/u,h=Math.sin(t*c)/u;return this._w=a*f+this._w*h,this._x=r*f+this._x*h,this._y=i*f+this._y*h,this._z=o*f+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),o=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),o*Math.sin(t),o*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Pe{constructor(e=0,t=0,r=0){Pe.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Y3.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Y3.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*t+o[3]*r+o[6]*i,this.y=o[1]*t+o[4]*r+o[7]*i,this.z=o[2]*t+o[5]*r+o[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,o=e.elements,a=1/(o[3]*t+o[7]*r+o[11]*i+o[15]);return this.x=(o[0]*t+o[4]*r+o[8]*i+o[12])*a,this.y=(o[1]*t+o[5]*r+o[9]*i+o[13])*a,this.z=(o[2]*t+o[6]*r+o[10]*i+o[14])*a,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,o=e.x,a=e.y,s=e.z,l=e.w,u=2*(a*i-s*r),c=2*(s*t-o*i),f=2*(o*r-a*t);return this.x=t+l*u+a*f-s*c,this.y=r+l*c+s*u-o*f,this.z=i+l*f+o*c-a*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i,this.y=o[1]*t+o[5]*r+o[9]*i,this.z=o[2]*t+o[6]*r+o[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,o=e.z,a=t.x,s=t.y,l=t.z;return this.x=i*l-o*s,this.y=o*a-r*l,this.z=r*s-i*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return Vb.copy(this).projectOnVector(e),this.sub(Vb)}reflect(e){return this.sub(Vb.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(qo(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,r=Math.sqrt(1-t*t);return this.x=r*Math.cos(e),this.y=t,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Vb=new Pe,Y3=new kl;class rl{constructor(e=new Pe(1/0,1/0,1/0),t=new Pe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(vc.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(vc.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=vc.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const o=r.getAttribute("position");if(t===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let a=0,s=o.count;a<s;a++)e.isMesh===!0?e.getVertexPosition(a,vc):vc.fromBufferAttribute(o,a),vc.applyMatrix4(e.matrixWorld),this.expandByPoint(vc);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),B1.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),B1.copy(r.boundingBox)),B1.applyMatrix4(e.matrixWorld),this.union(B1)}const i=e.children;for(let o=0,a=i.length;o<a;o++)this.expandByObject(i[o],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,vc),vc.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(xv),z1.subVectors(this.max,xv),Sm.subVectors(e.a,xv),wm.subVectors(e.b,xv),bm.subVectors(e.c,xv),Hd.subVectors(wm,Sm),Vd.subVectors(bm,wm),Wh.subVectors(Sm,bm);let t=[0,-Hd.z,Hd.y,0,-Vd.z,Vd.y,0,-Wh.z,Wh.y,Hd.z,0,-Hd.x,Vd.z,0,-Vd.x,Wh.z,0,-Wh.x,-Hd.y,Hd.x,0,-Vd.y,Vd.x,0,-Wh.y,Wh.x,0];return!Gb(t,Sm,wm,bm,z1)||(t=[1,0,0,0,1,0,0,0,1],!Gb(t,Sm,wm,bm,z1))?!1:(H1.crossVectors(Hd,Vd),t=[H1.x,H1.y,H1.z],Gb(t,Sm,wm,bm,z1))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,vc).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(vc).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(qf[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),qf[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),qf[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),qf[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),qf[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),qf[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),qf[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),qf[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(qf),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const qf=[new Pe,new Pe,new Pe,new Pe,new Pe,new Pe,new Pe,new Pe],vc=new Pe,B1=new rl,Sm=new Pe,wm=new Pe,bm=new Pe,Hd=new Pe,Vd=new Pe,Wh=new Pe,xv=new Pe,z1=new Pe,H1=new Pe,jh=new Pe;function Gb(n,e,t,r,i){for(let o=0,a=n.length-3;o<=a;o+=3){jh.fromArray(n,o);const s=i.x*Math.abs(jh.x)+i.y*Math.abs(jh.y)+i.z*Math.abs(jh.z),l=e.dot(jh),u=t.dot(jh),c=r.dot(jh);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>s)return!1}return!0}const nQ=new rl,_v=new Pe,qb=new Pe;class Ds{constructor(e=new Pe,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):nQ.setFromPoints(e).getCenter(r);let i=0;for(let o=0,a=e.length;o<a;o++)i=Math.max(i,r.distanceToSquared(e[o]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;_v.subVectors(e,this.center);const t=_v.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(_v,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(qb.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(_v.copy(e.center).add(qb)),this.expandByPoint(_v.copy(e.center).sub(qb))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Wf=new Pe,Wb=new Pe,V1=new Pe,Gd=new Pe,jb=new Pe,G1=new Pe,$b=new Pe;class $g{constructor(e=new Pe,t=new Pe(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Wf)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Wf.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Wf.copy(this.origin).addScaledVector(this.direction,t),Wf.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){Wb.copy(e).add(t).multiplyScalar(.5),V1.copy(t).sub(e).normalize(),Gd.copy(this.origin).sub(Wb);const o=e.distanceTo(t)*.5,a=-this.direction.dot(V1),s=Gd.dot(this.direction),l=-Gd.dot(V1),u=Gd.lengthSq(),c=Math.abs(1-a*a);let f,h,p,v;if(c>0)if(f=a*l-s,h=a*s-l,v=o*c,f>=0)if(h>=-v)if(h<=v){const S=1/c;f*=S,h*=S,p=f*(f+a*h+2*s)+h*(a*f+h+2*l)+u}else h=o,f=Math.max(0,-(a*h+s)),p=-f*f+h*(h+2*l)+u;else h=-o,f=Math.max(0,-(a*h+s)),p=-f*f+h*(h+2*l)+u;else h<=-v?(f=Math.max(0,-(-a*o+s)),h=f>0?-o:Math.min(Math.max(-o,-l),o),p=-f*f+h*(h+2*l)+u):h<=v?(f=0,h=Math.min(Math.max(-o,-l),o),p=h*(h+2*l)+u):(f=Math.max(0,-(a*o+s)),h=f>0?o:Math.min(Math.max(-o,-l),o),p=-f*f+h*(h+2*l)+u);else h=a>0?-o:o,f=Math.max(0,-(a*h+s)),p=-f*f+h*(h+2*l)+u;return r&&r.copy(this.origin).addScaledVector(this.direction,f),i&&i.copy(Wb).addScaledVector(V1,h),p}intersectSphere(e,t){Wf.subVectors(e.center,this.origin);const r=Wf.dot(this.direction),i=Wf.dot(Wf)-r*r,o=e.radius*e.radius;if(i>o)return null;const a=Math.sqrt(o-i),s=r-a,l=r+a;return l<0?null:s<0?this.at(l,t):this.at(s,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,o,a,s,l;const u=1/this.direction.x,c=1/this.direction.y,f=1/this.direction.z,h=this.origin;return u>=0?(r=(e.min.x-h.x)*u,i=(e.max.x-h.x)*u):(r=(e.max.x-h.x)*u,i=(e.min.x-h.x)*u),c>=0?(o=(e.min.y-h.y)*c,a=(e.max.y-h.y)*c):(o=(e.max.y-h.y)*c,a=(e.min.y-h.y)*c),r>a||o>i||((o>r||isNaN(r))&&(r=o),(a<i||isNaN(i))&&(i=a),f>=0?(s=(e.min.z-h.z)*f,l=(e.max.z-h.z)*f):(s=(e.max.z-h.z)*f,l=(e.min.z-h.z)*f),r>l||s>i)||((s>r||r!==r)&&(r=s),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,Wf)!==null}intersectTriangle(e,t,r,i,o){jb.subVectors(t,e),G1.subVectors(r,e),$b.crossVectors(jb,G1);let a=this.direction.dot($b),s;if(a>0){if(i)return null;s=1}else if(a<0)s=-1,a=-a;else return null;Gd.subVectors(this.origin,e);const l=s*this.direction.dot(G1.crossVectors(Gd,G1));if(l<0)return null;const u=s*this.direction.dot(jb.cross(Gd));if(u<0||l+u>a)return null;const c=-s*Gd.dot($b);return c<0?null:this.at(c/a,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Qn{constructor(e,t,r,i,o,a,s,l,u,c,f,h,p,v,S,y){Qn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,o,a,s,l,u,c,f,h,p,v,S,y)}set(e,t,r,i,o,a,s,l,u,c,f,h,p,v,S,y){const _=this.elements;return _[0]=e,_[4]=t,_[8]=r,_[12]=i,_[1]=o,_[5]=a,_[9]=s,_[13]=l,_[2]=u,_[6]=c,_[10]=f,_[14]=h,_[3]=p,_[7]=v,_[11]=S,_[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Qn().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/Am.setFromMatrixColumn(e,0).length(),o=1/Am.setFromMatrixColumn(e,1).length(),a=1/Am.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*o,t[5]=r[5]*o,t[6]=r[6]*o,t[7]=0,t[8]=r[8]*a,t[9]=r[9]*a,t[10]=r[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,o=e.z,a=Math.cos(r),s=Math.sin(r),l=Math.cos(i),u=Math.sin(i),c=Math.cos(o),f=Math.sin(o);if(e.order==="XYZ"){const h=a*c,p=a*f,v=s*c,S=s*f;t[0]=l*c,t[4]=-l*f,t[8]=u,t[1]=p+v*u,t[5]=h-S*u,t[9]=-s*l,t[2]=S-h*u,t[6]=v+p*u,t[10]=a*l}else if(e.order==="YXZ"){const h=l*c,p=l*f,v=u*c,S=u*f;t[0]=h+S*s,t[4]=v*s-p,t[8]=a*u,t[1]=a*f,t[5]=a*c,t[9]=-s,t[2]=p*s-v,t[6]=S+h*s,t[10]=a*l}else if(e.order==="ZXY"){const h=l*c,p=l*f,v=u*c,S=u*f;t[0]=h-S*s,t[4]=-a*f,t[8]=v+p*s,t[1]=p+v*s,t[5]=a*c,t[9]=S-h*s,t[2]=-a*u,t[6]=s,t[10]=a*l}else if(e.order==="ZYX"){const h=a*c,p=a*f,v=s*c,S=s*f;t[0]=l*c,t[4]=v*u-p,t[8]=h*u+S,t[1]=l*f,t[5]=S*u+h,t[9]=p*u-v,t[2]=-u,t[6]=s*l,t[10]=a*l}else if(e.order==="YZX"){const h=a*l,p=a*u,v=s*l,S=s*u;t[0]=l*c,t[4]=S-h*f,t[8]=v*f+p,t[1]=f,t[5]=a*c,t[9]=-s*c,t[2]=-u*c,t[6]=p*f+v,t[10]=h-S*f}else if(e.order==="XZY"){const h=a*l,p=a*u,v=s*l,S=s*u;t[0]=l*c,t[4]=-f,t[8]=u*c,t[1]=h*f+S,t[5]=a*c,t[9]=p*f-v,t[2]=v*f-p,t[6]=s*c,t[10]=S*f+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(rQ,e,iQ)}lookAt(e,t,r){const i=this.elements;return iu.subVectors(e,t),iu.lengthSq()===0&&(iu.z=1),iu.normalize(),qd.crossVectors(r,iu),qd.lengthSq()===0&&(Math.abs(r.z)===1?iu.x+=1e-4:iu.z+=1e-4,iu.normalize(),qd.crossVectors(r,iu)),qd.normalize(),q1.crossVectors(iu,qd),i[0]=qd.x,i[4]=q1.x,i[8]=iu.x,i[1]=qd.y,i[5]=q1.y,i[9]=iu.y,i[2]=qd.z,i[6]=q1.z,i[10]=iu.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,o=this.elements,a=r[0],s=r[4],l=r[8],u=r[12],c=r[1],f=r[5],h=r[9],p=r[13],v=r[2],S=r[6],y=r[10],_=r[14],w=r[3],A=r[7],E=r[11],P=r[15],O=i[0],L=i[4],D=i[8],F=i[12],U=i[1],k=i[5],z=i[9],W=i[13],j=i[2],se=i[6],Y=i[10],Q=i[14],X=i[3],Z=i[7],oe=i[11],ee=i[15];return o[0]=a*O+s*U+l*j+u*X,o[4]=a*L+s*k+l*se+u*Z,o[8]=a*D+s*z+l*Y+u*oe,o[12]=a*F+s*W+l*Q+u*ee,o[1]=c*O+f*U+h*j+p*X,o[5]=c*L+f*k+h*se+p*Z,o[9]=c*D+f*z+h*Y+p*oe,o[13]=c*F+f*W+h*Q+p*ee,o[2]=v*O+S*U+y*j+_*X,o[6]=v*L+S*k+y*se+_*Z,o[10]=v*D+S*z+y*Y+_*oe,o[14]=v*F+S*W+y*Q+_*ee,o[3]=w*O+A*U+E*j+P*X,o[7]=w*L+A*k+E*se+P*Z,o[11]=w*D+A*z+E*Y+P*oe,o[15]=w*F+A*W+E*Q+P*ee,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],o=e[12],a=e[1],s=e[5],l=e[9],u=e[13],c=e[2],f=e[6],h=e[10],p=e[14],v=e[3],S=e[7],y=e[11],_=e[15];return v*(+o*l*f-i*u*f-o*s*h+r*u*h+i*s*p-r*l*p)+S*(+t*l*p-t*u*h+o*a*h-i*a*p+i*u*c-o*l*c)+y*(+t*u*f-t*s*p-o*a*f+r*a*p+o*s*c-r*u*c)+_*(-i*s*c-t*l*f+t*s*h+i*a*f-r*a*h+r*l*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],f=e[9],h=e[10],p=e[11],v=e[12],S=e[13],y=e[14],_=e[15],w=f*y*u-S*h*u+S*l*p-s*y*p-f*l*_+s*h*_,A=v*h*u-c*y*u-v*l*p+a*y*p+c*l*_-a*h*_,E=c*S*u-v*f*u+v*s*p-a*S*p-c*s*_+a*f*_,P=v*f*l-c*S*l-v*s*h+a*S*h+c*s*y-a*f*y,O=t*w+r*A+i*E+o*P;if(O===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const L=1/O;return e[0]=w*L,e[1]=(S*h*o-f*y*o-S*i*p+r*y*p+f*i*_-r*h*_)*L,e[2]=(s*y*o-S*l*o+S*i*u-r*y*u-s*i*_+r*l*_)*L,e[3]=(f*l*o-s*h*o-f*i*u+r*h*u+s*i*p-r*l*p)*L,e[4]=A*L,e[5]=(c*y*o-v*h*o+v*i*p-t*y*p-c*i*_+t*h*_)*L,e[6]=(v*l*o-a*y*o-v*i*u+t*y*u+a*i*_-t*l*_)*L,e[7]=(a*h*o-c*l*o+c*i*u-t*h*u-a*i*p+t*l*p)*L,e[8]=E*L,e[9]=(v*f*o-c*S*o-v*r*p+t*S*p+c*r*_-t*f*_)*L,e[10]=(a*S*o-v*s*o+v*r*u-t*S*u-a*r*_+t*s*_)*L,e[11]=(c*s*o-a*f*o-c*r*u+t*f*u+a*r*p-t*s*p)*L,e[12]=P*L,e[13]=(c*S*i-v*f*i+v*r*h-t*S*h-c*r*y+t*f*y)*L,e[14]=(v*s*i-a*S*i-v*r*l+t*S*l+a*r*y-t*s*y)*L,e[15]=(a*f*i-c*s*i+c*r*l-t*f*l-a*r*h+t*s*h)*L,this}scale(e){const t=this.elements,r=e.x,i=e.y,o=e.z;return t[0]*=r,t[4]*=i,t[8]*=o,t[1]*=r,t[5]*=i,t[9]*=o,t[2]*=r,t[6]*=i,t[10]*=o,t[3]*=r,t[7]*=i,t[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),o=1-r,a=e.x,s=e.y,l=e.z,u=o*a,c=o*s;return this.set(u*a+r,u*s-i*l,u*l+i*s,0,u*s+i*l,c*s+r,c*l-i*a,0,u*l-i*s,c*l+i*a,o*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,o,a){return this.set(1,r,o,0,e,1,a,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,o=t._x,a=t._y,s=t._z,l=t._w,u=o+o,c=a+a,f=s+s,h=o*u,p=o*c,v=o*f,S=a*c,y=a*f,_=s*f,w=l*u,A=l*c,E=l*f,P=r.x,O=r.y,L=r.z;return i[0]=(1-(S+_))*P,i[1]=(p+E)*P,i[2]=(v-A)*P,i[3]=0,i[4]=(p-E)*O,i[5]=(1-(h+_))*O,i[6]=(y+w)*O,i[7]=0,i[8]=(v+A)*L,i[9]=(y-w)*L,i[10]=(1-(h+S))*L,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let o=Am.set(i[0],i[1],i[2]).length();const a=Am.set(i[4],i[5],i[6]).length(),s=Am.set(i[8],i[9],i[10]).length();this.determinant()<0&&(o=-o),e.x=i[12],e.y=i[13],e.z=i[14],yc.copy(this);const u=1/o,c=1/a,f=1/s;return yc.elements[0]*=u,yc.elements[1]*=u,yc.elements[2]*=u,yc.elements[4]*=c,yc.elements[5]*=c,yc.elements[6]*=c,yc.elements[8]*=f,yc.elements[9]*=f,yc.elements[10]*=f,t.setFromRotationMatrix(yc),r.x=o,r.y=a,r.z=s,this}makePerspective(e,t,r,i,o,a,s=df){const l=this.elements,u=2*o/(t-e),c=2*o/(r-i),f=(t+e)/(t-e),h=(r+i)/(r-i);let p,v;if(s===df)p=-(a+o)/(a-o),v=-2*a*o/(a-o);else if(s===O0)p=-a/(a-o),v=-a*o/(a-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+s);return l[0]=u,l[4]=0,l[8]=f,l[12]=0,l[1]=0,l[5]=c,l[9]=h,l[13]=0,l[2]=0,l[6]=0,l[10]=p,l[14]=v,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,r,i,o,a,s=df){const l=this.elements,u=1/(t-e),c=1/(r-i),f=1/(a-o),h=(t+e)*u,p=(r+i)*c;let v,S;if(s===df)v=(a+o)*f,S=-2*f;else if(s===O0)v=o*f,S=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+s);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-h,l[1]=0,l[5]=2*c,l[9]=0,l[13]=-p,l[2]=0,l[6]=0,l[10]=S,l[14]=-v,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const Am=new Pe,yc=new Qn,rQ=new Pe(0,0,0),iQ=new Pe(1,1,1),qd=new Pe,q1=new Pe,iu=new Pe,K3=new Qn,J3=new kl;class du{constructor(e=0,t=0,r=0,i=du.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,o=i[0],a=i[4],s=i[8],l=i[1],u=i[5],c=i[9],f=i[2],h=i[6],p=i[10];switch(t){case"XYZ":this._y=Math.asin(qo(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-qo(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,p),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-f,o),this._z=0);break;case"ZXY":this._x=Math.asin(qo(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-f,p),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-qo(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(h,p),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(qo(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-f,o)):(this._x=0,this._y=Math.atan2(s,p));break;case"XZY":this._z=Math.asin(-qo(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-c,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return K3.makeRotationFromQuaternion(e),this.setFromRotationMatrix(K3,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return J3.setFromEuler(this),this.setFromQuaternion(J3,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}du.DEFAULT_ORDER="XYZ";class Mp{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let oQ=0;const Z3=new Pe,Em=new kl,jf=new Qn,W1=new Pe,Sv=new Pe,aQ=new Pe,sQ=new kl,Q3=new Pe(1,0,0),eL=new Pe(0,1,0),tL=new Pe(0,0,1),nL={type:"added"},lQ={type:"removed"},Tm={type:"childadded",child:null},Xb={type:"childremoved",child:null};class ti extends Mf{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:oQ++}),this.uuid=cu(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ti.DEFAULT_UP.clone();const e=new Pe,t=new du,r=new kl,i=new Pe(1,1,1);function o(){r.setFromEuler(t,!1)}function a(){t.setFromQuaternion(r,void 0,!1)}t._onChange(o),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Qn},normalMatrix:{value:new yr}}),this.matrix=new Qn,this.matrixWorld=new Qn,this.matrixAutoUpdate=ti.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=ti.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Mp,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Em.setFromAxisAngle(e,t),this.quaternion.multiply(Em),this}rotateOnWorldAxis(e,t){return Em.setFromAxisAngle(e,t),this.quaternion.premultiply(Em),this}rotateX(e){return this.rotateOnAxis(Q3,e)}rotateY(e){return this.rotateOnAxis(eL,e)}rotateZ(e){return this.rotateOnAxis(tL,e)}translateOnAxis(e,t){return Z3.copy(e).applyQuaternion(this.quaternion),this.position.add(Z3.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Q3,e)}translateY(e){return this.translateOnAxis(eL,e)}translateZ(e){return this.translateOnAxis(tL,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(jf.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?W1.copy(e):W1.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),Sv.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?jf.lookAt(Sv,W1,this.up):jf.lookAt(W1,Sv,this.up),this.quaternion.setFromRotationMatrix(jf),i&&(jf.extractRotation(i.matrixWorld),Em.setFromRotationMatrix(jf),this.quaternion.premultiply(Em.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(nL),Tm.child=e,this.dispatchEvent(Tm),Tm.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(lQ),Xb.child=e,this.dispatchEvent(Xb),Xb.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),jf.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),jf.multiply(e.parent.matrixWorld)),e.applyMatrix4(jf),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(nL),Tm.child=e,this.dispatchEvent(Tm),Tm.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const a=this.children[r].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t,r=[]){this[e]===t&&r.push(this);const i=this.children;for(let o=0,a=i.length;o<a;o++)i[o].getObjectsByProperty(e,t,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Sv,e,aQ),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Sv,sQ,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const i=this.children;for(let o=0,a=i.length;o<a;o++)i[o].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(s=>({boxInitialized:s.boxInitialized,boxMin:s.box.min.toArray(),boxMax:s.box.max.toArray(),sphereInitialized:s.sphereInitialized,sphereRadius:s.sphere.radius,sphereCenter:s.sphere.center.toArray()})),i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function o(s,l){return s[l.uuid]===void 0&&(s[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=o(e.geometries,this.geometry);const s=this.geometry.parameters;if(s!==void 0&&s.shapes!==void 0){const l=s.shapes;if(Array.isArray(l))for(let u=0,c=l.length;u<c;u++){const f=l[u];o(e.shapes,f)}else o(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const s=[];for(let l=0,u=this.material.length;l<u;l++)s.push(o(e.materials,this.material[l]));i.material=s}else i.material=o(e.materials,this.material);if(this.children.length>0){i.children=[];for(let s=0;s<this.children.length;s++)i.children.push(this.children[s].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let s=0;s<this.animations.length;s++){const l=this.animations[s];i.animations.push(o(e.animations,l))}}if(t){const s=a(e.geometries),l=a(e.materials),u=a(e.textures),c=a(e.images),f=a(e.shapes),h=a(e.skeletons),p=a(e.animations),v=a(e.nodes);s.length>0&&(r.geometries=s),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),c.length>0&&(r.images=c),f.length>0&&(r.shapes=f),h.length>0&&(r.skeletons=h),p.length>0&&(r.animations=p),v.length>0&&(r.nodes=v)}return r.object=i,r;function a(s){const l=[];for(const u in s){const c=s[u];delete c.metadata,l.push(c)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}ti.DEFAULT_UP=new Pe(0,1,0);ti.DEFAULT_MATRIX_AUTO_UPDATE=!0;ti.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const xc=new Pe,$f=new Pe,Yb=new Pe,Xf=new Pe,Mm=new Pe,Cm=new Pe,rL=new Pe,Kb=new Pe,Jb=new Pe,Zb=new Pe,Qb=new Yr,e2=new Yr,t2=new Yr;class Ll{constructor(e=new Pe,t=new Pe,r=new Pe){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),xc.subVectors(e,t),i.cross(xc);const o=i.lengthSq();return o>0?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}static getBarycoord(e,t,r,i,o){xc.subVectors(i,t),$f.subVectors(r,t),Yb.subVectors(e,t);const a=xc.dot(xc),s=xc.dot($f),l=xc.dot(Yb),u=$f.dot($f),c=$f.dot(Yb),f=a*u-s*s;if(f===0)return o.set(0,0,0),null;const h=1/f,p=(u*l-s*c)*h,v=(a*c-s*l)*h;return o.set(1-p-v,v,p)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,Xf)===null?!1:Xf.x>=0&&Xf.y>=0&&Xf.x+Xf.y<=1}static getInterpolation(e,t,r,i,o,a,s,l){return this.getBarycoord(e,t,r,i,Xf)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(o,Xf.x),l.addScaledVector(a,Xf.y),l.addScaledVector(s,Xf.z),l)}static getInterpolatedAttribute(e,t,r,i,o,a){return Qb.setScalar(0),e2.setScalar(0),t2.setScalar(0),Qb.fromBufferAttribute(e,t),e2.fromBufferAttribute(e,r),t2.fromBufferAttribute(e,i),a.setScalar(0),a.addScaledVector(Qb,o.x),a.addScaledVector(e2,o.y),a.addScaledVector(t2,o.z),a}static isFrontFacing(e,t,r,i){return xc.subVectors(r,t),$f.subVectors(e,t),xc.cross($f).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return xc.subVectors(this.c,this.b),$f.subVectors(this.a,this.b),xc.cross($f).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ll.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Ll.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,r,i,o){return Ll.getInterpolation(e,this.a,this.b,this.c,t,r,i,o)}containsPoint(e){return Ll.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ll.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,o=this.c;let a,s;Mm.subVectors(i,r),Cm.subVectors(o,r),Kb.subVectors(e,r);const l=Mm.dot(Kb),u=Cm.dot(Kb);if(l<=0&&u<=0)return t.copy(r);Jb.subVectors(e,i);const c=Mm.dot(Jb),f=Cm.dot(Jb);if(c>=0&&f<=c)return t.copy(i);const h=l*f-c*u;if(h<=0&&l>=0&&c<=0)return a=l/(l-c),t.copy(r).addScaledVector(Mm,a);Zb.subVectors(e,o);const p=Mm.dot(Zb),v=Cm.dot(Zb);if(v>=0&&p<=v)return t.copy(o);const S=p*u-l*v;if(S<=0&&u>=0&&v<=0)return s=u/(u-v),t.copy(r).addScaledVector(Cm,s);const y=c*v-p*f;if(y<=0&&f-c>=0&&p-v>=0)return rL.subVectors(o,i),s=(f-c)/(f-c+(p-v)),t.copy(i).addScaledVector(rL,s);const _=1/(y+S+h);return a=S*_,s=h*_,t.copy(r).addScaledVector(Mm,a).addScaledVector(Cm,s)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Gz={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Wd={h:0,s:0,l:0},j1={h:0,s:0,l:0};function n2(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}let xn=class{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Zs){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Gr.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=Gr.workingColorSpace){return this.r=e,this.g=t,this.b=r,Gr.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=Gr.workingColorSpace){if(e=RP(e,1),t=qo(t,0,1),r=qo(r,0,1),t===0)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+t):r+t-r*t,a=2*r-o;this.r=n2(a,o,e+1/3),this.g=n2(a,o,e),this.b=n2(a,o,e-1/3)}return Gr.toWorkingColorSpace(this,i),this}setStyle(e,t=Zs){function r(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let o;const a=i[1],s=i[2];switch(a){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,t);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,t);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=i[1],a=o.length;if(a===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,t);if(a===6)return this.setHex(parseInt(o,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Zs){const r=Gz[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=rd(e.r),this.g=rd(e.g),this.b=rd(e.b),this}copyLinearToSRGB(e){return this.r=ug(e.r),this.g=ug(e.g),this.b=ug(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Zs){return Gr.fromWorkingColorSpace(Es.copy(this),e),Math.round(qo(Es.r*255,0,255))*65536+Math.round(qo(Es.g*255,0,255))*256+Math.round(qo(Es.b*255,0,255))}getHexString(e=Zs){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Gr.workingColorSpace){Gr.fromWorkingColorSpace(Es.copy(this),t);const r=Es.r,i=Es.g,o=Es.b,a=Math.max(r,i,o),s=Math.min(r,i,o);let l,u;const c=(s+a)/2;if(s===a)l=0,u=0;else{const f=a-s;switch(u=c<=.5?f/(a+s):f/(2-a-s),a){case r:l=(i-o)/f+(i<o?6:0);break;case i:l=(o-r)/f+2;break;case o:l=(r-i)/f+4;break}l/=6}return e.h=l,e.s=u,e.l=c,e}getRGB(e,t=Gr.workingColorSpace){return Gr.fromWorkingColorSpace(Es.copy(this),t),e.r=Es.r,e.g=Es.g,e.b=Es.b,e}getStyle(e=Zs){Gr.fromWorkingColorSpace(Es.copy(this),e);const t=Es.r,r=Es.g,i=Es.b;return e!==Zs?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(Wd),this.setHSL(Wd.h+e,Wd.s+t,Wd.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(Wd),e.getHSL(j1);const r=f0(Wd.h,j1.h,t),i=f0(Wd.s,j1.s,t),o=f0(Wd.l,j1.l,t);return this.setHSL(r,i,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,o=e.elements;return this.r=o[0]*t+o[3]*r+o[6]*i,this.g=o[1]*t+o[4]*r+o[7]*i,this.b=o[2]*t+o[5]*r+o[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const Es=new xn;xn.NAMES=Gz;let uQ=0;class ds extends Mf{static get type(){return"Material"}get type(){return this.constructor.type}set type(e){}constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:uQ++}),this.uuid=cu(),this.name="",this.blending=Ap,this.side=ld,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=c_,this.blendDst=f_,this.blendEquation=rh,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new xn(0,0,0),this.blendAlpha=0,this.depthFunc=Fp,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=_C,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ap,this.stencilZFail=ap,this.stencilZPass=ap,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Ap&&(r.blending=this.blending),this.side!==ld&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==c_&&(r.blendSrc=this.blendSrc),this.blendDst!==f_&&(r.blendDst=this.blendDst),this.blendEquation!==rh&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==Fp&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==_C&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==ap&&(r.stencilFail=this.stencilFail),this.stencilZFail!==ap&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==ap&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(o){const a=[];for(const s in o){const l=o[s];delete l.metadata,a.push(l)}return a}if(t){const o=i(e.textures),a=i(e.images);o.length>0&&(r.textures=o),a.length>0&&(r.images=a)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let o=0;o!==i;++o)r[o]=t[o].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class pd extends ds{static get type(){return"MeshBasicMaterial"}constructor(e){super(),this.isMeshBasicMaterial=!0,this.color=new xn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new du,this.combine=Dy,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Zf=cQ();function cQ(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):u<-14?(r[l]=1024>>-u-14,r[l|256]=1024>>-u-14|32768,i[l]=-u-1,i[l|256]=-u-1):u<=15?(r[l]=u+15<<10,r[l|256]=u+15<<10|32768,i[l]=13,i[l|256]=13):u<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const o=new Uint32Array(2048),a=new Uint32Array(64),s=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,c=0;for(;(u&8388608)===0;)u<<=1,c-=8388608;u&=-8388609,c+=947912704,o[l]=u|c}for(let l=1024;l<2048;++l)o[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(s[l]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:o,exponentTable:a,offsetTable:s}}function Nl(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=qo(n,-65504,65504),Zf.floatView[0]=n;const e=Zf.uint32View[0],t=e>>23&511;return Zf.baseTable[t]+((e&8388607)>>Zf.shiftTable[t])}function Kv(n){const e=n>>10;return Zf.uint32View[0]=Zf.mantissaTable[Zf.offsetTable[e]+(n&1023)]+Zf.exponentTable[e],Zf.floatView[0]}const mp={toHalfFloat:Nl,fromHalfFloat:Kv},ga=new Pe,$1=new zt;class Oi{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=L0,this.updateRanges=[],this.gpuType=go,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,o=this.itemSize;i<o;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)$1.fromBufferAttribute(this,t),$1.applyMatrix3(e),this.setXY(t,$1.x,$1.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)ga.fromBufferAttribute(this,t),ga.applyMatrix3(e),this.setXYZ(t,ga.x,ga.y,ga.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)ga.fromBufferAttribute(this,t),ga.applyMatrix4(e),this.setXYZ(t,ga.x,ga.y,ga.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)ga.fromBufferAttribute(this,t),ga.applyNormalMatrix(e),this.setXYZ(t,ga.x,ga.y,ga.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)ga.fromBufferAttribute(this,t),ga.transformDirection(e),this.setXYZ(t,ga.x,ga.y,ga.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=Qs(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=Sr(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Qs(t,this.array)),t}setX(e,t){return this.normalized&&(t=Sr(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Qs(t,this.array)),t}setY(e,t){return this.normalized&&(t=Sr(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Qs(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Sr(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Qs(t,this.array)),t}setW(e,t){return this.normalized&&(t=Sr(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Sr(t,this.array),r=Sr(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Sr(t,this.array),r=Sr(r,this.array),i=Sr(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,o){return e*=this.itemSize,this.normalized&&(t=Sr(t,this.array),r=Sr(r,this.array),i=Sr(i,this.array),o=Sr(o,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==L0&&(e.usage=this.usage),e}}class fQ extends Oi{constructor(e,t,r){super(new Int8Array(e),t,r)}}class dQ extends Oi{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class hQ extends Oi{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class pQ extends Oi{constructor(e,t,r){super(new Int16Array(e),t,r)}}class LP extends Oi{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class mQ extends Oi{constructor(e,t,r){super(new Int32Array(e),t,r)}}class OP extends Oi{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class gQ extends Oi{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}getX(e){let t=Kv(this.array[e*this.itemSize]);return this.normalized&&(t=Qs(t,this.array)),t}setX(e,t){return this.normalized&&(t=Sr(t,this.array)),this.array[e*this.itemSize]=Nl(t),this}getY(e){let t=Kv(this.array[e*this.itemSize+1]);return this.normalized&&(t=Qs(t,this.array)),t}setY(e,t){return this.normalized&&(t=Sr(t,this.array)),this.array[e*this.itemSize+1]=Nl(t),this}getZ(e){let t=Kv(this.array[e*this.itemSize+2]);return this.normalized&&(t=Qs(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Sr(t,this.array)),this.array[e*this.itemSize+2]=Nl(t),this}getW(e){let t=Kv(this.array[e*this.itemSize+3]);return this.normalized&&(t=Qs(t,this.array)),t}setW(e,t){return this.normalized&&(t=Sr(t,this.array)),this.array[e*this.itemSize+3]=Nl(t),this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Sr(t,this.array),r=Sr(r,this.array)),this.array[e+0]=Nl(t),this.array[e+1]=Nl(r),this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Sr(t,this.array),r=Sr(r,this.array),i=Sr(i,this.array)),this.array[e+0]=Nl(t),this.array[e+1]=Nl(r),this.array[e+2]=Nl(i),this}setXYZW(e,t,r,i,o){return e*=this.itemSize,this.normalized&&(t=Sr(t,this.array),r=Sr(r,this.array),i=Sr(i,this.array),o=Sr(o,this.array)),this.array[e+0]=Nl(t),this.array[e+1]=Nl(r),this.array[e+2]=Nl(i),this.array[e+3]=Nl(o),this}}class Ln extends Oi{constructor(e,t,r){super(new Float32Array(e),t,r)}}let vQ=0;const Ru=new Qn,r2=new ti,Pm=new Pe,ou=new rl,wv=new rl,Ka=new Pe;class wr extends Mf{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:vQ++}),this.uuid=cu(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Bz(e)?OP:LP)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const o=new yr().getNormalMatrix(e);r.applyNormalMatrix(o),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ru.makeRotationFromQuaternion(e),this.applyMatrix4(Ru),this}rotateX(e){return Ru.makeRotationX(e),this.applyMatrix4(Ru),this}rotateY(e){return Ru.makeRotationY(e),this.applyMatrix4(Ru),this}rotateZ(e){return Ru.makeRotationZ(e),this.applyMatrix4(Ru),this}translate(e,t,r){return Ru.makeTranslation(e,t,r),this.applyMatrix4(Ru),this}scale(e,t,r){return Ru.makeScale(e,t,r),this.applyMatrix4(Ru),this}lookAt(e){return r2.lookAt(e),r2.updateMatrix(),this.applyMatrix4(r2.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Pm).negate(),this.translate(Pm.x,Pm.y,Pm.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const r=[];for(let i=0,o=e.length;i<o;i++){const a=e[i];r.push(a.x,a.y,a.z||0)}this.setAttribute("position",new Ln(r,3))}else{for(let r=0,i=t.count;r<i;r++){const o=e[r];t.setXYZ(r,o.x,o.y,o.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new rl);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Pe(-1/0,-1/0,-1/0),new Pe(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const o=t[r];ou.setFromBufferAttribute(o),this.morphTargetsRelative?(Ka.addVectors(this.boundingBox.min,ou.min),this.boundingBox.expandByPoint(Ka),Ka.addVectors(this.boundingBox.max,ou.max),this.boundingBox.expandByPoint(Ka)):(this.boundingBox.expandByPoint(ou.min),this.boundingBox.expandByPoint(ou.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ds);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Pe,1/0);return}if(e){const r=this.boundingSphere.center;if(ou.setFromBufferAttribute(e),t)for(let o=0,a=t.length;o<a;o++){const s=t[o];wv.setFromBufferAttribute(s),this.morphTargetsRelative?(Ka.addVectors(ou.min,wv.min),ou.expandByPoint(Ka),Ka.addVectors(ou.max,wv.max),ou.expandByPoint(Ka)):(ou.expandByPoint(wv.min),ou.expandByPoint(wv.max))}ou.getCenter(r);let i=0;for(let o=0,a=e.count;o<a;o++)Ka.fromBufferAttribute(e,o),i=Math.max(i,r.distanceToSquared(Ka));if(t)for(let o=0,a=t.length;o<a;o++){const s=t[o],l=this.morphTargetsRelative;for(let u=0,c=s.count;u<c;u++)Ka.fromBufferAttribute(s,u),l&&(Pm.fromBufferAttribute(e,u),Ka.add(Pm)),i=Math.max(i,r.distanceToSquared(Ka))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=t.position,i=t.normal,o=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Oi(new Float32Array(4*r.count),4));const a=this.getAttribute("tangent"),s=[],l=[];for(let D=0;D<r.count;D++)s[D]=new Pe,l[D]=new Pe;const u=new Pe,c=new Pe,f=new Pe,h=new zt,p=new zt,v=new zt,S=new Pe,y=new Pe;function _(D,F,U){u.fromBufferAttribute(r,D),c.fromBufferAttribute(r,F),f.fromBufferAttribute(r,U),h.fromBufferAttribute(o,D),p.fromBufferAttribute(o,F),v.fromBufferAttribute(o,U),c.sub(u),f.sub(u),p.sub(h),v.sub(h);const k=1/(p.x*v.y-v.x*p.y);isFinite(k)&&(S.copy(c).multiplyScalar(v.y).addScaledVector(f,-p.y).multiplyScalar(k),y.copy(f).multiplyScalar(p.x).addScaledVector(c,-v.x).multiplyScalar(k),s[D].add(S),s[F].add(S),s[U].add(S),l[D].add(y),l[F].add(y),l[U].add(y))}let w=this.groups;w.length===0&&(w=[{start:0,count:e.count}]);for(let D=0,F=w.length;D<F;++D){const U=w[D],k=U.start,z=U.count;for(let W=k,j=k+z;W<j;W+=3)_(e.getX(W+0),e.getX(W+1),e.getX(W+2))}const A=new Pe,E=new Pe,P=new Pe,O=new Pe;function L(D){P.fromBufferAttribute(i,D),O.copy(P);const F=s[D];A.copy(F),A.sub(P.multiplyScalar(P.dot(F))).normalize(),E.crossVectors(O,F);const k=E.dot(l[D])<0?-1:1;a.setXYZW(D,A.x,A.y,A.z,k)}for(let D=0,F=w.length;D<F;++D){const U=w[D],k=U.start,z=U.count;for(let W=k,j=k+z;W<j;W+=3)L(e.getX(W+0)),L(e.getX(W+1)),L(e.getX(W+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Oi(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let h=0,p=r.count;h<p;h++)r.setXYZ(h,0,0,0);const i=new Pe,o=new Pe,a=new Pe,s=new Pe,l=new Pe,u=new Pe,c=new Pe,f=new Pe;if(e)for(let h=0,p=e.count;h<p;h+=3){const v=e.getX(h+0),S=e.getX(h+1),y=e.getX(h+2);i.fromBufferAttribute(t,v),o.fromBufferAttribute(t,S),a.fromBufferAttribute(t,y),c.subVectors(a,o),f.subVectors(i,o),c.cross(f),s.fromBufferAttribute(r,v),l.fromBufferAttribute(r,S),u.fromBufferAttribute(r,y),s.add(c),l.add(c),u.add(c),r.setXYZ(v,s.x,s.y,s.z),r.setXYZ(S,l.x,l.y,l.z),r.setXYZ(y,u.x,u.y,u.z)}else for(let h=0,p=t.count;h<p;h+=3)i.fromBufferAttribute(t,h+0),o.fromBufferAttribute(t,h+1),a.fromBufferAttribute(t,h+2),c.subVectors(a,o),f.subVectors(i,o),c.cross(f),r.setXYZ(h+0,c.x,c.y,c.z),r.setXYZ(h+1,c.x,c.y,c.z),r.setXYZ(h+2,c.x,c.y,c.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)Ka.fromBufferAttribute(e,t),Ka.normalize(),e.setXYZ(t,Ka.x,Ka.y,Ka.z)}toNonIndexed(){function e(s,l){const u=s.array,c=s.itemSize,f=s.normalized,h=new u.constructor(l.length*c);let p=0,v=0;for(let S=0,y=l.length;S<y;S++){s.isInterleavedBufferAttribute?p=l[S]*s.data.stride+s.offset:p=l[S]*c;for(let _=0;_<c;_++)h[v++]=u[p++]}return new Oi(h,c,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new wr,r=this.index.array,i=this.attributes;for(const s in i){const l=i[s],u=e(l,r);t.setAttribute(s,u)}const o=this.morphAttributes;for(const s in o){const l=[],u=o[s];for(let c=0,f=u.length;c<f;c++){const h=u[c],p=e(h,r);l.push(p)}t.morphAttributes[s]=l}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let s=0,l=a.length;s<l;s++){const u=a[s];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const u=r[l];e.data.attributes[l]=u.toJSON(e.data)}const i={};let o=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],c=[];for(let f=0,h=u.length;f<h;f++){const p=u[f];c.push(p.toJSON(e.data))}c.length>0&&(i[l]=c,o=!0)}o&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const s=this.boundingSphere;return s!==null&&(e.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const u in i){const c=i[u];this.setAttribute(u,c.clone(t))}const o=e.morphAttributes;for(const u in o){const c=[],f=o[u];for(let h=0,p=f.length;h<p;h++)c.push(f[h].clone(t));this.morphAttributes[u]=c}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let u=0,c=a.length;u<c;u++){const f=a[u];this.addGroup(f.start,f.count,f.materialIndex)}const s=e.boundingBox;s!==null&&(this.boundingBox=s.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const iL=new Qn,$h=new $g,X1=new Ds,oL=new Pe,Y1=new Pe,K1=new Pe,J1=new Pe,i2=new Pe,Z1=new Pe,aL=new Pe,Q1=new Pe;class Co extends ti{constructor(e=new wr,t=new pd){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,a=i.length;o<a;o++){const s=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=o}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,o=r.morphAttributes.position,a=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const s=this.morphTargetInfluences;if(o&&s){Z1.set(0,0,0);for(let l=0,u=o.length;l<u;l++){const c=s[l],f=o[l];c!==0&&(i2.fromBufferAttribute(f,e),a?Z1.addScaledVector(i2,c):Z1.addScaledVector(i2.sub(t),c))}t.add(Z1)}return t}raycast(e,t){const r=this.geometry,i=this.material,o=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),X1.copy(r.boundingSphere),X1.applyMatrix4(o),$h.copy(e.ray).recast(e.near),!(X1.containsPoint($h.origin)===!1&&($h.intersectSphere(X1,oL)===null||$h.origin.distanceToSquared(oL)>(e.far-e.near)**2))&&(iL.copy(o).invert(),$h.copy(e.ray).applyMatrix4(iL),!(r.boundingBox!==null&&$h.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,$h)))}_computeIntersections(e,t,r){let i;const o=this.geometry,a=this.material,s=o.index,l=o.attributes.position,u=o.attributes.uv,c=o.attributes.uv1,f=o.attributes.normal,h=o.groups,p=o.drawRange;if(s!==null)if(Array.isArray(a))for(let v=0,S=h.length;v<S;v++){const y=h[v],_=a[y.materialIndex],w=Math.max(y.start,p.start),A=Math.min(s.count,Math.min(y.start+y.count,p.start+p.count));for(let E=w,P=A;E<P;E+=3){const O=s.getX(E),L=s.getX(E+1),D=s.getX(E+2);i=ex(this,_,e,r,u,c,f,O,L,D),i&&(i.faceIndex=Math.floor(E/3),i.face.materialIndex=y.materialIndex,t.push(i))}}else{const v=Math.max(0,p.start),S=Math.min(s.count,p.start+p.count);for(let y=v,_=S;y<_;y+=3){const w=s.getX(y),A=s.getX(y+1),E=s.getX(y+2);i=ex(this,a,e,r,u,c,f,w,A,E),i&&(i.faceIndex=Math.floor(y/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(a))for(let v=0,S=h.length;v<S;v++){const y=h[v],_=a[y.materialIndex],w=Math.max(y.start,p.start),A=Math.min(l.count,Math.min(y.start+y.count,p.start+p.count));for(let E=w,P=A;E<P;E+=3){const O=E,L=E+1,D=E+2;i=ex(this,_,e,r,u,c,f,O,L,D),i&&(i.faceIndex=Math.floor(E/3),i.face.materialIndex=y.materialIndex,t.push(i))}}else{const v=Math.max(0,p.start),S=Math.min(l.count,p.start+p.count);for(let y=v,_=S;y<_;y+=3){const w=y,A=y+1,E=y+2;i=ex(this,a,e,r,u,c,f,w,A,E),i&&(i.faceIndex=Math.floor(y/3),t.push(i))}}}}function yQ(n,e,t,r,i,o,a,s){let l;if(e.side===nl?l=r.intersectTriangle(a,o,i,!0,s):l=r.intersectTriangle(i,o,a,e.side===ld,s),l===null)return null;Q1.copy(s),Q1.applyMatrix4(n.matrixWorld);const u=t.ray.origin.distanceTo(Q1);return u<t.near||u>t.far?null:{distance:u,point:Q1.clone(),object:n}}function ex(n,e,t,r,i,o,a,s,l,u){n.getVertexPosition(s,Y1),n.getVertexPosition(l,K1),n.getVertexPosition(u,J1);const c=yQ(n,e,t,r,Y1,K1,J1,aL);if(c){const f=new Pe;Ll.getBarycoord(aL,Y1,K1,J1,f),i&&(c.uv=Ll.getInterpolatedAttribute(i,s,l,u,f,new zt)),o&&(c.uv1=Ll.getInterpolatedAttribute(o,s,l,u,f,new zt)),a&&(c.normal=Ll.getInterpolatedAttribute(a,s,l,u,f,new Pe),c.normal.dot(r.direction)>0&&c.normal.multiplyScalar(-1));const h={a:s,b:l,c:u,normal:new Pe,materialIndex:0};Ll.getNormal(Y1,K1,J1,h.normal),c.face=h,c.barycoord=f}return c}class Yp extends wr{constructor(e=1,t=1,r=1,i=1,o=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:o,depthSegments:a};const s=this;i=Math.floor(i),o=Math.floor(o),a=Math.floor(a);const l=[],u=[],c=[],f=[];let h=0,p=0;v("z","y","x",-1,-1,r,t,e,a,o,0),v("z","y","x",1,-1,r,t,-e,a,o,1),v("x","z","y",1,1,e,r,t,i,a,2),v("x","z","y",1,-1,e,r,-t,i,a,3),v("x","y","z",1,-1,e,t,r,i,o,4),v("x","y","z",-1,-1,e,t,-r,i,o,5),this.setIndex(l),this.setAttribute("position",new Ln(u,3)),this.setAttribute("normal",new Ln(c,3)),this.setAttribute("uv",new Ln(f,2));function v(S,y,_,w,A,E,P,O,L,D,F){const U=E/L,k=P/D,z=E/2,W=P/2,j=O/2,se=L+1,Y=D+1;let Q=0,X=0;const Z=new Pe;for(let oe=0;oe<Y;oe++){const ee=oe*k-W;for(let G=0;G<se;G++){const ne=G*U-z;Z[S]=ne*w,Z[y]=ee*A,Z[_]=j,u.push(Z.x,Z.y,Z.z),Z[S]=0,Z[y]=0,Z[_]=O>0?1:-1,c.push(Z.x,Z.y,Z.z),f.push(G/L),f.push(1-oe/D),Q+=1}}for(let oe=0;oe<D;oe++)for(let ee=0;ee<L;ee++){const G=h+ee+se*oe,ne=h+ee+se*(oe+1),te=h+(ee+1)+se*(oe+1),de=h+(ee+1)+se*oe;l.push(G,ne,de),l.push(ne,te,de),X+=6}s.addGroup(p,X,F),p+=X,h+=Q}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Yp(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function yg(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function Ks(n){const e={};for(let t=0;t<n.length;t++){const r=yg(n[t]);for(const i in r)e[i]=r[i]}return e}function xQ(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function qz(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Gr.workingColorSpace}const DP={clone:yg,merge:Ks};var _Q=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,SQ=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ol extends ds{static get type(){return"ShaderMaterial"}constructor(e){super(),this.isShaderMaterial=!0,this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=_Q,this.fragmentShader=SQ,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=yg(e.uniforms),this.uniformsGroups=xQ(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const a=this.uniforms[i].value;a&&a.isTexture?t.uniforms[i]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[i]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[i]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[i]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[i]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[i]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[i]={type:"m4",value:a.toArray()}:t.uniforms[i]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class zy extends ti{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Qn,this.projectionMatrix=new Qn,this.projectionMatrixInverse=new Qn,this.coordinateSystem=df}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const jd=new Pe,sL=new zt,lL=new zt;let Qa=class extends zy{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=vg*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Tp*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return vg*2*Math.atan(Math.tan(Tp*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,r){jd.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(jd.x,jd.y).multiplyScalar(-e/jd.z),jd.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(jd.x,jd.y).multiplyScalar(-e/jd.z)}getViewSize(e,t){return this.getViewBounds(e,sL,lL),t.subVectors(lL,sL)}setViewOffset(e,t,r,i,o,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Tp*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,o=-.5*i;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,u=a.fullHeight;o+=a.offsetX*i/l,t-=a.offsetY*r/u,i*=a.width/l,r*=a.height/u}const s=this.filmOffset;s!==0&&(o+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+i,t,t-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};const Im=-90,Rm=1;class Wz extends ti{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Qa(Im,Rm,e,t);i.layers=this.layers,this.add(i);const o=new Qa(Im,Rm,e,t);o.layers=this.layers,this.add(o);const a=new Qa(Im,Rm,e,t);a.layers=this.layers,this.add(a);const s=new Qa(Im,Rm,e,t);s.layers=this.layers,this.add(s);const l=new Qa(Im,Rm,e,t);l.layers=this.layers,this.add(l);const u=new Qa(Im,Rm,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,o,a,s,l]=t;for(const u of t)this.remove(u);if(e===df)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),s.up.set(0,1,0),s.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===O0)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),s.up.set(0,-1,0),s.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[o,a,s,l,u,c]=this.children,f=e.getRenderTarget(),h=e.getActiveCubeFace(),p=e.getActiveMipmapLevel(),v=e.xr.enabled;e.xr.enabled=!1;const S=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(t,o),e.setRenderTarget(r,1,i),e.render(t,a),e.setRenderTarget(r,2,i),e.render(t,s),e.setRenderTarget(r,3,i),e.render(t,l),e.setRenderTarget(r,4,i),e.render(t,u),r.texture.generateMipmaps=S,e.setRenderTarget(r,5,i),e.render(t,c),e.setRenderTarget(f,h,p),e.xr.enabled=v,r.texture.needsPMREMUpdate=!0}}class Hy extends Mi{constructor(e,t,r,i,o,a,s,l,u,c){e=e!==void 0?e:[],t=t!==void 0?t:bf,super(e,t,r,i,o,a,s,l,u,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class kP extends Bl{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new Hy(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:mi}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Yp(5,5,5),o=new ol({name:"CubemapFromEquirect",uniforms:yg(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:nl,blending:gf});o.uniforms.tEquirect.value=t;const a=new Co(i,o),s=t.minFilter;return t.minFilter===ff&&(t.minFilter=mi),new Wz(1,10,this).update(e,a),t.minFilter=s,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,r,i){const o=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,r,i);e.setRenderTarget(o)}}const o2=new Pe,wQ=new Pe,bQ=new yr;class eh{constructor(e=new Pe(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=o2.subVectors(r,t).cross(wQ.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(o2),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/i;return o<0||o>1?null:t.copy(e.start).addScaledVector(r,o)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||bQ.getNormalMatrix(e),i=this.coplanarPoint(o2).applyMatrix4(e),o=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Xh=new Ds,tx=new Pe;class Vy{constructor(e=new eh,t=new eh,r=new eh,i=new eh,o=new eh,a=new eh){this.planes=[e,t,r,i,o,a]}set(e,t,r,i,o,a){const s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(r),s[3].copy(i),s[4].copy(o),s[5].copy(a),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=df){const r=this.planes,i=e.elements,o=i[0],a=i[1],s=i[2],l=i[3],u=i[4],c=i[5],f=i[6],h=i[7],p=i[8],v=i[9],S=i[10],y=i[11],_=i[12],w=i[13],A=i[14],E=i[15];if(r[0].setComponents(l-o,h-u,y-p,E-_).normalize(),r[1].setComponents(l+o,h+u,y+p,E+_).normalize(),r[2].setComponents(l+a,h+c,y+v,E+w).normalize(),r[3].setComponents(l-a,h-c,y-v,E-w).normalize(),r[4].setComponents(l-s,h-f,y-S,E-A).normalize(),t===df)r[5].setComponents(l+s,h+f,y+S,E+A).normalize();else if(t===O0)r[5].setComponents(s,f,S,A).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Xh.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Xh.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Xh)}intersectsSprite(e){return Xh.center.set(0,0,0),Xh.radius=.7071067811865476,Xh.applyMatrix4(e.matrixWorld),this.intersectsSphere(Xh)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(tx.x=i.normal.x>0?e.max.x:e.min.x,tx.y=i.normal.y>0?e.max.y:e.min.y,tx.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(tx)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function jz(){let n=null,e=!1,t=null,r=null;function i(o,a){t(o,a),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(o){t=o},setContext:function(o){n=o}}}function AQ(n){const e=new WeakMap;function t(s,l){const u=s.array,c=s.usage,f=u.byteLength,h=n.createBuffer();n.bindBuffer(l,h),n.bufferData(l,u,c),s.onUploadCallback();let p;if(u instanceof Float32Array)p=n.FLOAT;else if(u instanceof Uint16Array)s.isFloat16BufferAttribute?p=n.HALF_FLOAT:p=n.UNSIGNED_SHORT;else if(u instanceof Int16Array)p=n.SHORT;else if(u instanceof Uint32Array)p=n.UNSIGNED_INT;else if(u instanceof Int32Array)p=n.INT;else if(u instanceof Int8Array)p=n.BYTE;else if(u instanceof Uint8Array)p=n.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)p=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:h,type:p,bytesPerElement:u.BYTES_PER_ELEMENT,version:s.version,size:f}}function r(s,l,u){const c=l.array,f=l.updateRanges;if(n.bindBuffer(u,s),f.length===0)n.bufferSubData(u,0,c);else{f.sort((p,v)=>p.start-v.start);let h=0;for(let p=1;p<f.length;p++){const v=f[h],S=f[p];S.start<=v.start+v.count+1?v.count=Math.max(v.count,S.start+S.count-v.start):(++h,f[h]=S)}f.length=h+1;for(let p=0,v=f.length;p<v;p++){const S=f[p];n.bufferSubData(u,S.start*c.BYTES_PER_ELEMENT,c,S.start,S.count)}l.clearUpdateRanges()}l.onUploadCallback()}function i(s){return s.isInterleavedBufferAttribute&&(s=s.data),e.get(s)}function o(s){s.isInterleavedBufferAttribute&&(s=s.data);const l=e.get(s);l&&(n.deleteBuffer(l.buffer),e.delete(s))}function a(s,l){if(s.isInterleavedBufferAttribute&&(s=s.data),s.isGLBufferAttribute){const c=e.get(s);(!c||c.version<s.version)&&e.set(s,{buffer:s.buffer,type:s.type,bytesPerElement:s.elementSize,version:s.version});return}const u=e.get(s);if(u===void 0)e.set(s,t(s,l));else if(u.version<s.version){if(u.size!==s.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(u.buffer,s,l),u.version=s.version}}return{get:i,remove:o,update:a}}class _h extends wr{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const o=e/2,a=t/2,s=Math.floor(r),l=Math.floor(i),u=s+1,c=l+1,f=e/s,h=t/l,p=[],v=[],S=[],y=[];for(let _=0;_<c;_++){const w=_*h-a;for(let A=0;A<u;A++){const E=A*f-o;v.push(E,-w,0),S.push(0,0,1),y.push(A/s),y.push(1-_/l)}}for(let _=0;_<l;_++)for(let w=0;w<s;w++){const A=w+u*_,E=w+u*(_+1),P=w+1+u*(_+1),O=w+1+u*_;p.push(A,E,O),p.push(E,P,O)}this.setIndex(p),this.setAttribute("position",new Ln(v,3)),this.setAttribute("normal",new Ln(S,3)),this.setAttribute("uv",new Ln(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new _h(e.width,e.height,e.widthSegments,e.heightSegments)}}var EQ=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,TQ=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,MQ=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,CQ=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,PQ=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,IQ=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,RQ=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,NQ=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,LQ=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,OQ=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,DQ=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,kQ=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,FQ=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,UQ=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,BQ=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,zQ=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,HQ=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,VQ=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,GQ=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,qQ=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,WQ=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,jQ=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,$Q=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,XQ=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,YQ=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,KQ=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,JQ=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,ZQ=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,QQ=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,eee=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,tee="gl_FragColor = linearToOutputTexel( gl_FragColor );",nee=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,ree=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,iee=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,oee=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,aee=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,see=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,lee=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,uee=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,cee=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fee=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,dee=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,hee=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,pee=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,mee=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,gee=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,vee=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,yee=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,xee=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,_ee=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,See=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,wee=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,bee=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Aee=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Eee=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Tee=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Mee=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Cee=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Pee=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Iee=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Ree=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Nee=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Lee=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Oee=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Dee=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,kee=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Fee=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Uee=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Bee=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,zee=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Hee=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Vee=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Gee=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,qee=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Wee=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,jee=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,$ee=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Xee=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Yee=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Kee=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Jee=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Zee=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Qee=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,ete=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,tte=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,nte=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,rte=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,ite=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,ote=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,ate=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,ste=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,lte=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,ute=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,cte=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,fte=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,dte=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,hte=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,pte=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,mte=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,gte=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,vte=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,yte=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,xte=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,_te=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Ste=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,wte=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,bte=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Ate=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Ete=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Tte=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Mte=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Cte=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Pte=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Ite=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Rte=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,Nte=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Lte=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Ote=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Dte=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,kte=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Fte=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Ute=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Bte=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,zte=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Hte=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Vte=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Gte=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,qte=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Wte=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,jte=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,$te=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Xte=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Yte=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Kte=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Jte=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Zte=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Qte=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,ene=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,tne=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,nne=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,rne=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,br={alphahash_fragment:EQ,alphahash_pars_fragment:TQ,alphamap_fragment:MQ,alphamap_pars_fragment:CQ,alphatest_fragment:PQ,alphatest_pars_fragment:IQ,aomap_fragment:RQ,aomap_pars_fragment:NQ,batching_pars_vertex:LQ,batching_vertex:OQ,begin_vertex:DQ,beginnormal_vertex:kQ,bsdfs:FQ,iridescence_fragment:UQ,bumpmap_pars_fragment:BQ,clipping_planes_fragment:zQ,clipping_planes_pars_fragment:HQ,clipping_planes_pars_vertex:VQ,clipping_planes_vertex:GQ,color_fragment:qQ,color_pars_fragment:WQ,color_pars_vertex:jQ,color_vertex:$Q,common:XQ,cube_uv_reflection_fragment:YQ,defaultnormal_vertex:KQ,displacementmap_pars_vertex:JQ,displacementmap_vertex:ZQ,emissivemap_fragment:QQ,emissivemap_pars_fragment:eee,colorspace_fragment:tee,colorspace_pars_fragment:nee,envmap_fragment:ree,envmap_common_pars_fragment:iee,envmap_pars_fragment:oee,envmap_pars_vertex:aee,envmap_physical_pars_fragment:vee,envmap_vertex:see,fog_vertex:lee,fog_pars_vertex:uee,fog_fragment:cee,fog_pars_fragment:fee,gradientmap_pars_fragment:dee,lightmap_pars_fragment:hee,lights_lambert_fragment:pee,lights_lambert_pars_fragment:mee,lights_pars_begin:gee,lights_toon_fragment:yee,lights_toon_pars_fragment:xee,lights_phong_fragment:_ee,lights_phong_pars_fragment:See,lights_physical_fragment:wee,lights_physical_pars_fragment:bee,lights_fragment_begin:Aee,lights_fragment_maps:Eee,lights_fragment_end:Tee,logdepthbuf_fragment:Mee,logdepthbuf_pars_fragment:Cee,logdepthbuf_pars_vertex:Pee,logdepthbuf_vertex:Iee,map_fragment:Ree,map_pars_fragment:Nee,map_particle_fragment:Lee,map_particle_pars_fragment:Oee,metalnessmap_fragment:Dee,metalnessmap_pars_fragment:kee,morphinstance_vertex:Fee,morphcolor_vertex:Uee,morphnormal_vertex:Bee,morphtarget_pars_vertex:zee,morphtarget_vertex:Hee,normal_fragment_begin:Vee,normal_fragment_maps:Gee,normal_pars_fragment:qee,normal_pars_vertex:Wee,normal_vertex:jee,normalmap_pars_fragment:$ee,clearcoat_normal_fragment_begin:Xee,clearcoat_normal_fragment_maps:Yee,clearcoat_pars_fragment:Kee,iridescence_pars_fragment:Jee,opaque_fragment:Zee,packing:Qee,premultiplied_alpha_fragment:ete,project_vertex:tte,dithering_fragment:nte,dithering_pars_fragment:rte,roughnessmap_fragment:ite,roughnessmap_pars_fragment:ote,shadowmap_pars_fragment:ate,shadowmap_pars_vertex:ste,shadowmap_vertex:lte,shadowmask_pars_fragment:ute,skinbase_vertex:cte,skinning_pars_vertex:fte,skinning_vertex:dte,skinnormal_vertex:hte,specularmap_fragment:pte,specularmap_pars_fragment:mte,tonemapping_fragment:gte,tonemapping_pars_fragment:vte,transmission_fragment:yte,transmission_pars_fragment:xte,uv_pars_fragment:_te,uv_pars_vertex:Ste,uv_vertex:wte,worldpos_vertex:bte,background_vert:Ate,background_frag:Ete,backgroundCube_vert:Tte,backgroundCube_frag:Mte,cube_vert:Cte,cube_frag:Pte,depth_vert:Ite,depth_frag:Rte,distanceRGBA_vert:Nte,distanceRGBA_frag:Lte,equirect_vert:Ote,equirect_frag:Dte,linedashed_vert:kte,linedashed_frag:Fte,meshbasic_vert:Ute,meshbasic_frag:Bte,meshlambert_vert:zte,meshlambert_frag:Hte,meshmatcap_vert:Vte,meshmatcap_frag:Gte,meshnormal_vert:qte,meshnormal_frag:Wte,meshphong_vert:jte,meshphong_frag:$te,meshphysical_vert:Xte,meshphysical_frag:Yte,meshtoon_vert:Kte,meshtoon_frag:Jte,points_vert:Zte,points_frag:Qte,shadow_vert:ene,shadow_frag:tne,sprite_vert:nne,sprite_frag:rne},pn={common:{diffuse:{value:new xn(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new yr},alphaMap:{value:null},alphaMapTransform:{value:new yr},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new yr}},envmap:{envMap:{value:null},envMapRotation:{value:new yr},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new yr}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new yr}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new yr},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new yr},normalScale:{value:new zt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new yr},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new yr}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new yr}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new yr}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new xn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new xn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new yr},alphaTest:{value:0},uvTransform:{value:new yr}},sprite:{diffuse:{value:new xn(16777215)},opacity:{value:1},center:{value:new zt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new yr},alphaMap:{value:null},alphaMapTransform:{value:new yr},alphaTest:{value:0}}},Mc={basic:{uniforms:Ks([pn.common,pn.specularmap,pn.envmap,pn.aomap,pn.lightmap,pn.fog]),vertexShader:br.meshbasic_vert,fragmentShader:br.meshbasic_frag},lambert:{uniforms:Ks([pn.common,pn.specularmap,pn.envmap,pn.aomap,pn.lightmap,pn.emissivemap,pn.bumpmap,pn.normalmap,pn.displacementmap,pn.fog,pn.lights,{emissive:{value:new xn(0)}}]),vertexShader:br.meshlambert_vert,fragmentShader:br.meshlambert_frag},phong:{uniforms:Ks([pn.common,pn.specularmap,pn.envmap,pn.aomap,pn.lightmap,pn.emissivemap,pn.bumpmap,pn.normalmap,pn.displacementmap,pn.fog,pn.lights,{emissive:{value:new xn(0)},specular:{value:new xn(1118481)},shininess:{value:30}}]),vertexShader:br.meshphong_vert,fragmentShader:br.meshphong_frag},standard:{uniforms:Ks([pn.common,pn.envmap,pn.aomap,pn.lightmap,pn.emissivemap,pn.bumpmap,pn.normalmap,pn.displacementmap,pn.roughnessmap,pn.metalnessmap,pn.fog,pn.lights,{emissive:{value:new xn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:br.meshphysical_vert,fragmentShader:br.meshphysical_frag},toon:{uniforms:Ks([pn.common,pn.aomap,pn.lightmap,pn.emissivemap,pn.bumpmap,pn.normalmap,pn.displacementmap,pn.gradientmap,pn.fog,pn.lights,{emissive:{value:new xn(0)}}]),vertexShader:br.meshtoon_vert,fragmentShader:br.meshtoon_frag},matcap:{uniforms:Ks([pn.common,pn.bumpmap,pn.normalmap,pn.displacementmap,pn.fog,{matcap:{value:null}}]),vertexShader:br.meshmatcap_vert,fragmentShader:br.meshmatcap_frag},points:{uniforms:Ks([pn.points,pn.fog]),vertexShader:br.points_vert,fragmentShader:br.points_frag},dashed:{uniforms:Ks([pn.common,pn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:br.linedashed_vert,fragmentShader:br.linedashed_frag},depth:{uniforms:Ks([pn.common,pn.displacementmap]),vertexShader:br.depth_vert,fragmentShader:br.depth_frag},normal:{uniforms:Ks([pn.common,pn.bumpmap,pn.normalmap,pn.displacementmap,{opacity:{value:1}}]),vertexShader:br.meshnormal_vert,fragmentShader:br.meshnormal_frag},sprite:{uniforms:Ks([pn.sprite,pn.fog]),vertexShader:br.sprite_vert,fragmentShader:br.sprite_frag},background:{uniforms:{uvTransform:{value:new yr},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:br.background_vert,fragmentShader:br.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new yr}},vertexShader:br.backgroundCube_vert,fragmentShader:br.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:br.cube_vert,fragmentShader:br.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:br.equirect_vert,fragmentShader:br.equirect_frag},distanceRGBA:{uniforms:Ks([pn.common,pn.displacementmap,{referencePosition:{value:new Pe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:br.distanceRGBA_vert,fragmentShader:br.distanceRGBA_frag},shadow:{uniforms:Ks([pn.lights,pn.fog,{color:{value:new xn(0)},opacity:{value:1}}]),vertexShader:br.shadow_vert,fragmentShader:br.shadow_frag}};Mc.physical={uniforms:Ks([Mc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new yr},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new yr},clearcoatNormalScale:{value:new zt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new yr},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new yr},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new yr},sheen:{value:0},sheenColor:{value:new xn(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new yr},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new yr},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new yr},transmissionSamplerSize:{value:new zt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new yr},attenuationDistance:{value:0},attenuationColor:{value:new xn(0)},specularColor:{value:new xn(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new yr},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new yr},anisotropyVector:{value:new zt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new yr}}]),vertexShader:br.meshphysical_vert,fragmentShader:br.meshphysical_frag};const nx={r:0,b:0,g:0},Yh=new du,ine=new Qn;function one(n,e,t,r,i,o,a){const s=new xn(0);let l=o===!0?0:1,u,c,f=null,h=0,p=null;function v(w){let A=w.isScene===!0?w.background:null;return A&&A.isTexture&&(A=(w.backgroundBlurriness>0?t:e).get(A)),A}function S(w){let A=!1;const E=v(w);E===null?_(s,l):E&&E.isColor&&(_(E,1),A=!0);const P=n.xr.getEnvironmentBlendMode();P==="additive"?r.buffers.color.setClear(0,0,0,1,a):P==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,a),(n.autoClear||A)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function y(w,A){const E=v(A);E&&(E.isCubeTexture||E.mapping===jg)?(c===void 0&&(c=new Co(new Yp(1,1,1),new ol({name:"BackgroundCubeMaterial",uniforms:yg(Mc.backgroundCube.uniforms),vertexShader:Mc.backgroundCube.vertexShader,fragmentShader:Mc.backgroundCube.fragmentShader,side:nl,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(P,O,L){this.matrixWorld.copyPosition(L.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),Yh.copy(A.backgroundRotation),Yh.x*=-1,Yh.y*=-1,Yh.z*=-1,E.isCubeTexture&&E.isRenderTargetTexture===!1&&(Yh.y*=-1,Yh.z*=-1),c.material.uniforms.envMap.value=E,c.material.uniforms.flipEnvMap.value=E.isCubeTexture&&E.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=A.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=A.backgroundIntensity,c.material.uniforms.backgroundRotation.value.setFromMatrix4(ine.makeRotationFromEuler(Yh)),c.material.toneMapped=Gr.getTransfer(E.colorSpace)!==Ti,(f!==E||h!==E.version||p!==n.toneMapping)&&(c.material.needsUpdate=!0,f=E,h=E.version,p=n.toneMapping),c.layers.enableAll(),w.unshift(c,c.geometry,c.material,0,0,null)):E&&E.isTexture&&(u===void 0&&(u=new Co(new _h(2,2),new ol({name:"BackgroundMaterial",uniforms:yg(Mc.background.uniforms),vertexShader:Mc.background.vertexShader,fragmentShader:Mc.background.fragmentShader,side:ld,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=E,u.material.uniforms.backgroundIntensity.value=A.backgroundIntensity,u.material.toneMapped=Gr.getTransfer(E.colorSpace)!==Ti,E.matrixAutoUpdate===!0&&E.updateMatrix(),u.material.uniforms.uvTransform.value.copy(E.matrix),(f!==E||h!==E.version||p!==n.toneMapping)&&(u.material.needsUpdate=!0,f=E,h=E.version,p=n.toneMapping),u.layers.enableAll(),w.unshift(u,u.geometry,u.material,0,0,null))}function _(w,A){w.getRGB(nx,qz(n)),r.buffers.color.setClear(nx.r,nx.g,nx.b,A,a)}return{getClearColor:function(){return s},setClearColor:function(w,A=1){s.set(w),l=A,_(s,l)},getClearAlpha:function(){return l},setClearAlpha:function(w){l=w,_(s,l)},render:S,addToRenderList:y}}function ane(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),r={},i=h(null);let o=i,a=!1;function s(U,k,z,W,j){let se=!1;const Y=f(W,z,k);o!==Y&&(o=Y,u(o.object)),se=p(U,W,z,j),se&&v(U,W,z,j),j!==null&&e.update(j,n.ELEMENT_ARRAY_BUFFER),(se||a)&&(a=!1,E(U,k,z,W),j!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(j).buffer))}function l(){return n.createVertexArray()}function u(U){return n.bindVertexArray(U)}function c(U){return n.deleteVertexArray(U)}function f(U,k,z){const W=z.wireframe===!0;let j=r[U.id];j===void 0&&(j={},r[U.id]=j);let se=j[k.id];se===void 0&&(se={},j[k.id]=se);let Y=se[W];return Y===void 0&&(Y=h(l()),se[W]=Y),Y}function h(U){const k=[],z=[],W=[];for(let j=0;j<t;j++)k[j]=0,z[j]=0,W[j]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:k,enabledAttributes:z,attributeDivisors:W,object:U,attributes:{},index:null}}function p(U,k,z,W){const j=o.attributes,se=k.attributes;let Y=0;const Q=z.getAttributes();for(const X in Q)if(Q[X].location>=0){const oe=j[X];let ee=se[X];if(ee===void 0&&(X==="instanceMatrix"&&U.instanceMatrix&&(ee=U.instanceMatrix),X==="instanceColor"&&U.instanceColor&&(ee=U.instanceColor)),oe===void 0||oe.attribute!==ee||ee&&oe.data!==ee.data)return!0;Y++}return o.attributesNum!==Y||o.index!==W}function v(U,k,z,W){const j={},se=k.attributes;let Y=0;const Q=z.getAttributes();for(const X in Q)if(Q[X].location>=0){let oe=se[X];oe===void 0&&(X==="instanceMatrix"&&U.instanceMatrix&&(oe=U.instanceMatrix),X==="instanceColor"&&U.instanceColor&&(oe=U.instanceColor));const ee={};ee.attribute=oe,oe&&oe.data&&(ee.data=oe.data),j[X]=ee,Y++}o.attributes=j,o.attributesNum=Y,o.index=W}function S(){const U=o.newAttributes;for(let k=0,z=U.length;k<z;k++)U[k]=0}function y(U){_(U,0)}function _(U,k){const z=o.newAttributes,W=o.enabledAttributes,j=o.attributeDivisors;z[U]=1,W[U]===0&&(n.enableVertexAttribArray(U),W[U]=1),j[U]!==k&&(n.vertexAttribDivisor(U,k),j[U]=k)}function w(){const U=o.newAttributes,k=o.enabledAttributes;for(let z=0,W=k.length;z<W;z++)k[z]!==U[z]&&(n.disableVertexAttribArray(z),k[z]=0)}function A(U,k,z,W,j,se,Y){Y===!0?n.vertexAttribIPointer(U,k,z,j,se):n.vertexAttribPointer(U,k,z,W,j,se)}function E(U,k,z,W){S();const j=W.attributes,se=z.getAttributes(),Y=k.defaultAttributeValues;for(const Q in se){const X=se[Q];if(X.location>=0){let Z=j[Q];if(Z===void 0&&(Q==="instanceMatrix"&&U.instanceMatrix&&(Z=U.instanceMatrix),Q==="instanceColor"&&U.instanceColor&&(Z=U.instanceColor)),Z!==void 0){const oe=Z.normalized,ee=Z.itemSize,G=e.get(Z);if(G===void 0)continue;const ne=G.buffer,te=G.type,de=G.bytesPerElement,me=te===n.INT||te===n.UNSIGNED_INT||Z.gpuType===ky;if(Z.isInterleavedBufferAttribute){const be=Z.data,Ie=be.stride,Ee=Z.offset;if(be.isInstancedInterleavedBuffer){for(let Xe=0;Xe<X.locationSize;Xe++)_(X.location+Xe,be.meshPerAttribute);U.isInstancedMesh!==!0&&W._maxInstanceCount===void 0&&(W._maxInstanceCount=be.meshPerAttribute*be.count)}else for(let Xe=0;Xe<X.locationSize;Xe++)y(X.location+Xe);n.bindBuffer(n.ARRAY_BUFFER,ne);for(let Xe=0;Xe<X.locationSize;Xe++)A(X.location+Xe,ee/X.locationSize,te,oe,Ie*de,(Ee+ee/X.locationSize*Xe)*de,me)}else{if(Z.isInstancedBufferAttribute){for(let be=0;be<X.locationSize;be++)_(X.location+be,Z.meshPerAttribute);U.isInstancedMesh!==!0&&W._maxInstanceCount===void 0&&(W._maxInstanceCount=Z.meshPerAttribute*Z.count)}else for(let be=0;be<X.locationSize;be++)y(X.location+be);n.bindBuffer(n.ARRAY_BUFFER,ne);for(let be=0;be<X.locationSize;be++)A(X.location+be,ee/X.locationSize,te,oe,ee*de,ee/X.locationSize*be*de,me)}}else if(Y!==void 0){const oe=Y[Q];if(oe!==void 0)switch(oe.length){case 2:n.vertexAttrib2fv(X.location,oe);break;case 3:n.vertexAttrib3fv(X.location,oe);break;case 4:n.vertexAttrib4fv(X.location,oe);break;default:n.vertexAttrib1fv(X.location,oe)}}}}w()}function P(){D();for(const U in r){const k=r[U];for(const z in k){const W=k[z];for(const j in W)c(W[j].object),delete W[j];delete k[z]}delete r[U]}}function O(U){if(r[U.id]===void 0)return;const k=r[U.id];for(const z in k){const W=k[z];for(const j in W)c(W[j].object),delete W[j];delete k[z]}delete r[U.id]}function L(U){for(const k in r){const z=r[k];if(z[U.id]===void 0)continue;const W=z[U.id];for(const j in W)c(W[j].object),delete W[j];delete z[U.id]}}function D(){F(),a=!0,o!==i&&(o=i,u(o.object))}function F(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:s,reset:D,resetDefaultState:F,dispose:P,releaseStatesOfGeometry:O,releaseStatesOfProgram:L,initAttributes:S,enableAttribute:y,disableUnusedAttributes:w}}function sne(n,e,t){let r;function i(u){r=u}function o(u,c){n.drawArrays(r,u,c),t.update(c,r,1)}function a(u,c,f){f!==0&&(n.drawArraysInstanced(r,u,c,f),t.update(c,r,f))}function s(u,c,f){if(f===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,u,0,c,0,f);let p=0;for(let v=0;v<f;v++)p+=c[v];t.update(p,r,1)}function l(u,c,f,h){if(f===0)return;const p=e.get("WEBGL_multi_draw");if(p===null)for(let v=0;v<u.length;v++)a(u[v],c[v],h[v]);else{p.multiDrawArraysInstancedWEBGL(r,u,0,c,0,h,0,f);let v=0;for(let S=0;S<f;S++)v+=c[S]*h[S];t.update(v,r,1)}}this.setMode=i,this.render=o,this.renderInstances=a,this.renderMultiDraw=s,this.renderMultiDrawInstances=l}function lne(n,e,t,r){let i;function o(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const L=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(L.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function a(L){return!(L!==ia&&r.convert(L)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function s(L){const D=L===La&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(L!==Ul&&r.convert(L)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&L!==go&&!D)}function l(L){if(L==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";L="mediump"}return L==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=t.precision!==void 0?t.precision:"highp";const c=l(u);c!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",c,"instead."),u=c);const f=t.logarithmicDepthBuffer===!0,h=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),p=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),v=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),S=n.getParameter(n.MAX_TEXTURE_SIZE),y=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),_=n.getParameter(n.MAX_VERTEX_ATTRIBS),w=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),A=n.getParameter(n.MAX_VARYING_VECTORS),E=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),P=v>0,O=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:o,getMaxPrecision:l,textureFormatReadable:a,textureTypeReadable:s,precision:u,logarithmicDepthBuffer:f,reverseDepthBuffer:h,maxTextures:p,maxVertexTextures:v,maxTextureSize:S,maxCubemapSize:y,maxAttributes:_,maxVertexUniforms:w,maxVaryings:A,maxFragmentUniforms:E,vertexTextures:P,maxSamples:O}}function une(n){const e=this;let t=null,r=0,i=!1,o=!1;const a=new eh,s=new yr,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,h){const p=f.length!==0||h||r!==0||i;return i=h,r=f.length,p},this.beginShadows=function(){o=!0,c(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(f,h){t=c(f,h,0)},this.setState=function(f,h,p){const v=f.clippingPlanes,S=f.clipIntersection,y=f.clipShadows,_=n.get(f);if(!i||v===null||v.length===0||o&&!y)o?c(null):u();else{const w=o?0:r,A=w*4;let E=_.clippingState||null;l.value=E,E=c(v,h,A,p);for(let P=0;P!==A;++P)E[P]=t[P];_.clippingState=E,this.numIntersection=S?this.numPlanes:0,this.numPlanes+=w}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function c(f,h,p,v){const S=f!==null?f.length:0;let y=null;if(S!==0){if(y=l.value,v!==!0||y===null){const _=p+S*4,w=h.matrixWorldInverse;s.getNormalMatrix(w),(y===null||y.length<_)&&(y=new Float32Array(_));for(let A=0,E=p;A!==S;++A,E+=4)a.copy(f[A]).applyMatrix4(w,s),a.normal.toArray(y,E),y[E+3]=a.constant}l.value=y,l.needsUpdate=!0}return e.numPlanes=S,e.numIntersection=0,y}}function cne(n){let e=new WeakMap;function t(a,s){return s===mg?a.mapping=bf:s===C0&&(a.mapping=ph),a}function r(a){if(a&&a.isTexture){const s=a.mapping;if(s===mg||s===C0)if(e.has(a)){const l=e.get(a).texture;return t(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const u=new kP(l.height);return u.fromEquirectangularTexture(n,a),e.set(a,u),a.addEventListener("dispose",i),t(u.texture,a.mapping)}else return null}}return a}function i(a){const s=a.target;s.removeEventListener("dispose",i);const l=e.get(s);l!==void 0&&(e.delete(s),l.dispose())}function o(){e=new WeakMap}return{get:r,dispose:o}}class Xg extends zy{constructor(e=-1,t=1,r=1,i=-1,o=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=o,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,o,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let o=r-e,a=r+e,s=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=u*this.view.offsetX,a=o+u*this.view.width,s-=c*this.view.offsetY,l=s-c*this.view.height}this.projectionMatrix.makeOrthographic(o,a,s,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const eg=4,uL=[.125,.215,.35,.446,.526,.582],fp=20,a2=new Xg,cL=new xn;let s2=null,l2=0,u2=0,c2=!1;const sp=(1+Math.sqrt(5))/2,Nm=1/sp,fL=[new Pe(-sp,Nm,0),new Pe(sp,Nm,0),new Pe(-Nm,0,sp),new Pe(Nm,0,sp),new Pe(0,sp,-Nm),new Pe(0,sp,Nm),new Pe(-1,1,-1),new Pe(1,1,-1),new Pe(-1,1,1),new Pe(1,1,1)];class wC{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){s2=this._renderer.getRenderTarget(),l2=this._renderer.getActiveCubeFace(),u2=this._renderer.getActiveMipmapLevel(),c2=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,r,i,o),t>0&&this._blur(o,0,0,t),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=pL(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=hL(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(s2,l2,u2),this._renderer.xr.enabled=c2,e.scissorTest=!1,rx(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===bf||e.mapping===ph?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),s2=this._renderer.getRenderTarget(),l2=this._renderer.getActiveCubeFace(),u2=this._renderer.getActiveMipmapLevel(),c2=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:mi,minFilter:mi,generateMipmaps:!1,type:La,format:ia,colorSpace:Ef,depthBuffer:!1},i=dL(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=dL(e,t,r);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=fne(o)),this._blurMaterial=dne(o,e,t)}return i}_compileMaterial(e){const t=new Co(this._lodPlanes[0],e);this._renderer.compile(t,a2)}_sceneToCubeUV(e,t,r,i){const s=new Qa(90,1,t,r),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],c=this._renderer,f=c.autoClear,h=c.toneMapping;c.getClearColor(cL),c.toneMapping=vf,c.autoClear=!1;const p=new pd({name:"PMREM.Background",side:nl,depthWrite:!1,depthTest:!1}),v=new Co(new Yp,p);let S=!1;const y=e.background;y?y.isColor&&(p.color.copy(y),e.background=null,S=!0):(p.color.copy(cL),S=!0);for(let _=0;_<6;_++){const w=_%3;w===0?(s.up.set(0,l[_],0),s.lookAt(u[_],0,0)):w===1?(s.up.set(0,0,l[_]),s.lookAt(0,u[_],0)):(s.up.set(0,l[_],0),s.lookAt(0,0,u[_]));const A=this._cubeSize;rx(i,w*A,_>2?A:0,A,A),c.setRenderTarget(i),S&&c.render(v,s),c.render(e,s)}v.geometry.dispose(),v.material.dispose(),c.toneMapping=h,c.autoClear=f,e.background=y}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===bf||e.mapping===ph;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=pL()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=hL());const o=i?this._cubemapMaterial:this._equirectMaterial,a=new Co(this._lodPlanes[0],o),s=o.uniforms;s.envMap.value=e;const l=this._cubeSize;rx(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(a,a2)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;const i=this._lodPlanes.length;for(let o=1;o<i;o++){const a=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),s=fL[(i-o-1)%fL.length];this._blur(e,o-1,o,a,s)}t.autoClear=r}_blur(e,t,r,i,o){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,r,i,"latitudinal",o),this._halfBlur(a,e,r,r,i,"longitudinal",o)}_halfBlur(e,t,r,i,o,a,s){const l=this._renderer,u=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,f=new Co(this._lodPlanes[i],u),h=u.uniforms,p=this._sizeLods[r]-1,v=isFinite(o)?Math.PI/(2*p):2*Math.PI/(2*fp-1),S=o/v,y=isFinite(o)?1+Math.floor(c*S):fp;y>fp&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${y} samples when the maximum is set to ${fp}`);const _=[];let w=0;for(let L=0;L<fp;++L){const D=L/S,F=Math.exp(-D*D/2);_.push(F),L===0?w+=F:L<y&&(w+=2*F)}for(let L=0;L<_.length;L++)_[L]=_[L]/w;h.envMap.value=e.texture,h.samples.value=y,h.weights.value=_,h.latitudinal.value=a==="latitudinal",s&&(h.poleAxis.value=s);const{_lodMax:A}=this;h.dTheta.value=v,h.mipInt.value=A-r;const E=this._sizeLods[i],P=3*E*(i>A-eg?i-A+eg:0),O=4*(this._cubeSize-E);rx(t,P,O,3*E,2*E),l.setRenderTarget(t),l.render(f,a2)}}function fne(n){const e=[],t=[],r=[];let i=n;const o=n-eg+1+uL.length;for(let a=0;a<o;a++){const s=Math.pow(2,i);t.push(s);let l=1/s;a>n-eg?l=uL[a-n+eg-1]:a===0&&(l=0),r.push(l);const u=1/(s-2),c=-u,f=1+u,h=[c,c,f,c,f,f,c,c,f,f,c,f],p=6,v=6,S=3,y=2,_=1,w=new Float32Array(S*v*p),A=new Float32Array(y*v*p),E=new Float32Array(_*v*p);for(let O=0;O<p;O++){const L=O%3*2/3-1,D=O>2?0:-1,F=[L,D,0,L+2/3,D,0,L+2/3,D+1,0,L,D,0,L+2/3,D+1,0,L,D+1,0];w.set(F,S*v*O),A.set(h,y*v*O);const U=[O,O,O,O,O,O];E.set(U,_*v*O)}const P=new wr;P.setAttribute("position",new Oi(w,S)),P.setAttribute("uv",new Oi(A,y)),P.setAttribute("faceIndex",new Oi(E,_)),e.push(P),i>eg&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function dL(n,e,t){const r=new Bl(n,e,t);return r.texture.mapping=jg,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function rx(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function dne(n,e,t){const r=new Float32Array(fp),i=new Pe(0,1,0);return new ol({name:"SphericalGaussianBlur",defines:{n:fp,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:FP(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:gf,depthTest:!1,depthWrite:!1})}function hL(){return new ol({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:FP(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:gf,depthTest:!1,depthWrite:!1})}function pL(){return new ol({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:FP(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:gf,depthTest:!1,depthWrite:!1})}function FP(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function hne(n){let e=new WeakMap,t=null;function r(s){if(s&&s.isTexture){const l=s.mapping,u=l===mg||l===C0,c=l===bf||l===ph;if(u||c){let f=e.get(s);const h=f!==void 0?f.texture.pmremVersion:0;if(s.isRenderTargetTexture&&s.pmremVersion!==h)return t===null&&(t=new wC(n)),f=u?t.fromEquirectangular(s,f):t.fromCubemap(s,f),f.texture.pmremVersion=s.pmremVersion,e.set(s,f),f.texture;if(f!==void 0)return f.texture;{const p=s.image;return u&&p&&p.height>0||c&&p&&i(p)?(t===null&&(t=new wC(n)),f=u?t.fromEquirectangular(s):t.fromCubemap(s),f.texture.pmremVersion=s.pmremVersion,e.set(s,f),s.addEventListener("dispose",o),f.texture):null}}}return s}function i(s){let l=0;const u=6;for(let c=0;c<u;c++)s[c]!==void 0&&l++;return l===u}function o(s){const l=s.target;l.removeEventListener("dispose",o);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:a}}function pne(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(r){const i=t(r);return i===null&&Yv("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function mne(n,e,t,r){const i={},o=new WeakMap;function a(f){const h=f.target;h.index!==null&&e.remove(h.index);for(const v in h.attributes)e.remove(h.attributes[v]);for(const v in h.morphAttributes){const S=h.morphAttributes[v];for(let y=0,_=S.length;y<_;y++)e.remove(S[y])}h.removeEventListener("dispose",a),delete i[h.id];const p=o.get(h);p&&(e.remove(p),o.delete(h)),r.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,t.memory.geometries--}function s(f,h){return i[h.id]===!0||(h.addEventListener("dispose",a),i[h.id]=!0,t.memory.geometries++),h}function l(f){const h=f.attributes;for(const v in h)e.update(h[v],n.ARRAY_BUFFER);const p=f.morphAttributes;for(const v in p){const S=p[v];for(let y=0,_=S.length;y<_;y++)e.update(S[y],n.ARRAY_BUFFER)}}function u(f){const h=[],p=f.index,v=f.attributes.position;let S=0;if(p!==null){const w=p.array;S=p.version;for(let A=0,E=w.length;A<E;A+=3){const P=w[A+0],O=w[A+1],L=w[A+2];h.push(P,O,O,L,L,P)}}else if(v!==void 0){const w=v.array;S=v.version;for(let A=0,E=w.length/3-1;A<E;A+=3){const P=A+0,O=A+1,L=A+2;h.push(P,O,O,L,L,P)}}else return;const y=new(Bz(h)?OP:LP)(h,1);y.version=S;const _=o.get(f);_&&e.remove(_),o.set(f,y)}function c(f){const h=o.get(f);if(h){const p=f.index;p!==null&&h.version<p.version&&u(f)}else u(f);return o.get(f)}return{get:s,update:l,getWireframeAttribute:c}}function gne(n,e,t){let r;function i(h){r=h}let o,a;function s(h){o=h.type,a=h.bytesPerElement}function l(h,p){n.drawElements(r,p,o,h*a),t.update(p,r,1)}function u(h,p,v){v!==0&&(n.drawElementsInstanced(r,p,o,h*a,v),t.update(p,r,v))}function c(h,p,v){if(v===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,p,0,o,h,0,v);let y=0;for(let _=0;_<v;_++)y+=p[_];t.update(y,r,1)}function f(h,p,v,S){if(v===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let _=0;_<h.length;_++)u(h[_]/a,p[_],S[_]);else{y.multiDrawElementsInstancedWEBGL(r,p,0,o,h,0,S,0,v);let _=0;for(let w=0;w<v;w++)_+=p[w]*S[w];t.update(_,r,1)}}this.setMode=i,this.setIndex=s,this.render=l,this.renderInstances=u,this.renderMultiDraw=c,this.renderMultiDrawInstances=f}function vne(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(o,a,s){switch(t.calls++,a){case n.TRIANGLES:t.triangles+=s*(o/3);break;case n.LINES:t.lines+=s*(o/2);break;case n.LINE_STRIP:t.lines+=s*(o-1);break;case n.LINE_LOOP:t.lines+=s*o;break;case n.POINTS:t.points+=s*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function yne(n,e,t){const r=new WeakMap,i=new Yr;function o(a,s,l){const u=a.morphTargetInfluences,c=s.morphAttributes.position||s.morphAttributes.normal||s.morphAttributes.color,f=c!==void 0?c.length:0;let h=r.get(s);if(h===void 0||h.count!==f){let F=function(){L.dispose(),r.delete(s),s.removeEventListener("dispose",F)};h!==void 0&&h.texture.dispose();const p=s.morphAttributes.position!==void 0,v=s.morphAttributes.normal!==void 0,S=s.morphAttributes.color!==void 0,y=s.morphAttributes.position||[],_=s.morphAttributes.normal||[],w=s.morphAttributes.color||[];let A=0;p===!0&&(A=1),v===!0&&(A=2),S===!0&&(A=3);let E=s.attributes.position.count*A,P=1;E>e.maxTextureSize&&(P=Math.ceil(E/e.maxTextureSize),E=e.maxTextureSize);const O=new Float32Array(E*P*4*f),L=new iw(O,E,P,f);L.type=go,L.needsUpdate=!0;const D=A*4;for(let U=0;U<f;U++){const k=y[U],z=_[U],W=w[U],j=E*P*4*U;for(let se=0;se<k.count;se++){const Y=se*D;p===!0&&(i.fromBufferAttribute(k,se),O[j+Y+0]=i.x,O[j+Y+1]=i.y,O[j+Y+2]=i.z,O[j+Y+3]=0),v===!0&&(i.fromBufferAttribute(z,se),O[j+Y+4]=i.x,O[j+Y+5]=i.y,O[j+Y+6]=i.z,O[j+Y+7]=0),S===!0&&(i.fromBufferAttribute(W,se),O[j+Y+8]=i.x,O[j+Y+9]=i.y,O[j+Y+10]=i.z,O[j+Y+11]=W.itemSize===4?i.w:1)}}h={count:f,texture:L,size:new zt(E,P)},r.set(s,h),s.addEventListener("dispose",F)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",a.morphTexture,t);else{let p=0;for(let S=0;S<u.length;S++)p+=u[S];const v=s.morphTargetsRelative?1:1-p;l.getUniforms().setValue(n,"morphTargetBaseInfluence",v),l.getUniforms().setValue(n,"morphTargetInfluences",u)}l.getUniforms().setValue(n,"morphTargetsTexture",h.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",h.size)}return{update:o}}function xne(n,e,t,r){let i=new WeakMap;function o(l){const u=r.render.frame,c=l.geometry,f=e.get(l,c);if(i.get(f)!==u&&(e.update(f),i.set(f,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",s)===!1&&l.addEventListener("dispose",s),i.get(l)!==u&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),i.set(l,u))),l.isSkinnedMesh){const h=l.skeleton;i.get(h)!==u&&(h.update(),i.set(h,u))}return f}function a(){i=new WeakMap}function s(l){const u=l.target;u.removeEventListener("dispose",s),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:o,dispose:a}}class ow extends Mi{constructor(e,t,r,i,o,a,s,l,u,c=Ep){if(c!==Ep&&c!==Bp)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&c===Ep&&(r=Af),r===void 0&&c===Bp&&(r=Up),super(null,i,o,a,s,l,c,r,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=s!==void 0?s:fs,this.minFilter=l!==void 0?l:fs,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const $z=new Mi,mL=new ow(1,1),Xz=new iw,Yz=new NP,Kz=new Hy,gL=[],vL=[],yL=new Float32Array(16),xL=new Float32Array(9),_L=new Float32Array(4);function Yg(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let o=gL[i];if(o===void 0&&(o=new Float32Array(i),gL[i]=o),e!==0){r.toArray(o,0);for(let a=1,s=0;a!==e;++a)s+=t,n[a].toArray(o,s)}return o}function ka(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function Fa(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function aw(n,e){let t=vL[e];t===void 0&&(t=new Int32Array(e),vL[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function _ne(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Sne(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ka(t,e))return;n.uniform2fv(this.addr,e),Fa(t,e)}}function wne(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(ka(t,e))return;n.uniform3fv(this.addr,e),Fa(t,e)}}function bne(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ka(t,e))return;n.uniform4fv(this.addr,e),Fa(t,e)}}function Ane(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(ka(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Fa(t,e)}else{if(ka(t,r))return;_L.set(r),n.uniformMatrix2fv(this.addr,!1,_L),Fa(t,r)}}function Ene(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(ka(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Fa(t,e)}else{if(ka(t,r))return;xL.set(r),n.uniformMatrix3fv(this.addr,!1,xL),Fa(t,r)}}function Tne(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(ka(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Fa(t,e)}else{if(ka(t,r))return;yL.set(r),n.uniformMatrix4fv(this.addr,!1,yL),Fa(t,r)}}function Mne(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Cne(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ka(t,e))return;n.uniform2iv(this.addr,e),Fa(t,e)}}function Pne(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ka(t,e))return;n.uniform3iv(this.addr,e),Fa(t,e)}}function Ine(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ka(t,e))return;n.uniform4iv(this.addr,e),Fa(t,e)}}function Rne(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function Nne(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ka(t,e))return;n.uniform2uiv(this.addr,e),Fa(t,e)}}function Lne(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ka(t,e))return;n.uniform3uiv(this.addr,e),Fa(t,e)}}function One(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ka(t,e))return;n.uniform4uiv(this.addr,e),Fa(t,e)}}function Dne(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i);let o;this.type===n.SAMPLER_2D_SHADOW?(mL.compareFunction=IP,o=mL):o=$z,t.setTexture2D(e||o,i)}function kne(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||Yz,i)}function Fne(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||Kz,i)}function Une(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||Xz,i)}function Bne(n){switch(n){case 5126:return _ne;case 35664:return Sne;case 35665:return wne;case 35666:return bne;case 35674:return Ane;case 35675:return Ene;case 35676:return Tne;case 5124:case 35670:return Mne;case 35667:case 35671:return Cne;case 35668:case 35672:return Pne;case 35669:case 35673:return Ine;case 5125:return Rne;case 36294:return Nne;case 36295:return Lne;case 36296:return One;case 35678:case 36198:case 36298:case 36306:case 35682:return Dne;case 35679:case 36299:case 36307:return kne;case 35680:case 36300:case 36308:case 36293:return Fne;case 36289:case 36303:case 36311:case 36292:return Une}}function zne(n,e){n.uniform1fv(this.addr,e)}function Hne(n,e){const t=Yg(e,this.size,2);n.uniform2fv(this.addr,t)}function Vne(n,e){const t=Yg(e,this.size,3);n.uniform3fv(this.addr,t)}function Gne(n,e){const t=Yg(e,this.size,4);n.uniform4fv(this.addr,t)}function qne(n,e){const t=Yg(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function Wne(n,e){const t=Yg(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function jne(n,e){const t=Yg(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function $ne(n,e){n.uniform1iv(this.addr,e)}function Xne(n,e){n.uniform2iv(this.addr,e)}function Yne(n,e){n.uniform3iv(this.addr,e)}function Kne(n,e){n.uniform4iv(this.addr,e)}function Jne(n,e){n.uniform1uiv(this.addr,e)}function Zne(n,e){n.uniform2uiv(this.addr,e)}function Qne(n,e){n.uniform3uiv(this.addr,e)}function ere(n,e){n.uniform4uiv(this.addr,e)}function tre(n,e,t){const r=this.cache,i=e.length,o=aw(t,i);ka(r,o)||(n.uniform1iv(this.addr,o),Fa(r,o));for(let a=0;a!==i;++a)t.setTexture2D(e[a]||$z,o[a])}function nre(n,e,t){const r=this.cache,i=e.length,o=aw(t,i);ka(r,o)||(n.uniform1iv(this.addr,o),Fa(r,o));for(let a=0;a!==i;++a)t.setTexture3D(e[a]||Yz,o[a])}function rre(n,e,t){const r=this.cache,i=e.length,o=aw(t,i);ka(r,o)||(n.uniform1iv(this.addr,o),Fa(r,o));for(let a=0;a!==i;++a)t.setTextureCube(e[a]||Kz,o[a])}function ire(n,e,t){const r=this.cache,i=e.length,o=aw(t,i);ka(r,o)||(n.uniform1iv(this.addr,o),Fa(r,o));for(let a=0;a!==i;++a)t.setTexture2DArray(e[a]||Xz,o[a])}function ore(n){switch(n){case 5126:return zne;case 35664:return Hne;case 35665:return Vne;case 35666:return Gne;case 35674:return qne;case 35675:return Wne;case 35676:return jne;case 5124:case 35670:return $ne;case 35667:case 35671:return Xne;case 35668:case 35672:return Yne;case 35669:case 35673:return Kne;case 5125:return Jne;case 36294:return Zne;case 36295:return Qne;case 36296:return ere;case 35678:case 36198:case 36298:case 36306:case 35682:return tre;case 35679:case 36299:case 36307:return nre;case 35680:case 36300:case 36308:case 36293:return rre;case 36289:case 36303:case 36311:case 36292:return ire}}class are{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.setValue=Bne(t.type)}}class sre{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=ore(t.type)}}class lre{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let o=0,a=i.length;o!==a;++o){const s=i[o];s.setValue(e,t[s.id],r)}}}const f2=/(\w+)(\])?(\[|\.)?/g;function SL(n,e){n.seq.push(e),n.map[e.id]=e}function ure(n,e,t){const r=n.name,i=r.length;for(f2.lastIndex=0;;){const o=f2.exec(r),a=f2.lastIndex;let s=o[1];const l=o[2]==="]",u=o[3];if(l&&(s=s|0),u===void 0||u==="["&&a+2===i){SL(t,u===void 0?new are(s,n,e):new sre(s,n,e));break}else{let f=t.map[s];f===void 0&&(f=new lre(s),SL(t,f)),t=f}}}class t_{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const o=e.getActiveUniform(t,i),a=e.getUniformLocation(t,o.name);ure(o,a,this)}}setValue(e,t,r,i){const o=this.map[t];o!==void 0&&o.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let o=0,a=t.length;o!==a;++o){const s=t[o],l=r[s.id];l.needsUpdate!==!1&&s.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,o=e.length;i!==o;++i){const a=e[i];a.id in t&&r.push(a)}return r}}function wL(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}const cre=37297;let fre=0;function dre(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),o=Math.min(e+6,t.length);for(let a=i;a<o;a++){const s=a+1;r.push(`${s===e?">":" "} ${s}: ${t[a]}`)}return r.join(`
`)}const bL=new yr;function hre(n){Gr._getMatrix(bL,Gr.workingColorSpace,n);const e=`mat3( ${bL.elements.map(t=>t.toFixed(4))} )`;switch(Gr.getTransfer(n)){case By:return[e,"LinearTransferOETF"];case Ti:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function AL(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const a=parseInt(o[1]);return t.toUpperCase()+`

`+i+`

`+dre(n.getShaderSource(e),a)}else return i}function pre(n,e){const t=hre(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function mre(n,e){let t;switch(e){case xz:t="Linear";break;case _z:t="Reinhard";break;case Sz:t="Cineon";break;case _P:t="ACESFilmic";break;case bz:t="AgX";break;case Az:t="Neutral";break;case wz:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const ix=new Pe;function gre(){Gr.getLuminanceCoefficients(ix);const n=ix.x.toFixed(4),e=ix.y.toFixed(4),t=ix.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function vre(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Jv).join(`
`)}function yre(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function xre(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const o=n.getActiveAttrib(e,i),a=o.name;let s=1;o.type===n.FLOAT_MAT2&&(s=2),o.type===n.FLOAT_MAT3&&(s=3),o.type===n.FLOAT_MAT4&&(s=4),t[a]={type:o.type,location:n.getAttribLocation(e,a),locationSize:s}}return t}function Jv(n){return n!==""}function EL(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function TL(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const _re=/^[ \t]*#include +<([\w\d./]+)>/gm;function bC(n){return n.replace(_re,wre)}const Sre=new Map;function wre(n,e){let t=br[e];if(t===void 0){const r=Sre.get(e);if(r!==void 0)t=br[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return bC(t)}const bre=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function ML(n){return n.replace(bre,Are)}function Are(n,e,t,r){let i="";for(let o=parseInt(e);o<parseInt(t);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function CL(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Ere(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===KS?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===i0?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Ac&&(e="SHADOWMAP_TYPE_VSM"),e}function Tre(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case bf:case ph:e="ENVMAP_TYPE_CUBE";break;case jg:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Mre(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case ph:e="ENVMAP_MODE_REFRACTION";break}return e}function Cre(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Dy:e="ENVMAP_BLENDING_MULTIPLY";break;case vz:e="ENVMAP_BLENDING_MIX";break;case yz:e="ENVMAP_BLENDING_ADD";break}return e}function Pre(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:r,maxMip:t}}function Ire(n,e,t,r){const i=n.getContext(),o=t.defines;let a=t.vertexShader,s=t.fragmentShader;const l=Ere(t),u=Tre(t),c=Mre(t),f=Cre(t),h=Pre(t),p=vre(t),v=yre(o),S=i.createProgram();let y,_,w=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(y=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(Jv).join(`
`),y.length>0&&(y+=`
`),_=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(Jv).join(`
`),_.length>0&&(_+=`
`)):(y=[CL(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Jv).join(`
`),_=[CL(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+c:"",t.envMap?"#define "+f:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==vf?"#define TONE_MAPPING":"",t.toneMapping!==vf?br.tonemapping_pars_fragment:"",t.toneMapping!==vf?mre("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",br.colorspace_pars_fragment,pre("linearToOutputTexel",t.outputColorSpace),gre(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Jv).join(`
`)),a=bC(a),a=EL(a,t),a=TL(a,t),s=bC(s),s=EL(s,t),s=TL(s,t),a=ML(a),s=ML(s),t.isRawShaderMaterial!==!0&&(w=`#version 300 es
`,y=[p,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+y,_=["#define varying in",t.glslVersion===SC?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===SC?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+_);const A=w+y+a,E=w+_+s,P=wL(i,i.VERTEX_SHADER,A),O=wL(i,i.FRAGMENT_SHADER,E);i.attachShader(S,P),i.attachShader(S,O),t.index0AttributeName!==void 0?i.bindAttribLocation(S,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(S,0,"position"),i.linkProgram(S);function L(k){if(n.debug.checkShaderErrors){const z=i.getProgramInfoLog(S).trim(),W=i.getShaderInfoLog(P).trim(),j=i.getShaderInfoLog(O).trim();let se=!0,Y=!0;if(i.getProgramParameter(S,i.LINK_STATUS)===!1)if(se=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,S,P,O);else{const Q=AL(i,P,"vertex"),X=AL(i,O,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(S,i.VALIDATE_STATUS)+`

Material Name: `+k.name+`
Material Type: `+k.type+`

Program Info Log: `+z+`
`+Q+`
`+X)}else z!==""?console.warn("THREE.WebGLProgram: Program Info Log:",z):(W===""||j==="")&&(Y=!1);Y&&(k.diagnostics={runnable:se,programLog:z,vertexShader:{log:W,prefix:y},fragmentShader:{log:j,prefix:_}})}i.deleteShader(P),i.deleteShader(O),D=new t_(i,S),F=xre(i,S)}let D;this.getUniforms=function(){return D===void 0&&L(this),D};let F;this.getAttributes=function(){return F===void 0&&L(this),F};let U=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return U===!1&&(U=i.getProgramParameter(S,cre)),U},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(S),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=fre++,this.cacheKey=e,this.usedTimes=1,this.program=S,this.vertexShader=P,this.fragmentShader=O,this}let Rre=0;class Nre{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),o=this._getShaderStage(r),a=this._getShaderCacheForMaterial(e);return a.has(i)===!1&&(a.add(i),i.usedTimes++),a.has(o)===!1&&(a.add(o),o.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new Lre(e),t.set(e,r)),r}}class Lre{constructor(e){this.id=Rre++,this.code=e,this.usedTimes=0}}function Ore(n,e,t,r,i,o,a){const s=new Mp,l=new Nre,u=new Set,c=[],f=i.logarithmicDepthBuffer,h=i.vertexTextures;let p=i.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function S(F){return u.add(F),F===0?"uv":`uv${F}`}function y(F,U,k,z,W){const j=z.fog,se=W.geometry,Y=F.isMeshStandardMaterial?z.environment:null,Q=(F.isMeshStandardMaterial?t:e).get(F.envMap||Y),X=Q&&Q.mapping===jg?Q.image.height:null,Z=v[F.type];F.precision!==null&&(p=i.getMaxPrecision(F.precision),p!==F.precision&&console.warn("THREE.WebGLProgram.getParameters:",F.precision,"not supported, using",p,"instead."));const oe=se.morphAttributes.position||se.morphAttributes.normal||se.morphAttributes.color,ee=oe!==void 0?oe.length:0;let G=0;se.morphAttributes.position!==void 0&&(G=1),se.morphAttributes.normal!==void 0&&(G=2),se.morphAttributes.color!==void 0&&(G=3);let ne,te,de,me;if(Z){const Gn=Mc[Z];ne=Gn.vertexShader,te=Gn.fragmentShader}else ne=F.vertexShader,te=F.fragmentShader,l.update(F),de=l.getVertexShaderID(F),me=l.getFragmentShaderID(F);const be=n.getRenderTarget(),Ie=n.state.buffers.depth.getReversed(),Ee=W.isInstancedMesh===!0,Xe=W.isBatchedMesh===!0,tt=!!F.map,Te=!!F.matcap,Je=!!Q,Se=!!F.aoMap,Ge=!!F.lightMap,ye=!!F.bumpMap,Ct=!!F.normalMap,ft=!!F.displacementMap,mt=!!F.emissiveMap,lt=!!F.metalnessMap,ve=!!F.roughnessMap,le=F.anisotropy>0,He=F.clearcoat>0,rt=F.dispersion>0,vt=F.iridescence>0,ht=F.sheen>0,qt=F.transmission>0,Ft=le&&!!F.anisotropyMap,Rt=He&&!!F.clearcoatMap,tn=He&&!!F.clearcoatNormalMap,it=He&&!!F.clearcoatRoughnessMap,Zt=vt&&!!F.iridescenceMap,Xt=vt&&!!F.iridescenceThicknessMap,un=ht&&!!F.sheenColorMap,Wt=ht&&!!F.sheenRoughnessMap,mn=!!F.specularMap,fn=!!F.specularColorMap,nn=!!F.specularIntensityMap,Ke=qt&&!!F.transmissionMap,ot=qt&&!!F.thicknessMap,pt=!!F.gradientMap,It=!!F.alphaMap,Ht=F.alphaTest>0,Lt=!!F.alphaHash,rn=!!F.extensions;let ir=vf;F.toneMapped&&(be===null||be.isXRRenderTarget===!0)&&(ir=n.toneMapping);const $n={shaderID:Z,shaderType:F.type,shaderName:F.name,vertexShader:ne,fragmentShader:te,defines:F.defines,customVertexShaderID:de,customFragmentShaderID:me,isRawShaderMaterial:F.isRawShaderMaterial===!0,glslVersion:F.glslVersion,precision:p,batching:Xe,batchingColor:Xe&&W._colorsTexture!==null,instancing:Ee,instancingColor:Ee&&W.instanceColor!==null,instancingMorph:Ee&&W.morphTexture!==null,supportsVertexTextures:h,outputColorSpace:be===null?n.outputColorSpace:be.isXRRenderTarget===!0?be.texture.colorSpace:Ef,alphaToCoverage:!!F.alphaToCoverage,map:tt,matcap:Te,envMap:Je,envMapMode:Je&&Q.mapping,envMapCubeUVHeight:X,aoMap:Se,lightMap:Ge,bumpMap:ye,normalMap:Ct,displacementMap:h&&ft,emissiveMap:mt,normalMapObjectSpace:Ct&&F.normalMapType===Rz,normalMapTangentSpace:Ct&&F.normalMapType===xh,metalnessMap:lt,roughnessMap:ve,anisotropy:le,anisotropyMap:Ft,clearcoat:He,clearcoatMap:Rt,clearcoatNormalMap:tn,clearcoatRoughnessMap:it,dispersion:rt,iridescence:vt,iridescenceMap:Zt,iridescenceThicknessMap:Xt,sheen:ht,sheenColorMap:un,sheenRoughnessMap:Wt,specularMap:mn,specularColorMap:fn,specularIntensityMap:nn,transmission:qt,transmissionMap:Ke,thicknessMap:ot,gradientMap:pt,opaque:F.transparent===!1&&F.blending===Ap&&F.alphaToCoverage===!1,alphaMap:It,alphaTest:Ht,alphaHash:Lt,combine:F.combine,mapUv:tt&&S(F.map.channel),aoMapUv:Se&&S(F.aoMap.channel),lightMapUv:Ge&&S(F.lightMap.channel),bumpMapUv:ye&&S(F.bumpMap.channel),normalMapUv:Ct&&S(F.normalMap.channel),displacementMapUv:ft&&S(F.displacementMap.channel),emissiveMapUv:mt&&S(F.emissiveMap.channel),metalnessMapUv:lt&&S(F.metalnessMap.channel),roughnessMapUv:ve&&S(F.roughnessMap.channel),anisotropyMapUv:Ft&&S(F.anisotropyMap.channel),clearcoatMapUv:Rt&&S(F.clearcoatMap.channel),clearcoatNormalMapUv:tn&&S(F.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:it&&S(F.clearcoatRoughnessMap.channel),iridescenceMapUv:Zt&&S(F.iridescenceMap.channel),iridescenceThicknessMapUv:Xt&&S(F.iridescenceThicknessMap.channel),sheenColorMapUv:un&&S(F.sheenColorMap.channel),sheenRoughnessMapUv:Wt&&S(F.sheenRoughnessMap.channel),specularMapUv:mn&&S(F.specularMap.channel),specularColorMapUv:fn&&S(F.specularColorMap.channel),specularIntensityMapUv:nn&&S(F.specularIntensityMap.channel),transmissionMapUv:Ke&&S(F.transmissionMap.channel),thicknessMapUv:ot&&S(F.thicknessMap.channel),alphaMapUv:It&&S(F.alphaMap.channel),vertexTangents:!!se.attributes.tangent&&(Ct||le),vertexColors:F.vertexColors,vertexAlphas:F.vertexColors===!0&&!!se.attributes.color&&se.attributes.color.itemSize===4,pointsUvs:W.isPoints===!0&&!!se.attributes.uv&&(tt||It),fog:!!j,useFog:F.fog===!0,fogExp2:!!j&&j.isFogExp2,flatShading:F.flatShading===!0,sizeAttenuation:F.sizeAttenuation===!0,logarithmicDepthBuffer:f,reverseDepthBuffer:Ie,skinning:W.isSkinnedMesh===!0,morphTargets:se.morphAttributes.position!==void 0,morphNormals:se.morphAttributes.normal!==void 0,morphColors:se.morphAttributes.color!==void 0,morphTargetsCount:ee,morphTextureStride:G,numDirLights:U.directional.length,numPointLights:U.point.length,numSpotLights:U.spot.length,numSpotLightMaps:U.spotLightMap.length,numRectAreaLights:U.rectArea.length,numHemiLights:U.hemi.length,numDirLightShadows:U.directionalShadowMap.length,numPointLightShadows:U.pointShadowMap.length,numSpotLightShadows:U.spotShadowMap.length,numSpotLightShadowsWithMaps:U.numSpotLightShadowsWithMaps,numLightProbes:U.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:F.dithering,shadowMapEnabled:n.shadowMap.enabled&&k.length>0,shadowMapType:n.shadowMap.type,toneMapping:ir,decodeVideoTexture:tt&&F.map.isVideoTexture===!0&&Gr.getTransfer(F.map.colorSpace)===Ti,decodeVideoTextureEmissive:mt&&F.emissiveMap.isVideoTexture===!0&&Gr.getTransfer(F.emissiveMap.colorSpace)===Ti,premultipliedAlpha:F.premultipliedAlpha,doubleSided:F.side===Cc,flipSided:F.side===nl,useDepthPacking:F.depthPacking>=0,depthPacking:F.depthPacking||0,index0AttributeName:F.index0AttributeName,extensionClipCullDistance:rn&&F.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(rn&&F.extensions.multiDraw===!0||Xe)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:F.customProgramCacheKey()};return $n.vertexUv1s=u.has(1),$n.vertexUv2s=u.has(2),$n.vertexUv3s=u.has(3),u.clear(),$n}function _(F){const U=[];if(F.shaderID?U.push(F.shaderID):(U.push(F.customVertexShaderID),U.push(F.customFragmentShaderID)),F.defines!==void 0)for(const k in F.defines)U.push(k),U.push(F.defines[k]);return F.isRawShaderMaterial===!1&&(w(U,F),A(U,F),U.push(n.outputColorSpace)),U.push(F.customProgramCacheKey),U.join()}function w(F,U){F.push(U.precision),F.push(U.outputColorSpace),F.push(U.envMapMode),F.push(U.envMapCubeUVHeight),F.push(U.mapUv),F.push(U.alphaMapUv),F.push(U.lightMapUv),F.push(U.aoMapUv),F.push(U.bumpMapUv),F.push(U.normalMapUv),F.push(U.displacementMapUv),F.push(U.emissiveMapUv),F.push(U.metalnessMapUv),F.push(U.roughnessMapUv),F.push(U.anisotropyMapUv),F.push(U.clearcoatMapUv),F.push(U.clearcoatNormalMapUv),F.push(U.clearcoatRoughnessMapUv),F.push(U.iridescenceMapUv),F.push(U.iridescenceThicknessMapUv),F.push(U.sheenColorMapUv),F.push(U.sheenRoughnessMapUv),F.push(U.specularMapUv),F.push(U.specularColorMapUv),F.push(U.specularIntensityMapUv),F.push(U.transmissionMapUv),F.push(U.thicknessMapUv),F.push(U.combine),F.push(U.fogExp2),F.push(U.sizeAttenuation),F.push(U.morphTargetsCount),F.push(U.morphAttributeCount),F.push(U.numDirLights),F.push(U.numPointLights),F.push(U.numSpotLights),F.push(U.numSpotLightMaps),F.push(U.numHemiLights),F.push(U.numRectAreaLights),F.push(U.numDirLightShadows),F.push(U.numPointLightShadows),F.push(U.numSpotLightShadows),F.push(U.numSpotLightShadowsWithMaps),F.push(U.numLightProbes),F.push(U.shadowMapType),F.push(U.toneMapping),F.push(U.numClippingPlanes),F.push(U.numClipIntersection),F.push(U.depthPacking)}function A(F,U){s.disableAll(),U.supportsVertexTextures&&s.enable(0),U.instancing&&s.enable(1),U.instancingColor&&s.enable(2),U.instancingMorph&&s.enable(3),U.matcap&&s.enable(4),U.envMap&&s.enable(5),U.normalMapObjectSpace&&s.enable(6),U.normalMapTangentSpace&&s.enable(7),U.clearcoat&&s.enable(8),U.iridescence&&s.enable(9),U.alphaTest&&s.enable(10),U.vertexColors&&s.enable(11),U.vertexAlphas&&s.enable(12),U.vertexUv1s&&s.enable(13),U.vertexUv2s&&s.enable(14),U.vertexUv3s&&s.enable(15),U.vertexTangents&&s.enable(16),U.anisotropy&&s.enable(17),U.alphaHash&&s.enable(18),U.batching&&s.enable(19),U.dispersion&&s.enable(20),U.batchingColor&&s.enable(21),F.push(s.mask),s.disableAll(),U.fog&&s.enable(0),U.useFog&&s.enable(1),U.flatShading&&s.enable(2),U.logarithmicDepthBuffer&&s.enable(3),U.reverseDepthBuffer&&s.enable(4),U.skinning&&s.enable(5),U.morphTargets&&s.enable(6),U.morphNormals&&s.enable(7),U.morphColors&&s.enable(8),U.premultipliedAlpha&&s.enable(9),U.shadowMapEnabled&&s.enable(10),U.doubleSided&&s.enable(11),U.flipSided&&s.enable(12),U.useDepthPacking&&s.enable(13),U.dithering&&s.enable(14),U.transmission&&s.enable(15),U.sheen&&s.enable(16),U.opaque&&s.enable(17),U.pointsUvs&&s.enable(18),U.decodeVideoTexture&&s.enable(19),U.decodeVideoTextureEmissive&&s.enable(20),U.alphaToCoverage&&s.enable(21),F.push(s.mask)}function E(F){const U=v[F.type];let k;if(U){const z=Mc[U];k=DP.clone(z.uniforms)}else k=F.uniforms;return k}function P(F,U){let k;for(let z=0,W=c.length;z<W;z++){const j=c[z];if(j.cacheKey===U){k=j,++k.usedTimes;break}}return k===void 0&&(k=new Ire(n,U,F,o),c.push(k)),k}function O(F){if(--F.usedTimes===0){const U=c.indexOf(F);c[U]=c[c.length-1],c.pop(),F.destroy()}}function L(F){l.remove(F)}function D(){l.dispose()}return{getParameters:y,getProgramCacheKey:_,getUniforms:E,acquireProgram:P,releaseProgram:O,releaseShaderCache:L,programs:c,dispose:D}}function Dre(){let n=new WeakMap;function e(a){return n.has(a)}function t(a){let s=n.get(a);return s===void 0&&(s={},n.set(a,s)),s}function r(a){n.delete(a)}function i(a,s,l){n.get(a)[s]=l}function o(){n=new WeakMap}return{has:e,get:t,remove:r,update:i,dispose:o}}function kre(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function PL(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function IL(){const n=[];let e=0;const t=[],r=[],i=[];function o(){e=0,t.length=0,r.length=0,i.length=0}function a(f,h,p,v,S,y){let _=n[e];return _===void 0?(_={id:f.id,object:f,geometry:h,material:p,groupOrder:v,renderOrder:f.renderOrder,z:S,group:y},n[e]=_):(_.id=f.id,_.object=f,_.geometry=h,_.material=p,_.groupOrder=v,_.renderOrder=f.renderOrder,_.z=S,_.group=y),e++,_}function s(f,h,p,v,S,y){const _=a(f,h,p,v,S,y);p.transmission>0?r.push(_):p.transparent===!0?i.push(_):t.push(_)}function l(f,h,p,v,S,y){const _=a(f,h,p,v,S,y);p.transmission>0?r.unshift(_):p.transparent===!0?i.unshift(_):t.unshift(_)}function u(f,h){t.length>1&&t.sort(f||kre),r.length>1&&r.sort(h||PL),i.length>1&&i.sort(h||PL)}function c(){for(let f=e,h=n.length;f<h;f++){const p=n[f];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}}return{opaque:t,transmissive:r,transparent:i,init:o,push:s,unshift:l,finish:c,sort:u}}function Fre(){let n=new WeakMap;function e(r,i){const o=n.get(r);let a;return o===void 0?(a=new IL,n.set(r,[a])):i>=o.length?(a=new IL,o.push(a)):a=o[i],a}function t(){n=new WeakMap}return{get:e,dispose:t}}function Ure(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Pe,color:new xn};break;case"SpotLight":t={position:new Pe,direction:new Pe,color:new xn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Pe,color:new xn,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Pe,skyColor:new xn,groundColor:new xn};break;case"RectAreaLight":t={color:new xn,position:new Pe,halfWidth:new Pe,halfHeight:new Pe};break}return n[e.id]=t,t}}}function Bre(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new zt};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new zt};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new zt,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let zre=0;function Hre(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function Vre(n){const e=new Ure,t=Bre(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)r.probe.push(new Pe);const i=new Pe,o=new Qn,a=new Qn;function s(u){let c=0,f=0,h=0;for(let F=0;F<9;F++)r.probe[F].set(0,0,0);let p=0,v=0,S=0,y=0,_=0,w=0,A=0,E=0,P=0,O=0,L=0;u.sort(Hre);for(let F=0,U=u.length;F<U;F++){const k=u[F],z=k.color,W=k.intensity,j=k.distance,se=k.shadow&&k.shadow.map?k.shadow.map.texture:null;if(k.isAmbientLight)c+=z.r*W,f+=z.g*W,h+=z.b*W;else if(k.isLightProbe){for(let Y=0;Y<9;Y++)r.probe[Y].addScaledVector(k.sh.coefficients[Y],W);L++}else if(k.isDirectionalLight){const Y=e.get(k);if(Y.color.copy(k.color).multiplyScalar(k.intensity),k.castShadow){const Q=k.shadow,X=t.get(k);X.shadowIntensity=Q.intensity,X.shadowBias=Q.bias,X.shadowNormalBias=Q.normalBias,X.shadowRadius=Q.radius,X.shadowMapSize=Q.mapSize,r.directionalShadow[p]=X,r.directionalShadowMap[p]=se,r.directionalShadowMatrix[p]=k.shadow.matrix,w++}r.directional[p]=Y,p++}else if(k.isSpotLight){const Y=e.get(k);Y.position.setFromMatrixPosition(k.matrixWorld),Y.color.copy(z).multiplyScalar(W),Y.distance=j,Y.coneCos=Math.cos(k.angle),Y.penumbraCos=Math.cos(k.angle*(1-k.penumbra)),Y.decay=k.decay,r.spot[S]=Y;const Q=k.shadow;if(k.map&&(r.spotLightMap[P]=k.map,P++,Q.updateMatrices(k),k.castShadow&&O++),r.spotLightMatrix[S]=Q.matrix,k.castShadow){const X=t.get(k);X.shadowIntensity=Q.intensity,X.shadowBias=Q.bias,X.shadowNormalBias=Q.normalBias,X.shadowRadius=Q.radius,X.shadowMapSize=Q.mapSize,r.spotShadow[S]=X,r.spotShadowMap[S]=se,E++}S++}else if(k.isRectAreaLight){const Y=e.get(k);Y.color.copy(z).multiplyScalar(W),Y.halfWidth.set(k.width*.5,0,0),Y.halfHeight.set(0,k.height*.5,0),r.rectArea[y]=Y,y++}else if(k.isPointLight){const Y=e.get(k);if(Y.color.copy(k.color).multiplyScalar(k.intensity),Y.distance=k.distance,Y.decay=k.decay,k.castShadow){const Q=k.shadow,X=t.get(k);X.shadowIntensity=Q.intensity,X.shadowBias=Q.bias,X.shadowNormalBias=Q.normalBias,X.shadowRadius=Q.radius,X.shadowMapSize=Q.mapSize,X.shadowCameraNear=Q.camera.near,X.shadowCameraFar=Q.camera.far,r.pointShadow[v]=X,r.pointShadowMap[v]=se,r.pointShadowMatrix[v]=k.shadow.matrix,A++}r.point[v]=Y,v++}else if(k.isHemisphereLight){const Y=e.get(k);Y.skyColor.copy(k.color).multiplyScalar(W),Y.groundColor.copy(k.groundColor).multiplyScalar(W),r.hemi[_]=Y,_++}}y>0&&(n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=pn.LTC_FLOAT_1,r.rectAreaLTC2=pn.LTC_FLOAT_2):(r.rectAreaLTC1=pn.LTC_HALF_1,r.rectAreaLTC2=pn.LTC_HALF_2)),r.ambient[0]=c,r.ambient[1]=f,r.ambient[2]=h;const D=r.hash;(D.directionalLength!==p||D.pointLength!==v||D.spotLength!==S||D.rectAreaLength!==y||D.hemiLength!==_||D.numDirectionalShadows!==w||D.numPointShadows!==A||D.numSpotShadows!==E||D.numSpotMaps!==P||D.numLightProbes!==L)&&(r.directional.length=p,r.spot.length=S,r.rectArea.length=y,r.point.length=v,r.hemi.length=_,r.directionalShadow.length=w,r.directionalShadowMap.length=w,r.pointShadow.length=A,r.pointShadowMap.length=A,r.spotShadow.length=E,r.spotShadowMap.length=E,r.directionalShadowMatrix.length=w,r.pointShadowMatrix.length=A,r.spotLightMatrix.length=E+P-O,r.spotLightMap.length=P,r.numSpotLightShadowsWithMaps=O,r.numLightProbes=L,D.directionalLength=p,D.pointLength=v,D.spotLength=S,D.rectAreaLength=y,D.hemiLength=_,D.numDirectionalShadows=w,D.numPointShadows=A,D.numSpotShadows=E,D.numSpotMaps=P,D.numLightProbes=L,r.version=zre++)}function l(u,c){let f=0,h=0,p=0,v=0,S=0;const y=c.matrixWorldInverse;for(let _=0,w=u.length;_<w;_++){const A=u[_];if(A.isDirectionalLight){const E=r.directional[f];E.direction.setFromMatrixPosition(A.matrixWorld),i.setFromMatrixPosition(A.target.matrixWorld),E.direction.sub(i),E.direction.transformDirection(y),f++}else if(A.isSpotLight){const E=r.spot[p];E.position.setFromMatrixPosition(A.matrixWorld),E.position.applyMatrix4(y),E.direction.setFromMatrixPosition(A.matrixWorld),i.setFromMatrixPosition(A.target.matrixWorld),E.direction.sub(i),E.direction.transformDirection(y),p++}else if(A.isRectAreaLight){const E=r.rectArea[v];E.position.setFromMatrixPosition(A.matrixWorld),E.position.applyMatrix4(y),a.identity(),o.copy(A.matrixWorld),o.premultiply(y),a.extractRotation(o),E.halfWidth.set(A.width*.5,0,0),E.halfHeight.set(0,A.height*.5,0),E.halfWidth.applyMatrix4(a),E.halfHeight.applyMatrix4(a),v++}else if(A.isPointLight){const E=r.point[h];E.position.setFromMatrixPosition(A.matrixWorld),E.position.applyMatrix4(y),h++}else if(A.isHemisphereLight){const E=r.hemi[S];E.direction.setFromMatrixPosition(A.matrixWorld),E.direction.transformDirection(y),S++}}}return{setup:s,setupView:l,state:r}}function RL(n){const e=new Vre(n),t=[],r=[];function i(c){u.camera=c,t.length=0,r.length=0}function o(c){t.push(c)}function a(c){r.push(c)}function s(){e.setup(t)}function l(c){e.setupView(t,c)}const u={lightsArray:t,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:u,setupLights:s,setupLightsView:l,pushLight:o,pushShadow:a}}function Gre(n){let e=new WeakMap;function t(i,o=0){const a=e.get(i);let s;return a===void 0?(s=new RL(n),e.set(i,[s])):o>=a.length?(s=new RL(n),a.push(s)):s=a[o],s}function r(){e=new WeakMap}return{get:t,dispose:r}}class UP extends ds{static get type(){return"MeshDepthMaterial"}constructor(e){super(),this.isMeshDepthMaterial=!0,this.depthPacking=Pz,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class BP extends ds{static get type(){return"MeshDistanceMaterial"}constructor(e){super(),this.isMeshDistanceMaterial=!0,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const qre=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Wre=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function jre(n,e,t){let r=new Vy;const i=new zt,o=new zt,a=new Yr,s=new UP({depthPacking:Iz}),l=new BP,u={},c=t.maxTextureSize,f={[ld]:nl,[nl]:ld,[Cc]:Cc},h=new ol({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new zt},radius:{value:4}},vertexShader:qre,fragmentShader:Wre}),p=h.clone();p.defines.HORIZONTAL_PASS=1;const v=new wr;v.setAttribute("position",new Oi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const S=new Co(v,h),y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=KS;let _=this.type;this.render=function(O,L,D){if(y.enabled===!1||y.autoUpdate===!1&&y.needsUpdate===!1||O.length===0)return;const F=n.getRenderTarget(),U=n.getActiveCubeFace(),k=n.getActiveMipmapLevel(),z=n.state;z.setBlending(gf),z.buffers.color.setClear(1,1,1,1),z.buffers.depth.setTest(!0),z.setScissorTest(!1);const W=_!==Ac&&this.type===Ac,j=_===Ac&&this.type!==Ac;for(let se=0,Y=O.length;se<Y;se++){const Q=O[se],X=Q.shadow;if(X===void 0){console.warn("THREE.WebGLShadowMap:",Q,"has no shadow.");continue}if(X.autoUpdate===!1&&X.needsUpdate===!1)continue;i.copy(X.mapSize);const Z=X.getFrameExtents();if(i.multiply(Z),o.copy(X.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(o.x=Math.floor(c/Z.x),i.x=o.x*Z.x,X.mapSize.x=o.x),i.y>c&&(o.y=Math.floor(c/Z.y),i.y=o.y*Z.y,X.mapSize.y=o.y)),X.map===null||W===!0||j===!0){const ee=this.type!==Ac?{minFilter:fs,magFilter:fs}:{};X.map!==null&&X.map.dispose(),X.map=new Bl(i.x,i.y,ee),X.map.texture.name=Q.name+".shadowMap",X.camera.updateProjectionMatrix()}n.setRenderTarget(X.map),n.clear();const oe=X.getViewportCount();for(let ee=0;ee<oe;ee++){const G=X.getViewport(ee);a.set(o.x*G.x,o.y*G.y,o.x*G.z,o.y*G.w),z.viewport(a),X.updateMatrices(Q,ee),r=X.getFrustum(),E(L,D,X.camera,Q,this.type)}X.isPointLightShadow!==!0&&this.type===Ac&&w(X,D),X.needsUpdate=!1}_=this.type,y.needsUpdate=!1,n.setRenderTarget(F,U,k)};function w(O,L){const D=e.update(S);h.defines.VSM_SAMPLES!==O.blurSamples&&(h.defines.VSM_SAMPLES=O.blurSamples,p.defines.VSM_SAMPLES=O.blurSamples,h.needsUpdate=!0,p.needsUpdate=!0),O.mapPass===null&&(O.mapPass=new Bl(i.x,i.y)),h.uniforms.shadow_pass.value=O.map.texture,h.uniforms.resolution.value=O.mapSize,h.uniforms.radius.value=O.radius,n.setRenderTarget(O.mapPass),n.clear(),n.renderBufferDirect(L,null,D,h,S,null),p.uniforms.shadow_pass.value=O.mapPass.texture,p.uniforms.resolution.value=O.mapSize,p.uniforms.radius.value=O.radius,n.setRenderTarget(O.map),n.clear(),n.renderBufferDirect(L,null,D,p,S,null)}function A(O,L,D,F){let U=null;const k=D.isPointLight===!0?O.customDistanceMaterial:O.customDepthMaterial;if(k!==void 0)U=k;else if(U=D.isPointLight===!0?l:s,n.localClippingEnabled&&L.clipShadows===!0&&Array.isArray(L.clippingPlanes)&&L.clippingPlanes.length!==0||L.displacementMap&&L.displacementScale!==0||L.alphaMap&&L.alphaTest>0||L.map&&L.alphaTest>0){const z=U.uuid,W=L.uuid;let j=u[z];j===void 0&&(j={},u[z]=j);let se=j[W];se===void 0&&(se=U.clone(),j[W]=se,L.addEventListener("dispose",P)),U=se}if(U.visible=L.visible,U.wireframe=L.wireframe,F===Ac?U.side=L.shadowSide!==null?L.shadowSide:L.side:U.side=L.shadowSide!==null?L.shadowSide:f[L.side],U.alphaMap=L.alphaMap,U.alphaTest=L.alphaTest,U.map=L.map,U.clipShadows=L.clipShadows,U.clippingPlanes=L.clippingPlanes,U.clipIntersection=L.clipIntersection,U.displacementMap=L.displacementMap,U.displacementScale=L.displacementScale,U.displacementBias=L.displacementBias,U.wireframeLinewidth=L.wireframeLinewidth,U.linewidth=L.linewidth,D.isPointLight===!0&&U.isMeshDistanceMaterial===!0){const z=n.properties.get(U);z.light=D}return U}function E(O,L,D,F,U){if(O.visible===!1)return;if(O.layers.test(L.layers)&&(O.isMesh||O.isLine||O.isPoints)&&(O.castShadow||O.receiveShadow&&U===Ac)&&(!O.frustumCulled||r.intersectsObject(O))){O.modelViewMatrix.multiplyMatrices(D.matrixWorldInverse,O.matrixWorld);const W=e.update(O),j=O.material;if(Array.isArray(j)){const se=W.groups;for(let Y=0,Q=se.length;Y<Q;Y++){const X=se[Y],Z=j[X.materialIndex];if(Z&&Z.visible){const oe=A(O,Z,F,U);O.onBeforeShadow(n,O,L,D,W,oe,X),n.renderBufferDirect(D,null,W,oe,O,X),O.onAfterShadow(n,O,L,D,W,oe,X)}}}else if(j.visible){const se=A(O,j,F,U);O.onBeforeShadow(n,O,L,D,W,se,null),n.renderBufferDirect(D,null,W,se,O,null),O.onAfterShadow(n,O,L,D,W,se,null)}}const z=O.children;for(let W=0,j=z.length;W<j;W++)E(z[W],L,D,F,U)}function P(O){O.target.removeEventListener("dispose",P);for(const D in u){const F=u[D],U=O.target.uuid;U in F&&(F[U].dispose(),delete F[U])}}}const $re={[d_]:h_,[p_]:v_,[m_]:y_,[Fp]:g_,[h_]:d_,[v_]:p_,[y_]:m_,[g_]:Fp};function Xre(n,e){function t(){let Ke=!1;const ot=new Yr;let pt=null;const It=new Yr(0,0,0,0);return{setMask:function(Ht){pt!==Ht&&!Ke&&(n.colorMask(Ht,Ht,Ht,Ht),pt=Ht)},setLocked:function(Ht){Ke=Ht},setClear:function(Ht,Lt,rn,ir,$n){$n===!0&&(Ht*=ir,Lt*=ir,rn*=ir),ot.set(Ht,Lt,rn,ir),It.equals(ot)===!1&&(n.clearColor(Ht,Lt,rn,ir),It.copy(ot))},reset:function(){Ke=!1,pt=null,It.set(-1,0,0,0)}}}function r(){let Ke=!1,ot=!1,pt=null,It=null,Ht=null;return{setReversed:function(Lt){if(ot!==Lt){const rn=e.get("EXT_clip_control");ot?rn.clipControlEXT(rn.LOWER_LEFT_EXT,rn.ZERO_TO_ONE_EXT):rn.clipControlEXT(rn.LOWER_LEFT_EXT,rn.NEGATIVE_ONE_TO_ONE_EXT);const ir=Ht;Ht=null,this.setClear(ir)}ot=Lt},getReversed:function(){return ot},setTest:function(Lt){Lt?be(n.DEPTH_TEST):Ie(n.DEPTH_TEST)},setMask:function(Lt){pt!==Lt&&!Ke&&(n.depthMask(Lt),pt=Lt)},setFunc:function(Lt){if(ot&&(Lt=$re[Lt]),It!==Lt){switch(Lt){case d_:n.depthFunc(n.NEVER);break;case h_:n.depthFunc(n.ALWAYS);break;case p_:n.depthFunc(n.LESS);break;case Fp:n.depthFunc(n.LEQUAL);break;case m_:n.depthFunc(n.EQUAL);break;case g_:n.depthFunc(n.GEQUAL);break;case v_:n.depthFunc(n.GREATER);break;case y_:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}It=Lt}},setLocked:function(Lt){Ke=Lt},setClear:function(Lt){Ht!==Lt&&(ot&&(Lt=1-Lt),n.clearDepth(Lt),Ht=Lt)},reset:function(){Ke=!1,pt=null,It=null,Ht=null,ot=!1}}}function i(){let Ke=!1,ot=null,pt=null,It=null,Ht=null,Lt=null,rn=null,ir=null,$n=null;return{setTest:function(Gn){Ke||(Gn?be(n.STENCIL_TEST):Ie(n.STENCIL_TEST))},setMask:function(Gn){ot!==Gn&&!Ke&&(n.stencilMask(Gn),ot=Gn)},setFunc:function(Gn,Br,gn){(pt!==Gn||It!==Br||Ht!==gn)&&(n.stencilFunc(Gn,Br,gn),pt=Gn,It=Br,Ht=gn)},setOp:function(Gn,Br,gn){(Lt!==Gn||rn!==Br||ir!==gn)&&(n.stencilOp(Gn,Br,gn),Lt=Gn,rn=Br,ir=gn)},setLocked:function(Gn){Ke=Gn},setClear:function(Gn){$n!==Gn&&(n.clearStencil(Gn),$n=Gn)},reset:function(){Ke=!1,ot=null,pt=null,It=null,Ht=null,Lt=null,rn=null,ir=null,$n=null}}}const o=new t,a=new r,s=new i,l=new WeakMap,u=new WeakMap;let c={},f={},h=new WeakMap,p=[],v=null,S=!1,y=null,_=null,w=null,A=null,E=null,P=null,O=null,L=new xn(0,0,0),D=0,F=!1,U=null,k=null,z=null,W=null,j=null;const se=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Y=!1,Q=0;const X=n.getParameter(n.VERSION);X.indexOf("WebGL")!==-1?(Q=parseFloat(/^WebGL (\d)/.exec(X)[1]),Y=Q>=1):X.indexOf("OpenGL ES")!==-1&&(Q=parseFloat(/^OpenGL ES (\d)/.exec(X)[1]),Y=Q>=2);let Z=null,oe={};const ee=n.getParameter(n.SCISSOR_BOX),G=n.getParameter(n.VIEWPORT),ne=new Yr().fromArray(ee),te=new Yr().fromArray(G);function de(Ke,ot,pt,It){const Ht=new Uint8Array(4),Lt=n.createTexture();n.bindTexture(Ke,Lt),n.texParameteri(Ke,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(Ke,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let rn=0;rn<pt;rn++)Ke===n.TEXTURE_3D||Ke===n.TEXTURE_2D_ARRAY?n.texImage3D(ot,0,n.RGBA,1,1,It,0,n.RGBA,n.UNSIGNED_BYTE,Ht):n.texImage2D(ot+rn,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Ht);return Lt}const me={};me[n.TEXTURE_2D]=de(n.TEXTURE_2D,n.TEXTURE_2D,1),me[n.TEXTURE_CUBE_MAP]=de(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),me[n.TEXTURE_2D_ARRAY]=de(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),me[n.TEXTURE_3D]=de(n.TEXTURE_3D,n.TEXTURE_3D,1,1),o.setClear(0,0,0,1),a.setClear(1),s.setClear(0),be(n.DEPTH_TEST),a.setFunc(Fp),ye(!1),Ct(pC),be(n.CULL_FACE),Se(gf);function be(Ke){c[Ke]!==!0&&(n.enable(Ke),c[Ke]=!0)}function Ie(Ke){c[Ke]!==!1&&(n.disable(Ke),c[Ke]=!1)}function Ee(Ke,ot){return f[Ke]!==ot?(n.bindFramebuffer(Ke,ot),f[Ke]=ot,Ke===n.DRAW_FRAMEBUFFER&&(f[n.FRAMEBUFFER]=ot),Ke===n.FRAMEBUFFER&&(f[n.DRAW_FRAMEBUFFER]=ot),!0):!1}function Xe(Ke,ot){let pt=p,It=!1;if(Ke){pt=h.get(ot),pt===void 0&&(pt=[],h.set(ot,pt));const Ht=Ke.textures;if(pt.length!==Ht.length||pt[0]!==n.COLOR_ATTACHMENT0){for(let Lt=0,rn=Ht.length;Lt<rn;Lt++)pt[Lt]=n.COLOR_ATTACHMENT0+Lt;pt.length=Ht.length,It=!0}}else pt[0]!==n.BACK&&(pt[0]=n.BACK,It=!0);It&&n.drawBuffers(pt)}function tt(Ke){return v!==Ke?(n.useProgram(Ke),v=Ke,!0):!1}const Te={[rh]:n.FUNC_ADD,[ez]:n.FUNC_SUBTRACT,[tz]:n.FUNC_REVERSE_SUBTRACT};Te[nz]=n.MIN,Te[rz]=n.MAX;const Je={[iz]:n.ZERO,[oz]:n.ONE,[az]:n.SRC_COLOR,[c_]:n.SRC_ALPHA,[dz]:n.SRC_ALPHA_SATURATE,[cz]:n.DST_COLOR,[lz]:n.DST_ALPHA,[sz]:n.ONE_MINUS_SRC_COLOR,[f_]:n.ONE_MINUS_SRC_ALPHA,[fz]:n.ONE_MINUS_DST_COLOR,[uz]:n.ONE_MINUS_DST_ALPHA,[hz]:n.CONSTANT_COLOR,[pz]:n.ONE_MINUS_CONSTANT_COLOR,[mz]:n.CONSTANT_ALPHA,[gz]:n.ONE_MINUS_CONSTANT_ALPHA};function Se(Ke,ot,pt,It,Ht,Lt,rn,ir,$n,Gn){if(Ke===gf){S===!0&&(Ie(n.BLEND),S=!1);return}if(S===!1&&(be(n.BLEND),S=!0),Ke!==Q8){if(Ke!==y||Gn!==F){if((_!==rh||E!==rh)&&(n.blendEquation(n.FUNC_ADD),_=rh,E=rh),Gn)switch(Ke){case Ap:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case mC:n.blendFunc(n.ONE,n.ONE);break;case gC:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case vC:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ke);break}else switch(Ke){case Ap:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case mC:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case gC:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case vC:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ke);break}w=null,A=null,P=null,O=null,L.set(0,0,0),D=0,y=Ke,F=Gn}return}Ht=Ht||ot,Lt=Lt||pt,rn=rn||It,(ot!==_||Ht!==E)&&(n.blendEquationSeparate(Te[ot],Te[Ht]),_=ot,E=Ht),(pt!==w||It!==A||Lt!==P||rn!==O)&&(n.blendFuncSeparate(Je[pt],Je[It],Je[Lt],Je[rn]),w=pt,A=It,P=Lt,O=rn),(ir.equals(L)===!1||$n!==D)&&(n.blendColor(ir.r,ir.g,ir.b,$n),L.copy(ir),D=$n),y=Ke,F=!1}function Ge(Ke,ot){Ke.side===Cc?Ie(n.CULL_FACE):be(n.CULL_FACE);let pt=Ke.side===nl;ot&&(pt=!pt),ye(pt),Ke.blending===Ap&&Ke.transparent===!1?Se(gf):Se(Ke.blending,Ke.blendEquation,Ke.blendSrc,Ke.blendDst,Ke.blendEquationAlpha,Ke.blendSrcAlpha,Ke.blendDstAlpha,Ke.blendColor,Ke.blendAlpha,Ke.premultipliedAlpha),a.setFunc(Ke.depthFunc),a.setTest(Ke.depthTest),a.setMask(Ke.depthWrite),o.setMask(Ke.colorWrite);const It=Ke.stencilWrite;s.setTest(It),It&&(s.setMask(Ke.stencilWriteMask),s.setFunc(Ke.stencilFunc,Ke.stencilRef,Ke.stencilFuncMask),s.setOp(Ke.stencilFail,Ke.stencilZFail,Ke.stencilZPass)),mt(Ke.polygonOffset,Ke.polygonOffsetFactor,Ke.polygonOffsetUnits),Ke.alphaToCoverage===!0?be(n.SAMPLE_ALPHA_TO_COVERAGE):Ie(n.SAMPLE_ALPHA_TO_COVERAGE)}function ye(Ke){U!==Ke&&(Ke?n.frontFace(n.CW):n.frontFace(n.CCW),U=Ke)}function Ct(Ke){Ke!==K8?(be(n.CULL_FACE),Ke!==k&&(Ke===pC?n.cullFace(n.BACK):Ke===J8?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Ie(n.CULL_FACE),k=Ke}function ft(Ke){Ke!==z&&(Y&&n.lineWidth(Ke),z=Ke)}function mt(Ke,ot,pt){Ke?(be(n.POLYGON_OFFSET_FILL),(W!==ot||j!==pt)&&(n.polygonOffset(ot,pt),W=ot,j=pt)):Ie(n.POLYGON_OFFSET_FILL)}function lt(Ke){Ke?be(n.SCISSOR_TEST):Ie(n.SCISSOR_TEST)}function ve(Ke){Ke===void 0&&(Ke=n.TEXTURE0+se-1),Z!==Ke&&(n.activeTexture(Ke),Z=Ke)}function le(Ke,ot,pt){pt===void 0&&(Z===null?pt=n.TEXTURE0+se-1:pt=Z);let It=oe[pt];It===void 0&&(It={type:void 0,texture:void 0},oe[pt]=It),(It.type!==Ke||It.texture!==ot)&&(Z!==pt&&(n.activeTexture(pt),Z=pt),n.bindTexture(Ke,ot||me[Ke]),It.type=Ke,It.texture=ot)}function He(){const Ke=oe[Z];Ke!==void 0&&Ke.type!==void 0&&(n.bindTexture(Ke.type,null),Ke.type=void 0,Ke.texture=void 0)}function rt(){try{n.compressedTexImage2D.apply(n,arguments)}catch(Ke){console.error("THREE.WebGLState:",Ke)}}function vt(){try{n.compressedTexImage3D.apply(n,arguments)}catch(Ke){console.error("THREE.WebGLState:",Ke)}}function ht(){try{n.texSubImage2D.apply(n,arguments)}catch(Ke){console.error("THREE.WebGLState:",Ke)}}function qt(){try{n.texSubImage3D.apply(n,arguments)}catch(Ke){console.error("THREE.WebGLState:",Ke)}}function Ft(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(Ke){console.error("THREE.WebGLState:",Ke)}}function Rt(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(Ke){console.error("THREE.WebGLState:",Ke)}}function tn(){try{n.texStorage2D.apply(n,arguments)}catch(Ke){console.error("THREE.WebGLState:",Ke)}}function it(){try{n.texStorage3D.apply(n,arguments)}catch(Ke){console.error("THREE.WebGLState:",Ke)}}function Zt(){try{n.texImage2D.apply(n,arguments)}catch(Ke){console.error("THREE.WebGLState:",Ke)}}function Xt(){try{n.texImage3D.apply(n,arguments)}catch(Ke){console.error("THREE.WebGLState:",Ke)}}function un(Ke){ne.equals(Ke)===!1&&(n.scissor(Ke.x,Ke.y,Ke.z,Ke.w),ne.copy(Ke))}function Wt(Ke){te.equals(Ke)===!1&&(n.viewport(Ke.x,Ke.y,Ke.z,Ke.w),te.copy(Ke))}function mn(Ke,ot){let pt=u.get(ot);pt===void 0&&(pt=new WeakMap,u.set(ot,pt));let It=pt.get(Ke);It===void 0&&(It=n.getUniformBlockIndex(ot,Ke.name),pt.set(Ke,It))}function fn(Ke,ot){const It=u.get(ot).get(Ke);l.get(ot)!==It&&(n.uniformBlockBinding(ot,It,Ke.__bindingPointIndex),l.set(ot,It))}function nn(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),a.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),c={},Z=null,oe={},f={},h=new WeakMap,p=[],v=null,S=!1,y=null,_=null,w=null,A=null,E=null,P=null,O=null,L=new xn(0,0,0),D=0,F=!1,U=null,k=null,z=null,W=null,j=null,ne.set(0,0,n.canvas.width,n.canvas.height),te.set(0,0,n.canvas.width,n.canvas.height),o.reset(),a.reset(),s.reset()}return{buffers:{color:o,depth:a,stencil:s},enable:be,disable:Ie,bindFramebuffer:Ee,drawBuffers:Xe,useProgram:tt,setBlending:Se,setMaterial:Ge,setFlipSided:ye,setCullFace:Ct,setLineWidth:ft,setPolygonOffset:mt,setScissorTest:lt,activeTexture:ve,bindTexture:le,unbindTexture:He,compressedTexImage2D:rt,compressedTexImage3D:vt,texImage2D:Zt,texImage3D:Xt,updateUBOMapping:mn,uniformBlockBinding:fn,texStorage2D:tn,texStorage3D:it,texSubImage2D:ht,texSubImage3D:qt,compressedTexSubImage2D:Ft,compressedTexSubImage3D:Rt,scissor:un,viewport:Wt,reset:nn}}function Yre(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function Kre(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function Jre(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function AC(n,e,t,r){const i=Zre(r);switch(t){case bP:return n*e;case EP:return n*e;case TP:return n*e*2;case Fy:return n*e/i.components*i.byteLength;case Uy:return n*e/i.components*i.byteLength;case MP:return n*e*2/i.components*i.byteLength;case tw:return n*e*2/i.components*i.byteLength;case AP:return n*e*3/i.components*i.byteLength;case ia:return n*e*4/i.components*i.byteLength;case nw:return n*e*4/i.components*i.byteLength;case a0:case s0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case l0:case u0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case __:case w_:return Math.max(n,16)*Math.max(e,8)/4;case x_:case S_:return Math.max(n,8)*Math.max(e,8)/2;case b_:case A_:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case E_:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case T_:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case M_:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case C_:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case P_:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case I_:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case R_:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case N_:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case L_:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case O_:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case D_:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case k_:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case F_:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case U_:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case B_:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case c0:case z_:case H_:return Math.ceil(n/4)*Math.ceil(e/4)*16;case CP:case V_:return Math.ceil(n/4)*Math.ceil(e/4)*8;case G_:case q_:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function Zre(n){switch(n){case Ul:case JS:return{byteLength:1,components:1};case gg:case ZS:case La:return{byteLength:2,components:1};case QS:case ew:return{byteLength:2,components:4};case Af:case ky:case go:return{byteLength:4,components:1};case wP:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}const Qre={contain:Yre,cover:Kre,fill:Jre,getByteLength:AC};function eie(n,e,t,r,i,o,a){const s=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new zt,c=new WeakMap;let f;const h=new WeakMap;let p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(ve,le){return p?new OffscreenCanvas(ve,le):D0("canvas")}function S(ve,le,He){let rt=1;const vt=lt(ve);if((vt.width>He||vt.height>He)&&(rt=He/Math.max(vt.width,vt.height)),rt<1)if(typeof HTMLImageElement<"u"&&ve instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ve instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ve instanceof ImageBitmap||typeof VideoFrame<"u"&&ve instanceof VideoFrame){const ht=Math.floor(rt*vt.width),qt=Math.floor(rt*vt.height);f===void 0&&(f=v(ht,qt));const Ft=le?v(ht,qt):f;return Ft.width=ht,Ft.height=qt,Ft.getContext("2d").drawImage(ve,0,0,ht,qt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+vt.width+"x"+vt.height+") to ("+ht+"x"+qt+")."),Ft}else return"data"in ve&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+vt.width+"x"+vt.height+")."),ve;return ve}function y(ve){return ve.generateMipmaps}function _(ve){n.generateMipmap(ve)}function w(ve){return ve.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:ve.isWebGL3DRenderTarget?n.TEXTURE_3D:ve.isWebGLArrayRenderTarget||ve.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function A(ve,le,He,rt,vt=!1){if(ve!==null){if(n[ve]!==void 0)return n[ve];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ve+"'")}let ht=le;if(le===n.RED&&(He===n.FLOAT&&(ht=n.R32F),He===n.HALF_FLOAT&&(ht=n.R16F),He===n.UNSIGNED_BYTE&&(ht=n.R8)),le===n.RED_INTEGER&&(He===n.UNSIGNED_BYTE&&(ht=n.R8UI),He===n.UNSIGNED_SHORT&&(ht=n.R16UI),He===n.UNSIGNED_INT&&(ht=n.R32UI),He===n.BYTE&&(ht=n.R8I),He===n.SHORT&&(ht=n.R16I),He===n.INT&&(ht=n.R32I)),le===n.RG&&(He===n.FLOAT&&(ht=n.RG32F),He===n.HALF_FLOAT&&(ht=n.RG16F),He===n.UNSIGNED_BYTE&&(ht=n.RG8)),le===n.RG_INTEGER&&(He===n.UNSIGNED_BYTE&&(ht=n.RG8UI),He===n.UNSIGNED_SHORT&&(ht=n.RG16UI),He===n.UNSIGNED_INT&&(ht=n.RG32UI),He===n.BYTE&&(ht=n.RG8I),He===n.SHORT&&(ht=n.RG16I),He===n.INT&&(ht=n.RG32I)),le===n.RGB_INTEGER&&(He===n.UNSIGNED_BYTE&&(ht=n.RGB8UI),He===n.UNSIGNED_SHORT&&(ht=n.RGB16UI),He===n.UNSIGNED_INT&&(ht=n.RGB32UI),He===n.BYTE&&(ht=n.RGB8I),He===n.SHORT&&(ht=n.RGB16I),He===n.INT&&(ht=n.RGB32I)),le===n.RGBA_INTEGER&&(He===n.UNSIGNED_BYTE&&(ht=n.RGBA8UI),He===n.UNSIGNED_SHORT&&(ht=n.RGBA16UI),He===n.UNSIGNED_INT&&(ht=n.RGBA32UI),He===n.BYTE&&(ht=n.RGBA8I),He===n.SHORT&&(ht=n.RGBA16I),He===n.INT&&(ht=n.RGBA32I)),le===n.RGB&&He===n.UNSIGNED_INT_5_9_9_9_REV&&(ht=n.RGB9_E5),le===n.RGBA){const qt=vt?By:Gr.getTransfer(rt);He===n.FLOAT&&(ht=n.RGBA32F),He===n.HALF_FLOAT&&(ht=n.RGBA16F),He===n.UNSIGNED_BYTE&&(ht=qt===Ti?n.SRGB8_ALPHA8:n.RGBA8),He===n.UNSIGNED_SHORT_4_4_4_4&&(ht=n.RGBA4),He===n.UNSIGNED_SHORT_5_5_5_1&&(ht=n.RGB5_A1)}return(ht===n.R16F||ht===n.R32F||ht===n.RG16F||ht===n.RG32F||ht===n.RGBA16F||ht===n.RGBA32F)&&e.get("EXT_color_buffer_float"),ht}function E(ve,le){let He;return ve?le===null||le===Af||le===Up?He=n.DEPTH24_STENCIL8:le===go?He=n.DEPTH32F_STENCIL8:le===gg&&(He=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):le===null||le===Af||le===Up?He=n.DEPTH_COMPONENT24:le===go?He=n.DEPTH_COMPONENT32F:le===gg&&(He=n.DEPTH_COMPONENT16),He}function P(ve,le){return y(ve)===!0||ve.isFramebufferTexture&&ve.minFilter!==fs&&ve.minFilter!==mi?Math.log2(Math.max(le.width,le.height))+1:ve.mipmaps!==void 0&&ve.mipmaps.length>0?ve.mipmaps.length:ve.isCompressedTexture&&Array.isArray(ve.image)?le.mipmaps.length:1}function O(ve){const le=ve.target;le.removeEventListener("dispose",O),D(le),le.isVideoTexture&&c.delete(le)}function L(ve){const le=ve.target;le.removeEventListener("dispose",L),U(le)}function D(ve){const le=r.get(ve);if(le.__webglInit===void 0)return;const He=ve.source,rt=h.get(He);if(rt){const vt=rt[le.__cacheKey];vt.usedTimes--,vt.usedTimes===0&&F(ve),Object.keys(rt).length===0&&h.delete(He)}r.remove(ve)}function F(ve){const le=r.get(ve);n.deleteTexture(le.__webglTexture);const He=ve.source,rt=h.get(He);delete rt[le.__cacheKey],a.memory.textures--}function U(ve){const le=r.get(ve);if(ve.depthTexture&&(ve.depthTexture.dispose(),r.remove(ve.depthTexture)),ve.isWebGLCubeRenderTarget)for(let rt=0;rt<6;rt++){if(Array.isArray(le.__webglFramebuffer[rt]))for(let vt=0;vt<le.__webglFramebuffer[rt].length;vt++)n.deleteFramebuffer(le.__webglFramebuffer[rt][vt]);else n.deleteFramebuffer(le.__webglFramebuffer[rt]);le.__webglDepthbuffer&&n.deleteRenderbuffer(le.__webglDepthbuffer[rt])}else{if(Array.isArray(le.__webglFramebuffer))for(let rt=0;rt<le.__webglFramebuffer.length;rt++)n.deleteFramebuffer(le.__webglFramebuffer[rt]);else n.deleteFramebuffer(le.__webglFramebuffer);if(le.__webglDepthbuffer&&n.deleteRenderbuffer(le.__webglDepthbuffer),le.__webglMultisampledFramebuffer&&n.deleteFramebuffer(le.__webglMultisampledFramebuffer),le.__webglColorRenderbuffer)for(let rt=0;rt<le.__webglColorRenderbuffer.length;rt++)le.__webglColorRenderbuffer[rt]&&n.deleteRenderbuffer(le.__webglColorRenderbuffer[rt]);le.__webglDepthRenderbuffer&&n.deleteRenderbuffer(le.__webglDepthRenderbuffer)}const He=ve.textures;for(let rt=0,vt=He.length;rt<vt;rt++){const ht=r.get(He[rt]);ht.__webglTexture&&(n.deleteTexture(ht.__webglTexture),a.memory.textures--),r.remove(He[rt])}r.remove(ve)}let k=0;function z(){k=0}function W(){const ve=k;return ve>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+ve+" texture units while this GPU supports only "+i.maxTextures),k+=1,ve}function j(ve){const le=[];return le.push(ve.wrapS),le.push(ve.wrapT),le.push(ve.wrapR||0),le.push(ve.magFilter),le.push(ve.minFilter),le.push(ve.anisotropy),le.push(ve.internalFormat),le.push(ve.format),le.push(ve.type),le.push(ve.generateMipmaps),le.push(ve.premultiplyAlpha),le.push(ve.flipY),le.push(ve.unpackAlignment),le.push(ve.colorSpace),le.join()}function se(ve,le){const He=r.get(ve);if(ve.isVideoTexture&&ft(ve),ve.isRenderTargetTexture===!1&&ve.version>0&&He.__version!==ve.version){const rt=ve.image;if(rt===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(rt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{te(He,ve,le);return}}t.bindTexture(n.TEXTURE_2D,He.__webglTexture,n.TEXTURE0+le)}function Y(ve,le){const He=r.get(ve);if(ve.version>0&&He.__version!==ve.version){te(He,ve,le);return}t.bindTexture(n.TEXTURE_2D_ARRAY,He.__webglTexture,n.TEXTURE0+le)}function Q(ve,le){const He=r.get(ve);if(ve.version>0&&He.__version!==ve.version){te(He,ve,le);return}t.bindTexture(n.TEXTURE_3D,He.__webglTexture,n.TEXTURE0+le)}function X(ve,le){const He=r.get(ve);if(ve.version>0&&He.__version!==ve.version){de(He,ve,le);return}t.bindTexture(n.TEXTURE_CUBE_MAP,He.__webglTexture,n.TEXTURE0+le)}const Z={[P0]:n.REPEAT,[va]:n.CLAMP_TO_EDGE,[I0]:n.MIRRORED_REPEAT},oe={[fs]:n.NEAREST,[SP]:n.NEAREST_MIPMAP_NEAREST,[Zm]:n.NEAREST_MIPMAP_LINEAR,[mi]:n.LINEAR,[o0]:n.LINEAR_MIPMAP_NEAREST,[ff]:n.LINEAR_MIPMAP_LINEAR},ee={[Nz]:n.NEVER,[Uz]:n.ALWAYS,[Lz]:n.LESS,[IP]:n.LEQUAL,[Oz]:n.EQUAL,[Fz]:n.GEQUAL,[Dz]:n.GREATER,[kz]:n.NOTEQUAL};function G(ve,le){if(le.type===go&&e.has("OES_texture_float_linear")===!1&&(le.magFilter===mi||le.magFilter===o0||le.magFilter===Zm||le.magFilter===ff||le.minFilter===mi||le.minFilter===o0||le.minFilter===Zm||le.minFilter===ff)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(ve,n.TEXTURE_WRAP_S,Z[le.wrapS]),n.texParameteri(ve,n.TEXTURE_WRAP_T,Z[le.wrapT]),(ve===n.TEXTURE_3D||ve===n.TEXTURE_2D_ARRAY)&&n.texParameteri(ve,n.TEXTURE_WRAP_R,Z[le.wrapR]),n.texParameteri(ve,n.TEXTURE_MAG_FILTER,oe[le.magFilter]),n.texParameteri(ve,n.TEXTURE_MIN_FILTER,oe[le.minFilter]),le.compareFunction&&(n.texParameteri(ve,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(ve,n.TEXTURE_COMPARE_FUNC,ee[le.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(le.magFilter===fs||le.minFilter!==Zm&&le.minFilter!==ff||le.type===go&&e.has("OES_texture_float_linear")===!1)return;if(le.anisotropy>1||r.get(le).__currentAnisotropy){const He=e.get("EXT_texture_filter_anisotropic");n.texParameterf(ve,He.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(le.anisotropy,i.getMaxAnisotropy())),r.get(le).__currentAnisotropy=le.anisotropy}}}function ne(ve,le){let He=!1;ve.__webglInit===void 0&&(ve.__webglInit=!0,le.addEventListener("dispose",O));const rt=le.source;let vt=h.get(rt);vt===void 0&&(vt={},h.set(rt,vt));const ht=j(le);if(ht!==ve.__cacheKey){vt[ht]===void 0&&(vt[ht]={texture:n.createTexture(),usedTimes:0},a.memory.textures++,He=!0),vt[ht].usedTimes++;const qt=vt[ve.__cacheKey];qt!==void 0&&(vt[ve.__cacheKey].usedTimes--,qt.usedTimes===0&&F(le)),ve.__cacheKey=ht,ve.__webglTexture=vt[ht].texture}return He}function te(ve,le,He){let rt=n.TEXTURE_2D;(le.isDataArrayTexture||le.isCompressedArrayTexture)&&(rt=n.TEXTURE_2D_ARRAY),le.isData3DTexture&&(rt=n.TEXTURE_3D);const vt=ne(ve,le),ht=le.source;t.bindTexture(rt,ve.__webglTexture,n.TEXTURE0+He);const qt=r.get(ht);if(ht.version!==qt.__version||vt===!0){t.activeTexture(n.TEXTURE0+He);const Ft=Gr.getPrimaries(Gr.workingColorSpace),Rt=le.colorSpace===Jf?null:Gr.getPrimaries(le.colorSpace),tn=le.colorSpace===Jf||Ft===Rt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,le.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,le.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,le.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,tn);let it=S(le.image,!1,i.maxTextureSize);it=mt(le,it);const Zt=o.convert(le.format,le.colorSpace),Xt=o.convert(le.type);let un=A(le.internalFormat,Zt,Xt,le.colorSpace,le.isVideoTexture);G(rt,le);let Wt;const mn=le.mipmaps,fn=le.isVideoTexture!==!0,nn=qt.__version===void 0||vt===!0,Ke=ht.dataReady,ot=P(le,it);if(le.isDepthTexture)un=E(le.format===Bp,le.type),nn&&(fn?t.texStorage2D(n.TEXTURE_2D,1,un,it.width,it.height):t.texImage2D(n.TEXTURE_2D,0,un,it.width,it.height,0,Zt,Xt,null));else if(le.isDataTexture)if(mn.length>0){fn&&nn&&t.texStorage2D(n.TEXTURE_2D,ot,un,mn[0].width,mn[0].height);for(let pt=0,It=mn.length;pt<It;pt++)Wt=mn[pt],fn?Ke&&t.texSubImage2D(n.TEXTURE_2D,pt,0,0,Wt.width,Wt.height,Zt,Xt,Wt.data):t.texImage2D(n.TEXTURE_2D,pt,un,Wt.width,Wt.height,0,Zt,Xt,Wt.data);le.generateMipmaps=!1}else fn?(nn&&t.texStorage2D(n.TEXTURE_2D,ot,un,it.width,it.height),Ke&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,it.width,it.height,Zt,Xt,it.data)):t.texImage2D(n.TEXTURE_2D,0,un,it.width,it.height,0,Zt,Xt,it.data);else if(le.isCompressedTexture)if(le.isCompressedArrayTexture){fn&&nn&&t.texStorage3D(n.TEXTURE_2D_ARRAY,ot,un,mn[0].width,mn[0].height,it.depth);for(let pt=0,It=mn.length;pt<It;pt++)if(Wt=mn[pt],le.format!==ia)if(Zt!==null)if(fn){if(Ke)if(le.layerUpdates.size>0){const Ht=AC(Wt.width,Wt.height,le.format,le.type);for(const Lt of le.layerUpdates){const rn=Wt.data.subarray(Lt*Ht/Wt.data.BYTES_PER_ELEMENT,(Lt+1)*Ht/Wt.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,pt,0,0,Lt,Wt.width,Wt.height,1,Zt,rn)}le.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,pt,0,0,0,Wt.width,Wt.height,it.depth,Zt,Wt.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,pt,un,Wt.width,Wt.height,it.depth,0,Wt.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else fn?Ke&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,pt,0,0,0,Wt.width,Wt.height,it.depth,Zt,Xt,Wt.data):t.texImage3D(n.TEXTURE_2D_ARRAY,pt,un,Wt.width,Wt.height,it.depth,0,Zt,Xt,Wt.data)}else{fn&&nn&&t.texStorage2D(n.TEXTURE_2D,ot,un,mn[0].width,mn[0].height);for(let pt=0,It=mn.length;pt<It;pt++)Wt=mn[pt],le.format!==ia?Zt!==null?fn?Ke&&t.compressedTexSubImage2D(n.TEXTURE_2D,pt,0,0,Wt.width,Wt.height,Zt,Wt.data):t.compressedTexImage2D(n.TEXTURE_2D,pt,un,Wt.width,Wt.height,0,Wt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):fn?Ke&&t.texSubImage2D(n.TEXTURE_2D,pt,0,0,Wt.width,Wt.height,Zt,Xt,Wt.data):t.texImage2D(n.TEXTURE_2D,pt,un,Wt.width,Wt.height,0,Zt,Xt,Wt.data)}else if(le.isDataArrayTexture)if(fn){if(nn&&t.texStorage3D(n.TEXTURE_2D_ARRAY,ot,un,it.width,it.height,it.depth),Ke)if(le.layerUpdates.size>0){const pt=AC(it.width,it.height,le.format,le.type);for(const It of le.layerUpdates){const Ht=it.data.subarray(It*pt/it.data.BYTES_PER_ELEMENT,(It+1)*pt/it.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,It,it.width,it.height,1,Zt,Xt,Ht)}le.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,it.width,it.height,it.depth,Zt,Xt,it.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,un,it.width,it.height,it.depth,0,Zt,Xt,it.data);else if(le.isData3DTexture)fn?(nn&&t.texStorage3D(n.TEXTURE_3D,ot,un,it.width,it.height,it.depth),Ke&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,it.width,it.height,it.depth,Zt,Xt,it.data)):t.texImage3D(n.TEXTURE_3D,0,un,it.width,it.height,it.depth,0,Zt,Xt,it.data);else if(le.isFramebufferTexture){if(nn)if(fn)t.texStorage2D(n.TEXTURE_2D,ot,un,it.width,it.height);else{let pt=it.width,It=it.height;for(let Ht=0;Ht<ot;Ht++)t.texImage2D(n.TEXTURE_2D,Ht,un,pt,It,0,Zt,Xt,null),pt>>=1,It>>=1}}else if(mn.length>0){if(fn&&nn){const pt=lt(mn[0]);t.texStorage2D(n.TEXTURE_2D,ot,un,pt.width,pt.height)}for(let pt=0,It=mn.length;pt<It;pt++)Wt=mn[pt],fn?Ke&&t.texSubImage2D(n.TEXTURE_2D,pt,0,0,Zt,Xt,Wt):t.texImage2D(n.TEXTURE_2D,pt,un,Zt,Xt,Wt);le.generateMipmaps=!1}else if(fn){if(nn){const pt=lt(it);t.texStorage2D(n.TEXTURE_2D,ot,un,pt.width,pt.height)}Ke&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Zt,Xt,it)}else t.texImage2D(n.TEXTURE_2D,0,un,Zt,Xt,it);y(le)&&_(rt),qt.__version=ht.version,le.onUpdate&&le.onUpdate(le)}ve.__version=le.version}function de(ve,le,He){if(le.image.length!==6)return;const rt=ne(ve,le),vt=le.source;t.bindTexture(n.TEXTURE_CUBE_MAP,ve.__webglTexture,n.TEXTURE0+He);const ht=r.get(vt);if(vt.version!==ht.__version||rt===!0){t.activeTexture(n.TEXTURE0+He);const qt=Gr.getPrimaries(Gr.workingColorSpace),Ft=le.colorSpace===Jf?null:Gr.getPrimaries(le.colorSpace),Rt=le.colorSpace===Jf||qt===Ft?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,le.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,le.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,le.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Rt);const tn=le.isCompressedTexture||le.image[0].isCompressedTexture,it=le.image[0]&&le.image[0].isDataTexture,Zt=[];for(let It=0;It<6;It++)!tn&&!it?Zt[It]=S(le.image[It],!0,i.maxCubemapSize):Zt[It]=it?le.image[It].image:le.image[It],Zt[It]=mt(le,Zt[It]);const Xt=Zt[0],un=o.convert(le.format,le.colorSpace),Wt=o.convert(le.type),mn=A(le.internalFormat,un,Wt,le.colorSpace),fn=le.isVideoTexture!==!0,nn=ht.__version===void 0||rt===!0,Ke=vt.dataReady;let ot=P(le,Xt);G(n.TEXTURE_CUBE_MAP,le);let pt;if(tn){fn&&nn&&t.texStorage2D(n.TEXTURE_CUBE_MAP,ot,mn,Xt.width,Xt.height);for(let It=0;It<6;It++){pt=Zt[It].mipmaps;for(let Ht=0;Ht<pt.length;Ht++){const Lt=pt[Ht];le.format!==ia?un!==null?fn?Ke&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+It,Ht,0,0,Lt.width,Lt.height,un,Lt.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+It,Ht,mn,Lt.width,Lt.height,0,Lt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):fn?Ke&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+It,Ht,0,0,Lt.width,Lt.height,un,Wt,Lt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+It,Ht,mn,Lt.width,Lt.height,0,un,Wt,Lt.data)}}}else{if(pt=le.mipmaps,fn&&nn){pt.length>0&&ot++;const It=lt(Zt[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,ot,mn,It.width,It.height)}for(let It=0;It<6;It++)if(it){fn?Ke&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+It,0,0,0,Zt[It].width,Zt[It].height,un,Wt,Zt[It].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+It,0,mn,Zt[It].width,Zt[It].height,0,un,Wt,Zt[It].data);for(let Ht=0;Ht<pt.length;Ht++){const rn=pt[Ht].image[It].image;fn?Ke&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+It,Ht+1,0,0,rn.width,rn.height,un,Wt,rn.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+It,Ht+1,mn,rn.width,rn.height,0,un,Wt,rn.data)}}else{fn?Ke&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+It,0,0,0,un,Wt,Zt[It]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+It,0,mn,un,Wt,Zt[It]);for(let Ht=0;Ht<pt.length;Ht++){const Lt=pt[Ht];fn?Ke&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+It,Ht+1,0,0,un,Wt,Lt.image[It]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+It,Ht+1,mn,un,Wt,Lt.image[It])}}}y(le)&&_(n.TEXTURE_CUBE_MAP),ht.__version=vt.version,le.onUpdate&&le.onUpdate(le)}ve.__version=le.version}function me(ve,le,He,rt,vt,ht){const qt=o.convert(He.format,He.colorSpace),Ft=o.convert(He.type),Rt=A(He.internalFormat,qt,Ft,He.colorSpace),tn=r.get(le),it=r.get(He);if(it.__renderTarget=le,!tn.__hasExternalTextures){const Zt=Math.max(1,le.width>>ht),Xt=Math.max(1,le.height>>ht);vt===n.TEXTURE_3D||vt===n.TEXTURE_2D_ARRAY?t.texImage3D(vt,ht,Rt,Zt,Xt,le.depth,0,qt,Ft,null):t.texImage2D(vt,ht,Rt,Zt,Xt,0,qt,Ft,null)}t.bindFramebuffer(n.FRAMEBUFFER,ve),Ct(le)?s.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,rt,vt,it.__webglTexture,0,ye(le)):(vt===n.TEXTURE_2D||vt>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&vt<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,rt,vt,it.__webglTexture,ht),t.bindFramebuffer(n.FRAMEBUFFER,null)}function be(ve,le,He){if(n.bindRenderbuffer(n.RENDERBUFFER,ve),le.depthBuffer){const rt=le.depthTexture,vt=rt&&rt.isDepthTexture?rt.type:null,ht=E(le.stencilBuffer,vt),qt=le.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ft=ye(le);Ct(le)?s.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ft,ht,le.width,le.height):He?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ft,ht,le.width,le.height):n.renderbufferStorage(n.RENDERBUFFER,ht,le.width,le.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,qt,n.RENDERBUFFER,ve)}else{const rt=le.textures;for(let vt=0;vt<rt.length;vt++){const ht=rt[vt],qt=o.convert(ht.format,ht.colorSpace),Ft=o.convert(ht.type),Rt=A(ht.internalFormat,qt,Ft,ht.colorSpace),tn=ye(le);He&&Ct(le)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,tn,Rt,le.width,le.height):Ct(le)?s.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,tn,Rt,le.width,le.height):n.renderbufferStorage(n.RENDERBUFFER,Rt,le.width,le.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Ie(ve,le){if(le&&le.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,ve),!(le.depthTexture&&le.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const rt=r.get(le.depthTexture);rt.__renderTarget=le,(!rt.__webglTexture||le.depthTexture.image.width!==le.width||le.depthTexture.image.height!==le.height)&&(le.depthTexture.image.width=le.width,le.depthTexture.image.height=le.height,le.depthTexture.needsUpdate=!0),se(le.depthTexture,0);const vt=rt.__webglTexture,ht=ye(le);if(le.depthTexture.format===Ep)Ct(le)?s.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,vt,0,ht):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,vt,0);else if(le.depthTexture.format===Bp)Ct(le)?s.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,vt,0,ht):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,vt,0);else throw new Error("Unknown depthTexture format")}function Ee(ve){const le=r.get(ve),He=ve.isWebGLCubeRenderTarget===!0;if(le.__boundDepthTexture!==ve.depthTexture){const rt=ve.depthTexture;if(le.__depthDisposeCallback&&le.__depthDisposeCallback(),rt){const vt=()=>{delete le.__boundDepthTexture,delete le.__depthDisposeCallback,rt.removeEventListener("dispose",vt)};rt.addEventListener("dispose",vt),le.__depthDisposeCallback=vt}le.__boundDepthTexture=rt}if(ve.depthTexture&&!le.__autoAllocateDepthBuffer){if(He)throw new Error("target.depthTexture not supported in Cube render targets");Ie(le.__webglFramebuffer,ve)}else if(He){le.__webglDepthbuffer=[];for(let rt=0;rt<6;rt++)if(t.bindFramebuffer(n.FRAMEBUFFER,le.__webglFramebuffer[rt]),le.__webglDepthbuffer[rt]===void 0)le.__webglDepthbuffer[rt]=n.createRenderbuffer(),be(le.__webglDepthbuffer[rt],ve,!1);else{const vt=ve.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ht=le.__webglDepthbuffer[rt];n.bindRenderbuffer(n.RENDERBUFFER,ht),n.framebufferRenderbuffer(n.FRAMEBUFFER,vt,n.RENDERBUFFER,ht)}}else if(t.bindFramebuffer(n.FRAMEBUFFER,le.__webglFramebuffer),le.__webglDepthbuffer===void 0)le.__webglDepthbuffer=n.createRenderbuffer(),be(le.__webglDepthbuffer,ve,!1);else{const rt=ve.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,vt=le.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,vt),n.framebufferRenderbuffer(n.FRAMEBUFFER,rt,n.RENDERBUFFER,vt)}t.bindFramebuffer(n.FRAMEBUFFER,null)}function Xe(ve,le,He){const rt=r.get(ve);le!==void 0&&me(rt.__webglFramebuffer,ve,ve.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),He!==void 0&&Ee(ve)}function tt(ve){const le=ve.texture,He=r.get(ve),rt=r.get(le);ve.addEventListener("dispose",L);const vt=ve.textures,ht=ve.isWebGLCubeRenderTarget===!0,qt=vt.length>1;if(qt||(rt.__webglTexture===void 0&&(rt.__webglTexture=n.createTexture()),rt.__version=le.version,a.memory.textures++),ht){He.__webglFramebuffer=[];for(let Ft=0;Ft<6;Ft++)if(le.mipmaps&&le.mipmaps.length>0){He.__webglFramebuffer[Ft]=[];for(let Rt=0;Rt<le.mipmaps.length;Rt++)He.__webglFramebuffer[Ft][Rt]=n.createFramebuffer()}else He.__webglFramebuffer[Ft]=n.createFramebuffer()}else{if(le.mipmaps&&le.mipmaps.length>0){He.__webglFramebuffer=[];for(let Ft=0;Ft<le.mipmaps.length;Ft++)He.__webglFramebuffer[Ft]=n.createFramebuffer()}else He.__webglFramebuffer=n.createFramebuffer();if(qt)for(let Ft=0,Rt=vt.length;Ft<Rt;Ft++){const tn=r.get(vt[Ft]);tn.__webglTexture===void 0&&(tn.__webglTexture=n.createTexture(),a.memory.textures++)}if(ve.samples>0&&Ct(ve)===!1){He.__webglMultisampledFramebuffer=n.createFramebuffer(),He.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,He.__webglMultisampledFramebuffer);for(let Ft=0;Ft<vt.length;Ft++){const Rt=vt[Ft];He.__webglColorRenderbuffer[Ft]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,He.__webglColorRenderbuffer[Ft]);const tn=o.convert(Rt.format,Rt.colorSpace),it=o.convert(Rt.type),Zt=A(Rt.internalFormat,tn,it,Rt.colorSpace,ve.isXRRenderTarget===!0),Xt=ye(ve);n.renderbufferStorageMultisample(n.RENDERBUFFER,Xt,Zt,ve.width,ve.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ft,n.RENDERBUFFER,He.__webglColorRenderbuffer[Ft])}n.bindRenderbuffer(n.RENDERBUFFER,null),ve.depthBuffer&&(He.__webglDepthRenderbuffer=n.createRenderbuffer(),be(He.__webglDepthRenderbuffer,ve,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(ht){t.bindTexture(n.TEXTURE_CUBE_MAP,rt.__webglTexture),G(n.TEXTURE_CUBE_MAP,le);for(let Ft=0;Ft<6;Ft++)if(le.mipmaps&&le.mipmaps.length>0)for(let Rt=0;Rt<le.mipmaps.length;Rt++)me(He.__webglFramebuffer[Ft][Rt],ve,le,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ft,Rt);else me(He.__webglFramebuffer[Ft],ve,le,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ft,0);y(le)&&_(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(qt){for(let Ft=0,Rt=vt.length;Ft<Rt;Ft++){const tn=vt[Ft],it=r.get(tn);t.bindTexture(n.TEXTURE_2D,it.__webglTexture),G(n.TEXTURE_2D,tn),me(He.__webglFramebuffer,ve,tn,n.COLOR_ATTACHMENT0+Ft,n.TEXTURE_2D,0),y(tn)&&_(n.TEXTURE_2D)}t.unbindTexture()}else{let Ft=n.TEXTURE_2D;if((ve.isWebGL3DRenderTarget||ve.isWebGLArrayRenderTarget)&&(Ft=ve.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Ft,rt.__webglTexture),G(Ft,le),le.mipmaps&&le.mipmaps.length>0)for(let Rt=0;Rt<le.mipmaps.length;Rt++)me(He.__webglFramebuffer[Rt],ve,le,n.COLOR_ATTACHMENT0,Ft,Rt);else me(He.__webglFramebuffer,ve,le,n.COLOR_ATTACHMENT0,Ft,0);y(le)&&_(Ft),t.unbindTexture()}ve.depthBuffer&&Ee(ve)}function Te(ve){const le=ve.textures;for(let He=0,rt=le.length;He<rt;He++){const vt=le[He];if(y(vt)){const ht=w(ve),qt=r.get(vt).__webglTexture;t.bindTexture(ht,qt),_(ht),t.unbindTexture()}}}const Je=[],Se=[];function Ge(ve){if(ve.samples>0){if(Ct(ve)===!1){const le=ve.textures,He=ve.width,rt=ve.height;let vt=n.COLOR_BUFFER_BIT;const ht=ve.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,qt=r.get(ve),Ft=le.length>1;if(Ft)for(let Rt=0;Rt<le.length;Rt++)t.bindFramebuffer(n.FRAMEBUFFER,qt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Rt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,qt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Rt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,qt.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,qt.__webglFramebuffer);for(let Rt=0;Rt<le.length;Rt++){if(ve.resolveDepthBuffer&&(ve.depthBuffer&&(vt|=n.DEPTH_BUFFER_BIT),ve.stencilBuffer&&ve.resolveStencilBuffer&&(vt|=n.STENCIL_BUFFER_BIT)),Ft){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,qt.__webglColorRenderbuffer[Rt]);const tn=r.get(le[Rt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,tn,0)}n.blitFramebuffer(0,0,He,rt,0,0,He,rt,vt,n.NEAREST),l===!0&&(Je.length=0,Se.length=0,Je.push(n.COLOR_ATTACHMENT0+Rt),ve.depthBuffer&&ve.resolveDepthBuffer===!1&&(Je.push(ht),Se.push(ht),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,Se)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Je))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Ft)for(let Rt=0;Rt<le.length;Rt++){t.bindFramebuffer(n.FRAMEBUFFER,qt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Rt,n.RENDERBUFFER,qt.__webglColorRenderbuffer[Rt]);const tn=r.get(le[Rt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,qt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Rt,n.TEXTURE_2D,tn,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,qt.__webglMultisampledFramebuffer)}else if(ve.depthBuffer&&ve.resolveDepthBuffer===!1&&l){const le=ve.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[le])}}}function ye(ve){return Math.min(i.maxSamples,ve.samples)}function Ct(ve){const le=r.get(ve);return ve.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&le.__useRenderToTexture!==!1}function ft(ve){const le=a.render.frame;c.get(ve)!==le&&(c.set(ve,le),ve.update())}function mt(ve,le){const He=ve.colorSpace,rt=ve.format,vt=ve.type;return ve.isCompressedTexture===!0||ve.isVideoTexture===!0||He!==Ef&&He!==Jf&&(Gr.getTransfer(He)===Ti?(rt!==ia||vt!==Ul)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",He)),le}function lt(ve){return typeof HTMLImageElement<"u"&&ve instanceof HTMLImageElement?(u.width=ve.naturalWidth||ve.width,u.height=ve.naturalHeight||ve.height):typeof VideoFrame<"u"&&ve instanceof VideoFrame?(u.width=ve.displayWidth,u.height=ve.displayHeight):(u.width=ve.width,u.height=ve.height),u}this.allocateTextureUnit=W,this.resetTextureUnits=z,this.setTexture2D=se,this.setTexture2DArray=Y,this.setTexture3D=Q,this.setTextureCube=X,this.rebindTextures=Xe,this.setupRenderTarget=tt,this.updateRenderTargetMipmap=Te,this.updateMultisampleRenderTarget=Ge,this.setupDepthRenderbuffer=Ee,this.setupFrameBufferTexture=me,this.useMultisampledRTT=Ct}function Jz(n,e){function t(r,i=Jf){let o;const a=Gr.getTransfer(i);if(r===Ul)return n.UNSIGNED_BYTE;if(r===QS)return n.UNSIGNED_SHORT_4_4_4_4;if(r===ew)return n.UNSIGNED_SHORT_5_5_5_1;if(r===wP)return n.UNSIGNED_INT_5_9_9_9_REV;if(r===JS)return n.BYTE;if(r===ZS)return n.SHORT;if(r===gg)return n.UNSIGNED_SHORT;if(r===ky)return n.INT;if(r===Af)return n.UNSIGNED_INT;if(r===go)return n.FLOAT;if(r===La)return n.HALF_FLOAT;if(r===bP)return n.ALPHA;if(r===AP)return n.RGB;if(r===ia)return n.RGBA;if(r===EP)return n.LUMINANCE;if(r===TP)return n.LUMINANCE_ALPHA;if(r===Ep)return n.DEPTH_COMPONENT;if(r===Bp)return n.DEPTH_STENCIL;if(r===Fy)return n.RED;if(r===Uy)return n.RED_INTEGER;if(r===MP)return n.RG;if(r===tw)return n.RG_INTEGER;if(r===nw)return n.RGBA_INTEGER;if(r===a0||r===s0||r===l0||r===u0)if(a===Ti)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(r===a0)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===s0)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===l0)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===u0)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(r===a0)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===s0)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===l0)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===u0)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===x_||r===__||r===S_||r===w_)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(r===x_)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===__)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===S_)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===w_)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===b_||r===A_||r===E_)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(r===b_||r===A_)return a===Ti?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(r===E_)return a===Ti?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===T_||r===M_||r===C_||r===P_||r===I_||r===R_||r===N_||r===L_||r===O_||r===D_||r===k_||r===F_||r===U_||r===B_)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(r===T_)return a===Ti?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===M_)return a===Ti?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===C_)return a===Ti?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===P_)return a===Ti?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===I_)return a===Ti?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===R_)return a===Ti?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===N_)return a===Ti?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===L_)return a===Ti?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===O_)return a===Ti?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===D_)return a===Ti?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===k_)return a===Ti?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===F_)return a===Ti?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===U_)return a===Ti?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===B_)return a===Ti?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===c0||r===z_||r===H_)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(r===c0)return a===Ti?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===z_)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===H_)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===CP||r===V_||r===G_||r===q_)if(o=e.get("EXT_texture_compression_rgtc"),o!==null){if(r===c0)return o.COMPRESSED_RED_RGTC1_EXT;if(r===V_)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===G_)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===q_)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===Up?n.UNSIGNED_INT_24_8:n[r]!==void 0?n[r]:null}return{convert:t}}class Zz extends Qa{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class tg extends ti{constructor(){super(),this.isGroup=!0,this.type="Group"}}const tie={type:"move"};class d2{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new tg,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new tg,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Pe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Pe),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new tg,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Pe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Pe),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,o=null,a=null;const s=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){a=!0;for(const S of e.hand.values()){const y=t.getJointPose(S,r),_=this._getHandJoint(u,S);y!==null&&(_.matrix.fromArray(y.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.matrixWorldNeedsUpdate=!0,_.jointRadius=y.radius),_.visible=y!==null}const c=u.joints["index-finger-tip"],f=u.joints["thumb-tip"],h=c.position.distanceTo(f.position),p=.02,v=.005;u.inputState.pinching&&h>p+v?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&h<=p-v&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(o=t.getPose(e.gripSpace,r),o!==null&&(l.matrix.fromArray(o.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,o.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(o.linearVelocity)):l.hasLinearVelocity=!1,o.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(o.angularVelocity)):l.hasAngularVelocity=!1));s!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&o!==null&&(i=o),i!==null&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(tie)))}return s!==null&&(s.visible=i!==null),l!==null&&(l.visible=o!==null),u!==null&&(u.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new tg;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}const nie=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,rie=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class iie{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,r){if(this.texture===null){const i=new Mi,o=e.properties.get(i);o.__webglTexture=t.texture,(t.depthNear!=r.depthNear||t.depthFar!=r.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,r=new ol({vertexShader:nie,fragmentShader:rie,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Co(new _h(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class oie extends Mf{constructor(e,t){super();const r=this;let i=null,o=1,a=null,s="local-floor",l=1,u=null,c=null,f=null,h=null,p=null,v=null;const S=new iie,y=t.getContextAttributes();let _=null,w=null;const A=[],E=[],P=new zt;let O=null;const L=new Qa;L.viewport=new Yr;const D=new Qa;D.viewport=new Yr;const F=[L,D],U=new Zz;let k=null,z=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(te){let de=A[te];return de===void 0&&(de=new d2,A[te]=de),de.getTargetRaySpace()},this.getControllerGrip=function(te){let de=A[te];return de===void 0&&(de=new d2,A[te]=de),de.getGripSpace()},this.getHand=function(te){let de=A[te];return de===void 0&&(de=new d2,A[te]=de),de.getHandSpace()};function W(te){const de=E.indexOf(te.inputSource);if(de===-1)return;const me=A[de];me!==void 0&&(me.update(te.inputSource,te.frame,u||a),me.dispatchEvent({type:te.type,data:te.inputSource}))}function j(){i.removeEventListener("select",W),i.removeEventListener("selectstart",W),i.removeEventListener("selectend",W),i.removeEventListener("squeeze",W),i.removeEventListener("squeezestart",W),i.removeEventListener("squeezeend",W),i.removeEventListener("end",j),i.removeEventListener("inputsourceschange",se);for(let te=0;te<A.length;te++){const de=E[te];de!==null&&(E[te]=null,A[te].disconnect(de))}k=null,z=null,S.reset(),e.setRenderTarget(_),p=null,h=null,f=null,i=null,w=null,ne.stop(),r.isPresenting=!1,e.setPixelRatio(O),e.setSize(P.width,P.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(te){o=te,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(te){s=te,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||a},this.setReferenceSpace=function(te){u=te},this.getBaseLayer=function(){return h!==null?h:p},this.getBinding=function(){return f},this.getFrame=function(){return v},this.getSession=function(){return i},this.setSession=async function(te){if(i=te,i!==null){if(_=e.getRenderTarget(),i.addEventListener("select",W),i.addEventListener("selectstart",W),i.addEventListener("selectend",W),i.addEventListener("squeeze",W),i.addEventListener("squeezestart",W),i.addEventListener("squeezeend",W),i.addEventListener("end",j),i.addEventListener("inputsourceschange",se),y.xrCompatible!==!0&&await t.makeXRCompatible(),O=e.getPixelRatio(),e.getSize(P),i.renderState.layers===void 0){const de={antialias:y.antialias,alpha:!0,depth:y.depth,stencil:y.stencil,framebufferScaleFactor:o};p=new XRWebGLLayer(i,t,de),i.updateRenderState({baseLayer:p}),e.setPixelRatio(1),e.setSize(p.framebufferWidth,p.framebufferHeight,!1),w=new Bl(p.framebufferWidth,p.framebufferHeight,{format:ia,type:Ul,colorSpace:e.outputColorSpace,stencilBuffer:y.stencil})}else{let de=null,me=null,be=null;y.depth&&(be=y.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,de=y.stencil?Bp:Ep,me=y.stencil?Up:Af);const Ie={colorFormat:t.RGBA8,depthFormat:be,scaleFactor:o};f=new XRWebGLBinding(i,t),h=f.createProjectionLayer(Ie),i.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),w=new Bl(h.textureWidth,h.textureHeight,{format:ia,type:Ul,depthTexture:new ow(h.textureWidth,h.textureHeight,me,void 0,void 0,void 0,void 0,void 0,void 0,de),stencilBuffer:y.stencil,colorSpace:e.outputColorSpace,samples:y.antialias?4:0,resolveDepthBuffer:h.ignoreDepthValues===!1})}w.isXRRenderTarget=!0,this.setFoveation(l),u=null,a=await i.requestReferenceSpace(s),ne.setContext(i),ne.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return S.getDepthTexture()};function se(te){for(let de=0;de<te.removed.length;de++){const me=te.removed[de],be=E.indexOf(me);be>=0&&(E[be]=null,A[be].disconnect(me))}for(let de=0;de<te.added.length;de++){const me=te.added[de];let be=E.indexOf(me);if(be===-1){for(let Ee=0;Ee<A.length;Ee++)if(Ee>=E.length){E.push(me),be=Ee;break}else if(E[Ee]===null){E[Ee]=me,be=Ee;break}if(be===-1)break}const Ie=A[be];Ie&&Ie.connect(me)}}const Y=new Pe,Q=new Pe;function X(te,de,me){Y.setFromMatrixPosition(de.matrixWorld),Q.setFromMatrixPosition(me.matrixWorld);const be=Y.distanceTo(Q),Ie=de.projectionMatrix.elements,Ee=me.projectionMatrix.elements,Xe=Ie[14]/(Ie[10]-1),tt=Ie[14]/(Ie[10]+1),Te=(Ie[9]+1)/Ie[5],Je=(Ie[9]-1)/Ie[5],Se=(Ie[8]-1)/Ie[0],Ge=(Ee[8]+1)/Ee[0],ye=Xe*Se,Ct=Xe*Ge,ft=be/(-Se+Ge),mt=ft*-Se;if(de.matrixWorld.decompose(te.position,te.quaternion,te.scale),te.translateX(mt),te.translateZ(ft),te.matrixWorld.compose(te.position,te.quaternion,te.scale),te.matrixWorldInverse.copy(te.matrixWorld).invert(),Ie[10]===-1)te.projectionMatrix.copy(de.projectionMatrix),te.projectionMatrixInverse.copy(de.projectionMatrixInverse);else{const lt=Xe+ft,ve=tt+ft,le=ye-mt,He=Ct+(be-mt),rt=Te*tt/ve*lt,vt=Je*tt/ve*lt;te.projectionMatrix.makePerspective(le,He,rt,vt,lt,ve),te.projectionMatrixInverse.copy(te.projectionMatrix).invert()}}function Z(te,de){de===null?te.matrixWorld.copy(te.matrix):te.matrixWorld.multiplyMatrices(de.matrixWorld,te.matrix),te.matrixWorldInverse.copy(te.matrixWorld).invert()}this.updateCamera=function(te){if(i===null)return;let de=te.near,me=te.far;S.texture!==null&&(S.depthNear>0&&(de=S.depthNear),S.depthFar>0&&(me=S.depthFar)),U.near=D.near=L.near=de,U.far=D.far=L.far=me,(k!==U.near||z!==U.far)&&(i.updateRenderState({depthNear:U.near,depthFar:U.far}),k=U.near,z=U.far),L.layers.mask=te.layers.mask|2,D.layers.mask=te.layers.mask|4,U.layers.mask=L.layers.mask|D.layers.mask;const be=te.parent,Ie=U.cameras;Z(U,be);for(let Ee=0;Ee<Ie.length;Ee++)Z(Ie[Ee],be);Ie.length===2?X(U,L,D):U.projectionMatrix.copy(L.projectionMatrix),oe(te,U,be)};function oe(te,de,me){me===null?te.matrix.copy(de.matrixWorld):(te.matrix.copy(me.matrixWorld),te.matrix.invert(),te.matrix.multiply(de.matrixWorld)),te.matrix.decompose(te.position,te.quaternion,te.scale),te.updateMatrixWorld(!0),te.projectionMatrix.copy(de.projectionMatrix),te.projectionMatrixInverse.copy(de.projectionMatrixInverse),te.isPerspectiveCamera&&(te.fov=vg*2*Math.atan(1/te.projectionMatrix.elements[5]),te.zoom=1)}this.getCamera=function(){return U},this.getFoveation=function(){if(!(h===null&&p===null))return l},this.setFoveation=function(te){l=te,h!==null&&(h.fixedFoveation=te),p!==null&&p.fixedFoveation!==void 0&&(p.fixedFoveation=te)},this.hasDepthSensing=function(){return S.texture!==null},this.getDepthSensingMesh=function(){return S.getMesh(U)};let ee=null;function G(te,de){if(c=de.getViewerPose(u||a),v=de,c!==null){const me=c.views;p!==null&&(e.setRenderTargetFramebuffer(w,p.framebuffer),e.setRenderTarget(w));let be=!1;me.length!==U.cameras.length&&(U.cameras.length=0,be=!0);for(let Ee=0;Ee<me.length;Ee++){const Xe=me[Ee];let tt=null;if(p!==null)tt=p.getViewport(Xe);else{const Je=f.getViewSubImage(h,Xe);tt=Je.viewport,Ee===0&&(e.setRenderTargetTextures(w,Je.colorTexture,h.ignoreDepthValues?void 0:Je.depthStencilTexture),e.setRenderTarget(w))}let Te=F[Ee];Te===void 0&&(Te=new Qa,Te.layers.enable(Ee),Te.viewport=new Yr,F[Ee]=Te),Te.matrix.fromArray(Xe.transform.matrix),Te.matrix.decompose(Te.position,Te.quaternion,Te.scale),Te.projectionMatrix.fromArray(Xe.projectionMatrix),Te.projectionMatrixInverse.copy(Te.projectionMatrix).invert(),Te.viewport.set(tt.x,tt.y,tt.width,tt.height),Ee===0&&(U.matrix.copy(Te.matrix),U.matrix.decompose(U.position,U.quaternion,U.scale)),be===!0&&U.cameras.push(Te)}const Ie=i.enabledFeatures;if(Ie&&Ie.includes("depth-sensing")){const Ee=f.getDepthInformation(me[0]);Ee&&Ee.isValid&&Ee.texture&&S.init(e,Ee,i.renderState)}}for(let me=0;me<A.length;me++){const be=E[me],Ie=A[me];be!==null&&Ie!==void 0&&Ie.update(be,de,u||a)}ee&&ee(te,de),de.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:de}),v=null}const ne=new jz;ne.setAnimationLoop(G),this.setAnimationLoop=function(te){ee=te},this.dispose=function(){}}}const Kh=new du,aie=new Qn;function sie(n,e){function t(y,_){y.matrixAutoUpdate===!0&&y.updateMatrix(),_.value.copy(y.matrix)}function r(y,_){_.color.getRGB(y.fogColor.value,qz(n)),_.isFog?(y.fogNear.value=_.near,y.fogFar.value=_.far):_.isFogExp2&&(y.fogDensity.value=_.density)}function i(y,_,w,A,E){_.isMeshBasicMaterial||_.isMeshLambertMaterial?o(y,_):_.isMeshToonMaterial?(o(y,_),f(y,_)):_.isMeshPhongMaterial?(o(y,_),c(y,_)):_.isMeshStandardMaterial?(o(y,_),h(y,_),_.isMeshPhysicalMaterial&&p(y,_,E)):_.isMeshMatcapMaterial?(o(y,_),v(y,_)):_.isMeshDepthMaterial?o(y,_):_.isMeshDistanceMaterial?(o(y,_),S(y,_)):_.isMeshNormalMaterial?o(y,_):_.isLineBasicMaterial?(a(y,_),_.isLineDashedMaterial&&s(y,_)):_.isPointsMaterial?l(y,_,w,A):_.isSpriteMaterial?u(y,_):_.isShadowMaterial?(y.color.value.copy(_.color),y.opacity.value=_.opacity):_.isShaderMaterial&&(_.uniformsNeedUpdate=!1)}function o(y,_){y.opacity.value=_.opacity,_.color&&y.diffuse.value.copy(_.color),_.emissive&&y.emissive.value.copy(_.emissive).multiplyScalar(_.emissiveIntensity),_.map&&(y.map.value=_.map,t(_.map,y.mapTransform)),_.alphaMap&&(y.alphaMap.value=_.alphaMap,t(_.alphaMap,y.alphaMapTransform)),_.bumpMap&&(y.bumpMap.value=_.bumpMap,t(_.bumpMap,y.bumpMapTransform),y.bumpScale.value=_.bumpScale,_.side===nl&&(y.bumpScale.value*=-1)),_.normalMap&&(y.normalMap.value=_.normalMap,t(_.normalMap,y.normalMapTransform),y.normalScale.value.copy(_.normalScale),_.side===nl&&y.normalScale.value.negate()),_.displacementMap&&(y.displacementMap.value=_.displacementMap,t(_.displacementMap,y.displacementMapTransform),y.displacementScale.value=_.displacementScale,y.displacementBias.value=_.displacementBias),_.emissiveMap&&(y.emissiveMap.value=_.emissiveMap,t(_.emissiveMap,y.emissiveMapTransform)),_.specularMap&&(y.specularMap.value=_.specularMap,t(_.specularMap,y.specularMapTransform)),_.alphaTest>0&&(y.alphaTest.value=_.alphaTest);const w=e.get(_),A=w.envMap,E=w.envMapRotation;A&&(y.envMap.value=A,Kh.copy(E),Kh.x*=-1,Kh.y*=-1,Kh.z*=-1,A.isCubeTexture&&A.isRenderTargetTexture===!1&&(Kh.y*=-1,Kh.z*=-1),y.envMapRotation.value.setFromMatrix4(aie.makeRotationFromEuler(Kh)),y.flipEnvMap.value=A.isCubeTexture&&A.isRenderTargetTexture===!1?-1:1,y.reflectivity.value=_.reflectivity,y.ior.value=_.ior,y.refractionRatio.value=_.refractionRatio),_.lightMap&&(y.lightMap.value=_.lightMap,y.lightMapIntensity.value=_.lightMapIntensity,t(_.lightMap,y.lightMapTransform)),_.aoMap&&(y.aoMap.value=_.aoMap,y.aoMapIntensity.value=_.aoMapIntensity,t(_.aoMap,y.aoMapTransform))}function a(y,_){y.diffuse.value.copy(_.color),y.opacity.value=_.opacity,_.map&&(y.map.value=_.map,t(_.map,y.mapTransform))}function s(y,_){y.dashSize.value=_.dashSize,y.totalSize.value=_.dashSize+_.gapSize,y.scale.value=_.scale}function l(y,_,w,A){y.diffuse.value.copy(_.color),y.opacity.value=_.opacity,y.size.value=_.size*w,y.scale.value=A*.5,_.map&&(y.map.value=_.map,t(_.map,y.uvTransform)),_.alphaMap&&(y.alphaMap.value=_.alphaMap,t(_.alphaMap,y.alphaMapTransform)),_.alphaTest>0&&(y.alphaTest.value=_.alphaTest)}function u(y,_){y.diffuse.value.copy(_.color),y.opacity.value=_.opacity,y.rotation.value=_.rotation,_.map&&(y.map.value=_.map,t(_.map,y.mapTransform)),_.alphaMap&&(y.alphaMap.value=_.alphaMap,t(_.alphaMap,y.alphaMapTransform)),_.alphaTest>0&&(y.alphaTest.value=_.alphaTest)}function c(y,_){y.specular.value.copy(_.specular),y.shininess.value=Math.max(_.shininess,1e-4)}function f(y,_){_.gradientMap&&(y.gradientMap.value=_.gradientMap)}function h(y,_){y.metalness.value=_.metalness,_.metalnessMap&&(y.metalnessMap.value=_.metalnessMap,t(_.metalnessMap,y.metalnessMapTransform)),y.roughness.value=_.roughness,_.roughnessMap&&(y.roughnessMap.value=_.roughnessMap,t(_.roughnessMap,y.roughnessMapTransform)),_.envMap&&(y.envMapIntensity.value=_.envMapIntensity)}function p(y,_,w){y.ior.value=_.ior,_.sheen>0&&(y.sheenColor.value.copy(_.sheenColor).multiplyScalar(_.sheen),y.sheenRoughness.value=_.sheenRoughness,_.sheenColorMap&&(y.sheenColorMap.value=_.sheenColorMap,t(_.sheenColorMap,y.sheenColorMapTransform)),_.sheenRoughnessMap&&(y.sheenRoughnessMap.value=_.sheenRoughnessMap,t(_.sheenRoughnessMap,y.sheenRoughnessMapTransform))),_.clearcoat>0&&(y.clearcoat.value=_.clearcoat,y.clearcoatRoughness.value=_.clearcoatRoughness,_.clearcoatMap&&(y.clearcoatMap.value=_.clearcoatMap,t(_.clearcoatMap,y.clearcoatMapTransform)),_.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=_.clearcoatRoughnessMap,t(_.clearcoatRoughnessMap,y.clearcoatRoughnessMapTransform)),_.clearcoatNormalMap&&(y.clearcoatNormalMap.value=_.clearcoatNormalMap,t(_.clearcoatNormalMap,y.clearcoatNormalMapTransform),y.clearcoatNormalScale.value.copy(_.clearcoatNormalScale),_.side===nl&&y.clearcoatNormalScale.value.negate())),_.dispersion>0&&(y.dispersion.value=_.dispersion),_.iridescence>0&&(y.iridescence.value=_.iridescence,y.iridescenceIOR.value=_.iridescenceIOR,y.iridescenceThicknessMinimum.value=_.iridescenceThicknessRange[0],y.iridescenceThicknessMaximum.value=_.iridescenceThicknessRange[1],_.iridescenceMap&&(y.iridescenceMap.value=_.iridescenceMap,t(_.iridescenceMap,y.iridescenceMapTransform)),_.iridescenceThicknessMap&&(y.iridescenceThicknessMap.value=_.iridescenceThicknessMap,t(_.iridescenceThicknessMap,y.iridescenceThicknessMapTransform))),_.transmission>0&&(y.transmission.value=_.transmission,y.transmissionSamplerMap.value=w.texture,y.transmissionSamplerSize.value.set(w.width,w.height),_.transmissionMap&&(y.transmissionMap.value=_.transmissionMap,t(_.transmissionMap,y.transmissionMapTransform)),y.thickness.value=_.thickness,_.thicknessMap&&(y.thicknessMap.value=_.thicknessMap,t(_.thicknessMap,y.thicknessMapTransform)),y.attenuationDistance.value=_.attenuationDistance,y.attenuationColor.value.copy(_.attenuationColor)),_.anisotropy>0&&(y.anisotropyVector.value.set(_.anisotropy*Math.cos(_.anisotropyRotation),_.anisotropy*Math.sin(_.anisotropyRotation)),_.anisotropyMap&&(y.anisotropyMap.value=_.anisotropyMap,t(_.anisotropyMap,y.anisotropyMapTransform))),y.specularIntensity.value=_.specularIntensity,y.specularColor.value.copy(_.specularColor),_.specularColorMap&&(y.specularColorMap.value=_.specularColorMap,t(_.specularColorMap,y.specularColorMapTransform)),_.specularIntensityMap&&(y.specularIntensityMap.value=_.specularIntensityMap,t(_.specularIntensityMap,y.specularIntensityMapTransform))}function v(y,_){_.matcap&&(y.matcap.value=_.matcap)}function S(y,_){const w=e.get(_).light;y.referencePosition.value.setFromMatrixPosition(w.matrixWorld),y.nearDistance.value=w.shadow.camera.near,y.farDistance.value=w.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function lie(n,e,t,r){let i={},o={},a=[];const s=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(w,A){const E=A.program;r.uniformBlockBinding(w,E)}function u(w,A){let E=i[w.id];E===void 0&&(v(w),E=c(w),i[w.id]=E,w.addEventListener("dispose",y));const P=A.program;r.updateUBOMapping(w,P);const O=e.render.frame;o[w.id]!==O&&(h(w),o[w.id]=O)}function c(w){const A=f();w.__bindingPointIndex=A;const E=n.createBuffer(),P=w.__size,O=w.usage;return n.bindBuffer(n.UNIFORM_BUFFER,E),n.bufferData(n.UNIFORM_BUFFER,P,O),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,A,E),E}function f(){for(let w=0;w<s;w++)if(a.indexOf(w)===-1)return a.push(w),w;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(w){const A=i[w.id],E=w.uniforms,P=w.__cache;n.bindBuffer(n.UNIFORM_BUFFER,A);for(let O=0,L=E.length;O<L;O++){const D=Array.isArray(E[O])?E[O]:[E[O]];for(let F=0,U=D.length;F<U;F++){const k=D[F];if(p(k,O,F,P)===!0){const z=k.__offset,W=Array.isArray(k.value)?k.value:[k.value];let j=0;for(let se=0;se<W.length;se++){const Y=W[se],Q=S(Y);typeof Y=="number"||typeof Y=="boolean"?(k.__data[0]=Y,n.bufferSubData(n.UNIFORM_BUFFER,z+j,k.__data)):Y.isMatrix3?(k.__data[0]=Y.elements[0],k.__data[1]=Y.elements[1],k.__data[2]=Y.elements[2],k.__data[3]=0,k.__data[4]=Y.elements[3],k.__data[5]=Y.elements[4],k.__data[6]=Y.elements[5],k.__data[7]=0,k.__data[8]=Y.elements[6],k.__data[9]=Y.elements[7],k.__data[10]=Y.elements[8],k.__data[11]=0):(Y.toArray(k.__data,j),j+=Q.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,z,k.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function p(w,A,E,P){const O=w.value,L=A+"_"+E;if(P[L]===void 0)return typeof O=="number"||typeof O=="boolean"?P[L]=O:P[L]=O.clone(),!0;{const D=P[L];if(typeof O=="number"||typeof O=="boolean"){if(D!==O)return P[L]=O,!0}else if(D.equals(O)===!1)return D.copy(O),!0}return!1}function v(w){const A=w.uniforms;let E=0;const P=16;for(let L=0,D=A.length;L<D;L++){const F=Array.isArray(A[L])?A[L]:[A[L]];for(let U=0,k=F.length;U<k;U++){const z=F[U],W=Array.isArray(z.value)?z.value:[z.value];for(let j=0,se=W.length;j<se;j++){const Y=W[j],Q=S(Y),X=E%P,Z=X%Q.boundary,oe=X+Z;E+=Z,oe!==0&&P-oe<Q.storage&&(E+=P-oe),z.__data=new Float32Array(Q.storage/Float32Array.BYTES_PER_ELEMENT),z.__offset=E,E+=Q.storage}}}const O=E%P;return O>0&&(E+=P-O),w.__size=E,w.__cache={},this}function S(w){const A={boundary:0,storage:0};return typeof w=="number"||typeof w=="boolean"?(A.boundary=4,A.storage=4):w.isVector2?(A.boundary=8,A.storage=8):w.isVector3||w.isColor?(A.boundary=16,A.storage=12):w.isVector4?(A.boundary=16,A.storage=16):w.isMatrix3?(A.boundary=48,A.storage=48):w.isMatrix4?(A.boundary=64,A.storage=64):w.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",w),A}function y(w){const A=w.target;A.removeEventListener("dispose",y);const E=a.indexOf(A.__bindingPointIndex);a.splice(E,1),n.deleteBuffer(i[A.id]),delete i[A.id],delete o[A.id]}function _(){for(const w in i)n.deleteBuffer(i[w]);a=[],i={},o={}}return{bind:l,update:u,dispose:_}}class zP{constructor(e={}){const{canvas:t=zz(),context:r=null,depth:i=!0,stencil:o=!1,alpha:a=!1,antialias:s=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:f=!1,reverseDepthBuffer:h=!1}=e;this.isWebGLRenderer=!0;let p;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=r.getContextAttributes().alpha}else p=a;const v=new Uint32Array(4),S=new Int32Array(4);let y=null,_=null;const w=[],A=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Zs,this.toneMapping=vf,this.toneMappingExposure=1;const E=this;let P=!1,O=0,L=0,D=null,F=-1,U=null;const k=new Yr,z=new Yr;let W=null;const j=new xn(0);let se=0,Y=t.width,Q=t.height,X=1,Z=null,oe=null;const ee=new Yr(0,0,Y,Q),G=new Yr(0,0,Y,Q);let ne=!1;const te=new Vy;let de=!1,me=!1;const be=new Qn,Ie=new Qn,Ee=new Pe,Xe=new Yr,tt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Te=!1;function Je(){return D===null?X:1}let Se=r;function Ge(ae,Ce){return t.getContext(ae,Ce)}try{const ae={alpha:!0,depth:i,stencil:o,antialias:s,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:c,failIfMajorPerformanceCaveat:f};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Wg}`),t.addEventListener("webglcontextlost",It,!1),t.addEventListener("webglcontextrestored",Ht,!1),t.addEventListener("webglcontextcreationerror",Lt,!1),Se===null){const Ce="webgl2";if(Se=Ge(Ce,ae),Se===null)throw Ge(Ce)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(ae){throw console.error("THREE.WebGLRenderer: "+ae.message),ae}let ye,Ct,ft,mt,lt,ve,le,He,rt,vt,ht,qt,Ft,Rt,tn,it,Zt,Xt,un,Wt,mn,fn,nn,Ke;function ot(){ye=new pne(Se),ye.init(),fn=new Jz(Se,ye),Ct=new lne(Se,ye,e,fn),ft=new Xre(Se,ye),Ct.reverseDepthBuffer&&h&&ft.buffers.depth.setReversed(!0),mt=new vne(Se),lt=new Dre,ve=new eie(Se,ye,ft,lt,Ct,fn,mt),le=new cne(E),He=new hne(E),rt=new AQ(Se),nn=new ane(Se,rt),vt=new mne(Se,rt,mt,nn),ht=new xne(Se,vt,rt,mt),un=new yne(Se,Ct,ve),it=new une(lt),qt=new Ore(E,le,He,ye,Ct,nn,it),Ft=new sie(E,lt),Rt=new Fre,tn=new Gre(ye),Xt=new one(E,le,He,ft,ht,p,l),Zt=new jre(E,ht,Ct),Ke=new lie(Se,mt,Ct,ft),Wt=new sne(Se,ye,mt),mn=new gne(Se,ye,mt),mt.programs=qt.programs,E.capabilities=Ct,E.extensions=ye,E.properties=lt,E.renderLists=Rt,E.shadowMap=Zt,E.state=ft,E.info=mt}ot();const pt=new oie(E,Se);this.xr=pt,this.getContext=function(){return Se},this.getContextAttributes=function(){return Se.getContextAttributes()},this.forceContextLoss=function(){const ae=ye.get("WEBGL_lose_context");ae&&ae.loseContext()},this.forceContextRestore=function(){const ae=ye.get("WEBGL_lose_context");ae&&ae.restoreContext()},this.getPixelRatio=function(){return X},this.setPixelRatio=function(ae){ae!==void 0&&(X=ae,this.setSize(Y,Q,!1))},this.getSize=function(ae){return ae.set(Y,Q)},this.setSize=function(ae,Ce,De=!0){if(pt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Y=ae,Q=Ce,t.width=Math.floor(ae*X),t.height=Math.floor(Ce*X),De===!0&&(t.style.width=ae+"px",t.style.height=Ce+"px"),this.setViewport(0,0,ae,Ce)},this.getDrawingBufferSize=function(ae){return ae.set(Y*X,Q*X).floor()},this.setDrawingBufferSize=function(ae,Ce,De){Y=ae,Q=Ce,X=De,t.width=Math.floor(ae*De),t.height=Math.floor(Ce*De),this.setViewport(0,0,ae,Ce)},this.getCurrentViewport=function(ae){return ae.copy(k)},this.getViewport=function(ae){return ae.copy(ee)},this.setViewport=function(ae,Ce,De,Ue){ae.isVector4?ee.set(ae.x,ae.y,ae.z,ae.w):ee.set(ae,Ce,De,Ue),ft.viewport(k.copy(ee).multiplyScalar(X).round())},this.getScissor=function(ae){return ae.copy(G)},this.setScissor=function(ae,Ce,De,Ue){ae.isVector4?G.set(ae.x,ae.y,ae.z,ae.w):G.set(ae,Ce,De,Ue),ft.scissor(z.copy(G).multiplyScalar(X).round())},this.getScissorTest=function(){return ne},this.setScissorTest=function(ae){ft.setScissorTest(ne=ae)},this.setOpaqueSort=function(ae){Z=ae},this.setTransparentSort=function(ae){oe=ae},this.getClearColor=function(ae){return ae.copy(Xt.getClearColor())},this.setClearColor=function(){Xt.setClearColor.apply(Xt,arguments)},this.getClearAlpha=function(){return Xt.getClearAlpha()},this.setClearAlpha=function(){Xt.setClearAlpha.apply(Xt,arguments)},this.clear=function(ae=!0,Ce=!0,De=!0){let Ue=0;if(ae){let Re=!1;if(D!==null){const Ne=D.texture.format;Re=Ne===nw||Ne===tw||Ne===Uy}if(Re){const Ne=D.texture.type,Be=Ne===Ul||Ne===Af||Ne===gg||Ne===Up||Ne===QS||Ne===ew,Et=Xt.getClearColor(),ut=Xt.getClearAlpha(),St=Et.r,Bt=Et.g,Ot=Et.b;Be?(v[0]=St,v[1]=Bt,v[2]=Ot,v[3]=ut,Se.clearBufferuiv(Se.COLOR,0,v)):(S[0]=St,S[1]=Bt,S[2]=Ot,S[3]=ut,Se.clearBufferiv(Se.COLOR,0,S))}else Ue|=Se.COLOR_BUFFER_BIT}Ce&&(Ue|=Se.DEPTH_BUFFER_BIT),De&&(Ue|=Se.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Se.clear(Ue)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",It,!1),t.removeEventListener("webglcontextrestored",Ht,!1),t.removeEventListener("webglcontextcreationerror",Lt,!1),Rt.dispose(),tn.dispose(),lt.dispose(),le.dispose(),He.dispose(),ht.dispose(),nn.dispose(),Ke.dispose(),qt.dispose(),pt.dispose(),pt.removeEventListener("sessionstart",Di),pt.removeEventListener("sessionend",vi),Er.stop()};function It(ae){ae.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),P=!0}function Ht(){console.log("THREE.WebGLRenderer: Context Restored."),P=!1;const ae=mt.autoReset,Ce=Zt.enabled,De=Zt.autoUpdate,Ue=Zt.needsUpdate,Re=Zt.type;ot(),mt.autoReset=ae,Zt.enabled=Ce,Zt.autoUpdate=De,Zt.needsUpdate=Ue,Zt.type=Re}function Lt(ae){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ae.statusMessage)}function rn(ae){const Ce=ae.target;Ce.removeEventListener("dispose",rn),ir(Ce)}function ir(ae){$n(ae),lt.remove(ae)}function $n(ae){const Ce=lt.get(ae).programs;Ce!==void 0&&(Ce.forEach(function(De){qt.releaseProgram(De)}),ae.isShaderMaterial&&qt.releaseShaderCache(ae))}this.renderBufferDirect=function(ae,Ce,De,Ue,Re,Ne){Ce===null&&(Ce=tt);const Be=Re.isMesh&&Re.matrixWorld.determinant()<0,Et=ze(ae,Ce,De,Ue,Re);ft.setMaterial(Ue,Be);let ut=De.index,St=1;if(Ue.wireframe===!0){if(ut=vt.getWireframeAttribute(De),ut===void 0)return;St=2}const Bt=De.drawRange,Ot=De.attributes.position;let Qt=Bt.start*St,cn=(Bt.start+Bt.count)*St;Ne!==null&&(Qt=Math.max(Qt,Ne.start*St),cn=Math.min(cn,(Ne.start+Ne.count)*St)),ut!==null?(Qt=Math.max(Qt,0),cn=Math.min(cn,ut.count)):Ot!=null&&(Qt=Math.max(Qt,0),cn=Math.min(cn,Ot.count));const Kt=cn-Qt;if(Kt<0||Kt===1/0)return;nn.setup(Re,Ue,Et,De,ut);let _n,Vt=Wt;if(ut!==null&&(_n=rt.get(ut),Vt=mn,Vt.setIndex(_n)),Re.isMesh)Ue.wireframe===!0?(ft.setLineWidth(Ue.wireframeLinewidth*Je()),Vt.setMode(Se.LINES)):Vt.setMode(Se.TRIANGLES);else if(Re.isLine){let kt=Ue.linewidth;kt===void 0&&(kt=1),ft.setLineWidth(kt*Je()),Re.isLineSegments?Vt.setMode(Se.LINES):Re.isLineLoop?Vt.setMode(Se.LINE_LOOP):Vt.setMode(Se.LINE_STRIP)}else Re.isPoints?Vt.setMode(Se.POINTS):Re.isSprite&&Vt.setMode(Se.TRIANGLES);if(Re.isBatchedMesh)if(Re._multiDrawInstances!==null)Vt.renderMultiDrawInstances(Re._multiDrawStarts,Re._multiDrawCounts,Re._multiDrawCount,Re._multiDrawInstances);else if(ye.get("WEBGL_multi_draw"))Vt.renderMultiDraw(Re._multiDrawStarts,Re._multiDrawCounts,Re._multiDrawCount);else{const kt=Re._multiDrawStarts,Mn=Re._multiDrawCounts,Sn=Re._multiDrawCount,gr=ut?rt.get(ut).bytesPerElement:1,vr=lt.get(Ue).currentProgram.getUniforms();for(let fr=0;fr<Sn;fr++)vr.setValue(Se,"_gl_DrawID",fr),Vt.render(kt[fr]/gr,Mn[fr])}else if(Re.isInstancedMesh)Vt.renderInstances(Qt,Kt,Re.count);else if(De.isInstancedBufferGeometry){const kt=De._maxInstanceCount!==void 0?De._maxInstanceCount:1/0,Mn=Math.min(De.instanceCount,kt);Vt.renderInstances(Qt,Kt,Mn)}else Vt.render(Qt,Kt)};function Gn(ae,Ce,De){ae.transparent===!0&&ae.side===Cc&&ae.forceSinglePass===!1?(ae.side=nl,ae.needsUpdate=!0,uo(ae,Ce,De),ae.side=ld,ae.needsUpdate=!0,uo(ae,Ce,De),ae.side=Cc):uo(ae,Ce,De)}this.compile=function(ae,Ce,De=null){De===null&&(De=ae),_=tn.get(De),_.init(Ce),A.push(_),De.traverseVisible(function(Re){Re.isLight&&Re.layers.test(Ce.layers)&&(_.pushLight(Re),Re.castShadow&&_.pushShadow(Re))}),ae!==De&&ae.traverseVisible(function(Re){Re.isLight&&Re.layers.test(Ce.layers)&&(_.pushLight(Re),Re.castShadow&&_.pushShadow(Re))}),_.setupLights();const Ue=new Set;return ae.traverse(function(Re){if(!(Re.isMesh||Re.isPoints||Re.isLine||Re.isSprite))return;const Ne=Re.material;if(Ne)if(Array.isArray(Ne))for(let Be=0;Be<Ne.length;Be++){const Et=Ne[Be];Gn(Et,De,Re),Ue.add(Et)}else Gn(Ne,De,Re),Ue.add(Ne)}),A.pop(),_=null,Ue},this.compileAsync=function(ae,Ce,De=null){const Ue=this.compile(ae,Ce,De);return new Promise(Re=>{function Ne(){if(Ue.forEach(function(Be){lt.get(Be).currentProgram.isReady()&&Ue.delete(Be)}),Ue.size===0){Re(ae);return}setTimeout(Ne,10)}ye.get("KHR_parallel_shader_compile")!==null?Ne():setTimeout(Ne,10)})};let Br=null;function gn(ae){Br&&Br(ae)}function Di(){Er.stop()}function vi(){Er.start()}const Er=new jz;Er.setAnimationLoop(gn),typeof self<"u"&&Er.setContext(self),this.setAnimationLoop=function(ae){Br=ae,pt.setAnimationLoop(ae),ae===null?Er.stop():Er.start()},pt.addEventListener("sessionstart",Di),pt.addEventListener("sessionend",vi),this.render=function(ae,Ce){if(Ce!==void 0&&Ce.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(P===!0)return;if(ae.matrixWorldAutoUpdate===!0&&ae.updateMatrixWorld(),Ce.parent===null&&Ce.matrixWorldAutoUpdate===!0&&Ce.updateMatrixWorld(),pt.enabled===!0&&pt.isPresenting===!0&&(pt.cameraAutoUpdate===!0&&pt.updateCamera(Ce),Ce=pt.getCamera()),ae.isScene===!0&&ae.onBeforeRender(E,ae,Ce,D),_=tn.get(ae,A.length),_.init(Ce),A.push(_),Ie.multiplyMatrices(Ce.projectionMatrix,Ce.matrixWorldInverse),te.setFromProjectionMatrix(Ie),me=this.localClippingEnabled,de=it.init(this.clippingPlanes,me),y=Rt.get(ae,w.length),y.init(),w.push(y),pt.enabled===!0&&pt.isPresenting===!0){const Ne=E.xr.getDepthSensingMesh();Ne!==null&&xr(Ne,Ce,-1/0,E.sortObjects)}xr(ae,Ce,0,E.sortObjects),y.finish(),E.sortObjects===!0&&y.sort(Z,oe),Te=pt.enabled===!1||pt.isPresenting===!1||pt.hasDepthSensing()===!1,Te&&Xt.addToRenderList(y,ae),this.info.render.frame++,de===!0&&it.beginShadows();const De=_.state.shadowsArray;Zt.render(De,ae,Ce),de===!0&&it.endShadows(),this.info.autoReset===!0&&this.info.reset();const Ue=y.opaque,Re=y.transmissive;if(_.setupLights(),Ce.isArrayCamera){const Ne=Ce.cameras;if(Re.length>0)for(let Be=0,Et=Ne.length;Be<Et;Be++){const ut=Ne[Be];zr(Ue,Re,ae,ut)}Te&&Xt.render(ae);for(let Be=0,Et=Ne.length;Be<Et;Be++){const ut=Ne[Be];Cr(y,ae,ut,ut.viewport)}}else Re.length>0&&zr(Ue,Re,ae,Ce),Te&&Xt.render(ae),Cr(y,ae,Ce);D!==null&&(ve.updateMultisampleRenderTarget(D),ve.updateRenderTargetMipmap(D)),ae.isScene===!0&&ae.onAfterRender(E,ae,Ce),nn.resetDefaultState(),F=-1,U=null,A.pop(),A.length>0?(_=A[A.length-1],de===!0&&it.setGlobalState(E.clippingPlanes,_.state.camera)):_=null,w.pop(),w.length>0?y=w[w.length-1]:y=null};function xr(ae,Ce,De,Ue){if(ae.visible===!1)return;if(ae.layers.test(Ce.layers)){if(ae.isGroup)De=ae.renderOrder;else if(ae.isLOD)ae.autoUpdate===!0&&ae.update(Ce);else if(ae.isLight)_.pushLight(ae),ae.castShadow&&_.pushShadow(ae);else if(ae.isSprite){if(!ae.frustumCulled||te.intersectsSprite(ae)){Ue&&Xe.setFromMatrixPosition(ae.matrixWorld).applyMatrix4(Ie);const Be=ht.update(ae),Et=ae.material;Et.visible&&y.push(ae,Be,Et,De,Xe.z,null)}}else if((ae.isMesh||ae.isLine||ae.isPoints)&&(!ae.frustumCulled||te.intersectsObject(ae))){const Be=ht.update(ae),Et=ae.material;if(Ue&&(ae.boundingSphere!==void 0?(ae.boundingSphere===null&&ae.computeBoundingSphere(),Xe.copy(ae.boundingSphere.center)):(Be.boundingSphere===null&&Be.computeBoundingSphere(),Xe.copy(Be.boundingSphere.center)),Xe.applyMatrix4(ae.matrixWorld).applyMatrix4(Ie)),Array.isArray(Et)){const ut=Be.groups;for(let St=0,Bt=ut.length;St<Bt;St++){const Ot=ut[St],Qt=Et[Ot.materialIndex];Qt&&Qt.visible&&y.push(ae,Be,Qt,De,Xe.z,Ot)}}else Et.visible&&y.push(ae,Be,Et,De,Xe.z,null)}}const Ne=ae.children;for(let Be=0,Et=Ne.length;Be<Et;Be++)xr(Ne[Be],Ce,De,Ue)}function Cr(ae,Ce,De,Ue){const Re=ae.opaque,Ne=ae.transmissive,Be=ae.transparent;_.setupLightsView(De),de===!0&&it.setGlobalState(E.clippingPlanes,De),Ue&&ft.viewport(k.copy(Ue)),Re.length>0&&Un(Re,Ce,De),Ne.length>0&&Un(Ne,Ce,De),Be.length>0&&Un(Be,Ce,De),ft.buffers.depth.setTest(!0),ft.buffers.depth.setMask(!0),ft.buffers.color.setMask(!0),ft.setPolygonOffset(!1)}function zr(ae,Ce,De,Ue){if((De.isScene===!0?De.overrideMaterial:null)!==null)return;_.state.transmissionRenderTarget[Ue.id]===void 0&&(_.state.transmissionRenderTarget[Ue.id]=new Bl(1,1,{generateMipmaps:!0,type:ye.has("EXT_color_buffer_half_float")||ye.has("EXT_color_buffer_float")?La:Ul,minFilter:ff,samples:4,stencilBuffer:o,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Gr.workingColorSpace}));const Ne=_.state.transmissionRenderTarget[Ue.id],Be=Ue.viewport||k;Ne.setSize(Be.z,Be.w);const Et=E.getRenderTarget();E.setRenderTarget(Ne),E.getClearColor(j),se=E.getClearAlpha(),se<1&&E.setClearColor(16777215,.5),E.clear(),Te&&Xt.render(De);const ut=E.toneMapping;E.toneMapping=vf;const St=Ue.viewport;if(Ue.viewport!==void 0&&(Ue.viewport=void 0),_.setupLightsView(Ue),de===!0&&it.setGlobalState(E.clippingPlanes,Ue),Un(ae,De,Ue),ve.updateMultisampleRenderTarget(Ne),ve.updateRenderTargetMipmap(Ne),ye.has("WEBGL_multisampled_render_to_texture")===!1){let Bt=!1;for(let Ot=0,Qt=Ce.length;Ot<Qt;Ot++){const cn=Ce[Ot],Kt=cn.object,_n=cn.geometry,Vt=cn.material,kt=cn.group;if(Vt.side===Cc&&Kt.layers.test(Ue.layers)){const Mn=Vt.side;Vt.side=nl,Vt.needsUpdate=!0,Po(Kt,De,Ue,_n,Vt,kt),Vt.side=Mn,Vt.needsUpdate=!0,Bt=!0}}Bt===!0&&(ve.updateMultisampleRenderTarget(Ne),ve.updateRenderTargetMipmap(Ne))}E.setRenderTarget(Et),E.setClearColor(j,se),St!==void 0&&(Ue.viewport=St),E.toneMapping=ut}function Un(ae,Ce,De){const Ue=Ce.isScene===!0?Ce.overrideMaterial:null;for(let Re=0,Ne=ae.length;Re<Ne;Re++){const Be=ae[Re],Et=Be.object,ut=Be.geometry,St=Ue===null?Be.material:Ue,Bt=Be.group;Et.layers.test(De.layers)&&Po(Et,Ce,De,ut,St,Bt)}}function Po(ae,Ce,De,Ue,Re,Ne){ae.onBeforeRender(E,Ce,De,Ue,Re,Ne),ae.modelViewMatrix.multiplyMatrices(De.matrixWorldInverse,ae.matrixWorld),ae.normalMatrix.getNormalMatrix(ae.modelViewMatrix),Re.onBeforeRender(E,Ce,De,Ue,ae,Ne),Re.transparent===!0&&Re.side===Cc&&Re.forceSinglePass===!1?(Re.side=nl,Re.needsUpdate=!0,E.renderBufferDirect(De,Ce,Ue,Re,ae,Ne),Re.side=ld,Re.needsUpdate=!0,E.renderBufferDirect(De,Ce,Ue,Re,ae,Ne),Re.side=Cc):E.renderBufferDirect(De,Ce,Ue,Re,ae,Ne),ae.onAfterRender(E,Ce,De,Ue,Re,Ne)}function uo(ae,Ce,De){Ce.isScene!==!0&&(Ce=tt);const Ue=lt.get(ae),Re=_.state.lights,Ne=_.state.shadowsArray,Be=Re.state.version,Et=qt.getParameters(ae,Re.state,Ne,Ce,De),ut=qt.getProgramCacheKey(Et);let St=Ue.programs;Ue.environment=ae.isMeshStandardMaterial?Ce.environment:null,Ue.fog=Ce.fog,Ue.envMap=(ae.isMeshStandardMaterial?He:le).get(ae.envMap||Ue.environment),Ue.envMapRotation=Ue.environment!==null&&ae.envMap===null?Ce.environmentRotation:ae.envMapRotation,St===void 0&&(ae.addEventListener("dispose",rn),St=new Map,Ue.programs=St);let Bt=St.get(ut);if(Bt!==void 0){if(Ue.currentProgram===Bt&&Ue.lightsStateVersion===Be)return we(ae,Et),Bt}else Et.uniforms=qt.getUniforms(ae),ae.onBeforeCompile(Et,E),Bt=qt.acquireProgram(Et,ut),St.set(ut,Bt),Ue.uniforms=Et.uniforms;const Ot=Ue.uniforms;return(!ae.isShaderMaterial&&!ae.isRawShaderMaterial||ae.clipping===!0)&&(Ot.clippingPlanes=it.uniform),we(ae,Et),Ue.needsLights=xt(ae),Ue.lightsStateVersion=Be,Ue.needsLights&&(Ot.ambientLightColor.value=Re.state.ambient,Ot.lightProbe.value=Re.state.probe,Ot.directionalLights.value=Re.state.directional,Ot.directionalLightShadows.value=Re.state.directionalShadow,Ot.spotLights.value=Re.state.spot,Ot.spotLightShadows.value=Re.state.spotShadow,Ot.rectAreaLights.value=Re.state.rectArea,Ot.ltc_1.value=Re.state.rectAreaLTC1,Ot.ltc_2.value=Re.state.rectAreaLTC2,Ot.pointLights.value=Re.state.point,Ot.pointLightShadows.value=Re.state.pointShadow,Ot.hemisphereLights.value=Re.state.hemi,Ot.directionalShadowMap.value=Re.state.directionalShadowMap,Ot.directionalShadowMatrix.value=Re.state.directionalShadowMatrix,Ot.spotShadowMap.value=Re.state.spotShadowMap,Ot.spotLightMatrix.value=Re.state.spotLightMatrix,Ot.spotLightMap.value=Re.state.spotLightMap,Ot.pointShadowMap.value=Re.state.pointShadowMap,Ot.pointShadowMatrix.value=Re.state.pointShadowMatrix),Ue.currentProgram=Bt,Ue.uniformsList=null,Bt}function ue(ae){if(ae.uniformsList===null){const Ce=ae.currentProgram.getUniforms();ae.uniformsList=t_.seqWithValue(Ce.seq,ae.uniforms)}return ae.uniformsList}function we(ae,Ce){const De=lt.get(ae);De.outputColorSpace=Ce.outputColorSpace,De.batching=Ce.batching,De.batchingColor=Ce.batchingColor,De.instancing=Ce.instancing,De.instancingColor=Ce.instancingColor,De.instancingMorph=Ce.instancingMorph,De.skinning=Ce.skinning,De.morphTargets=Ce.morphTargets,De.morphNormals=Ce.morphNormals,De.morphColors=Ce.morphColors,De.morphTargetsCount=Ce.morphTargetsCount,De.numClippingPlanes=Ce.numClippingPlanes,De.numIntersection=Ce.numClipIntersection,De.vertexAlphas=Ce.vertexAlphas,De.vertexTangents=Ce.vertexTangents,De.toneMapping=Ce.toneMapping}function ze(ae,Ce,De,Ue,Re){Ce.isScene!==!0&&(Ce=tt),ve.resetTextureUnits();const Ne=Ce.fog,Be=Ue.isMeshStandardMaterial?Ce.environment:null,Et=D===null?E.outputColorSpace:D.isXRRenderTarget===!0?D.texture.colorSpace:Ef,ut=(Ue.isMeshStandardMaterial?He:le).get(Ue.envMap||Be),St=Ue.vertexColors===!0&&!!De.attributes.color&&De.attributes.color.itemSize===4,Bt=!!De.attributes.tangent&&(!!Ue.normalMap||Ue.anisotropy>0),Ot=!!De.morphAttributes.position,Qt=!!De.morphAttributes.normal,cn=!!De.morphAttributes.color;let Kt=vf;Ue.toneMapped&&(D===null||D.isXRRenderTarget===!0)&&(Kt=E.toneMapping);const _n=De.morphAttributes.position||De.morphAttributes.normal||De.morphAttributes.color,Vt=_n!==void 0?_n.length:0,kt=lt.get(Ue),Mn=_.state.lights;if(de===!0&&(me===!0||ae!==U)){const er=ae===U&&Ue.id===F;it.setState(Ue,ae,er)}let Sn=!1;Ue.version===kt.__version?(kt.needsLights&&kt.lightsStateVersion!==Mn.state.version||kt.outputColorSpace!==Et||Re.isBatchedMesh&&kt.batching===!1||!Re.isBatchedMesh&&kt.batching===!0||Re.isBatchedMesh&&kt.batchingColor===!0&&Re.colorTexture===null||Re.isBatchedMesh&&kt.batchingColor===!1&&Re.colorTexture!==null||Re.isInstancedMesh&&kt.instancing===!1||!Re.isInstancedMesh&&kt.instancing===!0||Re.isSkinnedMesh&&kt.skinning===!1||!Re.isSkinnedMesh&&kt.skinning===!0||Re.isInstancedMesh&&kt.instancingColor===!0&&Re.instanceColor===null||Re.isInstancedMesh&&kt.instancingColor===!1&&Re.instanceColor!==null||Re.isInstancedMesh&&kt.instancingMorph===!0&&Re.morphTexture===null||Re.isInstancedMesh&&kt.instancingMorph===!1&&Re.morphTexture!==null||kt.envMap!==ut||Ue.fog===!0&&kt.fog!==Ne||kt.numClippingPlanes!==void 0&&(kt.numClippingPlanes!==it.numPlanes||kt.numIntersection!==it.numIntersection)||kt.vertexAlphas!==St||kt.vertexTangents!==Bt||kt.morphTargets!==Ot||kt.morphNormals!==Qt||kt.morphColors!==cn||kt.toneMapping!==Kt||kt.morphTargetsCount!==Vt)&&(Sn=!0):(Sn=!0,kt.__version=Ue.version);let gr=kt.currentProgram;Sn===!0&&(gr=uo(Ue,Ce,Re));let vr=!1,fr=!1,Fn=!1;const kn=gr.getUniforms(),Pn=kt.uniforms;if(ft.useProgram(gr.program)&&(vr=!0,fr=!0,Fn=!0),Ue.id!==F&&(F=Ue.id,fr=!0),vr||U!==ae){ft.buffers.depth.getReversed()?(be.copy(ae.projectionMatrix),KZ(be),JZ(be),kn.setValue(Se,"projectionMatrix",be)):kn.setValue(Se,"projectionMatrix",ae.projectionMatrix),kn.setValue(Se,"viewMatrix",ae.matrixWorldInverse);const Si=kn.map.cameraPosition;Si!==void 0&&Si.setValue(Se,Ee.setFromMatrixPosition(ae.matrixWorld)),Ct.logarithmicDepthBuffer&&kn.setValue(Se,"logDepthBufFC",2/(Math.log(ae.far+1)/Math.LN2)),(Ue.isMeshPhongMaterial||Ue.isMeshToonMaterial||Ue.isMeshLambertMaterial||Ue.isMeshBasicMaterial||Ue.isMeshStandardMaterial||Ue.isShaderMaterial)&&kn.setValue(Se,"isOrthographic",ae.isOrthographicCamera===!0),U!==ae&&(U=ae,fr=!0,Fn=!0)}if(Re.isSkinnedMesh){kn.setOptional(Se,Re,"bindMatrix"),kn.setOptional(Se,Re,"bindMatrixInverse");const er=Re.skeleton;er&&(er.boneTexture===null&&er.computeBoneTexture(),kn.setValue(Se,"boneTexture",er.boneTexture,ve))}Re.isBatchedMesh&&(kn.setOptional(Se,Re,"batchingTexture"),kn.setValue(Se,"batchingTexture",Re._matricesTexture,ve),kn.setOptional(Se,Re,"batchingIdTexture"),kn.setValue(Se,"batchingIdTexture",Re._indirectTexture,ve),kn.setOptional(Se,Re,"batchingColorTexture"),Re._colorsTexture!==null&&kn.setValue(Se,"batchingColorTexture",Re._colorsTexture,ve));const jn=De.morphAttributes;if((jn.position!==void 0||jn.normal!==void 0||jn.color!==void 0)&&un.update(Re,De,gr),(fr||kt.receiveShadow!==Re.receiveShadow)&&(kt.receiveShadow=Re.receiveShadow,kn.setValue(Se,"receiveShadow",Re.receiveShadow)),Ue.isMeshGouraudMaterial&&Ue.envMap!==null&&(Pn.envMap.value=ut,Pn.flipEnvMap.value=ut.isCubeTexture&&ut.isRenderTargetTexture===!1?-1:1),Ue.isMeshStandardMaterial&&Ue.envMap===null&&Ce.environment!==null&&(Pn.envMapIntensity.value=Ce.environmentIntensity),fr&&(kn.setValue(Se,"toneMappingExposure",E.toneMappingExposure),kt.needsLights&&ct(Pn,Fn),Ne&&Ue.fog===!0&&Ft.refreshFogUniforms(Pn,Ne),Ft.refreshMaterialUniforms(Pn,Ue,X,Q,_.state.transmissionRenderTarget[ae.id]),t_.upload(Se,ue(kt),Pn,ve)),Ue.isShaderMaterial&&Ue.uniformsNeedUpdate===!0&&(t_.upload(Se,ue(kt),Pn,ve),Ue.uniformsNeedUpdate=!1),Ue.isSpriteMaterial&&kn.setValue(Se,"center",Re.center),kn.setValue(Se,"modelViewMatrix",Re.modelViewMatrix),kn.setValue(Se,"normalMatrix",Re.normalMatrix),kn.setValue(Se,"modelMatrix",Re.matrixWorld),Ue.isShaderMaterial||Ue.isRawShaderMaterial){const er=Ue.uniformsGroups;for(let Si=0,Pr=er.length;Si<Pr;Si++){const Io=er[Si];Ke.update(Io,gr),Ke.bind(Io,gr)}}return gr}function ct(ae,Ce){ae.ambientLightColor.needsUpdate=Ce,ae.lightProbe.needsUpdate=Ce,ae.directionalLights.needsUpdate=Ce,ae.directionalLightShadows.needsUpdate=Ce,ae.pointLights.needsUpdate=Ce,ae.pointLightShadows.needsUpdate=Ce,ae.spotLights.needsUpdate=Ce,ae.spotLightShadows.needsUpdate=Ce,ae.rectAreaLights.needsUpdate=Ce,ae.hemisphereLights.needsUpdate=Ce}function xt(ae){return ae.isMeshLambertMaterial||ae.isMeshToonMaterial||ae.isMeshPhongMaterial||ae.isMeshStandardMaterial||ae.isShadowMaterial||ae.isShaderMaterial&&ae.lights===!0}this.getActiveCubeFace=function(){return O},this.getActiveMipmapLevel=function(){return L},this.getRenderTarget=function(){return D},this.setRenderTargetTextures=function(ae,Ce,De){lt.get(ae.texture).__webglTexture=Ce,lt.get(ae.depthTexture).__webglTexture=De;const Ue=lt.get(ae);Ue.__hasExternalTextures=!0,Ue.__autoAllocateDepthBuffer=De===void 0,Ue.__autoAllocateDepthBuffer||ye.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Ue.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(ae,Ce){const De=lt.get(ae);De.__webglFramebuffer=Ce,De.__useDefaultFramebuffer=Ce===void 0},this.setRenderTarget=function(ae,Ce=0,De=0){D=ae,O=Ce,L=De;let Ue=!0,Re=null,Ne=!1,Be=!1;if(ae){const ut=lt.get(ae);if(ut.__useDefaultFramebuffer!==void 0)ft.bindFramebuffer(Se.FRAMEBUFFER,null),Ue=!1;else if(ut.__webglFramebuffer===void 0)ve.setupRenderTarget(ae);else if(ut.__hasExternalTextures)ve.rebindTextures(ae,lt.get(ae.texture).__webglTexture,lt.get(ae.depthTexture).__webglTexture);else if(ae.depthBuffer){const Ot=ae.depthTexture;if(ut.__boundDepthTexture!==Ot){if(Ot!==null&&lt.has(Ot)&&(ae.width!==Ot.image.width||ae.height!==Ot.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ve.setupDepthRenderbuffer(ae)}}const St=ae.texture;(St.isData3DTexture||St.isDataArrayTexture||St.isCompressedArrayTexture)&&(Be=!0);const Bt=lt.get(ae).__webglFramebuffer;ae.isWebGLCubeRenderTarget?(Array.isArray(Bt[Ce])?Re=Bt[Ce][De]:Re=Bt[Ce],Ne=!0):ae.samples>0&&ve.useMultisampledRTT(ae)===!1?Re=lt.get(ae).__webglMultisampledFramebuffer:Array.isArray(Bt)?Re=Bt[De]:Re=Bt,k.copy(ae.viewport),z.copy(ae.scissor),W=ae.scissorTest}else k.copy(ee).multiplyScalar(X).floor(),z.copy(G).multiplyScalar(X).floor(),W=ne;if(ft.bindFramebuffer(Se.FRAMEBUFFER,Re)&&Ue&&ft.drawBuffers(ae,Re),ft.viewport(k),ft.scissor(z),ft.setScissorTest(W),Ne){const ut=lt.get(ae.texture);Se.framebufferTexture2D(Se.FRAMEBUFFER,Se.COLOR_ATTACHMENT0,Se.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,ut.__webglTexture,De)}else if(Be){const ut=lt.get(ae.texture),St=Ce||0;Se.framebufferTextureLayer(Se.FRAMEBUFFER,Se.COLOR_ATTACHMENT0,ut.__webglTexture,De||0,St)}F=-1},this.readRenderTargetPixels=function(ae,Ce,De,Ue,Re,Ne,Be){if(!(ae&&ae.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Et=lt.get(ae).__webglFramebuffer;if(ae.isWebGLCubeRenderTarget&&Be!==void 0&&(Et=Et[Be]),Et){ft.bindFramebuffer(Se.FRAMEBUFFER,Et);try{const ut=ae.texture,St=ut.format,Bt=ut.type;if(!Ct.textureFormatReadable(St)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Ct.textureTypeReadable(Bt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ce>=0&&Ce<=ae.width-Ue&&De>=0&&De<=ae.height-Re&&Se.readPixels(Ce,De,Ue,Re,fn.convert(St),fn.convert(Bt),Ne)}finally{const ut=D!==null?lt.get(D).__webglFramebuffer:null;ft.bindFramebuffer(Se.FRAMEBUFFER,ut)}}},this.readRenderTargetPixelsAsync=async function(ae,Ce,De,Ue,Re,Ne,Be){if(!(ae&&ae.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Et=lt.get(ae).__webglFramebuffer;if(ae.isWebGLCubeRenderTarget&&Be!==void 0&&(Et=Et[Be]),Et){const ut=ae.texture,St=ut.format,Bt=ut.type;if(!Ct.textureFormatReadable(St))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ct.textureTypeReadable(Bt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(Ce>=0&&Ce<=ae.width-Ue&&De>=0&&De<=ae.height-Re){ft.bindFramebuffer(Se.FRAMEBUFFER,Et);const Ot=Se.createBuffer();Se.bindBuffer(Se.PIXEL_PACK_BUFFER,Ot),Se.bufferData(Se.PIXEL_PACK_BUFFER,Ne.byteLength,Se.STREAM_READ),Se.readPixels(Ce,De,Ue,Re,fn.convert(St),fn.convert(Bt),0);const Qt=D!==null?lt.get(D).__webglFramebuffer:null;ft.bindFramebuffer(Se.FRAMEBUFFER,Qt);const cn=Se.fenceSync(Se.SYNC_GPU_COMMANDS_COMPLETE,0);return Se.flush(),await YZ(Se,cn,4),Se.bindBuffer(Se.PIXEL_PACK_BUFFER,Ot),Se.getBufferSubData(Se.PIXEL_PACK_BUFFER,0,Ne),Se.deleteBuffer(Ot),Se.deleteSync(cn),Ne}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(ae,Ce=null,De=0){ae.isTexture!==!0&&(Yv("WebGLRenderer: copyFramebufferToTexture function signature has changed."),Ce=arguments[0]||null,ae=arguments[1]);const Ue=Math.pow(2,-De),Re=Math.floor(ae.image.width*Ue),Ne=Math.floor(ae.image.height*Ue),Be=Ce!==null?Ce.x:0,Et=Ce!==null?Ce.y:0;ve.setTexture2D(ae,0),Se.copyTexSubImage2D(Se.TEXTURE_2D,De,0,0,Be,Et,Re,Ne),ft.unbindTexture()},this.copyTextureToTexture=function(ae,Ce,De=null,Ue=null,Re=0){ae.isTexture!==!0&&(Yv("WebGLRenderer: copyTextureToTexture function signature has changed."),Ue=arguments[0]||null,ae=arguments[1],Ce=arguments[2],Re=arguments[3]||0,De=null);let Ne,Be,Et,ut,St,Bt,Ot,Qt,cn;const Kt=ae.isCompressedTexture?ae.mipmaps[Re]:ae.image;De!==null?(Ne=De.max.x-De.min.x,Be=De.max.y-De.min.y,Et=De.isBox3?De.max.z-De.min.z:1,ut=De.min.x,St=De.min.y,Bt=De.isBox3?De.min.z:0):(Ne=Kt.width,Be=Kt.height,Et=Kt.depth||1,ut=0,St=0,Bt=0),Ue!==null?(Ot=Ue.x,Qt=Ue.y,cn=Ue.z):(Ot=0,Qt=0,cn=0);const _n=fn.convert(Ce.format),Vt=fn.convert(Ce.type);let kt;Ce.isData3DTexture?(ve.setTexture3D(Ce,0),kt=Se.TEXTURE_3D):Ce.isDataArrayTexture||Ce.isCompressedArrayTexture?(ve.setTexture2DArray(Ce,0),kt=Se.TEXTURE_2D_ARRAY):(ve.setTexture2D(Ce,0),kt=Se.TEXTURE_2D),Se.pixelStorei(Se.UNPACK_FLIP_Y_WEBGL,Ce.flipY),Se.pixelStorei(Se.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ce.premultiplyAlpha),Se.pixelStorei(Se.UNPACK_ALIGNMENT,Ce.unpackAlignment);const Mn=Se.getParameter(Se.UNPACK_ROW_LENGTH),Sn=Se.getParameter(Se.UNPACK_IMAGE_HEIGHT),gr=Se.getParameter(Se.UNPACK_SKIP_PIXELS),vr=Se.getParameter(Se.UNPACK_SKIP_ROWS),fr=Se.getParameter(Se.UNPACK_SKIP_IMAGES);Se.pixelStorei(Se.UNPACK_ROW_LENGTH,Kt.width),Se.pixelStorei(Se.UNPACK_IMAGE_HEIGHT,Kt.height),Se.pixelStorei(Se.UNPACK_SKIP_PIXELS,ut),Se.pixelStorei(Se.UNPACK_SKIP_ROWS,St),Se.pixelStorei(Se.UNPACK_SKIP_IMAGES,Bt);const Fn=ae.isDataArrayTexture||ae.isData3DTexture,kn=Ce.isDataArrayTexture||Ce.isData3DTexture;if(ae.isRenderTargetTexture||ae.isDepthTexture){const Pn=lt.get(ae),jn=lt.get(Ce),er=lt.get(Pn.__renderTarget),Si=lt.get(jn.__renderTarget);ft.bindFramebuffer(Se.READ_FRAMEBUFFER,er.__webglFramebuffer),ft.bindFramebuffer(Se.DRAW_FRAMEBUFFER,Si.__webglFramebuffer);for(let Pr=0;Pr<Et;Pr++)Fn&&Se.framebufferTextureLayer(Se.READ_FRAMEBUFFER,Se.COLOR_ATTACHMENT0,lt.get(ae).__webglTexture,Re,Bt+Pr),ae.isDepthTexture?(kn&&Se.framebufferTextureLayer(Se.DRAW_FRAMEBUFFER,Se.COLOR_ATTACHMENT0,lt.get(Ce).__webglTexture,Re,cn+Pr),Se.blitFramebuffer(ut,St,Ne,Be,Ot,Qt,Ne,Be,Se.DEPTH_BUFFER_BIT,Se.NEAREST)):kn?Se.copyTexSubImage3D(kt,Re,Ot,Qt,cn+Pr,ut,St,Ne,Be):Se.copyTexSubImage2D(kt,Re,Ot,Qt,cn+Pr,ut,St,Ne,Be);ft.bindFramebuffer(Se.READ_FRAMEBUFFER,null),ft.bindFramebuffer(Se.DRAW_FRAMEBUFFER,null)}else kn?ae.isDataTexture||ae.isData3DTexture?Se.texSubImage3D(kt,Re,Ot,Qt,cn,Ne,Be,Et,_n,Vt,Kt.data):Ce.isCompressedArrayTexture?Se.compressedTexSubImage3D(kt,Re,Ot,Qt,cn,Ne,Be,Et,_n,Kt.data):Se.texSubImage3D(kt,Re,Ot,Qt,cn,Ne,Be,Et,_n,Vt,Kt):ae.isDataTexture?Se.texSubImage2D(Se.TEXTURE_2D,Re,Ot,Qt,Ne,Be,_n,Vt,Kt.data):ae.isCompressedTexture?Se.compressedTexSubImage2D(Se.TEXTURE_2D,Re,Ot,Qt,Kt.width,Kt.height,_n,Kt.data):Se.texSubImage2D(Se.TEXTURE_2D,Re,Ot,Qt,Ne,Be,_n,Vt,Kt);Se.pixelStorei(Se.UNPACK_ROW_LENGTH,Mn),Se.pixelStorei(Se.UNPACK_IMAGE_HEIGHT,Sn),Se.pixelStorei(Se.UNPACK_SKIP_PIXELS,gr),Se.pixelStorei(Se.UNPACK_SKIP_ROWS,vr),Se.pixelStorei(Se.UNPACK_SKIP_IMAGES,fr),Re===0&&Ce.generateMipmaps&&Se.generateMipmap(kt),ft.unbindTexture()},this.copyTextureToTexture3D=function(ae,Ce,De=null,Ue=null,Re=0){return ae.isTexture!==!0&&(Yv("WebGLRenderer: copyTextureToTexture3D function signature has changed."),De=arguments[0]||null,Ue=arguments[1]||null,ae=arguments[2],Ce=arguments[3],Re=arguments[4]||0),Yv('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(ae,Ce,De,Ue,Re)},this.initRenderTarget=function(ae){lt.get(ae).__webglFramebuffer===void 0&&ve.setupRenderTarget(ae)},this.initTexture=function(ae){ae.isCubeTexture?ve.setTextureCube(ae,0):ae.isData3DTexture?ve.setTexture3D(ae,0):ae.isDataArrayTexture||ae.isCompressedArrayTexture?ve.setTexture2DArray(ae,0):ve.setTexture2D(ae,0),ft.unbindTexture()},this.resetState=function(){O=0,L=0,D=null,ft.reset(),nn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return df}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=Gr._getDrawingBufferColorSpace(e),t.unpackColorSpace=Gr._getUnpackColorSpace()}}class sw{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new xn(e),this.density=t}clone(){return new sw(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class lw{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new xn(e),this.near=t,this.far=r}clone(){return new lw(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class xg extends ti{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new du,this.environmentIntensity=1,this.environmentRotation=new du,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class uw{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=L0,this.updateRanges=[],this.version=0,this.uuid=cu()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,o=this.stride;i<o;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=cu()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=cu()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Xs=new Pe;class zp{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)Xs.fromBufferAttribute(this,t),Xs.applyMatrix4(e),this.setXYZ(t,Xs.x,Xs.y,Xs.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Xs.fromBufferAttribute(this,t),Xs.applyNormalMatrix(e),this.setXYZ(t,Xs.x,Xs.y,Xs.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Xs.fromBufferAttribute(this,t),Xs.transformDirection(e),this.setXYZ(t,Xs.x,Xs.y,Xs.z);return this}getComponent(e,t){let r=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(r=Qs(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=Sr(r,this.array)),this.data.array[e*this.data.stride+this.offset+t]=r,this}setX(e,t){return this.normalized&&(t=Sr(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Sr(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Sr(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Sr(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Qs(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Qs(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Qs(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Qs(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Sr(t,this.array),r=Sr(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Sr(t,this.array),r=Sr(r,this.array),i=Sr(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,o){return e=e*this.data.stride+this.offset,this.normalized&&(t=Sr(t,this.array),r=Sr(r,this.array),i=Sr(i,this.array),o=Sr(o,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=o,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[i+o])}return new Oi(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new zp(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[i+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class HP extends ds{static get type(){return"SpriteMaterial"}constructor(e){super(),this.isSpriteMaterial=!0,this.color=new xn(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Lm;const bv=new Pe,Om=new Pe,Dm=new Pe,km=new zt,Av=new zt,Qz=new Qn,ox=new Pe,Ev=new Pe,ax=new Pe,NL=new zt,h2=new zt,LL=new zt;class e7 extends ti{constructor(e=new HP){if(super(),this.isSprite=!0,this.type="Sprite",Lm===void 0){Lm=new wr;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new uw(t,5);Lm.setIndex([0,1,2,0,2,3]),Lm.setAttribute("position",new zp(r,3,0,!1)),Lm.setAttribute("uv",new zp(r,2,3,!1))}this.geometry=Lm,this.material=e,this.center=new zt(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Om.setFromMatrixScale(this.matrixWorld),Qz.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Dm.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Om.multiplyScalar(-Dm.z);const r=this.material.rotation;let i,o;r!==0&&(o=Math.cos(r),i=Math.sin(r));const a=this.center;sx(ox.set(-.5,-.5,0),Dm,a,Om,i,o),sx(Ev.set(.5,-.5,0),Dm,a,Om,i,o),sx(ax.set(.5,.5,0),Dm,a,Om,i,o),NL.set(0,0),h2.set(1,0),LL.set(1,1);let s=e.ray.intersectTriangle(ox,Ev,ax,!1,bv);if(s===null&&(sx(Ev.set(-.5,.5,0),Dm,a,Om,i,o),h2.set(0,1),s=e.ray.intersectTriangle(ox,ax,Ev,!1,bv),s===null))return;const l=e.ray.origin.distanceTo(bv);l<e.near||l>e.far||t.push({distance:l,point:bv.clone(),uv:Ll.getInterpolation(bv,ox,Ev,ax,NL,h2,LL,new zt),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function sx(n,e,t,r,i,o){km.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(Av.x=o*km.x-i*km.y,Av.y=i*km.x+o*km.y):Av.copy(km),n.copy(e),n.x+=Av.x,n.y+=Av.y,n.applyMatrix4(Qz)}const lx=new Pe,OL=new Pe;class t7 extends ti{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const o=t[r];this.addLevel(o.object.clone(),o.distance,o.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,r=0){t=Math.abs(t);const i=this.levels;let o;for(o=0;o<i.length&&!(t<i[o].distance);o++);return i.splice(o,0,{distance:t,hysteresis:r,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let r=0;r<t.length;r++)if(t[r].distance===e){const i=t.splice(r,1);return this.remove(i[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),e<o)break}return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){lx.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(lx);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){lx.setFromMatrixPosition(e.matrixWorld),OL.setFromMatrixPosition(this.matrixWorld);const r=lx.distanceTo(OL)/e.zoom;t[0].object.visible=!0;let i,o;for(i=1,o=t.length;i<o;i++){let a=t[i].distance;if(t[i].object.visible&&(a-=a*t[i].hysteresis),r>=a)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<o;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,o=r.length;i<o;i++){const a=r[i];t.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return t}}const DL=new Pe,kL=new Yr,FL=new Yr,uie=new Pe,UL=new Qn,ux=new Pe,p2=new Ds,BL=new Qn,m2=new $g;class n7 extends Co{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=yC,this.bindMatrix=new Qn,this.bindMatrixInverse=new Qn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new rl),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,ux),this.boundingBox.expandByPoint(ux)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Ds),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,ux),this.boundingSphere.expandByPoint(ux)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),p2.copy(this.boundingSphere),p2.applyMatrix4(i),e.ray.intersectsSphere(p2)!==!1&&(BL.copy(i).invert(),m2.copy(e.ray).applyMatrix4(BL),!(this.boundingBox!==null&&m2.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,m2)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Yr,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===yC?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===Ez?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const r=this.skeleton,i=this.geometry;kL.fromBufferAttribute(i.attributes.skinIndex,e),FL.fromBufferAttribute(i.attributes.skinWeight,e),DL.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let o=0;o<4;o++){const a=FL.getComponent(o);if(a!==0){const s=kL.getComponent(o);UL.multiplyMatrices(r.bones[s].matrixWorld,r.boneInverses[s]),t.addScaledVector(uie.copy(DL).applyMatrix4(UL),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}class VP extends ti{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Lc extends Mi{constructor(e=null,t=1,r=1,i,o,a,s,l,u=fs,c=fs,f,h){super(null,a,s,l,u,c,i,o,f,h),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const zL=new Qn,cie=new Qn;class cw{constructor(e=[],t=[]){this.uuid=cu(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new Qn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new Qn;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let o=0,a=e.length;o<a;o++){const s=e[o]?e[o].matrixWorld:cie;zL.multiplyMatrices(s,t[o]),zL.toArray(r,o*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new cw(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new Lc(t,e,e,ia,go);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const o=e.bones[r];let a=t[o];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),a=new VP),this.bones.push(a),this.boneInverses.push(new Qn().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,o=t.length;i<o;i++){const a=t[i];e.bones.push(a.uuid);const s=r[i];e.boneInverses.push(s.toArray())}return e}}class _g extends Oi{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Fm=new Qn,HL=new Qn,cx=[],VL=new rl,fie=new Qn,Tv=new Co,Mv=new Ds;class r7 extends Co{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new _g(new Float32Array(r*16),16),this.instanceColor=null,this.morphTexture=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,fie)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new rl),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Fm),VL.copy(e.boundingBox).applyMatrix4(Fm),this.boundingBox.union(VL)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Ds),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Fm),Mv.copy(e.boundingSphere).applyMatrix4(Fm),this.boundingSphere.union(Mv)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const r=t.morphTargetInfluences,i=this.morphTexture.source.data.data,o=r.length+1,a=e*o+1;for(let s=0;s<r.length;s++)r[s]=i[a+s]}raycast(e,t){const r=this.matrixWorld,i=this.count;if(Tv.geometry=this.geometry,Tv.material=this.material,Tv.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Mv.copy(this.boundingSphere),Mv.applyMatrix4(r),e.ray.intersectsSphere(Mv)!==!1))for(let o=0;o<i;o++){this.getMatrixAt(o,Fm),HL.multiplyMatrices(r,Fm),Tv.matrixWorld=HL,Tv.raycast(e,cx);for(let a=0,s=cx.length;a<s;a++){const l=cx[a];l.instanceId=o,l.object=this,t.push(l)}cx.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new _g(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const r=t.morphTargetInfluences,i=r.length+1;this.morphTexture===null&&(this.morphTexture=new Lc(new Float32Array(i*this.count),i,this.count,Fy,go));const o=this.morphTexture.source.data.data;let a=0;for(let u=0;u<r.length;u++)a+=r[u];const s=this.geometry.morphTargetsRelative?1:1-a,l=i*e;o[l]=s,o.set(r,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function g2(n,e){return n-e}function die(n,e){return n.z-e.z}function hie(n,e){return e.z-n.z}class pie{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,r,i){const o=this.pool,a=this.list;this.index>=o.length&&o.push({start:-1,count:-1,z:-1,index:-1});const s=o[this.index];a.push(s),this.index++,s.start=e,s.count=t,s.z=r,s.index=i}reset(){this.list.length=0,this.index=0}}const Rl=new Qn,mie=new xn(1,1,1),v2=new Vy,fx=new rl,Jh=new Ds,Cv=new Pe,GL=new Pe,gie=new Pe,y2=new pie,Ts=new Co,dx=[];function vie(n,e,t=0){const r=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const i=n.count;for(let o=0;o<i;o++)for(let a=0;a<r;a++)e.setComponent(o+t,a,n.getComponent(o,a))}else e.array.set(n.array,t*r);e.needsUpdate=!0}function Zh(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++)e[r]=n[r]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class i7 extends Co{get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}constructor(e,t,r=t*2,i){super(new wr,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=r,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),r=new Lc(t,e,e,ia,go);this._matricesTexture=r}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),r=new Lc(t,e,e,Uy,Af);this._indirectTexture=r}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),r=new Lc(t,e,e,ia,go);r.colorSpace=Gr.workingColorSpace,this._colorsTexture=r}_initializeGeometry(e){const t=this.geometry,r=this._maxVertexCount,i=this._maxIndexCount;if(this._geometryInitialized===!1){for(const o in e.attributes){const a=e.getAttribute(o),{array:s,itemSize:l,normalized:u}=a,c=new s.constructor(r*l),f=new Oi(c,l,u);t.setAttribute(o,f)}if(e.getIndex()!==null){const o=r>65535?new Uint32Array(i):new Uint16Array(i);t.setIndex(new Oi(o,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const r in t.attributes){if(!e.hasAttribute(r))throw new Error(`BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),o=t.getAttribute(r);if(i.itemSize!==o.itemSize||i.normalized!==o.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new rl);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let r=0,i=t.length;r<i;r++){if(t[r].active===!1)continue;const o=t[r].geometryIndex;this.getMatrixAt(r,Rl),this.getBoundingBoxAt(o,fx).applyMatrix4(Rl),e.union(fx)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ds);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let r=0,i=t.length;r<i;r++){if(t[r].active===!1)continue;const o=t[r].geometryIndex;this.getMatrixAt(r,Rl),this.getBoundingSphereAt(o,Jh).applyMatrix4(Rl),e.union(Jh)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("BatchedMesh: Maximum item count reached.");const r={visible:!0,active:!0,geometryIndex:e};let i=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(g2),i=this._availableInstanceIds.shift(),this._instanceInfo[i]=r):(i=this._instanceInfo.length,this._instanceInfo.push(r));const o=this._matricesTexture;Rl.identity().toArray(o.image.data,i*16),o.needsUpdate=!0;const a=this._colorsTexture;return a&&(mie.toArray(a.image.data,i*4),a.needsUpdate=!0),this._visibilityChanged=!0,i}addGeometry(e,t=-1,r=-1){this._initializeGeometry(e),this._validateGeometry(e);const i={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},o=this._geometryInfo;i.vertexStart=this._nextVertexStart,i.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const a=e.getIndex();if(a!==null&&(i.indexStart=this._nextIndexStart,i.reservedIndexCount=r===-1?a.count:r),i.indexStart!==-1&&i.indexStart+i.reservedIndexCount>this._maxIndexCount||i.vertexStart+i.reservedVertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");let l;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(g2),l=this._availableGeometryIds.shift(),o[l]=i):(l=this._geometryCount,this._geometryCount++,o.push(i)),this.setGeometryAt(l,e),this._nextIndexStart=i.indexStart+i.reservedIndexCount,this._nextVertexStart=i.vertexStart+i.reservedVertexCount,l}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const r=this.geometry,i=r.getIndex()!==null,o=r.getIndex(),a=t.getIndex(),s=this._geometryInfo[e];if(i&&a.count>s.reservedIndexCount||t.attributes.position.count>s.reservedVertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=s.vertexStart,u=s.reservedVertexCount;s.vertexCount=t.getAttribute("position").count;for(const c in r.attributes){const f=t.getAttribute(c),h=r.getAttribute(c);vie(f,h,l);const p=f.itemSize;for(let v=f.count,S=u;v<S;v++){const y=l+v;for(let _=0;_<p;_++)h.setComponent(y,_,0)}h.needsUpdate=!0,h.addUpdateRange(l*p,u*p)}if(i){const c=s.indexStart,f=s.reservedIndexCount;s.indexCount=t.getIndex().count;for(let h=0;h<a.count;h++)o.setX(c+h,l+a.getX(h));for(let h=a.count,p=f;h<p;h++)o.setX(c+h,l);o.needsUpdate=!0,o.addUpdateRange(c,s.reservedIndexCount)}return s.start=i?s.indexStart:s.vertexStart,s.count=i?s.indexCount:s.vertexCount,s.boundingBox=null,t.boundingBox!==null&&(s.boundingBox=t.boundingBox.clone()),s.boundingSphere=null,t.boundingSphere!==null&&(s.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const r=this._instanceInfo;for(let i=0,o=r.length;i<o;i++)r[i].geometryIndex===e&&this.deleteInstance(i);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){const t=this._instanceInfo;return e>=t.length||t[e].active===!1?this:(t[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this)}optimize(){let e=0,t=0;const r=this._geometryInfo,i=r.map((a,s)=>s).sort((a,s)=>r[a].vertexStart-r[s].vertexStart),o=this.geometry;for(let a=0,s=r.length;a<s;a++){const l=i[a],u=r[l];if(u.active!==!1){if(o.index!==null){if(u.indexStart!==t){const{indexStart:c,vertexStart:f,reservedIndexCount:h}=u,p=o.index,v=p.array,S=e-f;for(let y=c;y<c+h;y++)v[y]=v[y]+S;p.array.copyWithin(t,c,c+h),p.addUpdateRange(t,h),u.indexStart=t}t+=u.reservedIndexCount}if(u.vertexStart!==e){const{vertexStart:c,reservedVertexCount:f}=u,h=o.attributes;for(const p in h){const v=h[p],{array:S,itemSize:y}=v;S.copyWithin(e*y,c*y,(c+f)*y),v.addUpdateRange(e*y,f*y)}u.vertexStart=e}e+=u.reservedVertexCount,u.start=o.index?u.indexStart:u.vertexStart,this._nextIndexStart=o.index?u.indexStart+u.reservedIndexCount:0,this._nextVertexStart=u.vertexStart+u.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const r=this.geometry,i=this._geometryInfo[e];if(i.boundingBox===null){const o=new rl,a=r.index,s=r.attributes.position;for(let l=i.start,u=i.start+i.count;l<u;l++){let c=l;a&&(c=a.getX(c)),o.expandByPoint(Cv.fromBufferAttribute(s,c))}i.boundingBox=o}return t.copy(i.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const r=this.geometry,i=this._geometryInfo[e];if(i.boundingSphere===null){const o=new Ds;this.getBoundingBoxAt(e,fx),fx.getCenter(o.center);const a=r.index,s=r.attributes.position;let l=0;for(let u=i.start,c=i.start+i.count;u<c;u++){let f=u;a&&(f=a.getX(f)),Cv.fromBufferAttribute(s,f),l=Math.max(l,o.center.distanceToSquared(Cv))}o.radius=Math.sqrt(l),i.boundingSphere=o}return t.copy(i.boundingSphere),t}setMatrixAt(e,t){const r=this._instanceInfo,i=this._matricesTexture,o=this._matricesTexture.image.data;return e>=r.length||r[e].active===!1?this:(t.toArray(o,e*16),i.needsUpdate=!0,this)}getMatrixAt(e,t){const r=this._instanceInfo,i=this._matricesTexture.image.data;return e>=r.length||r[e].active===!1?null:t.fromArray(i,e*16)}setColorAt(e,t){this._colorsTexture===null&&this._initColorsTexture();const r=this._colorsTexture,i=this._colorsTexture.image.data,o=this._instanceInfo;return e>=o.length||o[e].active===!1?this:(t.toArray(i,e*4),r.needsUpdate=!0,this)}getColorAt(e,t){const r=this._colorsTexture.image.data,i=this._instanceInfo;return e>=i.length||i[e].active===!1?null:t.fromArray(r,e*4)}setVisibleAt(e,t){const r=this._instanceInfo;return e>=r.length||r[e].active===!1||r[e].visible===t?this:(r[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._instanceInfo;return e>=t.length||t[e].active===!1?!1:t[e].visible}setGeometryIdAt(e,t){const r=this._instanceInfo,i=this._geometryInfo;return e>=r.length||r[e].active===!1||t>=i.length||i[t].active===!1?null:(r[e].geometryIndex=t,this)}getGeometryIdAt(e){const t=this._instanceInfo;return e>=t.length||t[e].active===!1?-1:t[e].geometryIndex}getGeometryRangeAt(e,t={}){if(e<0||e>=this._geometryCount)return null;const r=this._geometryInfo[e];return t.vertexStart=r.vertexStart,t.vertexCount=r.vertexCount,t.reservedVertexCount=r.reservedVertexCount,t.indexStart=r.indexStart,t.indexCount=r.indexCount,t.reservedIndexCount=r.reservedIndexCount,t.start=r.start,t.count=r.count,t}setInstanceCount(e){const t=this._availableInstanceIds,r=this._instanceInfo;for(t.sort(g2);t[t.length-1]===r.length;)r.pop(),t.pop();if(e<r.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const i=new Int32Array(e),o=new Int32Array(e);Zh(this._multiDrawCounts,i),Zh(this._multiDrawStarts,o),this._multiDrawCounts=i,this._multiDrawStarts=o,this._maxInstanceCount=e;const a=this._indirectTexture,s=this._matricesTexture,l=this._colorsTexture;a.dispose(),this._initIndirectTexture(),Zh(a.image.data,this._indirectTexture.image.data),s.dispose(),this._initMatricesTexture(),Zh(s.image.data,this._matricesTexture.image.data),l&&(l.dispose(),this._initColorsTexture(),Zh(l.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const r=[...this._geometryInfo].filter(s=>s.active);if(Math.max(...r.map(s=>s.vertexStart+s.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...r.map(l=>l.indexStart+l.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const o=this.geometry;o.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new wr,this._initializeGeometry(o));const a=this.geometry;o.index&&Zh(o.index.array,a.index.array);for(const s in o.attributes)Zh(o.attributes[s].array,a.attributes[s].array)}raycast(e,t){const r=this._instanceInfo,i=this._geometryInfo,o=this.matrixWorld,a=this.geometry;Ts.material=this.material,Ts.geometry.index=a.index,Ts.geometry.attributes=a.attributes,Ts.geometry.boundingBox===null&&(Ts.geometry.boundingBox=new rl),Ts.geometry.boundingSphere===null&&(Ts.geometry.boundingSphere=new Ds);for(let s=0,l=r.length;s<l;s++){if(!r[s].visible||!r[s].active)continue;const u=r[s].geometryIndex,c=i[u];Ts.geometry.setDrawRange(c.start,c.count),this.getMatrixAt(s,Ts.matrixWorld).premultiply(o),this.getBoundingBoxAt(u,Ts.geometry.boundingBox),this.getBoundingSphereAt(u,Ts.geometry.boundingSphere),Ts.raycast(e,dx);for(let f=0,h=dx.length;f<h;f++){const p=dx[f];p.object=this,p.batchId=s,t.push(p)}dx.length=0}Ts.material=null,Ts.geometry.index=null,Ts.geometry.attributes={},Ts.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,r,i,o){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const a=i.getIndex(),s=a===null?1:a.array.BYTES_PER_ELEMENT,l=this._instanceInfo,u=this._multiDrawStarts,c=this._multiDrawCounts,f=this._geometryInfo,h=this.perObjectFrustumCulled,p=this._indirectTexture,v=p.image.data;h&&(Rl.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),v2.setFromProjectionMatrix(Rl,e.coordinateSystem));let S=0;if(this.sortObjects){Rl.copy(this.matrixWorld).invert(),Cv.setFromMatrixPosition(r.matrixWorld).applyMatrix4(Rl),GL.set(0,0,-1).transformDirection(r.matrixWorld).transformDirection(Rl);for(let w=0,A=l.length;w<A;w++)if(l[w].visible&&l[w].active){const E=l[w].geometryIndex;this.getMatrixAt(w,Rl),this.getBoundingSphereAt(E,Jh).applyMatrix4(Rl);let P=!1;if(h&&(P=!v2.intersectsSphere(Jh)),!P){const O=f[E],L=gie.subVectors(Jh.center,Cv).dot(GL);y2.push(O.start,O.count,L,w)}}const y=y2.list,_=this.customSort;_===null?y.sort(o.transparent?hie:die):_.call(this,y,r);for(let w=0,A=y.length;w<A;w++){const E=y[w];u[S]=E.start*s,c[S]=E.count,v[S]=E.index,S++}y2.reset()}else for(let y=0,_=l.length;y<_;y++)if(l[y].visible&&l[y].active){const w=l[y].geometryIndex;let A=!1;if(h&&(this.getMatrixAt(y,Rl),this.getBoundingSphereAt(w,Jh).applyMatrix4(Rl),A=!v2.intersectsSphere(Jh)),!A){const E=f[w];u[S]=E.start*s,c[S]=E.count,v[S]=y,S++}}p.needsUpdate=!0,this._multiDrawCount=S,this._visibilityChanged=!1}onBeforeShadow(e,t,r,i,o,a){this.onBeforeRender(e,null,i,o,a)}}class al extends ds{static get type(){return"LineBasicMaterial"}constructor(e){super(),this.isLineBasicMaterial=!0,this.color=new xn(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const j_=new Pe,$_=new Pe,qL=new Qn,Pv=new $g,hx=new Ds,x2=new Pe,WL=new Pe;let mh=class extends ti{constructor(e=new wr,t=new al){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,o=t.count;i<o;i++)j_.fromBufferAttribute(t,i-1),$_.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=j_.distanceTo($_);e.setAttribute("lineDistance",new Ln(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,o=e.params.Line.threshold,a=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),hx.copy(r.boundingSphere),hx.applyMatrix4(i),hx.radius+=o,e.ray.intersectsSphere(hx)===!1)return;qL.copy(i).invert(),Pv.copy(e.ray).applyMatrix4(qL);const s=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=s*s,u=this.isLineSegments?2:1,c=r.index,h=r.attributes.position;if(c!==null){const p=Math.max(0,a.start),v=Math.min(c.count,a.start+a.count);for(let S=p,y=v-1;S<y;S+=u){const _=c.getX(S),w=c.getX(S+1),A=px(this,e,Pv,l,_,w);A&&t.push(A)}if(this.isLineLoop){const S=c.getX(v-1),y=c.getX(p),_=px(this,e,Pv,l,S,y);_&&t.push(_)}}else{const p=Math.max(0,a.start),v=Math.min(h.count,a.start+a.count);for(let S=p,y=v-1;S<y;S+=u){const _=px(this,e,Pv,l,S,S+1);_&&t.push(_)}if(this.isLineLoop){const S=px(this,e,Pv,l,v-1,p);S&&t.push(S)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,a=i.length;o<a;o++){const s=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=o}}}}};function px(n,e,t,r,i,o){const a=n.geometry.attributes.position;if(j_.fromBufferAttribute(a,i),$_.fromBufferAttribute(a,o),t.distanceSqToSegment(j_,$_,x2,WL)>r)return;x2.applyMatrix4(n.matrixWorld);const l=e.ray.origin.distanceTo(x2);if(!(l<e.near||l>e.far))return{distance:l,point:WL.clone().applyMatrix4(n.matrixWorld),index:i,face:null,faceIndex:null,barycoord:null,object:n}}const jL=new Pe,$L=new Pe;class Cf extends mh{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,o=t.count;i<o;i+=2)jL.fromBufferAttribute(t,i),$L.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+jL.distanceTo($L);e.setAttribute("lineDistance",new Ln(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class o7 extends mh{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class GP extends ds{static get type(){return"PointsMaterial"}constructor(e){super(),this.isPointsMaterial=!0,this.color=new xn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const XL=new Qn,EC=new $g,mx=new Ds,gx=new Pe;class a7 extends ti{constructor(e=new wr,t=new GP){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,o=e.params.Points.threshold,a=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),mx.copy(r.boundingSphere),mx.applyMatrix4(i),mx.radius+=o,e.ray.intersectsSphere(mx)===!1)return;XL.copy(i).invert(),EC.copy(e.ray).applyMatrix4(XL);const s=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=s*s,u=r.index,f=r.attributes.position;if(u!==null){const h=Math.max(0,a.start),p=Math.min(u.count,a.start+a.count);for(let v=h,S=p;v<S;v++){const y=u.getX(v);gx.fromBufferAttribute(f,y),YL(gx,y,l,i,e,t,this)}}else{const h=Math.max(0,a.start),p=Math.min(f.count,a.start+a.count);for(let v=h,S=p;v<S;v++)gx.fromBufferAttribute(f,v),YL(gx,v,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,a=i.length;o<a;o++){const s=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=o}}}}}function YL(n,e,t,r,i,o,a){const s=EC.distanceSqToPoint(n);if(s<t){const l=new Pe;EC.closestPointToPoint(n,l),l.applyMatrix4(r);const u=i.ray.origin.distanceTo(l);if(u<i.near||u>i.far)return;o.push({distance:u,distanceToRay:Math.sqrt(s),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:a})}}class yie extends Mi{constructor(e,t,r,i,o,a,s,l,u){super(e,t,r,i,o,a,s,l,u),this.isVideoTexture=!0,this.minFilter=a!==void 0?a:mi,this.magFilter=o!==void 0?o:mi,this.generateMipmaps=!1;const c=this;function f(){c.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class xie extends Mi{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=fs,this.minFilter=fs,this.generateMipmaps=!1,this.needsUpdate=!0}}class fw extends Mi{constructor(e,t,r,i,o,a,s,l,u,c,f,h){super(null,a,s,l,u,c,i,o,f,h),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class _ie extends fw{constructor(e,t,r,i,o,a){super(e,t,r,o,a),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=va,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Sie extends fw{constructor(e,t,r){super(void 0,e[0].width,e[0].height,t,r,bf),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class wie extends Mi{constructor(e,t,r,i,o,a,s,l,u){super(e,t,r,i,o,a,s,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}let Fc=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),o=0;t.push(0);for(let a=1;a<=e;a++)r=this.getPoint(a/e),o+=r.distanceTo(i),t.push(o),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const o=r.length;let a;t?a=t:a=e*r[o-1];let s=0,l=o-1,u;for(;s<=l;)if(i=Math.floor(s+(l-s)/2),u=r[i]-a,u<0)s=i+1;else if(u>0)l=i-1;else{l=i;break}if(i=l,r[i]===a)return i/(o-1);const c=r[i],h=r[i+1]-c,p=(a-c)/h;return(i+p)/(o-1)}getTangent(e,t){let i=e-1e-4,o=e+1e-4;i<0&&(i=0),o>1&&(o=1);const a=this.getPoint(i),s=this.getPoint(o),l=t||(a.isVector2?new zt:new Pe);return l.copy(s).sub(a).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new Pe,i=[],o=[],a=[],s=new Pe,l=new Qn;for(let p=0;p<=e;p++){const v=p/e;i[p]=this.getTangentAt(v,new Pe)}o[0]=new Pe,a[0]=new Pe;let u=Number.MAX_VALUE;const c=Math.abs(i[0].x),f=Math.abs(i[0].y),h=Math.abs(i[0].z);c<=u&&(u=c,r.set(1,0,0)),f<=u&&(u=f,r.set(0,1,0)),h<=u&&r.set(0,0,1),s.crossVectors(i[0],r).normalize(),o[0].crossVectors(i[0],s),a[0].crossVectors(i[0],o[0]);for(let p=1;p<=e;p++){if(o[p]=o[p-1].clone(),a[p]=a[p-1].clone(),s.crossVectors(i[p-1],i[p]),s.length()>Number.EPSILON){s.normalize();const v=Math.acos(qo(i[p-1].dot(i[p]),-1,1));o[p].applyMatrix4(l.makeRotationAxis(s,v))}a[p].crossVectors(i[p],o[p])}if(t===!0){let p=Math.acos(qo(o[0].dot(o[e]),-1,1));p/=e,i[0].dot(s.crossVectors(o[0],o[e]))>0&&(p=-p);for(let v=1;v<=e;v++)o[v].applyMatrix4(l.makeRotationAxis(i[v],p*v)),a[v].crossVectors(i[v],o[v])}return{tangents:i,normals:o,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}};class dw extends Fc{constructor(e=0,t=0,r=1,i=1,o=0,a=Math.PI*2,s=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=o,this.aEndAngle=a,this.aClockwise=s,this.aRotation=l}getPoint(e,t=new zt){const r=t,i=Math.PI*2;let o=this.aEndAngle-this.aStartAngle;const a=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=i;for(;o>i;)o-=i;o<Number.EPSILON&&(a?o=0:o=i),this.aClockwise===!0&&!a&&(o===i?o=-i:o=o-i);const s=this.aStartAngle+e*o;let l=this.aX+this.xRadius*Math.cos(s),u=this.aY+this.yRadius*Math.sin(s);if(this.aRotation!==0){const c=Math.cos(this.aRotation),f=Math.sin(this.aRotation),h=l-this.aX,p=u-this.aY;l=h*c-p*f+this.aX,u=h*f+p*c+this.aY}return r.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class s7 extends dw{constructor(e,t,r,i,o,a){super(e,t,r,r,i,o,a),this.isArcCurve=!0,this.type="ArcCurve"}}function qP(){let n=0,e=0,t=0,r=0;function i(o,a,s,l){n=o,e=s,t=-3*o+3*a-2*s-l,r=2*o-2*a+s+l}return{initCatmullRom:function(o,a,s,l,u){i(a,s,u*(s-o),u*(l-a))},initNonuniformCatmullRom:function(o,a,s,l,u,c,f){let h=(a-o)/u-(s-o)/(u+c)+(s-a)/c,p=(s-a)/c-(l-a)/(c+f)+(l-s)/f;h*=c,p*=c,i(a,s,h,p)},calc:function(o){const a=o*o,s=a*o;return n+e*o+t*a+r*s}}}const vx=new Pe,_2=new qP,S2=new qP,w2=new qP;class l7 extends Fc{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new Pe){const r=t,i=this.points,o=i.length,a=(o-(this.closed?0:1))*e;let s=Math.floor(a),l=a-s;this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/o)+1)*o:l===0&&s===o-1&&(s=o-2,l=1);let u,c;this.closed||s>0?u=i[(s-1)%o]:(vx.subVectors(i[0],i[1]).add(i[0]),u=vx);const f=i[s%o],h=i[(s+1)%o];if(this.closed||s+2<o?c=i[(s+2)%o]:(vx.subVectors(i[o-1],i[o-2]).add(i[o-1]),c=vx),this.curveType==="centripetal"||this.curveType==="chordal"){const p=this.curveType==="chordal"?.5:.25;let v=Math.pow(u.distanceToSquared(f),p),S=Math.pow(f.distanceToSquared(h),p),y=Math.pow(h.distanceToSquared(c),p);S<1e-4&&(S=1),v<1e-4&&(v=S),y<1e-4&&(y=S),_2.initNonuniformCatmullRom(u.x,f.x,h.x,c.x,v,S,y),S2.initNonuniformCatmullRom(u.y,f.y,h.y,c.y,v,S,y),w2.initNonuniformCatmullRom(u.z,f.z,h.z,c.z,v,S,y)}else this.curveType==="catmullrom"&&(_2.initCatmullRom(u.x,f.x,h.x,c.x,this.tension),S2.initCatmullRom(u.y,f.y,h.y,c.y,this.tension),w2.initCatmullRom(u.z,f.z,h.z,c.z,this.tension));return r.set(_2.calc(l),S2.calc(l),w2.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new Pe().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function KL(n,e,t,r,i){const o=(r-e)*.5,a=(i-t)*.5,s=n*n,l=n*s;return(2*t-2*r+o+a)*l+(-3*t+3*r-2*o-a)*s+o*n+t}function bie(n,e){const t=1-n;return t*t*e}function Aie(n,e){return 2*(1-n)*n*e}function Eie(n,e){return n*n*e}function d0(n,e,t,r){return bie(n,e)+Aie(n,t)+Eie(n,r)}function Tie(n,e){const t=1-n;return t*t*t*e}function Mie(n,e){const t=1-n;return 3*t*t*n*e}function Cie(n,e){return 3*(1-n)*n*n*e}function Pie(n,e){return n*n*n*e}function h0(n,e,t,r,i){return Tie(n,e)+Mie(n,t)+Cie(n,r)+Pie(n,i)}class WP extends Fc{constructor(e=new zt,t=new zt,r=new zt,i=new zt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new zt){const r=t,i=this.v0,o=this.v1,a=this.v2,s=this.v3;return r.set(h0(e,i.x,o.x,a.x,s.x),h0(e,i.y,o.y,a.y,s.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class u7 extends Fc{constructor(e=new Pe,t=new Pe,r=new Pe,i=new Pe){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new Pe){const r=t,i=this.v0,o=this.v1,a=this.v2,s=this.v3;return r.set(h0(e,i.x,o.x,a.x,s.x),h0(e,i.y,o.y,a.y,s.y),h0(e,i.z,o.z,a.z,s.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class jP extends Fc{constructor(e=new zt,t=new zt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new zt){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new zt){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class c7 extends Fc{constructor(e=new Pe,t=new Pe){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new Pe){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Pe){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class $P extends Fc{constructor(e=new zt,t=new zt,r=new zt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new zt){const r=t,i=this.v0,o=this.v1,a=this.v2;return r.set(d0(e,i.x,o.x,a.x),d0(e,i.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class XP extends Fc{constructor(e=new Pe,t=new Pe,r=new Pe){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new Pe){const r=t,i=this.v0,o=this.v1,a=this.v2;return r.set(d0(e,i.x,o.x,a.x),d0(e,i.y,o.y,a.y),d0(e,i.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class YP extends Fc{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new zt){const r=t,i=this.points,o=(i.length-1)*e,a=Math.floor(o),s=o-a,l=i[a===0?a:a-1],u=i[a],c=i[a>i.length-2?i.length-1:a+1],f=i[a>i.length-3?i.length-1:a+2];return r.set(KL(s,l.x,u.x,c.x,f.x),KL(s,l.y,u.y,c.y,f.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new zt().fromArray(i))}return this}}var X_=Object.freeze({__proto__:null,ArcCurve:s7,CatmullRomCurve3:l7,CubicBezierCurve:WP,CubicBezierCurve3:u7,EllipseCurve:dw,LineCurve:jP,LineCurve3:c7,QuadraticBezierCurve:$P,QuadraticBezierCurve3:XP,SplineCurve:YP});class f7 extends Fc{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new X_[r](t,e))}return this}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let o=0;for(;o<i.length;){if(i[o]>=r){const a=i[o]-r,s=this.curves[o],l=s.getLength(),u=l===0?0:1-a/l;return s.getPointAt(u,t)}o++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,o=this.curves;i<o.length;i++){const a=o[i],s=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,l=a.getPoints(s);for(let u=0;u<l.length;u++){const c=l[u];r&&r.equals(c)||(t.push(c),r=c)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new X_[i.type]().fromJSON(i))}return this}}let k0=class extends f7{constructor(e){super(),this.type="Path",this.currentPoint=new zt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new jP(this.currentPoint.clone(),new zt(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const o=new $P(this.currentPoint.clone(),new zt(e,t),new zt(r,i));return this.curves.push(o),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,o,a){const s=new WP(this.currentPoint.clone(),new zt(e,t),new zt(r,i),new zt(o,a));return this.curves.push(s),this.currentPoint.set(o,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new YP(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,o,a){const s=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+s,t+l,r,i,o,a),this}absarc(e,t,r,i,o,a){return this.absellipse(e,t,r,r,i,o,a),this}ellipse(e,t,r,i,o,a,s,l){const u=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+u,t+c,r,i,o,a,s,l),this}absellipse(e,t,r,i,o,a,s,l){const u=new dw(e,t,r,i,o,a,s,l);if(this.curves.length>0){const f=u.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(u);const c=u.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}};class Gy extends wr{constructor(e=[new zt(0,-.5),new zt(.5,0),new zt(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=qo(i,0,Math.PI*2);const o=[],a=[],s=[],l=[],u=[],c=1/t,f=new Pe,h=new zt,p=new Pe,v=new Pe,S=new Pe;let y=0,_=0;for(let w=0;w<=e.length-1;w++)switch(w){case 0:y=e[w+1].x-e[w].x,_=e[w+1].y-e[w].y,p.x=_*1,p.y=-y,p.z=_*0,S.copy(p),p.normalize(),l.push(p.x,p.y,p.z);break;case e.length-1:l.push(S.x,S.y,S.z);break;default:y=e[w+1].x-e[w].x,_=e[w+1].y-e[w].y,p.x=_*1,p.y=-y,p.z=_*0,v.copy(p),p.x+=S.x,p.y+=S.y,p.z+=S.z,p.normalize(),l.push(p.x,p.y,p.z),S.copy(v)}for(let w=0;w<=t;w++){const A=r+w*c*i,E=Math.sin(A),P=Math.cos(A);for(let O=0;O<=e.length-1;O++){f.x=e[O].x*E,f.y=e[O].y,f.z=e[O].x*P,a.push(f.x,f.y,f.z),h.x=w/t,h.y=O/(e.length-1),s.push(h.x,h.y);const L=l[3*O+0]*E,D=l[3*O+1],F=l[3*O+0]*P;u.push(L,D,F)}}for(let w=0;w<t;w++)for(let A=0;A<e.length-1;A++){const E=A+w*e.length,P=E,O=E+e.length,L=E+e.length+1,D=E+1;o.push(P,O,D),o.push(L,D,O)}this.setIndex(o),this.setAttribute("position",new Ln(a,3)),this.setAttribute("uv",new Ln(s,2)),this.setAttribute("normal",new Ln(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Gy(e.points,e.segments,e.phiStart,e.phiLength)}}class hw extends Gy{constructor(e=1,t=1,r=4,i=8){const o=new k0;o.absarc(0,-t/2,e,Math.PI*1.5,0),o.absarc(0,t/2,e,0,Math.PI*.5),super(o.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:r,radialSegments:i}}static fromJSON(e){return new hw(e.radius,e.length,e.capSegments,e.radialSegments)}}class pw extends wr{constructor(e=1,t=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const o=[],a=[],s=[],l=[],u=new Pe,c=new zt;a.push(0,0,0),s.push(0,0,1),l.push(.5,.5);for(let f=0,h=3;f<=t;f++,h+=3){const p=r+f/t*i;u.x=e*Math.cos(p),u.y=e*Math.sin(p),a.push(u.x,u.y,u.z),s.push(0,0,1),c.x=(a[h]/e+1)/2,c.y=(a[h+1]/e+1)/2,l.push(c.x,c.y)}for(let f=1;f<=t;f++)o.push(f,f+1,0);this.setIndex(o),this.setAttribute("position",new Ln(a,3)),this.setAttribute("normal",new Ln(s,3)),this.setAttribute("uv",new Ln(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new pw(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Kg extends wr{constructor(e=1,t=1,r=1,i=32,o=1,a=!1,s=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:o,openEnded:a,thetaStart:s,thetaLength:l};const u=this;i=Math.floor(i),o=Math.floor(o);const c=[],f=[],h=[],p=[];let v=0;const S=[],y=r/2;let _=0;w(),a===!1&&(e>0&&A(!0),t>0&&A(!1)),this.setIndex(c),this.setAttribute("position",new Ln(f,3)),this.setAttribute("normal",new Ln(h,3)),this.setAttribute("uv",new Ln(p,2));function w(){const E=new Pe,P=new Pe;let O=0;const L=(t-e)/r;for(let D=0;D<=o;D++){const F=[],U=D/o,k=U*(t-e)+e;for(let z=0;z<=i;z++){const W=z/i,j=W*l+s,se=Math.sin(j),Y=Math.cos(j);P.x=k*se,P.y=-U*r+y,P.z=k*Y,f.push(P.x,P.y,P.z),E.set(se,L,Y).normalize(),h.push(E.x,E.y,E.z),p.push(W,1-U),F.push(v++)}S.push(F)}for(let D=0;D<i;D++)for(let F=0;F<o;F++){const U=S[F][D],k=S[F+1][D],z=S[F+1][D+1],W=S[F][D+1];(e>0||F!==0)&&(c.push(U,k,W),O+=3),(t>0||F!==o-1)&&(c.push(k,z,W),O+=3)}u.addGroup(_,O,0),_+=O}function A(E){const P=v,O=new zt,L=new Pe;let D=0;const F=E===!0?e:t,U=E===!0?1:-1;for(let z=1;z<=i;z++)f.push(0,y*U,0),h.push(0,U,0),p.push(.5,.5),v++;const k=v;for(let z=0;z<=i;z++){const j=z/i*l+s,se=Math.cos(j),Y=Math.sin(j);L.x=F*Y,L.y=y*U,L.z=F*se,f.push(L.x,L.y,L.z),h.push(0,U,0),O.x=se*.5+.5,O.y=Y*.5*U+.5,p.push(O.x,O.y),v++}for(let z=0;z<i;z++){const W=P+z,j=k+z;E===!0?c.push(j,j+1,W):c.push(j+1,j,W),D+=3}u.addGroup(_,D,E===!0?1:2),_+=D}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Kg(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class mw extends Kg{constructor(e=1,t=1,r=32,i=1,o=!1,a=0,s=Math.PI*2){super(0,e,t,r,i,o,a,s),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s}}static fromJSON(e){return new mw(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Sh extends wr{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const o=[],a=[];s(i),u(r),c(),this.setAttribute("position",new Ln(o,3)),this.setAttribute("normal",new Ln(o.slice(),3)),this.setAttribute("uv",new Ln(a,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function s(w){const A=new Pe,E=new Pe,P=new Pe;for(let O=0;O<t.length;O+=3)p(t[O+0],A),p(t[O+1],E),p(t[O+2],P),l(A,E,P,w)}function l(w,A,E,P){const O=P+1,L=[];for(let D=0;D<=O;D++){L[D]=[];const F=w.clone().lerp(E,D/O),U=A.clone().lerp(E,D/O),k=O-D;for(let z=0;z<=k;z++)z===0&&D===O?L[D][z]=F:L[D][z]=F.clone().lerp(U,z/k)}for(let D=0;D<O;D++)for(let F=0;F<2*(O-D)-1;F++){const U=Math.floor(F/2);F%2===0?(h(L[D][U+1]),h(L[D+1][U]),h(L[D][U])):(h(L[D][U+1]),h(L[D+1][U+1]),h(L[D+1][U]))}}function u(w){const A=new Pe;for(let E=0;E<o.length;E+=3)A.x=o[E+0],A.y=o[E+1],A.z=o[E+2],A.normalize().multiplyScalar(w),o[E+0]=A.x,o[E+1]=A.y,o[E+2]=A.z}function c(){const w=new Pe;for(let A=0;A<o.length;A+=3){w.x=o[A+0],w.y=o[A+1],w.z=o[A+2];const E=y(w)/2/Math.PI+.5,P=_(w)/Math.PI+.5;a.push(E,1-P)}v(),f()}function f(){for(let w=0;w<a.length;w+=6){const A=a[w+0],E=a[w+2],P=a[w+4],O=Math.max(A,E,P),L=Math.min(A,E,P);O>.9&&L<.1&&(A<.2&&(a[w+0]+=1),E<.2&&(a[w+2]+=1),P<.2&&(a[w+4]+=1))}}function h(w){o.push(w.x,w.y,w.z)}function p(w,A){const E=w*3;A.x=e[E+0],A.y=e[E+1],A.z=e[E+2]}function v(){const w=new Pe,A=new Pe,E=new Pe,P=new Pe,O=new zt,L=new zt,D=new zt;for(let F=0,U=0;F<o.length;F+=9,U+=6){w.set(o[F+0],o[F+1],o[F+2]),A.set(o[F+3],o[F+4],o[F+5]),E.set(o[F+6],o[F+7],o[F+8]),O.set(a[U+0],a[U+1]),L.set(a[U+2],a[U+3]),D.set(a[U+4],a[U+5]),P.copy(w).add(A).add(E).divideScalar(3);const k=y(P);S(O,U+0,w,k),S(L,U+2,A,k),S(D,U+4,E,k)}}function S(w,A,E,P){P<0&&w.x===1&&(a[A]=w.x-1),E.x===0&&E.z===0&&(a[A]=P/2/Math.PI+.5)}function y(w){return Math.atan2(w.z,-w.x)}function _(w){return Math.atan2(-w.y,Math.sqrt(w.x*w.x+w.z*w.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Sh(e.vertices,e.indices,e.radius,e.details)}}class gw extends Sh{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(o,a,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new gw(e.radius,e.detail)}}const yx=new Pe,xx=new Pe,b2=new Pe,_x=new Ll;class d7 extends wr{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),o=Math.cos(Tp*t),a=e.getIndex(),s=e.getAttribute("position"),l=a?a.count:s.count,u=[0,0,0],c=["a","b","c"],f=new Array(3),h={},p=[];for(let v=0;v<l;v+=3){a?(u[0]=a.getX(v),u[1]=a.getX(v+1),u[2]=a.getX(v+2)):(u[0]=v,u[1]=v+1,u[2]=v+2);const{a:S,b:y,c:_}=_x;if(S.fromBufferAttribute(s,u[0]),y.fromBufferAttribute(s,u[1]),_.fromBufferAttribute(s,u[2]),_x.getNormal(b2),f[0]=`${Math.round(S.x*i)},${Math.round(S.y*i)},${Math.round(S.z*i)}`,f[1]=`${Math.round(y.x*i)},${Math.round(y.y*i)},${Math.round(y.z*i)}`,f[2]=`${Math.round(_.x*i)},${Math.round(_.y*i)},${Math.round(_.z*i)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let w=0;w<3;w++){const A=(w+1)%3,E=f[w],P=f[A],O=_x[c[w]],L=_x[c[A]],D=`${E}_${P}`,F=`${P}_${E}`;F in h&&h[F]?(b2.dot(h[F].normal)<=o&&(p.push(O.x,O.y,O.z),p.push(L.x,L.y,L.z)),h[F]=null):D in h||(h[D]={index0:u[w],index1:u[A],normal:b2.clone()})}}for(const v in h)if(h[v]){const{index0:S,index1:y}=h[v];yx.fromBufferAttribute(s,S),xx.fromBufferAttribute(s,y),p.push(yx.x,yx.y,yx.z),p.push(xx.x,xx.y,xx.z)}this.setAttribute("position",new Ln(p,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}let Cp=class extends k0{constructor(e){super(e),this.uuid=cu(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new k0().fromJSON(i))}return this}};const Iie={triangulate:function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let o=h7(n,0,i,t,!0);const a=[];if(!o||o.next===o.prev)return a;let s,l,u,c,f,h,p;if(r&&(o=Die(n,e,o,t)),n.length>80*t){s=u=n[0],l=c=n[1];for(let v=t;v<i;v+=t)f=n[v],h=n[v+1],f<s&&(s=f),h<l&&(l=h),f>u&&(u=f),h>c&&(c=h);p=Math.max(u-s,c-l),p=p!==0?32767/p:0}return F0(o,a,t,s,l,p,0),a}};function h7(n,e,t,r,i){let o,a;if(i===jie(n,e,t,r)>0)for(o=e;o<t;o+=r)a=JL(o,n[o],n[o+1],a);else for(o=t-r;o>=e;o-=r)a=JL(o,n[o],n[o+1],a);return a&&vw(a,a.next)&&(B0(a),a=a.next),a}function Hp(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(vw(t,t.next)||Mo(t.prev,t,t.next)===0)){if(B0(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function F0(n,e,t,r,i,o,a){if(!n)return;!a&&o&&zie(n,r,i,o);let s=n,l,u;for(;n.prev!==n.next;){if(l=n.prev,u=n.next,o?Nie(n,r,i,o):Rie(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(u.i/t|0),B0(n),n=u.next,s=u.next;continue}if(n=u,n===s){a?a===1?(n=Lie(Hp(n),e,t),F0(n,e,t,r,i,o,2)):a===2&&Oie(n,e,t,r,i,o):F0(Hp(n),e,t,r,i,o,1);break}}}function Rie(n){const e=n.prev,t=n,r=n.next;if(Mo(e,t,r)>=0)return!1;const i=e.x,o=t.x,a=r.x,s=e.y,l=t.y,u=r.y,c=i<o?i<a?i:a:o<a?o:a,f=s<l?s<u?s:u:l<u?l:u,h=i>o?i>a?i:a:o>a?o:a,p=s>l?s>u?s:u:l>u?l:u;let v=r.next;for(;v!==e;){if(v.x>=c&&v.x<=h&&v.y>=f&&v.y<=p&&ng(i,s,o,l,a,u,v.x,v.y)&&Mo(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function Nie(n,e,t,r){const i=n.prev,o=n,a=n.next;if(Mo(i,o,a)>=0)return!1;const s=i.x,l=o.x,u=a.x,c=i.y,f=o.y,h=a.y,p=s<l?s<u?s:u:l<u?l:u,v=c<f?c<h?c:h:f<h?f:h,S=s>l?s>u?s:u:l>u?l:u,y=c>f?c>h?c:h:f>h?f:h,_=TC(p,v,e,t,r),w=TC(S,y,e,t,r);let A=n.prevZ,E=n.nextZ;for(;A&&A.z>=_&&E&&E.z<=w;){if(A.x>=p&&A.x<=S&&A.y>=v&&A.y<=y&&A!==i&&A!==a&&ng(s,c,l,f,u,h,A.x,A.y)&&Mo(A.prev,A,A.next)>=0||(A=A.prevZ,E.x>=p&&E.x<=S&&E.y>=v&&E.y<=y&&E!==i&&E!==a&&ng(s,c,l,f,u,h,E.x,E.y)&&Mo(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;A&&A.z>=_;){if(A.x>=p&&A.x<=S&&A.y>=v&&A.y<=y&&A!==i&&A!==a&&ng(s,c,l,f,u,h,A.x,A.y)&&Mo(A.prev,A,A.next)>=0)return!1;A=A.prevZ}for(;E&&E.z<=w;){if(E.x>=p&&E.x<=S&&E.y>=v&&E.y<=y&&E!==i&&E!==a&&ng(s,c,l,f,u,h,E.x,E.y)&&Mo(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function Lie(n,e,t){let r=n;do{const i=r.prev,o=r.next.next;!vw(i,o)&&p7(i,r,r.next,o)&&U0(i,o)&&U0(o,i)&&(e.push(i.i/t|0),e.push(r.i/t|0),e.push(o.i/t|0),B0(r),B0(r.next),r=n=o),r=r.next}while(r!==n);return Hp(r)}function Oie(n,e,t,r,i,o){let a=n;do{let s=a.next.next;for(;s!==a.prev;){if(a.i!==s.i&&Gie(a,s)){let l=m7(a,s);a=Hp(a,a.next),l=Hp(l,l.next),F0(a,e,t,r,i,o,0),F0(l,e,t,r,i,o,0);return}s=s.next}a=a.next}while(a!==n)}function Die(n,e,t,r){const i=[];let o,a,s,l,u;for(o=0,a=e.length;o<a;o++)s=e[o]*r,l=o<a-1?e[o+1]*r:n.length,u=h7(n,s,l,r,!1),u===u.next&&(u.steiner=!0),i.push(Vie(u));for(i.sort(kie),o=0;o<i.length;o++)t=Fie(i[o],t);return t}function kie(n,e){return n.x-e.x}function Fie(n,e){const t=Uie(n,e);if(!t)return e;const r=m7(t,n);return Hp(r,r.next),Hp(t,t.next)}function Uie(n,e){let t=e,r=-1/0,i;const o=n.x,a=n.y;do{if(a<=t.y&&a>=t.next.y&&t.next.y!==t.y){const h=t.x+(a-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(h<=o&&h>r&&(r=h,i=t.x<t.next.x?t:t.next,h===o))return i}t=t.next}while(t!==e);if(!i)return null;const s=i,l=i.x,u=i.y;let c=1/0,f;t=i;do o>=t.x&&t.x>=l&&o!==t.x&&ng(a<u?o:r,a,l,u,a<u?r:o,a,t.x,t.y)&&(f=Math.abs(a-t.y)/(o-t.x),U0(t,n)&&(f<c||f===c&&(t.x>i.x||t.x===i.x&&Bie(i,t)))&&(i=t,c=f)),t=t.next;while(t!==s);return i}function Bie(n,e){return Mo(n.prev,n,e.prev)<0&&Mo(e.next,n,n.next)<0}function zie(n,e,t,r){let i=n;do i.z===0&&(i.z=TC(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,Hie(i)}function Hie(n){let e,t,r,i,o,a,s,l,u=1;do{for(t=n,n=null,o=null,a=0;t;){for(a++,r=t,s=0,e=0;e<u&&(s++,r=r.nextZ,!!r);e++);for(l=u;s>0||l>0&&r;)s!==0&&(l===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,s--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:n=i,i.prevZ=o,o=i;t=r}o.nextZ=null,u*=2}while(a>1);return n}function TC(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function Vie(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function ng(n,e,t,r,i,o,a,s){return(i-a)*(e-s)>=(n-a)*(o-s)&&(n-a)*(r-s)>=(t-a)*(e-s)&&(t-a)*(o-s)>=(i-a)*(r-s)}function Gie(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!qie(n,e)&&(U0(n,e)&&U0(e,n)&&Wie(n,e)&&(Mo(n.prev,n,e.prev)||Mo(n,e.prev,e))||vw(n,e)&&Mo(n.prev,n,n.next)>0&&Mo(e.prev,e,e.next)>0)}function Mo(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function vw(n,e){return n.x===e.x&&n.y===e.y}function p7(n,e,t,r){const i=wx(Mo(n,e,t)),o=wx(Mo(n,e,r)),a=wx(Mo(t,r,n)),s=wx(Mo(t,r,e));return!!(i!==o&&a!==s||i===0&&Sx(n,t,e)||o===0&&Sx(n,r,e)||a===0&&Sx(t,n,r)||s===0&&Sx(t,e,r))}function Sx(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function wx(n){return n>0?1:n<0?-1:0}function qie(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&p7(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function U0(n,e){return Mo(n.prev,n,n.next)<0?Mo(n,e,n.next)>=0&&Mo(n,n.prev,e)>=0:Mo(n,e,n.prev)<0||Mo(n,n.next,e)<0}function Wie(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,o=(n.y+e.y)/2;do t.y>o!=t.next.y>o&&t.next.y!==t.y&&i<(t.next.x-t.x)*(o-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function m7(n,e){const t=new MC(n.i,n.x,n.y),r=new MC(e.i,e.x,e.y),i=n.next,o=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,o.next=r,r.prev=o,r}function JL(n,e,t,r){const i=new MC(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function B0(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function MC(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function jie(n,e,t,r){let i=0;for(let o=e,a=t-r;o<t;o+=r)i+=(n[a]-n[o])*(n[o+1]+n[a+1]),a=o;return i}class yf{static area(e){const t=e.length;let r=0;for(let i=t-1,o=0;o<t;i=o++)r+=e[i].x*e[o].y-e[o].x*e[i].y;return r*.5}static isClockWise(e){return yf.area(e)<0}static triangulateShape(e,t){const r=[],i=[],o=[];ZL(e),QL(r,e);let a=e.length;t.forEach(ZL);for(let l=0;l<t.length;l++)i.push(a),a+=t[l].length,QL(r,t[l]);const s=Iie.triangulate(r,i);for(let l=0;l<s.length;l+=3)o.push(s.slice(l,l+3));return o}}function ZL(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function QL(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class yw extends wr{constructor(e=new Cp([new zt(.5,.5),new zt(-.5,.5),new zt(-.5,-.5),new zt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],o=[];for(let s=0,l=e.length;s<l;s++){const u=e[s];a(u)}this.setAttribute("position",new Ln(i,3)),this.setAttribute("uv",new Ln(o,2)),this.computeVertexNormals();function a(s){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,c=t.steps!==void 0?t.steps:1,f=t.depth!==void 0?t.depth:1;let h=t.bevelEnabled!==void 0?t.bevelEnabled:!0,p=t.bevelThickness!==void 0?t.bevelThickness:.2,v=t.bevelSize!==void 0?t.bevelSize:p-.1,S=t.bevelOffset!==void 0?t.bevelOffset:0,y=t.bevelSegments!==void 0?t.bevelSegments:3;const _=t.extrudePath,w=t.UVGenerator!==void 0?t.UVGenerator:$ie;let A,E=!1,P,O,L,D;_&&(A=_.getSpacedPoints(c),E=!0,h=!1,P=_.computeFrenetFrames(c,!1),O=new Pe,L=new Pe,D=new Pe),h||(y=0,p=0,v=0,S=0);const F=s.extractPoints(u);let U=F.shape;const k=F.holes;if(!yf.isClockWise(U)){U=U.reverse();for(let Te=0,Je=k.length;Te<Je;Te++){const Se=k[Te];yf.isClockWise(Se)&&(k[Te]=Se.reverse())}}const W=yf.triangulateShape(U,k),j=U;for(let Te=0,Je=k.length;Te<Je;Te++){const Se=k[Te];U=U.concat(Se)}function se(Te,Je,Se){return Je||console.error("THREE.ExtrudeGeometry: vec does not exist"),Te.clone().addScaledVector(Je,Se)}const Y=U.length,Q=W.length;function X(Te,Je,Se){let Ge,ye,Ct;const ft=Te.x-Je.x,mt=Te.y-Je.y,lt=Se.x-Te.x,ve=Se.y-Te.y,le=ft*ft+mt*mt,He=ft*ve-mt*lt;if(Math.abs(He)>Number.EPSILON){const rt=Math.sqrt(le),vt=Math.sqrt(lt*lt+ve*ve),ht=Je.x-mt/rt,qt=Je.y+ft/rt,Ft=Se.x-ve/vt,Rt=Se.y+lt/vt,tn=((Ft-ht)*ve-(Rt-qt)*lt)/(ft*ve-mt*lt);Ge=ht+ft*tn-Te.x,ye=qt+mt*tn-Te.y;const it=Ge*Ge+ye*ye;if(it<=2)return new zt(Ge,ye);Ct=Math.sqrt(it/2)}else{let rt=!1;ft>Number.EPSILON?lt>Number.EPSILON&&(rt=!0):ft<-Number.EPSILON?lt<-Number.EPSILON&&(rt=!0):Math.sign(mt)===Math.sign(ve)&&(rt=!0),rt?(Ge=-mt,ye=ft,Ct=Math.sqrt(le)):(Ge=ft,ye=mt,Ct=Math.sqrt(le/2))}return new zt(Ge/Ct,ye/Ct)}const Z=[];for(let Te=0,Je=j.length,Se=Je-1,Ge=Te+1;Te<Je;Te++,Se++,Ge++)Se===Je&&(Se=0),Ge===Je&&(Ge=0),Z[Te]=X(j[Te],j[Se],j[Ge]);const oe=[];let ee,G=Z.concat();for(let Te=0,Je=k.length;Te<Je;Te++){const Se=k[Te];ee=[];for(let Ge=0,ye=Se.length,Ct=ye-1,ft=Ge+1;Ge<ye;Ge++,Ct++,ft++)Ct===ye&&(Ct=0),ft===ye&&(ft=0),ee[Ge]=X(Se[Ge],Se[Ct],Se[ft]);oe.push(ee),G=G.concat(ee)}for(let Te=0;Te<y;Te++){const Je=Te/y,Se=p*Math.cos(Je*Math.PI/2),Ge=v*Math.sin(Je*Math.PI/2)+S;for(let ye=0,Ct=j.length;ye<Ct;ye++){const ft=se(j[ye],Z[ye],Ge);be(ft.x,ft.y,-Se)}for(let ye=0,Ct=k.length;ye<Ct;ye++){const ft=k[ye];ee=oe[ye];for(let mt=0,lt=ft.length;mt<lt;mt++){const ve=se(ft[mt],ee[mt],Ge);be(ve.x,ve.y,-Se)}}}const ne=v+S;for(let Te=0;Te<Y;Te++){const Je=h?se(U[Te],G[Te],ne):U[Te];E?(L.copy(P.normals[0]).multiplyScalar(Je.x),O.copy(P.binormals[0]).multiplyScalar(Je.y),D.copy(A[0]).add(L).add(O),be(D.x,D.y,D.z)):be(Je.x,Je.y,0)}for(let Te=1;Te<=c;Te++)for(let Je=0;Je<Y;Je++){const Se=h?se(U[Je],G[Je],ne):U[Je];E?(L.copy(P.normals[Te]).multiplyScalar(Se.x),O.copy(P.binormals[Te]).multiplyScalar(Se.y),D.copy(A[Te]).add(L).add(O),be(D.x,D.y,D.z)):be(Se.x,Se.y,f/c*Te)}for(let Te=y-1;Te>=0;Te--){const Je=Te/y,Se=p*Math.cos(Je*Math.PI/2),Ge=v*Math.sin(Je*Math.PI/2)+S;for(let ye=0,Ct=j.length;ye<Ct;ye++){const ft=se(j[ye],Z[ye],Ge);be(ft.x,ft.y,f+Se)}for(let ye=0,Ct=k.length;ye<Ct;ye++){const ft=k[ye];ee=oe[ye];for(let mt=0,lt=ft.length;mt<lt;mt++){const ve=se(ft[mt],ee[mt],Ge);E?be(ve.x,ve.y+A[c-1].y,A[c-1].x+Se):be(ve.x,ve.y,f+Se)}}}te(),de();function te(){const Te=i.length/3;if(h){let Je=0,Se=Y*Je;for(let Ge=0;Ge<Q;Ge++){const ye=W[Ge];Ie(ye[2]+Se,ye[1]+Se,ye[0]+Se)}Je=c+y*2,Se=Y*Je;for(let Ge=0;Ge<Q;Ge++){const ye=W[Ge];Ie(ye[0]+Se,ye[1]+Se,ye[2]+Se)}}else{for(let Je=0;Je<Q;Je++){const Se=W[Je];Ie(Se[2],Se[1],Se[0])}for(let Je=0;Je<Q;Je++){const Se=W[Je];Ie(Se[0]+Y*c,Se[1]+Y*c,Se[2]+Y*c)}}r.addGroup(Te,i.length/3-Te,0)}function de(){const Te=i.length/3;let Je=0;me(j,Je),Je+=j.length;for(let Se=0,Ge=k.length;Se<Ge;Se++){const ye=k[Se];me(ye,Je),Je+=ye.length}r.addGroup(Te,i.length/3-Te,1)}function me(Te,Je){let Se=Te.length;for(;--Se>=0;){const Ge=Se;let ye=Se-1;ye<0&&(ye=Te.length-1);for(let Ct=0,ft=c+y*2;Ct<ft;Ct++){const mt=Y*Ct,lt=Y*(Ct+1),ve=Je+Ge+mt,le=Je+ye+mt,He=Je+ye+lt,rt=Je+Ge+lt;Ee(ve,le,He,rt)}}}function be(Te,Je,Se){l.push(Te),l.push(Je),l.push(Se)}function Ie(Te,Je,Se){Xe(Te),Xe(Je),Xe(Se);const Ge=i.length/3,ye=w.generateTopUV(r,i,Ge-3,Ge-2,Ge-1);tt(ye[0]),tt(ye[1]),tt(ye[2])}function Ee(Te,Je,Se,Ge){Xe(Te),Xe(Je),Xe(Ge),Xe(Je),Xe(Se),Xe(Ge);const ye=i.length/3,Ct=w.generateSideWallUV(r,i,ye-6,ye-3,ye-2,ye-1);tt(Ct[0]),tt(Ct[1]),tt(Ct[3]),tt(Ct[1]),tt(Ct[2]),tt(Ct[3])}function Xe(Te){i.push(l[Te*3+0]),i.push(l[Te*3+1]),i.push(l[Te*3+2])}function tt(Te){o.push(Te.x),o.push(Te.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return Xie(t,r,e)}static fromJSON(e,t){const r=[];for(let o=0,a=e.shapes.length;o<a;o++){const s=t[e.shapes[o]];r.push(s)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new X_[i.type]().fromJSON(i)),new yw(r,e.options)}}const $ie={generateTopUV:function(n,e,t,r,i){const o=e[t*3],a=e[t*3+1],s=e[r*3],l=e[r*3+1],u=e[i*3],c=e[i*3+1];return[new zt(o,a),new zt(s,l),new zt(u,c)]},generateSideWallUV:function(n,e,t,r,i,o){const a=e[t*3],s=e[t*3+1],l=e[t*3+2],u=e[r*3],c=e[r*3+1],f=e[r*3+2],h=e[i*3],p=e[i*3+1],v=e[i*3+2],S=e[o*3],y=e[o*3+1],_=e[o*3+2];return Math.abs(s-c)<Math.abs(a-u)?[new zt(a,1-l),new zt(u,1-f),new zt(h,1-v),new zt(S,1-_)]:[new zt(s,1-l),new zt(c,1-f),new zt(p,1-v),new zt(y,1-_)]}};function Xie(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const o=n[r];t.shapes.push(o.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class qy extends Sh{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,o,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new qy(e.radius,e.detail)}}class Wy extends Sh{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Wy(e.radius,e.detail)}}class xw extends wr{constructor(e=.5,t=1,r=32,i=1,o=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:o,thetaLength:a},r=Math.max(3,r),i=Math.max(1,i);const s=[],l=[],u=[],c=[];let f=e;const h=(t-e)/i,p=new Pe,v=new zt;for(let S=0;S<=i;S++){for(let y=0;y<=r;y++){const _=o+y/r*a;p.x=f*Math.cos(_),p.y=f*Math.sin(_),l.push(p.x,p.y,p.z),u.push(0,0,1),v.x=(p.x/t+1)/2,v.y=(p.y/t+1)/2,c.push(v.x,v.y)}f+=h}for(let S=0;S<i;S++){const y=S*(r+1);for(let _=0;_<r;_++){const w=_+y,A=w,E=w+r+1,P=w+r+2,O=w+1;s.push(A,E,O),s.push(E,P,O)}}this.setIndex(s),this.setAttribute("position",new Ln(l,3)),this.setAttribute("normal",new Ln(u,3)),this.setAttribute("uv",new Ln(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xw(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class _w extends wr{constructor(e=new Cp([new zt(0,.5),new zt(-.5,-.5),new zt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],o=[],a=[];let s=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let c=0;c<e.length;c++)u(e[c]),this.addGroup(s,l,c),s+=l,l=0;this.setIndex(r),this.setAttribute("position",new Ln(i,3)),this.setAttribute("normal",new Ln(o,3)),this.setAttribute("uv",new Ln(a,2));function u(c){const f=i.length/3,h=c.extractPoints(t);let p=h.shape;const v=h.holes;yf.isClockWise(p)===!1&&(p=p.reverse());for(let y=0,_=v.length;y<_;y++){const w=v[y];yf.isClockWise(w)===!0&&(v[y]=w.reverse())}const S=yf.triangulateShape(p,v);for(let y=0,_=v.length;y<_;y++){const w=v[y];p=p.concat(w)}for(let y=0,_=p.length;y<_;y++){const w=p[y];i.push(w.x,w.y,0),o.push(0,0,1),a.push(w.x,w.y)}for(let y=0,_=S.length;y<_;y++){const w=S[y],A=w[0]+f,E=w[1]+f,P=w[2]+f;r.push(A,E,P),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return Yie(t,e)}static fromJSON(e,t){const r=[];for(let i=0,o=e.shapes.length;i<o;i++){const a=t[e.shapes[i]];r.push(a)}return new _w(r,e.curveSegments)}}function Yie(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class jy extends wr{constructor(e=1,t=32,r=16,i=0,o=Math.PI*2,a=0,s=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:o,thetaStart:a,thetaLength:s},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(a+s,Math.PI);let u=0;const c=[],f=new Pe,h=new Pe,p=[],v=[],S=[],y=[];for(let _=0;_<=r;_++){const w=[],A=_/r;let E=0;_===0&&a===0?E=.5/t:_===r&&l===Math.PI&&(E=-.5/t);for(let P=0;P<=t;P++){const O=P/t;f.x=-e*Math.cos(i+O*o)*Math.sin(a+A*s),f.y=e*Math.cos(a+A*s),f.z=e*Math.sin(i+O*o)*Math.sin(a+A*s),v.push(f.x,f.y,f.z),h.copy(f).normalize(),S.push(h.x,h.y,h.z),y.push(O+E,1-A),w.push(u++)}c.push(w)}for(let _=0;_<r;_++)for(let w=0;w<t;w++){const A=c[_][w+1],E=c[_][w],P=c[_+1][w],O=c[_+1][w+1];(_!==0||a>0)&&p.push(A,E,O),(_!==r-1||l<Math.PI)&&p.push(E,P,O)}this.setIndex(p),this.setAttribute("position",new Ln(v,3)),this.setAttribute("normal",new Ln(S,3)),this.setAttribute("uv",new Ln(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new jy(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Sw extends Sh{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Sw(e.radius,e.detail)}}class ww extends wr{constructor(e=1,t=.4,r=12,i=48,o=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:o},r=Math.floor(r),i=Math.floor(i);const a=[],s=[],l=[],u=[],c=new Pe,f=new Pe,h=new Pe;for(let p=0;p<=r;p++)for(let v=0;v<=i;v++){const S=v/i*o,y=p/r*Math.PI*2;f.x=(e+t*Math.cos(y))*Math.cos(S),f.y=(e+t*Math.cos(y))*Math.sin(S),f.z=t*Math.sin(y),s.push(f.x,f.y,f.z),c.x=e*Math.cos(S),c.y=e*Math.sin(S),h.subVectors(f,c).normalize(),l.push(h.x,h.y,h.z),u.push(v/i),u.push(p/r)}for(let p=1;p<=r;p++)for(let v=1;v<=i;v++){const S=(i+1)*p+v-1,y=(i+1)*(p-1)+v-1,_=(i+1)*(p-1)+v,w=(i+1)*p+v;a.push(S,y,w),a.push(y,_,w)}this.setIndex(a),this.setAttribute("position",new Ln(s,3)),this.setAttribute("normal",new Ln(l,3)),this.setAttribute("uv",new Ln(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ww(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class bw extends wr{constructor(e=1,t=.4,r=64,i=8,o=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:o,q:a},r=Math.floor(r),i=Math.floor(i);const s=[],l=[],u=[],c=[],f=new Pe,h=new Pe,p=new Pe,v=new Pe,S=new Pe,y=new Pe,_=new Pe;for(let A=0;A<=r;++A){const E=A/r*o*Math.PI*2;w(E,o,a,e,p),w(E+.01,o,a,e,v),y.subVectors(v,p),_.addVectors(v,p),S.crossVectors(y,_),_.crossVectors(S,y),S.normalize(),_.normalize();for(let P=0;P<=i;++P){const O=P/i*Math.PI*2,L=-t*Math.cos(O),D=t*Math.sin(O);f.x=p.x+(L*_.x+D*S.x),f.y=p.y+(L*_.y+D*S.y),f.z=p.z+(L*_.z+D*S.z),l.push(f.x,f.y,f.z),h.subVectors(f,p).normalize(),u.push(h.x,h.y,h.z),c.push(A/r),c.push(P/i)}}for(let A=1;A<=r;A++)for(let E=1;E<=i;E++){const P=(i+1)*(A-1)+(E-1),O=(i+1)*A+(E-1),L=(i+1)*A+E,D=(i+1)*(A-1)+E;s.push(P,O,D),s.push(O,L,D)}this.setIndex(s),this.setAttribute("position",new Ln(l,3)),this.setAttribute("normal",new Ln(u,3)),this.setAttribute("uv",new Ln(c,2));function w(A,E,P,O,L){const D=Math.cos(A),F=Math.sin(A),U=P/E*A,k=Math.cos(U);L.x=O*(2+k)*.5*D,L.y=O*(2+k)*F*.5,L.z=O*Math.sin(U)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new bw(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Aw extends wr{constructor(e=new XP(new Pe(-1,-1,0),new Pe(-1,1,0),new Pe(1,1,0)),t=64,r=1,i=8,o=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:o};const a=e.computeFrenetFrames(t,o);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const s=new Pe,l=new Pe,u=new zt;let c=new Pe;const f=[],h=[],p=[],v=[];S(),this.setIndex(v),this.setAttribute("position",new Ln(f,3)),this.setAttribute("normal",new Ln(h,3)),this.setAttribute("uv",new Ln(p,2));function S(){for(let A=0;A<t;A++)y(A);y(o===!1?t:0),w(),_()}function y(A){c=e.getPointAt(A/t,c);const E=a.normals[A],P=a.binormals[A];for(let O=0;O<=i;O++){const L=O/i*Math.PI*2,D=Math.sin(L),F=-Math.cos(L);l.x=F*E.x+D*P.x,l.y=F*E.y+D*P.y,l.z=F*E.z+D*P.z,l.normalize(),h.push(l.x,l.y,l.z),s.x=c.x+r*l.x,s.y=c.y+r*l.y,s.z=c.z+r*l.z,f.push(s.x,s.y,s.z)}}function _(){for(let A=1;A<=t;A++)for(let E=1;E<=i;E++){const P=(i+1)*(A-1)+(E-1),O=(i+1)*A+(E-1),L=(i+1)*A+E,D=(i+1)*(A-1)+E;v.push(P,O,D),v.push(O,L,D)}}function w(){for(let A=0;A<=t;A++)for(let E=0;E<=i;E++)u.x=A/t,u.y=E/i,p.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Aw(new X_[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class g7 extends wr{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new Pe,o=new Pe;if(e.index!==null){const a=e.attributes.position,s=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:s.count,materialIndex:0}]);for(let u=0,c=l.length;u<c;++u){const f=l[u],h=f.start,p=f.count;for(let v=h,S=h+p;v<S;v+=3)for(let y=0;y<3;y++){const _=s.getX(v+y),w=s.getX(v+(y+1)%3);i.fromBufferAttribute(a,_),o.fromBufferAttribute(a,w),eO(i,o,r)===!0&&(t.push(i.x,i.y,i.z),t.push(o.x,o.y,o.z))}}}else{const a=e.attributes.position;for(let s=0,l=a.count/3;s<l;s++)for(let u=0;u<3;u++){const c=3*s+u,f=3*s+(u+1)%3;i.fromBufferAttribute(a,c),o.fromBufferAttribute(a,f),eO(i,o,r)===!0&&(t.push(i.x,i.y,i.z),t.push(o.x,o.y,o.z))}}this.setAttribute("position",new Ln(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function eO(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var tO=Object.freeze({__proto__:null,BoxGeometry:Yp,CapsuleGeometry:hw,CircleGeometry:pw,ConeGeometry:mw,CylinderGeometry:Kg,DodecahedronGeometry:gw,EdgesGeometry:d7,ExtrudeGeometry:yw,IcosahedronGeometry:qy,LatheGeometry:Gy,OctahedronGeometry:Wy,PlaneGeometry:_h,PolyhedronGeometry:Sh,RingGeometry:xw,ShapeGeometry:_w,SphereGeometry:jy,TetrahedronGeometry:Sw,TorusGeometry:ww,TorusKnotGeometry:bw,TubeGeometry:Aw,WireframeGeometry:g7});class v7 extends ds{static get type(){return"ShadowMaterial"}constructor(e){super(),this.isShadowMaterial=!0,this.color=new xn(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class y7 extends ol{static get type(){return"RawShaderMaterial"}constructor(e){super(e),this.isRawShaderMaterial=!0}}class KP extends ds{static get type(){return"MeshStandardMaterial"}constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.color=new xn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xh,this.normalScale=new zt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new du,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class x7 extends KP{static get type(){return"MeshPhysicalMaterial"}constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new zt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return qo(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new xn(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new xn(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new xn(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class _7 extends ds{static get type(){return"MeshPhongMaterial"}constructor(e){super(),this.isMeshPhongMaterial=!0,this.color=new xn(16777215),this.specular=new xn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xh,this.normalScale=new zt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new du,this.combine=Dy,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class S7 extends ds{static get type(){return"MeshToonMaterial"}constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.color=new xn(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xh,this.normalScale=new zt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class w7 extends ds{static get type(){return"MeshNormalMaterial"}constructor(e){super(),this.isMeshNormalMaterial=!0,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xh,this.normalScale=new zt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class b7 extends ds{static get type(){return"MeshLambertMaterial"}constructor(e){super(),this.isMeshLambertMaterial=!0,this.color=new xn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xh,this.normalScale=new zt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new du,this.combine=Dy,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class A7 extends ds{static get type(){return"MeshMatcapMaterial"}constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.color=new xn(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xh,this.normalScale=new zt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class E7 extends al{static get type(){return"LineDashedMaterial"}constructor(e){super(),this.isLineDashedMaterial=!0,this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function gp(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function T7(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function M7(n){function e(i,o){return n[i]-n[o]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function CC(n,e,t){const r=n.length,i=new n.constructor(r);for(let o=0,a=0;a!==r;++o){const s=t[o]*e;for(let l=0;l!==e;++l)i[a++]=n[s+l]}return i}function JP(n,e,t,r){let i=1,o=n[0];for(;o!==void 0&&o[r]===void 0;)o=n[i++];if(o===void 0)return;let a=o[r];if(a!==void 0)if(Array.isArray(a))do a=o[r],a!==void 0&&(e.push(o.time),t.push.apply(t,a)),o=n[i++];while(o!==void 0);else if(a.toArray!==void 0)do a=o[r],a!==void 0&&(e.push(o.time),a.toArray(t,t.length)),o=n[i++];while(o!==void 0);else do a=o[r],a!==void 0&&(e.push(o.time),t.push(a)),o=n[i++];while(o!==void 0)}function Kie(n,e,t,r,i=30){const o=n.clone();o.name=e;const a=[];for(let l=0;l<o.tracks.length;++l){const u=o.tracks[l],c=u.getValueSize(),f=[],h=[];for(let p=0;p<u.times.length;++p){const v=u.times[p]*i;if(!(v<t||v>=r)){f.push(u.times[p]);for(let S=0;S<c;++S)h.push(u.values[p*c+S])}}f.length!==0&&(u.times=gp(f,u.times.constructor),u.values=gp(h,u.values.constructor),a.push(u))}o.tracks=a;let s=1/0;for(let l=0;l<o.tracks.length;++l)s>o.tracks[l].times[0]&&(s=o.tracks[l].times[0]);for(let l=0;l<o.tracks.length;++l)o.tracks[l].shift(-1*s);return o.resetDuration(),o}function Jie(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,o=e/r;for(let a=0;a<i;++a){const s=t.tracks[a],l=s.ValueTypeName;if(l==="bool"||l==="string")continue;const u=n.tracks.find(function(_){return _.name===s.name&&_.ValueTypeName===l});if(u===void 0)continue;let c=0;const f=s.getValueSize();s.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=f/3);let h=0;const p=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=p/3);const v=s.times.length-1;let S;if(o<=s.times[0]){const _=c,w=f-c;S=s.values.slice(_,w)}else if(o>=s.times[v]){const _=v*f+c,w=_+f-c;S=s.values.slice(_,w)}else{const _=s.createInterpolant(),w=c,A=f-c;_.evaluate(o),S=_.resultBuffer.slice(w,A)}l==="quaternion"&&new kl().fromArray(S).normalize().conjugate().toArray(S);const y=u.times.length;for(let _=0;_<y;++_){const w=_*p+h;if(l==="quaternion")kl.multiplyQuaternionsFlat(u.values,w,S,0,u.values,w);else{const A=p-h*2;for(let E=0;E<A;++E)u.values[w+E]-=S[E]}}}return n.blendMode=PP,n}const Zie={convertArray:gp,isTypedArray:T7,getKeyframeOrder:M7,sortedArray:CC,flattenJSON:JP,subclip:Kie,makeClipAdditive:Jie};class $y{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],o=t[r-1];e:{t:{let a;n:{i:if(!(e<i)){for(let s=r+2;;){if(i===void 0){if(e<o)break i;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===s)break;if(o=i,i=t[++r],e<i)break t}a=t.length;break n}if(!(e>=o)){const s=t[1];e<s&&(r=2,o=s);for(let l=r-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=o,o=t[--r-1],e>=o)break t}a=r,r=0;break n}break e}for(;r<a;){const s=r+a>>>1;e<t[s]?a=s:r=s+1}if(i=t[r],o=t[r-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,o,i)}return this.interpolate_(r,o,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,o=e*i;for(let a=0;a!==i;++a)t[a]=r[o+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class C7 extends $y{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:dp,endingEnd:dp}}intervalChanged_(e,t,r){const i=this.parameterPositions;let o=e-2,a=e+1,s=i[o],l=i[a];if(s===void 0)switch(this.getSettings_().endingStart){case hp:o=e,s=2*t-r;break;case N0:o=i.length-2,s=t+i[o]-i[o+1];break;default:o=e,s=r}if(l===void 0)switch(this.getSettings_().endingEnd){case hp:a=e,l=2*r-t;break;case N0:a=1,l=r+i[1]-i[0];break;default:a=e-1,l=t}const u=(r-t)*.5,c=this.valueSize;this._weightPrev=u/(t-s),this._weightNext=u/(l-r),this._offsetPrev=o*c,this._offsetNext=a*c}interpolate_(e,t,r,i){const o=this.resultBuffer,a=this.sampleValues,s=this.valueSize,l=e*s,u=l-s,c=this._offsetPrev,f=this._offsetNext,h=this._weightPrev,p=this._weightNext,v=(r-t)/(i-t),S=v*v,y=S*v,_=-h*y+2*h*S-h*v,w=(1+h)*y+(-1.5-2*h)*S+(-.5+h)*v+1,A=(-1-p)*y+(1.5+p)*S+.5*v,E=p*y-p*S;for(let P=0;P!==s;++P)o[P]=_*a[c+P]+w*a[u+P]+A*a[l+P]+E*a[f+P];return o}}class ZP extends $y{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const o=this.resultBuffer,a=this.sampleValues,s=this.valueSize,l=e*s,u=l-s,c=(r-t)/(i-t),f=1-c;for(let h=0;h!==s;++h)o[h]=a[u+h]*f+a[l+h]*c;return o}}class P7 extends $y{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Uc{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=gp(t,this.TimeBufferType),this.values=gp(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:gp(e.times,Array),values:gp(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new P7(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new ZP(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new C7(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case R0:t=this.InterpolantFactoryMethodDiscrete;break;case W_:t=this.InterpolantFactoryMethodLinear;break;case e_:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return R0;case this.InterpolantFactoryMethodLinear:return W_;case this.InterpolantFactoryMethodSmooth:return e_}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let o=0,a=i-1;for(;o!==i&&r[o]<e;)++o;for(;a!==-1&&r[a]>t;)--a;if(++a,o!==0||a!==i){o>=a&&(a=Math.max(a,1),o=a-1);const s=this.getValueSize();this.times=r.slice(o,a),this.values=this.values.slice(o*s,a*s)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,o=r.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let s=0;s!==o;s++){const l=r[s];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,l),e=!1;break}if(a!==null&&a>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,l,a),e=!1;break}a=l}if(i!==void 0&&T7(i))for(let s=0,l=i.length;s!==l;++s){const u=i[s];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,u),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===e_,o=e.length-1;let a=1;for(let s=1;s<o;++s){let l=!1;const u=e[s],c=e[s+1];if(u!==c&&(s!==1||u!==e[0]))if(i)l=!0;else{const f=s*r,h=f-r,p=f+r;for(let v=0;v!==r;++v){const S=t[f+v];if(S!==t[h+v]||S!==t[p+v]){l=!0;break}}}if(l){if(s!==a){e[a]=e[s];const f=s*r,h=a*r;for(let p=0;p!==r;++p)t[h+p]=t[f+p]}++a}}if(o>0){e[a]=e[o];for(let s=o*r,l=a*r,u=0;u!==r;++u)t[l+u]=t[s+u];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*r)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Uc.prototype.TimeBufferType=Float32Array;Uc.prototype.ValueBufferType=Float32Array;Uc.prototype.DefaultInterpolation=W_;class Kp extends Uc{constructor(e,t,r){super(e,t,r)}}Kp.prototype.ValueTypeName="bool";Kp.prototype.ValueBufferType=Array;Kp.prototype.DefaultInterpolation=R0;Kp.prototype.InterpolantFactoryMethodLinear=void 0;Kp.prototype.InterpolantFactoryMethodSmooth=void 0;class QP extends Uc{}QP.prototype.ValueTypeName="color";class z0 extends Uc{}z0.prototype.ValueTypeName="number";class I7 extends $y{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const o=this.resultBuffer,a=this.sampleValues,s=this.valueSize,l=(r-t)/(i-t);let u=e*s;for(let c=u+s;u!==c;u+=4)kl.slerpFlat(o,0,a,u-s,a,u,l);return o}}class Xy extends Uc{InterpolantFactoryMethodLinear(e){return new I7(this.times,this.values,this.getValueSize(),e)}}Xy.prototype.ValueTypeName="quaternion";Xy.prototype.InterpolantFactoryMethodSmooth=void 0;class Jp extends Uc{constructor(e,t,r){super(e,t,r)}}Jp.prototype.ValueTypeName="string";Jp.prototype.ValueBufferType=Array;Jp.prototype.DefaultInterpolation=R0;Jp.prototype.InterpolantFactoryMethodLinear=void 0;Jp.prototype.InterpolantFactoryMethodSmooth=void 0;class H0 extends Uc{}H0.prototype.ValueTypeName="vector";class V0{constructor(e="",t=-1,r=[],i=rw){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=cu(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let a=0,s=r.length;a!==s;++a)t.push(eoe(r[a]).scale(i));const o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,a=r.length;o!==a;++o)t.push(Uc.toJSON(r[o]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const o=t.length,a=[];for(let s=0;s<o;s++){let l=[],u=[];l.push((s+o-1)%o,s,(s+1)%o),u.push(0,1,0);const c=M7(l);l=CC(l,1,c),u=CC(u,1,c),!i&&l[0]===0&&(l.push(o),u.push(u[0])),a.push(new z0(".morphTargetInfluences["+t[s].name+"]",l,u).scale(1/r))}return new this(e,-1,a)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},o=/^([\w-]*?)([\d]+)$/;for(let s=0,l=e.length;s<l;s++){const u=e[s],c=u.name.match(o);if(c&&c.length>1){const f=c[1];let h=i[f];h||(i[f]=h=[]),h.push(u)}}const a=[];for(const s in i)a.push(this.CreateFromMorphTargetSequence(s,i[s],t,r));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(f,h,p,v,S){if(p.length!==0){const y=[],_=[];JP(p,y,_,v),y.length!==0&&S.push(new f(h,y,_))}},i=[],o=e.name||"default",a=e.fps||30,s=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let f=0;f<u.length;f++){const h=u[f].keys;if(!(!h||h.length===0))if(h[0].morphTargets){const p={};let v;for(v=0;v<h.length;v++)if(h[v].morphTargets)for(let S=0;S<h[v].morphTargets.length;S++)p[h[v].morphTargets[S]]=-1;for(const S in p){const y=[],_=[];for(let w=0;w!==h[v].morphTargets.length;++w){const A=h[v];y.push(A.time),_.push(A.morphTarget===S?1:0)}i.push(new z0(".morphTargetInfluence["+S+"]",y,_))}l=p.length*a}else{const p=".bones["+t[f].name+"]";r(H0,p+".position",h,"pos",i),r(Xy,p+".quaternion",h,"rot",i),r(H0,p+".scale",h,"scl",i)}}return i.length===0?null:new this(o,l,i,s)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const o=this.tracks[r];t=Math.max(t,o.times[o.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Qie(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return z0;case"vector":case"vector2":case"vector3":case"vector4":return H0;case"color":return QP;case"quaternion":return Xy;case"bool":case"boolean":return Kp;case"string":return Jp}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function eoe(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Qie(n.type);if(n.times===void 0){const t=[],r=[];JP(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Qf={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class Ew{constructor(e,t,r){const i=this;let o=!1,a=0,s=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(c){s++,o===!1&&i.onStart!==void 0&&i.onStart(c,a,s),o=!0},this.itemEnd=function(c){a++,i.onProgress!==void 0&&i.onProgress(c,a,s),a===s&&(o=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(c){i.onError!==void 0&&i.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,f){return u.push(c,f),this},this.removeHandler=function(c){const f=u.indexOf(c);return f!==-1&&u.splice(f,2),this},this.getHandler=function(c){for(let f=0,h=u.length;f<h;f+=2){const p=u[f],v=u[f+1];if(p.global&&(p.lastIndex=0),p.test(c))return v}return null}}}const R7=new Ew;class sl{constructor(e){this.manager=e!==void 0?e:R7,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,o){r.load(e,i,t,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}sl.DEFAULT_MATERIAL_NAME="__DEFAULT";const Yf={};class toe extends Error{constructor(e,t){super(e),this.response=t}}class fu extends sl{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=Qf.get(e);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(o),this.manager.itemEnd(e)},0),o;if(Yf[e]!==void 0){Yf[e].push({onLoad:t,onProgress:r,onError:i});return}Yf[e]=[],Yf[e].push({onLoad:t,onProgress:r,onError:i});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,l=this.responseType;fetch(a).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const c=Yf[e],f=u.body.getReader(),h=u.headers.get("X-File-Size")||u.headers.get("Content-Length"),p=h?parseInt(h):0,v=p!==0;let S=0;const y=new ReadableStream({start(_){w();function w(){f.read().then(({done:A,value:E})=>{if(A)_.close();else{S+=E.byteLength;const P=new ProgressEvent("progress",{lengthComputable:v,loaded:S,total:p});for(let O=0,L=c.length;O<L;O++){const D=c[O];D.onProgress&&D.onProgress(P)}_.enqueue(E),w()}},A=>{_.error(A)})}}});return new Response(y)}else throw new toe(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(c=>new DOMParser().parseFromString(c,s));case"json":return u.json();default:if(s===void 0)return u.text();{const f=/charset="?([^;"\s]*)"?/i.exec(s),h=f&&f[1]?f[1].toLowerCase():void 0,p=new TextDecoder(h);return u.arrayBuffer().then(v=>p.decode(v))}}}).then(u=>{Qf.add(e,u);const c=Yf[e];delete Yf[e];for(let f=0,h=c.length;f<h;f++){const p=c[f];p.onLoad&&p.onLoad(u)}}).catch(u=>{const c=Yf[e];if(c===void 0)throw this.manager.itemError(e),u;delete Yf[e];for(let f=0,h=c.length;f<h;f++){const p=c[f];p.onError&&p.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class noe extends sl{constructor(e){super(e)}load(e,t,r,i){const o=this,a=new fu(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(s){try{t(o.parse(JSON.parse(s)))}catch(l){i?i(l):console.error(l),o.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=V0.parse(e[r]);t.push(i)}return t}}class roe extends sl{constructor(e){super(e)}load(e,t,r,i){const o=this,a=[],s=new fw,l=new fu(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(o.withCredentials);let u=0;function c(f){l.load(e[f],function(h){const p=o.parse(h,!0);a[f]={width:p.width,height:p.height,format:p.format,mipmaps:p.mipmaps},u+=1,u===6&&(p.mipmapCount===1&&(s.minFilter=mi),s.image=a,s.format=p.format,s.needsUpdate=!0,t&&t(s))},r,i)}if(Array.isArray(e))for(let f=0,h=e.length;f<h;++f)c(f);else l.load(e,function(f){const h=o.parse(f,!0);if(h.isCubemap){const p=h.mipmaps.length/h.mipmapCount;for(let v=0;v<p;v++){a[v]={mipmaps:[]};for(let S=0;S<h.mipmapCount;S++)a[v].mipmaps.push(h.mipmaps[v*h.mipmapCount+S]),a[v].format=h.format,a[v].width=h.width,a[v].height=h.height}s.image=a}else s.image.width=h.width,s.image.height=h.height,s.mipmaps=h.mipmaps;h.mipmapCount===1&&(s.minFilter=mi),s.format=h.format,s.needsUpdate=!0,t&&t(s)},r,i);return s}}class G0 extends sl{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,a=Qf.get(e);if(a!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(a),o.manager.itemEnd(e)},0),a;const s=D0("img");function l(){c(),Qf.add(e,this),t&&t(this),o.manager.itemEnd(e)}function u(f){c(),i&&i(f),o.manager.itemError(e),o.manager.itemEnd(e)}function c(){s.removeEventListener("load",l,!1),s.removeEventListener("error",u,!1)}return s.addEventListener("load",l,!1),s.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(s.crossOrigin=this.crossOrigin),o.manager.itemStart(e),s.src=e,s}}class N7 extends sl{constructor(e){super(e)}load(e,t,r,i){const o=new Hy;o.colorSpace=Zs;const a=new G0(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let s=0;function l(u){a.load(e[u],function(c){o.images[u]=c,s++,s===6&&(o.needsUpdate=!0,t&&t(o))},void 0,i)}for(let u=0;u<e.length;++u)l(u);return o}}class eI extends sl{constructor(e){super(e)}load(e,t,r,i){const o=this,a=new Lc,s=new fu(this.manager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(o.withCredentials),s.load(e,function(l){let u;try{u=o.parse(l)}catch(c){if(i!==void 0)i(c);else{console.error(c);return}}u.image!==void 0?a.image=u.image:u.data!==void 0&&(a.image.width=u.width,a.image.height=u.height,a.image.data=u.data),a.wrapS=u.wrapS!==void 0?u.wrapS:va,a.wrapT=u.wrapT!==void 0?u.wrapT:va,a.magFilter=u.magFilter!==void 0?u.magFilter:mi,a.minFilter=u.minFilter!==void 0?u.minFilter:mi,a.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0&&(a.colorSpace=u.colorSpace),u.flipY!==void 0&&(a.flipY=u.flipY),u.format!==void 0&&(a.format=u.format),u.type!==void 0&&(a.type=u.type),u.mipmaps!==void 0&&(a.mipmaps=u.mipmaps,a.minFilter=ff),u.mipmapCount===1&&(a.minFilter=mi),u.generateMipmaps!==void 0&&(a.generateMipmaps=u.generateMipmaps),a.needsUpdate=!0,t&&t(a,u)},r,i),a}}class ioe extends sl{constructor(e){super(e)}load(e,t,r,i){const o=new Mi,a=new G0(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(s){o.image=s,o.needsUpdate=!0,t!==void 0&&t(o)},r,i),o}}class wh extends ti{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new xn(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class L7 extends wh{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(ti.DEFAULT_UP),this.updateMatrix(),this.groundColor=new xn(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const A2=new Qn,nO=new Pe,rO=new Pe;class tI{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new zt(512,512),this.map=null,this.mapPass=null,this.matrix=new Qn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Vy,this._frameExtents=new zt(1,1),this._viewportCount=1,this._viewports=[new Yr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;nO.setFromMatrixPosition(e.matrixWorld),t.position.copy(nO),rO.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(rO),t.updateMatrixWorld(),A2.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(A2),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(A2)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class ooe extends tI{constructor(){super(new Qa(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=vg*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,o=e.distance||t.far;(r!==t.fov||i!==t.aspect||o!==t.far)&&(t.fov=r,t.aspect=i,t.far=o,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class O7 extends wh{constructor(e,t,r=0,i=Math.PI/3,o=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ti.DEFAULT_UP),this.updateMatrix(),this.target=new ti,this.distance=r,this.angle=i,this.penumbra=o,this.decay=a,this.map=null,this.shadow=new ooe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const iO=new Qn,Iv=new Pe,E2=new Pe;class aoe extends tI{constructor(){super(new Qa(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new zt(4,2),this._viewportCount=6,this._viewports=[new Yr(2,1,1,1),new Yr(0,1,1,1),new Yr(3,1,1,1),new Yr(1,1,1,1),new Yr(3,0,1,1),new Yr(1,0,1,1)],this._cubeDirections=[new Pe(1,0,0),new Pe(-1,0,0),new Pe(0,0,1),new Pe(0,0,-1),new Pe(0,1,0),new Pe(0,-1,0)],this._cubeUps=[new Pe(0,1,0),new Pe(0,1,0),new Pe(0,1,0),new Pe(0,1,0),new Pe(0,0,1),new Pe(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,o=e.distance||r.far;o!==r.far&&(r.far=o,r.updateProjectionMatrix()),Iv.setFromMatrixPosition(e.matrixWorld),r.position.copy(Iv),E2.copy(r.position),E2.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(E2),r.updateMatrixWorld(),i.makeTranslation(-Iv.x,-Iv.y,-Iv.z),iO.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(iO)}}class D7 extends wh{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new aoe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class soe extends tI{constructor(){super(new Xg(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class k7 extends wh{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ti.DEFAULT_UP),this.updateMatrix(),this.target=new ti,this.shadow=new soe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class F7 extends wh{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class U7 extends wh{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class B7{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Pe)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,o=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*i),t.addScaledVector(a[2],.488603*o),t.addScaledVector(a[3],.488603*r),t.addScaledVector(a[4],1.092548*(r*i)),t.addScaledVector(a[5],1.092548*(i*o)),t.addScaledVector(a[6],.315392*(3*o*o-1)),t.addScaledVector(a[7],1.092548*(r*o)),t.addScaledVector(a[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,o=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],2*.511664*i),t.addScaledVector(a[2],2*.511664*o),t.addScaledVector(a[3],2*.511664*r),t.addScaledVector(a[4],2*.429043*r*i),t.addScaledVector(a[5],2*.429043*i*o),t.addScaledVector(a[6],.743125*o*o-.247708),t.addScaledVector(a[7],2*.429043*r*o),t.addScaledVector(a[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,o=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*o,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*o,t[6]=.315392*(3*o*o-1),t[7]=1.092548*r*o,t[8]=.546274*(r*r-i*i)}}class z7 extends wh{constructor(e=new B7,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Tw extends sl{constructor(e){super(e),this.textures={}}load(e,t,r,i){const o=this,a=new fu(o.manager);a.setPath(o.path),a.setRequestHeader(o.requestHeader),a.setWithCredentials(o.withCredentials),a.load(e,function(s){try{t(o.parse(JSON.parse(s)))}catch(l){i?i(l):console.error(l),o.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(o){return t[o]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",o),t[o]}const i=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new xn().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(i.dispersion=e.dispersion),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const o in e.uniforms){const a=e.uniforms[o];switch(i.uniforms[o]={},a.type){case"t":i.uniforms[o].value=r(a.value);break;case"c":i.uniforms[o].value=new xn().setHex(a.value);break;case"v2":i.uniforms[o].value=new zt().fromArray(a.value);break;case"v3":i.uniforms[o].value=new Pe().fromArray(a.value);break;case"v4":i.uniforms[o].value=new Yr().fromArray(a.value);break;case"m3":i.uniforms[o].value=new yr().fromArray(a.value);break;case"m4":i.uniforms[o].value=new Qn().fromArray(a.value);break;default:i.uniforms[o].value=a.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const o in e.extensions)i.extensions[o]=e.extensions[o];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let o=e.normalScale;Array.isArray(o)===!1&&(o=[o,o]),i.normalScale=new zt().fromArray(o)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapRotation!==void 0&&i.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new zt().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return Tw.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:v7,SpriteMaterial:HP,RawShaderMaterial:y7,ShaderMaterial:ol,PointsMaterial:GP,MeshPhysicalMaterial:x7,MeshStandardMaterial:KP,MeshPhongMaterial:_7,MeshToonMaterial:S7,MeshNormalMaterial:w7,MeshLambertMaterial:b7,MeshDepthMaterial:UP,MeshDistanceMaterial:BP,MeshBasicMaterial:pd,MeshMatcapMaterial:A7,LineDashedMaterial:E7,LineBasicMaterial:al,Material:ds};return new t[e]}}class PC{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class H7 extends wr{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class V7 extends sl{constructor(e){super(e)}load(e,t,r,i){const o=this,a=new fu(o.manager);a.setPath(o.path),a.setRequestHeader(o.requestHeader),a.setWithCredentials(o.withCredentials),a.load(e,function(s){try{t(o.parse(JSON.parse(s)))}catch(l){i?i(l):console.error(l),o.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(p,v){if(t[v]!==void 0)return t[v];const y=p.interleavedBuffers[v],_=o(p,y.buffer),w=Qm(y.type,_),A=new uw(w,y.stride);return A.uuid=y.uuid,t[v]=A,A}function o(p,v){if(r[v]!==void 0)return r[v];const y=p.arrayBuffers[v],_=new Uint32Array(y).buffer;return r[v]=_,_}const a=e.isInstancedBufferGeometry?new H7:new wr,s=e.data.index;if(s!==void 0){const p=Qm(s.type,s.array);a.setIndex(new Oi(p,1))}const l=e.data.attributes;for(const p in l){const v=l[p];let S;if(v.isInterleavedBufferAttribute){const y=i(e.data,v.data);S=new zp(y,v.itemSize,v.offset,v.normalized)}else{const y=Qm(v.type,v.array),_=v.isInstancedBufferAttribute?_g:Oi;S=new _(y,v.itemSize,v.normalized)}v.name!==void 0&&(S.name=v.name),v.usage!==void 0&&S.setUsage(v.usage),a.setAttribute(p,S)}const u=e.data.morphAttributes;if(u)for(const p in u){const v=u[p],S=[];for(let y=0,_=v.length;y<_;y++){const w=v[y];let A;if(w.isInterleavedBufferAttribute){const E=i(e.data,w.data);A=new zp(E,w.itemSize,w.offset,w.normalized)}else{const E=Qm(w.type,w.array);A=new Oi(E,w.itemSize,w.normalized)}w.name!==void 0&&(A.name=w.name),S.push(A)}a.morphAttributes[p]=S}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let p=0,v=f.length;p!==v;++p){const S=f[p];a.addGroup(S.start,S.count,S.materialIndex)}const h=e.data.boundingSphere;if(h!==void 0){const p=new Pe;h.center!==void 0&&p.fromArray(h.center),a.boundingSphere=new Ds(p,h.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class loe extends sl{constructor(e){super(e)}load(e,t,r,i){const o=this,a=this.path===""?PC.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const s=new fu(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(f){i!==void 0&&i(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}const c=u.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}o.parse(u,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?PC.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const o=new fu(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials);const a=await o.loadAsync(e,t),s=JSON.parse(a),l=s.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(s)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),o=this.parseGeometries(e.geometries,i),a=this.parseImages(e.images,function(){t!==void 0&&t(u)}),s=this.parseTextures(e.textures,a),l=this.parseMaterials(e.materials,s),u=this.parseObject(e.object,o,l,s,r),c=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,c),this.bindLightTargets(u),t!==void 0){let f=!1;for(const h in a)if(a[h].data instanceof HTMLImageElement){f=!0;break}f===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),o=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,o),s=this.parseMaterials(e.materials,a),l=this.parseObject(e.object,i,s,a,t),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),this.bindLightTargets(l),l}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const o=new Cp().fromJSON(e[r]);t[o.uuid]=o}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(o){o.isBone&&(i[o.uuid]=o)}),e!==void 0)for(let o=0,a=e.length;o<a;o++){const s=new cw().fromJSON(e[o],i);r[s.uuid]=s}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new V7;for(let o=0,a=e.length;o<a;o++){let s;const l=e[o];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":s=i.parse(l);break;default:l.type in tO?s=tO[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}s.uuid=l.uuid,l.name!==void 0&&(s.name=l.name),l.userData!==void 0&&(s.userData=l.userData),r[l.uuid]=s}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const o=new Tw;o.setTextures(t);for(let a=0,s=e.length;a<s;a++){const l=e[a];r[l.uuid]===void 0&&(r[l.uuid]=o.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],o=V0.parse(i);t[o.uuid]=o}return t}parseImages(e,t){const r=this,i={};let o;function a(l){return r.manager.itemStart(l),o.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function s(l){if(typeof l=="string"){const u=l,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:r.resourcePath+u;return a(c)}else return l.data?{data:Qm(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new Ew(t);o=new G0(l),o.setCrossOrigin(this.crossOrigin);for(let u=0,c=e.length;u<c;u++){const f=e[u],h=f.url;if(Array.isArray(h)){const p=[];for(let v=0,S=h.length;v<S;v++){const y=h[v],_=s(y);_!==null&&(_ instanceof HTMLImageElement?p.push(_):p.push(new Lc(_.data,_.width,_.height)))}i[f.uuid]=new pp(p)}else{const p=s(f.url);i[f.uuid]=new pp(p)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function o(a){if(typeof a=="string"){const s=a,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(s)?s:t.resourcePath+s;return await i.loadAsync(l)}else return a.data?{data:Qm(a.type,a.data),width:a.width,height:a.height}:null}if(e!==void 0&&e.length>0){i=new G0(this.manager),i.setCrossOrigin(this.crossOrigin);for(let a=0,s=e.length;a<s;a++){const l=e[a],u=l.url;if(Array.isArray(u)){const c=[];for(let f=0,h=u.length;f<h;f++){const p=u[f],v=await o(p);v!==null&&(v instanceof HTMLImageElement?c.push(v):c.push(new Lc(v.data,v.width,v.height)))}r[l.uuid]=new pp(c)}else{const c=await o(l.url);r[l.uuid]=new pp(c)}}}return r}parseTextures(e,t){function r(o,a){return typeof o=="number"?o:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",o),a[o])}const i={};if(e!==void 0)for(let o=0,a=e.length;o<a;o++){const s=e[o];s.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),t[s.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",s.image);const l=t[s.image],u=l.data;let c;Array.isArray(u)?(c=new Hy,u.length===6&&(c.needsUpdate=!0)):(u&&u.data?c=new Lc:c=new Mi,u&&(c.needsUpdate=!0)),c.source=l,c.uuid=s.uuid,s.name!==void 0&&(c.name=s.name),s.mapping!==void 0&&(c.mapping=r(s.mapping,uoe)),s.channel!==void 0&&(c.channel=s.channel),s.offset!==void 0&&c.offset.fromArray(s.offset),s.repeat!==void 0&&c.repeat.fromArray(s.repeat),s.center!==void 0&&c.center.fromArray(s.center),s.rotation!==void 0&&(c.rotation=s.rotation),s.wrap!==void 0&&(c.wrapS=r(s.wrap[0],oO),c.wrapT=r(s.wrap[1],oO)),s.format!==void 0&&(c.format=s.format),s.internalFormat!==void 0&&(c.internalFormat=s.internalFormat),s.type!==void 0&&(c.type=s.type),s.colorSpace!==void 0&&(c.colorSpace=s.colorSpace),s.minFilter!==void 0&&(c.minFilter=r(s.minFilter,aO)),s.magFilter!==void 0&&(c.magFilter=r(s.magFilter,aO)),s.anisotropy!==void 0&&(c.anisotropy=s.anisotropy),s.flipY!==void 0&&(c.flipY=s.flipY),s.generateMipmaps!==void 0&&(c.generateMipmaps=s.generateMipmaps),s.premultiplyAlpha!==void 0&&(c.premultiplyAlpha=s.premultiplyAlpha),s.unpackAlignment!==void 0&&(c.unpackAlignment=s.unpackAlignment),s.compareFunction!==void 0&&(c.compareFunction=s.compareFunction),s.userData!==void 0&&(c.userData=s.userData),i[s.uuid]=c}return i}parseObject(e,t,r,i,o){let a;function s(h){return t[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",h),t[h]}function l(h){if(h!==void 0){if(Array.isArray(h)){const p=[];for(let v=0,S=h.length;v<S;v++){const y=h[v];r[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",y),p.push(r[y])}return p}return r[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",h),r[h]}}function u(h){return i[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",h),i[h]}let c,f;switch(e.type){case"Scene":a=new xg,e.background!==void 0&&(Number.isInteger(e.background)?a.background=new xn(e.background):a.background=u(e.background)),e.environment!==void 0&&(a.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?a.fog=new lw(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(a.fog=new sw(e.fog.color,e.fog.density)),e.fog.name!==""&&(a.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(a.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&a.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(a.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&a.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":a=new Qa(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(a.focus=e.focus),e.zoom!==void 0&&(a.zoom=e.zoom),e.filmGauge!==void 0&&(a.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(a.filmOffset=e.filmOffset),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new Xg(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(a.zoom=e.zoom),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new F7(e.color,e.intensity);break;case"DirectionalLight":a=new k7(e.color,e.intensity),a.target=e.target||"";break;case"PointLight":a=new D7(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new U7(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new O7(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),a.target=e.target||"";break;case"HemisphereLight":a=new L7(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new z7().fromJSON(e);break;case"SkinnedMesh":c=s(e.geometry),f=l(e.material),a=new n7(c,f),e.bindMode!==void 0&&(a.bindMode=e.bindMode),e.bindMatrix!==void 0&&a.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(a.skeleton=e.skeleton);break;case"Mesh":c=s(e.geometry),f=l(e.material),a=new Co(c,f);break;case"InstancedMesh":c=s(e.geometry),f=l(e.material);const h=e.count,p=e.instanceMatrix,v=e.instanceColor;a=new r7(c,f,h),a.instanceMatrix=new _g(new Float32Array(p.array),16),v!==void 0&&(a.instanceColor=new _g(new Float32Array(v.array),v.itemSize));break;case"BatchedMesh":c=s(e.geometry),f=l(e.material),a=new i7(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,f),a.geometry=c,a.perObjectFrustumCulled=e.perObjectFrustumCulled,a.sortObjects=e.sortObjects,a._drawRanges=e.drawRanges,a._reservedRanges=e.reservedRanges,a._visibility=e.visibility,a._active=e.active,a._bounds=e.bounds.map(S=>{const y=new rl;y.min.fromArray(S.boxMin),y.max.fromArray(S.boxMax);const _=new Ds;return _.radius=S.sphereRadius,_.center.fromArray(S.sphereCenter),{boxInitialized:S.boxInitialized,box:y,sphereInitialized:S.sphereInitialized,sphere:_}}),a._maxInstanceCount=e.maxInstanceCount,a._maxVertexCount=e.maxVertexCount,a._maxIndexCount=e.maxIndexCount,a._geometryInitialized=e.geometryInitialized,a._geometryCount=e.geometryCount,a._matricesTexture=u(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(a._colorsTexture=u(e.colorsTexture.uuid));break;case"LOD":a=new t7;break;case"Line":a=new mh(s(e.geometry),l(e.material));break;case"LineLoop":a=new o7(s(e.geometry),l(e.material));break;case"LineSegments":a=new Cf(s(e.geometry),l(e.material));break;case"PointCloud":case"Points":a=new a7(s(e.geometry),l(e.material));break;case"Sprite":a=new e7(l(e.material));break;case"Group":a=new tg;break;case"Bone":a=new VP;break;default:a=new ti}if(a.uuid=e.uuid,e.name!==void 0&&(a.name=e.name),e.matrix!==void 0?(a.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(e.position!==void 0&&a.position.fromArray(e.position),e.rotation!==void 0&&a.rotation.fromArray(e.rotation),e.quaternion!==void 0&&a.quaternion.fromArray(e.quaternion),e.scale!==void 0&&a.scale.fromArray(e.scale)),e.up!==void 0&&a.up.fromArray(e.up),e.castShadow!==void 0&&(a.castShadow=e.castShadow),e.receiveShadow!==void 0&&(a.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(a.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(a.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(a.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(a.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(a.visible=e.visible),e.frustumCulled!==void 0&&(a.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(a.renderOrder=e.renderOrder),e.userData!==void 0&&(a.userData=e.userData),e.layers!==void 0&&(a.layers.mask=e.layers),e.children!==void 0){const h=e.children;for(let p=0;p<h.length;p++)a.add(this.parseObject(h[p],t,r,i,o))}if(e.animations!==void 0){const h=e.animations;for(let p=0;p<h.length;p++){const v=h[p];a.animations.push(o[v])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(a.autoUpdate=e.autoUpdate);const h=e.levels;for(let p=0;p<h.length;p++){const v=h[p],S=a.getObjectByProperty("uuid",v.object);S!==void 0&&a.addLevel(S,v.distance,v.hysteresis)}}return a}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const r=t.target,i=e.getObjectByProperty("uuid",r);i!==void 0?t.target=i:t.target=new ti}})}}const uoe={UVMapping:hh,CubeReflectionMapping:bf,CubeRefractionMapping:ph,EquirectangularReflectionMapping:mg,EquirectangularRefractionMapping:C0,CubeUVReflectionMapping:jg},oO={RepeatWrapping:P0,ClampToEdgeWrapping:va,MirroredRepeatWrapping:I0},aO={NearestFilter:fs,NearestMipmapNearestFilter:SP,NearestMipmapLinearFilter:Zm,LinearFilter:mi,LinearMipmapNearestFilter:o0,LinearMipmapLinearFilter:ff};class coe extends sl{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,a=Qf.get(e);if(a!==void 0){if(o.manager.itemStart(e),a.then){a.then(u=>{t&&t(u),o.manager.itemEnd(e)}).catch(u=>{i&&i(u)});return}return setTimeout(function(){t&&t(a),o.manager.itemEnd(e)},0),a}const s={};s.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",s.headers=this.requestHeader;const l=fetch(e,s).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(u){return Qf.add(e,u),t&&t(u),o.manager.itemEnd(e),u}).catch(function(u){i&&i(u),Qf.remove(e),o.manager.itemError(e),o.manager.itemEnd(e)});Qf.add(e,l),o.manager.itemStart(e)}}let bx;class nI{static getContext(){return bx===void 0&&(bx=new(window.AudioContext||window.webkitAudioContext)),bx}static setContext(e){bx=e}}class foe extends sl{constructor(e){super(e)}load(e,t,r,i){const o=this,a=new fu(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){try{const u=l.slice(0);nI.getContext().decodeAudioData(u,function(f){t(f)}).catch(s)}catch(u){s(u)}},r,i);function s(l){i?i(l):console.error(l),o.manager.itemError(e)}}}const sO=new Qn,lO=new Qn,Qh=new Qn;class doe{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Qa,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Qa,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Qh.copy(e.projectionMatrix);const i=t.eyeSep/2,o=i*t.near/t.focus,a=t.near*Math.tan(Tp*t.fov*.5)/t.zoom;let s,l;lO.elements[12]=-i,sO.elements[12]=i,s=-a*t.aspect+o,l=a*t.aspect+o,Qh.elements[0]=2*t.near/(l-s),Qh.elements[8]=(l+s)/(l-s),this.cameraL.projectionMatrix.copy(Qh),s=-a*t.aspect-o,l=a*t.aspect-o,Qh.elements[0]=2*t.near/(l-s),Qh.elements[8]=(l+s)/(l-s),this.cameraR.projectionMatrix.copy(Qh)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(lO),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(sO)}}class rI{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=uO(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=uO();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function uO(){return performance.now()}const ep=new Pe,cO=new kl,hoe=new Pe,tp=new Pe;class poe extends ti{constructor(){super(),this.type="AudioListener",this.context=nI.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new rI}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(ep,cO,hoe),tp.set(0,0,-1).applyQuaternion(cO),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(ep.x,i),t.positionY.linearRampToValueAtTime(ep.y,i),t.positionZ.linearRampToValueAtTime(ep.z,i),t.forwardX.linearRampToValueAtTime(tp.x,i),t.forwardY.linearRampToValueAtTime(tp.y,i),t.forwardZ.linearRampToValueAtTime(tp.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition(ep.x,ep.y,ep.z),t.setOrientation(tp.x,tp.y,tp.z,r.x,r.y,r.z)}}class G7 extends ti{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const np=new Pe,fO=new kl,moe=new Pe,rp=new Pe;class goe extends G7{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(np,fO,moe),rp.set(0,0,1).applyQuaternion(fO);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(np.x,r),t.positionY.linearRampToValueAtTime(np.y,r),t.positionZ.linearRampToValueAtTime(np.z,r),t.orientationX.linearRampToValueAtTime(rp.x,r),t.orientationY.linearRampToValueAtTime(rp.y,r),t.orientationZ.linearRampToValueAtTime(rp.z,r)}else t.setPosition(np.x,np.y,np.z),t.setOrientation(rp.x,rp.y,rp.z)}}class voe{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class q7{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,o,a;switch(t){case"quaternion":i=this._slerp,o=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,o=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,o=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=o,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,o=e*i+i;let a=this.cumulativeWeight;if(a===0){for(let s=0;s!==i;++s)r[o+s]=r[s];a=t}else{a+=t;const s=t/a;this._mixBufferRegion(r,o,0,s,i)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,o=this.cumulativeWeight,a=this.cumulativeWeightAdditive,s=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-o,t)}a>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(r[l]!==r[l+t]){s.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let o=r,a=i;o!==a;++o)t[o]=t[i+o%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,o){if(i>=.5)for(let a=0;a!==o;++a)e[t+a]=e[r+a]}_slerp(e,t,r,i){kl.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,o){const a=this._workIndex*o;kl.multiplyQuaternionsFlat(e,a,e,t,e,r),kl.slerpFlat(e,t,e,t,e,a,i)}_lerp(e,t,r,i,o){const a=1-i;for(let s=0;s!==o;++s){const l=t+s;e[l]=e[l]*a+e[r+s]*i}}_lerpAdditive(e,t,r,i,o){for(let a=0;a!==o;++a){const s=t+a;e[s]=e[s]+e[r+a]*i}}}const iI="\\[\\]\\.:\\/",yoe=new RegExp("["+iI+"]","g"),oI="[^"+iI+"]",xoe="[^"+iI.replace("\\.","")+"]",_oe=/((?:WC+[\/:])*)/.source.replace("WC",oI),Soe=/(WCOD+)?/.source.replace("WCOD",xoe),woe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",oI),boe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",oI),Aoe=new RegExp("^"+_oe+Soe+woe+boe+"$"),Eoe=["material","materials","bones","map"];class Toe{constructor(e,t,r){const i=r||ei.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,o=r.length;i!==o;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class ei{constructor(e,t,r){this.path=t,this.parsedPath=r||ei.parseTrackName(t),this.node=ei.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new ei.Composite(e,t,r):new ei(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(yoe,"")}static parseTrackName(e){const t=Aoe.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const o=r.nodeName.substring(i+1);Eoe.indexOf(o)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=o)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(o){for(let a=0;a<o.length;a++){const s=o[a];if(s.name===t||s.uuid===t)return s;const l=r(s.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let o=t.propertyIndex;if(e||(e=ei.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let u=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===u){u=c;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const a=e[i];if(a===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",e);return}let s=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?s=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(s=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(o!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[o]!==void 0&&(o=e.morphTargetDictionary[o])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else a.fromArray!==void 0&&a.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}ei.Composite=Toe;ei.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};ei.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};ei.prototype.GetterByBindingType=[ei.prototype._getValue_direct,ei.prototype._getValue_array,ei.prototype._getValue_arrayElement,ei.prototype._getValue_toArray];ei.prototype.SetterByBindingTypeAndVersioning=[[ei.prototype._setValue_direct,ei.prototype._setValue_direct_setNeedsUpdate,ei.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ei.prototype._setValue_array,ei.prototype._setValue_array_setNeedsUpdate,ei.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ei.prototype._setValue_arrayElement,ei.prototype._setValue_arrayElement_setNeedsUpdate,ei.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ei.prototype._setValue_fromArray,ei.prototype._setValue_fromArray_setNeedsUpdate,ei.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Moe{constructor(){this.isAnimationObjectGroup=!0,this.uuid=cu(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length;let s,l=e.length,u=this.nCachedObjects_;for(let c=0,f=arguments.length;c!==f;++c){const h=arguments[c],p=h.uuid;let v=t[p];if(v===void 0){v=l++,t[p]=v,e.push(h);for(let S=0,y=a;S!==y;++S)o[S].push(new ei(h,r[S],i[S]))}else if(v<u){s=e[v];const S=--u,y=e[S];t[y.uuid]=v,e[v]=y,t[p]=S,e[S]=h;for(let _=0,w=a;_!==w;++_){const A=o[_],E=A[S];let P=A[v];A[v]=E,P===void 0&&(P=new ei(h,r[_],i[_])),A[S]=P}}else e[v]!==s&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let o=this.nCachedObjects_;for(let a=0,s=arguments.length;a!==s;++a){const l=arguments[a],u=l.uuid,c=t[u];if(c!==void 0&&c>=o){const f=o++,h=e[f];t[h.uuid]=c,e[c]=h,t[u]=f,e[f]=l;for(let p=0,v=i;p!==v;++p){const S=r[p],y=S[f],_=S[c];S[c]=y,S[f]=_}}}this.nCachedObjects_=o}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let o=this.nCachedObjects_,a=e.length;for(let s=0,l=arguments.length;s!==l;++s){const u=arguments[s],c=u.uuid,f=t[c];if(f!==void 0)if(delete t[c],f<o){const h=--o,p=e[h],v=--a,S=e[v];t[p.uuid]=f,e[f]=p,t[S.uuid]=h,e[h]=S,e.pop();for(let y=0,_=i;y!==_;++y){const w=r[y],A=w[h],E=w[v];w[f]=A,w[h]=E,w.pop()}}else{const h=--a,p=e[h];h>0&&(t[p.uuid]=f),e[f]=p,e.pop();for(let v=0,S=i;v!==S;++v){const y=r[v];y[f]=y[h],y.pop()}}}this.nCachedObjects_=o}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const o=this._bindings;if(i!==void 0)return o[i];const a=this._paths,s=this._parsedPaths,l=this._objects,u=l.length,c=this.nCachedObjects_,f=new Array(u);i=o.length,r[e]=i,a.push(e),s.push(t),o.push(f);for(let h=c,p=l.length;h!==p;++h){const v=l[h];f[h]=new ei(v,e,t)}return f}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length-1,l=a[s],u=e[s];t[u]=r,a[r]=l,a.pop(),o[r]=o[s],o.pop(),i[r]=i[s],i.pop()}}}class W7{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const o=t.tracks,a=o.length,s=new Array(a),l={endingStart:dp,endingEnd:dp};for(let u=0;u!==a;++u){const c=o[u].createInterpolant(null);s[u]=c,c.settings=l}this._interpolantSettings=l,this._interpolants=s,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Mz,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,o=e._clip.duration,a=o/i,s=i/o;e.warp(1,a,t),this.warp(s,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,o=i.time,a=this.timeScale;let s=this._timeScaleInterpolant;s===null&&(s=i._lendControlInterpolant(),this._timeScaleInterpolant=s);const l=s.parameterPositions,u=s.sampleValues;return l[0]=o,l[1]=o+r,u[0]=e/a,u[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const o=this._startTime;if(o!==null){const l=(e-o)*r;l<0||r===0?t=0:(this._startTime=null,t=r*l)}t*=this._updateTimeScale(e);const a=this._updateTime(t),s=this._updateWeight(e);if(s>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case PP:for(let c=0,f=l.length;c!==f;++c)l[c].evaluate(a),u[c].accumulateAdditive(s);break;case rw:default:for(let c=0,f=l.length;c!==f;++c)l[c].evaluate(a),u[c].accumulate(i,s)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,o=this._loopCount;const a=r===Cz;if(e===0)return o===-1?i:a&&(o&1)===1?t-i:i;if(r===Tz){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(o===-1&&(e>=0?(o=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),i>=t||i<0){const s=Math.floor(i/t);i-=t*s,o+=Math.abs(s);const l=this.repetitions-o;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,a)}else this._setEndings(!1,!1,a);this._loopCount=o,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s})}}else this.time=i;if(a&&(o&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=hp,i.endingEnd=hp):(e?i.endingStart=this.zeroSlopeAtStart?hp:dp:i.endingStart=N0,t?i.endingEnd=this.zeroSlopeAtEnd?hp:dp:i.endingEnd=N0)}_scheduleFading(e,t,r){const i=this._mixer,o=i.time;let a=this._weightInterpolant;a===null&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);const s=a.parameterPositions,l=a.sampleValues;return s[0]=o,l[0]=t,s[1]=o+e,l[1]=r,this}}const Coe=new Float32Array(1);class Poe extends Mf{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,o=i.length,a=e._propertyBindings,s=e._interpolants,l=r.uuid,u=this._bindingsByRootAndName;let c=u[l];c===void 0&&(c={},u[l]=c);for(let f=0;f!==o;++f){const h=i[f],p=h.name;let v=c[p];if(v!==void 0)++v.referenceCount,a[f]=v;else{if(v=a[f],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,l,p));continue}const S=t&&t._propertyBindings[f].binding.parsedPath;v=new q7(ei.create(r,p,S),h.ValueTypeName,h.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,l,p),a[f]=v}s[f].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,o=this._actionsByClip[i];this._bindAction(e,o&&o.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const o=t[r];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const o=t[r];--o.useCount===0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,o=this._actionsByClip;let a=o[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,o[t]=a;else{const s=a.knownActions;e._byClipCacheIndex=s.length,s.push(e)}e._cacheIndex=i.length,i.push(e),a.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const o=e._clip.uuid,a=this._actionsByClip,s=a[o],l=s.knownActions,u=l[l.length-1],c=e._byClipCacheIndex;u._byClipCacheIndex=c,l[c]=u,l.pop(),e._byClipCacheIndex=null;const f=s.actionByRoot,h=(e._localRoot||this._root).uuid;delete f[h],l.length===0&&delete a[o],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const o=t[r];--o.referenceCount===0&&this._removeInactiveBinding(o)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,o=t[i];e._cacheIndex=i,t[i]=e,o._cacheIndex=r,t[r]=o}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,o=t[i];e._cacheIndex=i,t[i]=e,o._cacheIndex=r,t[r]=o}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,o=this._bindings;let a=i[t];a===void 0&&(a={},i[t]=a),a[r]=e,e._cacheIndex=o.length,o.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,o=r.path,a=this._bindingsByRootAndName,s=a[i],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete s[o],Object.keys(s).length===0&&delete a[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,o=t[i];e._cacheIndex=i,t[i]=e,o._cacheIndex=r,t[r]=o}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,o=t[i];e._cacheIndex=i,t[i]=e,o._cacheIndex=r,t[r]=o}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new ZP(new Float32Array(2),new Float32Array(2),1,Coe),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,o=t[i];e.__cacheIndex=i,t[i]=e,o.__cacheIndex=r,t[r]=o}clipAction(e,t,r){const i=t||this._root,o=i.uuid;let a=typeof e=="string"?V0.findByName(i,e):e;const s=a!==null?a.uuid:e,l=this._actionsByClip[s];let u=null;if(r===void 0&&(a!==null?r=a.blendMode:r=rw),l!==void 0){const f=l.actionByRoot[o];if(f!==void 0&&f.blendMode===r)return f;u=l.knownActions[0],a===null&&(a=u._clip)}if(a===null)return null;const c=new W7(this,a,t,r);return this._bindAction(c,u),this._addInactiveAction(c,s,o),c}existingAction(e,t){const r=t||this._root,i=r.uuid,o=typeof e=="string"?V0.findByName(r,e):e,a=o?o.uuid:e,s=this._actionsByClip[a];return s!==void 0&&s.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,o=Math.sign(e),a=this._accuIndex^=1;for(let u=0;u!==r;++u)t[u]._update(i,e,o,a);const s=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)s[u].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,o=i[r];if(o!==void 0){const a=o.knownActions;for(let s=0,l=a.length;s!==l;++s){const u=a[s];this._deactivateAction(u);const c=u._cacheIndex,f=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,f._cacheIndex=c,t[c]=f,t.pop(),this._removeInactiveBindingsForAction(u)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const a in r){const s=r[a].actionByRoot,l=s[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,o=i[t];if(o!==void 0)for(const a in o){const s=o[a];s.restoreOriginalState(),this._removeInactiveBinding(s)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class aI{constructor(e){this.value=e}clone(){return new aI(this.value.clone===void 0?this.value:this.value.clone())}}let Ioe=0;class Roe extends Mf{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Ioe++}),this.name="",this.usage=L0,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,i=t.length;r<i;r++){const o=Array.isArray(t[r])?t[r]:[t[r]];for(let a=0;a<o.length;a++)this.uniforms.push(o[a].clone())}return this}clone(){return new this.constructor().copy(this)}}class Noe extends uw{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class Loe{constructor(e,t,r,i,o){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=o,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const dO=new Qn;class sI{constructor(e,t,r=0,i=1/0){this.ray=new $g(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new Mp,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return dO.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(dO),this}intersectObject(e,t=!0,r=[]){return IC(e,this,r,t),r.sort(hO),r}intersectObjects(e,t=!0,r=[]){for(let i=0,o=e.length;i<o;i++)IC(e[i],this,r,t);return r.sort(hO),r}}function hO(n,e){return n.distance-e.distance}function IC(n,e,t,r){let i=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(i=!1),i===!0&&r===!0){const o=n.children;for(let a=0,s=o.length;a<s;a++)IC(o[a],e,t,!0)}}class Ooe{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(qo(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Doe{constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}class lI{constructor(e,t,r,i){lI.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,r,i)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let r=0;r<4;r++)this.elements[r]=e[r+t];return this}set(e,t,r,i){const o=this.elements;return o[0]=e,o[2]=t,o[1]=r,o[3]=i,this}}const pO=new zt;class koe{constructor(e=new zt(1/0,1/0),t=new zt(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=pO.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,pO).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const mO=new Pe,Ax=new Pe;class Foe{constructor(e=new Pe,t=new Pe){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){mO.subVectors(e,this.start),Ax.subVectors(this.end,this.start);const r=Ax.dot(Ax);let o=Ax.dot(mO)/r;return t&&(o=qo(o,0,1)),o}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const gO=new Pe;class Uoe extends ti{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const r=new wr,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,s=1,l=32;a<l;a++,s++){const u=a/l*Math.PI*2,c=s/l*Math.PI*2;i.push(Math.cos(u),Math.sin(u),1,Math.cos(c),Math.sin(c),1)}r.setAttribute("position",new Ln(i,3));const o=new al({fog:!1,toneMapped:!1});this.cone=new Cf(r,o),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),gO.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(gO),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const $d=new Pe,Ex=new Qn,T2=new Qn;class Boe extends Cf{constructor(e){const t=j7(e),r=new wr,i=[],o=[],a=new xn(0,0,1),s=new xn(0,1,0);for(let u=0;u<t.length;u++){const c=t[u];c.parent&&c.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),o.push(a.r,a.g,a.b),o.push(s.r,s.g,s.b))}r.setAttribute("position",new Ln(i,3)),r.setAttribute("color",new Ln(o,3));const l=new al({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");T2.copy(this.root.matrixWorld).invert();for(let o=0,a=0;o<t.length;o++){const s=t[o];s.parent&&s.parent.isBone&&(Ex.multiplyMatrices(T2,s.matrixWorld),$d.setFromMatrixPosition(Ex),i.setXYZ(a,$d.x,$d.y,$d.z),Ex.multiplyMatrices(T2,s.parent.matrixWorld),$d.setFromMatrixPosition(Ex),i.setXYZ(a+1,$d.x,$d.y,$d.z),a+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function j7(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,j7(n.children[t]));return e}class zoe extends Co{constructor(e,t,r){const i=new jy(t,4,2),o=new pd({wireframe:!0,fog:!1,toneMapped:!1});super(i,o),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Hoe=new Pe,vO=new xn,yO=new xn;class Voe extends ti{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new Wy(t);i.rotateY(Math.PI*.5),this.material=new pd({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const o=i.getAttribute("position"),a=new Float32Array(o.count*3);i.setAttribute("color",new Oi(a,3)),this.add(new Co(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");vO.copy(this.light.color),yO.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const o=r<i/2?vO:yO;t.setXYZ(r,o.r,o.g,o.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Hoe.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Goe extends Cf{constructor(e=10,t=10,r=4473924,i=8947848){r=new xn(r),i=new xn(i);const o=t/2,a=e/t,s=e/2,l=[],u=[];for(let h=0,p=0,v=-s;h<=t;h++,v+=a){l.push(-s,0,v,s,0,v),l.push(v,0,-s,v,0,s);const S=h===o?r:i;S.toArray(u,p),p+=3,S.toArray(u,p),p+=3,S.toArray(u,p),p+=3,S.toArray(u,p),p+=3}const c=new wr;c.setAttribute("position",new Ln(l,3)),c.setAttribute("color",new Ln(u,3));const f=new al({vertexColors:!0,toneMapped:!1});super(c,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class qoe extends Cf{constructor(e=10,t=16,r=8,i=64,o=4473924,a=8947848){o=new xn(o),a=new xn(a);const s=[],l=[];if(t>1)for(let f=0;f<t;f++){const h=f/t*(Math.PI*2),p=Math.sin(h)*e,v=Math.cos(h)*e;s.push(0,0,0),s.push(p,0,v);const S=f&1?o:a;l.push(S.r,S.g,S.b),l.push(S.r,S.g,S.b)}for(let f=0;f<r;f++){const h=f&1?o:a,p=e-e/r*f;for(let v=0;v<i;v++){let S=v/i*(Math.PI*2),y=Math.sin(S)*p,_=Math.cos(S)*p;s.push(y,0,_),l.push(h.r,h.g,h.b),S=(v+1)/i*(Math.PI*2),y=Math.sin(S)*p,_=Math.cos(S)*p,s.push(y,0,_),l.push(h.r,h.g,h.b)}}const u=new wr;u.setAttribute("position",new Ln(s,3)),u.setAttribute("color",new Ln(l,3));const c=new al({vertexColors:!0,toneMapped:!1});super(u,c),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const xO=new Pe,Tx=new Pe,_O=new Pe;class Woe extends ti{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new wr;i.setAttribute("position",new Ln([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const o=new al({fog:!1,toneMapped:!1});this.lightPlane=new mh(i,o),this.add(this.lightPlane),i=new wr,i.setAttribute("position",new Ln([0,0,0,0,0,1],3)),this.targetLine=new mh(i,o),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),xO.setFromMatrixPosition(this.light.matrixWorld),Tx.setFromMatrixPosition(this.light.target.matrixWorld),_O.subVectors(Tx,xO),this.lightPlane.lookAt(Tx),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Tx),this.targetLine.scale.z=_O.length()}}const Mx=new Pe,Ho=new zy;class joe extends Cf{constructor(e){const t=new wr,r=new al({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],o=[],a={};s("n1","n2"),s("n2","n4"),s("n4","n3"),s("n3","n1"),s("f1","f2"),s("f2","f4"),s("f4","f3"),s("f3","f1"),s("n1","f1"),s("n2","f2"),s("n3","f3"),s("n4","f4"),s("p","n1"),s("p","n2"),s("p","n3"),s("p","n4"),s("u1","u2"),s("u2","u3"),s("u3","u1"),s("c","t"),s("p","c"),s("cn1","cn2"),s("cn3","cn4"),s("cf1","cf2"),s("cf3","cf4");function s(v,S){l(v),l(S)}function l(v){i.push(0,0,0),o.push(0,0,0),a[v]===void 0&&(a[v]=[]),a[v].push(i.length/3-1)}t.setAttribute("position",new Ln(i,3)),t.setAttribute("color",new Ln(o,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const u=new xn(16755200),c=new xn(16711680),f=new xn(43775),h=new xn(16777215),p=new xn(3355443);this.setColors(u,c,f,h,p)}setColors(e,t,r,i,o){const s=this.geometry.getAttribute("color");s.setXYZ(0,e.r,e.g,e.b),s.setXYZ(1,e.r,e.g,e.b),s.setXYZ(2,e.r,e.g,e.b),s.setXYZ(3,e.r,e.g,e.b),s.setXYZ(4,e.r,e.g,e.b),s.setXYZ(5,e.r,e.g,e.b),s.setXYZ(6,e.r,e.g,e.b),s.setXYZ(7,e.r,e.g,e.b),s.setXYZ(8,e.r,e.g,e.b),s.setXYZ(9,e.r,e.g,e.b),s.setXYZ(10,e.r,e.g,e.b),s.setXYZ(11,e.r,e.g,e.b),s.setXYZ(12,e.r,e.g,e.b),s.setXYZ(13,e.r,e.g,e.b),s.setXYZ(14,e.r,e.g,e.b),s.setXYZ(15,e.r,e.g,e.b),s.setXYZ(16,e.r,e.g,e.b),s.setXYZ(17,e.r,e.g,e.b),s.setXYZ(18,e.r,e.g,e.b),s.setXYZ(19,e.r,e.g,e.b),s.setXYZ(20,e.r,e.g,e.b),s.setXYZ(21,e.r,e.g,e.b),s.setXYZ(22,e.r,e.g,e.b),s.setXYZ(23,e.r,e.g,e.b),s.setXYZ(24,t.r,t.g,t.b),s.setXYZ(25,t.r,t.g,t.b),s.setXYZ(26,t.r,t.g,t.b),s.setXYZ(27,t.r,t.g,t.b),s.setXYZ(28,t.r,t.g,t.b),s.setXYZ(29,t.r,t.g,t.b),s.setXYZ(30,t.r,t.g,t.b),s.setXYZ(31,t.r,t.g,t.b),s.setXYZ(32,r.r,r.g,r.b),s.setXYZ(33,r.r,r.g,r.b),s.setXYZ(34,r.r,r.g,r.b),s.setXYZ(35,r.r,r.g,r.b),s.setXYZ(36,r.r,r.g,r.b),s.setXYZ(37,r.r,r.g,r.b),s.setXYZ(38,i.r,i.g,i.b),s.setXYZ(39,i.r,i.g,i.b),s.setXYZ(40,o.r,o.g,o.b),s.setXYZ(41,o.r,o.g,o.b),s.setXYZ(42,o.r,o.g,o.b),s.setXYZ(43,o.r,o.g,o.b),s.setXYZ(44,o.r,o.g,o.b),s.setXYZ(45,o.r,o.g,o.b),s.setXYZ(46,o.r,o.g,o.b),s.setXYZ(47,o.r,o.g,o.b),s.setXYZ(48,o.r,o.g,o.b),s.setXYZ(49,o.r,o.g,o.b),s.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;Ho.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Qo("c",t,e,Ho,0,0,-1),Qo("t",t,e,Ho,0,0,1),Qo("n1",t,e,Ho,-r,-i,-1),Qo("n2",t,e,Ho,r,-i,-1),Qo("n3",t,e,Ho,-r,i,-1),Qo("n4",t,e,Ho,r,i,-1),Qo("f1",t,e,Ho,-r,-i,1),Qo("f2",t,e,Ho,r,-i,1),Qo("f3",t,e,Ho,-r,i,1),Qo("f4",t,e,Ho,r,i,1),Qo("u1",t,e,Ho,r*.7,i*1.1,-1),Qo("u2",t,e,Ho,-r*.7,i*1.1,-1),Qo("u3",t,e,Ho,0,i*2,-1),Qo("cf1",t,e,Ho,-r,0,1),Qo("cf2",t,e,Ho,r,0,1),Qo("cf3",t,e,Ho,0,-i,1),Qo("cf4",t,e,Ho,0,i,1),Qo("cn1",t,e,Ho,-r,0,-1),Qo("cn2",t,e,Ho,r,0,-1),Qo("cn3",t,e,Ho,0,-i,-1),Qo("cn4",t,e,Ho,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Qo(n,e,t,r,i,o,a){Mx.set(i,o,a).unproject(r);const s=e[n];if(s!==void 0){const l=t.getAttribute("position");for(let u=0,c=s.length;u<c;u++)l.setXYZ(s[u],Mx.x,Mx.y,Mx.z)}}const Cx=new rl;class $oe extends Cf{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),o=new wr;o.setIndex(new Oi(r,1)),o.setAttribute("position",new Oi(i,3)),super(o,new al({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Cx.setFromObject(this.object),Cx.isEmpty())return;const t=Cx.min,r=Cx.max,i=this.geometry.attributes.position,o=i.array;o[0]=r.x,o[1]=r.y,o[2]=r.z,o[3]=t.x,o[4]=r.y,o[5]=r.z,o[6]=t.x,o[7]=t.y,o[8]=r.z,o[9]=r.x,o[10]=t.y,o[11]=r.z,o[12]=r.x,o[13]=r.y,o[14]=t.z,o[15]=t.x,o[16]=r.y,o[17]=t.z,o[18]=t.x,o[19]=t.y,o[20]=t.z,o[21]=r.x,o[22]=t.y,o[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Xoe extends Cf{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new wr;o.setIndex(new Oi(r,1)),o.setAttribute("position",new Ln(i,3)),super(o,new al({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Yoe extends mh{constructor(e,t=1,r=16776960){const i=r,o=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new wr;a.setAttribute("position",new Ln(o,3)),a.computeBoundingSphere(),super(a,new al({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const s=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new wr;l.setAttribute("position",new Ln(s,3)),l.computeBoundingSphere(),this.add(new Co(l,new pd({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const SO=new Pe;let Px,M2;class Koe extends ti{constructor(e=new Pe(0,0,1),t=new Pe(0,0,0),r=1,i=16776960,o=r*.2,a=o*.2){super(),this.type="ArrowHelper",Px===void 0&&(Px=new wr,Px.setAttribute("position",new Ln([0,0,0,0,1,0],3)),M2=new Kg(0,.5,1,5,1),M2.translate(0,-.5,0)),this.position.copy(t),this.line=new mh(Px,new al({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Co(M2,new pd({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,o,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{SO.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(SO,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Joe extends Cf{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new wr;i.setAttribute("position",new Ln(t,3)),i.setAttribute("color",new Ln(r,3));const o=new al({vertexColors:!0,toneMapped:!1});super(i,o),this.type="AxesHelper"}setColors(e,t,r){const i=new xn,o=this.geometry.attributes.color.array;return i.set(e),i.toArray(o,0),i.toArray(o,3),i.set(t),i.toArray(o,6),i.toArray(o,9),i.set(r),i.toArray(o,12),i.toArray(o,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Zoe{constructor(){this.type="ShapePath",this.color=new xn,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new k0,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,o,a){return this.currentPath.bezierCurveTo(e,t,r,i,o,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(_){const w=[];for(let A=0,E=_.length;A<E;A++){const P=_[A],O=new Cp;O.curves=P.curves,w.push(O)}return w}function r(_,w){const A=w.length;let E=!1;for(let P=A-1,O=0;O<A;P=O++){let L=w[P],D=w[O],F=D.x-L.x,U=D.y-L.y;if(Math.abs(U)>Number.EPSILON){if(U<0&&(L=w[O],F=-F,D=w[P],U=-U),_.y<L.y||_.y>D.y)continue;if(_.y===L.y){if(_.x===L.x)return!0}else{const k=U*(_.x-L.x)-F*(_.y-L.y);if(k===0)return!0;if(k<0)continue;E=!E}}else{if(_.y!==L.y)continue;if(D.x<=_.x&&_.x<=L.x||L.x<=_.x&&_.x<=D.x)return!0}}return E}const i=yf.isClockWise,o=this.subPaths;if(o.length===0)return[];let a,s,l;const u=[];if(o.length===1)return s=o[0],l=new Cp,l.curves=s.curves,u.push(l),u;let c=!i(o[0].getPoints());c=e?!c:c;const f=[],h=[];let p=[],v=0,S;h[v]=void 0,p[v]=[];for(let _=0,w=o.length;_<w;_++)s=o[_],S=s.getPoints(),a=i(S),a=e?!a:a,a?(!c&&h[v]&&v++,h[v]={s:new Cp,p:S},h[v].s.curves=s.curves,c&&v++,p[v]=[]):p[v].push({h:s,p:S[0]});if(!h[0])return t(o);if(h.length>1){let _=!1,w=0;for(let A=0,E=h.length;A<E;A++)f[A]=[];for(let A=0,E=h.length;A<E;A++){const P=p[A];for(let O=0;O<P.length;O++){const L=P[O];let D=!0;for(let F=0;F<h.length;F++)r(L.p,h[F].p)&&(A!==F&&w++,D?(D=!1,f[F].push(L)):_=!0);D&&f[A].push(L)}}w>0&&_===!1&&(p=f)}let y;for(let _=0,w=h.length;_<w;_++){l=h[_].s,u.push(l),y=p[_];for(let A=0,E=y.length;A<E;A++)l.holes.push(y[A].h)}return u}}class Qoe extends Mf{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}class eae extends Bl{constructor(e=1,t=1,r=1,i={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,t,{...i,count:r}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Wg}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Wg);const tae=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:_P,AddEquation:rh,AddOperation:yz,AdditiveAnimationBlendMode:PP,AdditiveBlending:mC,AgXToneMapping:bz,AlphaFormat:bP,AlwaysCompare:Uz,AlwaysDepth:h_,AlwaysStencilFunc:_C,AmbientLight:F7,AnimationAction:W7,AnimationClip:V0,AnimationLoader:noe,AnimationMixer:Poe,AnimationObjectGroup:Moe,AnimationUtils:Zie,ArcCurve:s7,ArrayCamera:Zz,ArrowHelper:Koe,AttachedBindMode:yC,Audio:G7,AudioAnalyser:voe,AudioContext:nI,AudioListener:poe,AudioLoader:foe,AxesHelper:Joe,BackSide:nl,BasicDepthPacking:Pz,BasicShadowMap:Z8,BatchedMesh:i7,Bone:VP,BooleanKeyframeTrack:Kp,Box2:koe,Box3:rl,Box3Helper:Xoe,BoxGeometry:Yp,BoxHelper:$oe,BufferAttribute:Oi,BufferGeometry:wr,BufferGeometryLoader:V7,ByteType:JS,Cache:Qf,Camera:zy,CameraHelper:joe,CanvasTexture:wie,CapsuleGeometry:hw,CatmullRomCurve3:l7,CineonToneMapping:Sz,CircleGeometry:pw,ClampToEdgeWrapping:va,Clock:rI,Color:xn,ColorKeyframeTrack:QP,ColorManagement:Gr,CompressedArrayTexture:_ie,CompressedCubeTexture:Sie,CompressedTexture:fw,CompressedTextureLoader:roe,ConeGeometry:mw,ConstantAlphaFactor:mz,ConstantColorFactor:hz,Controls:Qoe,CubeCamera:Wz,CubeReflectionMapping:bf,CubeRefractionMapping:ph,CubeTexture:Hy,CubeTextureLoader:N7,CubeUVReflectionMapping:jg,CubicBezierCurve:WP,CubicBezierCurve3:u7,CubicInterpolant:C7,CullFaceBack:pC,CullFaceFront:J8,CullFaceFrontBack:QJ,CullFaceNone:K8,Curve:Fc,CurvePath:f7,CustomBlending:Q8,CustomToneMapping:wz,CylinderGeometry:Kg,Cylindrical:Doe,Data3DTexture:NP,DataArrayTexture:iw,DataTexture:Lc,DataTextureLoader:eI,DataUtils:mp,DecrementStencilOp:dZ,DecrementWrapStencilOp:pZ,DefaultLoadingManager:R7,DepthFormat:Ep,DepthStencilFormat:Bp,DepthTexture:ow,DetachedBindMode:Ez,DirectionalLight:k7,DirectionalLightHelper:Woe,DiscreteInterpolant:P7,DodecahedronGeometry:gw,DoubleSide:Cc,DstAlphaFactor:lz,DstColorFactor:cz,DynamicCopyUsage:PZ,DynamicDrawUsage:bZ,DynamicReadUsage:TZ,EdgesGeometry:d7,EllipseCurve:dw,EqualCompare:Oz,EqualDepth:m_,EqualStencilFunc:yZ,EquirectangularReflectionMapping:mg,EquirectangularRefractionMapping:C0,Euler:du,EventDispatcher:Mf,ExtrudeGeometry:yw,FileLoader:fu,Float16BufferAttribute:gQ,Float32BufferAttribute:Ln,FloatType:go,Fog:lw,FogExp2:sw,FramebufferTexture:xie,FrontSide:ld,Frustum:Vy,GLBufferAttribute:Loe,GLSL1:RZ,GLSL3:SC,GreaterCompare:Dz,GreaterDepth:v_,GreaterEqualCompare:Fz,GreaterEqualDepth:g_,GreaterEqualStencilFunc:wZ,GreaterStencilFunc:_Z,GridHelper:Goe,Group:tg,HalfFloatType:La,HemisphereLight:L7,HemisphereLightHelper:Voe,IcosahedronGeometry:qy,ImageBitmapLoader:coe,ImageLoader:G0,ImageUtils:Hz,IncrementStencilOp:fZ,IncrementWrapStencilOp:hZ,InstancedBufferAttribute:_g,InstancedBufferGeometry:H7,InstancedInterleavedBuffer:Noe,InstancedMesh:r7,Int16BufferAttribute:pQ,Int32BufferAttribute:mQ,Int8BufferAttribute:fQ,IntType:ky,InterleavedBuffer:uw,InterleavedBufferAttribute:zp,Interpolant:$y,InterpolateDiscrete:R0,InterpolateLinear:W_,InterpolateSmooth:e_,InvertStencilOp:mZ,KeepStencilOp:ap,KeyframeTrack:Uc,LOD:t7,LatheGeometry:Gy,Layers:Mp,LessCompare:Lz,LessDepth:p_,LessEqualCompare:IP,LessEqualDepth:Fp,LessEqualStencilFunc:xZ,LessStencilFunc:vZ,Light:wh,LightProbe:z7,Line:mh,Line3:Foe,LineBasicMaterial:al,LineCurve:jP,LineCurve3:c7,LineDashedMaterial:E7,LineLoop:o7,LineSegments:Cf,LinearFilter:mi,LinearInterpolant:ZP,LinearMipMapLinearFilter:xC,LinearMipMapNearestFilter:nZ,LinearMipmapLinearFilter:ff,LinearMipmapNearestFilter:o0,LinearSRGBColorSpace:Ef,LinearToneMapping:xz,LinearTransfer:By,Loader:sl,LoaderUtils:PC,LoadingManager:Ew,LoopOnce:Tz,LoopPingPong:Cz,LoopRepeat:Mz,LuminanceAlphaFormat:TP,LuminanceFormat:EP,MOUSE:JJ,Material:ds,MaterialLoader:Tw,MathUtils:Du,Matrix2:lI,Matrix3:yr,Matrix4:Qn,MaxEquation:rz,Mesh:Co,MeshBasicMaterial:pd,MeshDepthMaterial:UP,MeshDistanceMaterial:BP,MeshLambertMaterial:b7,MeshMatcapMaterial:A7,MeshNormalMaterial:w7,MeshPhongMaterial:_7,MeshPhysicalMaterial:x7,MeshStandardMaterial:KP,MeshToonMaterial:S7,MinEquation:nz,MirroredRepeatWrapping:I0,MixOperation:vz,MultiplyBlending:vC,MultiplyOperation:Dy,NearestFilter:fs,NearestMipMapLinearFilter:tZ,NearestMipMapNearestFilter:eZ,NearestMipmapLinearFilter:Zm,NearestMipmapNearestFilter:SP,NeutralToneMapping:Az,NeverCompare:Nz,NeverDepth:d_,NeverStencilFunc:gZ,NoBlending:gf,NoColorSpace:Jf,NoToneMapping:vf,NormalAnimationBlendMode:rw,NormalBlending:Ap,NotEqualCompare:kz,NotEqualDepth:y_,NotEqualStencilFunc:SZ,NumberKeyframeTrack:z0,Object3D:ti,ObjectLoader:loe,ObjectSpaceNormalMap:Rz,OctahedronGeometry:Wy,OneFactor:oz,OneMinusConstantAlphaFactor:gz,OneMinusConstantColorFactor:pz,OneMinusDstAlphaFactor:uz,OneMinusDstColorFactor:fz,OneMinusSrcAlphaFactor:f_,OneMinusSrcColorFactor:sz,OrthographicCamera:Xg,PCFShadowMap:KS,PCFSoftShadowMap:i0,PMREMGenerator:wC,Path:k0,PerspectiveCamera:Qa,Plane:eh,PlaneGeometry:_h,PlaneHelper:Yoe,PointLight:D7,PointLightHelper:zoe,Points:a7,PointsMaterial:GP,PolarGridHelper:qoe,PolyhedronGeometry:Sh,PositionalAudio:goe,PropertyBinding:ei,PropertyMixer:q7,QuadraticBezierCurve:$P,QuadraticBezierCurve3:XP,Quaternion:kl,QuaternionKeyframeTrack:Xy,QuaternionLinearInterpolant:I7,RED_GREEN_RGTC2_Format:G_,RED_RGTC1_Format:CP,REVISION:Wg,RGBADepthPacking:Iz,RGBAFormat:ia,RGBAIntegerFormat:nw,RGBA_ASTC_10x10_Format:F_,RGBA_ASTC_10x5_Format:O_,RGBA_ASTC_10x6_Format:D_,RGBA_ASTC_10x8_Format:k_,RGBA_ASTC_12x10_Format:U_,RGBA_ASTC_12x12_Format:B_,RGBA_ASTC_4x4_Format:T_,RGBA_ASTC_5x4_Format:M_,RGBA_ASTC_5x5_Format:C_,RGBA_ASTC_6x5_Format:P_,RGBA_ASTC_6x6_Format:I_,RGBA_ASTC_8x5_Format:R_,RGBA_ASTC_8x6_Format:N_,RGBA_ASTC_8x8_Format:L_,RGBA_BPTC_Format:c0,RGBA_ETC2_EAC_Format:E_,RGBA_PVRTC_2BPPV1_Format:w_,RGBA_PVRTC_4BPPV1_Format:S_,RGBA_S3TC_DXT1_Format:s0,RGBA_S3TC_DXT3_Format:l0,RGBA_S3TC_DXT5_Format:u0,RGBDepthPacking:sZ,RGBFormat:AP,RGBIntegerFormat:rZ,RGB_BPTC_SIGNED_Format:z_,RGB_BPTC_UNSIGNED_Format:H_,RGB_ETC1_Format:b_,RGB_ETC2_Format:A_,RGB_PVRTC_2BPPV1_Format:__,RGB_PVRTC_4BPPV1_Format:x_,RGB_S3TC_DXT1_Format:a0,RGDepthPacking:lZ,RGFormat:MP,RGIntegerFormat:tw,RawShaderMaterial:y7,Ray:$g,Raycaster:sI,RectAreaLight:U7,RedFormat:Fy,RedIntegerFormat:Uy,ReinhardToneMapping:_z,RenderTarget:Vz,RepeatWrapping:P0,ReplaceStencilOp:cZ,ReverseSubtractEquation:tz,RingGeometry:xw,SIGNED_RED_GREEN_RGTC2_Format:q_,SIGNED_RED_RGTC1_Format:V_,SRGBColorSpace:Zs,SRGBTransfer:Ti,Scene:xg,ShaderChunk:br,ShaderLib:Mc,ShaderMaterial:ol,ShadowMaterial:v7,Shape:Cp,ShapeGeometry:_w,ShapePath:Zoe,ShapeUtils:yf,ShortType:ZS,Skeleton:cw,SkeletonHelper:Boe,SkinnedMesh:n7,Source:pp,Sphere:Ds,SphereGeometry:jy,Spherical:Ooe,SphericalHarmonics3:B7,SplineCurve:YP,SpotLight:O7,SpotLightHelper:Uoe,Sprite:e7,SpriteMaterial:HP,SrcAlphaFactor:c_,SrcAlphaSaturateFactor:dz,SrcColorFactor:az,StaticCopyUsage:CZ,StaticDrawUsage:L0,StaticReadUsage:EZ,StereoCamera:doe,StreamCopyUsage:IZ,StreamDrawUsage:AZ,StreamReadUsage:MZ,StringKeyframeTrack:Jp,SubtractEquation:ez,SubtractiveBlending:gC,TOUCH:ZJ,TangentSpaceNormalMap:xh,TetrahedronGeometry:Sw,Texture:Mi,TextureLoader:ioe,TextureUtils:Qre,TorusGeometry:ww,TorusKnotGeometry:bw,Triangle:Ll,TriangleFanDrawMode:aZ,TriangleStripDrawMode:oZ,TrianglesDrawMode:iZ,TubeGeometry:Aw,UVMapping:hh,Uint16BufferAttribute:LP,Uint32BufferAttribute:OP,Uint8BufferAttribute:dQ,Uint8ClampedBufferAttribute:hQ,Uniform:aI,UniformsGroup:Roe,UniformsLib:pn,UniformsUtils:DP,UnsignedByteType:Ul,UnsignedInt248Type:Up,UnsignedInt5999Type:wP,UnsignedIntType:Af,UnsignedShort4444Type:QS,UnsignedShort5551Type:ew,UnsignedShortType:gg,VSMShadowMap:Ac,Vector2:zt,Vector3:Pe,Vector4:Yr,VectorKeyframeTrack:H0,VideoTexture:yie,WebGL3DRenderTarget:tQ,WebGLArrayRenderTarget:eQ,WebGLCoordinateSystem:df,WebGLCubeRenderTarget:kP,WebGLMultipleRenderTargets:eae,WebGLRenderTarget:Bl,WebGLRenderer:zP,WebGLUtils:Jz,WebGPUCoordinateSystem:O0,WireframeGeometry:g7,WrapAroundEnding:N0,ZeroCurvatureEnding:dp,ZeroFactor:iz,ZeroSlopeEnding:hp,ZeroStencilOp:uZ,createCanvasElement:zz},Symbol.toStringTag,{value:"Module"}));var C2={exports:{}},Xd={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wO;function nae(){return wO||(wO=1,Xd.ConcurrentRoot=1,Xd.ContinuousEventPriority=4,Xd.DefaultEventPriority=16,Xd.DiscreteEventPriority=1,Xd.IdleEventPriority=536870912,Xd.LegacyRoot=0),Xd}var bO;function rae(){return bO||(bO=1,C2.exports=nae()),C2.exports}var rg=rae();function iae(n){let e;const t=new Set,r=(u,c)=>{const f=typeof u=="function"?u(e):u;if(f!==e){const h=e;e=c?f:Object.assign({},e,f),t.forEach(p=>p(e,h))}},i=()=>e,o=(u,c=i,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let h=c(e);function p(){const v=c(e);if(!f(h,v)){const S=h;u(h=v,S)}}return t.add(p),()=>t.delete(p)},l={setState:r,getState:i,subscribe:(u,c,f)=>c||f?o(u,c,f):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=n(r,i,l),l}const oae=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),AO=oae?Me.useEffect:Me.useLayoutEffect;function $7(n){const e=typeof n=="function"?iae(n):n,t=(r=e.getState,i=Object.is)=>{const[,o]=Me.useReducer(y=>y+1,0),a=e.getState(),s=Me.useRef(a),l=Me.useRef(r),u=Me.useRef(i),c=Me.useRef(!1),f=Me.useRef();f.current===void 0&&(f.current=r(a));let h,p=!1;(s.current!==a||l.current!==r||u.current!==i||c.current)&&(h=r(a),p=!i(f.current,h)),AO(()=>{p&&(f.current=h),s.current=a,l.current=r,u.current=i,c.current=!1});const v=Me.useRef(a);AO(()=>{const y=()=>{try{const w=e.getState(),A=l.current(w);u.current(f.current,A)||(s.current=w,f.current=A,o())}catch{c.current=!0,o()}},_=e.subscribe(y);return e.getState()!==v.current&&y(),_},[]);const S=p?h:f.current;return Me.useDebugValue(S),S};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}const aae=n=>typeof n=="object"&&typeof n.then=="function",vp=[];function X7(n,e,t=(r,i)=>r===i){if(n===e)return!0;if(!n||!e)return!1;const r=n.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!t(n[i],e[i]))return!1;return!0}function Y7(n,e=null,t=!1,r={}){e===null&&(e=[n]);for(const o of vp)if(X7(e,o.keys,o.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(o,"error"))throw o.error;if(Object.prototype.hasOwnProperty.call(o,"response"))return r.lifespan&&r.lifespan>0&&(o.timeout&&clearTimeout(o.timeout),o.timeout=setTimeout(o.remove,r.lifespan)),o.response;if(!t)throw o.promise}const i={keys:e,equal:r.equal,remove:()=>{const o=vp.indexOf(i);o!==-1&&vp.splice(o,1)},promise:(aae(n)?n:n(...e)).then(o=>{i.response=o,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(o=>i.error=o)};if(vp.push(i),!t)throw i.promise}const sae=(n,e,t)=>Y7(n,e,!1,t),lae=(n,e,t)=>void Y7(n,e,!0,t),uae=n=>{if(n===void 0||n.length===0)vp.splice(0,vp.length);else{const e=vp.find(t=>X7(n,t.keys,t.equal));e&&e.remove()}};var P2={exports:{}},I2={exports:{}},R2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EO;function cae(){return EO||(EO=1,(function(n){function e(X,Z){var oe=X.length;X.push(Z);e:for(;0<oe;){var ee=oe-1>>>1,G=X[ee];if(0<i(G,Z))X[ee]=Z,X[oe]=G,oe=ee;else break e}}function t(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var Z=X[0],oe=X.pop();if(oe!==Z){X[0]=oe;e:for(var ee=0,G=X.length,ne=G>>>1;ee<ne;){var te=2*(ee+1)-1,de=X[te],me=te+1,be=X[me];if(0>i(de,oe))me<G&&0>i(be,de)?(X[ee]=be,X[me]=oe,ee=me):(X[ee]=de,X[te]=oe,ee=te);else if(me<G&&0>i(be,oe))X[ee]=be,X[me]=oe,ee=me;else break e}}return Z}function i(X,Z){var oe=X.sortIndex-Z.sortIndex;return oe!==0?oe:X.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();n.unstable_now=function(){return a.now()-s}}var l=[],u=[],c=1,f=null,h=3,p=!1,v=!1,S=!1,y=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(X){for(var Z=t(u);Z!==null;){if(Z.callback===null)r(u);else if(Z.startTime<=X)r(u),Z.sortIndex=Z.expirationTime,e(l,Z);else break;Z=t(u)}}function E(X){if(S=!1,A(X),!v)if(t(l)!==null)v=!0,Y(P);else{var Z=t(u);Z!==null&&Q(E,Z.startTime-X)}}function P(X,Z){v=!1,S&&(S=!1,_(D),D=-1),p=!0;var oe=h;try{for(A(Z),f=t(l);f!==null&&(!(f.expirationTime>Z)||X&&!k());){var ee=f.callback;if(typeof ee=="function"){f.callback=null,h=f.priorityLevel;var G=ee(f.expirationTime<=Z);Z=n.unstable_now(),typeof G=="function"?f.callback=G:f===t(l)&&r(l),A(Z)}else r(l);f=t(l)}if(f!==null)var ne=!0;else{var te=t(u);te!==null&&Q(E,te.startTime-Z),ne=!1}return ne}finally{f=null,h=oe,p=!1}}var O=!1,L=null,D=-1,F=5,U=-1;function k(){return!(n.unstable_now()-U<F)}function z(){if(L!==null){var X=n.unstable_now();U=X;var Z=!0;try{Z=L(!0,X)}finally{Z?W():(O=!1,L=null)}}else O=!1}var W;if(typeof w=="function")W=function(){w(z)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,se=j.port2;j.port1.onmessage=z,W=function(){se.postMessage(null)}}else W=function(){y(z,0)};function Y(X){L=X,O||(O=!0,W())}function Q(X,Z){D=y(function(){X(n.unstable_now())},Z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_continueExecution=function(){v||p||(v=!0,Y(P))},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(X){switch(h){case 1:case 2:case 3:var Z=3;break;default:Z=h}var oe=h;h=Z;try{return X()}finally{h=oe}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(X,Z){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var oe=h;h=X;try{return Z()}finally{h=oe}},n.unstable_scheduleCallback=function(X,Z,oe){var ee=n.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?ee+oe:ee):oe=ee,X){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=oe+G,X={id:c++,callback:Z,priorityLevel:X,startTime:oe,expirationTime:G,sortIndex:-1},oe>ee?(X.sortIndex=oe,e(u,X),t(l)===null&&X===t(u)&&(S?(_(D),D=-1):S=!0,Q(E,oe-ee))):(X.sortIndex=G,e(l,X),v||p||(v=!0,Y(P))),X},n.unstable_shouldYield=k,n.unstable_wrapCallback=function(X){var Z=h;return function(){var oe=h;h=Z;try{return X.apply(this,arguments)}finally{h=oe}}}})(R2)),R2}var TO;function K7(){return TO||(TO=1,I2.exports=cae()),I2.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N2,MO;function fae(){return MO||(MO=1,N2=function(e){var t={},r=VS(),i=K7(),o=Object.assign;function a(g){for(var x="https://reactjs.org/docs/error-decoder.html?invariant="+g,I=1;I<arguments.length;I++)x+="&args[]="+encodeURIComponent(arguments[I]);return"Minified React error #"+g+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),v=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),E=Symbol.for("react.offscreen"),P=Symbol.iterator;function O(g){return g===null||typeof g!="object"?null:(g=P&&g[P]||g["@@iterator"],typeof g=="function"?g:null)}function L(g){if(g==null)return null;if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g;switch(g){case c:return"Fragment";case u:return"Portal";case h:return"Profiler";case f:return"StrictMode";case y:return"Suspense";case _:return"SuspenseList"}if(typeof g=="object")switch(g.$$typeof){case v:return(g.displayName||"Context")+".Consumer";case p:return(g._context.displayName||"Context")+".Provider";case S:var x=g.render;return g=g.displayName,g||(g=x.displayName||x.name||"",g=g!==""?"ForwardRef("+g+")":"ForwardRef"),g;case w:return x=g.displayName||null,x!==null?x:L(g.type)||"Memo";case A:x=g._payload,g=g._init;try{return L(g(x))}catch{}}return null}function D(g){var x=g.type;switch(g.tag){case 24:return"Cache";case 9:return(x.displayName||"Context")+".Consumer";case 10:return(x._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return g=x.render,g=g.displayName||g.name||"",x.displayName||(g!==""?"ForwardRef("+g+")":"ForwardRef");case 7:return"Fragment";case 5:return x;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return L(x);case 8:return x===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof x=="function")return x.displayName||x.name||null;if(typeof x=="string")return x}return null}function F(g){var x=g,I=g;if(g.alternate)for(;x.return;)x=x.return;else{g=x;do x=g,(x.flags&4098)!==0&&(I=x.return),g=x.return;while(g)}return x.tag===3?I:null}function U(g){if(F(g)!==g)throw Error(a(188))}function k(g){var x=g.alternate;if(!x){if(x=F(g),x===null)throw Error(a(188));return x!==g?null:g}for(var I=g,B=x;;){var $=I.return;if($===null)break;var ie=$.alternate;if(ie===null){if(B=$.return,B!==null){I=B;continue}break}if($.child===ie.child){for(ie=$.child;ie;){if(ie===I)return U($),g;if(ie===B)return U($),x;ie=ie.sibling}throw Error(a(188))}if(I.return!==B.return)I=$,B=ie;else{for(var Oe=!1,et=$.child;et;){if(et===I){Oe=!0,I=$,B=ie;break}if(et===B){Oe=!0,B=$,I=ie;break}et=et.sibling}if(!Oe){for(et=ie.child;et;){if(et===I){Oe=!0,I=ie,B=$;break}if(et===B){Oe=!0,B=ie,I=$;break}et=et.sibling}if(!Oe)throw Error(a(189))}}if(I.alternate!==B)throw Error(a(190))}if(I.tag!==3)throw Error(a(188));return I.stateNode.current===I?g:x}function z(g){return g=k(g),g!==null?W(g):null}function W(g){if(g.tag===5||g.tag===6)return g;for(g=g.child;g!==null;){var x=W(g);if(x!==null)return x;g=g.sibling}return null}function j(g){if(g.tag===5||g.tag===6)return g;for(g=g.child;g!==null;){if(g.tag!==4){var x=j(g);if(x!==null)return x}g=g.sibling}return null}var se=Array.isArray,Y=e.getPublicInstance,Q=e.getRootHostContext,X=e.getChildHostContext,Z=e.prepareForCommit,oe=e.resetAfterCommit,ee=e.createInstance,G=e.appendInitialChild,ne=e.finalizeInitialChildren,te=e.prepareUpdate,de=e.shouldSetTextContent,me=e.createTextInstance,be=e.scheduleTimeout,Ie=e.cancelTimeout,Ee=e.noTimeout,Xe=e.isPrimaryRenderer,tt=e.supportsMutation,Te=e.supportsPersistence,Je=e.supportsHydration,Se=e.getInstanceFromNode,Ge=e.preparePortalMount,ye=e.getCurrentEventPriority,Ct=e.detachDeletedInstance,ft=e.supportsMicrotasks,mt=e.scheduleMicrotask,lt=e.supportsTestSelectors,ve=e.findFiberRoot,le=e.getBoundingRect,He=e.getTextContent,rt=e.isHiddenSubtree,vt=e.matchAccessibilityRole,ht=e.setFocusIfFocusable,qt=e.setupIntersectionObserver,Ft=e.appendChild,Rt=e.appendChildToContainer,tn=e.commitTextUpdate,it=e.commitMount,Zt=e.commitUpdate,Xt=e.insertBefore,un=e.insertInContainerBefore,Wt=e.removeChild,mn=e.removeChildFromContainer,fn=e.resetTextContent,nn=e.hideInstance,Ke=e.hideTextInstance,ot=e.unhideInstance,pt=e.unhideTextInstance,It=e.clearContainer,Ht=e.cloneInstance,Lt=e.createContainerChildSet,rn=e.appendChildToContainerChildSet,ir=e.finalizeContainerChildren,$n=e.replaceContainerChildren,Gn=e.cloneHiddenInstance,Br=e.cloneHiddenTextInstance,gn=e.canHydrateInstance,Di=e.canHydrateTextInstance,vi=e.canHydrateSuspenseInstance,Er=e.isSuspenseInstancePending,xr=e.isSuspenseInstanceFallback,Cr=e.registerSuspenseInstanceRetry,zr=e.getNextHydratableSibling,Un=e.getFirstHydratableChild,Po=e.getFirstHydratableChildWithinContainer,uo=e.getFirstHydratableChildWithinSuspenseInstance,ue=e.hydrateInstance,we=e.hydrateTextInstance,ze=e.hydrateSuspenseInstance,ct=e.getNextHydratableInstanceAfterSuspenseInstance,xt=e.commitHydratedContainer,ae=e.commitHydratedSuspenseInstance,Ce=e.clearSuspenseBoundary,De=e.clearSuspenseBoundaryFromContainer,Ue=e.shouldDeleteUnhydratedTailInstances,Re=e.didNotMatchHydratedContainerTextInstance,Ne=e.didNotMatchHydratedTextInstance,Be;function Et(g){if(Be===void 0)try{throw Error()}catch(I){var x=I.stack.trim().match(/\n( *(at )?)/);Be=x&&x[1]||""}return`
`+Be+g}var ut=!1;function St(g,x){if(!g||ut)return"";ut=!0;var I=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(x)if(x=function(){throw Error()},Object.defineProperty(x.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(x,[])}catch(Jt){var B=Jt}Reflect.construct(g,[],x)}else{try{x.call()}catch(Jt){B=Jt}g.call(x.prototype)}else{try{throw Error()}catch(Jt){B=Jt}g()}}catch(Jt){if(Jt&&B&&typeof Jt.stack=="string"){for(var $=Jt.stack.split(`
`),ie=B.stack.split(`
`),Oe=$.length-1,et=ie.length-1;1<=Oe&&0<=et&&$[Oe]!==ie[et];)et--;for(;1<=Oe&&0<=et;Oe--,et--)if($[Oe]!==ie[et]){if(Oe!==1||et!==1)do if(Oe--,et--,0>et||$[Oe]!==ie[et]){var Pt=`
`+$[Oe].replace(" at new "," at ");return g.displayName&&Pt.includes("<anonymous>")&&(Pt=Pt.replace("<anonymous>",g.displayName)),Pt}while(1<=Oe&&0<=et);break}}}finally{ut=!1,Error.prepareStackTrace=I}return(g=g?g.displayName||g.name:"")?Et(g):""}var Bt=Object.prototype.hasOwnProperty,Ot=[],Qt=-1;function cn(g){return{current:g}}function Kt(g){0>Qt||(g.current=Ot[Qt],Ot[Qt]=null,Qt--)}function _n(g,x){Qt++,Ot[Qt]=g.current,g.current=x}var Vt={},kt=cn(Vt),Mn=cn(!1),Sn=Vt;function gr(g,x){var I=g.type.contextTypes;if(!I)return Vt;var B=g.stateNode;if(B&&B.__reactInternalMemoizedUnmaskedChildContext===x)return B.__reactInternalMemoizedMaskedChildContext;var $={},ie;for(ie in I)$[ie]=x[ie];return B&&(g=g.stateNode,g.__reactInternalMemoizedUnmaskedChildContext=x,g.__reactInternalMemoizedMaskedChildContext=$),$}function vr(g){return g=g.childContextTypes,g!=null}function fr(){Kt(Mn),Kt(kt)}function Fn(g,x,I){if(kt.current!==Vt)throw Error(a(168));_n(kt,x),_n(Mn,I)}function kn(g,x,I){var B=g.stateNode;if(x=x.childContextTypes,typeof B.getChildContext!="function")return I;B=B.getChildContext();for(var $ in B)if(!($ in x))throw Error(a(108,D(g)||"Unknown",$));return o({},I,B)}function Pn(g){return g=(g=g.stateNode)&&g.__reactInternalMemoizedMergedChildContext||Vt,Sn=kt.current,_n(kt,g),_n(Mn,Mn.current),!0}function jn(g,x,I){var B=g.stateNode;if(!B)throw Error(a(169));I?(g=kn(g,x,Sn),B.__reactInternalMemoizedMergedChildContext=g,Kt(Mn),Kt(kt),_n(kt,g)):Kt(Mn),_n(Mn,I)}var er=Math.clz32?Math.clz32:Io,Si=Math.log,Pr=Math.LN2;function Io(g){return g>>>=0,g===0?32:31-(Si(g)/Pr|0)|0}var oa=64,Ir=4194304;function ll(g){switch(g&-g){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return g&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return g}}function Wu(g,x){var I=g.pendingLanes;if(I===0)return 0;var B=0,$=g.suspendedLanes,ie=g.pingedLanes,Oe=I&268435455;if(Oe!==0){var et=Oe&~$;et!==0?B=ll(et):(ie&=Oe,ie!==0&&(B=ll(ie)))}else Oe=I&~$,Oe!==0?B=ll(Oe):ie!==0&&(B=ll(ie));if(B===0)return 0;if(x!==0&&x!==B&&(x&$)===0&&($=B&-B,ie=x&-x,$>=ie||$===16&&(ie&4194240)!==0))return x;if((B&4)!==0&&(B|=I&16),x=g.entangledLanes,x!==0)for(g=g.entanglements,x&=B;0<x;)I=31-er(x),$=1<<I,B|=g[I],x&=~$;return B}function Rf(g,x){switch(g){case 1:case 2:case 4:return x+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yd(g,x){for(var I=g.suspendedLanes,B=g.pingedLanes,$=g.expirationTimes,ie=g.pendingLanes;0<ie;){var Oe=31-er(ie),et=1<<Oe,Pt=$[Oe];Pt===-1?((et&I)===0||(et&B)!==0)&&($[Oe]=Rf(et,x)):Pt<=x&&(g.expiredLanes|=et),ie&=~et}}function hs(g){return g=g.pendingLanes&-1073741825,g!==0?g:g&1073741824?1073741824:0}function Vl(g){for(var x=[],I=0;31>I;I++)x.push(g);return x}function ps(g,x,I){g.pendingLanes|=x,x!==536870912&&(g.suspendedLanes=0,g.pingedLanes=0),g=g.eventTimes,x=31-er(x),g[x]=I}function ju(g,x){var I=g.pendingLanes&~x;g.pendingLanes=x,g.suspendedLanes=0,g.pingedLanes=0,g.expiredLanes&=x,g.mutableReadLanes&=x,g.entangledLanes&=x,x=g.entanglements;var B=g.eventTimes;for(g=g.expirationTimes;0<I;){var $=31-er(I),ie=1<<$;x[$]=0,B[$]=-1,g[$]=-1,I&=~ie}}function wi(g,x){var I=g.entangledLanes|=x;for(g=g.entanglements;I;){var B=31-er(I),$=1<<B;$&x|g[B]&x&&(g[B]|=x),I&=~$}}var ur=0;function ms(g){return g&=-g,1<g?4<g?(g&268435455)!==0?16:536870912:4:1}var Bn=i.unstable_scheduleCallback,hu=i.unstable_cancelCallback,ul=i.unstable_shouldYield,cl=i.unstable_requestPaint,zi=i.unstable_now,fl=i.unstable_ImmediatePriority,Vc=i.unstable_UserBlockingPriority,pu=i.unstable_NormalPriority,Gc=i.unstable_IdlePriority,$u=null,gs=null;function Gl(g){if(gs&&typeof gs.onCommitFiberRoot=="function")try{gs.onCommitFiberRoot($u,g,void 0,(g.current.flags&128)===128)}catch{}}function ks(g,x){return g===x&&(g!==0||1/g===1/x)||g!==g&&x!==x}var Hi=typeof Object.is=="function"?Object.is:ks,Ba=null,dl=!1,Xu=!1;function ql(g){Ba===null?Ba=[g]:Ba.push(g)}function Yu(g){dl=!0,ql(g)}function xa(){if(!Xu&&Ba!==null){Xu=!0;var g=0,x=ur;try{var I=Ba;for(ur=1;g<I.length;g++){var B=I[g];do B=B(!0);while(B!==null)}Ba=null,dl=!1}catch($){throw Ba!==null&&(Ba=Ba.slice(g+1)),Bn(fl,xa),$}finally{ur=x,Xu=!1}}return null}var Nf=s.ReactCurrentBatchConfig;function za(g,x){if(Hi(g,x))return!0;if(typeof g!="object"||g===null||typeof x!="object"||x===null)return!1;var I=Object.keys(g),B=Object.keys(x);if(I.length!==B.length)return!1;for(B=0;B<I.length;B++){var $=I[B];if(!Bt.call(x,$)||!Hi(g[$],x[$]))return!1}return!0}function Fs(g){switch(g.tag){case 5:return Et(g.type);case 16:return Et("Lazy");case 13:return Et("Suspense");case 19:return Et("SuspenseList");case 0:case 2:case 15:return g=St(g.type,!1),g;case 11:return g=St(g.type.render,!1),g;case 1:return g=St(g.type,!0),g;default:return""}}function Ki(g,x){if(g&&g.defaultProps){x=o({},x),g=g.defaultProps;for(var I in g)x[I]===void 0&&(x[I]=g[I]);return x}return x}var Ku=cn(null),Ha=null,yo=null,mu=null;function Ji(){mu=yo=Ha=null}function Wl(g,x,I){Xe?(_n(Ku,x._currentValue),x._currentValue=I):(_n(Ku,x._currentValue2),x._currentValue2=I)}function hl(g){var x=Ku.current;Kt(Ku),Xe?g._currentValue=x:g._currentValue2=x}function jl(g,x,I){for(;g!==null;){var B=g.alternate;if((g.childLanes&x)!==x?(g.childLanes|=x,B!==null&&(B.childLanes|=x)):B!==null&&(B.childLanes&x)!==x&&(B.childLanes|=x),g===I)break;g=g.return}}function pl(g,x){Ha=g,mu=yo=null,g=g.dependencies,g!==null&&g.firstContext!==null&&((g.lanes&x)!==0&&(no=!0),g.firstContext=null)}function Ro(g){var x=Xe?g._currentValue:g._currentValue2;if(mu!==g)if(g={context:g,memoizedValue:x,next:null},yo===null){if(Ha===null)throw Error(a(308));yo=g,Ha.dependencies={lanes:0,firstContext:g}}else yo=yo.next=g;return x}var _a=null,Wo=!1;function ml(g){g.updateQueue={baseState:g.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ju(g,x){g=g.updateQueue,x.updateQueue===g&&(x.updateQueue={baseState:g.baseState,firstBaseUpdate:g.firstBaseUpdate,lastBaseUpdate:g.lastBaseUpdate,shared:g.shared,effects:g.effects})}function vs(g,x){return{eventTime:g,lane:x,tag:0,payload:null,callback:null,next:null}}function gl(g,x){var I=g.updateQueue;I!==null&&(I=I.shared,ji!==null&&(g.mode&1)!==0&&(or&2)===0?(g=I.interleaved,g===null?(x.next=x,_a===null?_a=[I]:_a.push(I)):(x.next=g.next,g.next=x),I.interleaved=x):(g=I.pending,g===null?x.next=x:(x.next=g.next,g.next=x),I.pending=x))}function $l(g,x,I){if(x=x.updateQueue,x!==null&&(x=x.shared,(I&4194240)!==0)){var B=x.lanes;B&=g.pendingLanes,I|=B,x.lanes=I,wi(g,I)}}function vl(g,x){var I=g.updateQueue,B=g.alternate;if(B!==null&&(B=B.updateQueue,I===B)){var $=null,ie=null;if(I=I.firstBaseUpdate,I!==null){do{var Oe={eventTime:I.eventTime,lane:I.lane,tag:I.tag,payload:I.payload,callback:I.callback,next:null};ie===null?$=ie=Oe:ie=ie.next=Oe,I=I.next}while(I!==null);ie===null?$=ie=x:ie=ie.next=x}else $=ie=x;I={baseState:B.baseState,firstBaseUpdate:$,lastBaseUpdate:ie,shared:B.shared,effects:B.effects},g.updateQueue=I;return}g=I.lastBaseUpdate,g===null?I.firstBaseUpdate=x:g.next=x,I.lastBaseUpdate=x}function gu(g,x,I,B){var $=g.updateQueue;Wo=!1;var ie=$.firstBaseUpdate,Oe=$.lastBaseUpdate,et=$.shared.pending;if(et!==null){$.shared.pending=null;var Pt=et,Jt=Pt.next;Pt.next=null,Oe===null?ie=Jt:Oe.next=Jt,Oe=Pt;var bn=g.alternate;bn!==null&&(bn=bn.updateQueue,et=bn.lastBaseUpdate,et!==Oe&&(et===null?bn.firstBaseUpdate=Jt:et.next=Jt,bn.lastBaseUpdate=Pt))}if(ie!==null){var ar=$.baseState;Oe=0,bn=Jt=Pt=null,et=ie;do{var Hn=et.lane,_r=et.eventTime;if((B&Hn)===Hn){bn!==null&&(bn=bn.next={eventTime:_r,lane:0,tag:et.tag,payload:et.payload,callback:et.callback,next:null});e:{var vn=g,Ca=et;switch(Hn=x,_r=I,Ca.tag){case 1:if(vn=Ca.payload,typeof vn=="function"){ar=vn.call(_r,ar,Hn);break e}ar=vn;break e;case 3:vn.flags=vn.flags&-65537|128;case 0:if(vn=Ca.payload,Hn=typeof vn=="function"?vn.call(_r,ar,Hn):vn,Hn==null)break e;ar=o({},ar,Hn);break e;case 2:Wo=!0}}et.callback!==null&&et.lane!==0&&(g.flags|=64,Hn=$.effects,Hn===null?$.effects=[et]:Hn.push(et))}else _r={eventTime:_r,lane:Hn,tag:et.tag,payload:et.payload,callback:et.callback,next:null},bn===null?(Jt=bn=_r,Pt=ar):bn=bn.next=_r,Oe|=Hn;if(et=et.next,et===null){if(et=$.shared.pending,et===null)break;Hn=et,et=Hn.next,Hn.next=null,$.lastBaseUpdate=Hn,$.shared.pending=null}}while(!0);if(bn===null&&(Pt=ar),$.baseState=Pt,$.firstBaseUpdate=Jt,$.lastBaseUpdate=bn,x=$.shared.interleaved,x!==null){$=x;do Oe|=$.lane,$=$.next;while($!==x)}else ie===null&&($.shared.lanes=0);qs|=Oe,g.lanes=Oe,g.memoizedState=ar}}function Xl(g,x,I){if(g=x.effects,x.effects=null,g!==null)for(x=0;x<g.length;x++){var B=g[x],$=B.callback;if($!==null){if(B.callback=null,B=I,typeof $!="function")throw Error(a(191,$));$.call(B)}}}var qc=new r.Component().refs;function H(g,x,I,B){x=g.memoizedState,I=I(B,x),I=I==null?x:o({},x,I),g.memoizedState=I,g.lanes===0&&(g.updateQueue.baseState=I)}var fe={isMounted:function(g){return(g=g._reactInternals)?F(g)===g:!1},enqueueSetState:function(g,x,I){g=g._reactInternals;var B=Mr(),$=as(g),ie=vs(B,$);ie.payload=x,I!=null&&(ie.callback=I),gl(g,ie),x=po(g,$,B),x!==null&&$l(x,g,$)},enqueueReplaceState:function(g,x,I){g=g._reactInternals;var B=Mr(),$=as(g),ie=vs(B,$);ie.tag=1,ie.payload=x,I!=null&&(ie.callback=I),gl(g,ie),x=po(g,$,B),x!==null&&$l(x,g,$)},enqueueForceUpdate:function(g,x){g=g._reactInternals;var I=Mr(),B=as(g),$=vs(I,B);$.tag=2,x!=null&&($.callback=x),gl(g,$),x=po(g,B,I),x!==null&&$l(x,g,B)}};function Le(g,x,I,B,$,ie,Oe){return g=g.stateNode,typeof g.shouldComponentUpdate=="function"?g.shouldComponentUpdate(B,ie,Oe):x.prototype&&x.prototype.isPureReactComponent?!za(I,B)||!za($,ie):!0}function qe(g,x,I){var B=!1,$=Vt,ie=x.contextType;return typeof ie=="object"&&ie!==null?ie=Ro(ie):($=vr(x)?Sn:kt.current,B=x.contextTypes,ie=(B=B!=null)?gr(g,$):Vt),x=new x(I,ie),g.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=fe,g.stateNode=x,x._reactInternals=g,B&&(g=g.stateNode,g.__reactInternalMemoizedUnmaskedChildContext=$,g.__reactInternalMemoizedMaskedChildContext=ie),x}function at(g,x,I,B){g=x.state,typeof x.componentWillReceiveProps=="function"&&x.componentWillReceiveProps(I,B),typeof x.UNSAFE_componentWillReceiveProps=="function"&&x.UNSAFE_componentWillReceiveProps(I,B),x.state!==g&&fe.enqueueReplaceState(x,x.state,null)}function At(g,x,I,B){var $=g.stateNode;$.props=I,$.state=g.memoizedState,$.refs=qc,ml(g);var ie=x.contextType;typeof ie=="object"&&ie!==null?$.context=Ro(ie):(ie=vr(x)?Sn:kt.current,$.context=gr(g,ie)),$.state=g.memoizedState,ie=x.getDerivedStateFromProps,typeof ie=="function"&&(H(g,x,ie,I),$.state=g.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof $.getSnapshotBeforeUpdate=="function"||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(x=$.state,typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount(),x!==$.state&&fe.enqueueReplaceState($,$.state,null),gu(g,I,$,B),$.state=g.memoizedState),typeof $.componentDidMount=="function"&&(g.flags|=4194308)}var Gt=[],ln=0,Rn=null,Xn=0,zn=[],Yn=0,Kr=null,Wr=1,ni="";function Vi(g,x){Gt[ln++]=Xn,Gt[ln++]=Rn,Rn=g,Xn=x}function xo(g,x,I){zn[Yn++]=Wr,zn[Yn++]=ni,zn[Yn++]=Kr,Kr=g;var B=Wr;g=ni;var $=32-er(B)-1;B&=~(1<<$),I+=1;var ie=32-er(x)+$;if(30<ie){var Oe=$-$%5;ie=(B&(1<<Oe)-1).toString(32),B>>=Oe,$-=Oe,Wr=1<<32-er(x)+$|I<<$|B,ni=ie+g}else Wr=1<<ie|I<<$|B,ni=g}function ns(g){g.return!==null&&(Vi(g,1),xo(g,1,0))}function Sa(g){for(;g===Rn;)Rn=Gt[--ln],Gt[ln]=null,Xn=Gt[--ln],Gt[ln]=null;for(;g===Kr;)Kr=zn[--Yn],zn[Yn]=null,ni=zn[--Yn],zn[Yn]=null,Wr=zn[--Yn],zn[Yn]=null}var ki=null,co=null,ri=!1,yl=!1,jo=null;function Zu(g,x){var I=Ws(5,null,null,0);I.elementType="DELETED",I.stateNode=x,I.return=g,x=g.deletions,x===null?(g.deletions=[I],g.flags|=16):x.push(I)}function Qu(g,x){switch(g.tag){case 5:return x=gn(x,g.type,g.pendingProps),x!==null?(g.stateNode=x,ki=g,co=Un(x),!0):!1;case 6:return x=Di(x,g.pendingProps),x!==null?(g.stateNode=x,ki=g,co=null,!0):!1;case 13:if(x=vi(x),x!==null){var I=Kr!==null?{id:Wr,overflow:ni}:null;return g.memoizedState={dehydrated:x,treeContext:I,retryLane:1073741824},I=Ws(18,null,null,0),I.stateNode=x,I.return=g,g.child=I,ki=g,co=null,!0}return!1;default:return!1}}function Yl(g){return(g.mode&1)!==0&&(g.flags&128)===0}function Zi(g){if(ri){var x=co;if(x){var I=x;if(!Qu(g,x)){if(Yl(g))throw Error(a(418));x=zr(I);var B=ki;x&&Qu(g,x)?Zu(B,I):(g.flags=g.flags&-4097|2,ri=!1,ki=g)}}else{if(Yl(g))throw Error(a(418));g.flags=g.flags&-4097|2,ri=!1,ki=g}}}function ec(g){for(g=g.return;g!==null&&g.tag!==5&&g.tag!==3&&g.tag!==13;)g=g.return;ki=g}function xl(g){if(!Je||g!==ki)return!1;if(!ri)return ec(g),ri=!0,!1;if(g.tag!==3&&(g.tag!==5||Ue(g.type)&&!de(g.type,g.memoizedProps))){var x=co;if(x){if(Yl(g)){for(g=co;g;)g=zr(g);throw Error(a(418))}for(;x;)Zu(g,x),x=zr(x)}}if(ec(g),g.tag===13){if(!Je)throw Error(a(316));if(g=g.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(a(317));co=ct(g)}else co=ki?zr(g.stateNode):null;return!0}function Us(){Je&&(co=ki=null,yl=ri=!1)}function vu(g){jo===null?jo=[g]:jo.push(g)}function _o(g,x,I){if(g=I.ref,g!==null&&typeof g!="function"&&typeof g!="object"){if(I._owner){if(I=I._owner,I){if(I.tag!==1)throw Error(a(309));var B=I.stateNode}if(!B)throw Error(a(147,g));var $=B,ie=""+g;return x!==null&&x.ref!==null&&typeof x.ref=="function"&&x.ref._stringRef===ie?x.ref:(x=function(Oe){var et=$.refs;et===qc&&(et=$.refs={}),Oe===null?delete et[ie]:et[ie]=Oe},x._stringRef=ie,x)}if(typeof g!="string")throw Error(a(284));if(!I._owner)throw Error(a(290,g))}return g}function _l(g,x){throw g=Object.prototype.toString.call(x),Error(a(31,g==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":g))}function Sl(g){var x=g._init;return x(g._payload)}function Lf(g){function x(yt,nt){if(g){var bt=yt.deletions;bt===null?(yt.deletions=[nt],yt.flags|=16):bt.push(nt)}}function I(yt,nt){if(!g)return null;for(;nt!==null;)x(yt,nt),nt=nt.sibling;return null}function B(yt,nt){for(yt=new Map;nt!==null;)nt.key!==null?yt.set(nt.key,nt):yt.set(nt.index,nt),nt=nt.sibling;return yt}function $(yt,nt){return yt=dc(yt,nt),yt.index=0,yt.sibling=null,yt}function ie(yt,nt,bt){return yt.index=bt,g?(bt=yt.alternate,bt!==null?(bt=bt.index,bt<nt?(yt.flags|=2,nt):bt):(yt.flags|=2,nt)):(yt.flags|=1048576,nt)}function Oe(yt){return g&&yt.alternate===null&&(yt.flags|=2),yt}function et(yt,nt,bt,hn){return nt===null||nt.tag!==6?(nt=dm(bt,yt.mode,hn),nt.return=yt,nt):(nt=$(nt,bt),nt.return=yt,nt)}function Pt(yt,nt,bt,hn){var Nn=bt.type;return Nn===c?bn(yt,nt,bt.props.children,hn,bt.key):nt!==null&&(nt.elementType===Nn||typeof Nn=="object"&&Nn!==null&&Nn.$$typeof===A&&Sl(Nn)===nt.type)?(hn=$(nt,bt.props),hn.ref=_o(yt,nt,bt),hn.return=yt,hn):(hn=fm(bt.type,bt.key,bt.props,null,yt.mode,hn),hn.ref=_o(yt,nt,bt),hn.return=yt,hn)}function Jt(yt,nt,bt,hn){return nt===null||nt.tag!==4||nt.stateNode.containerInfo!==bt.containerInfo||nt.stateNode.implementation!==bt.implementation?(nt=hm(bt,yt.mode,hn),nt.return=yt,nt):(nt=$(nt,bt.children||[]),nt.return=yt,nt)}function bn(yt,nt,bt,hn,Nn){return nt===null||nt.tag!==7?(nt=Hf(bt,yt.mode,hn,Nn),nt.return=yt,nt):(nt=$(nt,bt),nt.return=yt,nt)}function ar(yt,nt,bt){if(typeof nt=="string"&&nt!==""||typeof nt=="number")return nt=dm(""+nt,yt.mode,bt),nt.return=yt,nt;if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case l:return bt=fm(nt.type,nt.key,nt.props,null,yt.mode,bt),bt.ref=_o(yt,null,nt),bt.return=yt,bt;case u:return nt=hm(nt,yt.mode,bt),nt.return=yt,nt;case A:var hn=nt._init;return ar(yt,hn(nt._payload),bt)}if(se(nt)||O(nt))return nt=Hf(nt,yt.mode,bt,null),nt.return=yt,nt;_l(yt,nt)}return null}function Hn(yt,nt,bt,hn){var Nn=nt!==null?nt.key:null;if(typeof bt=="string"&&bt!==""||typeof bt=="number")return Nn!==null?null:et(yt,nt,""+bt,hn);if(typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case l:return bt.key===Nn?Pt(yt,nt,bt,hn):null;case u:return bt.key===Nn?Jt(yt,nt,bt,hn):null;case A:return Nn=bt._init,Hn(yt,nt,Nn(bt._payload),hn)}if(se(bt)||O(bt))return Nn!==null?null:bn(yt,nt,bt,hn,null);_l(yt,bt)}return null}function _r(yt,nt,bt,hn,Nn){if(typeof hn=="string"&&hn!==""||typeof hn=="number")return yt=yt.get(bt)||null,et(nt,yt,""+hn,Nn);if(typeof hn=="object"&&hn!==null){switch(hn.$$typeof){case l:return yt=yt.get(hn.key===null?bt:hn.key)||null,Pt(nt,yt,hn,Nn);case u:return yt=yt.get(hn.key===null?bt:hn.key)||null,Jt(nt,yt,hn,Nn);case A:var dr=hn._init;return _r(yt,nt,bt,dr(hn._payload),Nn)}if(se(hn)||O(hn))return yt=yt.get(bt)||null,bn(nt,yt,hn,Nn,null);_l(nt,hn)}return null}function vn(yt,nt,bt,hn){for(var Nn=null,dr=null,sr=nt,Vr=nt=0,Uo=null;sr!==null&&Vr<bt.length;Vr++){sr.index>Vr?(Uo=sr,sr=null):Uo=sr.sibling;var Ur=Hn(yt,sr,bt[Vr],hn);if(Ur===null){sr===null&&(sr=Uo);break}g&&sr&&Ur.alternate===null&&x(yt,sr),nt=ie(Ur,nt,Vr),dr===null?Nn=Ur:dr.sibling=Ur,dr=Ur,sr=Uo}if(Vr===bt.length)return I(yt,sr),ri&&Vi(yt,Vr),Nn;if(sr===null){for(;Vr<bt.length;Vr++)sr=ar(yt,bt[Vr],hn),sr!==null&&(nt=ie(sr,nt,Vr),dr===null?Nn=sr:dr.sibling=sr,dr=sr);return ri&&Vi(yt,Vr),Nn}for(sr=B(yt,sr);Vr<bt.length;Vr++)Uo=_r(sr,yt,Vr,bt[Vr],hn),Uo!==null&&(g&&Uo.alternate!==null&&sr.delete(Uo.key===null?Vr:Uo.key),nt=ie(Uo,nt,Vr),dr===null?Nn=Uo:dr.sibling=Uo,dr=Uo);return g&&sr.forEach(function(hc){return x(yt,hc)}),ri&&Vi(yt,Vr),Nn}function Ca(yt,nt,bt,hn){var Nn=O(bt);if(typeof Nn!="function")throw Error(a(150));if(bt=Nn.call(bt),bt==null)throw Error(a(151));for(var dr=Nn=null,sr=nt,Vr=nt=0,Uo=null,Ur=bt.next();sr!==null&&!Ur.done;Vr++,Ur=bt.next()){sr.index>Vr?(Uo=sr,sr=null):Uo=sr.sibling;var hc=Hn(yt,sr,Ur.value,hn);if(hc===null){sr===null&&(sr=Uo);break}g&&sr&&hc.alternate===null&&x(yt,sr),nt=ie(hc,nt,Vr),dr===null?Nn=hc:dr.sibling=hc,dr=hc,sr=Uo}if(Ur.done)return I(yt,sr),ri&&Vi(yt,Vr),Nn;if(sr===null){for(;!Ur.done;Vr++,Ur=bt.next())Ur=ar(yt,Ur.value,hn),Ur!==null&&(nt=ie(Ur,nt,Vr),dr===null?Nn=Ur:dr.sibling=Ur,dr=Ur);return ri&&Vi(yt,Vr),Nn}for(sr=B(yt,sr);!Ur.done;Vr++,Ur=bt.next())Ur=_r(sr,yt,Vr,Ur.value,hn),Ur!==null&&(g&&Ur.alternate!==null&&sr.delete(Ur.key===null?Vr:Ur.key),nt=ie(Ur,nt,Vr),dr===null?Nn=Ur:dr.sibling=Ur,dr=Ur);return g&&sr.forEach(function(uv){return x(yt,uv)}),ri&&Vi(yt,Vr),Nn}function js(yt,nt,bt,hn){if(typeof bt=="object"&&bt!==null&&bt.type===c&&bt.key===null&&(bt=bt.props.children),typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case l:e:{for(var Nn=bt.key,dr=nt;dr!==null;){if(dr.key===Nn){if(Nn=bt.type,Nn===c){if(dr.tag===7){I(yt,dr.sibling),nt=$(dr,bt.props.children),nt.return=yt,yt=nt;break e}}else if(dr.elementType===Nn||typeof Nn=="object"&&Nn!==null&&Nn.$$typeof===A&&Sl(Nn)===dr.type){I(yt,dr.sibling),nt=$(dr,bt.props),nt.ref=_o(yt,dr,bt),nt.return=yt,yt=nt;break e}I(yt,dr);break}else x(yt,dr);dr=dr.sibling}bt.type===c?(nt=Hf(bt.props.children,yt.mode,hn,bt.key),nt.return=yt,yt=nt):(hn=fm(bt.type,bt.key,bt.props,null,yt.mode,hn),hn.ref=_o(yt,nt,bt),hn.return=yt,yt=hn)}return Oe(yt);case u:e:{for(dr=bt.key;nt!==null;){if(nt.key===dr)if(nt.tag===4&&nt.stateNode.containerInfo===bt.containerInfo&&nt.stateNode.implementation===bt.implementation){I(yt,nt.sibling),nt=$(nt,bt.children||[]),nt.return=yt,yt=nt;break e}else{I(yt,nt);break}else x(yt,nt);nt=nt.sibling}nt=hm(bt,yt.mode,hn),nt.return=yt,yt=nt}return Oe(yt);case A:return dr=bt._init,js(yt,nt,dr(bt._payload),hn)}if(se(bt))return vn(yt,nt,bt,hn);if(O(bt))return Ca(yt,nt,bt,hn);_l(yt,bt)}return typeof bt=="string"&&bt!==""||typeof bt=="number"?(bt=""+bt,nt!==null&&nt.tag===6?(I(yt,nt.sibling),nt=$(nt,bt),nt.return=yt,yt=nt):(I(yt,nt),nt=dm(bt,yt.mode,hn),nt.return=yt,yt=nt),Oe(yt)):I(yt,nt)}return js}var So=Lf(!0),Wc=Lf(!1),yu={},aa=cn(yu),Va=cn(yu),No=cn(yu);function Qi(g){if(g===yu)throw Error(a(174));return g}function Bs(g,x){_n(No,x),_n(Va,g),_n(aa,yu),g=Q(x),Kt(aa),_n(aa,g)}function wa(){Kt(aa),Kt(Va),Kt(No)}function wl(g){var x=Qi(No.current),I=Qi(aa.current);x=X(I,g.type,x),I!==x&&(_n(Va,g),_n(aa,x))}function xu(g){Va.current===g&&(Kt(aa),Kt(Va))}var Or=cn(0);function Kl(g){for(var x=g;x!==null;){if(x.tag===13){var I=x.memoizedState;if(I!==null&&(I=I.dehydrated,I===null||Er(I)||xr(I)))return x}else if(x.tag===19&&x.memoizedProps.revealOrder!==void 0){if((x.flags&128)!==0)return x}else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===g)break;for(;x.sibling===null;){if(x.return===null||x.return===g)return null;x=x.return}x.sibling.return=x.return,x=x.sibling}return null}var $o=[];function Ga(){for(var g=0;g<$o.length;g++){var x=$o[g];Xe?x._workInProgressVersionPrimary=null:x._workInProgressVersionSecondary=null}$o.length=0}var ba=s.ReactCurrentDispatcher,eo=s.ReactCurrentBatchConfig,rs=0,ii=null,Pi=null,bi=null,_u=!1,to=!1,Aa=0,jr=0;function tr(){throw Error(a(321))}function Ii(g,x){if(x===null)return!1;for(var I=0;I<x.length&&I<g.length;I++)if(!Hi(g[I],x[I]))return!1;return!0}function Ri(g,x,I,B,$,ie){if(rs=ie,ii=x,x.memoizedState=null,x.updateQueue=null,x.lanes=0,ba.current=g===null||g.memoizedState===null?ac:Rh,g=I(B,$),to){ie=0;do{if(to=!1,Aa=0,25<=ie)throw Error(a(301));ie+=1,bi=Pi=null,x.updateQueue=null,ba.current=Nh,g=I(B,$)}while(to)}if(ba.current=bu,x=Pi!==null&&Pi.next!==null,rs=0,bi=Pi=ii=null,_u=!1,x)throw Error(a(300));return g}function sa(){var g=Aa!==0;return Aa=0,g}function Lo(){var g={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bi===null?ii.memoizedState=bi=g:bi=bi.next=g,bi}function la(){if(Pi===null){var g=ii.alternate;g=g!==null?g.memoizedState:null}else g=Pi.next;var x=bi===null?ii.memoizedState:bi.next;if(x!==null)bi=x,Pi=g;else{if(g===null)throw Error(a(310));Pi=g,g={memoizedState:Pi.memoizedState,baseState:Pi.baseState,baseQueue:Pi.baseQueue,queue:Pi.queue,next:null},bi===null?ii.memoizedState=bi=g:bi=bi.next=g}return bi}function is(g,x){return typeof x=="function"?x(g):x}function jc(g){var x=la(),I=x.queue;if(I===null)throw Error(a(311));I.lastRenderedReducer=g;var B=Pi,$=B.baseQueue,ie=I.pending;if(ie!==null){if($!==null){var Oe=$.next;$.next=ie.next,ie.next=Oe}B.baseQueue=$=ie,I.pending=null}if($!==null){ie=$.next,B=B.baseState;var et=Oe=null,Pt=null,Jt=ie;do{var bn=Jt.lane;if((rs&bn)===bn)Pt!==null&&(Pt=Pt.next={lane:0,action:Jt.action,hasEagerState:Jt.hasEagerState,eagerState:Jt.eagerState,next:null}),B=Jt.hasEagerState?Jt.eagerState:g(B,Jt.action);else{var ar={lane:bn,action:Jt.action,hasEagerState:Jt.hasEagerState,eagerState:Jt.eagerState,next:null};Pt===null?(et=Pt=ar,Oe=B):Pt=Pt.next=ar,ii.lanes|=bn,qs|=bn}Jt=Jt.next}while(Jt!==null&&Jt!==ie);Pt===null?Oe=B:Pt.next=et,Hi(B,x.memoizedState)||(no=!0),x.memoizedState=B,x.baseState=Oe,x.baseQueue=Pt,I.lastRenderedState=B}if(g=I.interleaved,g!==null){$=g;do ie=$.lane,ii.lanes|=ie,qs|=ie,$=$.next;while($!==g)}else $===null&&(I.lanes=0);return[x.memoizedState,I.dispatch]}function $c(g){var x=la(),I=x.queue;if(I===null)throw Error(a(311));I.lastRenderedReducer=g;var B=I.dispatch,$=I.pending,ie=x.memoizedState;if($!==null){I.pending=null;var Oe=$=$.next;do ie=g(ie,Oe.action),Oe=Oe.next;while(Oe!==$);Hi(ie,x.memoizedState)||(no=!0),x.memoizedState=ie,x.baseQueue===null&&(x.baseState=ie),I.lastRenderedState=ie}return[ie,B]}function xd(){}function _d(g,x){var I=ii,B=la(),$=x(),ie=!Hi(B.memoizedState,$);if(ie&&(B.memoizedState=$,no=!0),B=B.queue,Jl(zs.bind(null,I,B,g),[g]),B.getSnapshot!==x||ie||bi!==null&&bi.memoizedState.tag&1){if(I.flags|=2048,ua(9,wd.bind(null,I,B,$,x),void 0,null),ji===null)throw Error(a(349));(rs&30)!==0||Sd(I,x,$)}return $}function Sd(g,x,I){g.flags|=16384,g={getSnapshot:x,value:I},x=ii.updateQueue,x===null?(x={lastEffect:null,stores:null},ii.updateQueue=x,x.stores=[g]):(I=x.stores,I===null?x.stores=[g]:I.push(g))}function wd(g,x,I,B){x.value=I,x.getSnapshot=B,tc(x)&&po(g,1,-1)}function zs(g,x,I){return I(function(){tc(x)&&po(g,1,-1)})}function tc(g){var x=g.getSnapshot;g=g.value;try{var I=x();return!Hi(g,I)}catch{return!0}}function Xo(g){var x=Lo();return typeof g=="function"&&(g=g()),x.memoizedState=x.baseState=g,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:g},x.queue=g,g=g.dispatch=av.bind(null,ii,g),[x.memoizedState,g]}function ua(g,x,I,B){return g={tag:g,create:x,destroy:I,deps:B,next:null},x=ii.updateQueue,x===null?(x={lastEffect:null,stores:null},ii.updateQueue=x,x.lastEffect=g.next=g):(I=x.lastEffect,I===null?x.lastEffect=g.next=g:(B=I.next,I.next=g,g.next=B,x.lastEffect=g)),g}function Of(){return la().memoizedState}function Hs(g,x,I,B){var $=Lo();ii.flags|=g,$.memoizedState=ua(1|x,I,void 0,B===void 0?null:B)}function Df(g,x,I,B){var $=la();B=B===void 0?null:B;var ie=void 0;if(Pi!==null){var Oe=Pi.memoizedState;if(ie=Oe.destroy,B!==null&&Ii(B,Oe.deps)){$.memoizedState=ua(x,I,ie,B);return}}ii.flags|=g,$.memoizedState=ua(1|x,I,ie,B)}function nc(g,x){return Hs(8390656,8,g,x)}function Jl(g,x){return Df(2048,8,g,x)}function oi(g,x){return Df(4,2,g,x)}function kf(g,x){return Df(4,4,g,x)}function rc(g,x){if(typeof x=="function")return g=g(),x(g),function(){x(null)};if(x!=null)return g=g(),x.current=g,function(){x.current=null}}function Su(g,x,I){return I=I!=null?I.concat([g]):null,Df(4,4,rc.bind(null,x,g),I)}function ic(){}function Xc(g,x){var I=la();x=x===void 0?null:x;var B=I.memoizedState;return B!==null&&x!==null&&Ii(x,B[1])?B[0]:(I.memoizedState=[g,x],g)}function Yc(g,x){var I=la();x=x===void 0?null:x;var B=I.memoizedState;return B!==null&&x!==null&&Ii(x,B[1])?B[0]:(g=g(),I.memoizedState=[g,x],g)}function bd(g,x){var I=ur;ur=I!==0&&4>I?I:4,g(!0);var B=eo.transition;eo.transition={};try{g(!1),x()}finally{ur=I,eo.transition=B}}function wu(){return la().memoizedState}function om(g,x,I){var B=as(g);I={lane:B,action:I,hasEagerState:!1,eagerState:null,next:null},am(g)?Ih(x,I):(Ff(g,x,I),I=Mr(),g=po(g,B,I),g!==null&&oc(g,x,B))}function av(g,x,I){var B=as(g),$={lane:B,action:I,hasEagerState:!1,eagerState:null,next:null};if(am(g))Ih(x,$);else{Ff(g,x,$);var ie=g.alternate;if(g.lanes===0&&(ie===null||ie.lanes===0)&&(ie=x.lastRenderedReducer,ie!==null))try{var Oe=x.lastRenderedState,et=ie(Oe,I);if($.hasEagerState=!0,$.eagerState=et,Hi(et,Oe))return}catch{}finally{}I=Mr(),g=po(g,B,I),g!==null&&oc(g,x,B)}}function am(g){var x=g.alternate;return g===ii||x!==null&&x===ii}function Ih(g,x){to=_u=!0;var I=g.pending;I===null?x.next=x:(x.next=I.next,I.next=x),g.pending=x}function Ff(g,x,I){ji!==null&&(g.mode&1)!==0&&(or&2)===0?(g=x.interleaved,g===null?(I.next=I,_a===null?_a=[x]:_a.push(x)):(I.next=g.next,g.next=I),x.interleaved=I):(g=x.pending,g===null?I.next=I:(I.next=g.next,g.next=I),x.pending=I)}function oc(g,x,I){if((I&4194240)!==0){var B=x.lanes;B&=g.pendingLanes,I|=B,x.lanes=I,wi(g,I)}}var bu={readContext:Ro,useCallback:tr,useContext:tr,useEffect:tr,useImperativeHandle:tr,useInsertionEffect:tr,useLayoutEffect:tr,useMemo:tr,useReducer:tr,useRef:tr,useState:tr,useDebugValue:tr,useDeferredValue:tr,useTransition:tr,useMutableSource:tr,useSyncExternalStore:tr,useId:tr,unstable_isNewReconciler:!1},ac={readContext:Ro,useCallback:function(g,x){return Lo().memoizedState=[g,x===void 0?null:x],g},useContext:Ro,useEffect:nc,useImperativeHandle:function(g,x,I){return I=I!=null?I.concat([g]):null,Hs(4194308,4,rc.bind(null,x,g),I)},useLayoutEffect:function(g,x){return Hs(4194308,4,g,x)},useInsertionEffect:function(g,x){return Hs(4,2,g,x)},useMemo:function(g,x){var I=Lo();return x=x===void 0?null:x,g=g(),I.memoizedState=[g,x],g},useReducer:function(g,x,I){var B=Lo();return x=I!==void 0?I(x):x,B.memoizedState=B.baseState=x,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:g,lastRenderedState:x},B.queue=g,g=g.dispatch=om.bind(null,ii,g),[B.memoizedState,g]},useRef:function(g){var x=Lo();return g={current:g},x.memoizedState=g},useState:Xo,useDebugValue:ic,useDeferredValue:function(g){var x=Xo(g),I=x[0],B=x[1];return nc(function(){var $=eo.transition;eo.transition={};try{B(g)}finally{eo.transition=$}},[g]),I},useTransition:function(){var g=Xo(!1),x=g[0];return g=bd.bind(null,g[1]),Lo().memoizedState=g,[x,g]},useMutableSource:function(){},useSyncExternalStore:function(g,x,I){var B=ii,$=Lo();if(ri){if(I===void 0)throw Error(a(407));I=I()}else{if(I=x(),ji===null)throw Error(a(349));(rs&30)!==0||Sd(B,x,I)}$.memoizedState=I;var ie={value:I,getSnapshot:x};return $.queue=ie,nc(zs.bind(null,B,ie,g),[g]),B.flags|=2048,ua(9,wd.bind(null,B,ie,I,x),void 0,null),I},useId:function(){var g=Lo(),x=ji.identifierPrefix;if(ri){var I=ni,B=Wr;I=(B&~(1<<32-er(B)-1)).toString(32)+I,x=":"+x+"R"+I,I=Aa++,0<I&&(x+="H"+I.toString(32)),x+=":"}else I=jr++,x=":"+x+"r"+I.toString(32)+":";return g.memoizedState=x},unstable_isNewReconciler:!1},Rh={readContext:Ro,useCallback:Xc,useContext:Ro,useEffect:Jl,useImperativeHandle:Su,useInsertionEffect:oi,useLayoutEffect:kf,useMemo:Yc,useReducer:jc,useRef:Of,useState:function(){return jc(is)},useDebugValue:ic,useDeferredValue:function(g){var x=jc(is),I=x[0],B=x[1];return Jl(function(){var $=eo.transition;eo.transition={};try{B(g)}finally{eo.transition=$}},[g]),I},useTransition:function(){var g=jc(is)[0],x=la().memoizedState;return[g,x]},useMutableSource:xd,useSyncExternalStore:_d,useId:wu,unstable_isNewReconciler:!1},Nh={readContext:Ro,useCallback:Xc,useContext:Ro,useEffect:Jl,useImperativeHandle:Su,useInsertionEffect:oi,useLayoutEffect:kf,useMemo:Yc,useReducer:$c,useRef:Of,useState:function(){return $c(is)},useDebugValue:ic,useDeferredValue:function(g){var x=$c(is),I=x[0],B=x[1];return Jl(function(){var $=eo.transition;eo.transition={};try{B(g)}finally{eo.transition=$}},[g]),I},useTransition:function(){var g=$c(is)[0],x=la().memoizedState;return[g,x]},useMutableSource:xd,useSyncExternalStore:_d,useId:wu,unstable_isNewReconciler:!1};function Ad(g,x){try{var I="",B=x;do I+=Fs(B),B=B.return;while(B);var $=I}catch(ie){$=`
Error generating stack: `+ie.message+`
`+ie.stack}return{value:g,source:x,stack:$}}function Ed(g,x){try{console.error(x.value)}catch(I){setTimeout(function(){throw I})}}var sv=typeof WeakMap=="function"?WeakMap:Map;function sm(g,x,I){I=vs(-1,I),I.tag=3,I.payload={element:null};var B=x.value;return I.callback=function(){Zc||(Zc=!0,di=B),Ed(g,x)},I}function Td(g,x,I){I=vs(-1,I),I.tag=3;var B=g.type.getDerivedStateFromError;if(typeof B=="function"){var $=x.value;I.payload=function(){return B($)},I.callback=function(){Ed(g,x)}}var ie=g.stateNode;return ie!==null&&typeof ie.componentDidCatch=="function"&&(I.callback=function(){Ed(g,x),typeof B!="function"&&(ko===null?ko=new Set([this]):ko.add(this));var Oe=x.stack;this.componentDidCatch(x.value,{componentStack:Oe!==null?Oe:""})}),I}function ca(g,x,I){var B=g.pingCache;if(B===null){B=g.pingCache=new sv;var $=new Set;B.set(x,$)}else $=B.get(x),$===void 0&&($=new Set,B.set(x,$));$.has(I)||($.add(I),g=Rd.bind(null,g,x,I),x.then(g,g))}function os(g){do{var x;if((x=g.tag===13)&&(x=g.memoizedState,x=x!==null?x.dehydrated!==null:!0),x)return g;g=g.return}while(g!==null);return null}function Ea(g,x,I,B,$){return(g.mode&1)===0?(g===x?g.flags|=65536:(g.flags|=128,I.flags|=131072,I.flags&=-52805,I.tag===1&&(I.alternate===null?I.tag=17:(x=vs(-1,1),x.tag=2,gl(I,x))),I.lanes|=1),g):(g.flags|=65536,g.lanes=$,g)}function wo(g){g.flags|=4}function sc(g,x){if(g!==null&&g.child===x.child)return!0;if((x.flags&16)!==0)return!1;for(g=x.child;g!==null;){if((g.flags&12854)!==0||(g.subtreeFlags&12854)!==0)return!1;g=g.sibling}return!0}var fo,Oo,Md,Cd;if(tt)fo=function(g,x){for(var I=x.child;I!==null;){if(I.tag===5||I.tag===6)G(g,I.stateNode);else if(I.tag!==4&&I.child!==null){I.child.return=I,I=I.child;continue}if(I===x)break;for(;I.sibling===null;){if(I.return===null||I.return===x)return;I=I.return}I.sibling.return=I.return,I=I.sibling}},Oo=function(){},Md=function(g,x,I,B,$){if(g=g.memoizedProps,g!==B){var ie=x.stateNode,Oe=Qi(aa.current);I=te(ie,I,g,B,$,Oe),(x.updateQueue=I)&&wo(x)}},Cd=function(g,x,I,B){I!==B&&wo(x)};else if(Te){fo=function(g,x,I,B){for(var $=x.child;$!==null;){if($.tag===5){var ie=$.stateNode;I&&B&&(ie=Gn(ie,$.type,$.memoizedProps,$)),G(g,ie)}else if($.tag===6)ie=$.stateNode,I&&B&&(ie=Br(ie,$.memoizedProps,$)),G(g,ie);else if($.tag!==4){if($.tag===22&&$.memoizedState!==null)ie=$.child,ie!==null&&(ie.return=$),fo(g,$,!0,!0);else if($.child!==null){$.child.return=$,$=$.child;continue}}if($===x)break;for(;$.sibling===null;){if($.return===null||$.return===x)return;$=$.return}$.sibling.return=$.return,$=$.sibling}};var Zl=function(g,x,I,B){for(var $=x.child;$!==null;){if($.tag===5){var ie=$.stateNode;I&&B&&(ie=Gn(ie,$.type,$.memoizedProps,$)),rn(g,ie)}else if($.tag===6)ie=$.stateNode,I&&B&&(ie=Br(ie,$.memoizedProps,$)),rn(g,ie);else if($.tag!==4){if($.tag===22&&$.memoizedState!==null)ie=$.child,ie!==null&&(ie.return=$),Zl(g,$,!0,!0);else if($.child!==null){$.child.return=$,$=$.child;continue}}if($===x)break;for(;$.sibling===null;){if($.return===null||$.return===x)return;$=$.return}$.sibling.return=$.return,$=$.sibling}};Oo=function(g,x){var I=x.stateNode;if(!sc(g,x)){g=I.containerInfo;var B=Lt(g);Zl(B,x,!1,!1),I.pendingChildren=B,wo(x),ir(g,B)}},Md=function(g,x,I,B,$){var ie=g.stateNode,Oe=g.memoizedProps;if((g=sc(g,x))&&Oe===B)x.stateNode=ie;else{var et=x.stateNode,Pt=Qi(aa.current),Jt=null;Oe!==B&&(Jt=te(et,I,Oe,B,$,Pt)),g&&Jt===null?x.stateNode=ie:(ie=Ht(ie,Jt,I,Oe,B,x,g,et),ne(ie,I,B,$,Pt)&&wo(x),x.stateNode=ie,g?wo(x):fo(ie,x,!1,!1))}},Cd=function(g,x,I,B){I!==B?(g=Qi(No.current),I=Qi(aa.current),x.stateNode=me(B,g,I,x),wo(x)):x.stateNode=g.stateNode}}else Oo=function(){},Md=function(){},Cd=function(){};function bl(g,x){if(!ri)switch(g.tailMode){case"hidden":x=g.tail;for(var I=null;x!==null;)x.alternate!==null&&(I=x),x=x.sibling;I===null?g.tail=null:I.sibling=null;break;case"collapsed":I=g.tail;for(var B=null;I!==null;)I.alternate!==null&&(B=I),I=I.sibling;B===null?x||g.tail===null?g.tail=null:g.tail.sibling=null:B.sibling=null}}function Gi(g){var x=g.alternate!==null&&g.alternate.child===g.child,I=0,B=0;if(x)for(var $=g.child;$!==null;)I|=$.lanes|$.childLanes,B|=$.subtreeFlags&14680064,B|=$.flags&14680064,$.return=g,$=$.sibling;else for($=g.child;$!==null;)I|=$.lanes|$.childLanes,B|=$.subtreeFlags,B|=$.flags,$.return=g,$=$.sibling;return g.subtreeFlags|=B,g.childLanes=I,x}function Uf(g,x,I){var B=x.pendingProps;switch(Sa(x),x.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gi(x),null;case 1:return vr(x.type)&&fr(),Gi(x),null;case 3:return B=x.stateNode,wa(),Kt(Mn),Kt(kt),Ga(),B.pendingContext&&(B.context=B.pendingContext,B.pendingContext=null),(g===null||g.child===null)&&(xl(x)?wo(x):g===null||g.memoizedState.isDehydrated&&(x.flags&256)===0||(x.flags|=1024,jo!==null&&(fc(jo),jo=null))),Oo(g,x),Gi(x),null;case 5:xu(x),I=Qi(No.current);var $=x.type;if(g!==null&&x.stateNode!=null)Md(g,x,$,B,I),g.ref!==x.ref&&(x.flags|=512,x.flags|=2097152);else{if(!B){if(x.stateNode===null)throw Error(a(166));return Gi(x),null}if(g=Qi(aa.current),xl(x)){if(!Je)throw Error(a(175));g=ue(x.stateNode,x.type,x.memoizedProps,I,g,x,!yl),x.updateQueue=g,g!==null&&wo(x)}else{var ie=ee($,B,I,g,x);fo(ie,x,!1,!1),x.stateNode=ie,ne(ie,$,B,I,g)&&wo(x)}x.ref!==null&&(x.flags|=512,x.flags|=2097152)}return Gi(x),null;case 6:if(g&&x.stateNode!=null)Cd(g,x,g.memoizedProps,B);else{if(typeof B!="string"&&x.stateNode===null)throw Error(a(166));if(g=Qi(No.current),I=Qi(aa.current),xl(x)){if(!Je)throw Error(a(176));if(g=x.stateNode,B=x.memoizedProps,(I=we(g,B,x,!yl))&&($=ki,$!==null))switch(ie=($.mode&1)!==0,$.tag){case 3:Re($.stateNode.containerInfo,g,B,ie);break;case 5:Ne($.type,$.memoizedProps,$.stateNode,g,B,ie)}I&&wo(x)}else x.stateNode=me(B,g,I,x)}return Gi(x),null;case 13:if(Kt(Or),B=x.memoizedState,ri&&co!==null&&(x.mode&1)!==0&&(x.flags&128)===0){for(g=co;g;)g=zr(g);return Us(),x.flags|=98560,x}if(B!==null&&B.dehydrated!==null){if(B=xl(x),g===null){if(!B)throw Error(a(318));if(!Je)throw Error(a(344));if(g=x.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(a(317));ze(g,x)}else Us(),(x.flags&128)===0&&(x.memoizedState=null),x.flags|=4;return Gi(x),null}return jo!==null&&(fc(jo),jo=null),(x.flags&128)!==0?(x.lanes=I,x):(B=B!==null,I=!1,g===null?xl(x):I=g.memoizedState!==null,B&&!I&&(x.child.flags|=8192,(x.mode&1)!==0&&(g===null||(Or.current&1)!==0?fi===0&&(fi=3):Id())),x.updateQueue!==null&&(x.flags|=4),Gi(x),null);case 4:return wa(),Oo(g,x),g===null&&Ge(x.stateNode.containerInfo),Gi(x),null;case 10:return hl(x.type._context),Gi(x),null;case 17:return vr(x.type)&&fr(),Gi(x),null;case 19:if(Kt(Or),$=x.memoizedState,$===null)return Gi(x),null;if(B=(x.flags&128)!==0,ie=$.rendering,ie===null)if(B)bl($,!1);else{if(fi!==0||g!==null&&(g.flags&128)!==0)for(g=x.child;g!==null;){if(ie=Kl(g),ie!==null){for(x.flags|=128,bl($,!1),g=ie.updateQueue,g!==null&&(x.updateQueue=g,x.flags|=4),x.subtreeFlags=0,g=I,B=x.child;B!==null;)I=B,$=g,I.flags&=14680066,ie=I.alternate,ie===null?(I.childLanes=0,I.lanes=$,I.child=null,I.subtreeFlags=0,I.memoizedProps=null,I.memoizedState=null,I.updateQueue=null,I.dependencies=null,I.stateNode=null):(I.childLanes=ie.childLanes,I.lanes=ie.lanes,I.child=ie.child,I.subtreeFlags=0,I.deletions=null,I.memoizedProps=ie.memoizedProps,I.memoizedState=ie.memoizedState,I.updateQueue=ie.updateQueue,I.type=ie.type,$=ie.dependencies,I.dependencies=$===null?null:{lanes:$.lanes,firstContext:$.firstContext}),B=B.sibling;return _n(Or,Or.current&1|2),x.child}g=g.sibling}$.tail!==null&&zi()>_s&&(x.flags|=128,B=!0,bl($,!1),x.lanes=4194304)}else{if(!B)if(g=Kl(ie),g!==null){if(x.flags|=128,B=!0,g=g.updateQueue,g!==null&&(x.updateQueue=g,x.flags|=4),bl($,!0),$.tail===null&&$.tailMode==="hidden"&&!ie.alternate&&!ri)return Gi(x),null}else 2*zi()-$.renderingStartTime>_s&&I!==1073741824&&(x.flags|=128,B=!0,bl($,!1),x.lanes=4194304);$.isBackwards?(ie.sibling=x.child,x.child=ie):(g=$.last,g!==null?g.sibling=ie:x.child=ie,$.last=ie)}return $.tail!==null?(x=$.tail,$.rendering=x,$.tail=x.sibling,$.renderingStartTime=zi(),x.sibling=null,g=Or.current,_n(Or,B?g&1|2:g&1),x):(Gi(x),null);case 22:case 23:return nf(),B=x.memoizedState!==null,g!==null&&g.memoizedState!==null!==B&&(x.flags|=8192),B&&(x.mode&1)!==0?(Eo&1073741824)!==0&&(Gi(x),tt&&x.subtreeFlags&6&&(x.flags|=8192)):Gi(x),null;case 24:return null;case 25:return null}throw Error(a(156,x.tag))}var Lh=s.ReactCurrentOwner,no=!1;function Ai(g,x,I,B){x.child=g===null?Wc(x,null,I,B):So(x,g.child,I,B)}function $r(g,x,I,B,$){I=I.render;var ie=x.ref;return pl(x,$),B=Ri(g,x,I,B,ie,$),I=sa(),g!==null&&!no?(x.updateQueue=g.updateQueue,x.flags&=-2053,g.lanes&=~$,he(g,x,$)):(ri&&I&&ns(x),x.flags|=1,Ai(g,x,B,$),x.child)}function Jr(g,x,I,B,$){if(g===null){var ie=I.type;return typeof ie=="function"&&!cm(ie)&&ie.defaultProps===void 0&&I.compare===null&&I.defaultProps===void 0?(x.tag=15,x.type=ie,Ql(g,x,ie,B,$)):(g=fm(I.type,null,B,x,x.mode,$),g.ref=x.ref,g.return=x,x.child=g)}if(ie=g.child,(g.lanes&$)===0){var Oe=ie.memoizedProps;if(I=I.compare,I=I!==null?I:za,I(Oe,B)&&g.ref===x.ref)return he(g,x,$)}return x.flags|=1,g=dc(ie,B),g.ref=x.ref,g.return=x,x.child=g}function Ql(g,x,I,B,$){if(g!==null&&za(g.memoizedProps,B)&&g.ref===x.ref)if(no=!1,(g.lanes&$)!==0)(g.flags&131072)!==0&&(no=!0);else return x.lanes=g.lanes,he(g,x,$);return eu(g,x,I,B,$)}function Do(g,x,I){var B=x.pendingProps,$=B.children,ie=g!==null?g.memoizedState:null;if(B.mode==="hidden")if((x.mode&1)===0)x.memoizedState={baseLanes:0,cachePool:null},_n(Yo,Eo),Eo|=I;else if((I&1073741824)!==0)x.memoizedState={baseLanes:0,cachePool:null},B=ie!==null?ie.baseLanes:I,_n(Yo,Eo),Eo|=B;else return g=ie!==null?ie.baseLanes|I:I,x.lanes=x.childLanes=1073741824,x.memoizedState={baseLanes:g,cachePool:null},x.updateQueue=null,_n(Yo,Eo),Eo|=g,null;else ie!==null?(B=ie.baseLanes|I,x.memoizedState=null):B=I,_n(Yo,Eo),Eo|=B;return Ai(g,x,$,I),x.child}function Ta(g,x){var I=x.ref;(g===null&&I!==null||g!==null&&g.ref!==I)&&(x.flags|=512,x.flags|=2097152)}function eu(g,x,I,B,$){var ie=vr(I)?Sn:kt.current;return ie=gr(x,ie),pl(x,$),I=Ri(g,x,I,B,ie,$),B=sa(),g!==null&&!no?(x.updateQueue=g.updateQueue,x.flags&=-2053,g.lanes&=~$,he(g,x,$)):(ri&&B&&ns(x),x.flags|=1,Ai(g,x,I,$),x.child)}function lc(g,x,I,B,$){if(vr(I)){var ie=!0;Pn(x)}else ie=!1;if(pl(x,$),x.stateNode===null)g!==null&&(g.alternate=null,x.alternate=null,x.flags|=2),qe(x,I,B),At(x,I,B,$),B=!0;else if(g===null){var Oe=x.stateNode,et=x.memoizedProps;Oe.props=et;var Pt=Oe.context,Jt=I.contextType;typeof Jt=="object"&&Jt!==null?Jt=Ro(Jt):(Jt=vr(I)?Sn:kt.current,Jt=gr(x,Jt));var bn=I.getDerivedStateFromProps,ar=typeof bn=="function"||typeof Oe.getSnapshotBeforeUpdate=="function";ar||typeof Oe.UNSAFE_componentWillReceiveProps!="function"&&typeof Oe.componentWillReceiveProps!="function"||(et!==B||Pt!==Jt)&&at(x,Oe,B,Jt),Wo=!1;var Hn=x.memoizedState;Oe.state=Hn,gu(x,B,Oe,$),Pt=x.memoizedState,et!==B||Hn!==Pt||Mn.current||Wo?(typeof bn=="function"&&(H(x,I,bn,B),Pt=x.memoizedState),(et=Wo||Le(x,I,et,B,Hn,Pt,Jt))?(ar||typeof Oe.UNSAFE_componentWillMount!="function"&&typeof Oe.componentWillMount!="function"||(typeof Oe.componentWillMount=="function"&&Oe.componentWillMount(),typeof Oe.UNSAFE_componentWillMount=="function"&&Oe.UNSAFE_componentWillMount()),typeof Oe.componentDidMount=="function"&&(x.flags|=4194308)):(typeof Oe.componentDidMount=="function"&&(x.flags|=4194308),x.memoizedProps=B,x.memoizedState=Pt),Oe.props=B,Oe.state=Pt,Oe.context=Jt,B=et):(typeof Oe.componentDidMount=="function"&&(x.flags|=4194308),B=!1)}else{Oe=x.stateNode,Ju(g,x),et=x.memoizedProps,Jt=x.type===x.elementType?et:Ki(x.type,et),Oe.props=Jt,ar=x.pendingProps,Hn=Oe.context,Pt=I.contextType,typeof Pt=="object"&&Pt!==null?Pt=Ro(Pt):(Pt=vr(I)?Sn:kt.current,Pt=gr(x,Pt));var _r=I.getDerivedStateFromProps;(bn=typeof _r=="function"||typeof Oe.getSnapshotBeforeUpdate=="function")||typeof Oe.UNSAFE_componentWillReceiveProps!="function"&&typeof Oe.componentWillReceiveProps!="function"||(et!==ar||Hn!==Pt)&&at(x,Oe,B,Pt),Wo=!1,Hn=x.memoizedState,Oe.state=Hn,gu(x,B,Oe,$);var vn=x.memoizedState;et!==ar||Hn!==vn||Mn.current||Wo?(typeof _r=="function"&&(H(x,I,_r,B),vn=x.memoizedState),(Jt=Wo||Le(x,I,Jt,B,Hn,vn,Pt)||!1)?(bn||typeof Oe.UNSAFE_componentWillUpdate!="function"&&typeof Oe.componentWillUpdate!="function"||(typeof Oe.componentWillUpdate=="function"&&Oe.componentWillUpdate(B,vn,Pt),typeof Oe.UNSAFE_componentWillUpdate=="function"&&Oe.UNSAFE_componentWillUpdate(B,vn,Pt)),typeof Oe.componentDidUpdate=="function"&&(x.flags|=4),typeof Oe.getSnapshotBeforeUpdate=="function"&&(x.flags|=1024)):(typeof Oe.componentDidUpdate!="function"||et===g.memoizedProps&&Hn===g.memoizedState||(x.flags|=4),typeof Oe.getSnapshotBeforeUpdate!="function"||et===g.memoizedProps&&Hn===g.memoizedState||(x.flags|=1024),x.memoizedProps=B,x.memoizedState=vn),Oe.props=B,Oe.state=vn,Oe.context=Pt,B=Jt):(typeof Oe.componentDidUpdate!="function"||et===g.memoizedProps&&Hn===g.memoizedState||(x.flags|=4),typeof Oe.getSnapshotBeforeUpdate!="function"||et===g.memoizedProps&&Hn===g.memoizedState||(x.flags|=1024),B=!1)}return fa(g,x,I,B,ie,$)}function fa(g,x,I,B,$,ie){Ta(g,x);var Oe=(x.flags&128)!==0;if(!B&&!Oe)return $&&jn(x,I,!1),he(g,x,ie);B=x.stateNode,Lh.current=x;var et=Oe&&typeof I.getDerivedStateFromError!="function"?null:B.render();return x.flags|=1,g!==null&&Oe?(x.child=So(x,g.child,null,ie),x.child=So(x,null,et,ie)):Ai(g,x,et,ie),x.memoizedState=B.state,$&&jn(x,I,!0),x.child}function Bf(g){var x=g.stateNode;x.pendingContext?Fn(g,x.pendingContext,x.pendingContext!==x.context):x.context&&Fn(g,x.context,!1),Bs(g,x.containerInfo)}function Oh(g,x,I,B,$){return Us(),vu($),x.flags|=256,Ai(g,x,I,B),x.child}var Kc={dehydrated:null,treeContext:null,retryLane:0};function Al(g){return{baseLanes:g,cachePool:null}}function Dh(g,x,I){var B=x.pendingProps,$=Or.current,ie=!1,Oe=(x.flags&128)!==0,et;if((et=Oe)||(et=g!==null&&g.memoizedState===null?!1:($&2)!==0),et?(ie=!0,x.flags&=-129):(g===null||g.memoizedState!==null)&&($|=1),_n(Or,$&1),g===null)return Zi(x),g=x.memoizedState,g!==null&&(g=g.dehydrated,g!==null)?((x.mode&1)===0?x.lanes=1:xr(g)?x.lanes=8:x.lanes=1073741824,null):($=B.children,g=B.fallback,ie?(B=x.mode,ie=x.child,$={mode:"hidden",children:$},(B&1)===0&&ie!==null?(ie.childLanes=0,ie.pendingProps=$):ie=Uh($,B,0,null),g=Hf(g,B,I,null),ie.return=x,g.return=x,ie.sibling=g,x.child=ie,x.child.memoizedState=Al(I),x.memoizedState=Kc,g):Vs(x,$));if($=g.memoizedState,$!==null){if(et=$.dehydrated,et!==null){if(Oe)return x.flags&256?(x.flags&=-257,N(g,x,I,Error(a(422)))):x.memoizedState!==null?(x.child=g.child,x.flags|=128,null):(ie=B.fallback,$=x.mode,B=Uh({mode:"visible",children:B.children},$,0,null),ie=Hf(ie,$,I,null),ie.flags|=2,B.return=x,ie.return=x,B.sibling=ie,x.child=B,(x.mode&1)!==0&&So(x,g.child,null,I),x.child.memoizedState=Al(I),x.memoizedState=Kc,ie);if((x.mode&1)===0)x=N(g,x,I,null);else if(xr(et))x=N(g,x,I,Error(a(419)));else if(B=(I&g.childLanes)!==0,no||B){if(B=ji,B!==null){switch(I&-I){case 4:ie=2;break;case 16:ie=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:ie=32;break;case 536870912:ie=268435456;break;default:ie=0}B=(ie&(B.suspendedLanes|I))!==0?0:ie,B!==0&&B!==$.retryLane&&($.retryLane=B,po(g,B,-1))}Id(),x=N(g,x,I,Error(a(421)))}else Er(et)?(x.flags|=128,x.child=g.child,x=Nd.bind(null,g),Cr(et,x),x=null):(I=$.treeContext,Je&&(co=uo(et),ki=x,ri=!0,jo=null,yl=!1,I!==null&&(zn[Yn++]=Wr,zn[Yn++]=ni,zn[Yn++]=Kr,Wr=I.id,ni=I.overflow,Kr=x)),x=Vs(x,x.pendingProps.children),x.flags|=4096);return x}return ie?(B=M(g,x,B.children,B.fallback,I),ie=x.child,$=g.child.memoizedState,ie.memoizedState=$===null?Al(I):{baseLanes:$.baseLanes|I,cachePool:null},ie.childLanes=g.childLanes&~I,x.memoizedState=Kc,B):(I=Jc(g,x,B.children,I),x.memoizedState=null,I)}return ie?(B=M(g,x,B.children,B.fallback,I),ie=x.child,$=g.child.memoizedState,ie.memoizedState=$===null?Al(I):{baseLanes:$.baseLanes|I,cachePool:null},ie.childLanes=g.childLanes&~I,x.memoizedState=Kc,B):(I=Jc(g,x,B.children,I),x.memoizedState=null,I)}function Vs(g,x){return x=Uh({mode:"visible",children:x},g.mode,0,null),x.return=g,g.child=x}function Jc(g,x,I,B){var $=g.child;return g=$.sibling,I=dc($,{mode:"visible",children:I}),(x.mode&1)===0&&(I.lanes=B),I.return=x,I.sibling=null,g!==null&&(B=x.deletions,B===null?(x.deletions=[g],x.flags|=16):B.push(g)),x.child=I}function M(g,x,I,B,$){var ie=x.mode;g=g.child;var Oe=g.sibling,et={mode:"hidden",children:I};return(ie&1)===0&&x.child!==g?(I=x.child,I.childLanes=0,I.pendingProps=et,x.deletions=null):(I=dc(g,et),I.subtreeFlags=g.subtreeFlags&14680064),Oe!==null?B=dc(Oe,B):(B=Hf(B,ie,$,null),B.flags|=2),B.return=x,I.return=x,I.sibling=B,x.child=I,B}function N(g,x,I,B){return B!==null&&vu(B),So(x,g.child,null,I),g=Vs(x,x.pendingProps.children),g.flags|=2,x.memoizedState=null,g}function q(g,x,I){g.lanes|=x;var B=g.alternate;B!==null&&(B.lanes|=x),jl(g.return,x,I)}function J(g,x,I,B,$){var ie=g.memoizedState;ie===null?g.memoizedState={isBackwards:x,rendering:null,renderingStartTime:0,last:B,tail:I,tailMode:$}:(ie.isBackwards=x,ie.rendering=null,ie.renderingStartTime=0,ie.last=B,ie.tail=I,ie.tailMode=$)}function ce(g,x,I){var B=x.pendingProps,$=B.revealOrder,ie=B.tail;if(Ai(g,x,B.children,I),B=Or.current,(B&2)!==0)B=B&1|2,x.flags|=128;else{if(g!==null&&(g.flags&128)!==0)e:for(g=x.child;g!==null;){if(g.tag===13)g.memoizedState!==null&&q(g,I,x);else if(g.tag===19)q(g,I,x);else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===x)break e;for(;g.sibling===null;){if(g.return===null||g.return===x)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}B&=1}if(_n(Or,B),(x.mode&1)===0)x.memoizedState=null;else switch($){case"forwards":for(I=x.child,$=null;I!==null;)g=I.alternate,g!==null&&Kl(g)===null&&($=I),I=I.sibling;I=$,I===null?($=x.child,x.child=null):($=I.sibling,I.sibling=null),J(x,!1,$,I,ie);break;case"backwards":for(I=null,$=x.child,x.child=null;$!==null;){if(g=$.alternate,g!==null&&Kl(g)===null){x.child=$;break}g=$.sibling,$.sibling=I,I=$,$=g}J(x,!0,I,null,ie);break;case"together":J(x,!1,null,null,void 0);break;default:x.memoizedState=null}return x.child}function he(g,x,I){if(g!==null&&(x.dependencies=g.dependencies),qs|=x.lanes,(I&x.childLanes)===0)return null;if(g!==null&&x.child!==g.child)throw Error(a(153));if(x.child!==null){for(g=x.child,I=dc(g,g.pendingProps),x.child=I,I.return=x;g.sibling!==null;)g=g.sibling,I=I.sibling=dc(g,g.pendingProps),I.return=x;I.sibling=null}return x.child}function ge(g,x,I){switch(x.tag){case 3:Bf(x),Us();break;case 5:wl(x);break;case 1:vr(x.type)&&Pn(x);break;case 4:Bs(x,x.stateNode.containerInfo);break;case 10:Wl(x,x.type._context,x.memoizedProps.value);break;case 13:var B=x.memoizedState;if(B!==null)return B.dehydrated!==null?(_n(Or,Or.current&1),x.flags|=128,null):(I&x.child.childLanes)!==0?Dh(g,x,I):(_n(Or,Or.current&1),g=he(g,x,I),g!==null?g.sibling:null);_n(Or,Or.current&1);break;case 19:if(B=(I&x.childLanes)!==0,(g.flags&128)!==0){if(B)return ce(g,x,I);x.flags|=128}var $=x.memoizedState;if($!==null&&($.rendering=null,$.tail=null,$.lastEffect=null),_n(Or,Or.current),B)break;return null;case 22:case 23:return x.lanes=0,Do(g,x,I)}return he(g,x,I)}function xe(g,x){switch(Sa(x),x.tag){case 1:return vr(x.type)&&fr(),g=x.flags,g&65536?(x.flags=g&-65537|128,x):null;case 3:return wa(),Kt(Mn),Kt(kt),Ga(),g=x.flags,(g&65536)!==0&&(g&128)===0?(x.flags=g&-65537|128,x):null;case 5:return xu(x),null;case 13:if(Kt(Or),g=x.memoizedState,g!==null&&g.dehydrated!==null){if(x.alternate===null)throw Error(a(340));Us()}return g=x.flags,g&65536?(x.flags=g&-65537|128,x):null;case 19:return Kt(Or),null;case 4:return wa(),null;case 10:return hl(x.type._context),null;case 22:case 23:return nf(),null;case 24:return null;default:return null}}var _e=!1,Ae=!1,je=typeof WeakSet=="function"?WeakSet:Set,Fe=null;function st(g,x){var I=g.ref;if(I!==null)if(typeof I=="function")try{I(null)}catch(B){Jo(g,x,B)}else I.current=null}function Ze(g,x,I){try{I()}catch(B){Jo(g,x,B)}}var Dt=!1;function wt(g,x){for(Z(g.containerInfo),Fe=x;Fe!==null;)if(g=Fe,x=g.child,(g.subtreeFlags&1028)!==0&&x!==null)x.return=g,Fe=x;else for(;Fe!==null;){g=Fe;try{var I=g.alternate;if((g.flags&1024)!==0)switch(g.tag){case 0:case 11:case 15:break;case 1:if(I!==null){var B=I.memoizedProps,$=I.memoizedState,ie=g.stateNode,Oe=ie.getSnapshotBeforeUpdate(g.elementType===g.type?B:Ki(g.type,B),$);ie.__reactInternalSnapshotBeforeUpdate=Oe}break;case 3:tt&&It(g.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(et){Jo(g,g.return,et)}if(x=g.sibling,x!==null){x.return=g.return,Fe=x;break}Fe=g.return}return I=Dt,Dt=!1,I}function We(g,x,I){var B=x.updateQueue;if(B=B!==null?B.lastEffect:null,B!==null){var $=B=B.next;do{if(($.tag&g)===g){var ie=$.destroy;$.destroy=void 0,ie!==void 0&&Ze(x,I,ie)}$=$.next}while($!==B)}}function $e(g,x){if(x=x.updateQueue,x=x!==null?x.lastEffect:null,x!==null){var I=x=x.next;do{if((I.tag&g)===g){var B=I.create;I.destroy=B()}I=I.next}while(I!==x)}}function Tt(g){var x=g.ref;if(x!==null){var I=g.stateNode;switch(g.tag){case 5:g=Y(I);break;default:g=I}typeof x=="function"?x(g):x.current=g}}function Mt(g,x,I){if(gs&&typeof gs.onCommitFiberUnmount=="function")try{gs.onCommitFiberUnmount($u,x)}catch{}switch(x.tag){case 0:case 11:case 14:case 15:if(g=x.updateQueue,g!==null&&(g=g.lastEffect,g!==null)){var B=g=g.next;do{var $=B,ie=$.destroy;$=$.tag,ie!==void 0&&(($&2)!==0||($&4)!==0)&&Ze(x,I,ie),B=B.next}while(B!==g)}break;case 1:if(st(x,I),g=x.stateNode,typeof g.componentWillUnmount=="function")try{g.props=x.memoizedProps,g.state=x.memoizedState,g.componentWillUnmount()}catch(Oe){Jo(x,I,Oe)}break;case 5:st(x,I);break;case 4:tt?Tr(g,x,I):Te&&Te&&(x=x.stateNode.containerInfo,I=Lt(x),$n(x,I))}}function Nt(g,x,I){for(var B=x;;)if(Mt(g,B,I),B.child===null||tt&&B.tag===4){if(B===x)break;for(;B.sibling===null;){if(B.return===null||B.return===x)return;B=B.return}B.sibling.return=B.return,B=B.sibling}else B.child.return=B,B=B.child}function dn(g){var x=g.alternate;x!==null&&(g.alternate=null,dn(x)),g.child=null,g.deletions=null,g.sibling=null,g.tag===5&&(x=g.stateNode,x!==null&&Ct(x)),g.stateNode=null,g.return=null,g.dependencies=null,g.memoizedProps=null,g.memoizedState=null,g.pendingProps=null,g.stateNode=null,g.updateQueue=null}function on(g){return g.tag===5||g.tag===3||g.tag===4}function Dn(g){e:for(;;){for(;g.sibling===null;){if(g.return===null||on(g.return))return null;g=g.return}for(g.sibling.return=g.return,g=g.sibling;g.tag!==5&&g.tag!==6&&g.tag!==18;){if(g.flags&2||g.child===null||g.tag===4)continue e;g.child.return=g,g=g.child}if(!(g.flags&2))return g.stateNode}}function sn(g){if(tt){e:{for(var x=g.return;x!==null;){if(on(x))break e;x=x.return}throw Error(a(160))}var I=x;switch(I.tag){case 5:x=I.stateNode,I.flags&32&&(fn(x),I.flags&=-33),I=Dn(g),Nr(g,I,x);break;case 3:case 4:x=I.stateNode.containerInfo,I=Dn(g),Rr(g,I,x);break;default:throw Error(a(161))}}}function Rr(g,x,I){var B=g.tag;if(B===5||B===6)g=g.stateNode,x?un(I,g,x):Rt(I,g);else if(B!==4&&(g=g.child,g!==null))for(Rr(g,x,I),g=g.sibling;g!==null;)Rr(g,x,I),g=g.sibling}function Nr(g,x,I){var B=g.tag;if(B===5||B===6)g=g.stateNode,x?Xt(I,g,x):Ft(I,g);else if(B!==4&&(g=g.child,g!==null))for(Nr(g,x,I),g=g.sibling;g!==null;)Nr(g,x,I),g=g.sibling}function Tr(g,x,I){for(var B=x,$=!1,ie,Oe;;){if(!$){$=B.return;e:for(;;){if($===null)throw Error(a(160));switch(ie=$.stateNode,$.tag){case 5:Oe=!1;break e;case 3:ie=ie.containerInfo,Oe=!0;break e;case 4:ie=ie.containerInfo,Oe=!0;break e}$=$.return}$=!0}if(B.tag===5||B.tag===6)Nt(g,B,I),Oe?mn(ie,B.stateNode):Wt(ie,B.stateNode);else if(B.tag===18)Oe?De(ie,B.stateNode):Ce(ie,B.stateNode);else if(B.tag===4){if(B.child!==null){ie=B.stateNode.containerInfo,Oe=!0,B.child.return=B,B=B.child;continue}}else if(Mt(g,B,I),B.child!==null){B.child.return=B,B=B.child;continue}if(B===x)break;for(;B.sibling===null;){if(B.return===null||B.return===x)return;B=B.return,B.tag===4&&($=!1)}B.sibling.return=B.return,B=B.sibling}}function nr(g,x){if(tt){switch(x.tag){case 0:case 11:case 14:case 15:We(3,x,x.return),$e(3,x),We(5,x,x.return);return;case 1:return;case 5:var I=x.stateNode;if(I!=null){var B=x.memoizedProps;g=g!==null?g.memoizedProps:B;var $=x.type,ie=x.updateQueue;x.updateQueue=null,ie!==null&&Zt(I,ie,$,g,B,x)}return;case 6:if(x.stateNode===null)throw Error(a(162));I=x.memoizedProps,tn(x.stateNode,g!==null?g.memoizedProps:I,I);return;case 3:Je&&g!==null&&g.memoizedState.isDehydrated&&xt(x.stateNode.containerInfo);return;case 12:return;case 13:kr(x);return;case 19:kr(x);return;case 17:return}throw Error(a(163))}switch(x.tag){case 0:case 11:case 14:case 15:We(3,x,x.return),$e(3,x),We(5,x,x.return);return;case 12:return;case 13:kr(x);return;case 19:kr(x);return;case 3:Je&&g!==null&&g.memoizedState.isDehydrated&&xt(x.stateNode.containerInfo);break;case 22:case 23:return}e:if(Te){switch(x.tag){case 1:case 5:case 6:break e;case 3:case 4:x=x.stateNode,$n(x.containerInfo,x.pendingChildren);break e}throw Error(a(163))}}function kr(g){var x=g.updateQueue;if(x!==null){g.updateQueue=null;var I=g.stateNode;I===null&&(I=g.stateNode=new je),x.forEach(function(B){var $=Ld.bind(null,g,B);I.has(B)||(I.add(B),B.then($,$))})}}function ai(g,x){for(Fe=x;Fe!==null;){x=Fe;var I=x.deletions;if(I!==null)for(var B=0;B<I.length;B++){var $=I[B];try{var ie=g;tt?Tr(ie,$,x):Nt(ie,$,x);var Oe=$.alternate;Oe!==null&&(Oe.return=null),$.return=null}catch(Nn){Jo($,x,Nn)}}if(I=x.child,(x.subtreeFlags&12854)!==0&&I!==null)I.return=x,Fe=I;else for(;Fe!==null;){x=Fe;try{var et=x.flags;if(et&32&&tt&&fn(x.stateNode),et&512){var Pt=x.alternate;if(Pt!==null){var Jt=Pt.ref;Jt!==null&&(typeof Jt=="function"?Jt(null):Jt.current=null)}}if(et&8192)switch(x.tag){case 13:if(x.memoizedState!==null){var bn=x.alternate;(bn===null||bn.memoizedState===null)&&(Tu=zi())}break;case 22:var ar=x.memoizedState!==null,Hn=x.alternate,_r=Hn!==null&&Hn.memoizedState!==null;if(I=x,tt){e:if(B=I,$=ar,ie=null,tt)for(var vn=B;;){if(vn.tag===5){if(ie===null){ie=vn;var Ca=vn.stateNode;$?nn(Ca):ot(vn.stateNode,vn.memoizedProps)}}else if(vn.tag===6){if(ie===null){var js=vn.stateNode;$?Ke(js):pt(js,vn.memoizedProps)}}else if((vn.tag!==22&&vn.tag!==23||vn.memoizedState===null||vn===B)&&vn.child!==null){vn.child.return=vn,vn=vn.child;continue}if(vn===B)break;for(;vn.sibling===null;){if(vn.return===null||vn.return===B)break e;ie===vn&&(ie=null),vn=vn.return}ie===vn&&(ie=null),vn.sibling.return=vn.return,vn=vn.sibling}}if(ar&&!_r&&(I.mode&1)!==0){Fe=I;for(var yt=I.child;yt!==null;){for(I=Fe=yt;Fe!==null;){B=Fe;var nt=B.child;switch(B.tag){case 0:case 11:case 14:case 15:We(4,B,B.return);break;case 1:st(B,B.return);var bt=B.stateNode;if(typeof bt.componentWillUnmount=="function"){var hn=B.return;try{bt.props=B.memoizedProps,bt.state=B.memoizedState,bt.componentWillUnmount()}catch(Nn){Jo(B,hn,Nn)}}break;case 5:st(B,B.return);break;case 22:if(B.memoizedState!==null){qi(I);continue}}nt!==null?(nt.return=B,Fe=nt):qi(I)}yt=yt.sibling}}}switch(et&4102){case 2:sn(x),x.flags&=-3;break;case 6:sn(x),x.flags&=-3,nr(x.alternate,x);break;case 4096:x.flags&=-4097;break;case 4100:x.flags&=-4097,nr(x.alternate,x);break;case 4:nr(x.alternate,x)}}catch(Nn){Jo(x,x.return,Nn)}if(I=x.sibling,I!==null){I.return=x.return,Fe=I;break}Fe=x.return}}}function Kn(g,x,I){Fe=g,Ni(g)}function Ni(g,x,I){for(var B=(g.mode&1)!==0;Fe!==null;){var $=Fe,ie=$.child;if($.tag===22&&B){var Oe=$.memoizedState!==null||_e;if(!Oe){var et=$.alternate,Pt=et!==null&&et.memoizedState!==null||Ae;et=_e;var Jt=Ae;if(_e=Oe,(Ae=Pt)&&!Jt)for(Fe=$;Fe!==null;)Oe=Fe,Pt=Oe.child,Oe.tag===22&&Oe.memoizedState!==null?ho($):Pt!==null?(Pt.return=Oe,Fe=Pt):ho($);for(;ie!==null;)Fe=ie,Ni(ie),ie=ie.sibling;Fe=$,_e=et,Ae=Jt}da(g)}else($.subtreeFlags&8772)!==0&&ie!==null?(ie.return=$,Fe=ie):da(g)}}function da(g){for(;Fe!==null;){var x=Fe;if((x.flags&8772)!==0){var I=x.alternate;try{if((x.flags&8772)!==0)switch(x.tag){case 0:case 11:case 15:Ae||$e(5,x);break;case 1:var B=x.stateNode;if(x.flags&4&&!Ae)if(I===null)B.componentDidMount();else{var $=x.elementType===x.type?I.memoizedProps:Ki(x.type,I.memoizedProps);B.componentDidUpdate($,I.memoizedState,B.__reactInternalSnapshotBeforeUpdate)}var ie=x.updateQueue;ie!==null&&Xl(x,ie,B);break;case 3:var Oe=x.updateQueue;if(Oe!==null){if(I=null,x.child!==null)switch(x.child.tag){case 5:I=Y(x.child.stateNode);break;case 1:I=x.child.stateNode}Xl(x,Oe,I)}break;case 5:var et=x.stateNode;I===null&&x.flags&4&&it(et,x.type,x.memoizedProps,x);break;case 6:break;case 4:break;case 12:break;case 13:if(Je&&x.memoizedState===null){var Pt=x.alternate;if(Pt!==null){var Jt=Pt.memoizedState;if(Jt!==null){var bn=Jt.dehydrated;bn!==null&&ae(bn)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(a(163))}Ae||x.flags&512&&Tt(x)}catch(ar){Jo(x,x.return,ar)}}if(x===g){Fe=null;break}if(I=x.sibling,I!==null){I.return=x.return,Fe=I;break}Fe=x.return}}function qi(g){for(;Fe!==null;){var x=Fe;if(x===g){Fe=null;break}var I=x.sibling;if(I!==null){I.return=x.return,Fe=I;break}Fe=x.return}}function ho(g){for(;Fe!==null;){var x=Fe;try{switch(x.tag){case 0:case 11:case 15:var I=x.return;try{$e(4,x)}catch(Pt){Jo(x,I,Pt)}break;case 1:var B=x.stateNode;if(typeof B.componentDidMount=="function"){var $=x.return;try{B.componentDidMount()}catch(Pt){Jo(x,$,Pt)}}var ie=x.return;try{Tt(x)}catch(Pt){Jo(x,ie,Pt)}break;case 5:var Oe=x.return;try{Tt(x)}catch(Pt){Jo(x,Oe,Pt)}}}catch(Pt){Jo(x,x.return,Pt)}if(x===g){Fe=null;break}var et=x.sibling;if(et!==null){et.return=x.return,Fe=et;break}Fe=x.return}}var Dr=0,bo=1,Ao=2,yi=3,Wi=4;if(typeof Symbol=="function"&&Symbol.for){var ro=Symbol.for;Dr=ro("selector.component"),bo=ro("selector.has_pseudo_class"),Ao=ro("selector.role"),yi=ro("selector.test_id"),Wi=ro("selector.text")}function ha(g){var x=Se(g);if(x!=null){if(typeof x.memoizedProps["data-testname"]!="string")throw Error(a(364));return x}if(g=ve(g),g===null)throw Error(a(362));return g.stateNode.current}function qa(g,x){switch(x.$$typeof){case Dr:if(g.type===x.value)return!0;break;case bo:e:{x=x.value,g=[g,0];for(var I=0;I<g.length;){var B=g[I++],$=g[I++],ie=x[$];if(B.tag!==5||!rt(B)){for(;ie!=null&&qa(B,ie);)$++,ie=x[$];if($===x.length){x=!0;break e}else for(B=B.child;B!==null;)g.push(B,$),B=B.sibling}}x=!1}return x;case Ao:if(g.tag===5&&vt(g.stateNode,x.value))return!0;break;case Wi:if((g.tag===5||g.tag===6)&&(g=He(g),g!==null&&0<=g.indexOf(x.value)))return!0;break;case yi:if(g.tag===5&&(g=g.memoizedProps["data-testname"],typeof g=="string"&&g.toLowerCase()===x.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function Ei(g){switch(g.$$typeof){case Dr:return"<"+(L(g.value)||"Unknown")+">";case bo:return":has("+(Ei(g)||"")+")";case Ao:return'[role="'+g.value+'"]';case Wi:return'"'+g.value+'"';case yi:return'[data-testname="'+g.value+'"]';default:throw Error(a(365))}}function io(g,x){var I=[];g=[g,0];for(var B=0;B<g.length;){var $=g[B++],ie=g[B++],Oe=x[ie];if($.tag!==5||!rt($)){for(;Oe!=null&&qa($,Oe);)ie++,Oe=x[ie];if(ie===x.length)I.push($);else for($=$.child;$!==null;)g.push($,ie),$=$.sibling}}return I}function Ma(g,x){if(!lt)throw Error(a(363));g=ha(g),g=io(g,x),x=[],g=Array.from(g);for(var I=0;I<g.length;){var B=g[I++];if(B.tag===5)rt(B)||x.push(B.stateNode);else for(B=B.child;B!==null;)g.push(B),B=B.sibling}return x}var Au=Math.ceil,ys=s.ReactCurrentDispatcher,Fr=s.ReactCurrentOwner,Xr=s.ReactCurrentBatchConfig,or=0,ji=null,Hr=null,si=0,Eo=0,Yo=cn(0),fi=0,Gs=null,qs=0,pa=0,Eu=0,xs=null,$i=null,Tu=0,_s=1/0;function uc(){_s=zi()+500}var Zc=!1,di=null,ko=null,Qc=!1,El=null,cc=0,Mu=0,Ss=null,hi=-1,Fi=0;function Mr(){return(or&6)!==0?zi():hi!==-1?hi:hi=zi()}function as(g){return(g.mode&1)===0?1:(or&2)!==0&&si!==0?si&-si:Nf.transition!==null?(Fi===0&&(g=oa,oa<<=1,(oa&4194240)===0&&(oa=64),Fi=g),Fi):(g=ur,g!==0?g:ye())}function po(g,x,I){if(50<Mu)throw Mu=0,Ss=null,Error(a(185));var B=tu(g,x);return B===null?null:(ps(B,x,I),((or&2)===0||B!==ji)&&(B===ji&&((or&2)===0&&(pa|=x),fi===4&&Fo(B,si)),Wa(B,I),x===1&&or===0&&(g.mode&1)===0&&(uc(),dl&&xa())),B)}function tu(g,x){g.lanes|=x;var I=g.alternate;for(I!==null&&(I.lanes|=x),I=g,g=g.return;g!==null;)g.childLanes|=x,I=g.alternate,I!==null&&(I.childLanes|=x),I=g,g=g.return;return I.tag===3?I.stateNode:null}function Wa(g,x){var I=g.callbackNode;yd(g,x);var B=Wu(g,g===ji?si:0);if(B===0)I!==null&&hu(I),g.callbackNode=null,g.callbackPriority=0;else if(x=B&-B,g.callbackPriority!==x){if(I!=null&&hu(I),x===1)g.tag===0?Yu(ja.bind(null,g)):ql(ja.bind(null,g)),ft?mt(function(){or===0&&xa()}):Bn(fl,xa),I=null;else{switch(ms(B)){case 1:I=fl;break;case 4:I=Vc;break;case 16:I=pu;break;case 536870912:I=Gc;break;default:I=pu}I=um(I,mo.bind(null,g))}g.callbackPriority=x,g.callbackNode=I}}function mo(g,x){if(hi=-1,Fi=0,(or&6)!==0)throw Error(a(327));var I=g.callbackNode;if(Ko()&&g.callbackNode!==I)return null;var B=Wu(g,g===ji?si:0);if(B===0)return null;if((B&30)!==0||(B&g.expiredLanes)!==0||x)x=rf(g,B);else{x=B;var $=or;or|=2;var ie=Pd();(ji!==g||si!==x)&&(uc(),$a(g,x));do try{of();break}catch(et){kh(g,et)}while(!0);Ji(),ys.current=ie,or=$,Hr!==null?x=0:(ji=null,si=0,x=fi)}if(x!==0){if(x===2&&($=hs(g),$!==0&&(B=$,x=ef(g,$))),x===1)throw I=Gs,$a(g,0),Fo(g,B),Wa(g,zi()),I;if(x===6)Fo(g,B);else{if($=g.current.alternate,(B&30)===0&&!Tl($)&&(x=rf(g,B),x===2&&(ie=hs(g),ie!==0&&(B=ie,x=ef(g,ie))),x===1))throw I=Gs,$a(g,0),Fo(g,B),Wa(g,zi()),I;switch(g.finishedWork=$,g.finishedLanes=B,x){case 0:case 1:throw Error(a(345));case 2:To(g,$i);break;case 3:if(Fo(g,B),(B&130023424)===B&&(x=Tu+500-zi(),10<x)){if(Wu(g,0)!==0)break;if($=g.suspendedLanes,($&B)!==B){Mr(),g.pingedLanes|=g.suspendedLanes&$;break}g.timeoutHandle=be(To.bind(null,g,$i),x);break}To(g,$i);break;case 4:if(Fo(g,B),(B&4194240)===B)break;for(x=g.eventTimes,$=-1;0<B;){var Oe=31-er(B);ie=1<<Oe,Oe=x[Oe],Oe>$&&($=Oe),B&=~ie}if(B=$,B=zi()-B,B=(120>B?120:480>B?480:1080>B?1080:1920>B?1920:3e3>B?3e3:4320>B?4320:1960*Au(B/1960))-B,10<B){g.timeoutHandle=be(To.bind(null,g,$i),B);break}To(g,$i);break;case 5:To(g,$i);break;default:throw Error(a(329))}}}return Wa(g,zi()),g.callbackNode===I?mo.bind(null,g):null}function ef(g,x){var I=xs;return g.current.memoizedState.isDehydrated&&($a(g,x).flags|=256),g=rf(g,x),g!==2&&(x=$i,$i=I,x!==null&&fc(x)),g}function fc(g){$i===null?$i=g:$i.push.apply($i,g)}function Tl(g){for(var x=g;;){if(x.flags&16384){var I=x.updateQueue;if(I!==null&&(I=I.stores,I!==null))for(var B=0;B<I.length;B++){var $=I[B],ie=$.getSnapshot;$=$.value;try{if(!Hi(ie(),$))return!1}catch{return!1}}}if(I=x.child,x.subtreeFlags&16384&&I!==null)I.return=x,x=I;else{if(x===g)break;for(;x.sibling===null;){if(x.return===null||x.return===g)return!0;x=x.return}x.sibling.return=x.return,x=x.sibling}}return!0}function Fo(g,x){for(x&=~Eu,x&=~pa,g.suspendedLanes|=x,g.pingedLanes&=~x,g=g.expirationTimes;0<x;){var I=31-er(x),B=1<<I;g[I]=-1,x&=~B}}function ja(g){if((or&6)!==0)throw Error(a(327));Ko();var x=Wu(g,0);if((x&1)===0)return Wa(g,zi()),null;var I=rf(g,x);if(g.tag!==0&&I===2){var B=hs(g);B!==0&&(x=B,I=ef(g,B))}if(I===1)throw I=Gs,$a(g,0),Fo(g,x),Wa(g,zi()),I;if(I===6)throw Error(a(345));return g.finishedWork=g.current.alternate,g.finishedLanes=x,To(g,$i),Wa(g,zi()),null}function tf(g){El!==null&&El.tag===0&&(or&6)===0&&Ko();var x=or;or|=1;var I=Xr.transition,B=ur;try{if(Xr.transition=null,ur=1,g)return g()}finally{ur=B,Xr.transition=I,or=x,(or&6)===0&&xa()}}function nf(){Eo=Yo.current,Kt(Yo)}function $a(g,x){g.finishedWork=null,g.finishedLanes=0;var I=g.timeoutHandle;if(I!==Ee&&(g.timeoutHandle=Ee,Ie(I)),Hr!==null)for(I=Hr.return;I!==null;){var B=I;switch(Sa(B),B.tag){case 1:B=B.type.childContextTypes,B!=null&&fr();break;case 3:wa(),Kt(Mn),Kt(kt),Ga();break;case 5:xu(B);break;case 4:wa();break;case 13:Kt(Or);break;case 19:Kt(Or);break;case 10:hl(B.type._context);break;case 22:case 23:nf()}I=I.return}if(ji=g,Hr=g=dc(g.current,null),si=Eo=x,fi=0,Gs=null,Eu=pa=qs=0,$i=xs=null,_a!==null){for(x=0;x<_a.length;x++)if(I=_a[x],B=I.interleaved,B!==null){I.interleaved=null;var $=B.next,ie=I.pending;if(ie!==null){var Oe=ie.next;ie.next=$,B.next=Oe}I.pending=B}_a=null}return g}function kh(g,x){do{var I=Hr;try{if(Ji(),ba.current=bu,_u){for(var B=ii.memoizedState;B!==null;){var $=B.queue;$!==null&&($.pending=null),B=B.next}_u=!1}if(rs=0,bi=Pi=ii=null,to=!1,Aa=0,Fr.current=null,I===null||I.return===null){fi=1,Gs=x,Hr=null;break}e:{var ie=g,Oe=I.return,et=I,Pt=x;if(x=si,et.flags|=32768,Pt!==null&&typeof Pt=="object"&&typeof Pt.then=="function"){var Jt=Pt,bn=et,ar=bn.tag;if((bn.mode&1)===0&&(ar===0||ar===11||ar===15)){var Hn=bn.alternate;Hn?(bn.updateQueue=Hn.updateQueue,bn.memoizedState=Hn.memoizedState,bn.lanes=Hn.lanes):(bn.updateQueue=null,bn.memoizedState=null)}var _r=os(Oe);if(_r!==null){_r.flags&=-257,Ea(_r,Oe,et,ie,x),_r.mode&1&&ca(ie,Jt,x),x=_r,Pt=Jt;var vn=x.updateQueue;if(vn===null){var Ca=new Set;Ca.add(Pt),x.updateQueue=Ca}else vn.add(Pt);break e}else{if((x&1)===0){ca(ie,Jt,x),Id();break e}Pt=Error(a(426))}}else if(ri&&et.mode&1){var js=os(Oe);if(js!==null){(js.flags&65536)===0&&(js.flags|=256),Ea(js,Oe,et,ie,x),vu(Pt);break e}}ie=Pt,fi!==4&&(fi=2),xs===null?xs=[ie]:xs.push(ie),Pt=Ad(Pt,et),et=Oe;do{switch(et.tag){case 3:et.flags|=65536,x&=-x,et.lanes|=x;var yt=sm(et,Pt,x);vl(et,yt);break e;case 1:ie=Pt;var nt=et.type,bt=et.stateNode;if((et.flags&128)===0&&(typeof nt.getDerivedStateFromError=="function"||bt!==null&&typeof bt.componentDidCatch=="function"&&(ko===null||!ko.has(bt)))){et.flags|=65536,x&=-x,et.lanes|=x;var hn=Td(et,ie,x);vl(et,hn);break e}}et=et.return}while(et!==null)}af(I)}catch(Nn){x=Nn,Hr===I&&I!==null&&(Hr=I=I.return);continue}break}while(!0)}function Pd(){var g=ys.current;return ys.current=bu,g===null?bu:g}function Id(){(fi===0||fi===3||fi===2)&&(fi=4),ji===null||(qs&268435455)===0&&(pa&268435455)===0||Fo(ji,si)}function rf(g,x){var I=or;or|=2;var B=Pd();ji===g&&si===x||$a(g,x);do try{lm();break}catch($){kh(g,$)}while(!0);if(Ji(),or=I,ys.current=B,Hr!==null)throw Error(a(261));return ji=null,si=0,fi}function lm(){for(;Hr!==null;)zf(Hr)}function of(){for(;Hr!==null&&!ul();)zf(Hr)}function zf(g){var x=lv(g.alternate,g,Eo);g.memoizedProps=g.pendingProps,x===null?af(g):Hr=x,Fr.current=null}function af(g){var x=g;do{var I=x.alternate;if(g=x.return,(x.flags&32768)===0){if(I=Uf(I,x,Eo),I!==null){Hr=I;return}}else{if(I=xe(I,x),I!==null){I.flags&=32767,Hr=I;return}if(g!==null)g.flags|=32768,g.subtreeFlags=0,g.deletions=null;else{fi=6,Hr=null;return}}if(x=x.sibling,x!==null){Hr=x;return}Hr=x=g}while(x!==null);fi===0&&(fi=5)}function To(g,x){var I=ur,B=Xr.transition;try{Xr.transition=null,ur=1,nu(g,x,I)}finally{Xr.transition=B,ur=I}return null}function nu(g,x,I){do Ko();while(El!==null);if((or&6)!==0)throw Error(a(327));var B=g.finishedWork,$=g.finishedLanes;if(B===null)return null;if(g.finishedWork=null,g.finishedLanes=0,B===g.current)throw Error(a(177));g.callbackNode=null,g.callbackPriority=0;var ie=B.lanes|B.childLanes;if(ju(g,ie),g===ji&&(Hr=ji=null,si=0),(B.subtreeFlags&2064)===0&&(B.flags&2064)===0||Qc||(Qc=!0,um(pu,function(){return Ko(),null})),ie=(B.flags&15990)!==0,(B.subtreeFlags&15990)!==0||ie){ie=Xr.transition,Xr.transition=null;var Oe=ur;ur=1;var et=or;or|=4,Fr.current=null,wt(g,B),ai(g,B),oe(g.containerInfo),g.current=B,Kn(B),cl(),or=et,ur=Oe,Xr.transition=ie}else g.current=B;if(Qc&&(Qc=!1,El=g,cc=$),ie=g.pendingLanes,ie===0&&(ko=null),Gl(B.stateNode),Wa(g,zi()),x!==null)for(I=g.onRecoverableError,B=0;B<x.length;B++)I(x[B]);if(Zc)throw Zc=!1,g=di,di=null,g;return(cc&1)!==0&&g.tag!==0&&Ko(),ie=g.pendingLanes,(ie&1)!==0?g===Ss?Mu++:(Mu=0,Ss=g):Mu=0,xa(),null}function Ko(){if(El!==null){var g=ms(cc),x=Xr.transition,I=ur;try{if(Xr.transition=null,ur=16>g?16:g,El===null)var B=!1;else{if(g=El,El=null,cc=0,(or&6)!==0)throw Error(a(331));var $=or;for(or|=4,Fe=g.current;Fe!==null;){var ie=Fe,Oe=ie.child;if((Fe.flags&16)!==0){var et=ie.deletions;if(et!==null){for(var Pt=0;Pt<et.length;Pt++){var Jt=et[Pt];for(Fe=Jt;Fe!==null;){var bn=Fe;switch(bn.tag){case 0:case 11:case 15:We(8,bn,ie)}var ar=bn.child;if(ar!==null)ar.return=bn,Fe=ar;else for(;Fe!==null;){bn=Fe;var Hn=bn.sibling,_r=bn.return;if(dn(bn),bn===Jt){Fe=null;break}if(Hn!==null){Hn.return=_r,Fe=Hn;break}Fe=_r}}}var vn=ie.alternate;if(vn!==null){var Ca=vn.child;if(Ca!==null){vn.child=null;do{var js=Ca.sibling;Ca.sibling=null,Ca=js}while(Ca!==null)}}Fe=ie}}if((ie.subtreeFlags&2064)!==0&&Oe!==null)Oe.return=ie,Fe=Oe;else e:for(;Fe!==null;){if(ie=Fe,(ie.flags&2048)!==0)switch(ie.tag){case 0:case 11:case 15:We(9,ie,ie.return)}var yt=ie.sibling;if(yt!==null){yt.return=ie.return,Fe=yt;break e}Fe=ie.return}}var nt=g.current;for(Fe=nt;Fe!==null;){Oe=Fe;var bt=Oe.child;if((Oe.subtreeFlags&2064)!==0&&bt!==null)bt.return=Oe,Fe=bt;else e:for(Oe=nt;Fe!==null;){if(et=Fe,(et.flags&2048)!==0)try{switch(et.tag){case 0:case 11:case 15:$e(9,et)}}catch(Nn){Jo(et,et.return,Nn)}if(et===Oe){Fe=null;break e}var hn=et.sibling;if(hn!==null){hn.return=et.return,Fe=hn;break e}Fe=et.return}}if(or=$,xa(),gs&&typeof gs.onPostCommitFiberRoot=="function")try{gs.onPostCommitFiberRoot($u,g)}catch{}B=!0}return B}finally{ur=I,Xr.transition=x}}return!1}function Cu(g,x,I){x=Ad(I,x),x=sm(g,x,1),gl(g,x),x=Mr(),g=tu(g,1),g!==null&&(ps(g,1,x),Wa(g,x))}function Jo(g,x,I){if(g.tag===3)Cu(g,g,I);else for(;x!==null;){if(x.tag===3){Cu(x,g,I);break}else if(x.tag===1){var B=x.stateNode;if(typeof x.type.getDerivedStateFromError=="function"||typeof B.componentDidCatch=="function"&&(ko===null||!ko.has(B))){g=Ad(I,g),g=Td(x,g,1),gl(x,g),g=Mr(),x=tu(x,1),x!==null&&(ps(x,1,g),Wa(x,g));break}}x=x.return}}function Rd(g,x,I){var B=g.pingCache;B!==null&&B.delete(x),x=Mr(),g.pingedLanes|=g.suspendedLanes&I,ji===g&&(si&I)===I&&(fi===4||fi===3&&(si&130023424)===si&&500>zi()-Tu?$a(g,0):Eu|=I),Wa(g,x)}function Fh(g,x){x===0&&((g.mode&1)===0?x=1:(x=Ir,Ir<<=1,(Ir&130023424)===0&&(Ir=4194304)));var I=Mr();g=tu(g,x),g!==null&&(ps(g,x,I),Wa(g,I))}function Nd(g){var x=g.memoizedState,I=0;x!==null&&(I=x.retryLane),Fh(g,I)}function Ld(g,x){var I=0;switch(g.tag){case 13:var B=g.stateNode,$=g.memoizedState;$!==null&&(I=$.retryLane);break;case 19:B=g.stateNode;break;default:throw Error(a(314))}B!==null&&B.delete(x),Fh(g,I)}var lv;lv=function(g,x,I){if(g!==null)if(g.memoizedProps!==x.pendingProps||Mn.current)no=!0;else{if((g.lanes&I)===0&&(x.flags&128)===0)return no=!1,ge(g,x,I);no=(g.flags&131072)!==0}else no=!1,ri&&(x.flags&1048576)!==0&&xo(x,Xn,x.index);switch(x.lanes=0,x.tag){case 2:var B=x.type;g!==null&&(g.alternate=null,x.alternate=null,x.flags|=2),g=x.pendingProps;var $=gr(x,kt.current);pl(x,I),$=Ri(null,x,B,g,$,I);var ie=sa();return x.flags|=1,typeof $=="object"&&$!==null&&typeof $.render=="function"&&$.$$typeof===void 0?(x.tag=1,x.memoizedState=null,x.updateQueue=null,vr(B)?(ie=!0,Pn(x)):ie=!1,x.memoizedState=$.state!==null&&$.state!==void 0?$.state:null,ml(x),$.updater=fe,x.stateNode=$,$._reactInternals=x,At(x,B,g,I),x=fa(null,x,B,!0,ie,I)):(x.tag=0,ri&&ie&&ns(x),Ai(null,x,$,I),x=x.child),x;case 16:B=x.elementType;e:{switch(g!==null&&(g.alternate=null,x.alternate=null,x.flags|=2),g=x.pendingProps,$=B._init,B=$(B._payload),x.type=B,$=x.tag=ub(B),g=Ki(B,g),$){case 0:x=eu(null,x,B,g,I);break e;case 1:x=lc(null,x,B,g,I);break e;case 11:x=$r(null,x,B,g,I);break e;case 14:x=Jr(null,x,B,Ki(B.type,g),I);break e}throw Error(a(306,B,""))}return x;case 0:return B=x.type,$=x.pendingProps,$=x.elementType===B?$:Ki(B,$),eu(g,x,B,$,I);case 1:return B=x.type,$=x.pendingProps,$=x.elementType===B?$:Ki(B,$),lc(g,x,B,$,I);case 3:e:{if(Bf(x),g===null)throw Error(a(387));B=x.pendingProps,ie=x.memoizedState,$=ie.element,Ju(g,x),gu(x,B,null,I);var Oe=x.memoizedState;if(B=Oe.element,Je&&ie.isDehydrated)if(ie={element:B,isDehydrated:!1,cache:Oe.cache,transitions:Oe.transitions},x.updateQueue.baseState=ie,x.memoizedState=ie,x.flags&256){$=Error(a(423)),x=Oh(g,x,B,I,$);break e}else if(B!==$){$=Error(a(424)),x=Oh(g,x,B,I,$);break e}else for(Je&&(co=Po(x.stateNode.containerInfo),ki=x,ri=!0,jo=null,yl=!1),I=Wc(x,null,B,I),x.child=I;I;)I.flags=I.flags&-3|4096,I=I.sibling;else{if(Us(),B===$){x=he(g,x,I);break e}Ai(g,x,B,I)}x=x.child}return x;case 5:return wl(x),g===null&&Zi(x),B=x.type,$=x.pendingProps,ie=g!==null?g.memoizedProps:null,Oe=$.children,de(B,$)?Oe=null:ie!==null&&de(B,ie)&&(x.flags|=32),Ta(g,x),Ai(g,x,Oe,I),x.child;case 6:return g===null&&Zi(x),null;case 13:return Dh(g,x,I);case 4:return Bs(x,x.stateNode.containerInfo),B=x.pendingProps,g===null?x.child=So(x,null,B,I):Ai(g,x,B,I),x.child;case 11:return B=x.type,$=x.pendingProps,$=x.elementType===B?$:Ki(B,$),$r(g,x,B,$,I);case 7:return Ai(g,x,x.pendingProps,I),x.child;case 8:return Ai(g,x,x.pendingProps.children,I),x.child;case 12:return Ai(g,x,x.pendingProps.children,I),x.child;case 10:e:{if(B=x.type._context,$=x.pendingProps,ie=x.memoizedProps,Oe=$.value,Wl(x,B,Oe),ie!==null)if(Hi(ie.value,Oe)){if(ie.children===$.children&&!Mn.current){x=he(g,x,I);break e}}else for(ie=x.child,ie!==null&&(ie.return=x);ie!==null;){var et=ie.dependencies;if(et!==null){Oe=ie.child;for(var Pt=et.firstContext;Pt!==null;){if(Pt.context===B){if(ie.tag===1){Pt=vs(-1,I&-I),Pt.tag=2;var Jt=ie.updateQueue;if(Jt!==null){Jt=Jt.shared;var bn=Jt.pending;bn===null?Pt.next=Pt:(Pt.next=bn.next,bn.next=Pt),Jt.pending=Pt}}ie.lanes|=I,Pt=ie.alternate,Pt!==null&&(Pt.lanes|=I),jl(ie.return,I,x),et.lanes|=I;break}Pt=Pt.next}}else if(ie.tag===10)Oe=ie.type===x.type?null:ie.child;else if(ie.tag===18){if(Oe=ie.return,Oe===null)throw Error(a(341));Oe.lanes|=I,et=Oe.alternate,et!==null&&(et.lanes|=I),jl(Oe,I,x),Oe=ie.sibling}else Oe=ie.child;if(Oe!==null)Oe.return=ie;else for(Oe=ie;Oe!==null;){if(Oe===x){Oe=null;break}if(ie=Oe.sibling,ie!==null){ie.return=Oe.return,Oe=ie;break}Oe=Oe.return}ie=Oe}Ai(g,x,$.children,I),x=x.child}return x;case 9:return $=x.type,B=x.pendingProps.children,pl(x,I),$=Ro($),B=B($),x.flags|=1,Ai(g,x,B,I),x.child;case 14:return B=x.type,$=Ki(B,x.pendingProps),$=Ki(B.type,$),Jr(g,x,B,$,I);case 15:return Ql(g,x,x.type,x.pendingProps,I);case 17:return B=x.type,$=x.pendingProps,$=x.elementType===B?$:Ki(B,$),g!==null&&(g.alternate=null,x.alternate=null,x.flags|=2),x.tag=1,vr(B)?(g=!0,Pn(x)):g=!1,pl(x,I),qe(x,B,$),At(x,B,$,I),fa(null,x,B,!0,g,I);case 19:return ce(g,x,I);case 22:return Do(g,x,I)}throw Error(a(156,x.tag))};function um(g,x){return Bn(g,x)}function l1(g,x,I,B){this.tag=g,this.key=I,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=x,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=B,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ws(g,x,I,B){return new l1(g,x,I,B)}function cm(g){return g=g.prototype,!(!g||!g.isReactComponent)}function ub(g){if(typeof g=="function")return cm(g)?1:0;if(g!=null){if(g=g.$$typeof,g===S)return 11;if(g===w)return 14}return 2}function dc(g,x){var I=g.alternate;return I===null?(I=Ws(g.tag,x,g.key,g.mode),I.elementType=g.elementType,I.type=g.type,I.stateNode=g.stateNode,I.alternate=g,g.alternate=I):(I.pendingProps=x,I.type=g.type,I.flags=0,I.subtreeFlags=0,I.deletions=null),I.flags=g.flags&14680064,I.childLanes=g.childLanes,I.lanes=g.lanes,I.child=g.child,I.memoizedProps=g.memoizedProps,I.memoizedState=g.memoizedState,I.updateQueue=g.updateQueue,x=g.dependencies,I.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext},I.sibling=g.sibling,I.index=g.index,I.ref=g.ref,I}function fm(g,x,I,B,$,ie){var Oe=2;if(B=g,typeof g=="function")cm(g)&&(Oe=1);else if(typeof g=="string")Oe=5;else e:switch(g){case c:return Hf(I.children,$,ie,x);case f:Oe=8,$|=8;break;case h:return g=Ws(12,I,x,$|2),g.elementType=h,g.lanes=ie,g;case y:return g=Ws(13,I,x,$),g.elementType=y,g.lanes=ie,g;case _:return g=Ws(19,I,x,$),g.elementType=_,g.lanes=ie,g;case E:return Uh(I,$,ie,x);default:if(typeof g=="object"&&g!==null)switch(g.$$typeof){case p:Oe=10;break e;case v:Oe=9;break e;case S:Oe=11;break e;case w:Oe=14;break e;case A:Oe=16,B=null;break e}throw Error(a(130,g==null?g:typeof g,""))}return x=Ws(Oe,I,x,$),x.elementType=g,x.type=B,x.lanes=ie,x}function Hf(g,x,I,B){return g=Ws(7,g,B,x),g.lanes=I,g}function Uh(g,x,I,B){return g=Ws(22,g,B,x),g.elementType=E,g.lanes=I,g.stateNode={},g}function dm(g,x,I){return g=Ws(6,g,null,x),g.lanes=I,g}function hm(g,x,I){return x=Ws(4,g.children!==null?g.children:[],g.key,x),x.lanes=I,x.stateNode={containerInfo:g.containerInfo,pendingChildren:null,implementation:g.implementation},x}function pm(g,x,I,B,$){this.tag=x,this.containerInfo=g,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ee,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vl(0),this.expirationTimes=Vl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vl(0),this.identifierPrefix=B,this.onRecoverableError=$,Je&&(this.mutableSourceEagerHydrationData=null)}function u1(g,x,I,B,$,ie,Oe,et,Pt){return g=new pm(g,x,I,et,Pt),x===1?(x=1,ie===!0&&(x|=8)):x=0,ie=Ws(3,null,null,x),g.current=ie,ie.stateNode=g,ie.memoizedState={element:B,isDehydrated:I,cache:null,transitions:null},ml(ie),g}function c1(g){if(!g)return Vt;g=g._reactInternals;e:{if(F(g)!==g||g.tag!==1)throw Error(a(170));var x=g;do{switch(x.tag){case 3:x=x.stateNode.context;break e;case 1:if(vr(x.type)){x=x.stateNode.__reactInternalMemoizedMergedChildContext;break e}}x=x.return}while(x!==null);throw Error(a(171))}if(g.tag===1){var I=g.type;if(vr(I))return kn(g,I,x)}return x}function f1(g){var x=g._reactInternals;if(x===void 0)throw typeof g.render=="function"?Error(a(188)):(g=Object.keys(g).join(","),Error(a(268,g)));return g=z(x),g===null?null:g.stateNode}function Ml(g,x){if(g=g.memoizedState,g!==null&&g.dehydrated!==null){var I=g.retryLane;g.retryLane=I!==0&&I<x?I:x}}function Bh(g,x){Ml(g,x),(g=g.alternate)&&Ml(g,x)}function mm(g){return g=z(g),g===null?null:g.stateNode}function d1(){return null}return t.attemptContinuousHydration=function(g){if(g.tag===13){var x=Mr();po(g,134217728,x),Bh(g,134217728)}},t.attemptHydrationAtCurrentPriority=function(g){if(g.tag===13){var x=Mr(),I=as(g);po(g,I,x),Bh(g,I)}},t.attemptSynchronousHydration=function(g){switch(g.tag){case 3:var x=g.stateNode;if(x.current.memoizedState.isDehydrated){var I=ll(x.pendingLanes);I!==0&&(wi(x,I|1),Wa(x,zi()),(or&6)===0&&(uc(),xa()))}break;case 13:var B=Mr();tf(function(){return po(g,1,B)}),Bh(g,1)}},t.batchedUpdates=function(g,x){var I=or;or|=1;try{return g(x)}finally{or=I,or===0&&(uc(),dl&&xa())}},t.createComponentSelector=function(g){return{$$typeof:Dr,value:g}},t.createContainer=function(g,x,I,B,$,ie,Oe){return u1(g,x,!1,null,I,B,$,ie,Oe)},t.createHasPseudoClassSelector=function(g){return{$$typeof:bo,value:g}},t.createHydrationContainer=function(g,x,I,B,$,ie,Oe,et,Pt){return g=u1(I,B,!0,g,$,ie,Oe,et,Pt),g.context=c1(null),I=g.current,B=Mr(),$=as(I),ie=vs(B,$),ie.callback=x??null,gl(I,ie),g.current.lanes=$,ps(g,$,B),Wa(g,B),g},t.createPortal=function(g,x,I){var B=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:B==null?null:""+B,children:g,containerInfo:x,implementation:I}},t.createRoleSelector=function(g){return{$$typeof:Ao,value:g}},t.createTestNameSelector=function(g){return{$$typeof:yi,value:g}},t.createTextSelector=function(g){return{$$typeof:Wi,value:g}},t.deferredUpdates=function(g){var x=ur,I=Xr.transition;try{return Xr.transition=null,ur=16,g()}finally{ur=x,Xr.transition=I}},t.discreteUpdates=function(g,x,I,B,$){var ie=ur,Oe=Xr.transition;try{return Xr.transition=null,ur=1,g(x,I,B,$)}finally{ur=ie,Xr.transition=Oe,or===0&&uc()}},t.findAllNodes=Ma,t.findBoundingRects=function(g,x){if(!lt)throw Error(a(363));x=Ma(g,x),g=[];for(var I=0;I<x.length;I++)g.push(le(x[I]));for(x=g.length-1;0<x;x--){I=g[x];for(var B=I.x,$=B+I.width,ie=I.y,Oe=ie+I.height,et=x-1;0<=et;et--)if(x!==et){var Pt=g[et],Jt=Pt.x,bn=Jt+Pt.width,ar=Pt.y,Hn=ar+Pt.height;if(B>=Jt&&ie>=ar&&$<=bn&&Oe<=Hn){g.splice(x,1);break}else if(B!==Jt||I.width!==Pt.width||Hn<ie||ar>Oe){if(!(ie!==ar||I.height!==Pt.height||bn<B||Jt>$)){Jt>B&&(Pt.width+=Jt-B,Pt.x=B),bn<$&&(Pt.width=$-Jt),g.splice(x,1);break}}else{ar>ie&&(Pt.height+=ar-ie,Pt.y=ie),Hn<Oe&&(Pt.height=Oe-ar),g.splice(x,1);break}}}return g},t.findHostInstance=f1,t.findHostInstanceWithNoPortals=function(g){return g=k(g),g=g!==null?j(g):null,g===null?null:g.stateNode},t.findHostInstanceWithWarning=function(g){return f1(g)},t.flushControlled=function(g){var x=or;or|=1;var I=Xr.transition,B=ur;try{Xr.transition=null,ur=1,g()}finally{ur=B,Xr.transition=I,or=x,or===0&&(uc(),xa())}},t.flushPassiveEffects=Ko,t.flushSync=tf,t.focusWithin=function(g,x){if(!lt)throw Error(a(363));for(g=ha(g),x=io(g,x),x=Array.from(x),g=0;g<x.length;){var I=x[g++];if(!rt(I)){if(I.tag===5&&ht(I.stateNode))return!0;for(I=I.child;I!==null;)x.push(I),I=I.sibling}}return!1},t.getCurrentUpdatePriority=function(){return ur},t.getFindAllNodesFailureDescription=function(g,x){if(!lt)throw Error(a(363));var I=0,B=[];g=[ha(g),0];for(var $=0;$<g.length;){var ie=g[$++],Oe=g[$++],et=x[Oe];if((ie.tag!==5||!rt(ie))&&(qa(ie,et)&&(B.push(Ei(et)),Oe++,Oe>I&&(I=Oe)),Oe<x.length))for(ie=ie.child;ie!==null;)g.push(ie,Oe),ie=ie.sibling}if(I<x.length){for(g=[];I<x.length;I++)g.push(Ei(x[I]));return`findAllNodes was able to match part of the selector:
  `+(B.join(" > ")+`

No matching component was found for:
  `)+g.join(" > ")}return null},t.getPublicRootInstance=function(g){if(g=g.current,!g.child)return null;switch(g.child.tag){case 5:return Y(g.child.stateNode);default:return g.child.stateNode}},t.injectIntoDevTools=function(g){if(g={bundleType:g.bundleType,version:g.version,rendererPackageName:g.rendererPackageName,rendererConfig:g.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:s.ReactCurrentDispatcher,findHostInstanceByFiber:mm,findFiberByHostInstance:g.findFiberByHostInstance||d1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")g=!1;else{var x=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(x.isDisabled||!x.supportsFiber)g=!0;else{try{$u=x.inject(g),gs=x}catch{}g=!!x.checkDCE}}return g},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(g,x,I,B){if(!lt)throw Error(a(363));g=Ma(g,x);var $=qt(g,I,B).disconnect;return{disconnect:function(){$()}}},t.registerMutableSourceForHydration=function(g,x){var I=x._getVersion;I=I(x._source),g.mutableSourceEagerHydrationData==null?g.mutableSourceEagerHydrationData=[x,I]:g.mutableSourceEagerHydrationData.push(x,I)},t.runWithPriority=function(g,x){var I=ur;try{return ur=g,x()}finally{ur=I}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(g,x,I,B){var $=x.current,ie=Mr(),Oe=as($);return I=c1(I),x.context===null?x.context=I:x.pendingContext=I,x=vs(ie,Oe),x.payload={element:g},B=B===void 0?null:B,B!==null&&(x.callback=B),gl($,x),g=po($,Oe,ie),g!==null&&$l(g,$,Oe),Oe},t}),N2}var CO;function dae(){return CO||(CO=1,P2.exports=fae()),P2.exports}var hae=dae();const pae=gi(hae);var PO=K7();const uI={},cI=n=>void Object.assign(uI,n);function mae(n,e){function t(c,{args:f=[],attach:h,...p},v){let S=`${c[0].toUpperCase()}${c.slice(1)}`,y;if(c==="primitive"){if(p.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const _=p.object;y=jm(_,{type:c,root:v,attach:h,primitive:!0})}else{const _=uI[S];if(!_)throw new Error(`R3F: ${S} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(f))throw new Error("R3F: The args prop must be an array!");y=jm(new _(...f),{type:c,root:v,attach:h,memoizedProps:{args:f}})}return y.__r3f.attach===void 0&&(y instanceof wr?y.__r3f.attach="geometry":y instanceof ds&&(y.__r3f.attach="material")),S!=="inject"&&D2(y,p),y}function r(c,f){let h=!1;if(f){var p,v;(p=f.__r3f)!=null&&p.attach?O2(c,f,f.__r3f.attach):f.isObject3D&&c.isObject3D&&(c.add(f),h=!0),h||(v=c.__r3f)==null||v.objects.push(f),f.__r3f||jm(f,{}),f.__r3f.parent=c,NC(f),$m(f)}}function i(c,f,h){let p=!1;if(f){var v,S;if((v=f.__r3f)!=null&&v.attach)O2(c,f,f.__r3f.attach);else if(f.isObject3D&&c.isObject3D){f.parent=c,f.dispatchEvent({type:"added"}),c.dispatchEvent({type:"childadded",child:f});const y=c.children.filter(w=>w!==f),_=y.indexOf(h);c.children=[...y.slice(0,_),f,...y.slice(_)],p=!0}p||(S=c.__r3f)==null||S.objects.push(f),f.__r3f||jm(f,{}),f.__r3f.parent=c,NC(f),$m(f)}}function o(c,f,h=!1){c&&[...c].forEach(p=>a(f,p,h))}function a(c,f,h){if(f){var p,v,S;if(f.__r3f&&(f.__r3f.parent=null),(p=c.__r3f)!=null&&p.objects&&(c.__r3f.objects=c.__r3f.objects.filter(E=>E!==f)),(v=f.__r3f)!=null&&v.attach)OO(c,f,f.__r3f.attach);else if(f.isObject3D&&c.isObject3D){var y;c.remove(f),(y=f.__r3f)!=null&&y.root&&wae(n_(f),f)}const w=(S=f.__r3f)==null?void 0:S.primitive,A=!w&&(h===void 0?f.dispose!==null:h);if(!w){var _;o((_=f.__r3f)==null?void 0:_.objects,f,A),o(f.children,f,A)}if(delete f.__r3f,A&&f.dispose&&f.type!=="Scene"){const E=()=>{try{f.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?PO.unstable_scheduleCallback(PO.unstable_IdlePriority,E):E()}$m(c)}}function s(c,f,h,p){var v;const S=(v=c.__r3f)==null?void 0:v.parent;if(!S)return;const y=t(f,h,c.__r3f.root);if(c.children){for(const _ of c.children)_.__r3f&&r(y,_);c.children=c.children.filter(_=>!_.__r3f)}c.__r3f.objects.forEach(_=>r(y,_)),c.__r3f.objects=[],c.__r3f.autoRemovedBeforeAppend||a(S,c),y.parent&&(y.__r3f.autoRemovedBeforeAppend=!0),r(S,y),y.raycast&&y.__r3f.eventCount&&n_(y).getState().internal.interaction.push(y),[p,p.alternate].forEach(_=>{_!==null&&(_.stateNode=y,_.ref&&(typeof _.ref=="function"?_.ref(y):_.ref.current=y))})}const l=()=>{};return{reconciler:pae({createInstance:t,removeChild:a,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(c,f)=>{if(!f)return;const h=c.getState().scene;h.__r3f&&(h.__r3f.root=c,r(h,f))},removeChildFromContainer:(c,f)=>{f&&a(c.getState().scene,f)},insertInContainerBefore:(c,f,h)=>{if(!f||!h)return;const p=c.getState().scene;p.__r3f&&i(p,f,h)},getRootHostContext:()=>null,getChildHostContext:c=>c,finalizeInitialChildren(c){var f;return!!((f=c==null?void 0:c.__r3f)!=null?f:{}).handlers},prepareUpdate(c,f,h,p){var v;if(((v=c==null?void 0:c.__r3f)!=null?v:{}).primitive&&p.object&&p.object!==c)return[!0];{const{args:y=[],children:_,...w}=p,{args:A=[],children:E,...P}=h;if(!Array.isArray(y))throw new Error("R3F: the args prop must be an array!");if(y.some((L,D)=>L!==A[D]))return[!0];const O=rH(c,w,P,!0);return O.changes.length?[!1,O]:null}},commitUpdate(c,[f,h],p,v,S,y){f?s(c,p,S,y):D2(c,h)},commitMount(c,f,h,p){var v;const S=(v=c.__r3f)!=null?v:{};c.raycast&&S.handlers&&S.eventCount&&n_(c).getState().internal.interaction.push(c)},getPublicInstance:c=>c,prepareForCommit:()=>null,preparePortalMount:c=>jm(c.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(c){var f;const{attach:h,parent:p}=(f=c.__r3f)!=null?f:{};h&&p&&OO(p,c,h),c.isObject3D&&(c.visible=!1),$m(c)},unhideInstance(c,f){var h;const{attach:p,parent:v}=(h=c.__r3f)!=null?h:{};p&&v&&O2(v,c,p),(c.isObject3D&&f.visible==null||f.visible)&&(c.visible=!0),$m(c)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():rg.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Yi.fun(performance.now)?performance.now:Yi.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Yi.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Yi.fun(clearTimeout)?clearTimeout:void 0}),applyProps:D2}}var IO,RO;const L2=n=>"colorSpace"in n||"outputColorSpace"in n,J7=()=>{var n;return(n=uI.ColorManagement)!=null?n:null},Z7=n=>n&&n.isOrthographicCamera,gae=n=>n&&n.hasOwnProperty("current"),Yy=typeof window<"u"&&((IO=window.document)!=null&&IO.createElement||((RO=window.navigator)==null?void 0:RO.product)==="ReactNative")?Me.useLayoutEffect:Me.useEffect;function Q7(n){const e=Me.useRef(n);return Yy(()=>void(e.current=n),[n]),e}function vae({set:n}){return Yy(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}let eH=class extends Me.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}};eH.getDerivedStateFromError=()=>({error:!0});const tH="__default",NO=new Map,yae=n=>n&&!!n.memoized&&!!n.changes;function nH(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const Rv=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function n_(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const Yi={obj:n=>n===Object(n)&&!Yi.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:i=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Yi.str(n)||Yi.num(n)||Yi.boo(n))return n===e;const o=Yi.obj(n);if(o&&r==="reference")return n===e;const a=Yi.arr(n);if(a&&t==="reference")return n===e;if((a||o)&&n===e)return!0;let s;for(s in n)if(!(s in e))return!1;if(o&&t==="shallow"&&r==="shallow"){for(s in i?e:n)if(!Yi.equ(n[s],e[s],{strict:i,objects:"reference"}))return!1}else for(s in i?e:n)if(n[s]!==e[s])return!1;if(Yi.und(s)){if(a&&n.length===0&&e.length===0||o&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function xae(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function _ae(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function jm(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function RC(n,e){let t=n;if(e.includes("-")){const r=e.split("-"),i=r.pop();return t=r.reduce((o,a)=>o[a],n),{target:t,key:i}}else return{target:t,key:e}}const LO=/-\d+$/;function O2(n,e,t){if(Yi.str(t)){if(LO.test(t)){const o=t.replace(LO,""),{target:a,key:s}=RC(n,o);Array.isArray(a[s])||(a[s]=[])}const{target:r,key:i}=RC(n,t);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=t(n,e)}function OO(n,e,t){var r,i;if(Yi.str(t)){const{target:o,key:a}=RC(n,t),s=e.__r3f.previousAttach;s===void 0?delete o[a]:o[a]=s}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(n,e);(i=e.__r3f)==null||delete i.previousAttach}function rH(n,{children:e,key:t,ref:r,...i},{children:o,key:a,ref:s,...l}={},u=!1){const c=n.__r3f,f=Object.entries(i),h=[];if(u){const v=Object.keys(l);for(let S=0;S<v.length;S++)i.hasOwnProperty(v[S])||f.unshift([v[S],tH+"remove"])}f.forEach(([v,S])=>{var y;if((y=n.__r3f)!=null&&y.primitive&&v==="object"||Yi.equ(S,l[v]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(v))return h.push([v,S,!0,[]]);let _=[];v.includes("-")&&(_=v.split("-")),h.push([v,S,!1,_]);for(const w in i){const A=i[w];w.startsWith(`${v}-`)&&h.push([w,A,!1,w.split("-")])}});const p={...i};return c!=null&&c.memoizedProps&&c!=null&&c.memoizedProps.args&&(p.args=c.memoizedProps.args),c!=null&&c.memoizedProps&&c!=null&&c.memoizedProps.attach&&(p.attach=c.memoizedProps.attach),{memoized:p,changes:h}}function D2(n,e){var t;const r=n.__r3f,i=r==null?void 0:r.root,o=i==null||i.getState==null?void 0:i.getState(),{memoized:a,changes:s}=yae(e)?e:rH(n,e),l=r==null?void 0:r.eventCount;n.__r3f&&(n.__r3f.memoizedProps=a);for(let c=0;c<s.length;c++){let[f,h,p,v]=s[c];if(L2(n)){const w="srgb",A="srgb-linear";f==="encoding"?(f="colorSpace",h=h===3001?w:A):f==="outputEncoding"&&(f="outputColorSpace",h=h===3001?w:A)}let S=n,y=S[f];if(v.length&&(y=v.reduce((_,w)=>_[w],n),!(y&&y.set))){const[_,...w]=v.reverse();S=w.reverse().reduce((A,E)=>A[E],n),f=_}if(h===tH+"remove")if(S.constructor){let _=NO.get(S.constructor);_||(_=new S.constructor,NO.set(S.constructor,_)),h=_[f]}else h=0;if(p&&r)h?r.handlers[f]=h:delete r.handlers[f],r.eventCount=Object.keys(r.handlers).length;else if(y&&y.set&&(y.copy||y instanceof Mp)){if(Array.isArray(h))y.fromArray?y.fromArray(h):y.set(...h);else if(y.copy&&h&&h.constructor&&y.constructor===h.constructor)y.copy(h);else if(h!==void 0){const _=y instanceof xn;!_&&y.setScalar?y.setScalar(h):y instanceof Mp&&h instanceof Mp?y.mask=h.mask:y.set(h),!J7()&&o&&!o.linear&&_&&y.convertSRGBToLinear()}}else if(S[f]=h,S[f]instanceof Mi&&S[f].format===ia&&S[f].type===Ul&&o){const _=S[f];L2(_)&&L2(o.gl)?_.colorSpace=o.gl.outputColorSpace:_.encoding=o.gl.outputEncoding}$m(n)}if(r&&r.parent&&n.raycast&&l!==r.eventCount){const c=n_(n).getState().internal,f=c.interaction.indexOf(n);f>-1&&c.interaction.splice(f,1),r.eventCount&&c.interaction.push(n)}return!(s.length===1&&s[0][0]==="onUpdate")&&s.length&&(t=n.__r3f)!=null&&t.parent&&NC(n),n}function $m(n){var e,t;const r=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();r&&r.internal.frames===0&&r.invalidate()}function NC(n){n.onUpdate==null||n.onUpdate(n)}function iH(n,e){n.manual||(Z7(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function Ix(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function Sae(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return rg.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return rg.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return rg.ContinuousEventPriority;default:return rg.DefaultEventPriority}}function oH(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function wae(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{oH(t.capturedMap,e,r,i)})}function bae(n){function e(l){const{internal:u}=n.getState(),c=l.offsetX-u.initialClick[0],f=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(c*c+f*f))}function t(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(c=>{var f;return(f=u.__r3f)==null?void 0:f.handlers["onPointer"+c]}))}function r(l,u){const c=n.getState(),f=new Set,h=[],p=u?u(c.internal.interaction):c.internal.interaction;for(let _=0;_<p.length;_++){const w=Rv(p[_]);w&&(w.raycaster.camera=void 0)}c.previousRoot||c.events.compute==null||c.events.compute(l,c);function v(_){const w=Rv(_);if(!w||!w.events.enabled||w.raycaster.camera===null)return[];if(w.raycaster.camera===void 0){var A;w.events.compute==null||w.events.compute(l,w,(A=w.previousRoot)==null?void 0:A.getState()),w.raycaster.camera===void 0&&(w.raycaster.camera=null)}return w.raycaster.camera?w.raycaster.intersectObject(_,!0):[]}let S=p.flatMap(v).sort((_,w)=>{const A=Rv(_.object),E=Rv(w.object);return!A||!E?_.distance-w.distance:E.events.priority-A.events.priority||_.distance-w.distance}).filter(_=>{const w=Ix(_);return f.has(w)?!1:(f.add(w),!0)});c.events.filter&&(S=c.events.filter(S,c));for(const _ of S){let w=_.object;for(;w;){var y;(y=w.__r3f)!=null&&y.eventCount&&h.push({..._,eventObject:w}),w=w.parent}}if("pointerId"in l&&c.internal.capturedMap.has(l.pointerId))for(let _ of c.internal.capturedMap.get(l.pointerId).values())f.has(Ix(_.intersection))||h.push(_.intersection);return h}function i(l,u,c,f){const h=n.getState();if(l.length){const p={stopped:!1};for(const v of l){const S=Rv(v.object)||h,{raycaster:y,pointer:_,camera:w,internal:A}=S,E=new Pe(_.x,_.y,0).unproject(w),P=U=>{var k,z;return(k=(z=A.capturedMap.get(U))==null?void 0:z.has(v.eventObject))!=null?k:!1},O=U=>{const k={intersection:v,target:u.target};A.capturedMap.has(U)?A.capturedMap.get(U).set(v.eventObject,k):A.capturedMap.set(U,new Map([[v.eventObject,k]])),u.target.setPointerCapture(U)},L=U=>{const k=A.capturedMap.get(U);k&&oH(A.capturedMap,v.eventObject,k,U)};let D={};for(let U in u){let k=u[U];typeof k!="function"&&(D[U]=k)}let F={...v,...D,pointer:_,intersections:l,stopped:p.stopped,delta:c,unprojectedPoint:E,ray:y.ray,camera:w,stopPropagation(){const U="pointerId"in u&&A.capturedMap.get(u.pointerId);if((!U||U.has(v.eventObject))&&(F.stopped=p.stopped=!0,A.hovered.size&&Array.from(A.hovered.values()).find(k=>k.eventObject===v.eventObject))){const k=l.slice(0,l.indexOf(v));o([...k,v])}},target:{hasPointerCapture:P,setPointerCapture:O,releasePointerCapture:L},currentTarget:{hasPointerCapture:P,setPointerCapture:O,releasePointerCapture:L},nativeEvent:u};if(f(F),p.stopped===!0)break}}return l}function o(l){const{internal:u}=n.getState();for(const c of u.hovered.values())if(!l.length||!l.find(f=>f.object===c.object&&f.index===c.index&&f.instanceId===c.instanceId)){const h=c.eventObject.__r3f,p=h==null?void 0:h.handlers;if(u.hovered.delete(Ix(c)),h!=null&&h.eventCount){const v={...c,intersections:l};p.onPointerOut==null||p.onPointerOut(v),p.onPointerLeave==null||p.onPointerLeave(v)}}}function a(l,u){for(let c=0;c<u.length;c++){const f=u[c].__r3f;f==null||f.handlers.onPointerMissed==null||f.handlers.onPointerMissed(l)}}function s(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>o([]);case"onLostPointerCapture":return u=>{const{internal:c}=n.getState();"pointerId"in u&&c.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{c.capturedMap.has(u.pointerId)&&(c.capturedMap.delete(u.pointerId),o([]))})}}return function(c){const{onPointerMissed:f,internal:h}=n.getState();h.lastEvent.current=c;const p=l==="onPointerMove",v=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",y=r(c,p?t:void 0),_=v?e(c):0;l==="onPointerDown"&&(h.initialClick=[c.offsetX,c.offsetY],h.initialHits=y.map(A=>A.eventObject)),v&&!y.length&&_<=2&&(a(c,h.interaction),f&&f(c)),p&&o(y);function w(A){const E=A.eventObject,P=E.__r3f,O=P==null?void 0:P.handlers;if(P!=null&&P.eventCount)if(p){if(O.onPointerOver||O.onPointerEnter||O.onPointerOut||O.onPointerLeave){const L=Ix(A),D=h.hovered.get(L);D?D.stopped&&A.stopPropagation():(h.hovered.set(L,A),O.onPointerOver==null||O.onPointerOver(A),O.onPointerEnter==null||O.onPointerEnter(A))}O.onPointerMove==null||O.onPointerMove(A)}else{const L=O[l];L?(!v||h.initialHits.includes(E))&&(a(c,h.interaction.filter(D=>!h.initialHits.includes(D))),L(A)):v&&h.initialHits.includes(E)&&a(c,h.interaction.filter(D=>!h.initialHits.includes(D)))}}i(y,c,_,w)}}return{handlePointer:s}}const Aae=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],aH=n=>!!(n!=null&&n.render),fI=Me.createContext(null),Eae=(n,e)=>{const t=$7((s,l)=>{const u=new Pe,c=new Pe,f=new Pe;function h(_=l().camera,w=c,A=l().size){const{width:E,height:P,top:O,left:L}=A,D=E/P;w instanceof Pe?f.copy(w):f.set(...w);const F=_.getWorldPosition(u).distanceTo(f);if(Z7(_))return{width:E/_.zoom,height:P/_.zoom,top:O,left:L,factor:1,distance:F,aspect:D};{const U=_.fov*Math.PI/180,k=2*Math.tan(U/2)*F,z=k*(E/P);return{width:z,height:k,top:O,left:L,factor:E/z,distance:F,aspect:D}}}let p;const v=_=>s(w=>({performance:{...w.performance,current:_}})),S=new zt;return{set:s,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(_=1)=>n(l(),_),advance:(_,w)=>e(_,w,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new rI,pointer:S,mouse:S,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const _=l();p&&clearTimeout(p),_.performance.current!==_.performance.min&&v(_.performance.min),p=setTimeout(()=>v(l().performance.max),_.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:h},setEvents:_=>s(w=>({...w,events:{...w.events,..._}})),setSize:(_,w,A,E,P)=>{const O=l().camera,L={width:_,height:w,top:E||0,left:P||0,updateStyle:A};s(D=>({size:L,viewport:{...D.viewport,...h(O,c,L)}}))},setDpr:_=>s(w=>{const A=nH(_);return{viewport:{...w.viewport,dpr:A,initialDpr:w.viewport.initialDpr||A}}}),setFrameloop:(_="always")=>{const w=l().clock;w.stop(),w.elapsedTime=0,_!=="never"&&(w.start(),w.elapsedTime=0),s(()=>({frameloop:_}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:Me.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(_,w,A)=>{const E=l().internal;return E.priority=E.priority+(w>0?1:0),E.subscribers.push({ref:_,priority:w,store:A}),E.subscribers=E.subscribers.sort((P,O)=>P.priority-O.priority),()=>{const P=l().internal;P!=null&&P.subscribers&&(P.priority=P.priority-(w>0?1:0),P.subscribers=P.subscribers.filter(O=>O.ref!==_))}}}}}),r=t.getState();let i=r.size,o=r.viewport.dpr,a=r.camera;return t.subscribe(()=>{const{camera:s,size:l,viewport:u,gl:c,set:f}=t.getState();if(l.width!==i.width||l.height!==i.height||u.dpr!==o){var h;i=l,o=u.dpr,iH(s,l),c.setPixelRatio(u.dpr);const p=(h=l.updateStyle)!=null?h:typeof HTMLCanvasElement<"u"&&c.domElement instanceof HTMLCanvasElement;c.setSize(l.width,l.height,p)}s!==a&&(a=s,f(p=>({viewport:{...p.viewport,...p.viewport.getCurrentViewport(s)}})))}),t.subscribe(s=>n(s)),t};let Rx,Tae=new Set,Mae=new Set,Cae=new Set;function k2(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Nv(n,e){switch(n){case"before":return k2(Tae,e);case"after":return k2(Mae,e);case"tail":return k2(Cae,e)}}let F2,U2;function B2(n,e,t){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(r=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),F2=e.internal.subscribers,Rx=0;Rx<F2.length;Rx++)U2=F2[Rx],U2.ref.current(U2.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function Pae(n){let e=!1,t=!1,r,i,o;function a(u){i=requestAnimationFrame(a),e=!0,r=0,Nv("before",u),t=!0;for(const f of n.values()){var c;o=f.store.getState(),o.internal.active&&(o.frameloop==="always"||o.internal.frames>0)&&!((c=o.gl.xr)!=null&&c.isPresenting)&&(r+=B2(u,o))}if(t=!1,Nv("after",u),r===0)return Nv("tail",u),e=!1,cancelAnimationFrame(i)}function s(u,c=1){var f;if(!u)return n.forEach(h=>s(h.store.getState(),c));(f=u.gl.xr)!=null&&f.isPresenting||!u.internal.active||u.frameloop==="never"||(c>1?u.internal.frames=Math.min(60,u.internal.frames+c):t?u.internal.frames=2:u.internal.frames=1,e||(e=!0,requestAnimationFrame(a)))}function l(u,c=!0,f,h){if(c&&Nv("before",u),f)B2(u,f,h);else for(const p of n.values())B2(u,p.store.getState());c&&Nv("after",u)}return{loop:a,invalidate:s,advance:l}}function dI(){const n=Me.useContext(fI);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Oc(n=t=>t,e){return dI()(n,e)}function Mw(n,e=0){const t=dI(),r=t.getState().internal.subscribe,i=Q7(n);return Yy(()=>r(i,e,t),[e,r,t]),null}const DO=new WeakMap;function sH(n,e){return function(t,...r){let i=DO.get(t);return i||(i=new t,DO.set(t,i)),n&&n(i),Promise.all(r.map(o=>new Promise((a,s)=>i.load(o,l=>{l.scene&&Object.assign(l,xae(l.scene)),a(l)},e,l=>s(new Error(`Could not load ${o}: ${l==null?void 0:l.message}`))))))}}function Sg(n,e,t,r){const i=Array.isArray(e)?e:[e],o=sae(sH(t,r),[n,...i],{equal:Yi.equ});return Array.isArray(e)?o:o[0]}Sg.preload=function(n,e,t){const r=Array.isArray(e)?e:[e];return lae(sH(t),[n,...r])};Sg.clear=function(n,e){const t=Array.isArray(e)?e:[e];return uae([n,...t])};const wg=new Map,{invalidate:kO,advance:FO}=Pae(wg),{reconciler:q0,applyProps:th}=mae(wg,Sae),Um={objects:"shallow",strict:!1},Iae=(n,e)=>{const t=typeof n=="function"?n(e):n;return aH(t)?t:new zP({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function Rae(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:o,left:a,updateStyle:s=t}=e;return{width:r,height:i,top:o,left:a,updateStyle:s}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:r,height:i,top:o,left:a}=n.parentElement.getBoundingClientRect();return{width:r,height:i,top:o,left:a,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function Nae(n){const e=wg.get(n),t=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,o=r||Eae(kO,FO),a=t||q0.createContainer(o,rg.ConcurrentRoot,null,!1,null,"",i,null);e||wg.set(n,{fiber:a,store:o});let s,l=!1,u;return{configure(c={}){let{gl:f,size:h,scene:p,events:v,onCreated:S,shadows:y=!1,linear:_=!1,flat:w=!1,legacy:A=!1,orthographic:E=!1,frameloop:P="always",dpr:O=[1,2],performance:L,raycaster:D,camera:F,onPointerMissed:U}=c,k=o.getState(),z=k.gl;k.gl||k.set({gl:z=Iae(f,n)});let W=k.raycaster;W||k.set({raycaster:W=new sI});const{params:j,...se}=D||{};if(Yi.equ(se,W,Um)||th(W,{...se}),Yi.equ(j,W.params,Um)||th(W,{params:{...W.params,...j}}),!k.camera||k.camera===u&&!Yi.equ(u,F,Um)){u=F;const oe=F instanceof zy,ee=oe?F:E?new Xg(0,0,0,0,.1,1e3):new Qa(75,0,.1,1e3);oe||(ee.position.z=5,F&&(th(ee,F),("aspect"in F||"left"in F||"right"in F||"bottom"in F||"top"in F)&&(ee.manual=!0,ee.updateProjectionMatrix())),!k.camera&&!(F!=null&&F.rotation)&&ee.lookAt(0,0,0)),k.set({camera:ee}),W.camera=ee}if(!k.scene){let oe;p instanceof xg?oe=p:(oe=new xg,p&&th(oe,p)),k.set({scene:jm(oe)})}if(!k.xr){var Y;const oe=(ne,te)=>{const de=o.getState();de.frameloop!=="never"&&FO(ne,!0,de,te)},ee=()=>{const ne=o.getState();ne.gl.xr.enabled=ne.gl.xr.isPresenting,ne.gl.xr.setAnimationLoop(ne.gl.xr.isPresenting?oe:null),ne.gl.xr.isPresenting||kO(ne)},G={connect(){const ne=o.getState().gl;ne.xr.addEventListener("sessionstart",ee),ne.xr.addEventListener("sessionend",ee)},disconnect(){const ne=o.getState().gl;ne.xr.removeEventListener("sessionstart",ee),ne.xr.removeEventListener("sessionend",ee)}};typeof((Y=z.xr)==null?void 0:Y.addEventListener)=="function"&&G.connect(),k.set({xr:G})}if(z.shadowMap){const oe=z.shadowMap.enabled,ee=z.shadowMap.type;if(z.shadowMap.enabled=!!y,Yi.boo(y))z.shadowMap.type=i0;else if(Yi.str(y)){var Q;const G={basic:Z8,percentage:KS,soft:i0,variance:Ac};z.shadowMap.type=(Q=G[y])!=null?Q:i0}else Yi.obj(y)&&Object.assign(z.shadowMap,y);(oe!==z.shadowMap.enabled||ee!==z.shadowMap.type)&&(z.shadowMap.needsUpdate=!0)}const X=J7();X&&("enabled"in X?X.enabled=!A:"legacyMode"in X&&(X.legacyMode=A)),l||th(z,{outputEncoding:_?3e3:3001,toneMapping:w?vf:_P}),k.legacy!==A&&k.set(()=>({legacy:A})),k.linear!==_&&k.set(()=>({linear:_})),k.flat!==w&&k.set(()=>({flat:w})),f&&!Yi.fun(f)&&!aH(f)&&!Yi.equ(f,z,Um)&&th(z,f),v&&!k.events.handlers&&k.set({events:v(o)});const Z=Rae(n,h);return Yi.equ(Z,k.size,Um)||k.setSize(Z.width,Z.height,Z.updateStyle,Z.top,Z.left),O&&k.viewport.dpr!==nH(O)&&k.setDpr(O),k.frameloop!==P&&k.setFrameloop(P),k.onPointerMissed||k.set({onPointerMissed:U}),L&&!Yi.equ(L,k.performance,Um)&&k.set(oe=>({performance:{...oe.performance,...L}})),s=S,l=!0,this},render(c){return l||this.configure(),q0.updateContainer(re.jsx(Lae,{store:o,children:c,onCreated:s,rootElement:n}),a,null,()=>{}),o},unmount(){lH(n)}}}function Lae({store:n,children:e,onCreated:t,rootElement:r}){return Yy(()=>{const i=n.getState();i.set(o=>({internal:{...o.internal,active:!0}})),t&&t(i),n.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),re.jsx(fI.Provider,{value:n,children:e})}function lH(n,e){const t=wg.get(n),r=t==null?void 0:t.fiber;if(r){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),q0.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var o,a,s,l;i.events.disconnect==null||i.events.disconnect(),(o=i.gl)==null||(a=o.renderLists)==null||a.dispose==null||a.dispose(),(s=i.gl)==null||s.forceContextLoss==null||s.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),_ae(i),wg.delete(n)}catch{}},500)})}}function Oae(n,e,t){return re.jsx(Dae,{children:n,container:e,state:t},e.uuid)}function Dae({state:n={},children:e,container:t}){const{events:r,size:i,...o}=n,a=dI(),[s]=Me.useState(()=>new sI),[l]=Me.useState(()=>new zt),u=Me.useCallback((f,h)=>{const p={...f};Object.keys(f).forEach(S=>{(Aae.includes(S)||f[S]!==h[S]&&h[S])&&delete p[S]});let v;if(h&&i){const S=h.camera;v=f.viewport.getCurrentViewport(S,new Pe,i),S!==f.camera&&iH(S,i)}return{...p,scene:t,raycaster:s,pointer:l,mouse:l,previousRoot:a,events:{...f.events,...h==null?void 0:h.events,...r},size:{...f.size,...i},viewport:{...f.viewport,...v},...o}},[n]),[c]=Me.useState(()=>{const f=a.getState();return $7((p,v)=>({...f,scene:t,raycaster:s,pointer:l,mouse:l,previousRoot:a,events:{...f.events,...r},size:{...f.size,...i},...o,set:p,get:v,setEvents:S=>p(y=>({...y,events:{...y.events,...S}}))}))});return Me.useEffect(()=>{const f=a.subscribe(h=>c.setState(p=>u(h,p)));return()=>{f()}},[u]),Me.useEffect(()=>{c.setState(f=>u(a.getState(),f))},[u]),Me.useEffect(()=>()=>{c.destroy()},[]),re.jsx(re.Fragment,{children:q0.createPortal(re.jsx(fI.Provider,{value:c,children:e}),c,null)})}q0.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:Me.version});const z2={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function kae(n){const{handlePointer:e}=bae(n);return{priority:1,enabled:!0,compute(t,r,i){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(z2).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var t;const{events:r,internal:i}=n.getState();(t=i.lastEvent)!=null&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var r;const{set:i,events:o}=n.getState();o.disconnect==null||o.disconnect(),i(a=>({events:{...a.events,connected:t}})),Object.entries((r=o.handlers)!=null?r:[]).forEach(([a,s])=>{const[l,u]=z2[a];t.addEventListener(l,s,{passive:u})})},disconnect:()=>{const{set:t,events:r}=n.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([o,a])=>{if(r&&r.connected instanceof HTMLElement){const[s]=z2[o];r.connected.removeEventListener(s,a)}}),t(o=>({events:{...o.events,connected:void 0}}))}}}}var H2,UO;function Fae(){if(UO)return H2;UO=1;function n(e,t,r){var i,o,a,s,l;t==null&&(t=100);function u(){var f=Date.now()-s;f<t&&f>=0?i=setTimeout(u,t-f):(i=null,r||(l=e.apply(a,o),a=o=null))}var c=function(){a=this,o=arguments,s=Date.now();var f=r&&!i;return i||(i=setTimeout(u,t)),f&&(l=e.apply(a,o),a=o=null),l};return c.clear=function(){i&&(clearTimeout(i),i=null)},c.flush=function(){i&&(l=e.apply(a,o),a=o=null,clearTimeout(i),i=null)},c}return n.debounce=n,H2=n,H2}var Uae=Fae();const BO=gi(Uae);var Bae=Object.defineProperty,zae=Object.defineProperties,Hae=Object.getOwnPropertyDescriptors,zO=Object.getOwnPropertySymbols,Vae=Object.prototype.hasOwnProperty,Gae=Object.prototype.propertyIsEnumerable,HO=(n,e,t)=>e in n?Bae(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,VO=(n,e)=>{for(var t in e||(e={}))Vae.call(e,t)&&HO(n,t,e[t]);if(zO)for(var t of zO(e))Gae.call(e,t)&&HO(n,t,e[t]);return n},qae=(n,e)=>zae(n,Hae(e)),GO,qO;typeof window<"u"&&((GO=window.document)!=null&&GO.createElement||((qO=window.navigator)==null?void 0:qO.product)==="ReactNative")?Me.useLayoutEffect:Me.useEffect;function uH(n,e,t){if(!n)return;if(t(n)===!0)return n;let r=n.child;for(;r;){const i=uH(r,e,t);if(i)return i;r=r.sibling}}function cH(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const WO=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=WO;return}return WO.apply(this,arguments)};const hI=cH(Me.createContext(null));class fH extends Me.Component{render(){return Me.createElement(hI.Provider,{value:this._reactInternals},this.props.children)}}function Wae(){const n=Me.useContext(hI);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=Me.useId();return Me.useMemo(()=>{for(const r of[n,n==null?void 0:n.alternate]){if(!r)continue;const i=uH(r,!1,o=>{let a=o.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(i)return i}},[n,e])}function jae(){const n=Wae(),[e]=Me.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const i=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;i&&i!==hI&&!e.has(i)&&e.set(i,Me.useContext(cH(i)))}t=t.return}return e}function $ae(){const n=jae();return Me.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>r=>Me.createElement(e,null,Me.createElement(t.Provider,qae(VO({},r),{value:n.get(t)}))),e=>Me.createElement(fH,VO({},e))),[n])}function Xae({debounce:n,scroll:e,polyfill:t,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const i=t||typeof window<"u"&&window.ResizeObserver,[o,a]=Me.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0});if(!i)return o.width=1280,o.height=800,[()=>{},o,()=>{}];const s=Me.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o,orientationHandler:null}),l=n?typeof n=="number"?n:n.scroll:null,u=n?typeof n=="number"?n:n.resize:null,c=Me.useRef(!1);Me.useEffect(()=>(c.current=!0,()=>void(c.current=!1)));const[f,h,p]=Me.useMemo(()=>{const _=()=>{if(!s.current.element)return;const{left:w,top:A,width:E,height:P,bottom:O,right:L,x:D,y:F}=s.current.element.getBoundingClientRect(),U={left:w,top:A,width:E,height:P,bottom:O,right:L,x:D,y:F};s.current.element instanceof HTMLElement&&r&&(U.height=s.current.element.offsetHeight,U.width=s.current.element.offsetWidth),Object.freeze(U),c.current&&!Zae(s.current.lastBounds,U)&&a(s.current.lastBounds=U)};return[_,u?BO(_,u):_,l?BO(_,l):_]},[a,r,l,u]);function v(){s.current.scrollContainers&&(s.current.scrollContainers.forEach(_=>_.removeEventListener("scroll",p,!0)),s.current.scrollContainers=null),s.current.resizeObserver&&(s.current.resizeObserver.disconnect(),s.current.resizeObserver=null),s.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",s.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",s.current.orientationHandler))}function S(){var _;s.current.element&&(s.current.resizeObserver=new i(h),(_=s.current.resizeObserver)==null||_.observe(s.current.element),e&&s.current.scrollContainers&&s.current.scrollContainers.forEach(w=>w.addEventListener("scroll",p,{capture:!0,passive:!0})),s.current.orientationHandler=()=>{p()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",s.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",s.current.orientationHandler))}const y=_=>{!_||_===s.current.element||(v(),s.current.element=_,s.current.scrollContainers=dH(_),S())};return Kae(p,!!e),Yae(h),Me.useEffect(()=>{v(),S()},[e,p,h]),Me.useEffect(()=>v,[]),[y,o,f]}function Yae(n){Me.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function Kae(n,e){Me.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function dH(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(o=>o==="auto"||o==="scroll")&&e.push(n),[...e,...dH(n.parentElement)]}const Jae=["x","y","top","bottom","left","right","width","height"],Zae=(n,e)=>Jae.every(t=>n[t]===e[t]),Qae=Me.forwardRef(function({children:e,fallback:t,resize:r,style:i,gl:o,events:a=kae,eventSource:s,eventPrefix:l,shadows:u,linear:c,flat:f,legacy:h,orthographic:p,frameloop:v,dpr:S,performance:y,raycaster:_,camera:w,scene:A,onPointerMissed:E,onCreated:P,...O},L){Me.useMemo(()=>cI(tae),[]);const D=$ae(),[F,U]=Xae({scroll:!0,debounce:{scroll:50,resize:0},...r}),k=Me.useRef(null),z=Me.useRef(null);Me.useImperativeHandle(L,()=>k.current);const W=Q7(E),[j,se]=Me.useState(!1),[Y,Q]=Me.useState(!1);if(j)throw j;if(Y)throw Y;const X=Me.useRef(null);Yy(()=>{const oe=k.current;U.width>0&&U.height>0&&oe&&(X.current||(X.current=Nae(oe)),X.current.configure({gl:o,events:a,shadows:u,linear:c,flat:f,legacy:h,orthographic:p,frameloop:v,dpr:S,performance:y,raycaster:_,camera:w,scene:A,size:U,onPointerMissed:(...ee)=>W.current==null?void 0:W.current(...ee),onCreated:ee=>{ee.events.connect==null||ee.events.connect(s?gae(s)?s.current:s:z.current),l&&ee.setEvents({compute:(G,ne)=>{const te=G[l+"X"],de=G[l+"Y"];ne.pointer.set(te/ne.size.width*2-1,-(de/ne.size.height)*2+1),ne.raycaster.setFromCamera(ne.pointer,ne.camera)}}),P==null||P(ee)}}),X.current.render(re.jsx(D,{children:re.jsx(eH,{set:Q,children:re.jsx(Me.Suspense,{fallback:re.jsx(vae,{set:se}),children:e})})})))}),Me.useEffect(()=>{const oe=k.current;if(oe)return()=>lH(oe)},[]);const Z=s?"none":"auto";return re.jsx("div",{ref:z,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:Z,...i},...O,children:re.jsx("div",{ref:F,style:{width:"100%",height:"100%"},children:re.jsx("canvas",{ref:k,style:{display:"block"},children:t})})})}),ese=Me.forwardRef(function(e,t){return re.jsx(fH,{children:re.jsx(Qae,{...e,ref:t})})});function W0(){return W0=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},W0.apply(null,arguments)}const hH=parseInt(Wg.replace(/\D+/g,""));var Uu=Uint8Array,ah=Uint16Array,LC=Uint32Array,pH=new Uu([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),mH=new Uu([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),tse=new Uu([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),gH=function(n,e){for(var t=new ah(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new LC(t[30]),r=1;r<30;++r)for(var o=t[r];o<t[r+1];++o)i[o]=o-t[r]<<5|r;return[t,i]},vH=gH(pH,2),yH=vH[0],nse=vH[1];yH[28]=258,nse[258]=28;var rse=gH(mH,0),ise=rse[0],OC=new ah(32768);for(var so=0;so<32768;++so){var Yd=(so&43690)>>>1|(so&21845)<<1;Yd=(Yd&52428)>>>2|(Yd&13107)<<2,Yd=(Yd&61680)>>>4|(Yd&3855)<<4,OC[so]=((Yd&65280)>>>8|(Yd&255)<<8)>>>1}var p0=(function(n,e,t){for(var r=n.length,i=0,o=new ah(e);i<r;++i)++o[n[i]-1];var a=new ah(e);for(i=0;i<e;++i)a[i]=a[i-1]+o[i-1]<<1;var s;if(t){s=new ah(1<<e);var l=15-e;for(i=0;i<r;++i)if(n[i])for(var u=i<<4|n[i],c=e-n[i],f=a[n[i]-1]++<<c,h=f|(1<<c)-1;f<=h;++f)s[OC[f]>>>l]=u}else for(s=new ah(r),i=0;i<r;++i)n[i]&&(s[i]=OC[a[n[i]-1]++]>>>15-n[i]);return s}),Ky=new Uu(288);for(var so=0;so<144;++so)Ky[so]=8;for(var so=144;so<256;++so)Ky[so]=9;for(var so=256;so<280;++so)Ky[so]=7;for(var so=280;so<288;++so)Ky[so]=8;var xH=new Uu(32);for(var so=0;so<32;++so)xH[so]=5;var ose=p0(Ky,9,1),ase=p0(xH,5,1),V2=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},_c=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},G2=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},sse=function(n){return(n/8|0)+(n&7&&1)},lse=function(n,e,t){(t==null||t>n.length)&&(t=n.length);var r=new(n instanceof ah?ah:n instanceof LC?LC:Uu)(t-e);return r.set(n.subarray(e,t)),r},use=function(n,e,t){var r=n.length;if(!r||t&&!t.l&&r<5)return e||new Uu(0);var i=!e||t,o=!t||t.i;t||(t={}),e||(e=new Uu(r*3));var a=function(me){var be=e.length;if(me>be){var Ie=new Uu(Math.max(be*2,me));Ie.set(e),e=Ie}},s=t.f||0,l=t.p||0,u=t.b||0,c=t.l,f=t.d,h=t.m,p=t.n,v=r*8;do{if(!c){t.f=s=_c(n,l,1);var S=_c(n,l+1,3);if(l+=3,S)if(S==1)c=ose,f=ase,h=9,p=5;else if(S==2){var A=_c(n,l,31)+257,E=_c(n,l+10,15)+4,P=A+_c(n,l+5,31)+1;l+=14;for(var O=new Uu(P),L=new Uu(19),D=0;D<E;++D)L[tse[D]]=_c(n,l+D*3,7);l+=E*3;for(var F=V2(L),U=(1<<F)-1,k=p0(L,F,1),D=0;D<P;){var z=k[_c(n,l,U)];l+=z&15;var y=z>>>4;if(y<16)O[D++]=y;else{var W=0,j=0;for(y==16?(j=3+_c(n,l,3),l+=2,W=O[D-1]):y==17?(j=3+_c(n,l,7),l+=3):y==18&&(j=11+_c(n,l,127),l+=7);j--;)O[D++]=W}}var se=O.subarray(0,A),Y=O.subarray(A);h=V2(se),p=V2(Y),c=p0(se,h,1),f=p0(Y,p,1)}else throw"invalid block type";else{var y=sse(l)+4,_=n[y-4]|n[y-3]<<8,w=y+_;if(w>r){if(o)throw"unexpected EOF";break}i&&a(u+_),e.set(n.subarray(y,w),u),t.b=u+=_,t.p=l=w*8;continue}if(l>v){if(o)throw"unexpected EOF";break}}i&&a(u+131072);for(var Q=(1<<h)-1,X=(1<<p)-1,Z=l;;Z=l){var W=c[G2(n,l)&Q],oe=W>>>4;if(l+=W&15,l>v){if(o)throw"unexpected EOF";break}if(!W)throw"invalid length/literal";if(oe<256)e[u++]=oe;else if(oe==256){Z=l,c=null;break}else{var ee=oe-254;if(oe>264){var D=oe-257,G=pH[D];ee=_c(n,l,(1<<G)-1)+yH[D],l+=G}var ne=f[G2(n,l)&X],te=ne>>>4;if(!ne)throw"invalid distance";l+=ne&15;var Y=ise[te];if(te>3){var G=mH[te];Y+=G2(n,l)&(1<<G)-1,l+=G}if(l>v){if(o)throw"unexpected EOF";break}i&&a(u+131072);for(var de=u+ee;u<de;u+=4)e[u]=e[u-Y],e[u+1]=e[u+1-Y],e[u+2]=e[u+2-Y],e[u+3]=e[u+3-Y];u=de}}t.l=c,t.p=Z,t.b=u,c&&(s=1,t.m=h,t.d=f,t.n=p)}while(!s);return u==e.length?e:lse(e,0,u)},cse=new Uu(0),fse=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Nx(n,e){return use((fse(n),n.subarray(2,-4)),e)}var dse=typeof TextDecoder<"u"&&new TextDecoder,hse=0;try{dse.decode(cse,{stream:!0}),hse=1}catch{}const pse=n=>n&&n.isCubeTexture;class mse extends Co{constructor(e,t){var r,i;const o=pse(e),s=((i=o?(r=e.image[0])==null?void 0:r.width:e.image.width)!=null?i:1024)/4,l=Math.floor(Math.log2(s)),u=Math.pow(2,l),c=3*Math.max(u,112),f=4*u,h=[o?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/c}`,`#define CUBEUV_TEXEL_HEIGHT ${1/f}`,`#define CUBEUV_MAX_MIP ${l}.0`],p=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,v=h.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${hH>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,S={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},y=new qy(1,16),_=new ol({uniforms:S,fragmentShader:v,vertexShader:p,side:Cc});super(y,_)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}class gse extends eI{constructor(e){super(e),this.type=La}parse(e){const a=function(D,F){switch(D){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(F||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(F||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(F||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(F||""))}},f=function(D,F,U){F=F||1024;let z=D.pos,W=-1,j=0,se="",Y=String.fromCharCode.apply(null,new Uint16Array(D.subarray(z,z+128)));for(;0>(W=Y.indexOf(`
`))&&j<F&&z<D.byteLength;)se+=Y,j+=Y.length,z+=128,Y+=String.fromCharCode.apply(null,new Uint16Array(D.subarray(z,z+128)));return-1<W?(D.pos+=j+W+1,se+Y.slice(0,W)):!1},h=function(D){const F=/^#\?(\S+)/,U=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,k=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,z=/^\s*FORMAT=(\S+)\s*$/,W=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,j={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let se,Y;for((D.pos>=D.byteLength||!(se=f(D)))&&a(1,"no header found"),(Y=se.match(F))||a(3,"bad initial token"),j.valid|=1,j.programtype=Y[1],j.string+=se+`
`;se=f(D),se!==!1;){if(j.string+=se+`
`,se.charAt(0)==="#"){j.comments+=se+`
`;continue}if((Y=se.match(U))&&(j.gamma=parseFloat(Y[1])),(Y=se.match(k))&&(j.exposure=parseFloat(Y[1])),(Y=se.match(z))&&(j.valid|=2,j.format=Y[1]),(Y=se.match(W))&&(j.valid|=4,j.height=parseInt(Y[1],10),j.width=parseInt(Y[2],10)),j.valid&2&&j.valid&4)break}return j.valid&2||a(3,"missing format specifier"),j.valid&4||a(3,"missing image size specifier"),j},p=function(D,F,U){const k=F;if(k<8||k>32767||D[0]!==2||D[1]!==2||D[2]&128)return new Uint8Array(D);k!==(D[2]<<8|D[3])&&a(3,"wrong scanline width");const z=new Uint8Array(4*F*U);z.length||a(4,"unable to allocate buffer space");let W=0,j=0;const se=4*k,Y=new Uint8Array(4),Q=new Uint8Array(se);let X=U;for(;X>0&&j<D.byteLength;){j+4>D.byteLength&&a(1),Y[0]=D[j++],Y[1]=D[j++],Y[2]=D[j++],Y[3]=D[j++],(Y[0]!=2||Y[1]!=2||(Y[2]<<8|Y[3])!=k)&&a(3,"bad rgbe scanline format");let Z=0,oe;for(;Z<se&&j<D.byteLength;){oe=D[j++];const G=oe>128;if(G&&(oe-=128),(oe===0||Z+oe>se)&&a(3,"bad scanline data"),G){const ne=D[j++];for(let te=0;te<oe;te++)Q[Z++]=ne}else Q.set(D.subarray(j,j+oe),Z),Z+=oe,j+=oe}const ee=k;for(let G=0;G<ee;G++){let ne=0;z[W]=Q[G+ne],ne+=k,z[W+1]=Q[G+ne],ne+=k,z[W+2]=Q[G+ne],ne+=k,z[W+3]=Q[G+ne],W+=4}X--}return z},v=function(D,F,U,k){const z=D[F+3],W=Math.pow(2,z-128)/255;U[k+0]=D[F+0]*W,U[k+1]=D[F+1]*W,U[k+2]=D[F+2]*W,U[k+3]=1},S=function(D,F,U,k){const z=D[F+3],W=Math.pow(2,z-128)/255;U[k+0]=mp.toHalfFloat(Math.min(D[F+0]*W,65504)),U[k+1]=mp.toHalfFloat(Math.min(D[F+1]*W,65504)),U[k+2]=mp.toHalfFloat(Math.min(D[F+2]*W,65504)),U[k+3]=mp.toHalfFloat(1)},y=new Uint8Array(e);y.pos=0;const _=h(y),w=_.width,A=_.height,E=p(y.subarray(y.pos),w,A);let P,O,L;switch(this.type){case go:L=E.length/4;const D=new Float32Array(L*4);for(let U=0;U<L;U++)v(E,U*4,D,U*4);P=D,O=go;break;case La:L=E.length/4;const F=new Uint16Array(L*4);for(let U=0;U<L;U++)S(E,U*4,F,U*4);P=F,O=La;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:w,height:A,data:P,header:_.string,gamma:_.gamma,exposure:_.exposure,type:O}}setDataType(e){return this.type=e,this}load(e,t,r,i){function o(a,s){switch(a.type){case go:case La:"colorSpace"in a?a.colorSpace="srgb-linear":a.encoding=3e3,a.minFilter=mi,a.magFilter=mi,a.generateMipmaps=!1,a.flipY=!0;break}t&&t(a,s)}return super.load(e,o,r,i)}}const Lv=hH>=152;class vse extends eI{constructor(e){super(e),this.type=La}parse(e){const F=Math.pow(2.7182818,2.2);function U(ue,we){for(var ze=0,ct=0;ct<65536;++ct)(ct==0||ue[ct>>3]&1<<(ct&7))&&(we[ze++]=ct);for(var xt=ze-1;ze<65536;)we[ze++]=0;return xt}function k(ue){for(var we=0;we<16384;we++)ue[we]={},ue[we].len=0,ue[we].lit=0,ue[we].p=null}const z={l:0,c:0,lc:0};function W(ue,we,ze,ct,xt){for(;ze<ue;)we=we<<8|Wt(ct,xt),ze+=8;ze-=ue,z.l=we>>ze&(1<<ue)-1,z.c=we,z.lc=ze}const j=new Array(59);function se(ue){for(var we=0;we<=58;++we)j[we]=0;for(var we=0;we<65537;++we)j[ue[we]]+=1;for(var ze=0,we=58;we>0;--we){var ct=ze+j[we]>>1;j[we]=ze,ze=ct}for(var we=0;we<65537;++we){var xt=ue[we];xt>0&&(ue[we]=xt|j[xt]++<<6)}}function Y(ue,we,ze,ct,xt,ae,Ce){for(var De=ze,Ue=0,Re=0;xt<=ae;xt++){if(De.value-ze.value>ct)return!1;W(6,Ue,Re,ue,De);var Ne=z.l;if(Ue=z.c,Re=z.lc,Ce[xt]=Ne,Ne==63){if(De.value-ze.value>ct)throw"Something wrong with hufUnpackEncTable";W(8,Ue,Re,ue,De);var Be=z.l+6;if(Ue=z.c,Re=z.lc,xt+Be>ae+1)throw"Something wrong with hufUnpackEncTable";for(;Be--;)Ce[xt++]=0;xt--}else if(Ne>=59){var Be=Ne-59+2;if(xt+Be>ae+1)throw"Something wrong with hufUnpackEncTable";for(;Be--;)Ce[xt++]=0;xt--}}se(Ce)}function Q(ue){return ue&63}function X(ue){return ue>>6}function Z(ue,we,ze,ct){for(;we<=ze;we++){var xt=X(ue[we]),ae=Q(ue[we]);if(xt>>ae)throw"Invalid table entry";if(ae>14){var Ce=ct[xt>>ae-14];if(Ce.len)throw"Invalid table entry";if(Ce.lit++,Ce.p){var De=Ce.p;Ce.p=new Array(Ce.lit);for(var Ue=0;Ue<Ce.lit-1;++Ue)Ce.p[Ue]=De[Ue]}else Ce.p=new Array(1);Ce.p[Ce.lit-1]=we}else if(ae)for(var Re=0,Ue=1<<14-ae;Ue>0;Ue--){var Ce=ct[(xt<<14-ae)+Re];if(Ce.len||Ce.p)throw"Invalid table entry";Ce.len=ae,Ce.lit=we,Re++}}return!0}const oe={c:0,lc:0};function ee(ue,we,ze,ct){ue=ue<<8|Wt(ze,ct),we+=8,oe.c=ue,oe.lc=we}const G={c:0,lc:0};function ne(ue,we,ze,ct,xt,ae,Ce,De,Ue,Re){if(ue==we){ct<8&&(ee(ze,ct,xt,Ce),ze=oe.c,ct=oe.lc),ct-=8;var Ne=ze>>ct,Ne=new Uint8Array([Ne])[0];if(Ue.value+Ne>Re)return!1;for(var Be=De[Ue.value-1];Ne-- >0;)De[Ue.value++]=Be}else if(Ue.value<Re)De[Ue.value++]=ue;else return!1;G.c=ze,G.lc=ct}function te(ue){return ue&65535}function de(ue){var we=te(ue);return we>32767?we-65536:we}const me={a:0,b:0};function be(ue,we){var ze=de(ue),ct=de(we),xt=ct,ae=ze+(xt&1)+(xt>>1),Ce=ae,De=ae-xt;me.a=Ce,me.b=De}function Ie(ue,we){var ze=te(ue),ct=te(we),xt=ze-(ct>>1)&65535,ae=ct+xt-32768&65535;me.a=ae,me.b=xt}function Ee(ue,we,ze,ct,xt,ae,Ce){for(var De=Ce<16384,Ue=ze>xt?xt:ze,Re=1,Ne;Re<=Ue;)Re<<=1;for(Re>>=1,Ne=Re,Re>>=1;Re>=1;){for(var Be=0,Et=Be+ae*(xt-Ne),ut=ae*Re,St=ae*Ne,Bt=ct*Re,Ot=ct*Ne,Qt,cn,Kt,_n;Be<=Et;Be+=St){for(var Vt=Be,kt=Be+ct*(ze-Ne);Vt<=kt;Vt+=Ot){var Mn=Vt+Bt,Sn=Vt+ut,gr=Sn+Bt;De?(be(ue[Vt+we],ue[Sn+we]),Qt=me.a,Kt=me.b,be(ue[Mn+we],ue[gr+we]),cn=me.a,_n=me.b,be(Qt,cn),ue[Vt+we]=me.a,ue[Mn+we]=me.b,be(Kt,_n),ue[Sn+we]=me.a,ue[gr+we]=me.b):(Ie(ue[Vt+we],ue[Sn+we]),Qt=me.a,Kt=me.b,Ie(ue[Mn+we],ue[gr+we]),cn=me.a,_n=me.b,Ie(Qt,cn),ue[Vt+we]=me.a,ue[Mn+we]=me.b,Ie(Kt,_n),ue[Sn+we]=me.a,ue[gr+we]=me.b)}if(ze&Re){var Sn=Vt+ut;De?be(ue[Vt+we],ue[Sn+we]):Ie(ue[Vt+we],ue[Sn+we]),Qt=me.a,ue[Sn+we]=me.b,ue[Vt+we]=Qt}}if(xt&Re)for(var Vt=Be,kt=Be+ct*(ze-Ne);Vt<=kt;Vt+=Ot){var Mn=Vt+Bt;De?be(ue[Vt+we],ue[Mn+we]):Ie(ue[Vt+we],ue[Mn+we]),Qt=me.a,ue[Mn+we]=me.b,ue[Vt+we]=Qt}Ne=Re,Re>>=1}return Be}function Xe(ue,we,ze,ct,xt,ae,Ce,De,Ue,Re){for(var Ne=0,Be=0,Et=De,ut=Math.trunc(xt.value+(ae+7)/8);xt.value<ut;)for(ee(Ne,Be,ze,xt),Ne=oe.c,Be=oe.lc;Be>=14;){var St=Ne>>Be-14&16383,Bt=we[St];if(Bt.len)Be-=Bt.len,ne(Bt.lit,Ce,Ne,Be,ze,ct,xt,Ue,Re,Et),Ne=G.c,Be=G.lc;else{if(!Bt.p)throw"hufDecode issues";var Ot;for(Ot=0;Ot<Bt.lit;Ot++){for(var Qt=Q(ue[Bt.p[Ot]]);Be<Qt&&xt.value<ut;)ee(Ne,Be,ze,xt),Ne=oe.c,Be=oe.lc;if(Be>=Qt&&X(ue[Bt.p[Ot]])==(Ne>>Be-Qt&(1<<Qt)-1)){Be-=Qt,ne(Bt.p[Ot],Ce,Ne,Be,ze,ct,xt,Ue,Re,Et),Ne=G.c,Be=G.lc;break}}if(Ot==Bt.lit)throw"hufDecode issues"}}var cn=8-ae&7;for(Ne>>=cn,Be-=cn;Be>0;){var Bt=we[Ne<<14-Be&16383];if(Bt.len)Be-=Bt.len,ne(Bt.lit,Ce,Ne,Be,ze,ct,xt,Ue,Re,Et),Ne=G.c,Be=G.lc;else throw"hufDecode issues"}return!0}function tt(ue,we,ze,ct,xt,ae){var Ce={value:0},De=ze.value,Ue=un(we,ze),Re=un(we,ze);ze.value+=4;var Ne=un(we,ze);if(ze.value+=4,Ue<0||Ue>=65537||Re<0||Re>=65537)throw"Something wrong with HUF_ENCSIZE";var Be=new Array(65537),Et=new Array(16384);k(Et);var ut=ct-(ze.value-De);if(Y(ue,we,ze,ut,Ue,Re,Be),Ne>8*(ct-(ze.value-De)))throw"Something wrong with hufUncompress";Z(Be,Ue,Re,Et),Xe(Be,Et,ue,we,ze,Ne,Re,ae,xt,Ce)}function Te(ue,we,ze){for(var ct=0;ct<ze;++ct)we[ct]=ue[we[ct]]}function Je(ue){for(var we=1;we<ue.length;we++){var ze=ue[we-1]+ue[we]-128;ue[we]=ze}}function Se(ue,we){for(var ze=0,ct=Math.floor((ue.length+1)/2),xt=0,ae=ue.length-1;!(xt>ae||(we[xt++]=ue[ze++],xt>ae));)we[xt++]=ue[ct++]}function Ge(ue){for(var we=ue.byteLength,ze=new Array,ct=0,xt=new DataView(ue);we>0;){var ae=xt.getInt8(ct++);if(ae<0){var Ce=-ae;we-=Ce+1;for(var De=0;De<Ce;De++)ze.push(xt.getUint8(ct++))}else{var Ce=ae;we-=2;for(var Ue=xt.getUint8(ct++),De=0;De<Ce+1;De++)ze.push(Ue)}}return ze}function ye(ue,we,ze,ct,xt,ae){var Mn=new DataView(ae.buffer),Ce=ze[ue.idx[0]].width,De=ze[ue.idx[0]].height,Ue=3,Re=Math.floor(Ce/8),Ne=Math.ceil(Ce/8),Be=Math.ceil(De/8),Et=Ce-(Ne-1)*8,ut=De-(Be-1)*8,St={value:0},Bt=new Array(Ue),Ot=new Array(Ue),Qt=new Array(Ue),cn=new Array(Ue),Kt=new Array(Ue);for(let Fn=0;Fn<Ue;++Fn)Kt[Fn]=we[ue.idx[Fn]],Bt[Fn]=Fn<1?0:Bt[Fn-1]+Ne*Be,Ot[Fn]=new Float32Array(64),Qt[Fn]=new Uint16Array(64),cn[Fn]=new Uint16Array(Ne*64);for(let Fn=0;Fn<Be;++Fn){var _n=8;Fn==Be-1&&(_n=ut);var Vt=8;for(let Pn=0;Pn<Ne;++Pn){Pn==Ne-1&&(Vt=Et);for(let jn=0;jn<Ue;++jn)Qt[jn].fill(0),Qt[jn][0]=xt[Bt[jn]++],Ct(St,ct,Qt[jn]),ft(Qt[jn],Ot[jn]),mt(Ot[jn]);lt(Ot);for(let jn=0;jn<Ue;++jn)ve(Ot[jn],cn[jn],Pn*64)}let kn=0;for(let Pn=0;Pn<Ue;++Pn){const jn=ze[ue.idx[Pn]].type;for(let er=8*Fn;er<8*Fn+_n;++er){kn=Kt[Pn][er];for(let Si=0;Si<Re;++Si){const Pr=Si*64+(er&7)*8;Mn.setUint16(kn+0*jn,cn[Pn][Pr+0],!0),Mn.setUint16(kn+2*jn,cn[Pn][Pr+1],!0),Mn.setUint16(kn+4*jn,cn[Pn][Pr+2],!0),Mn.setUint16(kn+6*jn,cn[Pn][Pr+3],!0),Mn.setUint16(kn+8*jn,cn[Pn][Pr+4],!0),Mn.setUint16(kn+10*jn,cn[Pn][Pr+5],!0),Mn.setUint16(kn+12*jn,cn[Pn][Pr+6],!0),Mn.setUint16(kn+14*jn,cn[Pn][Pr+7],!0),kn+=16*jn}}if(Re!=Ne)for(let er=8*Fn;er<8*Fn+_n;++er){const Si=Kt[Pn][er]+8*Re*2*jn,Pr=Re*64+(er&7)*8;for(let Io=0;Io<Vt;++Io)Mn.setUint16(Si+Io*2*jn,cn[Pn][Pr+Io],!0)}}}for(var kt=new Uint16Array(Ce),Mn=new DataView(ae.buffer),Sn=0;Sn<Ue;++Sn){ze[ue.idx[Sn]].decoded=!0;var gr=ze[ue.idx[Sn]].type;if(ze[Sn].type==2)for(var vr=0;vr<De;++vr){const Fn=Kt[Sn][vr];for(var fr=0;fr<Ce;++fr)kt[fr]=Mn.getUint16(Fn+fr*2*gr,!0);for(var fr=0;fr<Ce;++fr)Mn.setFloat32(Fn+fr*2*gr,ot(kt[fr]),!0)}}}function Ct(ue,we,ze){for(var ct,xt=1;xt<64;)ct=we[ue.value],ct==65280?xt=64:ct>>8==255?xt+=ct&255:(ze[xt]=ct,xt++),ue.value++}function ft(ue,we){we[0]=ot(ue[0]),we[1]=ot(ue[1]),we[2]=ot(ue[5]),we[3]=ot(ue[6]),we[4]=ot(ue[14]),we[5]=ot(ue[15]),we[6]=ot(ue[27]),we[7]=ot(ue[28]),we[8]=ot(ue[2]),we[9]=ot(ue[4]),we[10]=ot(ue[7]),we[11]=ot(ue[13]),we[12]=ot(ue[16]),we[13]=ot(ue[26]),we[14]=ot(ue[29]),we[15]=ot(ue[42]),we[16]=ot(ue[3]),we[17]=ot(ue[8]),we[18]=ot(ue[12]),we[19]=ot(ue[17]),we[20]=ot(ue[25]),we[21]=ot(ue[30]),we[22]=ot(ue[41]),we[23]=ot(ue[43]),we[24]=ot(ue[9]),we[25]=ot(ue[11]),we[26]=ot(ue[18]),we[27]=ot(ue[24]),we[28]=ot(ue[31]),we[29]=ot(ue[40]),we[30]=ot(ue[44]),we[31]=ot(ue[53]),we[32]=ot(ue[10]),we[33]=ot(ue[19]),we[34]=ot(ue[23]),we[35]=ot(ue[32]),we[36]=ot(ue[39]),we[37]=ot(ue[45]),we[38]=ot(ue[52]),we[39]=ot(ue[54]),we[40]=ot(ue[20]),we[41]=ot(ue[22]),we[42]=ot(ue[33]),we[43]=ot(ue[38]),we[44]=ot(ue[46]),we[45]=ot(ue[51]),we[46]=ot(ue[55]),we[47]=ot(ue[60]),we[48]=ot(ue[21]),we[49]=ot(ue[34]),we[50]=ot(ue[37]),we[51]=ot(ue[47]),we[52]=ot(ue[50]),we[53]=ot(ue[56]),we[54]=ot(ue[59]),we[55]=ot(ue[61]),we[56]=ot(ue[35]),we[57]=ot(ue[36]),we[58]=ot(ue[48]),we[59]=ot(ue[49]),we[60]=ot(ue[57]),we[61]=ot(ue[58]),we[62]=ot(ue[62]),we[63]=ot(ue[63])}function mt(ue){const we=.5*Math.cos(.7853975),ze=.5*Math.cos(3.14159/16),ct=.5*Math.cos(3.14159/8),xt=.5*Math.cos(3*3.14159/16),ae=.5*Math.cos(5*3.14159/16),Ce=.5*Math.cos(3*3.14159/8),De=.5*Math.cos(7*3.14159/16);for(var Ue=new Array(4),Re=new Array(4),Ne=new Array(4),Be=new Array(4),Et=0;Et<8;++Et){var ut=Et*8;Ue[0]=ct*ue[ut+2],Ue[1]=Ce*ue[ut+2],Ue[2]=ct*ue[ut+6],Ue[3]=Ce*ue[ut+6],Re[0]=ze*ue[ut+1]+xt*ue[ut+3]+ae*ue[ut+5]+De*ue[ut+7],Re[1]=xt*ue[ut+1]-De*ue[ut+3]-ze*ue[ut+5]-ae*ue[ut+7],Re[2]=ae*ue[ut+1]-ze*ue[ut+3]+De*ue[ut+5]+xt*ue[ut+7],Re[3]=De*ue[ut+1]-ae*ue[ut+3]+xt*ue[ut+5]-ze*ue[ut+7],Ne[0]=we*(ue[ut+0]+ue[ut+4]),Ne[3]=we*(ue[ut+0]-ue[ut+4]),Ne[1]=Ue[0]+Ue[3],Ne[2]=Ue[1]-Ue[2],Be[0]=Ne[0]+Ne[1],Be[1]=Ne[3]+Ne[2],Be[2]=Ne[3]-Ne[2],Be[3]=Ne[0]-Ne[1],ue[ut+0]=Be[0]+Re[0],ue[ut+1]=Be[1]+Re[1],ue[ut+2]=Be[2]+Re[2],ue[ut+3]=Be[3]+Re[3],ue[ut+4]=Be[3]-Re[3],ue[ut+5]=Be[2]-Re[2],ue[ut+6]=Be[1]-Re[1],ue[ut+7]=Be[0]-Re[0]}for(var St=0;St<8;++St)Ue[0]=ct*ue[16+St],Ue[1]=Ce*ue[16+St],Ue[2]=ct*ue[48+St],Ue[3]=Ce*ue[48+St],Re[0]=ze*ue[8+St]+xt*ue[24+St]+ae*ue[40+St]+De*ue[56+St],Re[1]=xt*ue[8+St]-De*ue[24+St]-ze*ue[40+St]-ae*ue[56+St],Re[2]=ae*ue[8+St]-ze*ue[24+St]+De*ue[40+St]+xt*ue[56+St],Re[3]=De*ue[8+St]-ae*ue[24+St]+xt*ue[40+St]-ze*ue[56+St],Ne[0]=we*(ue[St]+ue[32+St]),Ne[3]=we*(ue[St]-ue[32+St]),Ne[1]=Ue[0]+Ue[3],Ne[2]=Ue[1]-Ue[2],Be[0]=Ne[0]+Ne[1],Be[1]=Ne[3]+Ne[2],Be[2]=Ne[3]-Ne[2],Be[3]=Ne[0]-Ne[1],ue[0+St]=Be[0]+Re[0],ue[8+St]=Be[1]+Re[1],ue[16+St]=Be[2]+Re[2],ue[24+St]=Be[3]+Re[3],ue[32+St]=Be[3]-Re[3],ue[40+St]=Be[2]-Re[2],ue[48+St]=Be[1]-Re[1],ue[56+St]=Be[0]-Re[0]}function lt(ue){for(var we=0;we<64;++we){var ze=ue[0][we],ct=ue[1][we],xt=ue[2][we];ue[0][we]=ze+1.5747*xt,ue[1][we]=ze-.1873*ct-.4682*xt,ue[2][we]=ze+1.8556*ct}}function ve(ue,we,ze){for(var ct=0;ct<64;++ct)we[ze+ct]=mp.toHalfFloat(le(ue[ct]))}function le(ue){return ue<=1?Math.sign(ue)*Math.pow(Math.abs(ue),2.2):Math.sign(ue)*Math.pow(F,Math.abs(ue)-1)}function He(ue){return new DataView(ue.array.buffer,ue.offset.value,ue.size)}function rt(ue){var we=ue.viewer.buffer.slice(ue.offset.value,ue.offset.value+ue.size),ze=new Uint8Array(Ge(we)),ct=new Uint8Array(ze.length);return Je(ze),Se(ze,ct),new DataView(ct.buffer)}function vt(ue){var we=ue.array.slice(ue.offset.value,ue.offset.value+ue.size),ze=Nx(we),ct=new Uint8Array(ze.length);return Je(ze),Se(ze,ct),new DataView(ct.buffer)}function ht(ue){for(var we=ue.viewer,ze={value:ue.offset.value},ct=new Uint16Array(ue.width*ue.scanlineBlockSize*(ue.channels*ue.type)),xt=new Uint8Array(8192),ae=0,Ce=new Array(ue.channels),De=0;De<ue.channels;De++)Ce[De]={},Ce[De].start=ae,Ce[De].end=Ce[De].start,Ce[De].nx=ue.width,Ce[De].ny=ue.lines,Ce[De].size=ue.type,ae+=Ce[De].nx*Ce[De].ny*Ce[De].size;var Ue=pt(we,ze),Re=pt(we,ze);if(Re>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(Ue<=Re)for(var De=0;De<Re-Ue+1;De++)xt[De+Ue]=mn(we,ze);var Ne=new Uint16Array(65536),Be=U(xt,Ne),Et=un(we,ze);tt(ue.array,we,ze,Et,ct,ae);for(var De=0;De<ue.channels;++De)for(var ut=Ce[De],St=0;St<Ce[De].size;++St)Ee(ct,ut.start+St,ut.nx,ut.size,ut.ny,ut.nx*ut.size,Be);Te(Ne,ct,ae);for(var Bt=0,Ot=new Uint8Array(ct.buffer.byteLength),Qt=0;Qt<ue.lines;Qt++)for(var cn=0;cn<ue.channels;cn++){var ut=Ce[cn],Kt=ut.nx*ut.size,_n=new Uint8Array(ct.buffer,ut.end*2,Kt*2);Ot.set(_n,Bt),Bt+=Kt*2,ut.end+=Kt}return new DataView(Ot.buffer)}function qt(ue){var we=ue.array.slice(ue.offset.value,ue.offset.value+ue.size),ze=Nx(we);const ct=ue.lines*ue.channels*ue.width,xt=ue.type==1?new Uint16Array(ct):new Uint32Array(ct);let ae=0,Ce=0;const De=new Array(4);for(let Ue=0;Ue<ue.lines;Ue++)for(let Re=0;Re<ue.channels;Re++){let Ne=0;switch(ue.type){case 1:De[0]=ae,De[1]=De[0]+ue.width,ae=De[1]+ue.width;for(let Be=0;Be<ue.width;++Be){const Et=ze[De[0]++]<<8|ze[De[1]++];Ne+=Et,xt[Ce]=Ne,Ce++}break;case 2:De[0]=ae,De[1]=De[0]+ue.width,De[2]=De[1]+ue.width,ae=De[2]+ue.width;for(let Be=0;Be<ue.width;++Be){const Et=ze[De[0]++]<<24|ze[De[1]++]<<16|ze[De[2]++]<<8;Ne+=Et,xt[Ce]=Ne,Ce++}break}}return new DataView(xt.buffer)}function Ft(ue){var we=ue.viewer,ze={value:ue.offset.value},ct=new Uint8Array(ue.width*ue.lines*(ue.channels*ue.type*2)),xt={version:fn(we,ze),unknownUncompressedSize:fn(we,ze),unknownCompressedSize:fn(we,ze),acCompressedSize:fn(we,ze),dcCompressedSize:fn(we,ze),rleCompressedSize:fn(we,ze),rleUncompressedSize:fn(we,ze),rleRawSize:fn(we,ze),totalAcUncompressedCount:fn(we,ze),totalDcUncompressedCount:fn(we,ze),acCompression:fn(we,ze)};if(xt.version<2)throw"EXRLoader.parse: "+zr.compression+" version "+xt.version+" is unsupported";for(var ae=new Array,Ce=pt(we,ze)-2;Ce>0;){var De=Rt(we.buffer,ze),Ue=mn(we,ze),Re=Ue>>2&3,Ne=(Ue>>4)-1,Be=new Int8Array([Ne])[0],Et=mn(we,ze);ae.push({name:De,index:Be,type:Et,compression:Re}),Ce-=De.length+3}for(var ut=zr.channels,St=new Array(ue.channels),Bt=0;Bt<ue.channels;++Bt){var Ot=St[Bt]={},Qt=ut[Bt];Ot.name=Qt.name,Ot.compression=0,Ot.decoded=!1,Ot.type=Qt.pixelType,Ot.pLinear=Qt.pLinear,Ot.width=ue.width,Ot.height=ue.lines}for(var cn={idx:new Array(3)},Kt=0;Kt<ue.channels;++Kt)for(var Ot=St[Kt],Bt=0;Bt<ae.length;++Bt){var _n=ae[Bt];Ot.name==_n.name&&(Ot.compression=_n.compression,_n.index>=0&&(cn.idx[_n.index]=Kt),Ot.offset=Kt)}if(xt.acCompressedSize>0)switch(xt.acCompression){case 0:var Mn=new Uint16Array(xt.totalAcUncompressedCount);tt(ue.array,we,ze,xt.acCompressedSize,Mn,xt.totalAcUncompressedCount);break;case 1:var Vt=ue.array.slice(ze.value,ze.value+xt.totalAcUncompressedCount),kt=Nx(Vt),Mn=new Uint16Array(kt.buffer);ze.value+=xt.totalAcUncompressedCount;break}if(xt.dcCompressedSize>0){var Sn={array:ue.array,offset:ze,size:xt.dcCompressedSize},gr=new Uint16Array(vt(Sn).buffer);ze.value+=xt.dcCompressedSize}if(xt.rleRawSize>0){var Vt=ue.array.slice(ze.value,ze.value+xt.rleCompressedSize),kt=Nx(Vt),vr=Ge(kt.buffer);ze.value+=xt.rleCompressedSize}for(var fr=0,Fn=new Array(St.length),Bt=0;Bt<Fn.length;++Bt)Fn[Bt]=new Array;for(var kn=0;kn<ue.lines;++kn)for(var Pn=0;Pn<St.length;++Pn)Fn[Pn].push(fr),fr+=St[Pn].width*ue.type*2;ye(cn,Fn,St,Mn,gr,ct);for(var Bt=0;Bt<St.length;++Bt){var Ot=St[Bt];if(!Ot.decoded)switch(Ot.compression){case 2:for(var jn=0,er=0,kn=0;kn<ue.lines;++kn){for(var Si=Fn[Bt][jn],Pr=0;Pr<Ot.width;++Pr){for(var Io=0;Io<2*Ot.type;++Io)ct[Si++]=vr[er+Io*Ot.width*Ot.height];er++}jn++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(ct.buffer)}function Rt(ue,we){for(var ze=new Uint8Array(ue),ct=0;ze[we.value+ct]!=0;)ct+=1;var xt=new TextDecoder().decode(ze.slice(we.value,we.value+ct));return we.value=we.value+ct+1,xt}function tn(ue,we,ze){var ct=new TextDecoder().decode(new Uint8Array(ue).slice(we.value,we.value+ze));return we.value=we.value+ze,ct}function it(ue,we){var ze=Xt(ue,we),ct=un(ue,we);return[ze,ct]}function Zt(ue,we){var ze=un(ue,we),ct=un(ue,we);return[ze,ct]}function Xt(ue,we){var ze=ue.getInt32(we.value,!0);return we.value=we.value+4,ze}function un(ue,we){var ze=ue.getUint32(we.value,!0);return we.value=we.value+4,ze}function Wt(ue,we){var ze=ue[we.value];return we.value=we.value+1,ze}function mn(ue,we){var ze=ue.getUint8(we.value);return we.value=we.value+1,ze}const fn=function(ue,we){let ze;return"getBigInt64"in DataView.prototype?ze=Number(ue.getBigInt64(we.value,!0)):ze=ue.getUint32(we.value+4,!0)+Number(ue.getUint32(we.value,!0)<<32),we.value+=8,ze};function nn(ue,we){var ze=ue.getFloat32(we.value,!0);return we.value+=4,ze}function Ke(ue,we){return mp.toHalfFloat(nn(ue,we))}function ot(ue){var we=(ue&31744)>>10,ze=ue&1023;return(ue>>15?-1:1)*(we?we===31?ze?NaN:1/0:Math.pow(2,we-15)*(1+ze/1024):6103515625e-14*(ze/1024))}function pt(ue,we){var ze=ue.getUint16(we.value,!0);return we.value+=2,ze}function It(ue,we){return ot(pt(ue,we))}function Ht(ue,we,ze,ct){for(var xt=ze.value,ae=[];ze.value<xt+ct-1;){var Ce=Rt(we,ze),De=Xt(ue,ze),Ue=mn(ue,ze);ze.value+=3;var Re=Xt(ue,ze),Ne=Xt(ue,ze);ae.push({name:Ce,pixelType:De,pLinear:Ue,xSampling:Re,ySampling:Ne})}return ze.value+=1,ae}function Lt(ue,we){var ze=nn(ue,we),ct=nn(ue,we),xt=nn(ue,we),ae=nn(ue,we),Ce=nn(ue,we),De=nn(ue,we),Ue=nn(ue,we),Re=nn(ue,we);return{redX:ze,redY:ct,greenX:xt,greenY:ae,blueX:Ce,blueY:De,whiteX:Ue,whiteY:Re}}function rn(ue,we){var ze=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],ct=mn(ue,we);return ze[ct]}function ir(ue,we){var ze=un(ue,we),ct=un(ue,we),xt=un(ue,we),ae=un(ue,we);return{xMin:ze,yMin:ct,xMax:xt,yMax:ae}}function $n(ue,we){var ze=["INCREASING_Y"],ct=mn(ue,we);return ze[ct]}function Gn(ue,we){var ze=nn(ue,we),ct=nn(ue,we);return[ze,ct]}function Br(ue,we){var ze=nn(ue,we),ct=nn(ue,we),xt=nn(ue,we);return[ze,ct,xt]}function gn(ue,we,ze,ct,xt){if(ct==="string"||ct==="stringvector"||ct==="iccProfile")return tn(we,ze,xt);if(ct==="chlist")return Ht(ue,we,ze,xt);if(ct==="chromaticities")return Lt(ue,ze);if(ct==="compression")return rn(ue,ze);if(ct==="box2i")return ir(ue,ze);if(ct==="lineOrder")return $n(ue,ze);if(ct==="float")return nn(ue,ze);if(ct==="v2f")return Gn(ue,ze);if(ct==="v3f")return Br(ue,ze);if(ct==="int")return Xt(ue,ze);if(ct==="rational")return it(ue,ze);if(ct==="timecode")return Zt(ue,ze);if(ct==="preview")return ze.value+=xt,"skipped";ze.value+=xt}function Di(ue,we,ze){const ct={};if(ue.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";ct.version=ue.getUint8(4);const xt=ue.getUint8(5);ct.spec={singleTile:!!(xt&2),longName:!!(xt&4),deepFormat:!!(xt&8),multiPart:!!(xt&16)},ze.value=8;for(var ae=!0;ae;){var Ce=Rt(we,ze);if(Ce==0)ae=!1;else{var De=Rt(we,ze),Ue=un(ue,ze),Re=gn(ue,we,ze,De,Ue);Re===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${De}'.`):ct[Ce]=Re}}if((xt&-5)!=0)throw console.error("EXRHeader:",ct),"THREE.EXRLoader: provided file is currently unsupported.";return ct}function vi(ue,we,ze,ct,xt){const ae={size:0,viewer:we,array:ze,offset:ct,width:ue.dataWindow.xMax-ue.dataWindow.xMin+1,height:ue.dataWindow.yMax-ue.dataWindow.yMin+1,channels:ue.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:ue.channels[0].pixelType,uncompress:null,getter:null,format:null,[Lv?"colorSpace":"encoding"]:null};switch(ue.compression){case"NO_COMPRESSION":ae.lines=1,ae.uncompress=He;break;case"RLE_COMPRESSION":ae.lines=1,ae.uncompress=rt;break;case"ZIPS_COMPRESSION":ae.lines=1,ae.uncompress=vt;break;case"ZIP_COMPRESSION":ae.lines=16,ae.uncompress=vt;break;case"PIZ_COMPRESSION":ae.lines=32,ae.uncompress=ht;break;case"PXR24_COMPRESSION":ae.lines=16,ae.uncompress=qt;break;case"DWAA_COMPRESSION":ae.lines=32,ae.uncompress=Ft;break;case"DWAB_COMPRESSION":ae.lines=256,ae.uncompress=Ft;break;default:throw"EXRLoader.parse: "+ue.compression+" is unsupported"}if(ae.scanlineBlockSize=ae.lines,ae.type==1)switch(xt){case go:ae.getter=It,ae.inputSize=2;break;case La:ae.getter=pt,ae.inputSize=2;break}else if(ae.type==2)switch(xt){case go:ae.getter=nn,ae.inputSize=4;break;case La:ae.getter=Ke,ae.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+ae.type+" for "+ue.compression+".";ae.blockCount=(ue.dataWindow.yMax+1)/ae.scanlineBlockSize;for(var Ce=0;Ce<ae.blockCount;Ce++)fn(we,ct);ae.outputChannels=ae.channels==3?4:ae.channels;const De=ae.width*ae.height*ae.outputChannels;switch(xt){case go:ae.byteArray=new Float32Array(De),ae.channels<ae.outputChannels&&ae.byteArray.fill(1,0,De);break;case La:ae.byteArray=new Uint16Array(De),ae.channels<ae.outputChannels&&ae.byteArray.fill(15360,0,De);break;default:console.error("THREE.EXRLoader: unsupported type: ",xt);break}return ae.bytesPerLine=ae.width*ae.inputSize*ae.channels,ae.outputChannels==4?ae.format=ia:ae.format=Fy,Lv?ae.colorSpace="srgb-linear":ae.encoding=3e3,ae}const Er=new DataView(e),xr=new Uint8Array(e),Cr={value:0},zr=Di(Er,e,Cr),Un=vi(zr,Er,xr,Cr,this.type),Po={value:0},uo={R:0,G:1,B:2,A:3,Y:0};for(let ue=0;ue<Un.height/Un.scanlineBlockSize;ue++){const we=un(Er,Cr);Un.size=un(Er,Cr),Un.lines=we+Un.scanlineBlockSize>Un.height?Un.height-we:Un.scanlineBlockSize;const ct=Un.size<Un.lines*Un.bytesPerLine?Un.uncompress(Un):He(Un);Cr.value+=Un.size;for(let xt=0;xt<Un.scanlineBlockSize;xt++){const ae=xt+ue*Un.scanlineBlockSize;if(ae>=Un.height)break;for(let Ce=0;Ce<Un.channels;Ce++){const De=uo[zr.channels[Ce].name];for(let Ue=0;Ue<Un.width;Ue++){Po.value=(xt*(Un.channels*Un.width)+Ce*Un.width+Ue)*Un.inputSize;const Re=(Un.height-1-ae)*(Un.width*Un.outputChannels)+Ue*Un.outputChannels+De;Un.byteArray[Re]=Un.getter(ct,Po)}}}}return{header:zr,width:Un.width,height:Un.height,data:Un.byteArray,format:Un.format,[Lv?"colorSpace":"encoding"]:Un[Lv?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,r,i){function o(a,s){Lv?a.colorSpace=s.colorSpace:a.encoding=s.encoding,a.minFilter=mi,a.magFilter=mi,a.generateMipmaps=!1,a.flipY=!1,t&&t(a,s)}return super.load(e,o,r,i)}}function yse(n,e,t,r){const i=class extends ol{constructor(a={}){const s=Object.entries(n);super({uniforms:s.reduce((l,[u,c])=>{const f=DP.clone({[u]:{value:c}});return{...l,...f}},{}),vertexShader:e,fragmentShader:t}),this.key="",s.forEach(([l])=>Object.defineProperty(this,l,{get:()=>this.uniforms[l].value,set:u=>this.uniforms[l].value=u})),Object.assign(this,a)}};return i.key=Du.generateUUID(),i}const xse=()=>parseInt(Wg.replace(/\D+/g,"")),_se=xse();function Sse(n,e,t){const r=Oc(h=>h.size),i=Oc(h=>h.viewport),o=typeof n=="number"?n:r.width*i.dpr,a=r.height*i.dpr,s=(typeof n=="number"?t:n)||{},{samples:l=0,depth:u,...c}=s,f=Me.useMemo(()=>{const h=new Bl(o,a,{minFilter:mi,magFilter:mi,type:La,...c});return u&&(h.depthTexture=new ow(o,a,go)),h.samples=l,h},[]);return Me.useLayoutEffect(()=>{f.setSize(o,a),l&&(f.samples=l)},[l,f,o,a]),Me.useEffect(()=>()=>f.dispose(),[]),f}const wse=n=>typeof n=="function",bse=Me.forwardRef(({envMap:n,resolution:e=256,frames:t=1/0,makeDefault:r,children:i,...o},a)=>{const s=Oc(({set:y})=>y),l=Oc(({camera:y})=>y),u=Oc(({size:y})=>y),c=Me.useRef(null);Me.useImperativeHandle(a,()=>c.current,[]);const f=Me.useRef(null),h=Sse(e);Me.useLayoutEffect(()=>{o.manual||(c.current.aspect=u.width/u.height)},[u,o]),Me.useLayoutEffect(()=>{c.current.updateProjectionMatrix()});let p=0,v=null;const S=wse(i);return Mw(y=>{S&&(t===1/0||p<t)&&(f.current.visible=!1,y.gl.setRenderTarget(h),v=y.scene.background,n&&(y.scene.background=n),y.gl.render(y.scene,c.current),y.scene.background=v,y.gl.setRenderTarget(null),f.current.visible=!0,p++)}),Me.useLayoutEffect(()=>{if(r){const y=l;return s(()=>({camera:c.current})),()=>s(()=>({camera:y}))}},[c,r,s]),Me.createElement(Me.Fragment,null,Me.createElement("perspectiveCamera",W0({ref:c},o),!S&&i),Me.createElement("group",{ref:f},S&&i(h.texture)))}),Ase="modulepreload",Ese=function(n){return"/sre-ai-synapse-core/"+n},jO={},DC=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let a=function(u){return Promise.all(u.map(c=>Promise.resolve(c).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),l=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=a(t.map(u=>{if(u=Ese(u),u in jO)return;jO[u]=!0;const c=u.endsWith(".css"),f=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":Ase,c||(h.as="script"),h.crossOrigin="",h.href=u,l&&h.setAttribute("nonce",l),document.head.appendChild(h),c)return new Promise((p,v)=>{h.addEventListener("load",p),h.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function o(a){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=a,window.dispatchEvent(s),!s.defaultPrevented)throw a}return i.then(a=>{for(const s of a||[])s.status==="rejected"&&o(s.reason);return e().catch(o)})};var q2={exports:{}},W2,$O;function Tse(){if($O)return W2;$O=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return W2=n,W2}var j2,XO;function Mse(){if(XO)return j2;XO=1;var n=Tse();function e(){}function t(){}return t.resetWarningCache=e,j2=function(){function r(a,s,l,u,c,f){if(f!==n){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}r.isRequired=r;function i(){return r}var o={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return o.PropTypes=o,o},j2}var YO;function Cse(){return YO||(YO=1,q2.exports=Mse()()),q2.exports}var Pse=Cse();const xi=gi(Pse),Ise=3e3,Rse=3001,_H=(n,e,t)=>{let r;switch(n){case Ul:r=new Uint8ClampedArray(e*t*4);break;case La:r=new Uint16Array(e*t*4);break;case Af:r=new Uint32Array(e*t*4);break;case JS:r=new Int8Array(e*t*4);break;case ZS:r=new Int16Array(e*t*4);break;case ky:r=new Int32Array(e*t*4);break;case go:r=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return r};let Lx;const Nse=(n,e,t,r)=>{if(Lx!==void 0)return Lx;const i=new Bl(1,1,r);e.setRenderTarget(i);const o=new Co(new _h,new pd({color:16777215}));e.render(o,t),e.setRenderTarget(null);const a=_H(n,i.width,i.height);return e.readRenderTargetPixels(i,0,0,i.width,i.height,a),i.dispose(),o.geometry.dispose(),o.material.dispose(),Lx=a[0]!==0,Lx};class pI{constructor(e){zo(this,"_renderer");zo(this,"_rendererIsDisposable",!1);zo(this,"_material");zo(this,"_scene");zo(this,"_camera");zo(this,"_quad");zo(this,"_renderTarget");zo(this,"_width");zo(this,"_height");zo(this,"_type");zo(this,"_colorSpace");zo(this,"_supportsReadPixels",!0);zo(this,"render",()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(e){throw this._renderer.setRenderTarget(null),e}this._renderer.setRenderTarget(null)});var r,i,o,a,s,l,u,c,f,h,p,v,S,y,_,w;this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const t={format:ia,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((r=e.renderTargetOptions)==null?void 0:r.anisotropy)!==void 0?(i=e.renderTargetOptions)==null?void 0:i.anisotropy:1,generateMipmaps:((o=e.renderTargetOptions)==null?void 0:o.generateMipmaps)!==void 0?(a=e.renderTargetOptions)==null?void 0:a.generateMipmaps:!1,magFilter:((s=e.renderTargetOptions)==null?void 0:s.magFilter)!==void 0?(l=e.renderTargetOptions)==null?void 0:l.magFilter:mi,minFilter:((u=e.renderTargetOptions)==null?void 0:u.minFilter)!==void 0?(c=e.renderTargetOptions)==null?void 0:c.minFilter:mi,samples:((f=e.renderTargetOptions)==null?void 0:f.samples)!==void 0?(h=e.renderTargetOptions)==null?void 0:h.samples:void 0,wrapS:((p=e.renderTargetOptions)==null?void 0:p.wrapS)!==void 0?(v=e.renderTargetOptions)==null?void 0:v.wrapS:va,wrapT:((S=e.renderTargetOptions)==null?void 0:S.wrapT)!==void 0?(y=e.renderTargetOptions)==null?void 0:y.wrapT:va};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=pI.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new xg,this._camera=new Xg,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!Nse(this._type,this._renderer,this._camera,t)){let A;switch(this._type){case La:A=this._renderer.extensions.has("EXT_color_buffer_float")?go:void 0;break}A!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${go}`),this._type=A):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Co(new _h,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Bl(this.width,this.height,t),this._renderTarget.texture.mapping=((_=e.renderTargetOptions)==null?void 0:_.mapping)!==void 0?(w=e.renderTargetOptions)==null?void 0:w.mapping:hh}static instantiateRenderer(){const e=new zP;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=_H(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new Lc(this.toArray(),this.width,this.height,ia,this._type,(e==null?void 0:e.mapping)||hh,(e==null?void 0:e.wrapS)||va,(e==null?void 0:e.wrapT)||va,(e==null?void 0:e.magFilter)||mi,(e==null?void 0:e.minFilter)||mi,(e==null?void 0:e.anisotropy)||1,Ef);return t.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof ol&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof Mi&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof Mi&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}class SH extends Error{}class wH extends Error{}const Ov=(n,e,t)=>{const r=new RegExp(`${e}="([^"]*)"`,"i").exec(n);if(r)return r[1];const i=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(n);if(i){const o=i[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return o&&o.length===3?o.map(a=>a.replace(/<\/?rdf:li>/g,"")):i[1].trim()}if(t!==void 0)return t;throw new Error(`Can't find ${e} in gainmap metadata`)},Lse=n=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(n):e=n.toString();let t=e.indexOf("<x:xmpmeta");for(;t!==-1;){const r=e.indexOf("x:xmpmeta>",t),i=e.slice(t,r+10);try{const o=Ov(i,"hdrgm:GainMapMin","0"),a=Ov(i,"hdrgm:GainMapMax"),s=Ov(i,"hdrgm:Gamma","1"),l=Ov(i,"hdrgm:OffsetSDR","0.015625"),u=Ov(i,"hdrgm:OffsetHDR","0.015625"),c=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(i),f=c?c[1]:"0",h=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(i);if(!h)throw new Error("Incomplete gainmap metadata");const p=h[1];return{gainMapMin:Array.isArray(o)?o.map(v=>parseFloat(v)):[parseFloat(o),parseFloat(o),parseFloat(o)],gainMapMax:Array.isArray(a)?a.map(v=>parseFloat(v)):[parseFloat(a),parseFloat(a),parseFloat(a)],gamma:Array.isArray(s)?s.map(v=>parseFloat(v)):[parseFloat(s),parseFloat(s),parseFloat(s)],offsetSdr:Array.isArray(l)?l.map(v=>parseFloat(v)):[parseFloat(l),parseFloat(l),parseFloat(l)],offsetHdr:Array.isArray(u)?u.map(v=>parseFloat(v)):[parseFloat(u),parseFloat(u),parseFloat(u)],hdrCapacityMin:parseFloat(f),hdrCapacityMax:parseFloat(p)}}catch{}t=e.indexOf("<x:xmpmeta",r)}};class Ose{constructor(e){zo(this,"options");this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,r)=>{const i=this.options.debug,o=new DataView(e.buffer);if(o.getUint16(0)!==65496){r(new Error("Not a valid jpeg"));return}const a=o.byteLength;let s=2,l=0,u;for(;s<a;){if(++l>250){r(new Error(`Found no marker after ${l} loops `));return}if(o.getUint8(s)!==255){r(new Error(`Not a valid marker at offset 0x${s.toString(16)}, found: 0x${o.getUint8(s).toString(16)}`));return}if(u=o.getUint8(s+1),i&&console.log(`Marker: ${u.toString(16)}`),u===226){i&&console.log("Found APP2 marker (0xffe2)");const c=s+4;if(o.getUint32(c)===1297106432){const f=c+4;let h;if(o.getUint16(f)===18761)h=!1;else if(o.getUint16(f)===19789)h=!0;else{r(new Error("No valid endianness marker found in TIFF header"));return}if(o.getUint16(f+2,!h)!==42){r(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const p=o.getUint32(f+4,!h);if(p<8){r(new Error("Not valid TIFF data! (First offset less than 8)"));return}const v=f+p,S=o.getUint16(v,!h),y=v+2;let _=0;for(let P=y;P<y+12*S;P+=12)o.getUint16(P,!h)===45057&&(_=o.getUint32(P+8,!h));const A=v+2+S*12+4,E=[];for(let P=A;P<A+_*16;P+=16){const O={MPType:o.getUint32(P,!h),size:o.getUint32(P+4,!h),dataOffset:o.getUint32(P+8,!h),dependantImages:o.getUint32(P+12,!h),start:-1,end:-1,isFII:!1};O.dataOffset?(O.start=f+O.dataOffset,O.isFII=!1):(O.start=0,O.isFII=!0),O.end=O.start+O.size,E.push(O)}if(this.options.extractNonFII&&E.length){const P=new Blob([o]),O=[];for(const L of E){if(L.isFII&&!this.options.extractFII)continue;const D=P.slice(L.start,L.end+1,"image/jpeg");O.push(D)}t(O)}}}s+=2+o.getUint16(s+2)}})}}const Dse=async n=>{const e=Lse(n);if(!e)throw new wH("Gain map XMP metadata not found");const r=await new Ose({extractFII:!0,extractNonFII:!0}).extract(n);if(r.length!==2)throw new SH("Gain map recovery image not found");return{sdr:new Uint8Array(await r[0].arrayBuffer()),gainMap:new Uint8Array(await r[1].arrayBuffer()),metadata:e}},KO=n=>new Promise((e,t)=>{const r=document.createElement("img");r.onload=()=>{e(r)},r.onerror=i=>{t(i)},r.src=URL.createObjectURL(n)});class kse extends sl{constructor(t,r){super(r);zo(this,"_renderer");zo(this,"_renderTargetOptions");zo(this,"_internalLoadingManager");zo(this,"_config");this._config=t,t.renderer&&(this._renderer=t.renderer),this._internalLoadingManager=new Ew}setRenderer(t){return this._renderer=t,this}setRenderTargetOptions(t){return this._renderTargetOptions=t,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: A Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const t=this._config.createMaterial({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new Mi,sdr:new Mi});return this._config.createQuadRenderer({width:16,height:16,type:La,colorSpace:Ef,material:t,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async processImages(t,r,i){const o=r?new Blob([r],{type:"image/jpeg"}):void 0,a=new Blob([t],{type:"image/jpeg"});let s,l,u=!1;if(typeof createImageBitmap>"u"){const c=await Promise.all([o?KO(o):Promise.resolve(void 0),KO(a)]);l=c[0],s=c[1],u=i==="flipY"}else{const c=await Promise.all([o?createImageBitmap(o,{imageOrientation:i||"flipY"}):Promise.resolve(void 0),createImageBitmap(a,{imageOrientation:i||"flipY"})]);l=c[0],s=c[1]}return{sdrImage:s,gainMapImage:l,needsFlip:u}}createTextures(t,r,i){const o=new Mi(r||new ImageData(2,2),hh,va,va,mi,xC,ia,Ul,1,Ef);o.flipY=i,o.needsUpdate=!0;const a=new Mi(t,hh,va,va,mi,xC,ia,Ul,1,Zs);return a.flipY=i,a.needsUpdate=!0,{gainMap:o,sdr:a}}updateQuadRenderer(t,r,i,o,a){t.width=r.width,t.height=r.height,t.material.gainMap=i,t.material.sdr=o,t.material.gainMapMin=a.gainMapMin,t.material.gainMapMax=a.gainMapMax,t.material.offsetHdr=a.offsetHdr,t.material.offsetSdr=a.offsetSdr,t.material.gamma=a.gamma,t.material.hdrCapacityMin=a.hdrCapacityMin,t.material.hdrCapacityMax=a.hdrCapacityMax,t.material.maxDisplayBoost=Math.pow(2,a.hdrCapacityMax),t.material.needsUpdate=!0}}const Fse=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,Use=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class Bse extends ol{constructor({gamma:t,offsetHdr:r,offsetSdr:i,gainMapMin:o,gainMapMax:a,maxDisplayBoost:s,hdrCapacityMin:l,hdrCapacityMax:u,sdr:c,gainMap:f}){super({name:"GainMapDecoderMaterial",vertexShader:Fse,fragmentShader:Use,uniforms:{sdr:{value:c},gainMap:{value:f},gamma:{value:new Pe(1/t[0],1/t[1],1/t[2])},offsetHdr:{value:new Pe().fromArray(r)},offsetSdr:{value:new Pe().fromArray(i)},gainMapMin:{value:new Pe().fromArray(o)},gainMapMax:{value:new Pe().fromArray(a)},weightFactor:{value:(Math.log2(s)-l)/(u-l)}},blending:gf,depthTest:!1,depthWrite:!1});zo(this,"_maxDisplayBoost");zo(this,"_hdrCapacityMin");zo(this,"_hdrCapacityMax");this._maxDisplayBoost=s,this._hdrCapacityMin=l,this._hdrCapacityMax=u,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(t){this.uniforms.sdr.value=t}get gainMap(){return this.uniforms.gainMap.value}set gainMap(t){this.uniforms.gainMap.value=t}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(t){this.uniforms.offsetHdr.value.fromArray(t)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(t){this.uniforms.offsetSdr.value.fromArray(t)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(t){this.uniforms.gainMapMin.value.fromArray(t)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(t){this.uniforms.gainMapMax.value.fromArray(t)}get gamma(){const t=this.uniforms.gamma.value;return[1/t.x,1/t.y,1/t.z]}set gamma(t){const r=this.uniforms.gamma.value;r.x=1/t[0],r.y=1/t[1],r.z=1/t[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(t){this._hdrCapacityMin=t,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(t){this._hdrCapacityMax=t,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(t){this._maxDisplayBoost=Math.max(1,Math.min(65504,t)),this.calculateWeight()}calculateWeight(){const t=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,t))}}class bH extends kse{constructor(e,t){super({renderer:e,createMaterial:r=>new Bse(r),createQuadRenderer:r=>new pI(r)},t)}async render(e,t,r,i){const{sdrImage:o,gainMapImage:a,needsFlip:s}=await this.processImages(r,i,"flipY"),{gainMap:l,sdr:u}=this.createTextures(o,a,s);this.updateQuadRenderer(e,o,l,u,t),e.render()}}class zse extends bH{load([e,t,r],i,o,a){const s=this.prepareQuadRenderer();let l,u,c;const f=async()=>{if(l&&u&&c){try{await this.render(s,c,l,u)}catch(F){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(r),typeof a=="function"&&a(F),s.disposeOnDemandRenderer();return}typeof i=="function"&&i(s),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(r),s.disposeOnDemandRenderer()}};let h=!0,p=0,v=0,S=!0,y=0,_=0,w=!0,A=0,E=0;const P=()=>{if(typeof o=="function"){const F=p+y+A,U=v+_+E,k=h&&S&&w;o(new ProgressEvent("progress",{lengthComputable:k,loaded:U,total:F}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(r);const O=new fu(this._internalLoadingManager);O.setResponseType("arraybuffer"),O.setRequestHeader(this.requestHeader),O.setPath(this.path),O.setWithCredentials(this.withCredentials),O.load(e,async F=>{if(typeof F=="string")throw new Error("Invalid sdr buffer");l=F,await f()},F=>{h=F.lengthComputable,v=F.loaded,p=F.total,P()},F=>{this.manager.itemError(e),typeof a=="function"&&a(F)});const L=new fu(this._internalLoadingManager);L.setResponseType("arraybuffer"),L.setRequestHeader(this.requestHeader),L.setPath(this.path),L.setWithCredentials(this.withCredentials),L.load(t,async F=>{if(typeof F=="string")throw new Error("Invalid gainmap buffer");u=F,await f()},F=>{S=F.lengthComputable,_=F.loaded,y=F.total,P()},F=>{this.manager.itemError(t),typeof a=="function"&&a(F)});const D=new fu(this._internalLoadingManager);return D.setRequestHeader(this.requestHeader),D.setPath(this.path),D.setWithCredentials(this.withCredentials),D.load(r,async F=>{if(typeof F!="string")throw new Error("Invalid metadata string");c=JSON.parse(F),await f()},F=>{w=F.lengthComputable,E=F.loaded,A=F.total,P()},F=>{this.manager.itemError(r),typeof a=="function"&&a(F)}),s}}class Hse extends bH{load(e,t,r,i){const o=this.prepareQuadRenderer(),a=new fu(this._internalLoadingManager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(this.withCredentials),this.manager.itemStart(e),a.load(e,async s=>{if(typeof s=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const l=new Uint8Array(s);let u,c,f;try{const h=await Dse(l);u=h.sdr,c=h.gainMap,f=h.metadata}catch(h){if(h instanceof wH||h instanceof SH)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),f={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},u=l;else throw h}try{await this.render(o,f,u.buffer,c==null?void 0:c.buffer)}catch(h){this.manager.itemError(e),typeof i=="function"&&i(h),o.disposeOnDemandRenderer();return}typeof t=="function"&&t(o),this.manager.itemEnd(e),o.disposeOnDemandRenderer()},r,s=>{this.manager.itemError(e),typeof i=="function"&&i(s)}),o}}const j0={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},AH="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",cg=n=>Array.isArray(n),mI=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function Cw({files:n=mI,path:e="",preset:t=void 0,encoding:r=void 0,extensions:i}={}){let o=null,a=!1;t&&(gI(t),n=j0[t],e=AH),a=cg(n);const{extension:s,isCubemap:l}=vI(n);if(o=yI(s),!o)throw new Error("useEnvironment: Unrecognized file extension: "+n);const u=Oc(p=>p.gl);Me.useLayoutEffect(()=>{if(s!=="webp"&&s!=="jpg"&&s!=="jpeg")return;function p(){Sg.clear(o,a?[n]:n)}u.domElement.addEventListener("webglcontextlost",p,{once:!0})},[n,u.domElement]);const c=Sg(o,a?[n]:n,p=>{(s==="webp"||s==="jpg"||s==="jpeg")&&p.setRenderer(u),p.setPath==null||p.setPath(e),i&&i(p)});let f=a?c[0]:c;if(s==="jpg"||s==="jpeg"||s==="webp"){var h;f=(h=f.renderTarget)==null?void 0:h.texture}return f.mapping=l?bf:mg,"colorSpace"in f?f.colorSpace=r??l?"srgb":"srgb-linear":f.encoding=r??l?Rse:Ise,f}const Vse={files:mI,path:"",preset:void 0,extensions:void 0};Cw.preload=n=>{const e={...Vse,...n};let{files:t,path:r=""}=e;const{preset:i,extensions:o}=e;i&&(gI(i),t=j0[i],r=AH);const{extension:a}=vI(t);if(a==="webp"||a==="jpg"||a==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const s=yI(a);if(!s)throw new Error("useEnvironment: Unrecognized file extension: "+t);Sg.preload(s,cg(t)?[t]:t,l=>{l.setPath==null||l.setPath(r),o&&o(l)})};const Gse={files:mI,preset:void 0};Cw.clear=n=>{const e={...Gse,...n};let{files:t}=e;const{preset:r}=e;r&&(gI(r),t=j0[r]);const{extension:i}=vI(t),o=yI(i);if(!o)throw new Error("useEnvironment: Unrecognized file extension: "+t);Sg.clear(o,cg(t)?[t]:t)};function gI(n){if(!(n in j0))throw new Error("Preset must be one of: "+Object.keys(j0).join(", "))}function vI(n){var e;const t=cg(n)&&n.length===6,r=cg(n)&&n.length===3&&n.some(a=>a.endsWith("json")),i=cg(n)?n[0]:n;return{extension:t?"cube":r?"webp":i.startsWith("data:application/exr")?"exr":i.startsWith("data:application/hdr")?"hdr":i.startsWith("data:image/jpeg")?"jpg":(e=i.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:t,isGainmap:r}}function yI(n){return n==="cube"?N7:n==="hdr"?gse:n==="exr"?vse:n==="jpg"||n==="jpeg"?Hse:n==="webp"?zse:null}const qse=n=>n.current&&n.current.isScene,Wse=n=>qse(n)?n.current:n;function xI(n,e,t,r,i={}){var o,a,s,l,u;i={backgroundBlurriness:(o=i.blur)!==null&&o!==void 0?o:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...i};const c=Wse(e||t),f=c.background,h=c.environment,p={backgroundBlurriness:c.backgroundBlurriness,backgroundIntensity:c.backgroundIntensity,backgroundRotation:(a=(s=c.backgroundRotation)==null||s.clone==null?void 0:s.clone())!==null&&a!==void 0?a:[0,0,0],environmentIntensity:c.environmentIntensity,environmentRotation:(l=(u=c.environmentRotation)==null||u.clone==null?void 0:u.clone())!==null&&l!==void 0?l:[0,0,0]};return n!=="only"&&(c.environment=r),n&&(c.background=r),th(c,i),()=>{n!=="only"&&(c.environment=h),n&&(c.background=f),th(c,p)}}function _I({scene:n,background:e=!1,map:t,...r}){const i=Oc(o=>o.scene);return Me.useLayoutEffect(()=>{if(t)return xI(e,n,i,t,r)}),null}function EH({background:n=!1,scene:e,blur:t,backgroundBlurriness:r,backgroundIntensity:i,backgroundRotation:o,environmentIntensity:a,environmentRotation:s,...l}){const u=Cw(l),c=Oc(f=>f.scene);return Me.useLayoutEffect(()=>xI(n,e,c,u,{blur:t,backgroundBlurriness:r,backgroundIntensity:i,backgroundRotation:o,environmentIntensity:a,environmentRotation:s})),null}function jse({children:n,near:e=1,far:t=1e3,resolution:r=256,frames:i=1,map:o,background:a=!1,blur:s,backgroundBlurriness:l,backgroundIntensity:u,backgroundRotation:c,environmentIntensity:f,environmentRotation:h,scene:p,files:v,path:S,preset:y=void 0,extensions:_}){const w=Oc(D=>D.gl),A=Oc(D=>D.scene),E=Me.useRef(null),[P]=Me.useState(()=>new xg),O=Me.useMemo(()=>{const D=new kP(r);return D.texture.type=La,D},[r]);Me.useLayoutEffect(()=>(i===1&&E.current.update(w,P),xI(a,p,A,O.texture,{blur:s,backgroundBlurriness:l,backgroundIntensity:u,backgroundRotation:c,environmentIntensity:f,environmentRotation:h})),[n,P,O.texture,p,A,a,i,w]);let L=1;return Mw(()=>{(i===1/0||L<i)&&(E.current.update(w,P),L++)}),Me.createElement(Me.Fragment,null,Oae(Me.createElement(Me.Fragment,null,n,Me.createElement("cubeCamera",{ref:E,args:[e,t,O]}),v||y?Me.createElement(EH,{background:!0,files:v,preset:y,path:S,extensions:_}):o?Me.createElement(_I,{background:!0,map:o,extensions:_}):null),P))}function $se(n){var e,t,r,i;const o=Cw(n),a=n.map||o;Me.useMemo(()=>cI({GroundProjectedEnvImpl:mse}),[]);const s=Me.useMemo(()=>[a],[a]),l=(e=n.ground)==null?void 0:e.height,u=(t=n.ground)==null?void 0:t.radius,c=(r=(i=n.ground)==null?void 0:i.scale)!==null&&r!==void 0?r:1e3;return Me.createElement(Me.Fragment,null,Me.createElement(_I,W0({},n,{map:a})),Me.createElement("groundProjectedEnvImpl",{args:s,scale:c,height:l,radius:u}))}function Xse(n){return n.ground?Me.createElement($se,n):n.map?Me.createElement(_I,n):n.children?Me.createElement(jse,n):Me.createElement(EH,n)}const Yse=yse({time:0,pixelRatio:1},` uniform float pixelRatio;
    uniform float time;
    attribute float size;  
    attribute float speed;  
    attribute float opacity;
    attribute vec3 noise;
    attribute vec3 color;
    varying vec3 vColor;
    varying float vOpacity;
    void main() {
      vec4 modelPosition = modelMatrix * vec4(position, 1.0);
      modelPosition.y += sin(time * speed + modelPosition.x * noise.x * 100.0) * 0.2;
      modelPosition.z += cos(time * speed + modelPosition.x * noise.y * 100.0) * 0.2;
      modelPosition.x += cos(time * speed + modelPosition.x * noise.z * 100.0) * 0.2;
      vec4 viewPosition = viewMatrix * modelPosition;
      vec4 projectionPostion = projectionMatrix * viewPosition;
      gl_Position = projectionPostion;
      gl_PointSize = size * 25. * pixelRatio;
      gl_PointSize *= (1.0 / - viewPosition.z);
      vColor = color;
      vOpacity = opacity;
    }`,` varying vec3 vColor;
    varying float vOpacity;
    void main() {
      float distanceToCenter = distance(gl_PointCoord, vec2(0.5));
      float strength = 0.05 / distanceToCenter - 0.1;
      gl_FragColor = vec4(vColor, strength * vOpacity);
      #include <tonemapping_fragment>
      #include <${_se>=154?"colorspace_fragment":"encodings_fragment"}>
    }`),TH=n=>n&&n.constructor===Float32Array,Kse=n=>[n.r,n.g,n.b],MH=n=>n instanceof zt||n instanceof Pe||n instanceof Yr,CH=n=>Array.isArray(n)?n:MH(n)?n.toArray():[n,n,n];function Dv(n,e,t){return Me.useMemo(()=>{if(e!==void 0){if(TH(e))return e;if(e instanceof xn){const r=Array.from({length:n*3},()=>Kse(e)).flat();return Float32Array.from(r)}else if(MH(e)||Array.isArray(e)){const r=Array.from({length:n*3},()=>CH(e)).flat();return Float32Array.from(r)}return Float32Array.from({length:n},()=>e)}return Float32Array.from({length:n},t)},[e])}const Jse=Me.forwardRef(({noise:n=1,count:e=100,speed:t=1,opacity:r=1,scale:i=1,size:o,color:a,children:s,...l},u)=>{Me.useMemo(()=>cI({SparklesImplMaterial:Yse}),[]);const c=Me.useRef(null),f=Oc(A=>A.viewport.dpr),h=CH(i),p=Me.useMemo(()=>Float32Array.from(Array.from({length:e},()=>h.map(Du.randFloatSpread)).flat()),[e,...h]),v=Dv(e,o,Math.random),S=Dv(e,r),y=Dv(e,t),_=Dv(e*3,n),w=Dv(a===void 0?e*3:e,TH(a)?a:new xn(a),()=>1);return Mw(A=>{c.current&&c.current.material&&(c.current.material.time=A.clock.elapsedTime)}),Me.useImperativeHandle(u,()=>c.current,[]),Me.createElement("points",W0({key:`particle-${e}-${JSON.stringify(i)}`},l,{ref:c}),Me.createElement("bufferGeometry",null,Me.createElement("bufferAttribute",{attach:"attributes-position",args:[p,3]}),Me.createElement("bufferAttribute",{attach:"attributes-size",args:[v,1]}),Me.createElement("bufferAttribute",{attach:"attributes-opacity",args:[S,1]}),Me.createElement("bufferAttribute",{attach:"attributes-speed",args:[y,1]}),Me.createElement("bufferAttribute",{attach:"attributes-color",args:[w,3]}),Me.createElement("bufferAttribute",{attach:"attributes-noise",args:[_,3]})),s||Me.createElement("sparklesImplMaterial",{transparent:!0,pixelRatio:f,depthWrite:!1}))}),Zse=({state:n,analyser:e})=>{const t=Me.useRef(null),r=Me.useRef(null),i=Me.useRef(null),o=Me.useRef(null),a=Me.useRef(null),s=Me.useMemo(()=>new Uint8Array((e==null?void 0:e.frequencyBinCount)||1024),[e]);Mw(u=>{const c=u.clock.getElapsedTime();let f=0,h=0;if(e){e.getByteFrequencyData(s);let p=0,v=0;const S=Math.floor(s.length/2);for(let y=0;y<s.length;y++)p+=s[y],y>S&&(v+=s[y]);f=p/s.length/255,h=v/(s.length-S)/255}if(t.current){const p=Math.sin(c*.4)*.08,v=n==="speaking"?Math.sin(c*10)*f*.05:0,S=n==="speaking"?Math.cos(c*8)*f*.03:0;t.current.rotation.y=Du.lerp(t.current.rotation.y,p,.1),t.current.rotation.z=Du.lerp(t.current.rotation.z,v,.1),t.current.rotation.x=Du.lerp(t.current.rotation.x,S,.1),t.current.position.y=Math.sin(c*1.5)*.04,n==="poisoned"?(t.current.position.x=Math.sin(c*30)*.02,t.current.rotation.z+=Math.sin(c*20)*.05):n==="processing"&&(t.current.rotation.y+=Math.sin(c*10)*.01)}if(o.current){const p=n==="processing"?8:n==="speaking"?1.5+h*12:1;o.current.children.forEach((v,S)=>{if(v.rotation.y+=.015*p*(S+1)*(S%2===0?1:-1),n==="speaking"){const y=1+h*.5+f*.2;v.scale.set(y,y,y)}else{const y=1+Math.sin(c+S)*.05;v.scale.set(y,y,y)}})}if(a.current){const p=n==="speaking"?f*1.8:0,v=n==="speaking"?(Math.random()-.5)*f*.08:0;a.current.position.y=Du.lerp(a.current.position.y,-.8-p,.85),a.current.position.x=Du.lerp(a.current.position.x,v,.75),a.current.scale.x=1+(n==="speaking"?f*.3:0)}if(r.current&&i.current){const p=n==="idle"?1:1.1+f*.9,v=n==="speaking"?.6:.2,S=n==="speaking"?f*.15:0;r.current.scale.setScalar(Du.lerp(r.current.scale.x,p,v)),i.current.scale.setScalar(Du.lerp(i.current.scale.x,p,v)),r.current.position.x=Du.lerp(r.current.position.x,-.45+S,.3),i.current.position.x=Du.lerp(i.current.position.x,.45-S,.3);const y=n==="speaking"?3+h*15:n==="listening"?2:1.5;r.current.children[0].material&&(r.current.children[0].material.emissiveIntensity=y),i.current.children[0].material&&(i.current.children[0].material.emissiveIntensity=y)}});const l=n==="listening"?"#00FF94":n==="poisoned"?"#FF3E00":"#00F0FF";return re.jsxs("group",{ref:t,children:[re.jsxs("mesh",{position:[0,0,0],children:[re.jsx("sphereGeometry",{args:[1.5,64,64]}),re.jsx("meshPhysicalMaterial",{color:"#ffffff",transmission:.98,thickness:2,roughness:.02,metalness:.05,ior:1.5,transparent:!0,opacity:.85})]}),re.jsxs("mesh",{position:[0,-.1,0],scale:[.8,1.05,.8],children:[re.jsx("sphereGeometry",{args:[1.2,24,24]}),re.jsx("meshStandardMaterial",{color:"#050505",wireframe:!0,emissive:l,emissiveIntensity:n==="speaking"||n==="poisoned"||n==="processing"?4:.5})]}),re.jsxs("group",{position:[-.45,.35,1.1],ref:r,children:[re.jsxs("mesh",{children:[re.jsx("sphereGeometry",{args:[.12,32,32]}),re.jsx("meshStandardMaterial",{color:l,emissive:l,emissiveIntensity:1})]}),re.jsx("pointLight",{intensity:4,color:l,distance:1.5})]}),re.jsxs("group",{position:[.45,.35,1.1],ref:i,children:[re.jsxs("mesh",{children:[re.jsx("sphereGeometry",{args:[.12,32,32]}),re.jsx("meshStandardMaterial",{color:l,emissive:l,emissiveIntensity:1})]}),re.jsx("pointLight",{intensity:4,color:l,distance:1.5})]}),re.jsx("group",{position:[0,1.5,0],ref:o,children:[.7,1,1.3,1.6].map((u,c)=>re.jsxs("mesh",{rotation:[Math.PI/2,0,0],children:[re.jsx("torusGeometry",{args:[u,.006,16,100]}),re.jsx("meshBasicMaterial",{color:l,transparent:!0,opacity:.3+c*.1})]},c))}),re.jsxs("mesh",{ref:a,position:[0,-.8,1.05],children:[re.jsx("boxGeometry",{args:[.8,.08,.15]}),re.jsx("meshBasicMaterial",{color:l,transparent:!0,opacity:.8})]}),re.jsx(Jse,{count:120,scale:4,size:2.5,speed:n==="processing"?10:2,color:l})]})},PH=({state:n,analyser:e})=>{const[t,r]=Me.useState(!1);return Me.useEffect(()=>{const i=s=>{s.preventDefault(),r(!0)},o=()=>r(!1),a=document.querySelector("canvas");return a&&(a.addEventListener("webglcontextlost",i,!1),a.addEventListener("webglcontextrestored",o,!1)),()=>{a&&(a.removeEventListener("webglcontextlost",i),a.removeEventListener("webglcontextrestored",o))}},[]),t?re.jsx("div",{className:"relative w-[500px] h-[500px] flex items-center justify-center border-2 border-red-500/20 rounded-full bg-red-900/10 animate-pulse",children:re.jsxs("div",{className:"text-center font-mono-data",children:[re.jsx("h3",{className:"text-red-500 font-bold text-xl mb-2",children:"VISUAL_SYSTEM_CRITICAL"}),re.jsx("p",{className:"text-[10px] text-red-400/60 uppercase tracking-widest",children:"GPU Context Lost"}),re.jsx("p",{className:"text-[10px] text-red-400/60 uppercase tracking-widest",children:"Neural Link Latency Minimized"})]})}):re.jsxs("div",{className:"relative w-[500px] h-[500px]",children:[re.jsxs(ese,{dpr:[1,1.5],gl:{alpha:!0,antialias:!0,powerPreference:"high-performance"},children:[re.jsx(bse,{makeDefault:!0,position:[0,0,5],fov:35}),re.jsx("ambientLight",{intensity:.4}),re.jsx("spotLight",{position:[10,10,10],angle:.15,penumbra:1,intensity:1.5}),re.jsx(Xse,{preset:"night"}),re.jsx(Zse,{state:n,analyser:e})]}),re.jsx("div",{className:`absolute inset-0 rounded-full border-2 transition-all duration-1000 ${n==="processing"?"border-gem-blue opacity-40 animate-pulse":n==="speaking"?"border-gem-blue/20 opacity-30 shadow-[0_0_20px_rgba(0,240,255,0.2)]":n==="poisoned"?"border-red-500 opacity-60":"border-gem-blue/5 opacity-10"}`})]})};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*/const IH=({progress:n,total:e,message:t,fileName:r,icon:i})=>{const o=e>0?n/e*100:0;return re.jsxs("div",{className:"flex flex-col items-center justify-center h-full w-full p-4 text-center font-mono-data",children:[i&&re.jsx("div",{className:"mb-8",children:i}),re.jsx("h2",{className:"text-xs uppercase tracking-[0.6em] text-gem-blue mb-4 animate-pulse",children:t}),re.jsxs("div",{className:"w-full max-w-md bg-gem-blue/5 border border-gem-blue/20 rounded-sm h-6 relative overflow-hidden flex items-center px-1",children:[re.jsx("div",{className:"bg-gem-blue h-3 rounded-sm transition-all duration-300 ease-out shadow-[0_0_15px_rgba(0,240,255,0.6)]",style:{width:`${o}%`}}),re.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent animate-scan w-20 pointer-events-none"})]}),re.jsxs("div",{className:"flex justify-between w-full max-w-md mt-4 text-[10px] uppercase tracking-widest text-white/40",children:[re.jsxs("p",{className:"truncate max-w-[250px]",title:r,children:["Ingesting: ",r||"Scanning_Stream"]}),re.jsxs("p",{className:"tabular-nums",children:[o.toFixed(1),"%"]})]}),re.jsx("div",{className:"mt-8 flex space-x-2",children:[1,2,3,4,5].map(a=>re.jsx("div",{className:`w-1 h-4 bg-gem-blue ${a<=Math.floor(o/20)?"opacity-100":"opacity-10"} animate-pulse`,style:{animationDelay:`${a*100}ms`}},a))})]})},Qse=({onUpload:n,files:e,setFiles:t,isUploading:r,uploadProgress:i,onAdminClick:o})=>{const[a,s]=Me.useState(!1),l="image/*,audio/*,video/*,.pdf,.txt,.md,.csv,.json,.log,.xml,.yaml,.py,.js,.ts,.cpp,.h,.go,.rs,.sh,.sql,.html,.css",u=v=>{v.target.files&&t(S=>[...S,...Array.from(v.target.files)])},c=Me.useCallback(v=>{v.preventDefault(),v.stopPropagation(),s(!1),v.dataTransfer.files&&t(S=>[...S,...Array.from(v.dataTransfer.files)])},[t]),f=Me.useCallback(v=>{v.preventDefault(),v.stopPropagation(),a||s(!0)},[a]),h=Me.useCallback(v=>{v.preventDefault(),v.stopPropagation(),s(!1)},[]),p=v=>{t(S=>S.filter((y,_)=>_!==v))};return r?re.jsx("div",{className:"h-screen w-full bg-gem-onyx flex flex-col items-center justify-center p-20 animate-in fade-in zoom-in duration-500",children:re.jsx(IH,{progress:i||0,total:100,message:"INGESTING_TECHNICAL_DATA",fileName:e.map(v=>v.name).join(", ")})}):re.jsxs("div",{className:"flex flex-col h-screen bg-gem-onyx relative overflow-hidden font-sans",children:[re.jsxs("div",{className:"absolute top-12 left-0 w-full flex flex-col items-center justify-center z-50 pointer-events-none",children:[re.jsx("h1",{className:"text-8xl font-black text-white tracking-tighter uppercase italic drop-shadow-[0_0_30_rgba(0,240,255,0.4)] leading-none text-center",children:"SRE SYNAPSE"}),re.jsxs("div",{className:"flex items-center space-x-6 mt-4",children:[re.jsx("div",{className:"h-[1px] w-32 bg-gradient-to-r from-transparent to-gem-blue"}),re.jsx("p",{className:"text-gem-blue/80 font-mono-data text-[10px] tracking-[0.6em] uppercase",children:"System Yield // Neural Agentic Core"}),re.jsx("div",{className:"h-[1px] w-32 bg-gradient-to-l from-transparent to-gem-blue"})]})]}),re.jsxs("div",{className:"flex flex-grow h-full items-center pt-32",children:[re.jsxs("div",{className:"w-1/2 flex flex-col justify-center px-16 lg:px-32 relative z-20 space-y-12",children:[re.jsxs("div",{className:"space-y-4",children:[re.jsxs("div",{className:"flex items-center space-x-4 opacity-40",children:[re.jsx("span",{className:"font-mono-data text-gem-teal text-xs",children:"01"}),re.jsx("h3",{className:"text-white font-bold tracking-[0.3em] uppercase text-[10px]",children:"Initialize Cognition Protocol"})]}),re.jsxs("div",{className:"w-full px-8 py-5 border border-gem-teal/20 bg-gem-teal/5 text-gem-teal font-mono-data text-xs rounded-sm uppercase tracking-[0.3em] flex items-center shadow-[0_0_15px_rgba(0,255,148,0.05)]",children:[re.jsx("span",{className:"w-2 h-2 bg-gem-teal rounded-full animate-ping mr-4"}),"NEURAL_CORE_ONLINE // AUTH_VERIFIED"]})]}),re.jsxs("div",{className:"space-y-6",children:[re.jsxs("div",{className:"flex items-center space-x-4 opacity-40",children:[re.jsx("span",{className:"font-mono-data text-gem-teal text-xs",children:"02"}),re.jsx("h3",{className:"text-white font-bold tracking-[0.3em] uppercase text-[10px]",children:"Initiate Data Stream Ingestion"})]}),re.jsxs("div",{className:`relative border border-dashed border-gem-blue/20 bg-gem-blue/5 hover:border-gem-blue/60 rounded-sm p-10 transition-all cursor-pointer group ${a?"bg-gem-blue/10 border-gem-blue scale-[1.02]":""}`,onDrop:c,onDragOver:f,onDragLeave:h,children:[re.jsx("input",{id:"file-upload",type:"file",multiple:!0,className:"hidden",onChange:u,accept:l}),re.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer flex items-center justify-between",children:[re.jsxs("div",{className:"flex flex-col",children:[re.jsx("span",{className:"font-mono-data text-sm text-white/80 group-hover:text-gem-blue tracking-[0.2em] uppercase transition-colors",children:"Select_Schematics"}),re.jsx("span",{className:"text-[8px] text-white/20 uppercase mt-1 tracking-widest",children:"Docs, Logs, Financial Statements, Tax Forms"})]}),re.jsx("div",{className:"w-10 h-10 rounded-full border border-gem-blue/30 flex items-center justify-center text-gem-blue group-hover:bg-gem-blue group-hover:text-gem-onyx transition-all",children:re.jsx("span",{className:"text-2xl mt-[-2px]",children:"+"})})]}),re.jsx("div",{className:"absolute top-0 left-0 w-2 h-2 border-t border-l border-gem-blue/40 group-hover:border-gem-blue"}),re.jsx("div",{className:"absolute bottom-0 right-0 w-2 h-2 border-b border-r border-gem-blue/40 group-hover:border-gem-blue"})]}),e.length>0&&re.jsxs("div",{className:"animate-in slide-in-from-left-4",children:[re.jsx("ul",{className:"mb-6 space-y-2 max-h-40 overflow-y-auto custom-scrollbar pr-4",children:e.map((v,S)=>re.jsxs("li",{className:"flex justify-between items-center text-[10px] font-mono-data text-gem-blue/60 py-2 border-b border-gem-blue/5 group",children:[re.jsx("span",{className:"truncate max-w-[200px]",children:v.name}),re.jsx("button",{onClick:()=>p(S),className:"text-red-500/50 hover:text-red-500 transition-colors uppercase",children:"[PURGE]"})]},S))}),re.jsx("button",{onClick:n,className:"w-full py-5 bg-gem-blue text-gem-onyx font-black text-sm uppercase tracking-[0.4em] hover:bg-white hover:shadow-[0_0_30px_rgba(255,255,255,0.4)] transition-all active:scale-[0.98]",children:"EXECUTE_SYNAPSE_LOAD"})]})]})]}),re.jsxs("div",{className:"w-1/2 flex items-center justify-center relative",children:[re.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gem-onyx via-transparent to-transparent z-10 pointer-events-none"}),re.jsx("div",{className:"transform scale-[1.6] opacity-90 relative z-0",children:re.jsx(PH,{state:"idle"})}),re.jsxs("div",{className:"absolute bottom-12 right-24 text-right space-y-2 font-mono-data opacity-30 pointer-events-none",children:[re.jsx("div",{className:"text-[10px] text-gem-teal tracking-widest uppercase animate-pulse",children:"Neural_Sync: Verified"}),re.jsxs("div",{className:"text-[9px] text-gem-blue tracking-[0.2em] uppercase",children:["Mem_Load: ",e.length*4,".2%"]}),re.jsxs("div",{className:"text-[8px] text-white/40 tracking-tighter",children:["SIG_UUID: ",Math.random().toString(16).substring(2,10).toUpperCase()]})]})]})]}),re.jsxs("div",{className:"absolute bottom-0 left-0 w-full p-6 border-t border-gem-blue/5 bg-gem-onyx/80 backdrop-blur-md flex justify-between items-center text-[8px] font-mono-data tracking-[0.4em] text-gem-blue/30",children:[re.jsxs("div",{className:"flex items-center space-x-6",children:[re.jsxs("div",{className:"flex items-center",children:[re.jsx("div",{className:"w-1 h-1 bg-gem-teal rounded-full mr-3 animate-ping"}),"STABLE_BUILD // V_3.12.0"]}),re.jsx("button",{onClick:o,className:"hover:text-gem-blue transition-colors border-l border-white/5 pl-6",children:"SEC_GATEWAY_UPLINK"})]}),re.jsxs("div",{className:"flex space-x-8 uppercase",children:[re.jsx("span",{children:"latency: 0.8ms"}),re.jsx("span",{children:"uplink: direct_neural"}),re.jsx("span",{children:"encryption: aes_256_synapse"})]})]})]})};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*/const ele=()=>re.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:re.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})});/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*/const tle=()=>re.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:re.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),JO=({variant:n,message:e="Processing_Neural_Stream",subMessage:t,progress:r=0,isError:i=!1})=>{const[o,a]=Me.useState("");Me.useEffect(()=>{const y=setInterval(()=>{a(_=>_.length>=3?"":_+".")},500);return()=>clearInterval(y)},[]);const s=i?"text-red-500":"text-gem-blue",l=i?"border-red-500/40":"border-gem-blue/40",u=i?"bg-red-500/5":"bg-gem-blue/5",c=i?"bg-red-500":"bg-gem-blue",f=()=>re.jsxs("div",{className:"flex flex-col items-center justify-center p-8 space-y-6",children:[re.jsxs("div",{className:"relative w-20 h-20",children:[re.jsx("div",{className:`absolute inset-0 rounded-full border-4 ${l} animate-ping opacity-20`}),re.jsx("div",{className:`absolute inset-4 rounded-full border-2 ${l} animate-pulse`}),re.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:re.jsx("div",{className:`w-4 h-4 rounded-full ${c} shadow-[0_0_15px_rgba(0,240,255,0.8)]`})})]}),re.jsxs("div",{className:"text-center",children:[re.jsxs("p",{className:`text-[10px] font-mono-data font-bold uppercase tracking-[0.4em] ${s}`,children:[e,o]}),t&&re.jsx("p",{className:"text-[9px] text-white/20 uppercase tracking-widest mt-2",children:t})]})]}),h=()=>re.jsxs("div",{className:`w-full max-w-md p-6 border ${l} ${u} glass-card relative overflow-hidden animate-in slide-in-from-left-4`,children:[re.jsx("div",{className:"absolute top-0 left-0 w-full h-[1px] bg-gradient-to-r from-transparent via-gem-blue/40 to-transparent animate-scan"}),re.jsxs("div",{className:"flex justify-between items-center mb-3",children:[re.jsx("span",{className:`text-[10px] font-mono-data uppercase tracking-widest ${s}`,children:e}),re.jsxs("span",{className:`text-[10px] font-mono-data ${s}`,children:[Math.floor(r),"%"]})]}),re.jsx("div",{className:"w-full h-1.5 bg-white/5 rounded-full overflow-hidden border border-white/10",children:re.jsx("div",{className:`h-full transition-all duration-300 ease-out ${c} shadow-[0_0_10px_rgba(0,240,255,0.5)]`,style:{width:`${r}%`}})}),re.jsxs("div",{className:"mt-4 flex justify-between text-[8px] text-white/20 uppercase font-mono-data tracking-tighter",children:[re.jsxs("span",{children:["BUFFER_SATURATION: ",(r/100*8).toFixed(1),"MB"]}),re.jsx("span",{children:"PACKET_LOSS: 0.00%"})]})]}),p=()=>re.jsxs("div",{className:"flex items-center space-x-6 p-4 border border-white/5 bg-white/[0.02] rounded-sm",children:[re.jsxs("div",{className:"relative w-10 h-10 shrink-0",children:[re.jsx("div",{className:`absolute inset-0 border-2 border-t-transparent ${l} rounded-full animate-spin`}),re.jsx("div",{className:`absolute inset-2 border-2 border-b-transparent ${l} rounded-full animate-spin-slow opacity-40`}),re.jsx("div",{className:`absolute inset-[14px] w-1.5 h-1.5 ${c} rounded-full animate-pulse`})]}),re.jsxs("div",{className:"flex flex-col",children:[re.jsx("p",{className:`text-[10px] font-mono-data uppercase tracking-[0.3em] font-black ${s}`,children:e}),t&&re.jsx("p",{className:"text-[8px] text-white/20 uppercase tracking-widest mt-0.5",children:t})]})]}),v=()=>re.jsxs("div",{className:`w-full max-w-2xl p-5 border ${l} ${u} glass-card font-mono-data overflow-hidden`,children:[re.jsxs("div",{className:"flex items-center justify-between mb-4 border-b border-white/5 pb-2",children:[re.jsxs("div",{className:"flex items-center space-x-2",children:[re.jsx("div",{className:`w-2 h-2 rounded-full ${c} animate-pulse`}),re.jsx("span",{className:`text-[9px] uppercase tracking-[0.2em] ${s}`,children:"Diagnostic_Kernel_v4.2"})]}),re.jsxs("span",{className:"text-[8px] text-white/10",children:["SYS_TIME: ",new Date().toLocaleTimeString()]})]}),re.jsxs("div",{className:"space-y-1 max-h-32 overflow-hidden",children:[re.jsxs("div",{className:"flex space-x-3 text-[9px]",children:[re.jsx("span",{className:"text-white/20",children:"[0.002s]"}),re.jsx("span",{className:"text-white/60 uppercase",children:"Init_Handshake: OK"})]}),re.jsxs("div",{className:"flex space-x-3 text-[9px]",children:[re.jsx("span",{className:"text-white/20",children:"[0.415s]"}),re.jsxs("span",{className:"text-white/60 uppercase",children:["Ingest_Context: ",t==null?void 0:t.substring(0,30),"..."]})]}),re.jsxs("div",{className:"flex space-x-3 text-[9px] animate-pulse",children:[re.jsxs("span",{className:"text-white/20",children:["[",(r/100).toFixed(3),"s]"]}),re.jsxs("span",{className:s,children:["> ",e.toUpperCase(),"_STREAM_READING"]})]}),re.jsx("div",{className:"flex space-x-3 text-[8px] opacity-20 mt-4 italic",children:re.jsxs("span",{children:["NEURAL_DRIFT: ",(Math.random()*.05).toFixed(5)]})})]})]}),S=()=>{switch(n){case"pulse":return f();case"progress":return h();case"spinner":return p();case"terminal":return v();default:return p()}};return re.jsx("div",{role:"status","aria-live":"polite",className:"w-full flex justify-center py-4 animate-in fade-in slide-in-from-bottom-2 duration-500",children:S()})};function Ci(n){"@babel/helpers - typeof";return Ci=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ci(n)}var Ol=Uint8Array,el=Uint16Array,$0=Uint32Array,Pw=new Ol([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Iw=new Ol([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),kC=new Ol([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),RH=function(n,e){for(var t=new el(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new $0(t[30]),r=1;r<30;++r)for(var o=t[r];o<t[r+1];++o)i[o]=o-t[r]<<5|r;return[t,i]},NH=RH(Pw,2),LH=NH[0],FC=NH[1];LH[28]=258,FC[258]=28;var OH=RH(Iw,0),nle=OH[0],ZO=OH[1],UC=new el(32768);for(var lo=0;lo<32768;++lo){var Kd=(lo&43690)>>>1|(lo&21845)<<1;Kd=(Kd&52428)>>>2|(Kd&13107)<<2,Kd=(Kd&61680)>>>4|(Kd&3855)<<4,UC[lo]=((Kd&65280)>>>8|(Kd&255)<<8)>>>1}var xf=(function(n,e,t){for(var r=n.length,i=0,o=new el(e);i<r;++i)++o[n[i]-1];var a=new el(e);for(i=0;i<e;++i)a[i]=a[i-1]+o[i-1]<<1;var s;if(t){s=new el(1<<e);var l=15-e;for(i=0;i<r;++i)if(n[i])for(var u=i<<4|n[i],c=e-n[i],f=a[n[i]-1]++<<c,h=f|(1<<c)-1;f<=h;++f)s[UC[f]>>>l]=u}else for(s=new el(r),i=0;i<r;++i)s[i]=UC[a[n[i]-1]++]>>>15-n[i];return s}),gh=new Ol(288);for(var lo=0;lo<144;++lo)gh[lo]=8;for(var lo=144;lo<256;++lo)gh[lo]=9;for(var lo=256;lo<280;++lo)gh[lo]=7;for(var lo=280;lo<288;++lo)gh[lo]=8;var X0=new Ol(32);for(var lo=0;lo<32;++lo)X0[lo]=5;var rle=xf(gh,9,0),ile=xf(gh,9,1),ole=xf(X0,5,0),ale=xf(X0,5,1),$2=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Sc=function(n,e,t){var r=e/8>>0;return(n[r]|n[r+1]<<8)>>>(e&7)&t},X2=function(n,e){var t=e/8>>0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>>(e&7)},SI=function(n){return(n/8>>0)+(n&7&&1)},DH=function(n,e,t){(t==null||t>n.length)&&(t=n.length);var r=new(n instanceof el?el:n instanceof $0?$0:Ol)(t-e);return r.set(n.subarray(e,t)),r},sle=function(n,e,t){var r=n.length,i=!e||t,o=!t||t.i;t||(t={}),e||(e=new Ol(r*3));var a=function(me){var be=e.length;if(me>be){var Ie=new Ol(Math.max(be*2,me));Ie.set(e),e=Ie}},s=t.f||0,l=t.p||0,u=t.b||0,c=t.l,f=t.d,h=t.m,p=t.n,v=r*8;do{if(!c){t.f=s=Sc(n,l,1);var S=Sc(n,l+1,3);if(l+=3,S)if(S==1)c=ile,f=ale,h=9,p=5;else if(S==2){var A=Sc(n,l,31)+257,E=Sc(n,l+10,15)+4,P=A+Sc(n,l+5,31)+1;l+=14;for(var O=new Ol(P),L=new Ol(19),D=0;D<E;++D)L[kC[D]]=Sc(n,l+D*3,7);l+=E*3;var F=$2(L),U=(1<<F)-1;if(!o&&l+P*(F+7)>v)break;for(var k=xf(L,F,1),D=0;D<P;){var z=k[Sc(n,l,U)];l+=z&15;var y=z>>>4;if(y<16)O[D++]=y;else{var W=0,j=0;for(y==16?(j=3+Sc(n,l,3),l+=2,W=O[D-1]):y==17?(j=3+Sc(n,l,7),l+=3):y==18&&(j=11+Sc(n,l,127),l+=7);j--;)O[D++]=W}}var se=O.subarray(0,A),Y=O.subarray(A);h=$2(se),p=$2(Y),c=xf(se,h,1),f=xf(Y,p,1)}else throw"invalid block type";else{var y=SI(l)+4,_=n[y-4]|n[y-3]<<8,w=y+_;if(w>r){if(o)throw"unexpected EOF";break}i&&a(u+_),e.set(n.subarray(y,w),u),t.b=u+=_,t.p=l=w*8;continue}if(l>v)throw"unexpected EOF"}i&&a(u+131072);for(var Q=(1<<h)-1,X=(1<<p)-1,Z=h+p+18;o||l+Z<v;){var W=c[X2(n,l)&Q],oe=W>>>4;if(l+=W&15,l>v)throw"unexpected EOF";if(!W)throw"invalid length/literal";if(oe<256)e[u++]=oe;else if(oe==256){c=null;break}else{var ee=oe-254;if(oe>264){var D=oe-257,G=Pw[D];ee=Sc(n,l,(1<<G)-1)+LH[D],l+=G}var ne=f[X2(n,l)&X],te=ne>>>4;if(!ne)throw"invalid distance";l+=ne&15;var Y=nle[te];if(te>3){var G=Iw[te];Y+=X2(n,l)&(1<<G)-1,l+=G}if(l>v)throw"unexpected EOF";i&&a(u+131072);for(var de=u+ee;u<de;u+=4)e[u]=e[u-Y],e[u+1]=e[u+1-Y],e[u+2]=e[u+2-Y],e[u+3]=e[u+3-Y];u=de}}t.l=c,t.p=l,t.b=u,c&&(s=1,t.m=h,t.d=f,t.n=p)}while(!s);return u==e.length?e:DH(e,0,u)},Kf=function(n,e,t){t<<=e&7;var r=e/8>>0;n[r]|=t,n[r+1]|=t>>>8},kv=function(n,e,t){t<<=e&7;var r=e/8>>0;n[r]|=t,n[r+1]|=t>>>8,n[r+2]|=t>>>16},Y2=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,o=t.slice();if(!i)return[new Ol(0),0];if(i==1){var a=new Ol(t[0].s+1);return a[t[0].s]=1,[a,1]}t.sort(function(P,O){return P.f-O.f}),t.push({s:-1,f:25001});var s=t[0],l=t[1],u=0,c=1,f=2;for(t[0]={s:-1,f:s.f+l.f,l:s,r:l};c!=i-1;)s=t[t[u].f<t[f].f?u++:f++],l=t[u!=c&&t[u].f<t[f].f?u++:f++],t[c++]={s:-1,f:s.f+l.f,l:s,r:l};for(var h=o[0].s,r=1;r<i;++r)o[r].s>h&&(h=o[r].s);var p=new el(h+1),v=BC(t[c-1],p,0);if(v>e){var r=0,S=0,y=v-e,_=1<<y;for(o.sort(function(O,L){return p[L.s]-p[O.s]||O.f-L.f});r<i;++r){var w=o[r].s;if(p[w]>e)S+=_-(1<<v-p[w]),p[w]=e;else break}for(S>>>=y;S>0;){var A=o[r].s;p[A]<e?S-=1<<e-p[A]++-1:++r}for(;r>=0&&S;--r){var E=o[r].s;p[E]==e&&(--p[E],++S)}v=e}return[new Ol(p),v]},BC=function(n,e,t){return n.s==-1?Math.max(BC(n.l,e,t+1),BC(n.r,e,t+1)):e[n.s]=t},QO=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new el(++e),r=0,i=n[0],o=1,a=function(l){t[r++]=l},s=1;s<=e;++s)if(n[s]==i&&s!=e)++o;else{if(!i&&o>2){for(;o>138;o-=138)a(32754);o>2&&(a(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(a(i),--o;o>6;o-=6)a(8304);o>2&&(a(o-3<<5|8208),o=0)}for(;o--;)a(i);o=1,i=n[s]}return[t.subarray(0,r),e]},Fv=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},zC=function(n,e,t){var r=t.length,i=SI(e+2);n[i]=r&255,n[i+1]=r>>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var o=0;o<r;++o)n[i+o+4]=t[o];return(i+4+r)*8},e4=function(n,e,t,r,i,o,a,s,l,u,c){Kf(e,c++,t),++i[256];for(var f=Y2(i,15),h=f[0],p=f[1],v=Y2(o,15),S=v[0],y=v[1],_=QO(h),w=_[0],A=_[1],E=QO(S),P=E[0],O=E[1],L=new el(19),D=0;D<w.length;++D)L[w[D]&31]++;for(var D=0;D<P.length;++D)L[P[D]&31]++;for(var F=Y2(L,7),U=F[0],k=F[1],z=19;z>4&&!U[kC[z-1]];--z);var W=u+5<<3,j=Fv(i,gh)+Fv(o,X0)+a,se=Fv(i,h)+Fv(o,S)+a+14+3*z+Fv(L,U)+(2*L[16]+3*L[17]+7*L[18]);if(W<=j&&W<=se)return zC(e,c,n.subarray(l,l+u));var Y,Q,X,Z;if(Kf(e,c,1+(se<j)),c+=2,se<j){Y=xf(h,p,0),Q=h,X=xf(S,y,0),Z=S;var oe=xf(U,k,0);Kf(e,c,A-257),Kf(e,c+5,O-1),Kf(e,c+10,z-4),c+=14;for(var D=0;D<z;++D)Kf(e,c+3*D,U[kC[D]]);c+=3*z;for(var ee=[w,P],G=0;G<2;++G)for(var ne=ee[G],D=0;D<ne.length;++D){var te=ne[D]&31;Kf(e,c,oe[te]),c+=U[te],te>15&&(Kf(e,c,ne[D]>>>5&127),c+=ne[D]>>>12)}}else Y=rle,Q=gh,X=ole,Z=X0;for(var D=0;D<s;++D)if(r[D]>255){var te=r[D]>>>18&31;kv(e,c,Y[te+257]),c+=Q[te+257],te>7&&(Kf(e,c,r[D]>>>23&31),c+=Pw[te]);var de=r[D]&31;kv(e,c,X[de]),c+=Z[de],de>3&&(kv(e,c,r[D]>>>5&8191),c+=Iw[de])}else kv(e,c,Y[r[D]]),c+=Q[r[D]];return kv(e,c,Y[256]),c+Q[256]},lle=new $0([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),ule=function(n,e,t,r,i,o){var a=n.length,s=new Ol(r+a+5*(1+Math.floor(a/7e3))+i),l=s.subarray(r,s.length-i),u=0;if(!e||a<8)for(var c=0;c<=a;c+=65535){var f=c+65535;f<a?u=zC(l,u,n.subarray(c,f)):(l[c]=o,u=zC(l,u,n.subarray(c,a)))}else{for(var h=lle[e-1],p=h>>>13,v=h&8191,S=(1<<t)-1,y=new el(32768),_=new el(S+1),w=Math.ceil(t/3),A=2*w,E=function(Se){return(n[Se]^n[Se+1]<<w^n[Se+2]<<A)&S},P=new $0(25e3),O=new el(288),L=new el(32),D=0,F=0,c=0,U=0,k=0,z=0;c<a;++c){var W=E(c),j=c&32767,se=_[W];if(y[j]=se,_[W]=j,k<=c){var Y=a-c;if((D>7e3||U>24576)&&Y>423){u=e4(n,l,0,P,O,L,F,U,z,c-z,u),U=D=F=0,z=c;for(var Q=0;Q<286;++Q)O[Q]=0;for(var Q=0;Q<30;++Q)L[Q]=0}var X=2,Z=0,oe=v,ee=j-se&32767;if(Y>2&&W==E(c-ee))for(var G=Math.min(p,Y)-1,ne=Math.min(32767,c),te=Math.min(258,Y);ee<=ne&&--oe&&j!=se;){if(n[c+X]==n[c+X-ee]){for(var de=0;de<te&&n[c+de]==n[c+de-ee];++de);if(de>X){if(X=de,Z=ee,de>G)break;for(var me=Math.min(ee,de-2),be=0,Q=0;Q<me;++Q){var Ie=c-ee+Q+32768&32767,Ee=y[Ie],Xe=Ie-Ee+32768&32767;Xe>be&&(be=Xe,se=Ie)}}}j=se,se=y[j],ee+=j-se+32768&32767}if(Z){P[U++]=268435456|FC[X]<<18|ZO[Z];var tt=FC[X]&31,Te=ZO[Z]&31;F+=Pw[tt]+Iw[Te],++O[257+tt],++L[Te],k=c+X,++D}else P[U++]=n[c],++O[n[c]]}}u=e4(n,l,o,P,O,L,F,U,z,c-z,u)}return DH(s,0,r+SI(u)+i)},cle=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,o=t.length,a=0;a!=o;){for(var s=Math.min(a+5552,o);a<s;++a)r+=t[a],i+=r;r%=65521,i%=65521}n=r,e=i},d:function(){return(n>>>8<<16|(e&255)<<8|e>>>8)+((n&255)<<23)*2}}},fle=function(n,e,t,r,i){return ule(n,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):12+e.mem,t,r,!0)},dle=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},hle=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;n[0]=120,n[1]=r<<6|(r?32-2*r:1)},ple=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function HC(n,e){e===void 0&&(e={});var t=cle();t.p(n);var r=fle(n,e,2,4);return hle(r,e),dle(r,r.length-4,t.d()),r}function mle(n,e){return sle((ple(n),n.subarray(2,-4)),e)}var Jn=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function K2(){Jn.console&&typeof Jn.console.log=="function"&&Jn.console.log.apply(Jn.console,arguments)}var Ui={log:K2,warn:function(n){Jn.console&&(typeof Jn.console.warn=="function"?Jn.console.warn.apply(Jn.console,arguments):K2.call(null,arguments))},error:function(n){Jn.console&&(typeof Jn.console.error=="function"?Jn.console.error.apply(Jn.console,arguments):K2(n))}};function J2(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){lp(r.response,e,t)},r.onerror=function(){Ui.error("could not download file")},r.send()}function t4(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Ox(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var m0,VC,lp=Jn.saveAs||((typeof window>"u"?"undefined":Ci(window))!=="object"||window!==Jn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=Jn.URL||Jn.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?t4(i.href)?J2(n,e,t):Ox(i,i.target="_blank"):Ox(i)):(i.href=r.createObjectURL(n),setTimeout((function(){r.revokeObjectURL(i.href)}),4e4),setTimeout((function(){Ox(i)}),0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(t4(n))J2(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout((function(){Ox(r)}))}else navigator.msSaveOrOpenBlob((function(i,o){return o===void 0?o={autoBom:!1}:Ci(o)!=="object"&&(Ui.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return J2(n,e,t);var i=n.type==="application/octet-stream",o=/constructor/i.test(Jn.HTMLElement)||Jn.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&o)&&(typeof FileReader>"u"?"undefined":Ci(FileReader))==="object"){var s=new FileReader;s.onloadend=function(){var c=s.result;c=a?c:c.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=c:location=c,r=null},s.readAsDataURL(n)}else{var l=Jn.URL||Jn.webkitURL,u=l.createObjectURL(n);r?r.location=u:location.href=u,r=null,setTimeout((function(){l.revokeObjectURL(u)}),4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function kH(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(s){return[parseInt(s[1]),parseInt(s[2]),parseInt(s[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(s){return[parseInt(s[1],16),parseInt(s[2],16),parseInt(s[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(s){return[parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16),parseInt(s[3]+s[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,o=t[r].process,a=i.exec(n);a&&(e=o(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var s=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return s.length==1&&(s="0"+s),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+s+l+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Z2(n,e){var t=n[0],r=n[1],i=n[2],o=n[3];t=Ms(t,r,i,o,e[0],7,-680876936),o=Ms(o,t,r,i,e[1],12,-389564586),i=Ms(i,o,t,r,e[2],17,606105819),r=Ms(r,i,o,t,e[3],22,-1044525330),t=Ms(t,r,i,o,e[4],7,-176418897),o=Ms(o,t,r,i,e[5],12,1200080426),i=Ms(i,o,t,r,e[6],17,-1473231341),r=Ms(r,i,o,t,e[7],22,-45705983),t=Ms(t,r,i,o,e[8],7,1770035416),o=Ms(o,t,r,i,e[9],12,-1958414417),i=Ms(i,o,t,r,e[10],17,-42063),r=Ms(r,i,o,t,e[11],22,-1990404162),t=Ms(t,r,i,o,e[12],7,1804603682),o=Ms(o,t,r,i,e[13],12,-40341101),i=Ms(i,o,t,r,e[14],17,-1502002290),t=Cs(t,r=Ms(r,i,o,t,e[15],22,1236535329),i,o,e[1],5,-165796510),o=Cs(o,t,r,i,e[6],9,-1069501632),i=Cs(i,o,t,r,e[11],14,643717713),r=Cs(r,i,o,t,e[0],20,-373897302),t=Cs(t,r,i,o,e[5],5,-701558691),o=Cs(o,t,r,i,e[10],9,38016083),i=Cs(i,o,t,r,e[15],14,-660478335),r=Cs(r,i,o,t,e[4],20,-405537848),t=Cs(t,r,i,o,e[9],5,568446438),o=Cs(o,t,r,i,e[14],9,-1019803690),i=Cs(i,o,t,r,e[3],14,-187363961),r=Cs(r,i,o,t,e[8],20,1163531501),t=Cs(t,r,i,o,e[13],5,-1444681467),o=Cs(o,t,r,i,e[2],9,-51403784),i=Cs(i,o,t,r,e[7],14,1735328473),t=Ps(t,r=Cs(r,i,o,t,e[12],20,-1926607734),i,o,e[5],4,-378558),o=Ps(o,t,r,i,e[8],11,-2022574463),i=Ps(i,o,t,r,e[11],16,1839030562),r=Ps(r,i,o,t,e[14],23,-35309556),t=Ps(t,r,i,o,e[1],4,-1530992060),o=Ps(o,t,r,i,e[4],11,1272893353),i=Ps(i,o,t,r,e[7],16,-155497632),r=Ps(r,i,o,t,e[10],23,-1094730640),t=Ps(t,r,i,o,e[13],4,681279174),o=Ps(o,t,r,i,e[0],11,-358537222),i=Ps(i,o,t,r,e[3],16,-722521979),r=Ps(r,i,o,t,e[6],23,76029189),t=Ps(t,r,i,o,e[9],4,-640364487),o=Ps(o,t,r,i,e[12],11,-421815835),i=Ps(i,o,t,r,e[15],16,530742520),t=Is(t,r=Ps(r,i,o,t,e[2],23,-995338651),i,o,e[0],6,-198630844),o=Is(o,t,r,i,e[7],10,1126891415),i=Is(i,o,t,r,e[14],15,-1416354905),r=Is(r,i,o,t,e[5],21,-57434055),t=Is(t,r,i,o,e[12],6,1700485571),o=Is(o,t,r,i,e[3],10,-1894986606),i=Is(i,o,t,r,e[10],15,-1051523),r=Is(r,i,o,t,e[1],21,-2054922799),t=Is(t,r,i,o,e[8],6,1873313359),o=Is(o,t,r,i,e[15],10,-30611744),i=Is(i,o,t,r,e[6],15,-1560198380),r=Is(r,i,o,t,e[13],21,1309151649),t=Is(t,r,i,o,e[4],6,-145523070),o=Is(o,t,r,i,e[11],10,-1120210379),i=Is(i,o,t,r,e[2],15,718787259),r=Is(r,i,o,t,e[9],21,-343485551),n[0]=sh(t,n[0]),n[1]=sh(r,n[1]),n[2]=sh(i,n[2]),n[3]=sh(o,n[3])}function Rw(n,e,t,r,i,o){return e=sh(sh(e,n),sh(r,o)),sh(e<<i|e>>>32-i,t)}function Ms(n,e,t,r,i,o,a){return Rw(e&t|~e&r,n,e,i,o,a)}function Cs(n,e,t,r,i,o,a){return Rw(e&r|t&~r,n,e,i,o,a)}function Ps(n,e,t,r,i,o,a){return Rw(e^t^r,n,e,i,o,a)}function Is(n,e,t,r,i,o,a){return Rw(t^(e|~r),n,e,i,o,a)}function FH(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)Z2(r,gle(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(Z2(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,Z2(r,i),r}function gle(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}m0=Jn.atob.bind(Jn),VC=Jn.btoa.bind(Jn);var n4="0123456789abcdef".split("");function vle(n){for(var e="",t=0;t<4;t++)e+=n4[n>>8*t+4&15]+n4[n>>8*t&15];return e}function yle(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function GC(n){return FH(n).map(yle).join("")}var xle=(function(n){for(var e=0;e<n.length;e++)n[e]=vle(n[e]);return n.join("")})(FH("hello"))!="5d41402abc4b2a76b9719d911017c592";function sh(n,e){if(xle){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function qC(n,e){var t,r,i,o;if(n!==t){for(var a=(i=n,o=1+(256/n.length>>0),new Array(o+1).join(i)),s=[],l=0;l<256;l++)s[l]=l;var u=0;for(l=0;l<256;l++){var c=s[l];u=(u+c+a.charCodeAt(l))%256,s[l]=s[u],s[u]=c}t=n,r=s}else s=r;var f=e.length,h=0,p=0,v="";for(l=0;l<f;l++)p=(p+(c=s[h=(h+1)%256]))%256,s[h]=s[p],s[p]=c,a=s[(s[h]+s[p])%256],v+=String.fromCharCode(e.charCodeAt(l)^a);return v}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var r4={print:4,modify:8,copy:16,"annot-forms":32};function Xm(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach((function(s){if(r4.perm!==void 0)throw new Error("Invalid permission: "+s);i+=r4[s]})),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(e+this.padding).substr(0,32),a=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,a),this.P=-(1+(255^i)),this.encryptionKey=GC(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=qC(this.encryptionKey,this.padding)}function Ym(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=n[r]}return e}function i4(n){if(Ci(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var o=Math.random().toString(35);return e[t][o]=[r,!!i],o},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var o in e[t]){var a=e[t][o];try{a[0].apply(n,r)}catch(s){Jn.console&&Ui.error("jsPDF PubSub Error",s.message,s)}a[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Y0(n){if(!(this instanceof Y0))return new Y0(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function UH(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function ih(n,e,t,r,i){if(!(this instanceof ih))return new ih(n,e,t,r,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,UH.call(this,r,i)}function yp(n,e,t,r,i){if(!(this instanceof yp))return new yp(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,UH.call(this,r,i)}function Vn(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],o=arguments[3],a=[],s=1,l=16,u="S",c=null;Ci(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,i=n.format||i,o=n.compress||n.compressPdf||o,(c=n.encryption||null)!==null&&(c.userPassword=c.userPassword||"",c.ownerPassword=c.ownerPassword||"",c.userPermissions=c.userPermissions||[]),s=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(l=n.floatPrecision),u=n.defaultPathOperation||"S"),a=n.filters||(o===!0?["FlateEncode"]:a),r=r||"mm",t=(""+(t||"P")).toLowerCase();var f=n.putOnlyUsedFonts||!1,h={},p={internal:{},__private__:{}};p.__private__.PubSub=i4;var v="1.3",S=p.__private__.getPdfVersion=function(){return v};p.__private__.setPdfVersion=function(H){v=H};var y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return y};var _=p.__private__.getPageFormat=function(H){return y[H]};i=i||"a4";var w={COMPAT:"compat",ADVANCED:"advanced"},A=w.COMPAT;function E(){this.saveGraphicsState(),ye(new gn(it,0,0,-it,0,Xl()*it).toString()+" cm"),this.setFontSize(this.getFontSize()/it),u="n",A=w.ADVANCED}function P(){this.restoreGraphicsState(),u="S",A=w.COMPAT}var O=p.__private__.combineFontStyleAndFontWeight=function(H,fe){if(H=="bold"&&fe=="normal"||H=="bold"&&fe==400||H=="normal"&&fe=="italic"||H=="bold"&&fe=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return fe&&(H=fe==400||fe==="normal"?H==="italic"?"italic":"normal":fe!=700&&fe!=="bold"||H!=="normal"?(fe==700?"bold":fe)+""+H:"bold"),H};p.advancedAPI=function(H){var fe=A===w.COMPAT;return fe&&E.call(this),typeof H!="function"||(H(this),fe&&P.call(this)),this},p.compatAPI=function(H){var fe=A===w.ADVANCED;return fe&&P.call(this),typeof H!="function"||(H(this),fe&&E.call(this)),this},p.isAdvancedAPI=function(){return A===w.ADVANCED};var L,D=function(H){if(A!==w.ADVANCED)throw new Error(H+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},F=p.roundToPrecision=p.__private__.roundToPrecision=function(H,fe){var Le=e||fe;if(isNaN(H)||isNaN(Le))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return H.toFixed(Le).replace(/0+$/,"")};L=p.hpf=p.__private__.hpf=typeof l=="number"?function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.hpf");return F(H,l)}:l==="smart"?function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.hpf");return F(H,H>-1&&H<1?16:5)}:function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.hpf");return F(H,16)};var U=p.f2=p.__private__.f2=function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.f2");return F(H,2)},k=p.__private__.f3=function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.f3");return F(H,3)},z=p.scale=p.__private__.scale=function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.scale");return A===w.COMPAT?H*it:A===w.ADVANCED?H:void 0},W=function(H){return A===w.COMPAT?Xl()-H:A===w.ADVANCED?H:void 0},j=function(H){return z(W(H))};p.__private__.setPrecision=p.setPrecision=function(H){typeof parseInt(H,10)=="number"&&(e=parseInt(H,10))};var se,Y="00000000000000000000000000000000",Q=p.__private__.getFileId=function(){return Y},X=p.__private__.setFileId=function(H){return Y=H!==void 0&&/^[a-fA-F0-9]{32}$/.test(H)?H.toUpperCase():Y.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),c!==null&&(wi=new Xm(c.userPermissions,c.userPassword,c.ownerPassword,Y)),Y};p.setFileId=function(H){return X(H),this},p.getFileId=function(){return Q()};var Z=p.__private__.convertDateToPDFDate=function(H){var fe=H.getTimezoneOffset(),Le=fe<0?"+":"-",qe=Math.floor(Math.abs(fe/60)),at=Math.abs(fe%60),At=[Le,te(qe),"'",te(at),"'"].join("");return["D:",H.getFullYear(),te(H.getMonth()+1),te(H.getDate()),te(H.getHours()),te(H.getMinutes()),te(H.getSeconds()),At].join("")},oe=p.__private__.convertPDFDateToDate=function(H){var fe=parseInt(H.substr(2,4),10),Le=parseInt(H.substr(6,2),10)-1,qe=parseInt(H.substr(8,2),10),at=parseInt(H.substr(10,2),10),At=parseInt(H.substr(12,2),10),Gt=parseInt(H.substr(14,2),10);return new Date(fe,Le,qe,at,At,Gt,0)},ee=p.__private__.setCreationDate=function(H){var fe;if(H===void 0&&(H=new Date),H instanceof Date)fe=Z(H);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(H))throw new Error("Invalid argument passed to jsPDF.setCreationDate");fe=H}return se=fe},G=p.__private__.getCreationDate=function(H){var fe=se;return H==="jsDate"&&(fe=oe(se)),fe};p.setCreationDate=function(H){return ee(H),this},p.getCreationDate=function(H){return G(H)};var ne,te=p.__private__.padd2=function(H){return("0"+parseInt(H)).slice(-2)},de=p.__private__.padd2Hex=function(H){return("00"+(H=H.toString())).substr(H.length)},me=0,be=[],Ie=[],Ee=0,Xe=[],tt=[],Te=!1,Je=Ie,Se=function(){me=0,Ee=0,Ie=[],be=[],Xe=[],Po=Cr(),uo=Cr()};p.__private__.setCustomOutputDestination=function(H){Te=!0,Je=H};var Ge=function(H){Te||(Je=H)};p.__private__.resetCustomOutputDestination=function(){Te=!1,Je=Ie};var ye=p.__private__.out=function(H){return H=H.toString(),Ee+=H.length+1,Je.push(H),Je},Ct=p.__private__.write=function(H){return ye(arguments.length===1?H.toString():Array.prototype.join.call(arguments," "))},ft=p.__private__.getArrayBuffer=function(H){for(var fe=H.length,Le=new ArrayBuffer(fe),qe=new Uint8Array(Le);fe--;)qe[fe]=H.charCodeAt(fe);return Le},mt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return mt};var lt=n.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(H){return lt=A===w.ADVANCED?H/it:H,this};var ve,le=p.__private__.getFontSize=p.getFontSize=function(){return A===w.COMPAT?lt:lt*it},He=n.R2L||!1;p.__private__.setR2L=p.setR2L=function(H){return He=H,this},p.__private__.getR2L=p.getR2L=function(){return He};var rt,vt=p.__private__.setZoomMode=function(H){var fe=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(H))ve=H;else if(isNaN(H)){if(fe.indexOf(H)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+H+'" is not recognized.');ve=H}else ve=parseInt(H,10)};p.__private__.getZoomMode=function(){return ve};var ht,qt=p.__private__.setPageMode=function(H){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(H)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+H+'" is not recognized.');rt=H};p.__private__.getPageMode=function(){return rt};var Ft=p.__private__.setLayoutMode=function(H){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(H)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+H+'" is not recognized.');ht=H};p.__private__.getLayoutMode=function(){return ht},p.__private__.setDisplayMode=p.setDisplayMode=function(H,fe,Le){return vt(H),Ft(fe),qt(Le),this};var Rt={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(H){if(Object.keys(Rt).indexOf(H)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Rt[H]},p.__private__.getDocumentProperties=function(){return Rt},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(H){for(var fe in Rt)Rt.hasOwnProperty(fe)&&H[fe]&&(Rt[fe]=H[fe]);return this},p.__private__.setDocumentProperty=function(H,fe){if(Object.keys(Rt).indexOf(H)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Rt[H]=fe};var tn,it,Zt,Xt,un,Wt={},mn={},fn=[],nn={},Ke={},ot={},pt={},It=null,Ht=0,Lt=[],rn=new i4(p),ir=n.hotfixes||[],$n={},Gn={},Br=[],gn=function H(fe,Le,qe,at,At,Gt){if(!(this instanceof H))return new H(fe,Le,qe,at,At,Gt);isNaN(fe)&&(fe=1),isNaN(Le)&&(Le=0),isNaN(qe)&&(qe=0),isNaN(at)&&(at=1),isNaN(At)&&(At=0),isNaN(Gt)&&(Gt=0),this._matrix=[fe,Le,qe,at,At,Gt]};Object.defineProperty(gn.prototype,"sx",{get:function(){return this._matrix[0]},set:function(H){this._matrix[0]=H}}),Object.defineProperty(gn.prototype,"shy",{get:function(){return this._matrix[1]},set:function(H){this._matrix[1]=H}}),Object.defineProperty(gn.prototype,"shx",{get:function(){return this._matrix[2]},set:function(H){this._matrix[2]=H}}),Object.defineProperty(gn.prototype,"sy",{get:function(){return this._matrix[3]},set:function(H){this._matrix[3]=H}}),Object.defineProperty(gn.prototype,"tx",{get:function(){return this._matrix[4]},set:function(H){this._matrix[4]=H}}),Object.defineProperty(gn.prototype,"ty",{get:function(){return this._matrix[5]},set:function(H){this._matrix[5]=H}}),Object.defineProperty(gn.prototype,"a",{get:function(){return this._matrix[0]},set:function(H){this._matrix[0]=H}}),Object.defineProperty(gn.prototype,"b",{get:function(){return this._matrix[1]},set:function(H){this._matrix[1]=H}}),Object.defineProperty(gn.prototype,"c",{get:function(){return this._matrix[2]},set:function(H){this._matrix[2]=H}}),Object.defineProperty(gn.prototype,"d",{get:function(){return this._matrix[3]},set:function(H){this._matrix[3]=H}}),Object.defineProperty(gn.prototype,"e",{get:function(){return this._matrix[4]},set:function(H){this._matrix[4]=H}}),Object.defineProperty(gn.prototype,"f",{get:function(){return this._matrix[5]},set:function(H){this._matrix[5]=H}}),Object.defineProperty(gn.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(gn.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(gn.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(gn.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),gn.prototype.join=function(H){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(L).join(H)},gn.prototype.multiply=function(H){var fe=H.sx*this.sx+H.shy*this.shx,Le=H.sx*this.shy+H.shy*this.sy,qe=H.shx*this.sx+H.sy*this.shx,at=H.shx*this.shy+H.sy*this.sy,At=H.tx*this.sx+H.ty*this.shx+this.tx,Gt=H.tx*this.shy+H.ty*this.sy+this.ty;return new gn(fe,Le,qe,at,At,Gt)},gn.prototype.decompose=function(){var H=this.sx,fe=this.shy,Le=this.shx,qe=this.sy,at=this.tx,At=this.ty,Gt=Math.sqrt(H*H+fe*fe),ln=(H/=Gt)*Le+(fe/=Gt)*qe;Le-=H*ln,qe-=fe*ln;var Rn=Math.sqrt(Le*Le+qe*qe);return ln/=Rn,H*(qe/=Rn)<fe*(Le/=Rn)&&(H=-H,fe=-fe,ln=-ln,Gt=-Gt),{scale:new gn(Gt,0,0,Rn,0,0),translate:new gn(1,0,0,1,at,At),rotate:new gn(H,fe,-fe,H,0,0),skew:new gn(1,0,ln,1,0,0)}},gn.prototype.toString=function(H){return this.join(" ")},gn.prototype.inversed=function(){var H=this.sx,fe=this.shy,Le=this.shx,qe=this.sy,at=this.tx,At=this.ty,Gt=1/(H*qe-fe*Le),ln=qe*Gt,Rn=-fe*Gt,Xn=-Le*Gt,zn=H*Gt;return new gn(ln,Rn,Xn,zn,-ln*at-Xn*At,-Rn*at-zn*At)},gn.prototype.applyToPoint=function(H){var fe=H.x*this.sx+H.y*this.shx+this.tx,Le=H.x*this.shy+H.y*this.sy+this.ty;return new Wo(fe,Le)},gn.prototype.applyToRectangle=function(H){var fe=this.applyToPoint(H),Le=this.applyToPoint(new Wo(H.x+H.w,H.y+H.h));return new ml(fe.x,fe.y,Le.x-fe.x,Le.y-fe.y)},gn.prototype.clone=function(){var H=this.sx,fe=this.shy,Le=this.shx,qe=this.sy,at=this.tx,At=this.ty;return new gn(H,fe,Le,qe,at,At)},p.Matrix=gn;var Di=p.matrixMult=function(H,fe){return fe.multiply(H)},vi=new gn(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=vi;var Er=function(H,fe){if(!Ke[H]){var Le=(fe instanceof ih?"Sh":"P")+(Object.keys(nn).length+1).toString(10);fe.id=Le,Ke[H]=Le,nn[Le]=fe,rn.publish("addPattern",fe)}};p.ShadingPattern=ih,p.TilingPattern=yp,p.addShadingPattern=function(H,fe){return D("addShadingPattern()"),Er(H,fe),this},p.beginTilingPattern=function(H){D("beginTilingPattern()"),vs(H.boundingBox[0],H.boundingBox[1],H.boundingBox[2]-H.boundingBox[0],H.boundingBox[3]-H.boundingBox[1],H.matrix)},p.endTilingPattern=function(H,fe){D("endTilingPattern()"),fe.stream=tt[ne].join(`
`),Er(H,fe),rn.publish("endTilingPattern",fe),Br.pop().restore()};var xr=p.__private__.newObject=function(){var H=Cr();return zr(H,!0),H},Cr=p.__private__.newObjectDeferred=function(){return me++,be[me]=function(){return Ee},me},zr=function(H,fe){return fe=typeof fe=="boolean"&&fe,be[H]=Ee,fe&&ye(H+" 0 obj"),H},Un=p.__private__.newAdditionalObject=function(){var H={objId:Cr(),content:""};return Xe.push(H),H},Po=Cr(),uo=Cr(),ue=p.__private__.decodeColorString=function(H){var fe=H.split(" ");if(fe.length!==2||fe[1]!=="g"&&fe[1]!=="G")fe.length===5&&(fe[4]==="k"||fe[4]==="K")&&(fe=[(1-fe[0])*(1-fe[3]),(1-fe[1])*(1-fe[3]),(1-fe[2])*(1-fe[3]),"r"]);else{var Le=parseFloat(fe[0]);fe=[Le,Le,Le,"r"]}for(var qe="#",at=0;at<3;at++)qe+=("0"+Math.floor(255*parseFloat(fe[at])).toString(16)).slice(-2);return qe},we=p.__private__.encodeColorString=function(H){var fe;typeof H=="string"&&(H={ch1:H});var Le=H.ch1,qe=H.ch2,at=H.ch3,At=H.ch4,Gt=H.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Le=="string"&&Le.charAt(0)!=="#"){var ln=new kH(Le);if(ln.ok)Le=ln.toHex();else if(!/^\d*\.?\d*$/.test(Le))throw new Error('Invalid color "'+Le+'" passed to jsPDF.encodeColorString.')}if(typeof Le=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Le)&&(Le="#"+Le[1]+Le[1]+Le[2]+Le[2]+Le[3]+Le[3]),typeof Le=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Le)){var Rn=parseInt(Le.substr(1),16);Le=Rn>>16&255,qe=Rn>>8&255,at=255&Rn}if(qe===void 0||At===void 0&&Le===qe&&qe===at)if(typeof Le=="string")fe=Le+" "+Gt[0];else switch(H.precision){case 2:fe=U(Le/255)+" "+Gt[0];break;case 3:default:fe=k(Le/255)+" "+Gt[0]}else if(At===void 0||Ci(At)==="object"){if(At&&!isNaN(At.a)&&At.a===0)return fe=["1.","1.","1.",Gt[1]].join(" ");if(typeof Le=="string")fe=[Le,qe,at,Gt[1]].join(" ");else switch(H.precision){case 2:fe=[U(Le/255),U(qe/255),U(at/255),Gt[1]].join(" ");break;default:case 3:fe=[k(Le/255),k(qe/255),k(at/255),Gt[1]].join(" ")}}else if(typeof Le=="string")fe=[Le,qe,at,At,Gt[2]].join(" ");else switch(H.precision){case 2:fe=[U(Le),U(qe),U(at),U(At),Gt[2]].join(" ");break;case 3:default:fe=[k(Le),k(qe),k(at),k(At),Gt[2]].join(" ")}return fe},ze=p.__private__.getFilters=function(){return a},ct=p.__private__.putStream=function(H){var fe=(H=H||{}).data||"",Le=H.filters||ze(),qe=H.alreadyAppliedFilters||[],at=H.addLength1||!1,At=fe.length,Gt=H.objectId,ln=function(Vi){return Vi};if(c!==null&&Gt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");c!==null&&(ln=wi.encryptor(Gt,0));var Rn={};Le===!0&&(Le=["FlateEncode"]);var Xn=H.additionalKeyValues||[],zn=(Rn=Vn.API.processDataByFilters!==void 0?Vn.API.processDataByFilters(fe,Le):{data:fe,reverseChain:[]}).reverseChain+(Array.isArray(qe)?qe.join(" "):qe.toString());if(Rn.data.length!==0&&(Xn.push({key:"Length",value:Rn.data.length}),at===!0&&Xn.push({key:"Length1",value:At})),zn.length!=0)if(zn.split("/").length-1==1)Xn.push({key:"Filter",value:zn});else{Xn.push({key:"Filter",value:"["+zn+"]"});for(var Yn=0;Yn<Xn.length;Yn+=1)if(Xn[Yn].key==="DecodeParms"){for(var Kr=[],Wr=0;Wr<Rn.reverseChain.split("/").length-1;Wr+=1)Kr.push("null");Kr.push(Xn[Yn].value),Xn[Yn].value="["+Kr.join(" ")+"]"}}ye("<<");for(var ni=0;ni<Xn.length;ni++)ye("/"+Xn[ni].key+" "+Xn[ni].value);ye(">>"),Rn.data.length!==0&&(ye("stream"),ye(ln(Rn.data)),ye("endstream"))},xt=p.__private__.putPage=function(H){var fe=H.number,Le=H.data,qe=H.objId,at=H.contentsObjId;zr(qe,!0),ye("<</Type /Page"),ye("/Parent "+H.rootDictionaryObjId+" 0 R"),ye("/Resources "+H.resourceDictionaryObjId+" 0 R"),ye("/MediaBox ["+parseFloat(L(H.mediaBox.bottomLeftX))+" "+parseFloat(L(H.mediaBox.bottomLeftY))+" "+L(H.mediaBox.topRightX)+" "+L(H.mediaBox.topRightY)+"]"),H.cropBox!==null&&ye("/CropBox ["+L(H.cropBox.bottomLeftX)+" "+L(H.cropBox.bottomLeftY)+" "+L(H.cropBox.topRightX)+" "+L(H.cropBox.topRightY)+"]"),H.bleedBox!==null&&ye("/BleedBox ["+L(H.bleedBox.bottomLeftX)+" "+L(H.bleedBox.bottomLeftY)+" "+L(H.bleedBox.topRightX)+" "+L(H.bleedBox.topRightY)+"]"),H.trimBox!==null&&ye("/TrimBox ["+L(H.trimBox.bottomLeftX)+" "+L(H.trimBox.bottomLeftY)+" "+L(H.trimBox.topRightX)+" "+L(H.trimBox.topRightY)+"]"),H.artBox!==null&&ye("/ArtBox ["+L(H.artBox.bottomLeftX)+" "+L(H.artBox.bottomLeftY)+" "+L(H.artBox.topRightX)+" "+L(H.artBox.topRightY)+"]"),typeof H.userUnit=="number"&&H.userUnit!==1&&ye("/UserUnit "+H.userUnit),rn.publish("putPage",{objId:qe,pageContext:Lt[fe],pageNumber:fe,page:Le}),ye("/Contents "+at+" 0 R"),ye(">>"),ye("endobj");var At=Le.join(`
`);return A===w.ADVANCED&&(At+=`
Q`),zr(at,!0),ct({data:At,filters:ze(),objectId:at}),ye("endobj"),qe},ae=p.__private__.putPages=function(){var H,fe,Le=[];for(H=1;H<=Ht;H++)Lt[H].objId=Cr(),Lt[H].contentsObjId=Cr();for(H=1;H<=Ht;H++)Le.push(xt({number:H,data:tt[H],objId:Lt[H].objId,contentsObjId:Lt[H].contentsObjId,mediaBox:Lt[H].mediaBox,cropBox:Lt[H].cropBox,bleedBox:Lt[H].bleedBox,trimBox:Lt[H].trimBox,artBox:Lt[H].artBox,userUnit:Lt[H].userUnit,rootDictionaryObjId:Po,resourceDictionaryObjId:uo}));zr(Po,!0),ye("<</Type /Pages");var qe="/Kids [";for(fe=0;fe<Ht;fe++)qe+=Le[fe]+" 0 R ";ye(qe+"]"),ye("/Count "+Ht),ye(">>"),ye("endobj"),rn.publish("postPutPages")},Ce=function(H){rn.publish("putFont",{font:H,out:ye,newObject:xr,putStream:ct}),H.isAlreadyPutted!==!0&&(H.objectNumber=xr(),ye("<<"),ye("/Type /Font"),ye("/BaseFont /"+Ym(H.postScriptName)),ye("/Subtype /Type1"),typeof H.encoding=="string"&&ye("/Encoding /"+H.encoding),ye("/FirstChar 32"),ye("/LastChar 255"),ye(">>"),ye("endobj"))},De=function(){for(var H in Wt)Wt.hasOwnProperty(H)&&(f===!1||f===!0&&h.hasOwnProperty(H))&&Ce(Wt[H])},Ue=function(H){H.objectNumber=xr();var fe=[];fe.push({key:"Type",value:"/XObject"}),fe.push({key:"Subtype",value:"/Form"}),fe.push({key:"BBox",value:"["+[L(H.x),L(H.y),L(H.x+H.width),L(H.y+H.height)].join(" ")+"]"}),fe.push({key:"Matrix",value:"["+H.matrix.toString()+"]"});var Le=H.pages[1].join(`
`);ct({data:Le,additionalKeyValues:fe,objectId:H.objectNumber}),ye("endobj")},Re=function(){for(var H in $n)$n.hasOwnProperty(H)&&Ue($n[H])},Ne=function(H,fe){var Le,qe=[],at=1/(fe-1);for(Le=0;Le<1;Le+=at)qe.push(Le);if(qe.push(1),H[0].offset!=0){var At={offset:0,color:H[0].color};H.unshift(At)}if(H[H.length-1].offset!=1){var Gt={offset:1,color:H[H.length-1].color};H.push(Gt)}for(var ln="",Rn=0,Xn=0;Xn<qe.length;Xn++){for(Le=qe[Xn];Le>H[Rn+1].offset;)Rn++;var zn=H[Rn].offset,Yn=(Le-zn)/(H[Rn+1].offset-zn),Kr=H[Rn].color,Wr=H[Rn+1].color;ln+=de(Math.round((1-Yn)*Kr[0]+Yn*Wr[0]).toString(16))+de(Math.round((1-Yn)*Kr[1]+Yn*Wr[1]).toString(16))+de(Math.round((1-Yn)*Kr[2]+Yn*Wr[2]).toString(16))}return ln.trim()},Be=function(H,fe){fe||(fe=21);var Le=xr(),qe=Ne(H.colors,fe),at=[];at.push({key:"FunctionType",value:"0"}),at.push({key:"Domain",value:"[0.0 1.0]"}),at.push({key:"Size",value:"["+fe+"]"}),at.push({key:"BitsPerSample",value:"8"}),at.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),at.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ct({data:qe,additionalKeyValues:at,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Le}),ye("endobj"),H.objectNumber=xr(),ye("<< /ShadingType "+H.type),ye("/ColorSpace /DeviceRGB");var At="/Coords ["+L(parseFloat(H.coords[0]))+" "+L(parseFloat(H.coords[1]))+" ";H.type===2?At+=L(parseFloat(H.coords[2]))+" "+L(parseFloat(H.coords[3])):At+=L(parseFloat(H.coords[2]))+" "+L(parseFloat(H.coords[3]))+" "+L(parseFloat(H.coords[4]))+" "+L(parseFloat(H.coords[5])),ye(At+="]"),H.matrix&&ye("/Matrix ["+H.matrix.toString()+"]"),ye("/Function "+Le+" 0 R"),ye("/Extend [true true]"),ye(">>"),ye("endobj")},Et=function(H,fe){var Le=Cr(),qe=xr();fe.push({resourcesOid:Le,objectOid:qe}),H.objectNumber=qe;var at=[];at.push({key:"Type",value:"/Pattern"}),at.push({key:"PatternType",value:"1"}),at.push({key:"PaintType",value:"1"}),at.push({key:"TilingType",value:"1"}),at.push({key:"BBox",value:"["+H.boundingBox.map(L).join(" ")+"]"}),at.push({key:"XStep",value:L(H.xStep)}),at.push({key:"YStep",value:L(H.yStep)}),at.push({key:"Resources",value:Le+" 0 R"}),H.matrix&&at.push({key:"Matrix",value:"["+H.matrix.toString()+"]"}),ct({data:H.stream,additionalKeyValues:at,objectId:H.objectNumber}),ye("endobj")},ut=function(H){var fe;for(fe in nn)nn.hasOwnProperty(fe)&&(nn[fe]instanceof ih?Be(nn[fe]):nn[fe]instanceof yp&&Et(nn[fe],H))},St=function(H){for(var fe in H.objectNumber=xr(),ye("<<"),H)switch(fe){case"opacity":ye("/ca "+U(H[fe]));break;case"stroke-opacity":ye("/CA "+U(H[fe]))}ye(">>"),ye("endobj")},Bt=function(){var H;for(H in ot)ot.hasOwnProperty(H)&&St(ot[H])},Ot=function(){for(var H in ye("/XObject <<"),$n)$n.hasOwnProperty(H)&&$n[H].objectNumber>=0&&ye("/"+H+" "+$n[H].objectNumber+" 0 R");rn.publish("putXobjectDict"),ye(">>")},Qt=function(){wi.oid=xr(),ye("<<"),ye("/Filter /Standard"),ye("/V "+wi.v),ye("/R "+wi.r),ye("/U <"+wi.toHexString(wi.U)+">"),ye("/O <"+wi.toHexString(wi.O)+">"),ye("/P "+wi.P),ye(">>"),ye("endobj")},cn=function(){for(var H in ye("/Font <<"),Wt)Wt.hasOwnProperty(H)&&(f===!1||f===!0&&h.hasOwnProperty(H))&&ye("/"+H+" "+Wt[H].objectNumber+" 0 R");ye(">>")},Kt=function(){if(Object.keys(nn).length>0){for(var H in ye("/Shading <<"),nn)nn.hasOwnProperty(H)&&nn[H]instanceof ih&&nn[H].objectNumber>=0&&ye("/"+H+" "+nn[H].objectNumber+" 0 R");rn.publish("putShadingPatternDict"),ye(">>")}},_n=function(H){if(Object.keys(nn).length>0){for(var fe in ye("/Pattern <<"),nn)nn.hasOwnProperty(fe)&&nn[fe]instanceof p.TilingPattern&&nn[fe].objectNumber>=0&&nn[fe].objectNumber<H&&ye("/"+fe+" "+nn[fe].objectNumber+" 0 R");rn.publish("putTilingPatternDict"),ye(">>")}},Vt=function(){if(Object.keys(ot).length>0){var H;for(H in ye("/ExtGState <<"),ot)ot.hasOwnProperty(H)&&ot[H].objectNumber>=0&&ye("/"+H+" "+ot[H].objectNumber+" 0 R");rn.publish("putGStateDict"),ye(">>")}},kt=function(H){zr(H.resourcesOid,!0),ye("<<"),ye("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),cn(),Kt(),_n(H.objectOid),Vt(),Ot(),ye(">>"),ye("endobj")},Mn=function(){var H=[];De(),Bt(),Re(),ut(H),rn.publish("putResources"),H.forEach(kt),kt({resourcesOid:uo,objectOid:Number.MAX_SAFE_INTEGER}),rn.publish("postPutResources")},Sn=function(){rn.publish("putAdditionalObjects");for(var H=0;H<Xe.length;H++){var fe=Xe[H];zr(fe.objId,!0),ye(fe.content),ye("endobj")}rn.publish("postPutAdditionalObjects")},gr=function(H){mn[H.fontName]=mn[H.fontName]||{},mn[H.fontName][H.fontStyle]=H.id},vr=function(H,fe,Le,qe,at){var At={id:"F"+(Object.keys(Wt).length+1).toString(10),postScriptName:H,fontName:fe,fontStyle:Le,encoding:qe,isStandardFont:at||!1,metadata:{}};return rn.publish("addFont",{font:At,instance:this}),Wt[At.id]=At,gr(At),At.id},fr=function(H){for(var fe=0,Le=mt.length;fe<Le;fe++){var qe=vr.call(this,H[fe][0],H[fe][1],H[fe][2],mt[fe][3],!0);f===!1&&(h[qe]=!0);var at=H[fe][0].split("-");gr({id:qe,fontName:at[0],fontStyle:at[1]||""})}rn.publish("addFonts",{fonts:Wt,dictionary:mn})},Fn=function(H){return H.foo=function(){try{return H.apply(this,arguments)}catch(qe){var fe=qe.stack||"";~fe.indexOf(" at ")&&(fe=fe.split(" at ")[1]);var Le="Error in function "+fe.split(`
`)[0].split("<")[0]+": "+qe.message;if(!Jn.console)throw new Error(Le);Jn.console.error(Le,qe),Jn.alert&&alert(Le)}},H.foo.bar=H,H.foo},kn=function(H,fe){var Le,qe,at,At,Gt,ln,Rn,Xn,zn;if(at=(fe=fe||{}).sourceEncoding||"Unicode",Gt=fe.outputEncoding,(fe.autoencode||Gt)&&Wt[tn].metadata&&Wt[tn].metadata[at]&&Wt[tn].metadata[at].encoding&&(At=Wt[tn].metadata[at].encoding,!Gt&&Wt[tn].encoding&&(Gt=Wt[tn].encoding),!Gt&&At.codePages&&(Gt=At.codePages[0]),typeof Gt=="string"&&(Gt=At[Gt]),Gt)){for(Rn=!1,ln=[],Le=0,qe=H.length;Le<qe;Le++)(Xn=Gt[H.charCodeAt(Le)])?ln.push(String.fromCharCode(Xn)):ln.push(H[Le]),ln[Le].charCodeAt(0)>>8&&(Rn=!0);H=ln.join("")}for(Le=H.length;Rn===void 0&&Le!==0;)H.charCodeAt(Le-1)>>8&&(Rn=!0),Le--;if(!Rn)return H;for(ln=fe.noBOM?[]:[254,255],Le=0,qe=H.length;Le<qe;Le++){if((zn=(Xn=H.charCodeAt(Le))>>8)>>8)throw new Error("Character at position "+Le+" of string '"+H+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ln.push(zn),ln.push(Xn-(zn<<8))}return String.fromCharCode.apply(void 0,ln)},Pn=p.__private__.pdfEscape=p.pdfEscape=function(H,fe){return kn(H,fe).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},jn=p.__private__.beginPage=function(H){tt[++Ht]=[],Lt[Ht]={objId:0,contentsObjId:0,userUnit:Number(s),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(H[0]),topRightY:Number(H[1])}},Pr(Ht),Ge(tt[ne])},er=function(H,fe){var Le,qe,at;switch(t=fe||t,typeof H=="string"&&(Le=_(H.toLowerCase()),Array.isArray(Le)&&(qe=Le[0],at=Le[1])),Array.isArray(H)&&(qe=H[0]*it,at=H[1]*it),isNaN(qe)&&(qe=i[0],at=i[1]),(qe>14400||at>14400)&&(Ui.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),qe=Math.min(14400,qe),at=Math.min(14400,at)),i=[qe,at],t.substr(0,1)){case"l":at>qe&&(i=[at,qe]);break;case"p":qe>at&&(i=[at,qe])}jn(i),Yu(Xu),ye(yo),pl!==0&&ye(pl+" J"),Ro!==0&&ye(Ro+" j"),rn.publish("addPage",{pageNumber:Ht})},Si=function(H){H>0&&H<=Ht&&(tt.splice(H,1),Lt.splice(H,1),Ht--,ne>Ht&&(ne=Ht),this.setPage(ne))},Pr=function(H){H>0&&H<=Ht&&(ne=H)},Io=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return tt.length-1},oa=function(H,fe,Le){var qe,at=void 0;return Le=Le||{},H=H!==void 0?H:Wt[tn].fontName,fe=fe!==void 0?fe:Wt[tn].fontStyle,qe=H.toLowerCase(),mn[qe]!==void 0&&mn[qe][fe]!==void 0?at=mn[qe][fe]:mn[H]!==void 0&&mn[H][fe]!==void 0?at=mn[H][fe]:Le.disableWarning===!1&&Ui.warn("Unable to look up font label for font '"+H+"', '"+fe+"'. Refer to getFontList() for available fonts."),at||Le.noFallback||(at=mn.times[fe])==null&&(at=mn.times.normal),at},Ir=p.__private__.putInfo=function(){var H=xr(),fe=function(qe){return qe};for(var Le in c!==null&&(fe=wi.encryptor(H,0)),ye("<<"),ye("/Producer ("+Pn(fe("jsPDF "+Vn.version))+")"),Rt)Rt.hasOwnProperty(Le)&&Rt[Le]&&ye("/"+Le.substr(0,1).toUpperCase()+Le.substr(1)+" ("+Pn(fe(Rt[Le]))+")");ye("/CreationDate ("+Pn(fe(se))+")"),ye(">>"),ye("endobj")},ll=p.__private__.putCatalog=function(H){var fe=(H=H||{}).rootDictionaryObjId||Po;switch(xr(),ye("<<"),ye("/Type /Catalog"),ye("/Pages "+fe+" 0 R"),ve||(ve="fullwidth"),ve){case"fullwidth":ye("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ye("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ye("/OpenAction [3 0 R /Fit]");break;case"original":ye("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Le=""+ve;Le.substr(Le.length-1)==="%"&&(ve=parseInt(ve)/100),typeof ve=="number"&&ye("/OpenAction [3 0 R /XYZ null null "+U(ve)+"]")}switch(ht||(ht="continuous"),ht){case"continuous":ye("/PageLayout /OneColumn");break;case"single":ye("/PageLayout /SinglePage");break;case"two":case"twoleft":ye("/PageLayout /TwoColumnLeft");break;case"tworight":ye("/PageLayout /TwoColumnRight")}rt&&ye("/PageMode /"+rt),rn.publish("putCatalog"),ye(">>"),ye("endobj")},Wu=p.__private__.putTrailer=function(){ye("trailer"),ye("<<"),ye("/Size "+(me+1)),ye("/Root "+me+" 0 R"),ye("/Info "+(me-1)+" 0 R"),c!==null&&ye("/Encrypt "+wi.oid+" 0 R"),ye("/ID [ <"+Y+"> <"+Y+"> ]"),ye(">>")},Rf=p.__private__.putHeader=function(){ye("%PDF-"+v),ye("%")},yd=p.__private__.putXRef=function(){var H="0000000000";ye("xref"),ye("0 "+(me+1)),ye("0000000000 65535 f ");for(var fe=1;fe<=me;fe++)typeof be[fe]=="function"?ye((H+be[fe]()).slice(-10)+" 00000 n "):be[fe]!==void 0?ye((H+be[fe]).slice(-10)+" 00000 n "):ye("0000000000 00000 n ")},hs=p.__private__.buildDocument=function(){Se(),Ge(Ie),rn.publish("buildDocument"),Rf(),ae(),Sn(),Mn(),c!==null&&Qt(),Ir(),ll();var H=Ee;return yd(),Wu(),ye("startxref"),ye(""+H),ye("%%EOF"),Ge(tt[ne]),Ie.join(`
`)},Vl=p.__private__.getBlob=function(H){return new Blob([ft(H)],{type:"application/pdf"})},ps=p.output=p.__private__.output=Fn((function(H,fe){switch(typeof(fe=fe||{})=="string"?fe={filename:fe}:fe.filename=fe.filename||"generated.pdf",H){case void 0:return hs();case"save":p.save(fe.filename);break;case"arraybuffer":return ft(hs());case"blob":return Vl(hs());case"bloburi":case"bloburl":if(Jn.URL!==void 0&&typeof Jn.URL.createObjectURL=="function")return Jn.URL&&Jn.URL.createObjectURL(Vl(hs()))||void 0;Ui.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Le="",qe=hs();try{Le=VC(qe)}catch{Le=VC(unescape(encodeURIComponent(qe)))}return"data:application/pdf;filename="+fe.filename+";base64,"+Le;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Jn)==="[object Window]"){var at="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",At=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';fe.pdfObjectUrl&&(at=fe.pdfObjectUrl,At="");var Gt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+at+'"'+At+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(fe)+");<\/script></body></html>",ln=Jn.open();return ln!==null&&ln.document.write(Gt),ln}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Jn)==="[object Window]"){var Rn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(fe.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+fe.filename+'" width="500px" height="400px" /></body></html>',Xn=Jn.open();if(Xn!==null){Xn.document.write(Rn);var zn=this;Xn.document.documentElement.querySelector("#pdfViewer").onload=function(){Xn.document.title=fe.filename,Xn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(zn.output("bloburl"))}}return Xn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Jn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Yn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",fe)+'"></iframe></body></html>',Kr=Jn.open();if(Kr!==null&&(Kr.document.write(Yn),Kr.document.title=fe.filename),Kr||typeof safari>"u")return Kr;break;case"datauri":case"dataurl":return Jn.document.location.href=this.output("datauristring",fe);default:return null}})),ju=function(H){return Array.isArray(ir)===!0&&ir.indexOf(H)>-1};switch(r){case"pt":it=1;break;case"mm":it=72/25.4;break;case"cm":it=72/2.54;break;case"in":it=72;break;case"px":it=ju("px_scaling")==1?.75:96/72;break;case"pc":case"em":it=12;break;case"ex":it=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);it=r}var wi=null;ee(),X();var ur=function(H){return c!==null?wi.encryptor(H,0):function(fe){return fe}},ms=p.__private__.getPageInfo=p.getPageInfo=function(H){if(isNaN(H)||H%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Lt[H].objId,pageNumber:H,pageContext:Lt[H]}},Bn=p.__private__.getPageInfoByObjId=function(H){if(isNaN(H)||H%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var fe in Lt)if(Lt[fe].objId===H)break;return ms(fe)},hu=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Lt[ne].objId,pageNumber:ne,pageContext:Lt[ne]}};p.addPage=function(){return er.apply(this,arguments),this},p.setPage=function(){return Pr.apply(this,arguments),Ge.call(this,tt[ne]),this},p.insertPage=function(H){return this.addPage(),this.movePage(ne,H),this},p.movePage=function(H,fe){var Le,qe;if(H>fe){Le=tt[H],qe=Lt[H];for(var at=H;at>fe;at--)tt[at]=tt[at-1],Lt[at]=Lt[at-1];tt[fe]=Le,Lt[fe]=qe,this.setPage(fe)}else if(H<fe){Le=tt[H],qe=Lt[H];for(var At=H;At<fe;At++)tt[At]=tt[At+1],Lt[At]=Lt[At+1];tt[fe]=Le,Lt[fe]=qe,this.setPage(fe)}return this},p.deletePage=function(){return Si.apply(this,arguments),this},p.__private__.text=p.text=function(H,fe,Le,qe,at){var At,Gt,ln,Rn,Xn,zn,Yn,Kr,Wr,ni=(qe=qe||{}).scope||this;if(typeof H=="number"&&typeof fe=="number"&&(typeof Le=="string"||Array.isArray(Le))){var Vi=Le;Le=fe,fe=H,H=Vi}if(arguments[3]instanceof gn?(D("The transform parameter of text() with a Matrix value"),Wr=at):(ln=arguments[4],Rn=arguments[5],Ci(Yn=arguments[3])==="object"&&Yn!==null||(typeof ln=="string"&&(Rn=ln,ln=null),typeof Yn=="string"&&(Rn=Yn,Yn=null),typeof Yn=="number"&&(ln=Yn,Yn=null),qe={flags:Yn,angle:ln,align:Rn})),isNaN(fe)||isNaN(Le)||H==null)throw new Error("Invalid arguments passed to jsPDF.text");if(H.length===0)return ni;var xo="",ns=!1,Sa=typeof qe.lineHeightFactor=="number"?qe.lineHeightFactor:dl,ki=ni.internal.scaleFactor;function co(jr){return jr=jr.split("	").join(Array(qe.TabLen||9).join(" ")),Pn(jr,Yn)}function ri(jr){for(var tr,Ii=jr.concat(),Ri=[],sa=Ii.length;sa--;)typeof(tr=Ii.shift())=="string"?Ri.push(tr):Array.isArray(jr)&&(tr.length===1||tr[1]===void 0&&tr[2]===void 0)?Ri.push(tr[0]):Ri.push([tr[0],tr[1],tr[2]]);return Ri}function yl(jr,tr){var Ii;if(typeof jr=="string")Ii=tr(jr)[0];else if(Array.isArray(jr)){for(var Ri,sa,Lo=jr.concat(),la=[],is=Lo.length;is--;)typeof(Ri=Lo.shift())=="string"?la.push(tr(Ri)[0]):Array.isArray(Ri)&&typeof Ri[0]=="string"&&(sa=tr(Ri[0],Ri[1],Ri[2]),la.push([sa[0],sa[1],sa[2]]));Ii=la}return Ii}var jo=!1,Zu=!0;if(typeof H=="string")jo=!0;else if(Array.isArray(H)){var Qu=H.concat();Gt=[];for(var Yl,Zi=Qu.length;Zi--;)(typeof(Yl=Qu.shift())!="string"||Array.isArray(Yl)&&typeof Yl[0]!="string")&&(Zu=!1);jo=Zu}if(jo===!1)throw new Error('Type of text must be string or Array. "'+H+'" is not recognized.');typeof H=="string"&&(H=H.match(/[\r?\n]/)?H.split(/\r\n|\r|\n/g):[H]);var ec=lt/ni.internal.scaleFactor,xl=ec*(Sa-1);switch(qe.baseline){case"bottom":Le-=xl;break;case"top":Le+=ec-xl;break;case"hanging":Le+=ec-2*xl;break;case"middle":Le+=ec/2-xl}if((zn=qe.maxWidth||0)>0&&(typeof H=="string"?H=ni.splitTextToSize(H,zn):Object.prototype.toString.call(H)==="[object Array]"&&(H=H.reduce((function(jr,tr){return jr.concat(ni.splitTextToSize(tr,zn))}),[]))),At={text:H,x:fe,y:Le,options:qe,mutex:{pdfEscape:Pn,activeFontKey:tn,fonts:Wt,activeFontSize:lt}},rn.publish("preProcessText",At),H=At.text,ln=(qe=At.options).angle,!(Wr instanceof gn)&&ln&&typeof ln=="number"){ln*=Math.PI/180,qe.rotationDirection===0&&(ln=-ln),A===w.ADVANCED&&(ln=-ln);var Us=Math.cos(ln),vu=Math.sin(ln);Wr=new gn(Us,vu,-vu,Us,0,0)}else ln&&ln instanceof gn&&(Wr=ln);A!==w.ADVANCED||Wr||(Wr=vi),(Xn=qe.charSpace||hl)!==void 0&&(xo+=L(z(Xn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Kr=qe.horizontalScale)!==void 0&&(xo+=L(100*Kr)+` Tz
`),qe.lang;var _o=-1,_l=qe.renderingMode!==void 0?qe.renderingMode:qe.stroke,Sl=ni.internal.getCurrentPageInfo().pageContext;switch(_l){case 0:case!1:case"fill":_o=0;break;case 1:case!0:case"stroke":_o=1;break;case 2:case"fillThenStroke":_o=2;break;case 3:case"invisible":_o=3;break;case 4:case"fillAndAddForClipping":_o=4;break;case 5:case"strokeAndAddPathForClipping":_o=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":_o=6;break;case 7:case"addToPathForClipping":_o=7}var Lf=Sl.usedRenderingMode!==void 0?Sl.usedRenderingMode:-1;_o!==-1?xo+=_o+` Tr
`:Lf!==-1&&(xo+=`0 Tr
`),_o!==-1&&(Sl.usedRenderingMode=_o),Rn=qe.align||"left";var So,Wc=lt*Sa,yu=ni.internal.pageSize.getWidth(),aa=Wt[tn];Xn=qe.charSpace||hl,zn=qe.maxWidth||0,Yn=Object.assign({autoencode:!0,noBOM:!0},qe.flags);var Va=[];if(Object.prototype.toString.call(H)==="[object Array]"){var No;Gt=ri(H),Rn!=="left"&&(So=Gt.map((function(jr){return ni.getStringUnitWidth(jr,{font:aa,charSpace:Xn,fontSize:lt,doKerning:!1})*lt/ki})));var Qi,Bs=0;if(Rn==="right"){fe-=So[0],H=[],Zi=Gt.length;for(var wa=0;wa<Zi;wa++)wa===0?(Qi=Fs(fe),No=Ki(Le)):(Qi=z(Bs-So[wa]),No=-Wc),H.push([Gt[wa],Qi,No]),Bs=So[wa]}else if(Rn==="center"){fe-=So[0]/2,H=[],Zi=Gt.length;for(var wl=0;wl<Zi;wl++)wl===0?(Qi=Fs(fe),No=Ki(Le)):(Qi=z((Bs-So[wl])/2),No=-Wc),H.push([Gt[wl],Qi,No]),Bs=So[wl]}else if(Rn==="left"){H=[],Zi=Gt.length;for(var xu=0;xu<Zi;xu++)H.push(Gt[xu])}else{if(Rn!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');H=[],Zi=Gt.length,zn=zn!==0?zn:yu;for(var Or=0;Or<Zi;Or++)No=Or===0?Ki(Le):-Wc,Qi=Or===0?Fs(fe):0,Or<Zi-1?Va.push(L(z((zn-So[Or])/(Gt[Or].split(" ").length-1)))):Va.push(0),H.push([Gt[Or],Qi,No])}}var Kl=typeof qe.R2L=="boolean"?qe.R2L:He;Kl===!0&&(H=yl(H,(function(jr,tr,Ii){return[jr.split("").reverse().join(""),tr,Ii]}))),At={text:H,x:fe,y:Le,options:qe,mutex:{pdfEscape:Pn,activeFontKey:tn,fonts:Wt,activeFontSize:lt}},rn.publish("postProcessText",At),H=At.text,ns=At.mutex.isHex||!1;var $o=Wt[tn].encoding;$o!=="WinAnsiEncoding"&&$o!=="StandardEncoding"||(H=yl(H,(function(jr,tr,Ii){return[co(jr),tr,Ii]}))),Gt=ri(H),H=[];for(var Ga,ba,eo,rs=0,ii=1,Pi=Array.isArray(Gt[0])?ii:rs,bi="",_u=function(jr,tr,Ii){var Ri="";return Ii instanceof gn?(Ii=typeof qe.angle=="number"?Di(Ii,new gn(1,0,0,1,jr,tr)):Di(new gn(1,0,0,1,jr,tr),Ii),A===w.ADVANCED&&(Ii=Di(new gn(1,0,0,-1,0,0),Ii)),Ri=Ii.join(" ")+` Tm
`):Ri=L(jr)+" "+L(tr)+` Td
`,Ri},to=0;to<Gt.length;to++){switch(bi="",Pi){case ii:eo=(ns?"<":"(")+Gt[to][0]+(ns?">":")"),Ga=parseFloat(Gt[to][1]),ba=parseFloat(Gt[to][2]);break;case rs:eo=(ns?"<":"(")+Gt[to]+(ns?">":")"),Ga=Fs(fe),ba=Ki(Le)}Va!==void 0&&Va[to]!==void 0&&(bi=Va[to]+` Tw
`),to===0?H.push(bi+_u(Ga,ba,Wr)+eo):Pi===rs?H.push(bi+eo):Pi===ii&&H.push(bi+_u(Ga,ba,Wr)+eo)}H=Pi===rs?H.join(` Tj
T* `):H.join(` Tj
`),H+=` Tj
`;var Aa=`BT
/`;return Aa+=tn+" "+lt+` Tf
`,Aa+=L(lt*Sa)+` TL
`,Aa+=Ji+`
`,Aa+=xo,Aa+=H,ye(Aa+="ET"),h[tn]=!0,ni};var ul=p.__private__.clip=p.clip=function(H){return ye(H==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return ul("evenodd")},p.__private__.discardPath=p.discardPath=function(){return ye("n"),this};var cl=p.__private__.isValidStyle=function(H){var fe=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(H)!==-1&&(fe=!0),fe};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(H){return cl(H)&&(u=H),this};var zi=p.__private__.getStyle=p.getStyle=function(H){var fe=u;switch(H){case"D":case"S":fe="S";break;case"F":fe="f";break;case"FD":case"DF":fe="B";break;case"f":case"f*":case"B":case"B*":fe=H}return fe},fl=p.close=function(){return ye("h"),this};p.stroke=function(){return ye("S"),this},p.fill=function(H){return Vc("f",H),this},p.fillEvenOdd=function(H){return Vc("f*",H),this},p.fillStroke=function(H){return Vc("B",H),this},p.fillStrokeEvenOdd=function(H){return Vc("B*",H),this};var Vc=function(H,fe){Ci(fe)==="object"?$u(fe,H):ye(H)},pu=function(H){H===null||A===w.ADVANCED&&H===void 0||(H=zi(H),ye(H))};function Gc(H,fe,Le,qe,at){var At=new yp(fe||this.boundingBox,Le||this.xStep,qe||this.yStep,this.gState,at||this.matrix);At.stream=this.stream;var Gt=H+"$$"+this.cloneIndex+++"$$";return Er(Gt,At),At}var $u=function(H,fe){var Le=Ke[H.key],qe=nn[Le];if(qe instanceof ih)ye("q"),ye(gs(fe)),qe.gState&&p.setGState(qe.gState),ye(H.matrix.toString()+" cm"),ye("/"+Le+" sh"),ye("Q");else if(qe instanceof yp){var at=new gn(1,0,0,-1,0,Xl());H.matrix&&(at=at.multiply(H.matrix||vi),Le=Gc.call(qe,H.key,H.boundingBox,H.xStep,H.yStep,at).id),ye("q"),ye("/Pattern cs"),ye("/"+Le+" scn"),qe.gState&&p.setGState(qe.gState),ye(fe),ye("Q")}},gs=function(H){switch(H){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Gl=p.moveTo=function(H,fe){return ye(L(z(H))+" "+L(j(fe))+" m"),this},ks=p.lineTo=function(H,fe){return ye(L(z(H))+" "+L(j(fe))+" l"),this},Hi=p.curveTo=function(H,fe,Le,qe,at,At){return ye([L(z(H)),L(j(fe)),L(z(Le)),L(j(qe)),L(z(at)),L(j(At)),"c"].join(" ")),this};p.__private__.line=p.line=function(H,fe,Le,qe,at){if(isNaN(H)||isNaN(fe)||isNaN(Le)||isNaN(qe)||!cl(at))throw new Error("Invalid arguments passed to jsPDF.line");return A===w.COMPAT?this.lines([[Le-H,qe-fe]],H,fe,[1,1],at||"S"):this.lines([[Le-H,qe-fe]],H,fe,[1,1]).stroke()},p.__private__.lines=p.lines=function(H,fe,Le,qe,at,At){var Gt,ln,Rn,Xn,zn,Yn,Kr,Wr,ni,Vi,xo,ns;if(typeof H=="number"&&(ns=Le,Le=fe,fe=H,H=ns),qe=qe||[1,1],At=At||!1,isNaN(fe)||isNaN(Le)||!Array.isArray(H)||!Array.isArray(qe)||!cl(at)||typeof At!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Gl(fe,Le),Gt=qe[0],ln=qe[1],Xn=H.length,Vi=fe,xo=Le,Rn=0;Rn<Xn;Rn++)(zn=H[Rn]).length===2?(Vi=zn[0]*Gt+Vi,xo=zn[1]*ln+xo,ks(Vi,xo)):(Yn=zn[0]*Gt+Vi,Kr=zn[1]*ln+xo,Wr=zn[2]*Gt+Vi,ni=zn[3]*ln+xo,Vi=zn[4]*Gt+Vi,xo=zn[5]*ln+xo,Hi(Yn,Kr,Wr,ni,Vi,xo));return At&&fl(),pu(at),this},p.path=function(H){for(var fe=0;fe<H.length;fe++){var Le=H[fe],qe=Le.c;switch(Le.op){case"m":Gl(qe[0],qe[1]);break;case"l":ks(qe[0],qe[1]);break;case"c":Hi.apply(this,qe);break;case"h":fl()}}return this},p.__private__.rect=p.rect=function(H,fe,Le,qe,at){if(isNaN(H)||isNaN(fe)||isNaN(Le)||isNaN(qe)||!cl(at))throw new Error("Invalid arguments passed to jsPDF.rect");return A===w.COMPAT&&(qe=-qe),ye([L(z(H)),L(j(fe)),L(z(Le)),L(z(qe)),"re"].join(" ")),pu(at),this},p.__private__.triangle=p.triangle=function(H,fe,Le,qe,at,At,Gt){if(isNaN(H)||isNaN(fe)||isNaN(Le)||isNaN(qe)||isNaN(at)||isNaN(At)||!cl(Gt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Le-H,qe-fe],[at-Le,At-qe],[H-at,fe-At]],H,fe,[1,1],Gt,!0),this},p.__private__.roundedRect=p.roundedRect=function(H,fe,Le,qe,at,At,Gt){if(isNaN(H)||isNaN(fe)||isNaN(Le)||isNaN(qe)||isNaN(at)||isNaN(At)||!cl(Gt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ln=4/3*(Math.SQRT2-1);return at=Math.min(at,.5*Le),At=Math.min(At,.5*qe),this.lines([[Le-2*at,0],[at*ln,0,at,At-At*ln,at,At],[0,qe-2*At],[0,At*ln,-at*ln,At,-at,At],[2*at-Le,0],[-at*ln,0,-at,-At*ln,-at,-At],[0,2*At-qe],[0,-At*ln,at*ln,-At,at,-At]],H+at,fe,[1,1],Gt,!0),this},p.__private__.ellipse=p.ellipse=function(H,fe,Le,qe,at){if(isNaN(H)||isNaN(fe)||isNaN(Le)||isNaN(qe)||!cl(at))throw new Error("Invalid arguments passed to jsPDF.ellipse");var At=4/3*(Math.SQRT2-1)*Le,Gt=4/3*(Math.SQRT2-1)*qe;return Gl(H+Le,fe),Hi(H+Le,fe-Gt,H+At,fe-qe,H,fe-qe),Hi(H-At,fe-qe,H-Le,fe-Gt,H-Le,fe),Hi(H-Le,fe+Gt,H-At,fe+qe,H,fe+qe),Hi(H+At,fe+qe,H+Le,fe+Gt,H+Le,fe),pu(at),this},p.__private__.circle=p.circle=function(H,fe,Le,qe){if(isNaN(H)||isNaN(fe)||isNaN(Le)||!cl(qe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(H,fe,Le,Le,qe)},p.setFont=function(H,fe,Le){return Le&&(fe=O(fe,Le)),tn=oa(H,fe,{disableWarning:!1}),this};var Ba=p.__private__.getFont=p.getFont=function(){return Wt[oa.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var H,fe,Le={};for(H in mn)if(mn.hasOwnProperty(H))for(fe in Le[H]=[],mn[H])mn[H].hasOwnProperty(fe)&&Le[H].push(fe);return Le},p.addFont=function(H,fe,Le,qe,at){var At=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&At.indexOf(arguments[3])!==-1?at=arguments[3]:arguments[3]&&At.indexOf(arguments[3])==-1&&(Le=O(Le,qe)),at=at||"Identity-H",vr.call(this,H,fe,Le,at)};var dl,Xu=n.lineWidth||.200025,ql=p.__private__.getLineWidth=p.getLineWidth=function(){return Xu},Yu=p.__private__.setLineWidth=p.setLineWidth=function(H){return Xu=H,ye(L(z(H))+" w"),this};p.__private__.setLineDash=Vn.API.setLineDash=Vn.API.setLineDashPattern=function(H,fe){if(H=H||[],fe=fe||0,isNaN(fe)||!Array.isArray(H))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return H=H.map((function(Le){return L(z(Le))})).join(" "),fe=L(z(fe)),ye("["+H+"] "+fe+" d"),this};var xa=p.__private__.getLineHeight=p.getLineHeight=function(){return lt*dl};p.__private__.getLineHeight=p.getLineHeight=function(){return lt*dl};var Nf=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(H){return typeof(H=H||1.15)=="number"&&(dl=H),this},za=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return dl};Nf(n.lineHeight);var Fs=p.__private__.getHorizontalCoordinate=function(H){return z(H)},Ki=p.__private__.getVerticalCoordinate=function(H){return A===w.ADVANCED?H:Lt[ne].mediaBox.topRightY-Lt[ne].mediaBox.bottomLeftY-z(H)},Ku=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(H){return L(Fs(H))},Ha=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(H){return L(Ki(H))},yo=n.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return ue(yo)},p.__private__.setStrokeColor=p.setDrawColor=function(H,fe,Le,qe){return yo=we({ch1:H,ch2:fe,ch3:Le,ch4:qe,pdfColorType:"draw",precision:2}),ye(yo),this};var mu=n.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return ue(mu)},p.__private__.setFillColor=p.setFillColor=function(H,fe,Le,qe){return mu=we({ch1:H,ch2:fe,ch3:Le,ch4:qe,pdfColorType:"fill",precision:2}),ye(mu),this};var Ji=n.textColor||"0 g",Wl=p.__private__.getTextColor=p.getTextColor=function(){return ue(Ji)};p.__private__.setTextColor=p.setTextColor=function(H,fe,Le,qe){return Ji=we({ch1:H,ch2:fe,ch3:Le,ch4:qe,pdfColorType:"text",precision:3}),this};var hl=n.charSpace,jl=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(hl||0)};p.__private__.setCharSpace=p.setCharSpace=function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return hl=H,this};var pl=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(H){var fe=p.CapJoinStyles[H];if(fe===void 0)throw new Error("Line cap style of '"+H+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return pl=fe,ye(fe+" J"),this};var Ro=0;p.__private__.setLineJoin=p.setLineJoin=function(H){var fe=p.CapJoinStyles[H];if(fe===void 0)throw new Error("Line join style of '"+H+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ro=fe,ye(fe+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(H){if(H=H||0,isNaN(H))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ye(L(z(H))+" M"),this},p.GState=Y0,p.setGState=function(H){(H=typeof H=="string"?ot[pt[H]]:_a(null,H)).equals(It)||(ye("/"+H.id+" gs"),It=H)};var _a=function(H,fe){if(!H||!pt[H]){var Le=!1;for(var qe in ot)if(ot.hasOwnProperty(qe)&&ot[qe].equals(fe)){Le=!0;break}if(Le)fe=ot[qe];else{var at="GS"+(Object.keys(ot).length+1).toString(10);ot[at]=fe,fe.id=at}return H&&(pt[H]=fe.id),rn.publish("addGState",fe),fe}};p.addGState=function(H,fe){return _a(H,fe),this},p.saveGraphicsState=function(){return ye("q"),fn.push({key:tn,size:lt,color:Ji}),this},p.restoreGraphicsState=function(){ye("Q");var H=fn.pop();return tn=H.key,lt=H.size,Ji=H.color,It=null,this},p.setCurrentTransformationMatrix=function(H){return ye(H.toString()+" cm"),this},p.comment=function(H){return ye("#"+H),this};var Wo=function(H,fe){var Le=H||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Le},set:function(At){isNaN(At)||(Le=parseFloat(At))}});var qe=fe||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return qe},set:function(At){isNaN(At)||(qe=parseFloat(At))}});var at="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return at},set:function(At){at=At.toString()}}),this},ml=function(H,fe,Le,qe){Wo.call(this,H,fe),this.type="rect";var at=Le||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return at},set:function(Gt){isNaN(Gt)||(at=parseFloat(Gt))}});var At=qe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return At},set:function(Gt){isNaN(Gt)||(At=parseFloat(Gt))}}),this},Ju=function(){this.page=Ht,this.currentPage=ne,this.pages=tt.slice(0),this.pagesContext=Lt.slice(0),this.x=Zt,this.y=Xt,this.matrix=un,this.width=vl(ne),this.height=Xl(ne),this.outputDestination=Je,this.id="",this.objectNumber=-1};Ju.prototype.restore=function(){Ht=this.page,ne=this.currentPage,Lt=this.pagesContext,tt=this.pages,Zt=this.x,Xt=this.y,un=this.matrix,gu(ne,this.width),qc(ne,this.height),Je=this.outputDestination};var vs=function(H,fe,Le,qe,at){Br.push(new Ju),Ht=ne=0,tt=[],Zt=H,Xt=fe,un=at,jn([Le,qe])},gl=function(H){if(Gn[H])Br.pop().restore();else{var fe=new Ju,Le="Xo"+(Object.keys($n).length+1).toString(10);fe.id=Le,Gn[H]=Le,$n[Le]=fe,rn.publish("addFormObject",fe),Br.pop().restore()}};for(var $l in p.beginFormObject=function(H,fe,Le,qe,at){return vs(H,fe,Le,qe,at),this},p.endFormObject=function(H){return gl(H),this},p.doFormObject=function(H,fe){var Le=$n[Gn[H]];return ye("q"),ye(fe.toString()+" cm"),ye("/"+Le.id+" Do"),ye("Q"),this},p.getFormObject=function(H){var fe=$n[Gn[H]];return{x:fe.x,y:fe.y,width:fe.width,height:fe.height,matrix:fe.matrix}},p.save=function(H,fe){return H=H||"generated.pdf",(fe=fe||{}).returnPromise=fe.returnPromise||!1,fe.returnPromise===!1?(lp(Vl(hs()),H),typeof lp.unload=="function"&&Jn.setTimeout&&setTimeout(lp.unload,911),this):new Promise((function(Le,qe){try{var at=lp(Vl(hs()),H);typeof lp.unload=="function"&&Jn.setTimeout&&setTimeout(lp.unload,911),Le(at)}catch(At){qe(At.message)}}))},Vn.API)Vn.API.hasOwnProperty($l)&&($l==="events"&&Vn.API.events.length?(function(H,fe){var Le,qe,at;for(at=fe.length-1;at!==-1;at--)Le=fe[at][0],qe=fe[at][1],H.subscribe.apply(H,[Le].concat(typeof qe=="function"?[qe]:qe))})(rn,Vn.API.events):p[$l]=Vn.API[$l]);var vl=p.getPageWidth=function(H){return(Lt[H=H||ne].mediaBox.topRightX-Lt[H].mediaBox.bottomLeftX)/it},gu=p.setPageWidth=function(H,fe){Lt[H].mediaBox.topRightX=fe*it+Lt[H].mediaBox.bottomLeftX},Xl=p.getPageHeight=function(H){return(Lt[H=H||ne].mediaBox.topRightY-Lt[H].mediaBox.bottomLeftY)/it},qc=p.setPageHeight=function(H,fe){Lt[H].mediaBox.topRightY=fe*it+Lt[H].mediaBox.bottomLeftY};return p.internal={pdfEscape:Pn,getStyle:zi,getFont:Ba,getFontSize:le,getCharSpace:jl,getTextColor:Wl,getLineHeight:xa,getLineHeightFactor:za,getLineWidth:ql,write:Ct,getHorizontalCoordinate:Fs,getVerticalCoordinate:Ki,getCoordinateString:Ku,getVerticalCoordinateString:Ha,collections:{},newObject:xr,newAdditionalObject:Un,newObjectDeferred:Cr,newObjectDeferredBegin:zr,getFilters:ze,putStream:ct,events:rn,scaleFactor:it,pageSize:{getWidth:function(){return vl(ne)},setWidth:function(H){gu(ne,H)},getHeight:function(){return Xl(ne)},setHeight:function(H){qc(ne,H)}},encryptionOptions:c,encryption:wi,getEncryptor:ur,output:ps,getNumberOfPages:Io,pages:tt,out:ye,f2:U,f3:k,getPageInfo:ms,getPageInfoByObjId:Bn,getCurrentPageInfo:hu,getPDFVersion:S,Point:Wo,Rectangle:ml,Matrix:gn,hasHotfix:ju},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return vl(ne)},set:function(H){gu(ne,H)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Xl(ne)},set:function(H){qc(ne,H)},enumerable:!0,configurable:!0}),fr.call(p,mt),tn="F1",er(i,t),rn.publish("initialized"),p}Xm.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},Xm.prototype.toHexString=function(n){return n.split("").map((function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)})).join("")},Xm.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},Xm.prototype.processOwnerPassword=function(n,e){return qC(GC(e).substr(0,5),n)},Xm.prototype.encryptor=function(n,e){var t=GC(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return qC(t,r)}},Y0.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||Ci(n)!==Ci(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},Vn.API={events:[]},Vn.version="2.5.1";var Go=Vn.API,wI=1,Zp=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Bm=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},hr=function(n){return n.toFixed(2)},Jd=function(n){return n.toFixed(5)};Go.__acroform__={};var zl=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},o4=function(n){return n*wI},lf=function(n){var e=new zH,t=Tn.internal.getHeight(n)||0,r=Tn.internal.getWidth(n)||0;return e.BBox=[0,0,Number(hr(r)),Number(hr(t))],e},_le=Go.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},Sle=Go.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},wle=Go.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(n&1<<e)==0?0:1},ea=Go.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return wle(n,e-1)},ta=Go.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return _le(n,e-1)},na=Go.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Sle(n,e-1)},ble=Go.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],o=n[1],a=n[2],s=n[3],l={};return l.lowerLeft_X=t(i)||0,l.lowerLeft_Y=r(o+s)||0,l.upperRight_X=t(i+a)||0,l.upperRight_Y=r(o)||0,[Number(hr(l.lowerLeft_X)),Number(hr(l.lowerLeft_Y)),Number(hr(l.upperRight_X)),Number(hr(l.upperRight_Y))]},Ale=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=WC(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+hr(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=lf(n);return o.scope=n.scope,o.stream=e.join(`
`),o}},WC=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map((function(k){return k.split(`
`)})):i.map((function(k){return[k]}));var o=t,a=Tn.internal.getHeight(n)||0;a=a<0?-a:a;var s=Tn.internal.getWidth(n)||0;s=s<0?-s:s;var l=function(k,z,W){if(k+1<i.length){var j=z+" "+i[k+1][0];return Dx(j,n,W).width<=s-4}return!1};o++;e:for(;o>0;){e="",o--;var u,c,f=Dx("3",n,o).height,h=n.multiline?a-o:(a-f)/2,p=h+=2,v=0,S=0,y=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+Dx(e,n,o=12).width+", FieldWidth:"+s+`
`;break}for(var _="",w=0,A=0;A<i.length;A++)if(i.hasOwnProperty(A)){var E=!1;if(i[A].length!==1&&y!==i[A].length-1){if((f+2)*(w+2)+2>a)continue e;_+=i[A][y],E=!0,S=A,A--}else{_=(_+=i[A][y]+" ").substr(_.length-1)==" "?_.substr(0,_.length-1):_;var P=parseInt(A),O=l(P,_,o),L=A>=i.length-1;if(O&&!L){_+=" ",y=0;continue}if(O||L){if(L)S=P;else if(n.multiline&&(f+2)*(w+2)+2>a)continue e}else{if(!n.multiline||(f+2)*(w+2)+2>a)continue e;S=P}}for(var D="",F=v;F<=S;F++){var U=i[F];if(n.multiline){if(F===S){D+=U[y]+" ",y=(y+1)%U.length;continue}if(F===v){D+=U[U.length-1]+" ";continue}}D+=U[0]+" "}switch(D=D.substr(D.length-1)==" "?D.substr(0,D.length-1):D,c=Dx(D,n,o).width,n.textAlign){case"right":u=s-c-2;break;case"center":u=(s-c)/2;break;case"left":default:u=2}e+=hr(u)+" "+hr(p)+` Td
`,e+="("+Zp(D)+`) Tj
`,e+=-hr(u)+` 0 Td
`,p=-(o+2),c=0,v=E?S:S+1,w++,_=""}break}return r.text=e,r.fontSize=o,r},Dx=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},Ele={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Tle=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find((function(r){return r.type===t.type&&r.object===t.object}))===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},Mle=function(n,e){for(var t in n)if(n.hasOwnProperty(t)){var r=t,i=n[t];e.internal.newObjectDeferredBegin(i.objId,!0),Ci(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete n[r]}},Cle=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(Bc.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(Ele)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");wI=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new HH,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",(function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)})),n.internal.events.subscribe("buildDocument",(function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var o=r[i];o.objId=void 0,o.hasAnnotation&&Tle(o,t)}})(n)})),n.internal.events.subscribe("putCatalog",(function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)})),n.internal.events.subscribe("postPutPages",(function(t){(function(r,i){var o=!r;for(var a in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(a)){var s=r[a],l=[],u=s.Rect;if(s.Rect&&(s.Rect=ble(s.Rect,i)),i.internal.newObjectDeferredBegin(s.objId,!0),s.DA=Tn.createDefaultAppearanceStream(s),Ci(s)==="object"&&typeof s.getKeyValueListForStream=="function"&&(l=s.getKeyValueListForStream()),s.Rect=u,s.hasAppearanceStream&&!s.appearanceStreamContent){var c=Ale(s);l.push({key:"AP",value:"<</N "+c+">>"}),i.internal.acroformPlugin.xForms.push(c)}if(s.appearanceStreamContent){var f="";for(var h in s.appearanceStreamContent)if(s.appearanceStreamContent.hasOwnProperty(h)){var p=s.appearanceStreamContent[h];if(f+="/"+h+" ",f+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var a in p)if(p.hasOwnProperty(a)){var v=p[a];typeof v=="function"&&(v=v.call(i,s)),f+="/"+a+" "+v+" ",i.internal.acroformPlugin.xForms.indexOf(v)>=0||i.internal.acroformPlugin.xForms.push(v)}}else typeof(v=p)=="function"&&(v=v.call(i,s)),f+="/"+a+" "+v,i.internal.acroformPlugin.xForms.indexOf(v)>=0||i.internal.acroformPlugin.xForms.push(v);f+=">>"}l.push({key:"AP",value:`<<
`+f+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:s.objId}),i.internal.out("endobj")}o&&Mle(i.internal.acroformPlugin.xForms,i)})(t,n)})),n.internal.acroformPlugin.isInitialized=!0}},BH=Go.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(a){return a};if(Array.isArray(n)){for(var i="[",o=0;o<n.length;o++)switch(o!==0&&(i+=" "),Ci(n[o])){case"boolean":case"number":case"object":i+=n[o].toString();break;case"string":n[o].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),i+="("+Zp(r(n[o].toString()))+")"):i+=n[o].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Q2=function(n,e,t){var r=function(i){return i};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),n="("+Zp(r(n))+")"},hf=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};hf.prototype.toString=function(){return this.objId+" 0 R"},hf.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},hf.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter((function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"}));for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:BH(i,this.objId,this.scope)}):i instanceof hf?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var zH=function(){hf.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};zl(zH,hf);var HH=function(){hf.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Zp(t(n))+")"}},set:function(t){n=t}})};zl(HH,hf);var Bc=function n(){hf.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute F supplied.');e=_}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ea(e,3)},set:function(_){_?this.F=ta(e,3):this.F=na(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute Ff supplied.');t=_}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(_){r=_!==void 0?_:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(_){r[0]=_}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(_){r[1]=_}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(_){r[2]=_}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(_){r[3]=_}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(_){switch(_){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=_;break;default:throw new Error('Invalid value "'+_+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof Y_)return;o="FieldObject"+n.FieldNum++}var _=function(w){return w};return this.scope&&(_=this.scope.internal.getEncryptor(this.objId)),"("+Zp(_(o))+")"},set:function(_){o=_.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(_){o=_}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(_){a=_}});var s="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return s},set:function(_){s=_}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(_){l=_}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/wI:u},set:function(_){u=_}});var c="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return c},set:function(_){c=_}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof Y_||this instanceof fh))return Q2(f,this.objId,this.scope)},set:function(_){_=_.toString(),f=_}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Na?h:Q2(h,this.objId,this.scope)},set:function(_){_=_.toString(),h=this instanceof Na?_:_.substr(0,1)==="("?Bm(_.substr(1,_.length-2)):Bm(_)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Na?Bm(h.substr(1,h.length-1)):h},set:function(_){_=_.toString(),h=this instanceof Na?"/"+_:_}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(_){this.V=_}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Na?p:Q2(p,this.objId,this.scope)},set:function(_){_=_.toString(),p=this instanceof Na?_:_.substr(0,1)==="("?Bm(_.substr(1,_.length-2)):Bm(_)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Na?Bm(p.substr(1,p.length-1)):p},set:function(_){_=_.toString(),p=this instanceof Na?"/"+_:_}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var v,S=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return S},set:function(_){_=!!_,S=_}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(v)return v},set:function(_){v=_}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ea(this.Ff,1)},set:function(_){_?this.Ff=ta(this.Ff,1):this.Ff=na(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ea(this.Ff,2)},set:function(_){_?this.Ff=ta(this.Ff,2):this.Ff=na(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ea(this.Ff,3)},set:function(_){_?this.Ff=ta(this.Ff,3):this.Ff=na(this.Ff,3)}});var y=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(y!==null)return y},set:function(_){if([0,1,2].indexOf(_)===-1)throw new Error('Invalid value "'+_+'" for attribute Q supplied.');y=_}}),Object.defineProperty(this,"textAlign",{get:function(){var _;switch(y){case 0:default:_="left";break;case 1:_="center";break;case 2:_="right"}return _},configurable:!0,enumerable:!0,set:function(_){switch(_){case"right":case 2:y=2;break;case"center":case 1:y=1;break;case"left":case 0:default:y=0}}})};zl(Bc,hf);var Pp=function(){Bc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return BH(e,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=(function(o,a,s){s||(s=1);for(var l,u=[];l=a.exec(o);)u.push(l[s]);return u})(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ea(this.Ff,18)},set:function(t){t?this.Ff=ta(this.Ff,18):this.Ff=na(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ea(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=ta(this.Ff,19):this.Ff=na(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ea(this.Ff,20)},set:function(t){t?(this.Ff=ta(this.Ff,20),e.sort()):this.Ff=na(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ea(this.Ff,22)},set:function(t){t?this.Ff=ta(this.Ff,22):this.Ff=na(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ea(this.Ff,23)},set:function(t){t?this.Ff=ta(this.Ff,23):this.Ff=na(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ea(this.Ff,27)},set:function(t){t?this.Ff=ta(this.Ff,27):this.Ff=na(this.Ff,27)}}),this.hasAppearanceStream=!1};zl(Pp,Bc);var Ip=function(){Pp.call(this),this.fontName="helvetica",this.combo=!1};zl(Ip,Pp);var Rp=function(){Ip.call(this),this.combo=!0};zl(Rp,Ip);var g0=function(){Rp.call(this),this.edit=!0};zl(g0,Rp);var Na=function(){Bc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ea(this.Ff,15)},set:function(t){t?this.Ff=ta(this.Ff,15):this.Ff=na(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ea(this.Ff,16)},set:function(t){t?this.Ff=ta(this.Ff,16):this.Ff=na(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ea(this.Ff,17)},set:function(t){t?this.Ff=ta(this.Ff,17):this.Ff=na(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ea(this.Ff,26)},set:function(t){t?this.Ff=ta(this.Ff,26):this.Ff=na(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(o){return o};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+Zp(t(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){Ci(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};zl(Na,Bc);var v0=function(){Na.call(this),this.pushButton=!0};zl(v0,Na);var Np=function(){Na.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};zl(Np,Na);var Y_=function(){var n,e;Bc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(s){return s};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var o,a=[];for(o in a.push("<<"),r)a.push("/"+o+" ("+Zp(i(r[o]))+")");return a.push(">>"),a.join(`
`)},set:function(i){Ci(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Tn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};zl(Y_,Bc),Np.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},Np.prototype.createOption=function(n){var e=new Y_;return e.Parent=this,e.optionName=n,this.Kids.push(e),Ple.call(this.scope,e),e};var y0=function(){Na.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Tn.CheckBox.createAppearanceStream()};zl(y0,Na);var fh=function(){Bc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ea(this.Ff,13)},set:function(e){e?this.Ff=ta(this.Ff,13):this.Ff=na(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ea(this.Ff,21)},set:function(e){e?this.Ff=ta(this.Ff,21):this.Ff=na(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ea(this.Ff,23)},set:function(e){e?this.Ff=ta(this.Ff,23):this.Ff=na(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ea(this.Ff,24)},set:function(e){e?this.Ff=ta(this.Ff,24):this.Ff=na(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ea(this.Ff,25)},set:function(e){e?this.Ff=ta(this.Ff,25):this.Ff=na(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ea(this.Ff,26)},set:function(e){e?this.Ff=ta(this.Ff,26):this.Ff=na(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};zl(fh,Bc);var x0=function(){fh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ea(this.Ff,14)},set:function(n){n?this.Ff=ta(this.Ff,14):this.Ff=na(this.Ff,14)}}),this.password=!0};zl(x0,fh);var Tn={CheckBox:{createAppearanceStream:function(){return{N:{On:Tn.CheckBox.YesNormal},D:{On:Tn.CheckBox.YesPushDown,Off:Tn.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=lf(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),o=WC(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+hr(Tn.internal.getWidth(n))+" "+hr(Tn.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+hr(o.fontSize)+" Tf "+i),t.push("BT"),t.push(o.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=lf(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],o=Tn.internal.getHeight(n),a=Tn.internal.getWidth(n),s=WC(n,n.caption);return i.push("1 g"),i.push("0 0 "+hr(a)+" "+hr(o)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+hr(a-1)+" "+hr(o-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+hr(s.fontSize)+" Tf "+r),i.push(s.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=lf(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+hr(Tn.internal.getWidth(n))+" "+hr(Tn.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:Tn.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=Tn.RadioButton.Circle.YesNormal,e.D[n]=Tn.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=lf(n);e.scope=n.scope;var t=[],r=Tn.internal.getWidth(n)<=Tn.internal.getHeight(n)?Tn.internal.getWidth(n)/4:Tn.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Tn.internal.Bezier_C,o=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Jd(Tn.internal.getWidth(n)/2)+" "+Jd(Tn.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=lf(n);e.scope=n.scope;var t=[],r=Tn.internal.getWidth(n)<=Tn.internal.getHeight(n)?Tn.internal.getWidth(n)/4:Tn.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*Tn.internal.Bezier_C).toFixed(5)),a=Number((r*Tn.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Jd(Tn.internal.getWidth(n)/2)+" "+Jd(Tn.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),t.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),t.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),t.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Jd(Tn.internal.getWidth(n)/2)+" "+Jd(Tn.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),t.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),t.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),t.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=lf(n);e.scope=n.scope;var t=[],r=Tn.internal.getWidth(n)<=Tn.internal.getHeight(n)?Tn.internal.getWidth(n)/4:Tn.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*Tn.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Jd(Tn.internal.getWidth(n)/2)+" "+Jd(Tn.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),t.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),t.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),t.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:Tn.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=Tn.RadioButton.Cross.YesNormal,e.D[n]=Tn.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=lf(n);e.scope=n.scope;var t=[],r=Tn.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+hr(Tn.internal.getWidth(n)-2)+" "+hr(Tn.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(hr(r.x1.x)+" "+hr(r.x1.y)+" m"),t.push(hr(r.x2.x)+" "+hr(r.x2.y)+" l"),t.push(hr(r.x4.x)+" "+hr(r.x4.y)+" m"),t.push(hr(r.x3.x)+" "+hr(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=lf(n);e.scope=n.scope;var t=Tn.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+hr(Tn.internal.getWidth(n))+" "+hr(Tn.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+hr(Tn.internal.getWidth(n)-2)+" "+hr(Tn.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(hr(t.x1.x)+" "+hr(t.x1.y)+" m"),r.push(hr(t.x2.x)+" "+hr(t.x2.y)+" l"),r.push(hr(t.x4.x)+" "+hr(t.x4.y)+" m"),r.push(hr(t.x3.x)+" "+hr(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=lf(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+hr(Tn.internal.getWidth(n))+" "+hr(Tn.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};Tn.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=Tn.internal.getWidth(n),t=Tn.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},Tn.internal.getWidth=function(n){var e=0;return Ci(n)==="object"&&(e=o4(n.Rect[2])),e},Tn.internal.getHeight=function(n){var e=0;return Ci(n)==="object"&&(e=o4(n.Rect[3])),e};var Ple=Go.addField=function(n){if(Cle(this,n),!(n instanceof Bc))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};Go.AcroFormChoiceField=Pp,Go.AcroFormListBox=Ip,Go.AcroFormComboBox=Rp,Go.AcroFormEditBox=g0,Go.AcroFormButton=Na,Go.AcroFormPushButton=v0,Go.AcroFormRadioButton=Np,Go.AcroFormCheckBox=y0,Go.AcroFormTextField=fh,Go.AcroFormPasswordField=x0,Go.AcroFormAppearance=Tn,Go.AcroForm={ChoiceField:Pp,ListBox:Ip,ComboBox:Rp,EditBox:g0,Button:Na,PushButton:v0,RadioButton:Np,CheckBox:y0,TextField:fh,PasswordField:x0,Appearance:Tn},Vn.AcroForm={ChoiceField:Pp,ListBox:Ip,ComboBox:Rp,EditBox:g0,Button:Na,PushButton:v0,RadioButton:Np,CheckBox:y0,TextField:fh,PasswordField:x0,Appearance:Tn};var Ile=Vn.AcroForm;function VH(n){return n.reduce((function(e,t,r){return e[t]=r,e}),{})}(function(n){n.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=n.__addimage__.getImageFileTypeByImageData=function(k,z){var W,j,se,Y,Q,X=e;if((z=z||e)==="RGBA"||k.data!==void 0&&k.data instanceof Uint8ClampedArray&&"height"in k&&"width"in k)return"RGBA";if(O(k))for(Q in t)for(se=t[Q],W=0;W<se.length;W+=1){for(Y=!0,j=0;j<se[W].length;j+=1)if(se[W][j]!==void 0&&se[W][j]!==k[j]){Y=!1;break}if(Y===!0){X=Q;break}}else for(Q in t)for(se=t[Q],W=0;W<se.length;W+=1){for(Y=!0,j=0;j<se[W].length;j+=1)if(se[W][j]!==void 0&&se[W][j]!==k.charCodeAt(j)){Y=!1;break}if(Y===!0){X=Q;break}}return X===e&&z!==e&&(X=z),X},i=function k(z){for(var W=this.internal.write,j=this.internal.putStream,se=(0,this.internal.getFilters)();se.indexOf("FlateEncode")!==-1;)se.splice(se.indexOf("FlateEncode"),1);z.objectId=this.internal.newObject();var Y=[];if(Y.push({key:"Type",value:"/XObject"}),Y.push({key:"Subtype",value:"/Image"}),Y.push({key:"Width",value:z.width}),Y.push({key:"Height",value:z.height}),z.colorSpace===y.INDEXED?Y.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(z.palette.length/3-1)+" "+("sMask"in z&&z.sMask!==void 0?z.objectId+2:z.objectId+1)+" 0 R]"}):(Y.push({key:"ColorSpace",value:"/"+z.colorSpace}),z.colorSpace===y.DEVICE_CMYK&&Y.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Y.push({key:"BitsPerComponent",value:z.bitsPerComponent}),"decodeParameters"in z&&z.decodeParameters!==void 0&&Y.push({key:"DecodeParms",value:"<<"+z.decodeParameters+">>"}),"transparency"in z&&Array.isArray(z.transparency)){for(var Q="",X=0,Z=z.transparency.length;X<Z;X++)Q+=z.transparency[X]+" "+z.transparency[X]+" ";Y.push({key:"Mask",value:"["+Q+"]"})}z.sMask!==void 0&&Y.push({key:"SMask",value:z.objectId+1+" 0 R"});var oe=z.filter!==void 0?["/"+z.filter]:void 0;if(j({data:z.data,additionalKeyValues:Y,alreadyAppliedFilters:oe,objectId:z.objectId}),W("endobj"),"sMask"in z&&z.sMask!==void 0){var ee="/Predictor "+z.predictor+" /Colors 1 /BitsPerComponent "+z.bitsPerComponent+" /Columns "+z.width,G={width:z.width,height:z.height,colorSpace:"DeviceGray",bitsPerComponent:z.bitsPerComponent,decodeParameters:ee,data:z.sMask};"filter"in z&&(G.filter=z.filter),k.call(this,G)}if(z.colorSpace===y.INDEXED){var ne=this.internal.newObject();j({data:D(new Uint8Array(z.palette)),objectId:ne}),W("endobj")}},o=function(){var k=this.internal.collections.addImage_images;for(var z in k)i.call(this,k[z])},a=function(){var k,z=this.internal.collections.addImage_images,W=this.internal.write;for(var j in z)W("/I"+(k=z[j]).index,k.objectId,"0","R")},s=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",a))},l=function(){var k=this.internal.collections.addImage_images;return s.call(this),k},u=function(){return Object.keys(this.internal.collections.addImage_images).length},c=function(k){return typeof n["process"+k.toUpperCase()]=="function"},f=function(k){return Ci(k)==="object"&&k.nodeType===1},h=function(k,z){if(k.nodeName==="IMG"&&k.hasAttribute("src")){var W=""+k.getAttribute("src");if(W.indexOf("data:image/")===0)return m0(unescape(W).split("base64,").pop());var j=n.loadFile(W,!0);if(j!==void 0)return j}if(k.nodeName==="CANVAS"){if(k.width===0||k.height===0)throw new Error("Given canvas must have data. Canvas width: "+k.width+", height: "+k.height);var se;switch(z){case"PNG":se="image/png";break;case"WEBP":se="image/webp";break;case"JPEG":case"JPG":default:se="image/jpeg"}return m0(k.toDataURL(se,1).split("base64,").pop())}},p=function(k){var z=this.internal.collections.addImage_images;if(z){for(var W in z)if(k===z[W].alias)return z[W]}},v=function(k,z,W){return k||z||(k=-96,z=-96),k<0&&(k=-1*W.width*72/k/this.internal.scaleFactor),z<0&&(z=-1*W.height*72/z/this.internal.scaleFactor),k===0&&(k=z*W.width/W.height),z===0&&(z=k*W.height/W.width),[k,z]},S=function(k,z,W,j,se,Y){var Q=v.call(this,W,j,se),X=this.internal.getCoordinateString,Z=this.internal.getVerticalCoordinateString,oe=l.call(this);if(W=Q[0],j=Q[1],oe[se.index]=se,Y){Y*=Math.PI/180;var ee=Math.cos(Y),G=Math.sin(Y),ne=function(de){return de.toFixed(4)},te=[ne(ee),ne(G),ne(-1*G),ne(ee),0,0,"cm"]}this.internal.write("q"),Y?(this.internal.write([1,"0","0",1,X(k),Z(z+j),"cm"].join(" ")),this.internal.write(te.join(" ")),this.internal.write([X(W),"0","0",X(j),"0","0","cm"].join(" "))):this.internal.write([X(W),"0","0",X(j),X(k),Z(z+j),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+se.index+" Do"),this.internal.write("Q")},y=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var _=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},w=n.__addimage__.sHashCode=function(k){var z,W,j=0;if(typeof k=="string")for(W=k.length,z=0;z<W;z++)j=(j<<5)-j+k.charCodeAt(z),j|=0;else if(O(k))for(W=k.byteLength/2,z=0;z<W;z++)j=(j<<5)-j+k[z],j|=0;return j},A=n.__addimage__.validateStringAsBase64=function(k){(k=k||"").toString().trim();var z=!0;return k.length===0&&(z=!1),k.length%4!=0&&(z=!1),/^[A-Za-z0-9+/]+$/.test(k.substr(0,k.length-2))===!1&&(z=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(k.substr(-2))===!1&&(z=!1),z},E=n.__addimage__.extractImageFromDataUrl=function(k){var z=(k=k||"").split("base64,"),W=null;if(z.length===2){var j=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(z[0]);Array.isArray(j)&&(W={mimeType:j[1],charset:j[2],data:z[1]})}return W},P=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(k){return P()&&k instanceof ArrayBuffer};var O=n.__addimage__.isArrayBufferView=function(k){return P()&&typeof Uint32Array<"u"&&(k instanceof Int8Array||k instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&k instanceof Uint8ClampedArray||k instanceof Int16Array||k instanceof Uint16Array||k instanceof Int32Array||k instanceof Uint32Array||k instanceof Float32Array||k instanceof Float64Array)},L=n.__addimage__.binaryStringToUint8Array=function(k){for(var z=k.length,W=new Uint8Array(z),j=0;j<z;j++)W[j]=k.charCodeAt(j);return W},D=n.__addimage__.arrayBufferToBinaryString=function(k){for(var z="",W=O(k)?k:new Uint8Array(k),j=0;j<W.length;j+=8192)z+=String.fromCharCode.apply(null,W.subarray(j,j+8192));return z};n.addImage=function(){var k,z,W,j,se,Y,Q,X,Z;if(typeof arguments[1]=="number"?(z=e,W=arguments[1],j=arguments[2],se=arguments[3],Y=arguments[4],Q=arguments[5],X=arguments[6],Z=arguments[7]):(z=arguments[1],W=arguments[2],j=arguments[3],se=arguments[4],Y=arguments[5],Q=arguments[6],X=arguments[7],Z=arguments[8]),Ci(k=arguments[0])==="object"&&!f(k)&&"imageData"in k){var oe=k;k=oe.imageData,z=oe.format||z||e,W=oe.x||W||0,j=oe.y||j||0,se=oe.w||oe.width||se,Y=oe.h||oe.height||Y,Q=oe.alias||Q,X=oe.compression||X,Z=oe.rotation||oe.angle||Z}var ee=this.internal.getFilters();if(X===void 0&&ee.indexOf("FlateEncode")!==-1&&(X="SLOW"),isNaN(W)||isNaN(j))throw new Error("Invalid coordinates passed to jsPDF.addImage");s.call(this);var G=F.call(this,k,z,Q,X);return S.call(this,W,j,se,Y,G,Z),this};var F=function(k,z,W,j){var se,Y,Q;if(typeof k=="string"&&r(k)===e){k=unescape(k);var X=U(k,!1);(X!==""||(X=n.loadFile(k,!0))!==void 0)&&(k=X)}if(f(k)&&(k=h(k,z)),z=r(k,z),!c(z))throw new Error("addImage does not support files of type '"+z+"', please ensure that a plugin for '"+z+"' support is added.");if(((Q=W)==null||Q.length===0)&&(W=(function(Z){return typeof Z=="string"||O(Z)?w(Z):O(Z.data)?w(Z.data):null})(k)),(se=p.call(this,W))||(P()&&(k instanceof Uint8Array||z==="RGBA"||(Y=k,k=L(k))),se=this["process"+z.toUpperCase()](k,u.call(this),W,(function(Z){return Z&&typeof Z=="string"&&(Z=Z.toUpperCase()),Z in n.image_compression?Z:_.NONE})(j),Y)),!se)throw new Error("An unknown error occurred whilst processing the image.");return se},U=n.__addimage__.convertBase64ToBinaryString=function(k,z){var W;z=typeof z!="boolean"||z;var j,se="";if(typeof k=="string"){j=(W=E(k))!==null?W.data:k;try{se=m0(j)}catch(Y){if(z)throw A(j)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Y.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return se};n.getImageProperties=function(k){var z,W,j="";if(f(k)&&(k=h(k)),typeof k=="string"&&r(k)===e&&((j=U(k,!1))===""&&(j=n.loadFile(k)||""),k=j),W=r(k),!c(W))throw new Error("addImage does not support files of type '"+W+"', please ensure that a plugin for '"+W+"' support is added.");if(!P()||k instanceof Uint8Array||(k=L(k)),!(z=this["process"+W.toUpperCase()](k)))throw new Error("An unknown error occurred whilst processing the image");return z.fileType=W,z}})(Vn.API),(function(n){var e=function(t){if(t!==void 0&&t!="")return!0};Vn.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,o,a=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(t.objId),u=t.pageContext.annotations,c=!1,f=0;f<u.length&&!c;f++)switch((r=u[f]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(c!=0){this.internal.write("/Annots [");for(var h=0;h<u.length;h++){r=u[h];var p=this.internal.pdfEscape,v=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var S=this.internal.newAdditionalObject(),y=this.internal.newAdditionalObject(),_=this.internal.getEncryptor(S.objId),w=r.title||"Note";o="<</Type /Annot /Subtype /Text "+(i="/Rect ["+a(r.bounds.x)+" "+s(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w)+" "+s(r.bounds.y)+"] ")+"/Contents ("+p(_(r.contents))+")",o+=" /Popup "+y.objId+" 0 R",o+=" /P "+l.objId+" 0 R",o+=" /T ("+p(_(w))+") >>",S.content=o;var A=S.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+a(r.bounds.x+30)+" "+s(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w+30)+" "+s(r.bounds.y)+"] ")+" /Parent "+A,r.open&&(o+=" /Open true"),o+=" >>",y.content=o,this.internal.write(S.objId,"0 R",y.objId,"0 R");break;case"freetext":i="/Rect ["+a(r.bounds.x)+" "+s(r.bounds.y)+" "+a(r.bounds.x+r.bounds.w)+" "+s(r.bounds.y+r.bounds.h)+"] ";var E=r.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+p(v(r.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+E+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(r.options.name){var P=this.annotations._nameMap[r.options.name];r.options.pageNumber=P.page,r.options.top=P.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",o="",r.options.url)o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+p(v(r.options.url))+") >>";else if(r.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,o+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var O=s(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),o+=" /XYZ "+r.options.left+" "+O+" "+r.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,o,a){var s=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;s.pageContext.annotations.push({finalBounds:{x:l(t),y:u(r),w:l(t+i),h:u(r+o)},options:a,type:"link"})},n.textWithLink=function(t,r,i,o){var a,s,l=this.getTextWidth(t),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){s=o.maxWidth;var c=this.splitTextToSize(t,s).length;a=Math.ceil(u*c)}else s=l,a=u;return this.text(t,r,i,o),i+=.2*u,o.align==="center"&&(r-=l/2),o.align==="right"&&(r-=l),this.link(r,i-u,s,a,o),l},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}})(Vn.API),(function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var o=n.__arabicParser__.isInArabicSubstitutionA=function(S){return e[S.charCodeAt(0)]!==void 0},a=n.__arabicParser__.isArabicLetter=function(S){return typeof S=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(S)},s=n.__arabicParser__.isArabicEndLetter=function(S){return a(S)&&o(S)&&e[S.charCodeAt(0)].length<=2},l=n.__arabicParser__.isArabicAlfLetter=function(S){return a(S)&&i.indexOf(S.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(S){return a(S)&&o(S)&&e[S.charCodeAt(0)].length>=1};var u=n.__arabicParser__.arabicLetterHasFinalForm=function(S){return a(S)&&o(S)&&e[S.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(S){return a(S)&&o(S)&&e[S.charCodeAt(0)].length>=3};var c=n.__arabicParser__.arabicLetterHasMedialForm=function(S){return a(S)&&o(S)&&e[S.charCodeAt(0)].length==4},f=n.__arabicParser__.resolveLigatures=function(S){var y=0,_=t,w="",A=0;for(y=0;y<S.length;y+=1)_[S.charCodeAt(y)]!==void 0?(A++,typeof(_=_[S.charCodeAt(y)])=="number"&&(w+=String.fromCharCode(_),_=t,A=0),y===S.length-1&&(_=t,w+=S.charAt(y-(A-1)),y-=A-1,A=0)):(_=t,w+=S.charAt(y-A),y-=A,A=0);return w};n.__arabicParser__.isArabicDiacritic=function(S){return S!==void 0&&r[S.charCodeAt(0)]!==void 0};var h=n.__arabicParser__.getCorrectForm=function(S,y,_){return a(S)?o(S)===!1?-1:!u(S)||!a(y)&&!a(_)||!a(_)&&s(y)||s(S)&&!a(y)||s(S)&&l(y)||s(S)&&s(y)?0:c(S)&&a(y)&&!s(y)&&a(_)&&u(_)?3:s(S)||!a(_)?1:2:-1},p=function(S){var y=0,_=0,w=0,A="",E="",P="",O=(S=S||"").split("\\s+"),L=[];for(y=0;y<O.length;y+=1){for(L.push(""),_=0;_<O[y].length;_+=1)A=O[y][_],E=O[y][_-1],P=O[y][_+1],a(A)?(w=h(A,E,P),L[y]+=w!==-1?String.fromCharCode(e[A.charCodeAt(0)][w]):A):L[y]+=A;L[y]=f(L[y])}return L.join(" ")},v=n.__arabicParser__.processArabic=n.processArabic=function(){var S,y=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,_=[];if(Array.isArray(y)){var w=0;for(_=[],w=0;w<y.length;w+=1)Array.isArray(y[w])?_.push([p(y[w][0]),y[w][1],y[w][2]]):_.push([p(y[w])]);S=_}else S=p(y);return typeof arguments[0]=="string"?S:(arguments[0].text=S,arguments[0])};n.events.push(["preProcessText",v])})(Vn.API),Vn.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",(function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+e+" 0 R")}))}return this},(function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(s){t=s}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(s){r=isNaN(s)||Number.isInteger(s)===!1||s<0?150:s,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(s){i=isNaN(s)||Number.isInteger(s)===!1||s<0?300:s,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(s){o=s}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(s){a=s}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(Vn.API),(function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(S){l=S}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(S){u=S}});var c=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return c},set:function(S){c=S}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(S){f=S}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(S){h=S}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(S){p=S}});var v=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return v},set:function(S){v=S}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},n.getTextDimensions=function(l,u){r.call(this);var c=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),h=u.scaleFactor||this.internal.scaleFactor,p=0,v=0,S=0,y=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var _=u.maxWidth;_>0?typeof l=="string"?l=this.splitTextToSize(l,_):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce((function(A,E){return A.concat(y.splitTextToSize(E,_))}),[])):l=Array.isArray(l)?l:[l];for(var w=0;w<l.length;w++)p<(S=this.getStringUnitWidth(l[w],{font:f})*c)&&(p=S);return p!==0&&(v=l.length),{w:p/=h,h:Math.max((v*c*this.getLineHeightFactor()-c*(this.getLineHeightFactor()-1))/h,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=n.cell=function(){var l;l=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var u=this.internal.__cell__.lastCell,c=this.internal.__cell__.padding,f=this.internal.__cell__.margins||e,h=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=f.top,p&&h&&(this.printHeaderRow(l.lineNumber,!0),l.y+=h[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,t===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-c,l.y+c,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+c,{align:"center",baseline:"top",maxWidth:l.width-c-c}):this.text(l.text,l.x+c,l.y+c,{align:"left",baseline:"top",maxWidth:l.width-c-c})),this.internal.__cell__.lastCell=l,this};n.table=function(l,u,c,f,h){if(r.call(this),!c)throw new Error("No data for PDF table.");var p,v,S,y,_=[],w=[],A=[],E={},P={},O=[],L=[],D=(h=h||{}).autoSize||!1,F=h.printHeaders!==!1,U=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,k=h.margins||Object.assign({width:this.getPageWidth()},e),z=typeof h.padding=="number"?h.padding:3,W=h.headerBackgroundColor||"#c8c8c8",j=h.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=F,this.internal.__cell__.margins=k,this.internal.__cell__.table_font_size=U,this.internal.__cell__.padding=z,this.internal.__cell__.headerBackgroundColor=W,this.internal.__cell__.headerTextColor=j,this.setFontSize(U),f==null)w=_=Object.keys(c[0]),A=_.map((function(){return"left"}));else if(Array.isArray(f)&&Ci(f[0])==="object")for(_=f.map((function(oe){return oe.name})),w=f.map((function(oe){return oe.prompt||oe.name||""})),A=f.map((function(oe){return oe.align||"left"})),p=0;p<f.length;p+=1)P[f[p].name]=f[p].width*(19.049976/25.4);else Array.isArray(f)&&typeof f[0]=="string"&&(w=_=f,A=_.map((function(){return"left"})));if(D||Array.isArray(f)&&typeof f[0]=="string")for(p=0;p<_.length;p+=1){for(E[y=_[p]]=c.map((function(oe){return oe[y]})),this.setFont(void 0,"bold"),O.push(this.getTextDimensions(w[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),v=E[y],this.setFont(void 0,"normal"),S=0;S<v.length;S+=1)O.push(this.getTextDimensions(v[S],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);P[y]=Math.max.apply(null,O)+z+z,O=[]}if(F){var se={};for(p=0;p<_.length;p+=1)se[_[p]]={},se[_[p]].text=w[p],se[_[p]].align=A[p];var Y=s.call(this,se,P);L=_.map((function(oe){return new o(l,u,P[oe],Y,se[oe].text,void 0,se[oe].align)})),this.setTableHeaderRow(L),this.printHeaderRow(1,!1)}var Q=f.reduce((function(oe,ee){return oe[ee.name]=ee.align,oe}),{});for(p=0;p<c.length;p+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:p,data:c[p]},this);var X=s.call(this,c[p],P);for(S=0;S<_.length;S+=1){var Z=c[p][_[S]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:p,col:S,data:Z},this),a.call(this,new o(l,u,P[_[S]],X,Z,p+2,Q[_[S]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var s=function(l,u){var c=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(l).map((function(p){var v=l[p];return this.splitTextToSize(v.hasOwnProperty("text")?v.text:v,u[p]-c-c)}),this).map((function(p){return this.getLineHeightFactor()*p.length*f/h+c+c}),this).reduce((function(p,v){return Math.max(p,v)}),0)};n.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},n.printHeaderRow=function(l,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var c;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){c=this.internal.__cell__.tableHeaderRow[p].clone(),u&&(c.y=this.internal.__cell__.margins.top||0,h.push(c)),c.lineNumber=l;var v=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,c),this.setTextColor(v)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),t=!1}})(Vn.API);var GH={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},qH=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],jC=VH(qH),WH=[100,200,300,400,500,600,700,800,900],Rle=VH(WH);function $C(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=(function(o){return GH[o=o||"normal"]?o:"normal"})(n.style),r=(function(o){if(!o)return 400;if(typeof o=="number")return o>=100&&o<=900&&o%100==0?o:400;if(/^\d00$/.test(o))return parseInt(o);switch(o){case"bold":return 700;case"normal":default:return 400}})(n.weight),i=(function(o){return typeof jC[o=o||"normal"]=="number"?o:"normal"})(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function a4(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}var Nle={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},s4={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function l4(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function Lle(n,e,t){for(var r=(t=t||{}).defaultFontFamily||"times",i=Object.assign({},Nle,t.genericFontFamilies||{}),o=null,a=null,s=0;s<e.length;++s)if(i[(o=$C(e[s])).family]&&(o.family=i[o.family]),n.hasOwnProperty(o.family)){a=n[o.family];break}if(!(a=a||n[r]))throw new Error("Could not find a font-family for the rule '"+l4(o)+"' and default family '"+r+"'.");if(a=(function(l,u){if(u[l])return u[l];var c=jC[l],f=c<=jC.normal?-1:1,h=a4(u,qH,c,f);if(!h)throw new Error("Could not find a matching font-stretch value for "+l);return h})(o.stretch,a),a=(function(l,u){if(u[l])return u[l];for(var c=GH[l],f=0;f<c.length;++f)if(u[c[f]])return u[c[f]];throw new Error("Could not find a matching font-style for "+l)})(o.style,a),!(a=(function(l,u){if(u[l])return u[l];if(l===400&&u[500])return u[500];if(l===500&&u[400])return u[400];var c=Rle[l],f=a4(u,WH,c,l<400?-1:1);if(!f)throw new Error("Could not find a matching font-weight for value "+l);return f})(o.weight,a)))throw new Error("Failed to resolve a font for the rule '"+l4(o)+"'.");return a}function u4(n){return n.trimLeft()}function Ole(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function Dle(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var kx,c4,f4,eA=["times"];(function(n){var e,t,r,i,o,a,s,l,u,c=function(G){return G=G||{},this.isStrokeTransparent=G.isStrokeTransparent||!1,this.strokeOpacity=G.strokeOpacity||1,this.strokeStyle=G.strokeStyle||"#000000",this.fillStyle=G.fillStyle||"#000000",this.isFillTransparent=G.isFillTransparent||!1,this.fillOpacity=G.fillOpacity||1,this.font=G.font||"10px sans-serif",this.textBaseline=G.textBaseline||"alphabetic",this.textAlign=G.textAlign||"left",this.lineWidth=G.lineWidth||1,this.lineJoin=G.lineJoin||"miter",this.lineCap=G.lineCap||"butt",this.path=G.path||[],this.transform=G.transform!==void 0?G.transform.clone():new l,this.globalCompositeOperation=G.globalCompositeOperation||"normal",this.globalAlpha=G.globalAlpha||1,this.clip_path=G.clip_path||[],this.currentPoint=G.currentPoint||new a,this.miterLimit=G.miterLimit||10,this.lastPoint=G.lastPoint||new a,this.lineDashOffset=G.lineDashOffset||0,this.lineDash=G.lineDash||[],this.margin=G.margin||[0,0,0,0],this.prevPageLastElemOffset=G.prevPageLastElemOffset||0,this.ignoreClearRect=typeof G.ignoreClearRect!="boolean"||G.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new f(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,a=this.internal.Point,s=this.internal.Rectangle,l=this.internal.Matrix,u=new c}]);var f=function(G){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var ne=G;Object.defineProperty(this,"pdf",{get:function(){return ne}});var te=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return te},set:function(Ge){te=!!Ge}});var de=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return de},set:function(Ge){de=!!Ge}});var me=0;Object.defineProperty(this,"posX",{get:function(){return me},set:function(Ge){isNaN(Ge)||(me=Ge)}});var be=0;Object.defineProperty(this,"posY",{get:function(){return be},set:function(Ge){isNaN(Ge)||(be=Ge)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Ge){var ye;typeof Ge=="number"?ye=[Ge,Ge,Ge,Ge]:((ye=new Array(4))[0]=Ge[0],ye[1]=Ge.length>=2?Ge[1]:ye[0],ye[2]=Ge.length>=3?Ge[2]:ye[0],ye[3]=Ge.length>=4?Ge[3]:ye[1]),u.margin=ye}});var Ie=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ie},set:function(Ge){Ie=Ge}});var Ee=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ee},set:function(Ge){Ee=Ge}});var Xe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Xe},set:function(Ge){Xe=Ge}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Ge){Ge instanceof c&&(u=Ge)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Ge){u.path=Ge}});var tt=[];Object.defineProperty(this,"ctxStack",{get:function(){return tt},set:function(Ge){tt=Ge}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ge){var ye;ye=h(Ge),this.ctx.fillStyle=ye.style,this.ctx.isFillTransparent=ye.a===0,this.ctx.fillOpacity=ye.a,this.pdf.setFillColor(ye.r,ye.g,ye.b,{a:ye.a}),this.pdf.setTextColor(ye.r,ye.g,ye.b,{a:ye.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ge){var ye=h(Ge);this.ctx.strokeStyle=ye.style,this.ctx.isStrokeTransparent=ye.a===0,this.ctx.strokeOpacity=ye.a,ye.a===0?this.pdf.setDrawColor(255,255,255):(ye.a,this.pdf.setDrawColor(ye.r,ye.g,ye.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ge){["butt","round","square"].indexOf(Ge)!==-1&&(this.ctx.lineCap=Ge,this.pdf.setLineCap(Ge))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ge){isNaN(Ge)||(this.ctx.lineWidth=Ge,this.pdf.setLineWidth(Ge))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ge){["bevel","round","miter"].indexOf(Ge)!==-1&&(this.ctx.lineJoin=Ge,this.pdf.setLineJoin(Ge))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ge){isNaN(Ge)||(this.ctx.miterLimit=Ge,this.pdf.setMiterLimit(Ge))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ge){this.ctx.textBaseline=Ge}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ge){["right","end","center","left","start"].indexOf(Ge)!==-1&&(this.ctx.textAlign=Ge)}});var Te=null;function Je(Ge,ye){if(Te===null){var Ct=(function(ft){var mt=[];return Object.keys(ft).forEach((function(lt){ft[lt].forEach((function(ve){var le=null;switch(ve){case"bold":le={family:lt,weight:"bold"};break;case"italic":le={family:lt,style:"italic"};break;case"bolditalic":le={family:lt,weight:"bold",style:"italic"};break;case"":case"normal":le={family:lt}}le!==null&&(le.ref={name:lt,style:ve},mt.push(le))}))})),mt})(Ge.getFontList());Te=(function(ft){for(var mt={},lt=0;lt<ft.length;++lt){var ve=$C(ft[lt]),le=ve.family,He=ve.stretch,rt=ve.style,vt=ve.weight;mt[le]=mt[le]||{},mt[le][He]=mt[le][He]||{},mt[le][He][rt]=mt[le][He][rt]||{},mt[le][He][rt][vt]=ve}return mt})(Ct.concat(ye))}return Te}var Se=null;Object.defineProperty(this,"fontFaces",{get:function(){return Se},set:function(Ge){Te=null,Se=Ge}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ge){var ye;if(this.ctx.font=Ge,(ye=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ge))!==null){var Ct=ye[1],ft=(ye[2],ye[3]),mt=ye[4],lt=(ye[5],ye[6]),ve=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(mt)[2];mt=Math.floor(ve==="px"?parseFloat(mt)*this.pdf.internal.scaleFactor:ve==="em"?parseFloat(mt)*this.pdf.getFontSize():parseFloat(mt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(mt);var le=(function(Rt){var tn,it,Zt=[],Xt=Rt.trim();if(Xt==="")return eA;if(Xt in s4)return[s4[Xt]];for(;Xt!=="";){switch(it=null,tn=(Xt=u4(Xt)).charAt(0)){case'"':case"'":it=Ole(Xt.substring(1),tn);break;default:it=Dle(Xt)}if(it===null||(Zt.push(it[0]),(Xt=u4(it[1]))!==""&&Xt.charAt(0)!==","))return eA;Xt=Xt.replace(/^,/,"")}return Zt})(lt);if(this.fontFaces){var He=Lle(Je(this.pdf,this.fontFaces),le.map((function(Rt){return{family:Rt,stretch:"normal",weight:ft,style:Ct}})));this.pdf.setFont(He.ref.name,He.ref.style)}else{var rt="";(ft==="bold"||parseInt(ft,10)>=700||Ct==="bold")&&(rt="bold"),Ct==="italic"&&(rt+="italic"),rt.length===0&&(rt="normal");for(var vt="",ht={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},qt=0;qt<le.length;qt++){if(this.pdf.internal.getFont(le[qt],rt,{noFallback:!0,disableWarning:!0})!==void 0){vt=le[qt];break}if(rt==="bolditalic"&&this.pdf.internal.getFont(le[qt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)vt=le[qt],rt="bold";else if(this.pdf.internal.getFont(le[qt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){vt=le[qt],rt="normal";break}}if(vt===""){for(var Ft=0;Ft<le.length;Ft++)if(ht[le[Ft]]){vt=ht[le[Ft]];break}}vt=vt===""?"Times":vt,this.pdf.setFont(vt,rt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ge){this.ctx.globalCompositeOperation=Ge}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ge){this.ctx.globalAlpha=Ge}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ge){this.ctx.lineDashOffset=Ge,ee.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ge){this.ctx.lineDash=Ge,ee.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ge){this.ctx.ignoreClearRect=!!Ge}})};f.prototype.setLineDash=function(G){this.lineDash=G},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){E.call(this,"fill",!1)},f.prototype.stroke=function(){E.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(G,ne){if(isNaN(G)||isNaN(ne))throw Ui.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var te=this.ctx.transform.applyToPoint(new a(G,ne));this.path.push({type:"mt",x:te.x,y:te.y}),this.ctx.lastPoint=new a(G,ne)},f.prototype.closePath=function(){var G=new a(0,0),ne=0;for(ne=this.path.length-1;ne!==-1;ne--)if(this.path[ne].type==="begin"&&Ci(this.path[ne+1])==="object"&&typeof this.path[ne+1].x=="number"){G=new a(this.path[ne+1].x,this.path[ne+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(G.x,G.y)},f.prototype.lineTo=function(G,ne){if(isNaN(G)||isNaN(ne))throw Ui.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var te=this.ctx.transform.applyToPoint(new a(G,ne));this.path.push({type:"lt",x:te.x,y:te.y}),this.ctx.lastPoint=new a(te.x,te.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),E.call(this,null,!0)},f.prototype.quadraticCurveTo=function(G,ne,te,de){if(isNaN(te)||isNaN(de)||isNaN(G)||isNaN(ne))throw Ui.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var me=this.ctx.transform.applyToPoint(new a(te,de)),be=this.ctx.transform.applyToPoint(new a(G,ne));this.path.push({type:"qct",x1:be.x,y1:be.y,x:me.x,y:me.y}),this.ctx.lastPoint=new a(me.x,me.y)},f.prototype.bezierCurveTo=function(G,ne,te,de,me,be){if(isNaN(me)||isNaN(be)||isNaN(G)||isNaN(ne)||isNaN(te)||isNaN(de))throw Ui.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ie=this.ctx.transform.applyToPoint(new a(me,be)),Ee=this.ctx.transform.applyToPoint(new a(G,ne)),Xe=this.ctx.transform.applyToPoint(new a(te,de));this.path.push({type:"bct",x1:Ee.x,y1:Ee.y,x2:Xe.x,y2:Xe.y,x:Ie.x,y:Ie.y}),this.ctx.lastPoint=new a(Ie.x,Ie.y)},f.prototype.arc=function(G,ne,te,de,me,be){if(isNaN(G)||isNaN(ne)||isNaN(te)||isNaN(de)||isNaN(me))throw Ui.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(be=!!be,!this.ctx.transform.isIdentity){var Ie=this.ctx.transform.applyToPoint(new a(G,ne));G=Ie.x,ne=Ie.y;var Ee=this.ctx.transform.applyToPoint(new a(0,te)),Xe=this.ctx.transform.applyToPoint(new a(0,0));te=Math.sqrt(Math.pow(Ee.x-Xe.x,2)+Math.pow(Ee.y-Xe.y,2))}Math.abs(me-de)>=2*Math.PI&&(de=0,me=2*Math.PI),this.path.push({type:"arc",x:G,y:ne,radius:te,startAngle:de,endAngle:me,counterclockwise:be})},f.prototype.arcTo=function(G,ne,te,de,me){throw new Error("arcTo not implemented.")},f.prototype.rect=function(G,ne,te,de){if(isNaN(G)||isNaN(ne)||isNaN(te)||isNaN(de))throw Ui.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(G,ne),this.lineTo(G+te,ne),this.lineTo(G+te,ne+de),this.lineTo(G,ne+de),this.lineTo(G,ne),this.lineTo(G+te,ne),this.lineTo(G,ne)},f.prototype.fillRect=function(G,ne,te,de){if(isNaN(G)||isNaN(ne)||isNaN(te)||isNaN(de))throw Ui.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var me={};this.lineCap!=="butt"&&(me.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(me.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(G,ne,te,de),this.fill(),me.hasOwnProperty("lineCap")&&(this.lineCap=me.lineCap),me.hasOwnProperty("lineJoin")&&(this.lineJoin=me.lineJoin)}},f.prototype.strokeRect=function(G,ne,te,de){if(isNaN(G)||isNaN(ne)||isNaN(te)||isNaN(de))throw Ui.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");v.call(this)||(this.beginPath(),this.rect(G,ne,te,de),this.stroke())},f.prototype.clearRect=function(G,ne,te,de){if(isNaN(G)||isNaN(ne)||isNaN(te)||isNaN(de))throw Ui.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(G,ne,te,de))},f.prototype.save=function(G){G=typeof G!="boolean"||G;for(var ne=this.pdf.internal.getCurrentPageInfo().pageNumber,te=0;te<this.pdf.internal.getNumberOfPages();te++)this.pdf.setPage(te+1),this.pdf.internal.out("q");if(this.pdf.setPage(ne),G){this.ctx.fontSize=this.pdf.internal.getFontSize();var de=new c(this.ctx);this.ctxStack.push(this.ctx),this.ctx=de}},f.prototype.restore=function(G){G=typeof G!="boolean"||G;for(var ne=this.pdf.internal.getCurrentPageInfo().pageNumber,te=0;te<this.pdf.internal.getNumberOfPages();te++)this.pdf.setPage(te+1),this.pdf.internal.out("Q");this.pdf.setPage(ne),G&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(G){var ne,te,de,me;if(G.isCanvasGradient===!0&&(G=G.getColor()),!G)return{r:0,g:0,b:0,a:0,style:G};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(G))ne=0,te=0,de=0,me=0;else{var be=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(G);if(be!==null)ne=parseInt(be[1]),te=parseInt(be[2]),de=parseInt(be[3]),me=1;else if((be=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(G))!==null)ne=parseInt(be[1]),te=parseInt(be[2]),de=parseInt(be[3]),me=parseFloat(be[4]);else{if(me=1,typeof G=="string"&&G.charAt(0)!=="#"){var Ie=new kH(G);G=Ie.ok?Ie.toHex():"#000000"}G.length===4?(ne=G.substring(1,2),ne+=ne,te=G.substring(2,3),te+=te,de=G.substring(3,4),de+=de):(ne=G.substring(1,3),te=G.substring(3,5),de=G.substring(5,7)),ne=parseInt(ne,16),te=parseInt(te,16),de=parseInt(de,16)}}return{r:ne,g:te,b:de,a:me,style:G}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},v=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(G,ne,te,de){if(isNaN(ne)||isNaN(te)||typeof G!="string")throw Ui.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(de=isNaN(de)?void 0:de,!p.call(this)){var me=X(this.ctx.transform.rotation),be=this.ctx.transform.scaleX;z.call(this,{text:G,x:ne,y:te,scale:be,angle:me,align:this.textAlign,maxWidth:de})}},f.prototype.strokeText=function(G,ne,te,de){if(isNaN(ne)||isNaN(te)||typeof G!="string")throw Ui.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!v.call(this)){de=isNaN(de)?void 0:de;var me=X(this.ctx.transform.rotation),be=this.ctx.transform.scaleX;z.call(this,{text:G,x:ne,y:te,scale:be,renderingMode:"stroke",angle:me,align:this.textAlign,maxWidth:de})}},f.prototype.measureText=function(G){if(typeof G!="string")throw Ui.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var ne=this.pdf,te=this.pdf.internal.scaleFactor,de=ne.internal.getFontSize(),me=ne.getStringUnitWidth(G)*de/ne.internal.scaleFactor,be=function(Ie){var Ee=(Ie=Ie||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ee}}),this};return new be({width:me*=Math.round(96*te/72*1e4)/1e4})},f.prototype.scale=function(G,ne){if(isNaN(G)||isNaN(ne))throw Ui.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var te=new l(G,0,0,ne,0,0);this.ctx.transform=this.ctx.transform.multiply(te)},f.prototype.rotate=function(G){if(isNaN(G))throw Ui.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var ne=new l(Math.cos(G),Math.sin(G),-Math.sin(G),Math.cos(G),0,0);this.ctx.transform=this.ctx.transform.multiply(ne)},f.prototype.translate=function(G,ne){if(isNaN(G)||isNaN(ne))throw Ui.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var te=new l(1,0,0,1,G,ne);this.ctx.transform=this.ctx.transform.multiply(te)},f.prototype.transform=function(G,ne,te,de,me,be){if(isNaN(G)||isNaN(ne)||isNaN(te)||isNaN(de)||isNaN(me)||isNaN(be))throw Ui.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ie=new l(G,ne,te,de,me,be);this.ctx.transform=this.ctx.transform.multiply(Ie)},f.prototype.setTransform=function(G,ne,te,de,me,be){G=isNaN(G)?1:G,ne=isNaN(ne)?0:ne,te=isNaN(te)?0:te,de=isNaN(de)?1:de,me=isNaN(me)?0:me,be=isNaN(be)?0:be,this.ctx.transform=new l(G,ne,te,de,me,be)};var S=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(G,ne,te,de,me,be,Ie,Ee,Xe){var tt=this.pdf.getImageProperties(G),Te=1,Je=1,Se=1,Ge=1;de!==void 0&&Ee!==void 0&&(Se=Ee/de,Ge=Xe/me,Te=tt.width/de*Ee/de,Je=tt.height/me*Xe/me),be===void 0&&(be=ne,Ie=te,ne=0,te=0),de!==void 0&&Ee===void 0&&(Ee=de,Xe=me),de===void 0&&Ee===void 0&&(Ee=tt.width,Xe=tt.height);for(var ye,Ct=this.ctx.transform.decompose(),ft=X(Ct.rotate.shx),mt=new l,lt=(mt=(mt=(mt=mt.multiply(Ct.translate)).multiply(Ct.skew)).multiply(Ct.scale)).applyToRectangle(new s(be-ne*Se,Ie-te*Ge,de*Te,me*Je)),ve=y.call(this,lt),le=[],He=0;He<ve.length;He+=1)le.indexOf(ve[He])===-1&&le.push(ve[He]);if(A(le),this.autoPaging)for(var rt=le[0],vt=le[le.length-1],ht=rt;ht<vt+1;ht++){this.pdf.setPage(ht);var qt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ft=ht===1?this.posY+this.margin[0]:this.margin[0],Rt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],tn=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],it=ht===1?0:Rt+(ht-2)*tn;if(this.ctx.clip_path.length!==0){var Zt=this.path;ye=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(ye,this.posX+this.margin[3],-it+Ft+this.ctx.prevPageLastElemOffset),P.call(this,"fill",!0),this.path=Zt}var Xt=JSON.parse(JSON.stringify(lt));Xt=w([Xt],this.posX+this.margin[3],-it+Ft+this.ctx.prevPageLastElemOffset)[0];var un=(ht>rt||ht<vt)&&S.call(this);un&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],qt,tn,null).clip().discardPath()),this.pdf.addImage(G,"JPEG",Xt.x,Xt.y,Xt.w,Xt.h,null,null,ft),un&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(G,"JPEG",lt.x,lt.y,lt.w,lt.h,null,null,ft)};var y=function(G,ne,te){var de=[];ne=ne||this.pdf.internal.pageSize.width,te=te||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var me=this.posY+this.ctx.prevPageLastElemOffset;switch(G.type){default:case"mt":case"lt":de.push(Math.floor((G.y+me)/te)+1);break;case"arc":de.push(Math.floor((G.y+me-G.radius)/te)+1),de.push(Math.floor((G.y+me+G.radius)/te)+1);break;case"qct":var be=Z(this.ctx.lastPoint.x,this.ctx.lastPoint.y,G.x1,G.y1,G.x,G.y);de.push(Math.floor((be.y+me)/te)+1),de.push(Math.floor((be.y+be.h+me)/te)+1);break;case"bct":var Ie=oe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,G.x1,G.y1,G.x2,G.y2,G.x,G.y);de.push(Math.floor((Ie.y+me)/te)+1),de.push(Math.floor((Ie.y+Ie.h+me)/te)+1);break;case"rect":de.push(Math.floor((G.y+me)/te)+1),de.push(Math.floor((G.y+G.h+me)/te)+1)}for(var Ee=0;Ee<de.length;Ee+=1)for(;this.pdf.internal.getNumberOfPages()<de[Ee];)_.call(this);return de},_=function(){var G=this.fillStyle,ne=this.strokeStyle,te=this.font,de=this.lineCap,me=this.lineWidth,be=this.lineJoin;this.pdf.addPage(),this.fillStyle=G,this.strokeStyle=ne,this.font=te,this.lineCap=de,this.lineWidth=me,this.lineJoin=be},w=function(G,ne,te){for(var de=0;de<G.length;de++)switch(G[de].type){case"bct":G[de].x2+=ne,G[de].y2+=te;case"qct":G[de].x1+=ne,G[de].y1+=te;case"mt":case"lt":case"arc":default:G[de].x+=ne,G[de].y+=te}return G},A=function(G){return G.sort((function(ne,te){return ne-te}))},E=function(G,ne){for(var te,de,me=this.fillStyle,be=this.strokeStyle,Ie=this.lineCap,Ee=this.lineWidth,Xe=Math.abs(Ee*this.ctx.transform.scaleX),tt=this.lineJoin,Te=JSON.parse(JSON.stringify(this.path)),Je=JSON.parse(JSON.stringify(this.path)),Se=[],Ge=0;Ge<Je.length;Ge++)if(Je[Ge].x!==void 0)for(var ye=y.call(this,Je[Ge]),Ct=0;Ct<ye.length;Ct+=1)Se.indexOf(ye[Ct])===-1&&Se.push(ye[Ct]);for(var ft=0;ft<Se.length;ft++)for(;this.pdf.internal.getNumberOfPages()<Se[ft];)_.call(this);if(A(Se),this.autoPaging)for(var mt=Se[0],lt=Se[Se.length-1],ve=mt;ve<lt+1;ve++){this.pdf.setPage(ve),this.fillStyle=me,this.strokeStyle=be,this.lineCap=Ie,this.lineWidth=Xe,this.lineJoin=tt;var le=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],He=ve===1?this.posY+this.margin[0]:this.margin[0],rt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],vt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ht=ve===1?0:rt+(ve-2)*vt;if(this.ctx.clip_path.length!==0){var qt=this.path;te=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(te,this.posX+this.margin[3],-ht+He+this.ctx.prevPageLastElemOffset),P.call(this,G,!0),this.path=qt}if(de=JSON.parse(JSON.stringify(Te)),this.path=w(de,this.posX+this.margin[3],-ht+He+this.ctx.prevPageLastElemOffset),ne===!1||ve===0){var Ft=(ve>mt||ve<lt)&&S.call(this);Ft&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],le,vt,null).clip().discardPath()),P.call(this,G,ne),Ft&&this.pdf.restoreGraphicsState()}this.lineWidth=Ee}else this.lineWidth=Xe,P.call(this,G,ne),this.lineWidth=Ee;this.path=Te},P=function(G,ne){if((G!=="stroke"||ne||!v.call(this))&&(G==="stroke"||ne||!p.call(this))){for(var te,de,me=[],be=this.path,Ie=0;Ie<be.length;Ie++){var Ee=be[Ie];switch(Ee.type){case"begin":me.push({begin:!0});break;case"close":me.push({close:!0});break;case"mt":me.push({start:Ee,deltas:[],abs:[]});break;case"lt":var Xe=me.length;if(be[Ie-1]&&!isNaN(be[Ie-1].x)&&(te=[Ee.x-be[Ie-1].x,Ee.y-be[Ie-1].y],Xe>0)){for(;Xe>=0;Xe--)if(me[Xe-1].close!==!0&&me[Xe-1].begin!==!0){me[Xe-1].deltas.push(te),me[Xe-1].abs.push(Ee);break}}break;case"bct":te=[Ee.x1-be[Ie-1].x,Ee.y1-be[Ie-1].y,Ee.x2-be[Ie-1].x,Ee.y2-be[Ie-1].y,Ee.x-be[Ie-1].x,Ee.y-be[Ie-1].y],me[me.length-1].deltas.push(te);break;case"qct":var tt=be[Ie-1].x+2/3*(Ee.x1-be[Ie-1].x),Te=be[Ie-1].y+2/3*(Ee.y1-be[Ie-1].y),Je=Ee.x+2/3*(Ee.x1-Ee.x),Se=Ee.y+2/3*(Ee.y1-Ee.y),Ge=Ee.x,ye=Ee.y;te=[tt-be[Ie-1].x,Te-be[Ie-1].y,Je-be[Ie-1].x,Se-be[Ie-1].y,Ge-be[Ie-1].x,ye-be[Ie-1].y],me[me.length-1].deltas.push(te);break;case"arc":me.push({deltas:[],abs:[],arc:!0}),Array.isArray(me[me.length-1].abs)&&me[me.length-1].abs.push(Ee)}}de=ne?null:G==="stroke"?"stroke":"fill";for(var Ct=!1,ft=0;ft<me.length;ft++)if(me[ft].arc)for(var mt=me[ft].abs,lt=0;lt<mt.length;lt++){var ve=mt[lt];ve.type==="arc"?D.call(this,ve.x,ve.y,ve.radius,ve.startAngle,ve.endAngle,ve.counterclockwise,void 0,ne,!Ct):W.call(this,ve.x,ve.y),Ct=!0}else if(me[ft].close===!0)this.pdf.internal.out("h"),Ct=!1;else if(me[ft].begin!==!0){var le=me[ft].start.x,He=me[ft].start.y;j.call(this,me[ft].deltas,le,He),Ct=!0}de&&F.call(this,de),ne&&U.call(this)}},O=function(G){var ne=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,te=ne*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return G-te;case"top":return G+ne-te;case"hanging":return G+ne-2*te;case"middle":return G+ne/2-te;case"ideographic":return G;case"alphabetic":default:return G}},L=function(G){return G+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var G=function(){};return G.colorStops=[],G.addColorStop=function(ne,te){this.colorStops.push([ne,te])},G.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},G.isCanvasGradient=!0,G},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var D=function(G,ne,te,de,me,be,Ie,Ee,Xe){for(var tt=Y.call(this,te,de,me,be),Te=0;Te<tt.length;Te++){var Je=tt[Te];Te===0&&(Xe?k.call(this,Je.x1+G,Je.y1+ne):W.call(this,Je.x1+G,Je.y1+ne)),se.call(this,G,ne,Je.x2,Je.y2,Je.x3,Je.y3,Je.x4,Je.y4)}Ee?U.call(this):F.call(this,Ie)},F=function(G){switch(G){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},U=function(){this.pdf.clip(),this.pdf.discardPath()},k=function(G,ne){this.pdf.internal.out(t(G)+" "+r(ne)+" m")},z=function(G){var ne;switch(G.align){case"right":case"end":ne="right";break;case"center":ne="center";break;case"left":case"start":default:ne="left"}var te=this.pdf.getTextDimensions(G.text),de=O.call(this,G.y),me=L.call(this,de)-te.h,be=this.ctx.transform.applyToPoint(new a(G.x,de)),Ie=this.ctx.transform.decompose(),Ee=new l;Ee=(Ee=(Ee=Ee.multiply(Ie.translate)).multiply(Ie.skew)).multiply(Ie.scale);for(var Xe,tt,Te,Je=this.ctx.transform.applyToRectangle(new s(G.x,de,te.w,te.h)),Se=Ee.applyToRectangle(new s(G.x,me,te.w,te.h)),Ge=y.call(this,Se),ye=[],Ct=0;Ct<Ge.length;Ct+=1)ye.indexOf(Ge[Ct])===-1&&ye.push(Ge[Ct]);if(A(ye),this.autoPaging)for(var ft=ye[0],mt=ye[ye.length-1],lt=ft;lt<mt+1;lt++){this.pdf.setPage(lt);var ve=lt===1?this.posY+this.margin[0]:this.margin[0],le=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],He=this.pdf.internal.pageSize.height-this.margin[2],rt=He-this.margin[0],vt=this.pdf.internal.pageSize.width-this.margin[1],ht=vt-this.margin[3],qt=lt===1?0:le+(lt-2)*rt;if(this.ctx.clip_path.length!==0){var Ft=this.path;Xe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(Xe,this.posX+this.margin[3],-1*qt+ve),P.call(this,"fill",!0),this.path=Ft}var Rt=w([JSON.parse(JSON.stringify(Se))],this.posX+this.margin[3],-qt+ve+this.ctx.prevPageLastElemOffset)[0];G.scale>=.01&&(tt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(tt*G.scale),Te=this.lineWidth,this.lineWidth=Te*G.scale);var tn=this.autoPaging!=="text";if(tn||Rt.y+Rt.h<=He){if(tn||Rt.y>=ve&&Rt.x<=vt){var it=tn?G.text:this.pdf.splitTextToSize(G.text,G.maxWidth||vt-Rt.x)[0],Zt=w([JSON.parse(JSON.stringify(Je))],this.posX+this.margin[3],-qt+ve+this.ctx.prevPageLastElemOffset)[0],Xt=tn&&(lt>ft||lt<mt)&&S.call(this);Xt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ht,rt,null).clip().discardPath()),this.pdf.text(it,Zt.x,Zt.y,{angle:G.angle,align:ne,renderingMode:G.renderingMode}),Xt&&this.pdf.restoreGraphicsState()}}else Rt.y<He&&(this.ctx.prevPageLastElemOffset+=He-Rt.y);G.scale>=.01&&(this.pdf.setFontSize(tt),this.lineWidth=Te)}else G.scale>=.01&&(tt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(tt*G.scale),Te=this.lineWidth,this.lineWidth=Te*G.scale),this.pdf.text(G.text,be.x+this.posX,be.y+this.posY,{angle:G.angle,align:ne,renderingMode:G.renderingMode,maxWidth:G.maxWidth}),G.scale>=.01&&(this.pdf.setFontSize(tt),this.lineWidth=Te)},W=function(G,ne,te,de){te=te||0,de=de||0,this.pdf.internal.out(t(G+te)+" "+r(ne+de)+" l")},j=function(G,ne,te){return this.pdf.lines(G,ne,te,null,null)},se=function(G,ne,te,de,me,be,Ie,Ee){this.pdf.internal.out([e(i(te+G)),e(o(de+ne)),e(i(me+G)),e(o(be+ne)),e(i(Ie+G)),e(o(Ee+ne)),"c"].join(" "))},Y=function(G,ne,te,de){for(var me=2*Math.PI,be=Math.PI/2;ne>te;)ne-=me;var Ie=Math.abs(te-ne);Ie<me&&de&&(Ie=me-Ie);for(var Ee=[],Xe=de?-1:1,tt=ne;Ie>1e-5;){var Te=tt+Xe*Math.min(Ie,be);Ee.push(Q.call(this,G,tt,Te)),Ie-=Math.abs(Te-tt),tt=Te}return Ee},Q=function(G,ne,te){var de=(te-ne)/2,me=G*Math.cos(de),be=G*Math.sin(de),Ie=me,Ee=-be,Xe=Ie*Ie+Ee*Ee,tt=Xe+Ie*me+Ee*be,Te=4/3*(Math.sqrt(2*Xe*tt)-tt)/(Ie*be-Ee*me),Je=Ie-Te*Ee,Se=Ee+Te*Ie,Ge=Je,ye=-Se,Ct=de+ne,ft=Math.cos(Ct),mt=Math.sin(Ct);return{x1:G*Math.cos(ne),y1:G*Math.sin(ne),x2:Je*ft-Se*mt,y2:Je*mt+Se*ft,x3:Ge*ft-ye*mt,y3:Ge*mt+ye*ft,x4:G*Math.cos(te),y4:G*Math.sin(te)}},X=function(G){return 180*G/Math.PI},Z=function(G,ne,te,de,me,be){var Ie=G+.5*(te-G),Ee=ne+.5*(de-ne),Xe=me+.5*(te-me),tt=be+.5*(de-be),Te=Math.min(G,me,Ie,Xe),Je=Math.max(G,me,Ie,Xe),Se=Math.min(ne,be,Ee,tt),Ge=Math.max(ne,be,Ee,tt);return new s(Te,Se,Je-Te,Ge-Se)},oe=function(G,ne,te,de,me,be,Ie,Ee){var Xe,tt,Te,Je,Se,Ge,ye,Ct,ft,mt,lt,ve,le,He,rt=te-G,vt=de-ne,ht=me-te,qt=be-de,Ft=Ie-me,Rt=Ee-be;for(tt=0;tt<41;tt++)ft=(ye=(Te=G+(Xe=tt/40)*rt)+Xe*((Se=te+Xe*ht)-Te))+Xe*(Se+Xe*(me+Xe*Ft-Se)-ye),mt=(Ct=(Je=ne+Xe*vt)+Xe*((Ge=de+Xe*qt)-Je))+Xe*(Ge+Xe*(be+Xe*Rt-Ge)-Ct),tt==0?(lt=ft,ve=mt,le=ft,He=mt):(lt=Math.min(lt,ft),ve=Math.min(ve,mt),le=Math.max(le,ft),He=Math.max(He,mt));return new s(Math.round(lt),Math.round(ve),Math.round(le-lt),Math.round(He-ve))},ee=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var G,ne,te=(G=this.ctx.lineDash,ne=this.ctx.lineDashOffset,JSON.stringify({lineDash:G,lineDashOffset:ne}));this.prevLineDash!==te&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=te)}}})(Vn.API),(function(n){var e=function(o){var a,s,l,u,c,f,h,p,v,S;for(s=[],l=0,u=(o+=a="\0\0\0\0".slice(o.length%4||4)).length;u>l;l+=4)(c=(o.charCodeAt(l)<<24)+(o.charCodeAt(l+1)<<16)+(o.charCodeAt(l+2)<<8)+o.charCodeAt(l+3))!==0?(f=(c=((c=((c=((c=(c-(S=c%85))/85)-(v=c%85))/85)-(p=c%85))/85)-(h=c%85))/85)%85,s.push(f+33,h+33,p+33,v+33,S+33)):s.push(122);return(function(y,_){for(var w=_;w>0;w--)y.pop()})(s,a.length),String.fromCharCode.apply(String,s)+"~>"},t=function(o){var a,s,l,u,c,f=String,h="length",p=255,v="charCodeAt",S="slice",y="replace";for(o[S](-2),o=o[S](0,-2)[y](/\s/g,"")[y]("z","!!!!!"),l=[],u=0,c=(o+=a="uuuuu"[S](o[h]%5||5))[h];c>u;u+=5)s=52200625*(o[v](u)-33)+614125*(o[v](u+1)-33)+7225*(o[v](u+2)-33)+85*(o[v](u+3)-33)+(o[v](u+4)-33),l.push(p&s>>24,p&s>>16,p&s>>8,p&s);return(function(_,w){for(var A=w;A>0;A--)_.pop()})(l,a[h]),f.fromCharCode.apply(f,l)},r=function(o){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),a.test(o)===!1)return"";for(var s="",l=0;l<o.length;l+=2)s+=String.fromCharCode("0x"+(o[l]+o[l+1]));return s},i=function(o){for(var a=new Uint8Array(o.length),s=o.length;s--;)a[s]=o.charCodeAt(s);return o=(a=HC(a)).reduce((function(l,u){return l+String.fromCharCode(u)}),"")};n.processDataByFilters=function(o,a){var s=0,l=o||"",u=[];for(typeof(a=a||[])=="string"&&(a=[a]),s=0;s<a.length;s+=1)switch(a[s]){case"ASCII85Decode":case"/ASCII85Decode":l=t(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map((function(c){return("0"+c.charCodeAt().toString(16)).slice(-2)})).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[s]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}})(Vn.API),(function(n){n.loadFile=function(e,t,r){return(function(i,o,a){o=o!==!1,a=typeof a=="function"?a:function(){};var s=void 0;try{s=(function(l,u,c){var f=new XMLHttpRequest,h=0,p=function(v){var S=v.length,y=[],_=String.fromCharCode;for(h=0;h<S;h+=1)y.push(_(255&v.charCodeAt(h)));return y.join("")};if(f.open("GET",l,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?c(p(this.responseText)):c(void 0)}),f.send(null),u&&f.status===200)return p(f.responseText)})(i,o,a)}catch{}return s})(e,t,r)},n.loadImageFile=n.loadFile})(Vn.API),(function(n){function e(){return(Jn.html2canvas?Promise.resolve(Jn.html2canvas):DC(()=>import("./html2canvas.esm-QH1iLAAe.js"),[])).catch((function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))})).then((function(a){return a.default?a.default:a}))}function t(){return(Jn.DOMPurify?Promise.resolve(Jn.DOMPurify):DC(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch((function(a){return Promise.reject(new Error("Could not load dompurify: "+a))})).then((function(a){return a.default?a.default:a}))}var r=function(a){var s=Ci(a);return s==="undefined"?"undefined":s==="string"||a instanceof String?"string":s==="number"||a instanceof Number?"number":s==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":s==="object"?"object":"unknown"},i=function(a,s){var l=document.createElement(a);for(var u in s.className&&(l.className=s.className),s.innerHTML&&s.dompurify&&(l.innerHTML=s.dompurify.sanitize(s.innerHTML)),s.style)l.style[u]=s.style[u];return l},o=function a(s){var l=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),u=a.convert(Promise.resolve(),l);return u=(u=u.setProgress(1,a,1,[a])).set(s)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(a,s){return a.__proto__=s||o.prototype,a},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(a,s){return this.then((function(){switch(s=s||(function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(a)){case"string":return this.then(t).then((function(l){return this.set({src:i("div",{innerHTML:a,dompurify:l})})}));case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}}))},o.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},s=(function l(u,c){for(var f=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),h=u.firstChild;h;h=h.nextSibling)c!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||f.appendChild(l(h,c));return u.nodeType===1&&(u.nodeName==="CANVAS"?(f.width=u.width,f.height=u.height,f.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(f.value=u.value),f.addEventListener("load",(function(){f.scrollTop=u.scrollTop,f.scrollLeft=u.scrollLeft}),!0)),f})(this.prop.src,this.opt.html2canvas.javascriptEnabled);s.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(s),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},o.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then((function(s){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,s(this.prop.container,l)})).then((function(s){(this.opt.html2canvas.onrendered||function(){})(s),this.prop.canvas=s,document.body.removeChild(this.prop.overlay)}))},o.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then((function(s){var l=this.opt.jsPDF,u=this.opt.fontFaces,c=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:c,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var h=0;h<u.length;++h){var p=u[h],v=p.src.find((function(S){return S.format==="truetype"}));v&&l.addFont(v.url,p.ref.name,p.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,l.context2d.save(!0),s(this.prop.container,f)})).then((function(s){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(s),this.prop.canvas=s,document.body.removeChild(this.prop.overlay)}))},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a}))},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},o.prototype.output=function(a,s,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(a,s):this.outputPdf(a,s)},o.prototype.outputPdf=function(a,s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(a,s)}))},o.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}}))},o.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},o.prototype.set=function(a){if(r(a)!=="object")return this;var s=Object.keys(a||{}).map((function(l){if(l in o.template.prop)return function(){this.prop[l]=a[l]};switch(l){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[l]=a[l]}}}),this);return this.then((function(){return this.thenList(s)}))},o.prototype.get=function(a,s){return this.then((function(){var l=a in o.template.prop?this.prop[a]:this.opt[a];return s?s(l):l}))},o.prototype.setMargin=function(a){return this.then((function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a})).then(this.setPageSize)},o.prototype.setPageSize=function(a){function s(l,u){return Math.floor(l*u/72*96)}return this.then((function(){(a=a||Vn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:s(a.inner.width,a.k),height:s(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a}))},o.prototype.setProgress=function(a,s,l,u){return a!=null&&(this.progress.val=a),s!=null&&(this.progress.state=s),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(a,s,l,u){return this.setProgress(a?this.progress.val+a:null,s||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},o.prototype.then=function(a,s){var l=this;return this.thenCore(a,s,(function(u,c){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,(function(f){return l.updateProgress(null,u),f})).then(u,c).then((function(f){return l.updateProgress(1),f}))}))},o.prototype.thenCore=function(a,s,l){l=l||Promise.prototype.then,a&&(a=a.bind(this)),s&&(s=s.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:o.convert(Object.assign({},this),Promise.prototype),c=l.call(u,a,s);return o.convert(c,this.__proto__)},o.prototype.thenExternal=function(a,s){return Promise.prototype.then.call(this,a,s)},o.prototype.thenList=function(a){var s=this;return a.forEach((function(l){s=s.thenCore(l)})),s},o.prototype.catch=function(a){a&&(a=a.bind(this));var s=Promise.prototype.catch.call(this,a);return o.convert(s,this)},o.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},o.prototype.error=function(a){return this.then((function(){throw new Error(a)}))},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,Vn.getPageSize=function(a,s,l){if(Ci(a)==="object"){var u=a;a=u.orientation,s=u.unit||s,l=u.format||l}s=s||"mm",l=l||"a4",a=(""+(a||"P")).toLowerCase();var c,f=(""+l).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(s){case"pt":c=1;break;case"mm":c=72/25.4;break;case"cm":c=72/2.54;break;case"in":c=72;break;case"px":c=.75;break;case"pc":case"em":c=12;break;case"ex":c=6;break;default:throw"Invalid unit: "+s}var p,v=0,S=0;if(h.hasOwnProperty(f))v=h[f][1]/c,S=h[f][0]/c;else try{v=l[1],S=l[0]}catch{throw new Error("Invalid format: "+l)}if(a==="p"||a==="portrait")a="p",S>v&&(p=S,S=v,v=p);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",v>S&&(p=S,S=v,v=p)}return{width:S,height:v,unit:s,k:c,orientation:a}},n.html=function(a,s){(s=s||{}).callback=s.callback||function(){},s.html2canvas=s.html2canvas||{},s.html2canvas.canvas=s.html2canvas.canvas||this.canvas,s.jsPDF=s.jsPDF||this,s.fontFaces=s.fontFaces?s.fontFaces.map($C):null;var l=new o(s);return s.worker?l:l.from(a).doCallback()}})(Vn.API),Vn.API.addJS=function(n){return f4=n,this.internal.events.subscribe("postPutResources",(function(){kx=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(kx+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),c4=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+f4+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){kx!==void 0&&c4!==void 0&&this.internal.out("/Names <</JavaScript "+kx+" 0 R>>")})),this},(function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),o=0;o<i.length;o++){var a=i[o],s=r.exec(a);if(s!=null){var l=s[1];t.internal.newObjectDeferredBegin(l,!1)}t.internal.write(a)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,c=[];for(o=0;o<u;o++){var f=t.internal.newObject();c.push(f);var h=t.internal.getPageInfo(o+1);t.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var p=t.internal.newObject();for(t.internal.write("<< /Names [ "),o=0;o<c.length;o++)t.internal.write("(page_"+(o+1)+")"+c[o]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+p+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,o){var a={title:i,options:o,children:[]};return r==null&&(r=this.root),r.children.push(a),a},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<r.children.length;o++){var a=r.children[o];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(r)),o>0&&this.line("/Prev "+this.makeRef(r.children[o-1])),o<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[o+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var s=this.count=this.count_r({count:0},a);if(s>0&&this.line("/Count "+s),a.options&&a.options.pageNumber){var l=t.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var o=0;o<i.children.length;o++)r.count++,this.count_r(r,i.children[o]);return r.count}}])})(Vn.API),(function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,o,a,s){var l,u=this.decode.DCT_DECODE,c=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=a||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(l=(function(f){for(var h,p=256*f.charCodeAt(4)+f.charCodeAt(5),v=f.length,S={width:0,height:0,numcomponents:1},y=4;y<v;y+=2){if(y+=p,e.indexOf(f.charCodeAt(y+1))!==-1){h=256*f.charCodeAt(y+5)+f.charCodeAt(y+6),S={width:256*f.charCodeAt(y+7)+f.charCodeAt(y+8),height:h,numcomponents:f.charCodeAt(y+9)};break}p=256*f.charCodeAt(y+2)+f.charCodeAt(y+3)}return S})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:s=this.color_spaces.DEVICE_GRAY;break;case 4:s=this.color_spaces.DEVICE_CMYK;break;case 3:s=this.color_spaces.DEVICE_RGB}c={data:t,width:l.width,height:l.height,colorSpace:s,bitsPerComponent:8,filter:u,index:r,alias:i}}return c}})(Vn.API);var zm,Fx,d4,h4,p4,kle=(function(){var n,e,t;function r(o){var a,s,l,u,c,f,h,p,v,S,y,_,w,A;for(this.data=o,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(a=this.readUInt32(),v=(function(){var E,P;for(P=[],E=0;E<4;++E)P.push(String.fromCharCode(this.data[this.pos++]));return P}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},c=this.readUInt16(),u=this.readUInt16()||100,f.delay=1e3*c/u,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for(v==="fdAT"&&(this.pos+=4,a-=4),o=(f!=null?f.data:void 0)||this.imgData,_=0;0<=a?_<a:_>a;0<=a?++_:--_)o.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((S=l-this.transparency.indexed.length)>0)for(w=0;0<=S?w<S:w>S;0<=S?++w:--w)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":h=(y=this.read(a)).indexOf(0),p=String.fromCharCode.apply(String,y.slice(0,h)),this.text[p]=String.fromCharCode.apply(String,y.slice(h+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(A=this.colorType)===4||A===6,s=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*s,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(o){var a,s;for(s=[],a=0;0<=o?a<o:a>o;0<=o?++a:--a)s.push(this.data[this.pos++]);return s},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(o){var a=this.pixelBitlength/8,s=new Uint8Array(this.width*this.height*a),l=0,u=this;if(o==null&&(o=this.imgData),o.length===0)return new Uint8Array(0);function c(f,h,p,v){var S,y,_,w,A,E,P,O,L,D,F,U,k,z,W,j,se,Y,Q,X,Z,oe=Math.ceil((u.width-f)/p),ee=Math.ceil((u.height-h)/v),G=u.width==oe&&u.height==ee;for(z=a*oe,U=G?s:new Uint8Array(z*ee),E=o.length,k=0,y=0;k<ee&&l<E;){switch(o[l++]){case 0:for(w=se=0;se<z;w=se+=1)U[y++]=o[l++];break;case 1:for(w=Y=0;Y<z;w=Y+=1)S=o[l++],A=w<a?0:U[y-a],U[y++]=(S+A)%256;break;case 2:for(w=Q=0;Q<z;w=Q+=1)S=o[l++],_=(w-w%a)/a,W=k&&U[(k-1)*z+_*a+w%a],U[y++]=(W+S)%256;break;case 3:for(w=X=0;X<z;w=X+=1)S=o[l++],_=(w-w%a)/a,A=w<a?0:U[y-a],W=k&&U[(k-1)*z+_*a+w%a],U[y++]=(S+Math.floor((A+W)/2))%256;break;case 4:for(w=Z=0;Z<z;w=Z+=1)S=o[l++],_=(w-w%a)/a,A=w<a?0:U[y-a],k===0?W=j=0:(W=U[(k-1)*z+_*a+w%a],j=_&&U[(k-1)*z+(_-1)*a+w%a]),P=A+W-j,O=Math.abs(P-A),D=Math.abs(P-W),F=Math.abs(P-j),L=O<=D&&O<=F?A:D<=F?W:j,U[y++]=(S+L)%256;break;default:throw new Error("Invalid filter algorithm: "+o[l-1])}if(!G){var ne=((h+k*v)*u.width+f)*a,te=k*z;for(w=0;w<oe;w+=1){for(var de=0;de<a;de+=1)s[ne++]=U[te++];ne+=(p-1)*a}}k++}}return o=mle(o),u.interlaceMethod==1?(c(0,0,8,8),c(4,0,8,8),c(0,4,4,8),c(2,0,4,4),c(0,2,2,4),c(1,0,2,2),c(0,1,1,2)):c(0,0,1,1),s},r.prototype.decodePalette=function(){var o,a,s,l,u,c,f,h,p;for(s=this.palette,c=this.transparency.indexed||[],u=new Uint8Array((c.length||0)+s.length),l=0,o=0,a=f=0,h=s.length;f<h;a=f+=3)u[l++]=s[a],u[l++]=s[a+1],u[l++]=s[a+2],u[l++]=(p=c[o++])!=null?p:255;return u},r.prototype.copyToImageData=function(o,a){var s,l,u,c,f,h,p,v,S,y,_;if(l=this.colors,S=null,s=this.hasAlphaChannel,this.palette.length&&(S=(_=this._decodedPalette)!=null?_:this._decodedPalette=this.decodePalette(),l=4,s=!0),v=(u=o.data||o).length,f=S||a,c=h=0,l===1)for(;c<v;)p=S?4*a[c/4]:h,y=f[p++],u[c++]=y,u[c++]=y,u[c++]=y,u[c++]=s?f[p++]:255,h=p;else for(;c<v;)p=S?4*a[c/4]:h,u[c++]=f[p++],u[c++]=f[p++],u[c++]=f[p++],u[c++]=s?f[p++]:255,h=p},r.prototype.decode=function(){var o;return o=new Uint8Array(this.width*this.height*4),this.copyToImageData(o,this.decodePixels()),o};var i=function(){if(Object.prototype.toString.call(Jn)==="[object Window]"){try{e=Jn.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),n=function(o){var a;if(i()===!0)return t.width=o.width,t.height=o.height,t.clearRect(0,0,o.width,o.height),t.putImageData(o,0,0),(a=new Image).src=e.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(o){var a,s,l,u,c,f,h,p;if(this.animation){for(p=[],s=c=0,f=(h=this.animation.frames).length;c<f;s=++c)a=h[s],l=o.createImageData(a.width,a.height),u=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(l,u),a.imageData=l,p.push(a.image=n(l));return p}},r.prototype.renderFrame=function(o,a){var s,l,u;return s=(l=this.animation.frames)[a],u=l[a-1],a===0&&o.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?o.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&o.putImageData(u.imageData,u.xOffset,u.yOffset),s.blendOp===0&&o.clearRect(s.xOffset,s.yOffset,s.width,s.height),o.drawImage(s.image,s.xOffset,s.yOffset)},r.prototype.animate=function(o){var a,s,l,u,c,f,h=this;return s=0,f=this.animation,u=f.numFrames,l=f.frames,c=f.numPlays,(a=function(){var p,v;if(p=s++%u,v=l[p],h.renderFrame(o,p),u>1&&s/u<c)return h.animation._timeout=setTimeout(a,v.delay)})()},r.prototype.stopAnimation=function(){var o;return clearTimeout((o=this.animation)!=null?o._timeout:void 0)},r.prototype.render=function(o){var a,s;return o._png&&o._png.stopAnimation(),o._png=this,o.width=this.width,o.height=this.height,a=o.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(s=a.createImageData(this.width,this.height),this.copyToImageData(s,this.decodePixels()),a.putImageData(s,0,0))},r})();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Fle(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],o=i>>7,a=1<<(7&i)+1;n[e++],n[e++];var s=null,l=null;o&&(s=e,l=a,e+=3*a);var u=!0,c=[],f=0,h=null,p=0,v=null;for(this.width=t,this.height=r;u&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,v=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((k=n[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var S=n[e++];f=n[e++]|n[e++]<<8,h=n[e++],(1&S)==0&&(h=null),p=S>>2&7,e++;break;case 254:for(;;){if(!((k=n[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var y=n[e++]|n[e++]<<8,_=n[e++]|n[e++]<<8,w=n[e++]|n[e++]<<8,A=n[e++]|n[e++]<<8,E=n[e++],P=E>>6&1,O=1<<(7&E)+1,L=s,D=l,F=!1;E>>7&&(F=!0,L=e,D=O,e+=3*O);var U=e;for(e++;;){var k;if(!((k=n[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}c.push({x:y,y:_,width:w,height:A,has_local_palette:F,palette_offset:L,palette_size:D,data_offset:U,data_length:e-U,transparent_index:h,interlaced:!!P,delay:f,disposal:p});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return c.length},this.loopCount=function(){return v},this.frameInfo=function(z){if(z<0||z>=c.length)throw new Error("Frame index out of range.");return c[z]},this.decodeAndBlitFrameBGRA=function(z,W){var j=this.frameInfo(z),se=j.width*j.height,Y=new Uint8Array(se);m4(n,j.data_offset,Y,se);var Q=j.palette_offset,X=j.transparent_index;X===null&&(X=256);var Z=j.width,oe=t-Z,ee=Z,G=4*(j.y*t+j.x),ne=4*((j.y+j.height)*t+j.x),te=G,de=4*oe;j.interlaced===!0&&(de+=4*t*7);for(var me=8,be=0,Ie=Y.length;be<Ie;++be){var Ee=Y[be];if(ee===0&&(ee=Z,(te+=de)>=ne&&(de=4*oe+4*t*(me-1),te=G+(Z+oe)*(me<<1),me>>=1)),Ee===X)te+=4;else{var Xe=n[Q+3*Ee],tt=n[Q+3*Ee+1],Te=n[Q+3*Ee+2];W[te++]=Te,W[te++]=tt,W[te++]=Xe,W[te++]=255}--ee}},this.decodeAndBlitFrameRGBA=function(z,W){var j=this.frameInfo(z),se=j.width*j.height,Y=new Uint8Array(se);m4(n,j.data_offset,Y,se);var Q=j.palette_offset,X=j.transparent_index;X===null&&(X=256);var Z=j.width,oe=t-Z,ee=Z,G=4*(j.y*t+j.x),ne=4*((j.y+j.height)*t+j.x),te=G,de=4*oe;j.interlaced===!0&&(de+=4*t*7);for(var me=8,be=0,Ie=Y.length;be<Ie;++be){var Ee=Y[be];if(ee===0&&(ee=Z,(te+=de)>=ne&&(de=4*oe+4*t*(me-1),te=G+(Z+oe)*(me<<1),me>>=1)),Ee===X)te+=4;else{var Xe=n[Q+3*Ee],tt=n[Q+3*Ee+1],Te=n[Q+3*Ee+2];W[te++]=Xe,W[te++]=tt,W[te++]=Te,W[te++]=255}--ee}}}function m4(n,e,t,r){for(var i=n[e++],o=1<<i,a=o+1,s=a+1,l=i+1,u=(1<<l)-1,c=0,f=0,h=0,p=n[e++],v=new Int32Array(4096),S=null;;){for(;c<16&&p!==0;)f|=n[e++]<<c,c+=8,p===1?p=n[e++]:--p;if(c<l)break;var y=f&u;if(f>>=l,c-=l,y!==o){if(y===a)break;for(var _=y<s?y:S,w=0,A=_;A>o;)A=v[A]>>8,++w;var E=A;if(h+w+(_!==y?1:0)>r)return void Ui.log("Warning, gif stream longer than expected.");t[h++]=E;var P=h+=w;for(_!==y&&(t[h++]=E),A=_;w--;)A=v[A],t[--P]=255&A,A>>=8;S!==null&&s<4096&&(v[s++]=S<<8|E,s>=u+1&&l<12&&(++l,u=u<<1|1)),S=y}else s=a+1,u=(1<<(l=i+1))-1,S=null}return h!==r&&Ui.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function tA(n){var e,t,r,i,o,a=Math.floor,s=new Array(64),l=new Array(64),u=new Array(64),c=new Array(64),f=new Array(65535),h=new Array(65535),p=new Array(64),v=new Array(64),S=[],y=0,_=7,w=new Array(64),A=new Array(64),E=new Array(64),P=new Array(256),O=new Array(2048),L=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],D=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],F=[0,1,2,3,4,5,6,7,8,9,10,11],U=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],k=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],z=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],W=[0,1,2,3,4,5,6,7,8,9,10,11],j=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],se=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Y(G,ne){for(var te=0,de=0,me=new Array,be=1;be<=16;be++){for(var Ie=1;Ie<=G[be];Ie++)me[ne[de]]=[],me[ne[de]][0]=te,me[ne[de]][1]=be,de++,te++;te*=2}return me}function Q(G){for(var ne=G[0],te=G[1]-1;te>=0;)ne&1<<te&&(y|=1<<_),te--,--_<0&&(y==255?(X(255),X(0)):X(y),_=7,y=0)}function X(G){S.push(G)}function Z(G){X(G>>8&255),X(255&G)}function oe(G,ne,te,de,me){for(var be,Ie=me[0],Ee=me[240],Xe=(function(mt,lt){var ve,le,He,rt,vt,ht,qt,Ft,Rt,tn,it=0;for(Rt=0;Rt<8;++Rt){ve=mt[it],le=mt[it+1],He=mt[it+2],rt=mt[it+3],vt=mt[it+4],ht=mt[it+5],qt=mt[it+6];var Zt=ve+(Ft=mt[it+7]),Xt=ve-Ft,un=le+qt,Wt=le-qt,mn=He+ht,fn=He-ht,nn=rt+vt,Ke=rt-vt,ot=Zt+nn,pt=Zt-nn,It=un+mn,Ht=un-mn;mt[it]=ot+It,mt[it+4]=ot-It;var Lt=.707106781*(Ht+pt);mt[it+2]=pt+Lt,mt[it+6]=pt-Lt;var rn=.382683433*((ot=Ke+fn)-(Ht=Wt+Xt)),ir=.5411961*ot+rn,$n=1.306562965*Ht+rn,Gn=.707106781*(It=fn+Wt),Br=Xt+Gn,gn=Xt-Gn;mt[it+5]=gn+ir,mt[it+3]=gn-ir,mt[it+1]=Br+$n,mt[it+7]=Br-$n,it+=8}for(it=0,Rt=0;Rt<8;++Rt){ve=mt[it],le=mt[it+8],He=mt[it+16],rt=mt[it+24],vt=mt[it+32],ht=mt[it+40],qt=mt[it+48];var Di=ve+(Ft=mt[it+56]),vi=ve-Ft,Er=le+qt,xr=le-qt,Cr=He+ht,zr=He-ht,Un=rt+vt,Po=rt-vt,uo=Di+Un,ue=Di-Un,we=Er+Cr,ze=Er-Cr;mt[it]=uo+we,mt[it+32]=uo-we;var ct=.707106781*(ze+ue);mt[it+16]=ue+ct,mt[it+48]=ue-ct;var xt=.382683433*((uo=Po+zr)-(ze=xr+vi)),ae=.5411961*uo+xt,Ce=1.306562965*ze+xt,De=.707106781*(we=zr+xr),Ue=vi+De,Re=vi-De;mt[it+40]=Re+ae,mt[it+24]=Re-ae,mt[it+8]=Ue+Ce,mt[it+56]=Ue-Ce,it++}for(Rt=0;Rt<64;++Rt)tn=mt[Rt]*lt[Rt],p[Rt]=tn>0?tn+.5|0:tn-.5|0;return p})(G,ne),tt=0;tt<64;++tt)v[L[tt]]=Xe[tt];var Te=v[0]-te;te=v[0],Te==0?Q(de[0]):(Q(de[h[be=32767+Te]]),Q(f[be]));for(var Je=63;Je>0&&v[Je]==0;)Je--;if(Je==0)return Q(Ie),te;for(var Se,Ge=1;Ge<=Je;){for(var ye=Ge;v[Ge]==0&&Ge<=Je;)++Ge;var Ct=Ge-ye;if(Ct>=16){Se=Ct>>4;for(var ft=1;ft<=Se;++ft)Q(Ee);Ct&=15}be=32767+v[Ge],Q(me[(Ct<<4)+h[be]]),Q(f[be]),Ge++}return Je!=63&&Q(Ie),te}function ee(G){G=Math.min(Math.max(G,1),100),o!=G&&((function(ne){for(var te=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],de=0;de<64;de++){var me=a((te[de]*ne+50)/100);me=Math.min(Math.max(me,1),255),s[L[de]]=me}for(var be=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ie=0;Ie<64;Ie++){var Ee=a((be[Ie]*ne+50)/100);Ee=Math.min(Math.max(Ee,1),255),l[L[Ie]]=Ee}for(var Xe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],tt=0,Te=0;Te<8;Te++)for(var Je=0;Je<8;Je++)u[tt]=1/(s[L[tt]]*Xe[Te]*Xe[Je]*8),c[tt]=1/(l[L[tt]]*Xe[Te]*Xe[Je]*8),tt++})(G<50?Math.floor(5e3/G):Math.floor(200-2*G)),o=G)}this.encode=function(G,ne){ne&&ee(ne),S=new Array,y=0,_=7,Z(65496),Z(65504),Z(16),X(74),X(70),X(73),X(70),X(0),X(1),X(1),X(0),Z(1),Z(1),X(0),X(0),(function(){Z(65499),Z(132),X(0);for(var le=0;le<64;le++)X(s[le]);X(1);for(var He=0;He<64;He++)X(l[He])})(),(function(le,He){Z(65472),Z(17),X(8),Z(He),Z(le),X(3),X(1),X(17),X(0),X(2),X(17),X(1),X(3),X(17),X(1)})(G.width,G.height),(function(){Z(65476),Z(418),X(0);for(var le=0;le<16;le++)X(D[le+1]);for(var He=0;He<=11;He++)X(F[He]);X(16);for(var rt=0;rt<16;rt++)X(U[rt+1]);for(var vt=0;vt<=161;vt++)X(k[vt]);X(1);for(var ht=0;ht<16;ht++)X(z[ht+1]);for(var qt=0;qt<=11;qt++)X(W[qt]);X(17);for(var Ft=0;Ft<16;Ft++)X(j[Ft+1]);for(var Rt=0;Rt<=161;Rt++)X(se[Rt])})(),Z(65498),Z(12),X(3),X(1),X(0),X(2),X(17),X(3),X(17),X(0),X(63),X(0);var te=0,de=0,me=0;y=0,_=7,this.encode.displayName="_encode_";for(var be,Ie,Ee,Xe,tt,Te,Je,Se,Ge,ye=G.data,Ct=G.width,ft=G.height,mt=4*Ct,lt=0;lt<ft;){for(be=0;be<mt;){for(tt=mt*lt+be,Je=-1,Se=0,Ge=0;Ge<64;Ge++)Te=tt+(Se=Ge>>3)*mt+(Je=4*(7&Ge)),lt+Se>=ft&&(Te-=mt*(lt+1+Se-ft)),be+Je>=mt&&(Te-=be+Je-mt+4),Ie=ye[Te++],Ee=ye[Te++],Xe=ye[Te++],w[Ge]=(O[Ie]+O[Ee+256>>0]+O[Xe+512>>0]>>16)-128,A[Ge]=(O[Ie+768>>0]+O[Ee+1024>>0]+O[Xe+1280>>0]>>16)-128,E[Ge]=(O[Ie+1280>>0]+O[Ee+1536>>0]+O[Xe+1792>>0]>>16)-128;te=oe(w,u,te,e,r),de=oe(A,c,de,t,i),me=oe(E,c,me,t,i),be+=32}lt+=8}if(_>=0){var ve=[];ve[1]=_+1,ve[0]=(1<<_+1)-1,Q(ve)}return Z(65497),new Uint8Array(S)},n=n||50,(function(){for(var G=String.fromCharCode,ne=0;ne<256;ne++)P[ne]=G(ne)})(),e=Y(D,F),t=Y(z,W),r=Y(U,k),i=Y(j,se),(function(){for(var G=1,ne=2,te=1;te<=15;te++){for(var de=G;de<ne;de++)h[32767+de]=te,f[32767+de]=[],f[32767+de][1]=te,f[32767+de][0]=de;for(var me=-(ne-1);me<=-G;me++)h[32767+me]=te,f[32767+me]=[],f[32767+me][1]=te,f[32767+me][0]=ne-1+me;G<<=1,ne<<=1}})(),(function(){for(var G=0;G<256;G++)O[G]=19595*G,O[G+256>>0]=38470*G,O[G+512>>0]=7471*G+32768,O[G+768>>0]=-11059*G,O[G+1024>>0]=-21709*G,O[G+1280>>0]=32768*G+8421375,O[G+1536>>0]=-27439*G,O[G+1792>>0]=-5329*G})(),ee(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function wc(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function g4(n){function e(D){if(!D)throw Error("assert :P")}function t(D,F,U){for(var k=0;4>k;k++)if(D[F+k]!=U.charCodeAt(k))return!0;return!1}function r(D,F,U,k,z){for(var W=0;W<z;W++)D[F+W]=U[k+W]}function i(D,F,U,k){for(var z=0;z<k;z++)D[F+z]=U}function o(D){return new Int32Array(D)}function a(D,F){for(var U=[],k=0;k<D;k++)U.push(new F);return U}function s(D,F){var U=[];return(function k(z,W,j){for(var se=j[W],Y=0;Y<se&&(z.push(j.length>W+1?[]:new F),!(j.length<W+1));Y++)k(z[Y],W+1,j)})(U,0,D),U}var l=function(){var D=this;function F(M,N){for(var q=1<<N-1>>>0;M&q;)q>>>=1;return q?(M&q-1)+q:M}function U(M,N,q,J,ce){e(!(J%q));do M[N+(J-=q)]=ce;while(0<J)}function k(M,N,q,J,ce){if(e(2328>=ce),512>=ce)var he=o(512);else if((he=o(ce))==null)return 0;return(function(ge,xe,_e,Ae,je,Fe){var st,Ze,Dt=xe,wt=1<<_e,We=o(16),$e=o(16);for(e(je!=0),e(Ae!=null),e(ge!=null),e(0<_e),Ze=0;Ze<je;++Ze){if(15<Ae[Ze])return 0;++We[Ae[Ze]]}if(We[0]==je)return 0;for($e[1]=0,st=1;15>st;++st){if(We[st]>1<<st)return 0;$e[st+1]=$e[st]+We[st]}for(Ze=0;Ze<je;++Ze)st=Ae[Ze],0<Ae[Ze]&&(Fe[$e[st]++]=Ze);if($e[15]==1)return(Ae=new z).g=0,Ae.value=Fe[0],U(ge,Dt,1,wt,Ae),wt;var Tt,Mt=-1,Nt=wt-1,dn=0,on=1,Dn=1,sn=1<<_e;for(Ze=0,st=1,je=2;st<=_e;++st,je<<=1){if(on+=Dn<<=1,0>(Dn-=We[st]))return 0;for(;0<We[st];--We[st])(Ae=new z).g=st,Ae.value=Fe[Ze++],U(ge,Dt+dn,je,sn,Ae),dn=F(dn,st)}for(st=_e+1,je=2;15>=st;++st,je<<=1){if(on+=Dn<<=1,0>(Dn-=We[st]))return 0;for(;0<We[st];--We[st]){if(Ae=new z,(dn&Nt)!=Mt){for(Dt+=sn,Tt=1<<(Mt=st)-_e;15>Mt&&!(0>=(Tt-=We[Mt]));)++Mt,Tt<<=1;wt+=sn=1<<(Tt=Mt-_e),ge[xe+(Mt=dn&Nt)].g=Tt+_e,ge[xe+Mt].value=Dt-xe-Mt}Ae.g=st-_e,Ae.value=Fe[Ze++],U(ge,Dt+(dn>>_e),je,sn,Ae),dn=F(dn,st)}}return on!=2*$e[15]-1?0:wt})(M,N,q,J,ce,he)}function z(){this.value=this.g=0}function W(){this.value=this.g=0}function j(){this.G=a(5,z),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Zi,W)}function se(M,N,q,J){e(M!=null),e(N!=null),e(2147483648>J),M.Ca=254,M.I=0,M.b=-8,M.Ka=0,M.oa=N,M.pa=q,M.Jd=N,M.Yc=q+J,M.Zc=4<=J?q+J-4+1:q,be(M)}function Y(M,N){for(var q=0;0<N--;)q|=Ee(M,128)<<N;return q}function Q(M,N){var q=Y(M,N);return Ie(M)?-q:q}function X(M,N,q,J){var ce,he=0;for(e(M!=null),e(N!=null),e(4294967288>J),M.Sb=J,M.Ra=0,M.u=0,M.h=0,4<J&&(J=4),ce=0;ce<J;++ce)he+=N[q+ce]<<8*ce;M.Ra=he,M.bb=J,M.oa=N,M.pa=q}function Z(M){for(;8<=M.u&&M.bb<M.Sb;)M.Ra>>>=8,M.Ra+=M.oa[M.pa+M.bb]<<Us-8>>>0,++M.bb,M.u-=8;te(M)&&(M.h=1,M.u=0)}function oe(M,N){if(e(0<=N),!M.h&&N<=xl){var q=ne(M)&ec[N];return M.u+=N,Z(M),q}return M.h=1,M.u=0}function ee(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function G(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function ne(M){return M.Ra>>>(M.u&Us-1)>>>0}function te(M){return e(M.bb<=M.Sb),M.h||M.bb==M.Sb&&M.u>Us}function de(M,N){M.u=N,M.h=te(M)}function me(M){M.u>=vu&&(e(M.u>=vu),Z(M))}function be(M){e(M!=null&&M.oa!=null),M.pa<M.Zc?(M.I=(M.oa[M.pa++]|M.I<<8)>>>0,M.b+=8):(e(M!=null&&M.oa!=null),M.pa<M.Yc?(M.b+=8,M.I=M.oa[M.pa++]|M.I<<8):M.Ka?M.b=0:(M.I<<=8,M.b+=8,M.Ka=1))}function Ie(M){return Y(M,1)}function Ee(M,N){var q=M.Ca;0>M.b&&be(M);var J=M.b,ce=q*N>>>8,he=(M.I>>>J>ce)+0;for(he?(q-=ce,M.I-=ce+1<<J>>>0):q=ce+1,J=q,ce=0;256<=J;)ce+=8,J>>=8;return J=7^ce+_o[J],M.b-=J,M.Ca=(q<<J)-1,he}function Xe(M,N,q){M[N+0]=q>>24&255,M[N+1]=q>>16&255,M[N+2]=q>>8&255,M[N+3]=q>>0&255}function tt(M,N){return M[N+0]<<0|M[N+1]<<8}function Te(M,N){return tt(M,N)|M[N+2]<<16}function Je(M,N){return tt(M,N)|tt(M,N+2)<<16}function Se(M,N){var q=1<<N;return e(M!=null),e(0<N),M.X=o(q),M.X==null?0:(M.Mb=32-N,M.Xa=N,1)}function Ge(M,N){e(M!=null),e(N!=null),e(M.Xa==N.Xa),r(N.X,0,M.X,0,1<<N.Xa)}function ye(){this.X=[],this.Xa=this.Mb=0}function Ct(M,N,q,J){e(q!=null),e(J!=null);var ce=q[0],he=J[0];return ce==0&&(ce=(M*he+N/2)/N),he==0&&(he=(N*ce+M/2)/M),0>=ce||0>=he?0:(q[0]=ce,J[0]=he,1)}function ft(M,N){return M+(1<<N)-1>>>N}function mt(M,N){return((4278255360&M)+(4278255360&N)>>>0&4278255360)+((16711935&M)+(16711935&N)>>>0&16711935)>>>0}function lt(M,N){D[N]=function(q,J,ce,he,ge,xe,_e){var Ae;for(Ae=0;Ae<ge;++Ae){var je=D[M](xe[_e+Ae-1],ce,he+Ae);xe[_e+Ae]=mt(q[J+Ae],je)}}}function ve(){this.ud=this.hd=this.jd=0}function le(M,N){return((4278124286&(M^N))>>>1)+(M&N)>>>0}function He(M){return 0<=M&&256>M?M:0>M?0:255<M?255:void 0}function rt(M,N){return He(M+(M-N+.5>>1))}function vt(M,N,q){return Math.abs(N-q)-Math.abs(M-q)}function ht(M,N,q,J,ce,he,ge){for(J=he[ge-1],q=0;q<ce;++q)he[ge+q]=J=mt(M[N+q],J)}function qt(M,N,q,J,ce){var he;for(he=0;he<q;++he){var ge=M[N+he],xe=ge>>8&255,_e=16711935&(_e=(_e=16711935&ge)+((xe<<16)+xe));J[ce+he]=(4278255360&ge)+_e>>>0}}function Ft(M,N){N.jd=M>>0&255,N.hd=M>>8&255,N.ud=M>>16&255}function Rt(M,N,q,J,ce,he){var ge;for(ge=0;ge<J;++ge){var xe=N[q+ge],_e=xe>>>8,Ae=xe,je=255&(je=(je=xe>>>16)+((M.jd<<24>>24)*(_e<<24>>24)>>>5));Ae=255&(Ae=(Ae=Ae+((M.hd<<24>>24)*(_e<<24>>24)>>>5))+((M.ud<<24>>24)*(je<<24>>24)>>>5)),ce[he+ge]=(4278255360&xe)+(je<<16)+Ae}}function tn(M,N,q,J,ce){D[N]=function(he,ge,xe,_e,Ae,je,Fe,st,Ze){for(_e=Fe;_e<st;++_e)for(Fe=0;Fe<Ze;++Fe)Ae[je++]=ce(xe[J(he[ge++])])},D[M]=function(he,ge,xe,_e,Ae,je,Fe){var st=8>>he.b,Ze=he.Ea,Dt=he.K[0],wt=he.w;if(8>st)for(he=(1<<he.b)-1,wt=(1<<st)-1;ge<xe;++ge){var We,$e=0;for(We=0;We<Ze;++We)We&he||($e=J(_e[Ae++])),je[Fe++]=ce(Dt[$e&wt]),$e>>=st}else D["VP8LMapColor"+q](_e,Ae,Dt,wt,je,Fe,ge,xe,Ze)}}function it(M,N,q,J,ce){for(q=N+q;N<q;){var he=M[N++];J[ce++]=he>>16&255,J[ce++]=he>>8&255,J[ce++]=he>>0&255}}function Zt(M,N,q,J,ce){for(q=N+q;N<q;){var he=M[N++];J[ce++]=he>>16&255,J[ce++]=he>>8&255,J[ce++]=he>>0&255,J[ce++]=he>>24&255}}function Xt(M,N,q,J,ce){for(q=N+q;N<q;){var he=(ge=M[N++])>>16&240|ge>>12&15,ge=ge>>0&240|ge>>28&15;J[ce++]=he,J[ce++]=ge}}function un(M,N,q,J,ce){for(q=N+q;N<q;){var he=(ge=M[N++])>>16&248|ge>>13&7,ge=ge>>5&224|ge>>3&31;J[ce++]=he,J[ce++]=ge}}function Wt(M,N,q,J,ce){for(q=N+q;N<q;){var he=M[N++];J[ce++]=he>>0&255,J[ce++]=he>>8&255,J[ce++]=he>>16&255}}function mn(M,N,q,J,ce,he){if(he==0)for(q=N+q;N<q;)Xe(J,((he=M[N++])[0]>>24|he[1]>>8&65280|he[2]<<8&16711680|he[3]<<24)>>>0),ce+=32;else r(J,ce,M,N,q)}function fn(M,N){D[N][0]=D[M+"0"],D[N][1]=D[M+"1"],D[N][2]=D[M+"2"],D[N][3]=D[M+"3"],D[N][4]=D[M+"4"],D[N][5]=D[M+"5"],D[N][6]=D[M+"6"],D[N][7]=D[M+"7"],D[N][8]=D[M+"8"],D[N][9]=D[M+"9"],D[N][10]=D[M+"10"],D[N][11]=D[M+"11"],D[N][12]=D[M+"12"],D[N][13]=D[M+"13"],D[N][14]=D[M+"0"],D[N][15]=D[M+"0"]}function nn(M){return M==rc||M==Su||M==ic||M==Xc}function Ke(){this.eb=[],this.size=this.A=this.fb=0}function ot(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function pt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ke,this.f.kb=new ot,this.sd=null}function It(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Ht(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Lt(M){return alert("todo:WebPSamplerProcessPlane"),M.T}function rn(M,N){var q=M.T,J=N.ba.f.RGBA,ce=J.eb,he=J.fb+M.ka*J.A,ge=Oo[N.ba.S],xe=M.y,_e=M.O,Ae=M.f,je=M.N,Fe=M.ea,st=M.W,Ze=N.cc,Dt=N.dc,wt=N.Mc,We=N.Nc,$e=M.ka,Tt=M.ka+M.T,Mt=M.U,Nt=Mt+1>>1;for($e==0?ge(xe,_e,null,null,Ae,je,Fe,st,Ae,je,Fe,st,ce,he,null,null,Mt):(ge(N.ec,N.fc,xe,_e,Ze,Dt,wt,We,Ae,je,Fe,st,ce,he-J.A,ce,he,Mt),++q);$e+2<Tt;$e+=2)Ze=Ae,Dt=je,wt=Fe,We=st,je+=M.Rc,st+=M.Rc,he+=2*J.A,ge(xe,(_e+=2*M.fa)-M.fa,xe,_e,Ze,Dt,wt,We,Ae,je,Fe,st,ce,he-J.A,ce,he,Mt);return _e+=M.fa,M.j+Tt<M.o?(r(N.ec,N.fc,xe,_e,Mt),r(N.cc,N.dc,Ae,je,Nt),r(N.Mc,N.Nc,Fe,st,Nt),q--):1&Tt||ge(xe,_e,null,null,Ae,je,Fe,st,Ae,je,Fe,st,ce,he+J.A,null,null,Mt),q}function ir(M,N,q){var J=M.F,ce=[M.J];if(J!=null){var he=M.U,ge=N.ba.S,xe=ge==Jl||ge==ic;N=N.ba.f.RGBA;var _e=[0],Ae=M.ka;_e[0]=M.T,M.Kb&&(Ae==0?--_e[0]:(--Ae,ce[0]-=M.width),M.j+M.ka+M.T==M.o&&(_e[0]=M.o-M.j-Ae));var je=N.eb;Ae=N.fb+Ae*N.A,M=is(J,ce[0],M.width,he,_e,je,Ae+(xe?0:3),N.A),e(q==_e),M&&nn(ge)&&Lo(je,Ae,xe,he,_e,N.A)}return 0}function $n(M){var N=M.ma,q=N.ba.S,J=11>q,ce=q==Hs||q==nc||q==Jl||q==oi||q==12||nn(q);if(N.memory=null,N.Ib=null,N.Jb=null,N.Nd=null,!Zu(N.Oa,M,ce?11:12))return 0;if(ce&&nn(q)&&Gt(),M.da)alert("todo:use_scaling");else{if(J){if(N.Ib=Lt,M.Kb){if(q=M.U+1>>1,N.memory=o(M.U+2*q),N.memory==null)return 0;N.ec=N.memory,N.fc=0,N.cc=N.ec,N.dc=N.fc+M.U,N.Mc=N.cc,N.Nc=N.dc+q,N.Ib=rn,Gt()}}else alert("todo:EmitYUV");ce&&(N.Jb=ir,J&&at())}if(J&&!Do){for(M=0;256>M;++M)Ta[M]=89858*(M-128)+Ai>>no,fa[M]=-22014*(M-128)+Ai,lc[M]=-45773*(M-128),eu[M]=113618*(M-128)+Ai>>no;for(M=$r;M<Jr;++M)N=76283*(M-16)+Ai>>no,Bf[M-$r]=Sa(N,255),Oh[M-$r]=Sa(N+8>>4,15);Do=1}return 1}function Gn(M){var N=M.ma,q=M.U,J=M.T;return e(!(1&M.ka)),0>=q||0>=J?0:(q=N.Ib(M,N),N.Jb!=null&&N.Jb(M,N,q),N.Dc+=q,1)}function Br(M){M.ma.memory=null}function gn(M,N,q,J){return oe(M,8)!=47?0:(N[0]=oe(M,14)+1,q[0]=oe(M,14)+1,J[0]=oe(M,1),oe(M,3)!=0?0:!M.h)}function Di(M,N){if(4>M)return M+1;var q=M-2>>1;return(2+(1&M)<<q)+oe(N,q)+1}function vi(M,N){return 120<N?N-120:1<=(q=((q=am[N-1])>>4)*M+(8-(15&q)))?q:1;var q}function Er(M,N,q){var J=ne(q),ce=M[N+=255&J].g-8;return 0<ce&&(de(q,q.u+8),J=ne(q),N+=M[N].value,N+=J&(1<<ce)-1),de(q,q.u+M[N].g),M[N].value}function xr(M,N,q){return q.g+=M.g,q.value+=M.value<<N>>>0,e(8>=q.g),M.g}function Cr(M,N,q){var J=M.xc;return e((N=J==0?0:M.vc[M.md*(q>>J)+(N>>J)])<M.Wb),M.Ya[N]}function zr(M,N,q,J){var ce=M.ab,he=M.c*N,ge=M.C;N=ge+N;var xe=q,_e=J;for(J=M.Ta,q=M.Ua;0<ce--;){var Ae=M.gc[ce],je=ge,Fe=N,st=xe,Ze=_e,Dt=(_e=J,xe=q,Ae.Ea);switch(e(je<Fe),e(Fe<=Ae.nc),Ae.hc){case 2:Lf(st,Ze,(Fe-je)*Dt,_e,xe);break;case 0:var wt=je,We=Fe,$e=_e,Tt=xe,Mt=(sn=Ae).Ea;wt==0&&(_l(st,Ze,null,null,1,$e,Tt),ht(st,Ze+1,0,0,Mt-1,$e,Tt+1),Ze+=Mt,Tt+=Mt,++wt);for(var Nt=1<<sn.b,dn=Nt-1,on=ft(Mt,sn.b),Dn=sn.K,sn=sn.w+(wt>>sn.b)*on;wt<We;){var Rr=Dn,Nr=sn,Tr=1;for(Sl(st,Ze,$e,Tt-Mt,1,$e,Tt);Tr<Mt;){var nr=(Tr&~dn)+Nt;nr>Mt&&(nr=Mt),(0,Va[Rr[Nr++]>>8&15])(st,Ze+ +Tr,$e,Tt+Tr-Mt,nr-Tr,$e,Tt+Tr),Tr=nr}Ze+=Mt,Tt+=Mt,++wt&dn||(sn+=on)}Fe!=Ae.nc&&r(_e,xe-Dt,_e,xe+(Fe-je-1)*Dt,Dt);break;case 1:for(Dt=st,We=Ze,Mt=(st=Ae.Ea)-(Tt=st&~($e=(Ze=1<<Ae.b)-1)),wt=ft(st,Ae.b),Nt=Ae.K,Ae=Ae.w+(je>>Ae.b)*wt;je<Fe;){for(dn=Nt,on=Ae,Dn=new ve,sn=We+Tt,Rr=We+st;We<sn;)Ft(dn[on++],Dn),No(Dn,Dt,We,Ze,_e,xe),We+=Ze,xe+=Ze;We<Rr&&(Ft(dn[on++],Dn),No(Dn,Dt,We,Mt,_e,xe),We+=Mt,xe+=Mt),++je&$e||(Ae+=wt)}break;case 3:if(st==_e&&Ze==xe&&0<Ae.b){for(We=_e,st=Dt=xe+(Fe-je)*Dt-(Tt=(Fe-je)*ft(Ae.Ea,Ae.b)),Ze=_e,$e=xe,wt=[],Tt=(Mt=Tt)-1;0<=Tt;--Tt)wt[Tt]=Ze[$e+Tt];for(Tt=Mt-1;0<=Tt;--Tt)We[st+Tt]=wt[Tt];So(Ae,je,Fe,_e,Dt,_e,xe)}else So(Ae,je,Fe,st,Ze,_e,xe)}xe=J,_e=q}_e!=q&&r(J,q,xe,_e,he)}function Un(M,N){var q=M.V,J=M.Ba+M.c*M.C,ce=N-M.C;if(e(N<=M.l.o),e(16>=ce),0<ce){var he=M.l,ge=M.Ta,xe=M.Ua,_e=he.width;if(zr(M,ce,q,J),ce=xe=[xe],e((q=M.C)<(J=N)),e(he.v<he.va),J>he.o&&(J=he.o),q<he.j){var Ae=he.j-q;q=he.j,ce[0]+=Ae*_e}if(q>=J?q=0:(ce[0]+=4*he.v,he.ka=q-he.j,he.U=he.va-he.v,he.T=J-q,q=1),q){if(xe=xe[0],11>(q=M.ca).S){var je=q.f.RGBA,Fe=(J=q.S,ce=he.U,he=he.T,Ae=je.eb,je.A),st=he;for(je=je.fb+M.Ma*je.A;0<st--;){var Ze=ge,Dt=xe,wt=ce,We=Ae,$e=je;switch(J){case Of:Qi(Ze,Dt,wt,We,$e);break;case Hs:Bs(Ze,Dt,wt,We,$e);break;case rc:Bs(Ze,Dt,wt,We,$e),Lo(We,$e,0,wt,1,0);break;case Df:xu(Ze,Dt,wt,We,$e);break;case nc:mn(Ze,Dt,wt,We,$e,1);break;case Su:mn(Ze,Dt,wt,We,$e,1),Lo(We,$e,0,wt,1,0);break;case Jl:mn(Ze,Dt,wt,We,$e,0);break;case ic:mn(Ze,Dt,wt,We,$e,0),Lo(We,$e,1,wt,1,0);break;case oi:wa(Ze,Dt,wt,We,$e);break;case Xc:wa(Ze,Dt,wt,We,$e),la(We,$e,wt,1,0);break;case kf:wl(Ze,Dt,wt,We,$e);break;default:e(0)}xe+=_e,je+=Fe}M.Ma+=he}else alert("todo:EmitRescaledRowsYUVA");e(M.Ma<=q.height)}}M.C=N,e(M.C<=M.i)}function Po(M){var N;if(0<M.ua)return 0;for(N=0;N<M.Wb;++N){var q=M.Ya[N].G,J=M.Ya[N].H;if(0<q[1][J[1]+0].g||0<q[2][J[2]+0].g||0<q[3][J[3]+0].g)return 0}return 1}function uo(M,N,q,J,ce,he){if(M.Z!=0){var ge=M.qd,xe=M.rd;for(e(fo[M.Z]!=null);N<q;++N)fo[M.Z](ge,xe,J,ce,J,ce,he),ge=J,xe=ce,ce+=he;M.qd=ge,M.rd=xe}}function ue(M,N){var q=M.l.ma,J=q.Z==0||q.Z==1?M.l.j:M.C;if(J=M.C<J?J:M.C,e(N<=M.l.o),N>J){var ce=M.l.width,he=q.ca,ge=q.tb+ce*J,xe=M.V,_e=M.Ba+M.c*J,Ae=M.gc;e(M.ab==1),e(Ae[0].hc==3),yu(Ae[0],J,N,xe,_e,he,ge),uo(q,J,N,he,ge,ce)}M.C=M.Ma=N}function we(M,N,q,J,ce,he,ge){var xe=M.$/J,_e=M.$%J,Ae=M.m,je=M.s,Fe=q+M.$,st=Fe;ce=q+J*ce;var Ze=q+J*he,Dt=280+je.ua,wt=M.Pb?xe:16777216,We=0<je.ua?je.Wa:null,$e=je.wc,Tt=Fe<Ze?Cr(je,_e,xe):null;e(M.C<he),e(Ze<=ce);var Mt=!1;e:for(;;){for(;Mt||Fe<Ze;){var Nt=0;if(xe>=wt){var dn=Fe-q;e((wt=M).Pb),wt.wd=wt.m,wt.xd=dn,0<wt.s.ua&&Ge(wt.s.Wa,wt.s.vb),wt=xe+Ff}if(_e&$e||(Tt=Cr(je,_e,xe)),e(Tt!=null),Tt.Qb&&(N[Fe]=Tt.qb,Mt=!0),!Mt)if(me(Ae),Tt.jc){Nt=Ae,dn=N;var on=Fe,Dn=Tt.pd[ne(Nt)&Zi-1];e(Tt.jc),256>Dn.g?(de(Nt,Nt.u+Dn.g),dn[on]=Dn.value,Nt=0):(de(Nt,Nt.u+Dn.g-256),e(256<=Dn.value),Nt=Dn.value),Nt==0&&(Mt=!0)}else Nt=Er(Tt.G[0],Tt.H[0],Ae);if(Ae.h)break;if(Mt||256>Nt){if(!Mt)if(Tt.nd)N[Fe]=(Tt.qb|Nt<<8)>>>0;else{if(me(Ae),Mt=Er(Tt.G[1],Tt.H[1],Ae),me(Ae),dn=Er(Tt.G[2],Tt.H[2],Ae),on=Er(Tt.G[3],Tt.H[3],Ae),Ae.h)break;N[Fe]=(on<<24|Mt<<16|Nt<<8|dn)>>>0}if(Mt=!1,++Fe,++_e>=J&&(_e=0,++xe,ge!=null&&xe<=he&&!(xe%16)&&ge(M,xe),We!=null))for(;st<Fe;)Nt=N[st++],We.X[(506832829*Nt&4294967295)>>>We.Mb]=Nt}else if(280>Nt){if(Nt=Di(Nt-256,Ae),dn=Er(Tt.G[4],Tt.H[4],Ae),me(Ae),dn=vi(J,dn=Di(dn,Ae)),Ae.h)break;if(Fe-q<dn||ce-Fe<Nt)break e;for(on=0;on<Nt;++on)N[Fe+on]=N[Fe+on-dn];for(Fe+=Nt,_e+=Nt;_e>=J;)_e-=J,++xe,ge!=null&&xe<=he&&!(xe%16)&&ge(M,xe);if(e(Fe<=ce),_e&$e&&(Tt=Cr(je,_e,xe)),We!=null)for(;st<Fe;)Nt=N[st++],We.X[(506832829*Nt&4294967295)>>>We.Mb]=Nt}else{if(!(Nt<Dt))break e;for(Mt=Nt-280,e(We!=null);st<Fe;)Nt=N[st++],We.X[(506832829*Nt&4294967295)>>>We.Mb]=Nt;Nt=Fe,e(!(Mt>>>(dn=We).Xa)),N[Nt]=dn.X[Mt],Mt=!0}Mt||e(Ae.h==te(Ae))}if(M.Pb&&Ae.h&&Fe<ce)e(M.m.h),M.a=5,M.m=M.wd,M.$=M.xd,0<M.s.ua&&Ge(M.s.vb,M.s.Wa);else{if(Ae.h)break e;ge!=null&&ge(M,xe>he?he:xe),M.a=0,M.$=Fe-q}return 1}return M.a=3,0}function ze(M){e(M!=null),M.vc=null,M.yc=null,M.Ya=null;var N=M.Wa;N!=null&&(N.X=null),M.vb=null,e(M!=null)}function ct(){var M=new gl;return M==null?null:(M.a=0,M.xb=sc,fn("Predictor","VP8LPredictors"),fn("Predictor","VP8LPredictors_C"),fn("PredictorAdd","VP8LPredictorsAdd"),fn("PredictorAdd","VP8LPredictorsAdd_C"),Lf=qt,No=Rt,Qi=it,Bs=Zt,wa=Xt,wl=un,xu=Wt,D.VP8LMapColor32b=Wc,D.VP8LMapColor8b=aa,M)}function xt(M,N,q,J,ce){var he=1,ge=[M],xe=[N],_e=J.m,Ae=J.s,je=null,Fe=0;e:for(;;){if(q)for(;he&&oe(_e,1);){var st=ge,Ze=xe,Dt=J,wt=1,We=Dt.m,$e=Dt.gc[Dt.ab],Tt=oe(We,2);if(Dt.Oc&1<<Tt)he=0;else{switch(Dt.Oc|=1<<Tt,$e.hc=Tt,$e.Ea=st[0],$e.nc=Ze[0],$e.K=[null],++Dt.ab,e(4>=Dt.ab),Tt){case 0:case 1:$e.b=oe(We,3)+2,wt=xt(ft($e.Ea,$e.b),ft($e.nc,$e.b),0,Dt,$e.K),$e.K=$e.K[0];break;case 3:var Mt,Nt=oe(We,8)+1,dn=16<Nt?0:4<Nt?1:2<Nt?2:3;if(st[0]=ft($e.Ea,dn),$e.b=dn,Mt=wt=xt(Nt,1,0,Dt,$e.K)){var on,Dn=Nt,sn=$e,Rr=1<<(8>>sn.b),Nr=o(Rr);if(Nr==null)Mt=0;else{var Tr=sn.K[0],nr=sn.w;for(Nr[0]=sn.K[0][0],on=1;on<1*Dn;++on)Nr[on]=mt(Tr[nr+on],Nr[on-1]);for(;on<4*Rr;++on)Nr[on]=0;sn.K[0]=null,sn.K[0]=Nr,Mt=1}}wt=Mt;break;case 2:break;default:e(0)}he=wt}}if(ge=ge[0],xe=xe[0],he&&oe(_e,1)&&!(he=1<=(Fe=oe(_e,4))&&11>=Fe)){J.a=3;break e}var kr;if(kr=he)t:{var ai,Kn,Ni,da=J,qi=ge,ho=xe,Dr=Fe,bo=q,Ao=da.m,yi=da.s,Wi=[null],ro=1,ha=0,qa=Ih[Dr];n:for(;;){if(bo&&oe(Ao,1)){var Ei=oe(Ao,3)+2,io=ft(qi,Ei),Ma=ft(ho,Ei),Au=io*Ma;if(!xt(io,Ma,0,da,Wi))break n;for(Wi=Wi[0],yi.xc=Ei,ai=0;ai<Au;++ai){var ys=Wi[ai]>>8&65535;Wi[ai]=ys,ys>=ro&&(ro=ys+1)}}if(Ao.h)break n;for(Kn=0;5>Kn;++Kn){var Fr=wu[Kn];!Kn&&0<Dr&&(Fr+=1<<Dr),ha<Fr&&(ha=Fr)}var Xr=a(ro*qa,z),or=ro,ji=a(or,j);if(ji==null)var Hr=null;else e(65536>=or),Hr=ji;var si=o(ha);if(Hr==null||si==null||Xr==null){da.a=1;break n}var Eo=Xr;for(ai=Ni=0;ai<ro;++ai){var Yo=Hr[ai],fi=Yo.G,Gs=Yo.H,qs=0,pa=1,Eu=0;for(Kn=0;5>Kn;++Kn){Fr=wu[Kn],fi[Kn]=Eo,Gs[Kn]=Ni,!Kn&&0<Dr&&(Fr+=1<<Dr);i:{var xs,$i=Fr,Tu=da,_s=si,uc=Eo,Zc=Ni,di=0,ko=Tu.m,Qc=oe(ko,1);if(i(_s,0,0,$i),Qc){var El=oe(ko,1)+1,cc=oe(ko,1),Mu=oe(ko,cc==0?1:8);_s[Mu]=1,El==2&&(_s[Mu=oe(ko,8)]=1);var Ss=1}else{var hi=o(19),Fi=oe(ko,4)+4;if(19<Fi){Tu.a=3;var Mr=0;break i}for(xs=0;xs<Fi;++xs)hi[av[xs]]=oe(ko,3);var as=void 0,po=void 0,tu=Tu,Wa=hi,mo=$i,ef=_s,fc=0,Tl=tu.m,Fo=8,ja=a(128,z);r:for(;k(ja,0,7,Wa,19);){if(oe(Tl,1)){var tf=2+2*oe(Tl,3);if((as=2+oe(Tl,tf))>mo)break r}else as=mo;for(po=0;po<mo&&as--;){me(Tl);var nf=ja[0+(127&ne(Tl))];de(Tl,Tl.u+nf.g);var $a=nf.value;if(16>$a)ef[po++]=$a,$a!=0&&(Fo=$a);else{var kh=$a==16,Pd=$a-16,Id=bd[Pd],rf=oe(Tl,Yc[Pd])+Id;if(po+rf>mo)break r;for(var lm=kh?Fo:0;0<rf--;)ef[po++]=lm}}fc=1;break r}fc||(tu.a=3),Ss=fc}(Ss=Ss&&!ko.h)&&(di=k(uc,Zc,8,_s,$i)),Ss&&di!=0?Mr=di:(Tu.a=3,Mr=0)}if(Mr==0)break n;if(pa&&om[Kn]==1&&(pa=Eo[Ni].g==0),qs+=Eo[Ni].g,Ni+=Mr,3>=Kn){var of,zf=si[0];for(of=1;of<Fr;++of)si[of]>zf&&(zf=si[of]);Eu+=zf}}if(Yo.nd=pa,Yo.Qb=0,pa&&(Yo.qb=(fi[3][Gs[3]+0].value<<24|fi[1][Gs[1]+0].value<<16|fi[2][Gs[2]+0].value)>>>0,qs==0&&256>fi[0][Gs[0]+0].value&&(Yo.Qb=1,Yo.qb+=fi[0][Gs[0]+0].value<<8)),Yo.jc=!Yo.Qb&&6>Eu,Yo.jc){var af,To=Yo;for(af=0;af<Zi;++af){var nu=af,Ko=To.pd[nu],Cu=To.G[0][To.H[0]+nu];256<=Cu.value?(Ko.g=Cu.g+256,Ko.value=Cu.value):(Ko.g=0,Ko.value=0,nu>>=xr(Cu,8,Ko),nu>>=xr(To.G[1][To.H[1]+nu],16,Ko),nu>>=xr(To.G[2][To.H[2]+nu],0,Ko),xr(To.G[3][To.H[3]+nu],24,Ko))}}}yi.vc=Wi,yi.Wb=ro,yi.Ya=Hr,yi.yc=Xr,kr=1;break t}kr=0}if(!(he=kr)){J.a=3;break e}if(0<Fe){if(Ae.ua=1<<Fe,!Se(Ae.Wa,Fe)){J.a=1,he=0;break e}}else Ae.ua=0;var Jo=J,Rd=ge,Fh=xe,Nd=Jo.s,Ld=Nd.xc;if(Jo.c=Rd,Jo.i=Fh,Nd.md=ft(Rd,Ld),Nd.wc=Ld==0?-1:(1<<Ld)-1,q){J.xb=wo;break e}if((je=o(ge*xe))==null){J.a=1,he=0;break e}he=(he=we(J,je,0,ge,xe,xe,null))&&!_e.h;break e}return he?(ce!=null?ce[0]=je:(e(je==null),e(q)),J.$=0,q||ze(Ae)):ze(Ae),he}function ae(M,N){var q=M.c*M.i,J=q+N+16*N;return e(M.c<=N),M.V=o(J),M.V==null?(M.Ta=null,M.Ua=0,M.a=1,0):(M.Ta=M.V,M.Ua=M.Ba+q+N,1)}function Ce(M,N){var q=M.C,J=N-q,ce=M.V,he=M.Ba+M.c*q;for(e(N<=M.l.o);0<J;){var ge=16<J?16:J,xe=M.l.ma,_e=M.l.width,Ae=_e*ge,je=xe.ca,Fe=xe.tb+_e*q,st=M.Ta,Ze=M.Ua;zr(M,ge,ce,he),jc(st,Ze,je,Fe,Ae),uo(xe,q,q+ge,je,Fe,_e),J-=ge,ce+=ge*M.c,q+=ge}e(q==N),M.C=M.Ma=N}function De(){this.ub=this.yd=this.td=this.Rb=0}function Ue(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Re(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function Ne(){this.Yb=(function(){var M=[];return(function N(q,J,ce){for(var he=ce[J],ge=0;ge<he&&(q.push(ce.length>J+1?[]:0),!(ce.length<J+1));ge++)N(q[ge],J+1,ce)})(M,0,[3,11]),M})()}function Be(){this.jb=o(3),this.Wc=s([4,8],Ne),this.Xc=s([4,17],Ne)}function Et(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function ut(){this.ld=this.La=this.dd=this.tc=0}function St(){this.Na=this.la=0}function Bt(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ot(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Qt(){this.uc=this.M=this.Nb=0,this.wa=Array(new ut),this.Y=0,this.ya=Array(new Ot),this.aa=0,this.l=new _n}function cn(){this.y=o(16),this.f=o(8),this.ea=o(8)}function Kt(){this.cb=this.a=0,this.sc="",this.m=new ee,this.Od=new De,this.Kc=new Ue,this.ed=new Et,this.Qa=new Re,this.Ic=this.$c=this.Aa=0,this.D=new Qt,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,ee),this.ia=0,this.pb=a(4,Bt),this.Pa=new Be,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new cn),this.Hd=0,this.rb=Array(new St),this.sb=0,this.wa=Array(new ut),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ot),this.L=this.aa=0,this.gd=s([4,2],ut),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function _n(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Vt(){var M=new Kt;return M!=null&&(M.a=0,M.sc="OK",M.cb=0,M.Xb=0,ac||(ac=gr)),M}function kt(M,N,q){return M.a==0&&(M.a=N,M.sc=q,M.cb=0),0}function Mn(M,N,q){return 3<=q&&M[N+0]==157&&M[N+1]==1&&M[N+2]==42}function Sn(M,N){if(M==null)return 0;if(M.a=0,M.sc="OK",N==null)return kt(M,2,"null VP8Io passed to VP8GetHeaders()");var q=N.data,J=N.w,ce=N.ha;if(4>ce)return kt(M,7,"Truncated header.");var he=q[J+0]|q[J+1]<<8|q[J+2]<<16,ge=M.Od;if(ge.Rb=!(1&he),ge.td=he>>1&7,ge.yd=he>>4&1,ge.ub=he>>5,3<ge.td)return kt(M,3,"Incorrect keyframe parameters.");if(!ge.yd)return kt(M,4,"Frame not displayable.");J+=3,ce-=3;var xe=M.Kc;if(ge.Rb){if(7>ce)return kt(M,7,"cannot parse picture header");if(!Mn(q,J,ce))return kt(M,3,"Bad code word");xe.c=16383&(q[J+4]<<8|q[J+3]),xe.Td=q[J+4]>>6,xe.i=16383&(q[J+6]<<8|q[J+5]),xe.Ud=q[J+6]>>6,J+=7,ce-=7,M.za=xe.c+15>>4,M.Ub=xe.i+15>>4,N.width=xe.c,N.height=xe.i,N.Da=0,N.j=0,N.v=0,N.va=N.width,N.o=N.height,N.da=0,N.ib=N.width,N.hb=N.height,N.U=N.width,N.T=N.height,i((he=M.Pa).jb,0,255,he.jb.length),e((he=M.Qa)!=null),he.Cb=0,he.Bb=0,he.Fb=1,i(he.Zb,0,0,he.Zb.length),i(he.Lb,0,0,he.Lb)}if(ge.ub>ce)return kt(M,7,"bad partition length");se(he=M.m,q,J,ge.ub),J+=ge.ub,ce-=ge.ub,ge.Rb&&(xe.Ld=Ie(he),xe.Kd=Ie(he)),xe=M.Qa;var _e,Ae=M.Pa;if(e(he!=null),e(xe!=null),xe.Cb=Ie(he),xe.Cb){if(xe.Bb=Ie(he),Ie(he)){for(xe.Fb=Ie(he),_e=0;4>_e;++_e)xe.Zb[_e]=Ie(he)?Q(he,7):0;for(_e=0;4>_e;++_e)xe.Lb[_e]=Ie(he)?Q(he,6):0}if(xe.Bb)for(_e=0;3>_e;++_e)Ae.jb[_e]=Ie(he)?Y(he,8):255}else xe.Bb=0;if(he.Ka)return kt(M,3,"cannot parse segment header");if((xe=M.ed).zd=Ie(he),xe.Tb=Y(he,6),xe.wb=Y(he,3),xe.Pc=Ie(he),xe.Pc&&Ie(he)){for(Ae=0;4>Ae;++Ae)Ie(he)&&(xe.vd[Ae]=Q(he,6));for(Ae=0;4>Ae;++Ae)Ie(he)&&(xe.od[Ae]=Q(he,6))}if(M.L=xe.Tb==0?0:xe.zd?1:2,he.Ka)return kt(M,3,"cannot parse filter header");var je=ce;if(ce=_e=J,J=_e+je,xe=je,M.Xb=(1<<Y(M.m,2))-1,je<3*(Ae=M.Xb))q=7;else{for(_e+=3*Ae,xe-=3*Ae,je=0;je<Ae;++je){var Fe=q[ce+0]|q[ce+1]<<8|q[ce+2]<<16;Fe>xe&&(Fe=xe),se(M.Jc[+je],q,_e,Fe),_e+=Fe,xe-=Fe,ce+=3}se(M.Jc[+Ae],q,_e,xe),q=_e<J?0:5}if(q!=0)return kt(M,q,"cannot parse partitions");for(q=Y(_e=M.m,7),ce=Ie(_e)?Q(_e,4):0,J=Ie(_e)?Q(_e,4):0,xe=Ie(_e)?Q(_e,4):0,Ae=Ie(_e)?Q(_e,4):0,_e=Ie(_e)?Q(_e,4):0,je=M.Qa,Fe=0;4>Fe;++Fe){if(je.Cb){var st=je.Zb[Fe];je.Fb||(st+=q)}else{if(0<Fe){M.pb[Fe]=M.pb[0];continue}st=q}var Ze=M.pb[Fe];Ze.Sc[0]=oc[Sa(st+ce,127)],Ze.Sc[1]=bu[Sa(st+0,127)],Ze.Eb[0]=2*oc[Sa(st+J,127)],Ze.Eb[1]=101581*bu[Sa(st+xe,127)]>>16,8>Ze.Eb[1]&&(Ze.Eb[1]=8),Ze.Qc[0]=oc[Sa(st+Ae,117)],Ze.Qc[1]=bu[Sa(st+_e,127)],Ze.lc=st+_e}if(!ge.Rb)return kt(M,4,"Not a key frame.");for(Ie(he),ge=M.Pa,q=0;4>q;++q){for(ce=0;8>ce;++ce)for(J=0;3>J;++J)for(xe=0;11>xe;++xe)Ae=Ee(he,sm[q][ce][J][xe])?Y(he,8):Ed[q][ce][J][xe],ge.Wc[q][ce].Yb[J][xe]=Ae;for(ce=0;17>ce;++ce)ge.Xc[q][ce]=ge.Wc[q][Td[ce]]}return M.kc=Ie(he),M.kc&&(M.Bd=Y(he,8)),M.cb=1}function gr(M,N,q,J,ce,he,ge){var xe=N[ce].Yb[q];for(q=0;16>ce;++ce){if(!Ee(M,xe[q+0]))return ce;for(;!Ee(M,xe[q+1]);)if(xe=N[++ce].Yb[0],q=0,ce==16)return 16;var _e=N[ce+1].Yb;if(Ee(M,xe[q+2])){var Ae=M,je=0;if(Ee(Ae,(st=xe)[(Fe=q)+3]))if(Ee(Ae,st[Fe+6])){for(xe=0,Fe=2*(je=Ee(Ae,st[Fe+8]))+(st=Ee(Ae,st[Fe+9+je])),je=0,st=Rh[Fe];st[xe];++xe)je+=je+Ee(Ae,st[xe]);je+=3+(8<<Fe)}else Ee(Ae,st[Fe+7])?(je=7+2*Ee(Ae,165),je+=Ee(Ae,145)):je=5+Ee(Ae,159);else je=Ee(Ae,st[Fe+4])?3+Ee(Ae,st[Fe+5]):2;xe=_e[2]}else je=1,xe=_e[1];_e=ge+Nh[ce],0>(Ae=M).b&&be(Ae);var Fe,st=Ae.b,Ze=(Fe=Ae.Ca>>1)-(Ae.I>>st)>>31;--Ae.b,Ae.Ca+=Ze,Ae.Ca|=1,Ae.I-=(Fe+1&Ze)<<st,he[_e]=((je^Ze)-Ze)*J[(0<ce)+0]}return 16}function vr(M){var N=M.rb[M.sb-1];N.la=0,N.Na=0,i(M.zc,0,0,M.zc.length),M.ja=0}function fr(M,N){if(M==null)return 0;if(N==null)return kt(M,2,"NULL VP8Io parameter in VP8Decode().");if(!M.cb&&!Sn(M,N))return 0;if(e(M.cb),N.ac==null||N.ac(N)){N.ob&&(M.L=0);var q=Al[M.L];if(M.L==2?(M.yb=0,M.zb=0):(M.yb=N.v-q>>4,M.zb=N.j-q>>4,0>M.yb&&(M.yb=0),0>M.zb&&(M.zb=0)),M.Va=N.o+15+q>>4,M.Hb=N.va+15+q>>4,M.Hb>M.za&&(M.Hb=M.za),M.Va>M.Ub&&(M.Va=M.Ub),0<M.L){var J=M.ed;for(q=0;4>q;++q){var ce;if(M.Qa.Cb){var he=M.Qa.Lb[q];M.Qa.Fb||(he+=J.Tb)}else he=J.Tb;for(ce=0;1>=ce;++ce){var ge=M.gd[q][ce],xe=he;if(J.Pc&&(xe+=J.vd[0],ce&&(xe+=J.od[0])),0<(xe=0>xe?0:63<xe?63:xe)){var _e=xe;0<J.wb&&(_e=4<J.wb?_e>>2:_e>>1)>9-J.wb&&(_e=9-J.wb),1>_e&&(_e=1),ge.dd=_e,ge.tc=2*xe+_e,ge.ld=40<=xe?2:15<=xe?1:0}else ge.tc=0;ge.La=ce}}}q=0}else kt(M,6,"Frame setup failed"),q=M.a;if(q=q==0){if(q){M.$c=0,0<M.Aa||(M.Ic=Vs);e:{q=M.Ic,J=4*(_e=M.za);var Ae=32*_e,je=_e+1,Fe=0<M.L?_e*(0<M.Aa?2:1):0,st=(M.Aa==2?2:1)*_e;if((ge=J+832+(ce=3*(16*q+Al[M.L])/2*Ae)+(he=M.Fa!=null&&0<M.Fa.length?M.Kc.c*M.Kc.i:0))!=ge)q=0;else{if(ge>M.Vb){if(M.Vb=0,M.Ec=o(ge),M.Fc=0,M.Ec==null){q=kt(M,1,"no memory during frame initialization.");break e}M.Vb=ge}ge=M.Ec,xe=M.Fc,M.Ac=ge,M.Bc=xe,xe+=J,M.Gd=a(Ae,cn),M.Hd=0,M.rb=a(je+1,St),M.sb=1,M.wa=Fe?a(Fe,ut):null,M.Y=0,M.D.Nb=0,M.D.wa=M.wa,M.D.Y=M.Y,0<M.Aa&&(M.D.Y+=_e),e(!0),M.oc=ge,M.pc=xe,xe+=832,M.ya=a(st,Ot),M.aa=0,M.D.ya=M.ya,M.D.aa=M.aa,M.Aa==2&&(M.D.aa+=_e),M.R=16*_e,M.B=8*_e,_e=(Ae=Al[M.L])*M.R,Ae=Ae/2*M.B,M.sa=ge,M.ta=xe+_e,M.qa=M.sa,M.ra=M.ta+16*q*M.R+Ae,M.Ha=M.qa,M.Ia=M.ra+8*q*M.B+Ae,M.$c=0,xe+=ce,M.mb=he?ge:null,M.nb=he?xe:null,e(xe+he<=M.Fc+M.Vb),vr(M),i(M.Ac,M.Bc,0,J),q=1}}if(q){if(N.ka=0,N.y=M.sa,N.O=M.ta,N.f=M.qa,N.N=M.ra,N.ea=M.Ha,N.Vd=M.Ia,N.fa=M.R,N.Rc=M.B,N.F=null,N.J=0,!wd){for(q=-255;255>=q;++q)$c[255+q]=0>q?-q:q;for(q=-1020;1020>=q;++q)xd[1020+q]=-128>q?-128:127<q?127:q;for(q=-112;112>=q;++q)_d[112+q]=-16>q?-16:15<q?15:q;for(q=-255;510>=q;++q)Sd[255+q]=0>q?0:255<q?255:q;wd=1}Or=Ir,Kl=Si,Ga=Pr,ba=Io,eo=oa,$o=er,rs=mu,ii=Ji,Pi=jl,bi=pl,_u=Wl,to=hl,Aa=Ro,jr=_a,tr=za,Ii=Fs,Ri=Ki,sa=Ku,os[0]=cl,os[1]=Wu,os[2]=hu,os[3]=ul,os[4]=zi,os[5]=Vc,os[6]=fl,os[7]=pu,os[8]=$u,os[9]=Gc,ca[0]=ju,ca[1]=yd,ca[2]=hs,ca[3]=Vl,ca[4]=wi,ca[5]=ur,ca[6]=ms,Ea[0]=Hi,Ea[1]=Rf,Ea[2]=gs,Ea[3]=Gl,Ea[4]=dl,Ea[5]=Ba,Ea[6]=Xu,q=1}else q=0}q&&(q=(function(Ze,Dt){for(Ze.M=0;Ze.M<Ze.Va;++Ze.M){var wt,We=Ze.Jc[Ze.M&Ze.Xb],$e=Ze.m,Tt=Ze;for(wt=0;wt<Tt.za;++wt){var Mt=$e,Nt=Tt,dn=Nt.Ac,on=Nt.Bc+4*wt,Dn=Nt.zc,sn=Nt.ya[Nt.aa+wt];if(Nt.Qa.Bb?sn.$b=Ee(Mt,Nt.Pa.jb[0])?2+Ee(Mt,Nt.Pa.jb[2]):Ee(Mt,Nt.Pa.jb[1]):sn.$b=0,Nt.kc&&(sn.Ad=Ee(Mt,Nt.Bd)),sn.Za=!Ee(Mt,145)+0,sn.Za){var Rr=sn.Ob,Nr=0;for(Nt=0;4>Nt;++Nt){var Tr,nr=Dn[0+Nt];for(Tr=0;4>Tr;++Tr){nr=sv[dn[on+Tr]][nr];for(var kr=Ad[Ee(Mt,nr[0])];0<kr;)kr=Ad[2*kr+Ee(Mt,nr[kr])];nr=-kr,dn[on+Tr]=nr}r(Rr,Nr,dn,on,4),Nr+=4,Dn[0+Nt]=nr}}else nr=Ee(Mt,156)?Ee(Mt,128)?1:3:Ee(Mt,163)?2:0,sn.Ob[0]=nr,i(dn,on,nr,4),i(Dn,0,nr,4);sn.Dd=Ee(Mt,142)?Ee(Mt,114)?Ee(Mt,183)?1:3:2:0}if(Tt.m.Ka)return kt(Ze,7,"Premature end-of-partition0 encountered.");for(;Ze.ja<Ze.za;++Ze.ja){if(Tt=We,Mt=($e=Ze).rb[$e.sb-1],dn=$e.rb[$e.sb+$e.ja],wt=$e.ya[$e.aa+$e.ja],on=$e.kc?wt.Ad:0)Mt.la=dn.la=0,wt.Za||(Mt.Na=dn.Na=0),wt.Hc=0,wt.Gc=0,wt.ia=0;else{var ai,Kn;if(Mt=dn,dn=Tt,on=$e.Pa.Xc,Dn=$e.ya[$e.aa+$e.ja],sn=$e.pb[Dn.$b],Nt=Dn.ad,Rr=0,Nr=$e.rb[$e.sb-1],nr=Tr=0,i(Nt,Rr,0,384),Dn.Za)var Ni=0,da=on[3];else{kr=o(16);var qi=Mt.Na+Nr.Na;if(qi=ac(dn,on[1],qi,sn.Eb,0,kr,0),Mt.Na=Nr.Na=(0<qi)+0,1<qi)Or(kr,0,Nt,Rr);else{var ho=kr[0]+3>>3;for(kr=0;256>kr;kr+=16)Nt[Rr+kr]=ho}Ni=1,da=on[0]}var Dr=15&Mt.la,bo=15&Nr.la;for(kr=0;4>kr;++kr){var Ao=1&bo;for(ho=Kn=0;4>ho;++ho)Dr=Dr>>1|(Ao=(qi=ac(dn,da,qi=Ao+(1&Dr),sn.Sc,Ni,Nt,Rr))>Ni)<<7,Kn=Kn<<2|(3<qi?3:1<qi?2:Nt[Rr+0]!=0),Rr+=16;Dr>>=4,bo=bo>>1|Ao<<7,Tr=(Tr<<8|Kn)>>>0}for(da=Dr,Ni=bo>>4,ai=0;4>ai;ai+=2){for(Kn=0,Dr=Mt.la>>4+ai,bo=Nr.la>>4+ai,kr=0;2>kr;++kr){for(Ao=1&bo,ho=0;2>ho;++ho)qi=Ao+(1&Dr),Dr=Dr>>1|(Ao=0<(qi=ac(dn,on[2],qi,sn.Qc,0,Nt,Rr)))<<3,Kn=Kn<<2|(3<qi?3:1<qi?2:Nt[Rr+0]!=0),Rr+=16;Dr>>=2,bo=bo>>1|Ao<<5}nr|=Kn<<4*ai,da|=Dr<<4<<ai,Ni|=(240&bo)<<ai}Mt.la=da,Nr.la=Ni,Dn.Hc=Tr,Dn.Gc=nr,Dn.ia=43690&nr?0:sn.ia,on=!(Tr|nr)}if(0<$e.L&&($e.wa[$e.Y+$e.ja]=$e.gd[wt.$b][wt.Za],$e.wa[$e.Y+$e.ja].La|=!on),Tt.Ka)return kt(Ze,7,"Premature end-of-file encountered.")}if(vr(Ze),$e=Dt,Tt=1,wt=(We=Ze).D,Mt=0<We.L&&We.M>=We.zb&&We.M<=We.Va,We.Aa==0)e:{if(wt.M=We.M,wt.uc=Mt,yl(We,wt),Tt=1,wt=(Kn=We.D).Nb,Mt=(nr=Al[We.L])*We.R,dn=nr/2*We.B,kr=16*wt*We.R,ho=8*wt*We.B,on=We.sa,Dn=We.ta-Mt+kr,sn=We.qa,Nt=We.ra-dn+ho,Rr=We.Ha,Nr=We.Ia-dn+ho,bo=(Dr=Kn.M)==0,Tr=Dr>=We.Va-1,We.Aa==2&&yl(We,Kn),Kn.uc)for(Ao=(qi=We).D.M,e(qi.D.uc),Kn=qi.yb;Kn<qi.Hb;++Kn){Ni=Kn,da=Ao;var yi=(Wi=(Fr=qi).D).Nb;ai=Fr.R;var Wi=Wi.wa[Wi.Y+Ni],ro=Fr.sa,ha=Fr.ta+16*yi*ai+16*Ni,qa=Wi.dd,Ei=Wi.tc;if(Ei!=0)if(e(3<=Ei),Fr.L==1)0<Ni&&Ii(ro,ha,ai,Ei+4),Wi.La&&sa(ro,ha,ai,Ei),0<da&&tr(ro,ha,ai,Ei+4),Wi.La&&Ri(ro,ha,ai,Ei);else{var io=Fr.B,Ma=Fr.qa,Au=Fr.ra+8*yi*io+8*Ni,ys=Fr.Ha,Fr=Fr.Ia+8*yi*io+8*Ni;yi=Wi.ld,0<Ni&&(ii(ro,ha,ai,Ei+4,qa,yi),bi(Ma,Au,ys,Fr,io,Ei+4,qa,yi)),Wi.La&&(to(ro,ha,ai,Ei,qa,yi),jr(Ma,Au,ys,Fr,io,Ei,qa,yi)),0<da&&(rs(ro,ha,ai,Ei+4,qa,yi),Pi(Ma,Au,ys,Fr,io,Ei+4,qa,yi)),Wi.La&&(_u(ro,ha,ai,Ei,qa,yi),Aa(Ma,Au,ys,Fr,io,Ei,qa,yi))}}if(We.ia&&alert("todo:DitherRow"),$e.put!=null){if(Kn=16*Dr,Dr=16*(Dr+1),bo?($e.y=We.sa,$e.O=We.ta+kr,$e.f=We.qa,$e.N=We.ra+ho,$e.ea=We.Ha,$e.W=We.Ia+ho):(Kn-=nr,$e.y=on,$e.O=Dn,$e.f=sn,$e.N=Nt,$e.ea=Rr,$e.W=Nr),Tr||(Dr-=nr),Dr>$e.o&&(Dr=$e.o),$e.F=null,$e.J=null,We.Fa!=null&&0<We.Fa.length&&Kn<Dr&&($e.J=qc(We,$e,Kn,Dr-Kn),$e.F=We.mb,$e.F==null&&$e.F.length==0)){Tt=kt(We,3,"Could not decode alpha data.");break e}Kn<$e.j&&(nr=$e.j-Kn,Kn=$e.j,e(!(1&nr)),$e.O+=We.R*nr,$e.N+=We.B*(nr>>1),$e.W+=We.B*(nr>>1),$e.F!=null&&($e.J+=$e.width*nr)),Kn<Dr&&($e.O+=$e.v,$e.N+=$e.v>>1,$e.W+=$e.v>>1,$e.F!=null&&($e.J+=$e.v),$e.ka=Kn-$e.j,$e.U=$e.va-$e.v,$e.T=Dr-Kn,Tt=$e.put($e))}wt+1!=We.Ic||Tr||(r(We.sa,We.ta-Mt,on,Dn+16*We.R,Mt),r(We.qa,We.ra-dn,sn,Nt+8*We.B,dn),r(We.Ha,We.Ia-dn,Rr,Nr+8*We.B,dn))}if(!Tt)return kt(Ze,6,"Output aborted.")}return 1})(M,N)),N.bc!=null&&N.bc(N),q&=1}return q?(M.cb=0,q):0}function Fn(M,N,q,J,ce){ce=M[N+q+32*J]+(ce>>3),M[N+q+32*J]=-256&ce?0>ce?0:255:ce}function kn(M,N,q,J,ce,he){Fn(M,N,0,q,J+ce),Fn(M,N,1,q,J+he),Fn(M,N,2,q,J-he),Fn(M,N,3,q,J-ce)}function Pn(M){return(20091*M>>16)+M}function jn(M,N,q,J){var ce,he=0,ge=o(16);for(ce=0;4>ce;++ce){var xe=M[N+0]+M[N+8],_e=M[N+0]-M[N+8],Ae=(35468*M[N+4]>>16)-Pn(M[N+12]),je=Pn(M[N+4])+(35468*M[N+12]>>16);ge[he+0]=xe+je,ge[he+1]=_e+Ae,ge[he+2]=_e-Ae,ge[he+3]=xe-je,he+=4,N++}for(ce=he=0;4>ce;++ce)xe=(M=ge[he+0]+4)+ge[he+8],_e=M-ge[he+8],Ae=(35468*ge[he+4]>>16)-Pn(ge[he+12]),Fn(q,J,0,0,xe+(je=Pn(ge[he+4])+(35468*ge[he+12]>>16))),Fn(q,J,1,0,_e+Ae),Fn(q,J,2,0,_e-Ae),Fn(q,J,3,0,xe-je),he++,J+=32}function er(M,N,q,J){var ce=M[N+0]+4,he=35468*M[N+4]>>16,ge=Pn(M[N+4]),xe=35468*M[N+1]>>16;kn(q,J,0,ce+ge,M=Pn(M[N+1]),xe),kn(q,J,1,ce+he,M,xe),kn(q,J,2,ce-he,M,xe),kn(q,J,3,ce-ge,M,xe)}function Si(M,N,q,J,ce){jn(M,N,q,J),ce&&jn(M,N+16,q,J+4)}function Pr(M,N,q,J){Kl(M,N+0,q,J,1),Kl(M,N+32,q,J+128,1)}function Io(M,N,q,J){var ce;for(M=M[N+0]+4,ce=0;4>ce;++ce)for(N=0;4>N;++N)Fn(q,J,N,ce,M)}function oa(M,N,q,J){M[N+0]&&ba(M,N+0,q,J),M[N+16]&&ba(M,N+16,q,J+4),M[N+32]&&ba(M,N+32,q,J+128),M[N+48]&&ba(M,N+48,q,J+128+4)}function Ir(M,N,q,J){var ce,he=o(16);for(ce=0;4>ce;++ce){var ge=M[N+0+ce]+M[N+12+ce],xe=M[N+4+ce]+M[N+8+ce],_e=M[N+4+ce]-M[N+8+ce],Ae=M[N+0+ce]-M[N+12+ce];he[0+ce]=ge+xe,he[8+ce]=ge-xe,he[4+ce]=Ae+_e,he[12+ce]=Ae-_e}for(ce=0;4>ce;++ce)ge=(M=he[0+4*ce]+3)+he[3+4*ce],xe=he[1+4*ce]+he[2+4*ce],_e=he[1+4*ce]-he[2+4*ce],Ae=M-he[3+4*ce],q[J+0]=ge+xe>>3,q[J+16]=Ae+_e>>3,q[J+32]=ge-xe>>3,q[J+48]=Ae-_e>>3,J+=64}function ll(M,N,q){var J,ce=N-32,he=Xo,ge=255-M[ce-1];for(J=0;J<q;++J){var xe,_e=he,Ae=ge+M[N-1];for(xe=0;xe<q;++xe)M[N+xe]=_e[Ae+M[ce+xe]];N+=32}}function Wu(M,N){ll(M,N,4)}function Rf(M,N){ll(M,N,8)}function yd(M,N){ll(M,N,16)}function hs(M,N){var q;for(q=0;16>q;++q)r(M,N+32*q,M,N-32,16)}function Vl(M,N){var q;for(q=16;0<q;--q)i(M,N,M[N-1],16),N+=32}function ps(M,N,q){var J;for(J=0;16>J;++J)i(N,q+32*J,M,16)}function ju(M,N){var q,J=16;for(q=0;16>q;++q)J+=M[N-1+32*q]+M[N+q-32];ps(J>>5,M,N)}function wi(M,N){var q,J=8;for(q=0;16>q;++q)J+=M[N-1+32*q];ps(J>>4,M,N)}function ur(M,N){var q,J=8;for(q=0;16>q;++q)J+=M[N+q-32];ps(J>>4,M,N)}function ms(M,N){ps(128,M,N)}function Bn(M,N,q){return M+2*N+q+2>>2}function hu(M,N){var q,J=N-32;for(J=new Uint8Array([Bn(M[J-1],M[J+0],M[J+1]),Bn(M[J+0],M[J+1],M[J+2]),Bn(M[J+1],M[J+2],M[J+3]),Bn(M[J+2],M[J+3],M[J+4])]),q=0;4>q;++q)r(M,N+32*q,J,0,J.length)}function ul(M,N){var q=M[N-1],J=M[N-1+32],ce=M[N-1+64],he=M[N-1+96];Xe(M,N+0,16843009*Bn(M[N-1-32],q,J)),Xe(M,N+32,16843009*Bn(q,J,ce)),Xe(M,N+64,16843009*Bn(J,ce,he)),Xe(M,N+96,16843009*Bn(ce,he,he))}function cl(M,N){var q,J=4;for(q=0;4>q;++q)J+=M[N+q-32]+M[N-1+32*q];for(J>>=3,q=0;4>q;++q)i(M,N+32*q,J,4)}function zi(M,N){var q=M[N-1+0],J=M[N-1+32],ce=M[N-1+64],he=M[N-1-32],ge=M[N+0-32],xe=M[N+1-32],_e=M[N+2-32],Ae=M[N+3-32];M[N+0+96]=Bn(J,ce,M[N-1+96]),M[N+1+96]=M[N+0+64]=Bn(q,J,ce),M[N+2+96]=M[N+1+64]=M[N+0+32]=Bn(he,q,J),M[N+3+96]=M[N+2+64]=M[N+1+32]=M[N+0+0]=Bn(ge,he,q),M[N+3+64]=M[N+2+32]=M[N+1+0]=Bn(xe,ge,he),M[N+3+32]=M[N+2+0]=Bn(_e,xe,ge),M[N+3+0]=Bn(Ae,_e,xe)}function fl(M,N){var q=M[N+1-32],J=M[N+2-32],ce=M[N+3-32],he=M[N+4-32],ge=M[N+5-32],xe=M[N+6-32],_e=M[N+7-32];M[N+0+0]=Bn(M[N+0-32],q,J),M[N+1+0]=M[N+0+32]=Bn(q,J,ce),M[N+2+0]=M[N+1+32]=M[N+0+64]=Bn(J,ce,he),M[N+3+0]=M[N+2+32]=M[N+1+64]=M[N+0+96]=Bn(ce,he,ge),M[N+3+32]=M[N+2+64]=M[N+1+96]=Bn(he,ge,xe),M[N+3+64]=M[N+2+96]=Bn(ge,xe,_e),M[N+3+96]=Bn(xe,_e,_e)}function Vc(M,N){var q=M[N-1+0],J=M[N-1+32],ce=M[N-1+64],he=M[N-1-32],ge=M[N+0-32],xe=M[N+1-32],_e=M[N+2-32],Ae=M[N+3-32];M[N+0+0]=M[N+1+64]=he+ge+1>>1,M[N+1+0]=M[N+2+64]=ge+xe+1>>1,M[N+2+0]=M[N+3+64]=xe+_e+1>>1,M[N+3+0]=_e+Ae+1>>1,M[N+0+96]=Bn(ce,J,q),M[N+0+64]=Bn(J,q,he),M[N+0+32]=M[N+1+96]=Bn(q,he,ge),M[N+1+32]=M[N+2+96]=Bn(he,ge,xe),M[N+2+32]=M[N+3+96]=Bn(ge,xe,_e),M[N+3+32]=Bn(xe,_e,Ae)}function pu(M,N){var q=M[N+0-32],J=M[N+1-32],ce=M[N+2-32],he=M[N+3-32],ge=M[N+4-32],xe=M[N+5-32],_e=M[N+6-32],Ae=M[N+7-32];M[N+0+0]=q+J+1>>1,M[N+1+0]=M[N+0+64]=J+ce+1>>1,M[N+2+0]=M[N+1+64]=ce+he+1>>1,M[N+3+0]=M[N+2+64]=he+ge+1>>1,M[N+0+32]=Bn(q,J,ce),M[N+1+32]=M[N+0+96]=Bn(J,ce,he),M[N+2+32]=M[N+1+96]=Bn(ce,he,ge),M[N+3+32]=M[N+2+96]=Bn(he,ge,xe),M[N+3+64]=Bn(ge,xe,_e),M[N+3+96]=Bn(xe,_e,Ae)}function Gc(M,N){var q=M[N-1+0],J=M[N-1+32],ce=M[N-1+64],he=M[N-1+96];M[N+0+0]=q+J+1>>1,M[N+2+0]=M[N+0+32]=J+ce+1>>1,M[N+2+32]=M[N+0+64]=ce+he+1>>1,M[N+1+0]=Bn(q,J,ce),M[N+3+0]=M[N+1+32]=Bn(J,ce,he),M[N+3+32]=M[N+1+64]=Bn(ce,he,he),M[N+3+64]=M[N+2+64]=M[N+0+96]=M[N+1+96]=M[N+2+96]=M[N+3+96]=he}function $u(M,N){var q=M[N-1+0],J=M[N-1+32],ce=M[N-1+64],he=M[N-1+96],ge=M[N-1-32],xe=M[N+0-32],_e=M[N+1-32],Ae=M[N+2-32];M[N+0+0]=M[N+2+32]=q+ge+1>>1,M[N+0+32]=M[N+2+64]=J+q+1>>1,M[N+0+64]=M[N+2+96]=ce+J+1>>1,M[N+0+96]=he+ce+1>>1,M[N+3+0]=Bn(xe,_e,Ae),M[N+2+0]=Bn(ge,xe,_e),M[N+1+0]=M[N+3+32]=Bn(q,ge,xe),M[N+1+32]=M[N+3+64]=Bn(J,q,ge),M[N+1+64]=M[N+3+96]=Bn(ce,J,q),M[N+1+96]=Bn(he,ce,J)}function gs(M,N){var q;for(q=0;8>q;++q)r(M,N+32*q,M,N-32,8)}function Gl(M,N){var q;for(q=0;8>q;++q)i(M,N,M[N-1],8),N+=32}function ks(M,N,q){var J;for(J=0;8>J;++J)i(N,q+32*J,M,8)}function Hi(M,N){var q,J=8;for(q=0;8>q;++q)J+=M[N+q-32]+M[N-1+32*q];ks(J>>4,M,N)}function Ba(M,N){var q,J=4;for(q=0;8>q;++q)J+=M[N+q-32];ks(J>>3,M,N)}function dl(M,N){var q,J=4;for(q=0;8>q;++q)J+=M[N-1+32*q];ks(J>>3,M,N)}function Xu(M,N){ks(128,M,N)}function ql(M,N,q){var J=M[N-q],ce=M[N+0],he=3*(ce-J)+zs[1020+M[N-2*q]-M[N+q]],ge=tc[112+(he+4>>3)];M[N-q]=Xo[255+J+tc[112+(he+3>>3)]],M[N+0]=Xo[255+ce-ge]}function Yu(M,N,q,J){var ce=M[N+0],he=M[N+q];return ua[255+M[N-2*q]-M[N-q]]>J||ua[255+he-ce]>J}function xa(M,N,q,J){return 4*ua[255+M[N-q]-M[N+0]]+ua[255+M[N-2*q]-M[N+q]]<=J}function Nf(M,N,q,J,ce){var he=M[N-3*q],ge=M[N-2*q],xe=M[N-q],_e=M[N+0],Ae=M[N+q],je=M[N+2*q],Fe=M[N+3*q];return 4*ua[255+xe-_e]+ua[255+ge-Ae]>J?0:ua[255+M[N-4*q]-he]<=ce&&ua[255+he-ge]<=ce&&ua[255+ge-xe]<=ce&&ua[255+Fe-je]<=ce&&ua[255+je-Ae]<=ce&&ua[255+Ae-_e]<=ce}function za(M,N,q,J){var ce=2*J+1;for(J=0;16>J;++J)xa(M,N+J,q,ce)&&ql(M,N+J,q)}function Fs(M,N,q,J){var ce=2*J+1;for(J=0;16>J;++J)xa(M,N+J*q,1,ce)&&ql(M,N+J*q,1)}function Ki(M,N,q,J){var ce;for(ce=3;0<ce;--ce)za(M,N+=4*q,q,J)}function Ku(M,N,q,J){var ce;for(ce=3;0<ce;--ce)Fs(M,N+=4,q,J)}function Ha(M,N,q,J,ce,he,ge,xe){for(he=2*he+1;0<ce--;){if(Nf(M,N,q,he,ge))if(Yu(M,N,q,xe))ql(M,N,q);else{var _e=M,Ae=N,je=q,Fe=_e[Ae-2*je],st=_e[Ae-je],Ze=_e[Ae+0],Dt=_e[Ae+je],wt=_e[Ae+2*je],We=27*(Tt=zs[1020+3*(Ze-st)+zs[1020+Fe-Dt]])+63>>7,$e=18*Tt+63>>7,Tt=9*Tt+63>>7;_e[Ae-3*je]=Xo[255+_e[Ae-3*je]+Tt],_e[Ae-2*je]=Xo[255+Fe+$e],_e[Ae-je]=Xo[255+st+We],_e[Ae+0]=Xo[255+Ze-We],_e[Ae+je]=Xo[255+Dt-$e],_e[Ae+2*je]=Xo[255+wt-Tt]}N+=J}}function yo(M,N,q,J,ce,he,ge,xe){for(he=2*he+1;0<ce--;){if(Nf(M,N,q,he,ge))if(Yu(M,N,q,xe))ql(M,N,q);else{var _e=M,Ae=N,je=q,Fe=_e[Ae-je],st=_e[Ae+0],Ze=_e[Ae+je],Dt=tc[112+((wt=3*(st-Fe))+4>>3)],wt=tc[112+(wt+3>>3)],We=Dt+1>>1;_e[Ae-2*je]=Xo[255+_e[Ae-2*je]+We],_e[Ae-je]=Xo[255+Fe+wt],_e[Ae+0]=Xo[255+st-Dt],_e[Ae+je]=Xo[255+Ze-We]}N+=J}}function mu(M,N,q,J,ce,he){Ha(M,N,q,1,16,J,ce,he)}function Ji(M,N,q,J,ce,he){Ha(M,N,1,q,16,J,ce,he)}function Wl(M,N,q,J,ce,he){var ge;for(ge=3;0<ge;--ge)yo(M,N+=4*q,q,1,16,J,ce,he)}function hl(M,N,q,J,ce,he){var ge;for(ge=3;0<ge;--ge)yo(M,N+=4,1,q,16,J,ce,he)}function jl(M,N,q,J,ce,he,ge,xe){Ha(M,N,ce,1,8,he,ge,xe),Ha(q,J,ce,1,8,he,ge,xe)}function pl(M,N,q,J,ce,he,ge,xe){Ha(M,N,1,ce,8,he,ge,xe),Ha(q,J,1,ce,8,he,ge,xe)}function Ro(M,N,q,J,ce,he,ge,xe){yo(M,N+4*ce,ce,1,8,he,ge,xe),yo(q,J+4*ce,ce,1,8,he,ge,xe)}function _a(M,N,q,J,ce,he,ge,xe){yo(M,N+4,1,ce,8,he,ge,xe),yo(q,J+4,1,ce,8,he,ge,xe)}function Wo(){this.ba=new pt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Ht,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ml(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ju(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function vs(){this.ua=0,this.Wa=new ye,this.vb=new ye,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new j,this.yc=new z}function gl(){this.xb=this.a=0,this.l=new _n,this.ca=new pt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new G,this.Pb=0,this.wd=new G,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new vs,this.ab=0,this.gc=a(4,Ju),this.Oc=0}function $l(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new _n,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function vl(M,N,q,J,ce,he,ge){for(M=M==null?0:M[N+0],N=0;N<ge;++N)ce[he+N]=M+q[J+N]&255,M=ce[he+N]}function gu(M,N,q,J,ce,he,ge){var xe;if(M==null)vl(null,null,q,J,ce,he,ge);else for(xe=0;xe<ge;++xe)ce[he+xe]=M[N+xe]+q[J+xe]&255}function Xl(M,N,q,J,ce,he,ge){if(M==null)vl(null,null,q,J,ce,he,ge);else{var xe,_e=M[N+0],Ae=_e,je=_e;for(xe=0;xe<ge;++xe)Ae=je+(_e=M[N+xe])-Ae,je=q[J+xe]+(-256&Ae?0>Ae?0:255:Ae)&255,Ae=_e,ce[he+xe]=je}}function qc(M,N,q,J){var ce=N.width,he=N.o;if(e(M!=null&&N!=null),0>q||0>=J||q+J>he)return null;if(!M.Cc){if(M.ga==null){var ge;if(M.ga=new $l,(ge=M.ga==null)||(ge=N.width*N.o,e(M.Gb.length==0),M.Gb=o(ge),M.Uc=0,M.Gb==null?ge=0:(M.mb=M.Gb,M.nb=M.Uc,M.rc=null,ge=1),ge=!ge),!ge){ge=M.ga;var xe=M.Fa,_e=M.P,Ae=M.qc,je=M.mb,Fe=M.nb,st=_e+1,Ze=Ae-1,Dt=ge.l;if(e(xe!=null&&je!=null&&N!=null),fo[0]=null,fo[1]=vl,fo[2]=gu,fo[3]=Xl,ge.ca=je,ge.tb=Fe,ge.c=N.width,ge.i=N.height,e(0<ge.c&&0<ge.i),1>=Ae)N=0;else if(ge.$a=xe[_e+0]>>0&3,ge.Z=xe[_e+0]>>2&3,ge.Lc=xe[_e+0]>>4&3,_e=xe[_e+0]>>6&3,0>ge.$a||1<ge.$a||4<=ge.Z||1<ge.Lc||_e)N=0;else if(Dt.put=Gn,Dt.ac=$n,Dt.bc=Br,Dt.ma=ge,Dt.width=N.width,Dt.height=N.height,Dt.Da=N.Da,Dt.v=N.v,Dt.va=N.va,Dt.j=N.j,Dt.o=N.o,ge.$a)e:{e(ge.$a==1),N=ct();t:for(;;){if(N==null){N=0;break e}if(e(ge!=null),ge.mc=N,N.c=ge.c,N.i=ge.i,N.l=ge.l,N.l.ma=ge,N.l.width=ge.c,N.l.height=ge.i,N.a=0,X(N.m,xe,st,Ze),!xt(ge.c,ge.i,1,N,null)||(N.ab==1&&N.gc[0].hc==3&&Po(N.s)?(ge.ic=1,xe=N.c*N.i,N.Ta=null,N.Ua=0,N.V=o(xe),N.Ba=0,N.V==null?(N.a=1,N=0):N=1):(ge.ic=0,N=ae(N,ge.c)),!N))break t;N=1;break e}ge.mc=null,N=0}else N=Ze>=ge.c*ge.i;ge=!N}if(ge)return null;M.ga.Lc!=1?M.Ga=0:J=he-q}e(M.ga!=null),e(q+J<=he);e:{if(N=(xe=M.ga).c,he=xe.l.o,xe.$a==0){if(st=M.rc,Ze=M.Vc,Dt=M.Fa,_e=M.P+1+q*N,Ae=M.mb,je=M.nb+q*N,e(_e<=M.P+M.qc),xe.Z!=0)for(e(fo[xe.Z]!=null),ge=0;ge<J;++ge)fo[xe.Z](st,Ze,Dt,_e,Ae,je,N),st=Ae,Ze=je,je+=N,_e+=N;else for(ge=0;ge<J;++ge)r(Ae,je,Dt,_e,N),st=Ae,Ze=je,je+=N,_e+=N;M.rc=st,M.Vc=Ze}else{if(e(xe.mc!=null),N=q+J,e((ge=xe.mc)!=null),e(N<=ge.i),ge.C>=N)N=1;else if(xe.ic||at(),xe.ic){xe=ge.V,st=ge.Ba,Ze=ge.c;var wt=ge.i,We=(Dt=1,_e=ge.$/Ze,Ae=ge.$%Ze,je=ge.m,Fe=ge.s,ge.$),$e=Ze*wt,Tt=Ze*N,Mt=Fe.wc,Nt=We<Tt?Cr(Fe,Ae,_e):null;e(We<=$e),e(N<=wt),e(Po(Fe));t:for(;;){for(;!je.h&&We<Tt;){if(Ae&Mt||(Nt=Cr(Fe,Ae,_e)),e(Nt!=null),me(je),256>(wt=Er(Nt.G[0],Nt.H[0],je)))xe[st+We]=wt,++We,++Ae>=Ze&&(Ae=0,++_e<=N&&!(_e%16)&&ue(ge,_e));else{if(!(280>wt)){Dt=0;break t}wt=Di(wt-256,je);var dn,on=Er(Nt.G[4],Nt.H[4],je);if(me(je),!(We>=(on=vi(Ze,on=Di(on,je)))&&$e-We>=wt)){Dt=0;break t}for(dn=0;dn<wt;++dn)xe[st+We+dn]=xe[st+We+dn-on];for(We+=wt,Ae+=wt;Ae>=Ze;)Ae-=Ze,++_e<=N&&!(_e%16)&&ue(ge,_e);We<Tt&&Ae&Mt&&(Nt=Cr(Fe,Ae,_e))}e(je.h==te(je))}ue(ge,_e>N?N:_e);break t}!Dt||je.h&&We<$e?(Dt=0,ge.a=je.h?5:3):ge.$=We,N=Dt}else N=we(ge,ge.V,ge.Ba,ge.c,ge.i,N,Ce);if(!N){J=0;break e}}q+J>=he&&(M.Cc=1),J=1}if(!J)return null;if(M.Cc&&((J=M.ga)!=null&&(J.mc=null),M.ga=null,0<M.Ga))return alert("todo:WebPDequantizeLevels"),null}return M.nb+q*ce}function H(M,N,q,J,ce,he){for(;0<ce--;){var ge,xe=M,_e=N+(q?1:0),Ae=M,je=N+(q?0:3);for(ge=0;ge<J;++ge){var Fe=Ae[je+4*ge];Fe!=255&&(Fe*=32897,xe[_e+4*ge+0]=xe[_e+4*ge+0]*Fe>>23,xe[_e+4*ge+1]=xe[_e+4*ge+1]*Fe>>23,xe[_e+4*ge+2]=xe[_e+4*ge+2]*Fe>>23)}N+=he}}function fe(M,N,q,J,ce){for(;0<J--;){var he;for(he=0;he<q;++he){var ge=M[N+2*he+0],xe=15&(Ae=M[N+2*he+1]),_e=4369*xe,Ae=(240&Ae|Ae>>4)*_e>>16;M[N+2*he+0]=(240&ge|ge>>4)*_e>>16&240|(15&ge|ge<<4)*_e>>16>>4&15,M[N+2*he+1]=240&Ae|xe}N+=ce}}function Le(M,N,q,J,ce,he,ge,xe){var _e,Ae,je=255;for(Ae=0;Ae<ce;++Ae){for(_e=0;_e<J;++_e){var Fe=M[N+_e];he[ge+4*_e]=Fe,je&=Fe}N+=q,ge+=xe}return je!=255}function qe(M,N,q,J,ce){var he;for(he=0;he<ce;++he)q[J+he]=M[N+he]>>8}function at(){Lo=H,la=fe,is=Le,jc=qe}function At(M,N,q){D[M]=function(J,ce,he,ge,xe,_e,Ae,je,Fe,st,Ze,Dt,wt,We,$e,Tt,Mt){var Nt,dn=Mt-1>>1,on=xe[_e+0]|Ae[je+0]<<16,Dn=Fe[st+0]|Ze[Dt+0]<<16;e(J!=null);var sn=3*on+Dn+131074>>2;for(N(J[ce+0],255&sn,sn>>16,wt,We),he!=null&&(sn=3*Dn+on+131074>>2,N(he[ge+0],255&sn,sn>>16,$e,Tt)),Nt=1;Nt<=dn;++Nt){var Rr=xe[_e+Nt]|Ae[je+Nt]<<16,Nr=Fe[st+Nt]|Ze[Dt+Nt]<<16,Tr=on+Rr+Dn+Nr+524296,nr=Tr+2*(Rr+Dn)>>3;sn=nr+on>>1,on=(Tr=Tr+2*(on+Nr)>>3)+Rr>>1,N(J[ce+2*Nt-1],255&sn,sn>>16,wt,We+(2*Nt-1)*q),N(J[ce+2*Nt-0],255&on,on>>16,wt,We+(2*Nt-0)*q),he!=null&&(sn=Tr+Dn>>1,on=nr+Nr>>1,N(he[ge+2*Nt-1],255&sn,sn>>16,$e,Tt+(2*Nt-1)*q),N(he[ge+2*Nt+0],255&on,on>>16,$e,Tt+(2*Nt+0)*q)),on=Rr,Dn=Nr}1&Mt||(sn=3*on+Dn+131074>>2,N(J[ce+Mt-1],255&sn,sn>>16,wt,We+(Mt-1)*q),he!=null&&(sn=3*Dn+on+131074>>2,N(he[ge+Mt-1],255&sn,sn>>16,$e,Tt+(Mt-1)*q)))}}function Gt(){Oo[Of]=Md,Oo[Hs]=Zl,Oo[Df]=Cd,Oo[nc]=bl,Oo[Jl]=Gi,Oo[oi]=Uf,Oo[kf]=Lh,Oo[rc]=Zl,Oo[Su]=bl,Oo[ic]=Gi,Oo[Xc]=Uf}function ln(M){return M&-16384?0>M?0:255:M>>Ql}function Rn(M,N){return ln((19077*M>>8)+(26149*N>>8)-14234)}function Xn(M,N,q){return ln((19077*M>>8)-(6419*N>>8)-(13320*q>>8)+8708)}function zn(M,N){return ln((19077*M>>8)+(33050*N>>8)-17685)}function Yn(M,N,q,J,ce){J[ce+0]=Rn(M,q),J[ce+1]=Xn(M,N,q),J[ce+2]=zn(M,N)}function Kr(M,N,q,J,ce){J[ce+0]=zn(M,N),J[ce+1]=Xn(M,N,q),J[ce+2]=Rn(M,q)}function Wr(M,N,q,J,ce){var he=Xn(M,N,q);N=he<<3&224|zn(M,N)>>3,J[ce+0]=248&Rn(M,q)|he>>5,J[ce+1]=N}function ni(M,N,q,J,ce){var he=240&zn(M,N)|15;J[ce+0]=240&Rn(M,q)|Xn(M,N,q)>>4,J[ce+1]=he}function Vi(M,N,q,J,ce){J[ce+0]=255,Yn(M,N,q,J,ce+1)}function xo(M,N,q,J,ce){Kr(M,N,q,J,ce),J[ce+3]=255}function ns(M,N,q,J,ce){Yn(M,N,q,J,ce),J[ce+3]=255}function Sa(M,N){return 0>M?0:M>N?N:M}function ki(M,N,q){D[M]=function(J,ce,he,ge,xe,_e,Ae,je,Fe){for(var st=je+(-2&Fe)*q;je!=st;)N(J[ce+0],he[ge+0],xe[_e+0],Ae,je),N(J[ce+1],he[ge+0],xe[_e+0],Ae,je+q),ce+=2,++ge,++_e,je+=2*q;1&Fe&&N(J[ce+0],he[ge+0],xe[_e+0],Ae,je)}}function co(M,N,q){return q==0?M==0?N==0?6:5:N==0?4:0:q}function ri(M,N,q,J,ce){switch(M>>>30){case 3:Kl(N,q,J,ce,0);break;case 2:$o(N,q,J,ce);break;case 1:ba(N,q,J,ce)}}function yl(M,N){var q,J,ce=N.M,he=N.Nb,ge=M.oc,xe=M.pc+40,_e=M.oc,Ae=M.pc+584,je=M.oc,Fe=M.pc+600;for(q=0;16>q;++q)ge[xe+32*q-1]=129;for(q=0;8>q;++q)_e[Ae+32*q-1]=129,je[Fe+32*q-1]=129;for(0<ce?ge[xe-1-32]=_e[Ae-1-32]=je[Fe-1-32]=129:(i(ge,xe-32-1,127,21),i(_e,Ae-32-1,127,9),i(je,Fe-32-1,127,9)),J=0;J<M.za;++J){var st=N.ya[N.aa+J];if(0<J){for(q=-1;16>q;++q)r(ge,xe+32*q-4,ge,xe+32*q+12,4);for(q=-1;8>q;++q)r(_e,Ae+32*q-4,_e,Ae+32*q+4,4),r(je,Fe+32*q-4,je,Fe+32*q+4,4)}var Ze=M.Gd,Dt=M.Hd+J,wt=st.ad,We=st.Hc;if(0<ce&&(r(ge,xe-32,Ze[Dt].y,0,16),r(_e,Ae-32,Ze[Dt].f,0,8),r(je,Fe-32,Ze[Dt].ea,0,8)),st.Za){var $e=ge,Tt=xe-32+16;for(0<ce&&(J>=M.za-1?i($e,Tt,Ze[Dt].y[15],4):r($e,Tt,Ze[Dt+1].y,0,4)),q=0;4>q;q++)$e[Tt+128+q]=$e[Tt+256+q]=$e[Tt+384+q]=$e[Tt+0+q];for(q=0;16>q;++q,We<<=2)$e=ge,Tt=xe+Kc[q],os[st.Ob[q]]($e,Tt),ri(We,wt,16*+q,$e,Tt)}else if($e=co(J,ce,st.Ob[0]),ca[$e](ge,xe),We!=0)for(q=0;16>q;++q,We<<=2)ri(We,wt,16*+q,ge,xe+Kc[q]);for(q=st.Gc,$e=co(J,ce,st.Dd),Ea[$e](_e,Ae),Ea[$e](je,Fe),We=wt,$e=_e,Tt=Ae,255&(st=q>>0)&&(170&st?Ga(We,256,$e,Tt):eo(We,256,$e,Tt)),st=je,We=Fe,255&(q>>=8)&&(170&q?Ga(wt,320,st,We):eo(wt,320,st,We)),ce<M.Ub-1&&(r(Ze[Dt].y,0,ge,xe+480,16),r(Ze[Dt].f,0,_e,Ae+224,8),r(Ze[Dt].ea,0,je,Fe+224,8)),q=8*he*M.B,Ze=M.sa,Dt=M.ta+16*J+16*he*M.R,wt=M.qa,st=M.ra+8*J+q,We=M.Ha,$e=M.Ia+8*J+q,q=0;16>q;++q)r(Ze,Dt+q*M.R,ge,xe+32*q,16);for(q=0;8>q;++q)r(wt,st+q*M.B,_e,Ae+32*q,8),r(We,$e+q*M.B,je,Fe+32*q,8)}}function jo(M,N,q,J,ce,he,ge,xe,_e){var Ae=[0],je=[0],Fe=0,st=_e!=null?_e.kd:0,Ze=_e??new ml;if(M==null||12>q)return 7;Ze.data=M,Ze.w=N,Ze.ha=q,N=[N],q=[q],Ze.gb=[Ze.gb];e:{var Dt=N,wt=q,We=Ze.gb;if(e(M!=null),e(wt!=null),e(We!=null),We[0]=0,12<=wt[0]&&!t(M,Dt[0],"RIFF")){if(t(M,Dt[0]+8,"WEBP")){We=3;break e}var $e=Je(M,Dt[0]+4);if(12>$e||4294967286<$e){We=3;break e}if(st&&$e>wt[0]-8){We=7;break e}We[0]=$e,Dt[0]+=12,wt[0]-=12}We=0}if(We!=0)return We;for($e=0<Ze.gb[0],q=q[0];;){e:{var Tt=M;wt=N,We=q;var Mt=Ae,Nt=je,dn=Dt=[0];if((sn=Fe=[Fe])[0]=0,8>We[0])We=7;else{if(!t(Tt,wt[0],"VP8X")){if(Je(Tt,wt[0]+4)!=10){We=3;break e}if(18>We[0]){We=7;break e}var on=Je(Tt,wt[0]+8),Dn=1+Te(Tt,wt[0]+12);if(2147483648<=Dn*(Tt=1+Te(Tt,wt[0]+15))){We=3;break e}dn!=null&&(dn[0]=on),Mt!=null&&(Mt[0]=Dn),Nt!=null&&(Nt[0]=Tt),wt[0]+=18,We[0]-=18,sn[0]=1}We=0}}if(Fe=Fe[0],Dt=Dt[0],We!=0)return We;if(wt=!!(2&Dt),!$e&&Fe)return 3;if(he!=null&&(he[0]=!!(16&Dt)),ge!=null&&(ge[0]=wt),xe!=null&&(xe[0]=0),ge=Ae[0],Dt=je[0],Fe&&wt&&_e==null){We=0;break}if(4>q){We=7;break}if($e&&Fe||!$e&&!Fe&&!t(M,N[0],"ALPH")){q=[q],Ze.na=[Ze.na],Ze.P=[Ze.P],Ze.Sa=[Ze.Sa];e:{on=M,We=N,$e=q;var sn=Ze.gb;Mt=Ze.na,Nt=Ze.P,dn=Ze.Sa,Dn=22,e(on!=null),e($e!=null),Tt=We[0];var Rr=$e[0];for(e(Mt!=null),e(dn!=null),Mt[0]=null,Nt[0]=null,dn[0]=0;;){if(We[0]=Tt,$e[0]=Rr,8>Rr){We=7;break e}var Nr=Je(on,Tt+4);if(4294967286<Nr){We=3;break e}var Tr=8+Nr+1&-2;if(Dn+=Tr,0<sn&&Dn>sn){We=3;break e}if(!t(on,Tt,"VP8 ")||!t(on,Tt,"VP8L")){We=0;break e}if(Rr[0]<Tr){We=7;break e}t(on,Tt,"ALPH")||(Mt[0]=on,Nt[0]=Tt+8,dn[0]=Nr),Tt+=Tr,Rr-=Tr}}if(q=q[0],Ze.na=Ze.na[0],Ze.P=Ze.P[0],Ze.Sa=Ze.Sa[0],We!=0)break}q=[q],Ze.Ja=[Ze.Ja],Ze.xa=[Ze.xa];e:if(sn=M,We=N,$e=q,Mt=Ze.gb[0],Nt=Ze.Ja,dn=Ze.xa,on=We[0],Tt=!t(sn,on,"VP8 "),Dn=!t(sn,on,"VP8L"),e(sn!=null),e($e!=null),e(Nt!=null),e(dn!=null),8>$e[0])We=7;else{if(Tt||Dn){if(sn=Je(sn,on+4),12<=Mt&&sn>Mt-12){We=3;break e}if(st&&sn>$e[0]-8){We=7;break e}Nt[0]=sn,We[0]+=8,$e[0]-=8,dn[0]=Dn}else dn[0]=5<=$e[0]&&sn[on+0]==47&&!(sn[on+4]>>5),Nt[0]=$e[0];We=0}if(q=q[0],Ze.Ja=Ze.Ja[0],Ze.xa=Ze.xa[0],N=N[0],We!=0)break;if(4294967286<Ze.Ja)return 3;if(xe==null||wt||(xe[0]=Ze.xa?2:1),ge=[ge],Dt=[Dt],Ze.xa){if(5>q){We=7;break}xe=ge,st=Dt,wt=he,M==null||5>q?M=0:5<=q&&M[N+0]==47&&!(M[N+4]>>5)?($e=[0],sn=[0],Mt=[0],X(Nt=new G,M,N,q),gn(Nt,$e,sn,Mt)?(xe!=null&&(xe[0]=$e[0]),st!=null&&(st[0]=sn[0]),wt!=null&&(wt[0]=Mt[0]),M=1):M=0):M=0}else{if(10>q){We=7;break}xe=Dt,M==null||10>q||!Mn(M,N+3,q-3)?M=0:(st=M[N+0]|M[N+1]<<8|M[N+2]<<16,wt=16383&(M[N+7]<<8|M[N+6]),M=16383&(M[N+9]<<8|M[N+8]),1&st||3<(st>>1&7)||!(st>>4&1)||st>>5>=Ze.Ja||!wt||!M?M=0:(ge&&(ge[0]=wt),xe&&(xe[0]=M),M=1))}if(!M||(ge=ge[0],Dt=Dt[0],Fe&&(Ae[0]!=ge||je[0]!=Dt)))return 3;_e!=null&&(_e[0]=Ze,_e.offset=N-_e.w,e(4294967286>N-_e.w),e(_e.offset==_e.ha-q));break}return We==0||We==7&&Fe&&_e==null?(he!=null&&(he[0]|=Ze.na!=null&&0<Ze.na.length),J!=null&&(J[0]=ge),ce!=null&&(ce[0]=Dt),0):We}function Zu(M,N,q){var J=N.width,ce=N.height,he=0,ge=0,xe=J,_e=ce;if(N.Da=M!=null&&0<M.Da,N.Da&&(xe=M.cd,_e=M.bd,he=M.v,ge=M.j,11>q||(he&=-2,ge&=-2),0>he||0>ge||0>=xe||0>=_e||he+xe>J||ge+_e>ce))return 0;if(N.v=he,N.j=ge,N.va=he+xe,N.o=ge+_e,N.U=xe,N.T=_e,N.da=M!=null&&0<M.da,N.da){if(!Ct(xe,_e,q=[M.ib],he=[M.hb]))return 0;N.ib=q[0],N.hb=he[0]}return N.ob=M!=null&&M.ob,N.Kb=M==null||!M.Sd,N.da&&(N.ob=N.ib<3*J/4&&N.hb<3*ce/4,N.Kb=0),1}function Qu(M){if(M==null)return 2;if(11>M.S){var N=M.f.RGBA;N.fb+=(M.height-1)*N.A,N.A=-N.A}else N=M.f.kb,M=M.height,N.O+=(M-1)*N.fa,N.fa=-N.fa,N.N+=(M-1>>1)*N.Ab,N.Ab=-N.Ab,N.W+=(M-1>>1)*N.Db,N.Db=-N.Db,N.F!=null&&(N.J+=(M-1)*N.lb,N.lb=-N.lb);return 0}function Yl(M,N,q,J){if(J==null||0>=M||0>=N)return 2;if(q!=null){if(q.Da){var ce=q.cd,he=q.bd,ge=-2&q.v,xe=-2&q.j;if(0>ge||0>xe||0>=ce||0>=he||ge+ce>M||xe+he>N)return 2;M=ce,N=he}if(q.da){if(!Ct(M,N,ce=[q.ib],he=[q.hb]))return 2;M=ce[0],N=he[0]}}J.width=M,J.height=N;e:{var _e=J.width,Ae=J.height;if(M=J.S,0>=_e||0>=Ae||!(M>=Of&&13>M))M=2;else{if(0>=J.Rd&&J.sd==null){ge=he=ce=N=0;var je=(xe=_e*Jc[M])*Ae;if(11>M||(he=(Ae+1)/2*(N=(_e+1)/2),M==12&&(ge=(ce=_e)*Ae)),(Ae=o(je+2*he+ge))==null){M=1;break e}J.sd=Ae,11>M?((_e=J.f.RGBA).eb=Ae,_e.fb=0,_e.A=xe,_e.size=je):((_e=J.f.kb).y=Ae,_e.O=0,_e.fa=xe,_e.Fd=je,_e.f=Ae,_e.N=0+je,_e.Ab=N,_e.Cd=he,_e.ea=Ae,_e.W=0+je+he,_e.Db=N,_e.Ed=he,M==12&&(_e.F=Ae,_e.J=0+je+2*he),_e.Tc=ge,_e.lb=ce)}if(N=1,ce=J.S,he=J.width,ge=J.height,ce>=Of&&13>ce)if(11>ce)M=J.f.RGBA,N&=(xe=Math.abs(M.A))*(ge-1)+he<=M.size,N&=xe>=he*Jc[ce],N&=M.eb!=null;else{M=J.f.kb,xe=(he+1)/2,je=(ge+1)/2,_e=Math.abs(M.fa),Ae=Math.abs(M.Ab);var Fe=Math.abs(M.Db),st=Math.abs(M.lb),Ze=st*(ge-1)+he;N&=_e*(ge-1)+he<=M.Fd,N&=Ae*(je-1)+xe<=M.Cd,N=(N&=Fe*(je-1)+xe<=M.Ed)&_e>=he&Ae>=xe&Fe>=xe,N&=M.y!=null,N&=M.f!=null,N&=M.ea!=null,ce==12&&(N&=st>=he,N&=Ze<=M.Tc,N&=M.F!=null)}else N=0;M=N?0:2}}return M!=0||q!=null&&q.fd&&(M=Qu(J)),M}var Zi=64,ec=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],xl=24,Us=32,vu=8,_o=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];lt("Predictor0","PredictorAdd0"),D.Predictor0=function(){return 4278190080},D.Predictor1=function(M){return M},D.Predictor2=function(M,N,q){return N[q+0]},D.Predictor3=function(M,N,q){return N[q+1]},D.Predictor4=function(M,N,q){return N[q-1]},D.Predictor5=function(M,N,q){return le(le(M,N[q+1]),N[q+0])},D.Predictor6=function(M,N,q){return le(M,N[q-1])},D.Predictor7=function(M,N,q){return le(M,N[q+0])},D.Predictor8=function(M,N,q){return le(N[q-1],N[q+0])},D.Predictor9=function(M,N,q){return le(N[q+0],N[q+1])},D.Predictor10=function(M,N,q){return le(le(M,N[q-1]),le(N[q+0],N[q+1]))},D.Predictor11=function(M,N,q){var J=N[q+0];return 0>=vt(J>>24&255,M>>24&255,(N=N[q-1])>>24&255)+vt(J>>16&255,M>>16&255,N>>16&255)+vt(J>>8&255,M>>8&255,N>>8&255)+vt(255&J,255&M,255&N)?J:M},D.Predictor12=function(M,N,q){var J=N[q+0];return(He((M>>24&255)+(J>>24&255)-((N=N[q-1])>>24&255))<<24|He((M>>16&255)+(J>>16&255)-(N>>16&255))<<16|He((M>>8&255)+(J>>8&255)-(N>>8&255))<<8|He((255&M)+(255&J)-(255&N)))>>>0},D.Predictor13=function(M,N,q){var J=N[q-1];return(rt((M=le(M,N[q+0]))>>24&255,J>>24&255)<<24|rt(M>>16&255,J>>16&255)<<16|rt(M>>8&255,J>>8&255)<<8|rt(M>>0&255,J>>0&255))>>>0};var _l=D.PredictorAdd0;D.PredictorAdd1=ht,lt("Predictor2","PredictorAdd2"),lt("Predictor3","PredictorAdd3"),lt("Predictor4","PredictorAdd4"),lt("Predictor5","PredictorAdd5"),lt("Predictor6","PredictorAdd6"),lt("Predictor7","PredictorAdd7"),lt("Predictor8","PredictorAdd8"),lt("Predictor9","PredictorAdd9"),lt("Predictor10","PredictorAdd10"),lt("Predictor11","PredictorAdd11"),lt("Predictor12","PredictorAdd12"),lt("Predictor13","PredictorAdd13");var Sl=D.PredictorAdd2;tn("ColorIndexInverseTransform","MapARGB","32b",(function(M){return M>>8&255}),(function(M){return M})),tn("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(M){return M}),(function(M){return M>>8&255}));var Lf,So=D.ColorIndexInverseTransform,Wc=D.MapARGB,yu=D.VP8LColorIndexInverseTransformAlpha,aa=D.MapAlpha,Va=D.VP8LPredictorsAdd=[];Va.length=16,(D.VP8LPredictors=[]).length=16,(D.VP8LPredictorsAdd_C=[]).length=16,(D.VP8LPredictors_C=[]).length=16;var No,Qi,Bs,wa,wl,xu,Or,Kl,$o,Ga,ba,eo,rs,ii,Pi,bi,_u,to,Aa,jr,tr,Ii,Ri,sa,Lo,la,is,jc,$c=o(511),xd=o(2041),_d=o(225),Sd=o(767),wd=0,zs=xd,tc=_d,Xo=Sd,ua=$c,Of=0,Hs=1,Df=2,nc=3,Jl=4,oi=5,kf=6,rc=7,Su=8,ic=9,Xc=10,Yc=[2,3,7],bd=[3,3,11],wu=[280,256,256,256,40],om=[0,1,1,1,0],av=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],am=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Ih=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Ff=8,oc=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],bu=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ac=null,Rh=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Nh=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Ad=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Ed=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],sv=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],sm=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Td=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ca=[],os=[],Ea=[],wo=1,sc=2,fo=[],Oo=[];At("UpsampleRgbLinePair",Yn,3),At("UpsampleBgrLinePair",Kr,3),At("UpsampleRgbaLinePair",ns,4),At("UpsampleBgraLinePair",xo,4),At("UpsampleArgbLinePair",Vi,4),At("UpsampleRgba4444LinePair",ni,2),At("UpsampleRgb565LinePair",Wr,2);var Md=D.UpsampleRgbLinePair,Cd=D.UpsampleBgrLinePair,Zl=D.UpsampleRgbaLinePair,bl=D.UpsampleBgraLinePair,Gi=D.UpsampleArgbLinePair,Uf=D.UpsampleRgba4444LinePair,Lh=D.UpsampleRgb565LinePair,no=16,Ai=1<<no-1,$r=-227,Jr=482,Ql=6,Do=0,Ta=o(256),eu=o(256),lc=o(256),fa=o(256),Bf=o(Jr-$r),Oh=o(Jr-$r);ki("YuvToRgbRow",Yn,3),ki("YuvToBgrRow",Kr,3),ki("YuvToRgbaRow",ns,4),ki("YuvToBgraRow",xo,4),ki("YuvToArgbRow",Vi,4),ki("YuvToRgba4444Row",ni,2),ki("YuvToRgb565Row",Wr,2);var Kc=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Al=[0,2,8],Dh=[8,7,6,4,4,2,2,2,1,1,1,1],Vs=1;this.WebPDecodeRGBA=function(M,N,q,J,ce){var he=Hs,ge=new Wo,xe=new pt;ge.ba=xe,xe.S=he,xe.width=[xe.width],xe.height=[xe.height];var _e=xe.width,Ae=xe.height,je=new It;if(je==null||M==null)var Fe=2;else e(je!=null),Fe=jo(M,N,q,je.width,je.height,je.Pd,je.Qd,je.format,null);if(Fe!=0?_e=0:(_e!=null&&(_e[0]=je.width[0]),Ae!=null&&(Ae[0]=je.height[0]),_e=1),_e){xe.width=xe.width[0],xe.height=xe.height[0],J!=null&&(J[0]=xe.width),ce!=null&&(ce[0]=xe.height);e:{if(J=new _n,(ce=new ml).data=M,ce.w=N,ce.ha=q,ce.kd=1,N=[0],e(ce!=null),((M=jo(ce.data,ce.w,ce.ha,null,null,null,N,null,ce))==0||M==7)&&N[0]&&(M=4),(N=M)==0){if(e(ge!=null),J.data=ce.data,J.w=ce.w+ce.offset,J.ha=ce.ha-ce.offset,J.put=Gn,J.ac=$n,J.bc=Br,J.ma=ge,ce.xa){if((M=ct())==null){ge=1;break e}if((function(st,Ze){var Dt=[0],wt=[0],We=[0];t:for(;;){if(st==null)return 0;if(Ze==null)return st.a=2,0;if(st.l=Ze,st.a=0,X(st.m,Ze.data,Ze.w,Ze.ha),!gn(st.m,Dt,wt,We)){st.a=3;break t}if(st.xb=sc,Ze.width=Dt[0],Ze.height=wt[0],!xt(Dt[0],wt[0],1,st,null))break t;return 1}return e(st.a!=0),0})(M,J)){if(J=(N=Yl(J.width,J.height,ge.Oa,ge.ba))==0){t:{J=M;n:for(;;){if(J==null){J=0;break t}if(e(J.s.yc!=null),e(J.s.Ya!=null),e(0<J.s.Wb),e((q=J.l)!=null),e((ce=q.ma)!=null),J.xb!=0){if(J.ca=ce.ba,J.tb=ce.tb,e(J.ca!=null),!Zu(ce.Oa,q,nc)){J.a=2;break n}if(!ae(J,q.width)||q.da)break n;if((q.da||nn(J.ca.S))&&at(),11>J.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),J.ca.f.kb.F!=null&&at()),J.Pb&&0<J.s.ua&&J.s.vb.X==null&&!Se(J.s.vb,J.s.Wa.Xa)){J.a=1;break n}J.xb=0}if(!we(J,J.V,J.Ba,J.c,J.i,q.o,Un))break n;ce.Dc=J.Ma,J=1;break t}e(J.a!=0),J=0}J=!J}J&&(N=M.a)}else N=M.a}else{if((M=new Vt)==null){ge=1;break e}if(M.Fa=ce.na,M.P=ce.P,M.qc=ce.Sa,Sn(M,J)){if((N=Yl(J.width,J.height,ge.Oa,ge.ba))==0){if(M.Aa=0,q=ge.Oa,e((ce=M)!=null),q!=null){if(0<(_e=0>(_e=q.Md)?0:100<_e?255:255*_e/100)){for(Ae=je=0;4>Ae;++Ae)12>(Fe=ce.pb[Ae]).lc&&(Fe.ia=_e*Dh[0>Fe.lc?0:Fe.lc]>>3),je|=Fe.ia;je&&(alert("todo:VP8InitRandom"),ce.ia=1)}ce.Ga=q.Id,100<ce.Ga?ce.Ga=100:0>ce.Ga&&(ce.Ga=0)}fr(M,J)||(N=M.a)}}else N=M.a}N==0&&ge.Oa!=null&&ge.Oa.fd&&(N=Qu(ge.ba))}ge=N}he=ge!=0?null:11>he?xe.f.RGBA.eb:xe.f.kb.y}else he=null;return he};var Jc=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(D,F){for(var U="",k=0;k<4;k++)U+=String.fromCharCode(D[F++]);return U}function c(D,F){return(D[F+0]<<0|D[F+1]<<8|D[F+2]<<16)>>>0}function f(D,F){return(D[F+0]<<0|D[F+1]<<8|D[F+2]<<16|D[F+3]<<24)>>>0}new l;var h=[0],p=[0],v=[],S=new l,y=n,_=(function(D,F){var U={},k=0,z=!1,W=0,j=0;if(U.frames=[],!(function(ne,te,de,me){for(var be=0;be<me;be++)if(ne[te+be]!=de.charCodeAt(be))return!0;return!1})(D,F,"RIFF",4)){var se,Y;for(f(D,F+=4),F+=8;F<D.length;){var Q=u(D,F),X=f(D,F+=4);F+=4;var Z=X+(1&X);switch(Q){case"VP8 ":case"VP8L":U.frames[k]===void 0&&(U.frames[k]={}),(G=U.frames[k]).src_off=z?j:F-8,G.src_size=W+X+8,k++,z&&(z=!1,W=0,j=0);break;case"VP8X":(G=U.header={}).feature_flags=D[F];var oe=F+4;G.canvas_width=1+c(D,oe),oe+=3,G.canvas_height=1+c(D,oe),oe+=3;break;case"ALPH":z=!0,W=Z+8,j=F-8;break;case"ANIM":(G=U.header).bgcolor=f(D,F),oe=F+4,G.loop_count=(se=D)[(Y=oe)+0]<<0|se[Y+1]<<8,oe+=2;break;case"ANMF":var ee,G;(G=U.frames[k]={}).offset_x=2*c(D,F),F+=3,G.offset_y=2*c(D,F),F+=3,G.width=1+c(D,F),F+=3,G.height=1+c(D,F),F+=3,G.duration=c(D,F),F+=3,ee=D[F++],G.dispose=1&ee,G.blend=ee>>1&1}Q!="ANMF"&&(F+=Z)}return U}})(y,0);_.response=y,_.rgbaoutput=!0,_.dataurl=!1;var w=_.header?_.header:null,A=_.frames?_.frames:null;if(w){w.loop_counter=w.loop_count,h=[w.canvas_height],p=[w.canvas_width];for(var E=0;E<A.length&&A[E].blend!=0;E++);}var P=A[0],O=S.WebPDecodeRGBA(y,P.src_off,P.src_size,p,h);P.rgba=O,P.imgwidth=p[0],P.imgheight=h[0];for(var L=0;L<p[0]*h[0]*4;L++)v[L]=O[L];return this.width=p,this.height=h,this.data=v,this}(function(n){var e=function(){return typeof HC=="function"},t=function(h,p,v,S){var y=4,_=a;switch(S){case n.image_compression.FAST:y=1,_=o;break;case n.image_compression.MEDIUM:y=6,_=s;break;case n.image_compression.SLOW:y=9,_=l}h=r(h,p,v,_);var w=HC(h,{level:y});return n.__addimage__.arrayBufferToBinaryString(w)},r=function(h,p,v,S){for(var y,_,w,A=h.length/p,E=new Uint8Array(h.length+A),P=c(),O=0;O<A;O+=1){if(w=O*p,y=h.subarray(w,w+p),S)E.set(S(y,v,_),w+O);else{for(var L,D=P.length,F=[];L<D;L+=1)F[L]=P[L](y,v,_);var U=f(F.concat());E.set(F[U],w+O)}_=y}return E},i=function(h){var p=Array.apply([],h);return p.unshift(0),p},o=function(h,p){var v,S=[],y=h.length;S[0]=1;for(var _=0;_<y;_+=1)v=h[_-p]||0,S[_+1]=h[_]-v+256&255;return S},a=function(h,p,v){var S,y=[],_=h.length;y[0]=2;for(var w=0;w<_;w+=1)S=v&&v[w]||0,y[w+1]=h[w]-S+256&255;return y},s=function(h,p,v){var S,y,_=[],w=h.length;_[0]=3;for(var A=0;A<w;A+=1)S=h[A-p]||0,y=v&&v[A]||0,_[A+1]=h[A]+256-(S+y>>>1)&255;return _},l=function(h,p,v){var S,y,_,w,A=[],E=h.length;A[0]=4;for(var P=0;P<E;P+=1)S=h[P-p]||0,y=v&&v[P]||0,_=v&&v[P-p]||0,w=u(S,y,_),A[P+1]=h[P]-w+256&255;return A},u=function(h,p,v){if(h===p&&p===v)return h;var S=Math.abs(p-v),y=Math.abs(h-v),_=Math.abs(h+p-v-v);return S<=y&&S<=_?h:y<=_?p:v},c=function(){return[i,o,a,s,l]},f=function(h){var p=h.map((function(v){return v.reduce((function(S,y){return S+Math.abs(y)}),0)}));return p.indexOf(Math.min.apply(null,p))};n.processPNG=function(h,p,v,S){var y,_,w,A,E,P,O,L,D,F,U,k,z,W,j,se=this.decode.FLATE_DECODE,Y="";if(this.__addimage__.isArrayBuffer(h)&&(h=new Uint8Array(h)),this.__addimage__.isArrayBufferView(h)){if(h=(w=new kle(h)).imgData,_=w.bits,y=w.colorSpace,E=w.colors,[4,6].indexOf(w.colorType)!==-1){if(w.bits===8){D=(L=w.pixelBitlength==32?new Uint32Array(w.decodePixels().buffer):w.pixelBitlength==16?new Uint16Array(w.decodePixels().buffer):new Uint8Array(w.decodePixels().buffer)).length,U=new Uint8Array(D*w.colors),F=new Uint8Array(D);var Q,X=w.pixelBitlength-w.bits;for(W=0,j=0;W<D;W++){for(z=L[W],Q=0;Q<X;)U[j++]=z>>>Q&255,Q+=w.bits;F[W]=z>>>Q&255}}if(w.bits===16){D=(L=new Uint32Array(w.decodePixels().buffer)).length,U=new Uint8Array(D*(32/w.pixelBitlength)*w.colors),F=new Uint8Array(D*(32/w.pixelBitlength)),k=w.colors>1,W=0,j=0;for(var Z=0;W<D;)z=L[W++],U[j++]=z>>>0&255,k&&(U[j++]=z>>>16&255,z=L[W++],U[j++]=z>>>0&255),F[Z++]=z>>>16&255;_=8}S!==n.image_compression.NONE&&e()?(h=t(U,w.width*w.colors,w.colors,S),O=t(F,w.width,1,S)):(h=U,O=F,se=void 0)}if(w.colorType===3&&(y=this.color_spaces.INDEXED,P=w.palette,w.transparency.indexed)){var oe=w.transparency.indexed,ee=0;for(W=0,D=oe.length;W<D;++W)ee+=oe[W];if((ee/=255)===D-1&&oe.indexOf(0)!==-1)A=[oe.indexOf(0)];else if(ee!==D){for(L=w.decodePixels(),F=new Uint8Array(L.length),W=0,D=L.length;W<D;W++)F[W]=oe[L[W]];O=t(F,w.width,1)}}var G=(function(ne){var te;switch(ne){case n.image_compression.FAST:te=11;break;case n.image_compression.MEDIUM:te=13;break;case n.image_compression.SLOW:te=14;break;default:te=12}return te})(S);return se===this.decode.FLATE_DECODE&&(Y="/Predictor "+G+" "),Y+="/Colors "+E+" /BitsPerComponent "+_+" /Columns "+w.width,(this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),(O&&this.__addimage__.isArrayBuffer(O)||this.__addimage__.isArrayBufferView(O))&&(O=this.__addimage__.arrayBufferToBinaryString(O)),{alias:v,data:h,index:p,filter:se,decodeParameters:Y,transparency:A,palette:P,sMask:O,predictor:G,width:w.width,height:w.height,bitsPerComponent:_,colorSpace:y}}}})(Vn.API),(function(n){n.processGIF89A=function(e,t,r,i){var o=new Fle(e),a=o.width,s=o.height,l=[];o.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:a,height:s},c=new tA(100).encode(u,100);return n.processJPEG.call(this,c,t,r,i)},n.processGIF87A=n.processGIF89A})(Vn.API),wc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},wc.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){Ui.log("bit decode error:"+t)}},wc.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var o=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+8*i*4,s=0;s<8&&8*i+s<this.width;s++){var l=this.palette[o>>7-s&1];this.data[a+4*s]=l.blue,this.data[a+4*s+1]=l.green,this.data[a+4*s+2]=l.red,this.data[a+4*s+3]=255}t!==0&&(this.pos+=4-t)}},wc.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var o=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+2*i*4,s=o>>4,l=15&o,u=this.palette[s];if(this.data[a]=u.blue,this.data[a+1]=u.green,this.data[a+2]=u.red,this.data[a+3]=255,2*i+1>=this.width)break;u=this.palette[l],this.data[a+4]=u.blue,this.data[a+4+1]=u.green,this.data[a+4+2]=u.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},wc.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;if(i<this.palette.length){var a=this.palette[i];this.data[o]=a.red,this.data[o+1]=a.green,this.data[o+2]=a.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}n!==0&&(this.pos+=4-n)}},wc.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,s=(o>>5&e)/e*255|0,l=(o>>10&e)/e*255|0,u=o>>15?255:0,c=r*this.width*4+4*i;this.data[c]=l,this.data[c+1]=s,this.data[c+2]=a,this.data[c+3]=u}this.pos+=n}},wc.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(a&e)/e*255|0,l=(a>>5&t)/t*255|0,u=(a>>11)/e*255|0,c=i*this.width*4+4*o;this.data[c]=u,this.data[c+1]=l,this.data[c+2]=s,this.data[c+3]=255}this.pos+=n}},wc.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=o,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=255}this.pos+=this.width%4}},wc.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*t;this.data[s]=o,this.data[s+1]=i,this.data[s+2]=r,this.data[s+3]=a}},wc.prototype.getData=function(){return this.data},(function(n){n.processBMP=function(e,t,r,i){var o=new wc(e,!1),a=o.width,s=o.height,l={data:o.getData(),width:a,height:s},u=new tA(100).encode(l,100);return n.processJPEG.call(this,u,t,r,i)}})(Vn.API),g4.prototype.getData=function(){return this.data},(function(n){n.processWEBP=function(e,t,r,i){var o=new g4(e),a=o.width,s=o.height,l={data:o.getData(),width:a,height:s},u=new tA(100).encode(l,100);return n.processJPEG.call(this,u,t,r,i)}})(Vn.API),Vn.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,o=new Uint8Array(i/4*3),a=new Uint8Array(i/4),s=0,l=0,u=0;u<i;u+=4){var c=r[u],f=r[u+1],h=r[u+2],p=r[u+3];o[s++]=c,o[s++]=f,o[s++]=h,a[l++]=p}var v=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:v,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Vn.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},zm=Vn.API,Fx=zm.getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),s=e.widths?e.widths:i.metadata.Unicode.widths,l=s.fof?s.fof:1,u=e.kerning?e.kerning:i.metadata.Unicode.kerning,c=u.fof?u.fof:1,f=e.doKerning!==!1,h=0,p=n.length,v=0,S=s[0]||l,y=[];for(t=0;t<p;t++)r=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?y.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+a*(1e3/o)||0)/1e3):(h=f&&Ci(u[r])==="object"&&!isNaN(parseInt(u[r][v],10))?u[r][v]/c:0,y.push((s[r]||S)/l+h)),v=r;return y},d4=zm.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return zm.processArabic&&(n=zm.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,i)/t:Fx.apply(this,arguments).reduce((function(o,a){return o+a}),0)},h4=function(n,e,t,r){for(var i=[],o=0,a=n.length,s=0;o!==a&&s+e[o]<t;)s+=e[o],o++;i.push(n.slice(0,o));var l=o;for(s=0;o!==a;)s+e[o]>r&&(i.push(n.slice(l,o)),s=0,l=o),s+=e[o],o++;return l!==o&&i.push(n.slice(l,o)),i},p4=function(n,e,t){t||(t={});var r,i,o,a,s,l,u,c=[],f=[c],h=t.textIndent||0,p=0,v=0,S=n.split(" "),y=Fx.apply(this,[" ",t])[0];if(l=t.lineIndent===-1?S[0].length+2:t.lineIndent||0){var _=Array(l).join(" "),w=[];S.map((function(E){(E=E.split(/\s*\n/)).length>1?w=w.concat(E.map((function(P,O){return(O&&P.length?`
`:"")+P}))):w.push(E[0])})),S=w,l=d4.apply(this,[_,t])}for(o=0,a=S.length;o<a;o++){var A=0;if(r=S[o],l&&r[0]==`
`&&(r=r.substr(1),A=1),h+p+(v=(i=Fx.apply(this,[r,t])).reduce((function(E,P){return E+P}),0))>e||A){if(v>e){for(s=h4.apply(this,[r,i,e-(h+p),e]),c.push(s.shift()),c=[s.pop()];s.length;)f.push([s.shift()]);v=i.slice(r.length-(c[0]?c[0].length:0)).reduce((function(E,P){return E+P}),0)}else c=[r];f.push(c),h=v+l,p=y}else c.push(r),h+=p+v,p=y}return u=l?function(E,P){return(P?_:"")+E.join(" ")}:function(E){return E.join(" ")},f.map(u)},zm.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),o=(function(c){if(c.widths&&c.kerning)return{widths:c.widths,kerning:c.kerning};var f=this.internal.getFont(c.fontName,c.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/i;o.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=t.lineIndent;var s,l,u=[];for(s=0,l=r.length;s<l;s++)u=u.concat(p4.apply(this,[r[s],a,o]));return u},(function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},r={},i=0;i<e.length;i++)t[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var o=function(f){return"0x"+parseInt(f,10).toString(16)},a=n.__fontmetrics__.compress=function(f){var h,p,v,S,y=["{"];for(var _ in f){if(h=f[_],isNaN(parseInt(_,10))?p="'"+_+"'":(_=parseInt(_,10),p=(p=o(_).slice(2)).slice(0,-1)+r[p.slice(-1)]),typeof h=="number")h<0?(v=o(h).slice(3),S="-"):(v=o(h).slice(2),S=""),v=S+v.slice(0,-1)+r[v.slice(-1)];else{if(Ci(h)!=="object")throw new Error("Don't know what to do with value type "+Ci(h)+".");v=a(h)}y.push(p+v)}return y.push("}"),y.join("")},s=n.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,p,v,S,y={},_=1,w=y,A=[],E="",P="",O=f.length-1,L=1;L<O;L+=1)(S=f[L])=="'"?h?(v=h.join(""),h=void 0):h=[]:h?h.push(S):S=="{"?(A.push([w,v]),w={},v=void 0):S=="}"?((p=A.pop())[0][p[1]]=w,v=void 0,w=p[0]):S=="-"?_=-1:v===void 0?t.hasOwnProperty(S)?(E+=t[S],v=parseInt(E,16)*_,_=1,E=""):E+=S:t.hasOwnProperty(S)?(P+=t[S],w[v]=parseInt(P,16)*_,_=1,v=void 0,P=""):P+=S;return y},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:s("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},c={Unicode:{"Courier-Oblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":s("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":s("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:s("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:s("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":s("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":s("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(f){var h=f.font,p=c.Unicode[h.postScriptName];p&&(h.metadata.Unicode={},h.metadata.Unicode.widths=p.widths,h.metadata.Unicode.kerning=p.kerning);var v=u.Unicode[h.postScriptName];v&&(h.metadata.Unicode.encoding=v,h.encoding=v.codePages[0])}])})(Vn.API),(function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),o=0;o<r;o++)i[o]=t.charCodeAt(o);return i};n.API.events.push(["addFont",function(t){var r=void 0,i=t.font,o=t.instance;if(!i.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=o.existsFileInVFS(i.postScriptName)===!1?o.loadFile(i.postScriptName):o.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(a,s){s=/^\x00\x01\x00\x00/.test(s)?e(s):e(m0(s)),a.metadata=n.API.TTFFont.open(s),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(i,r)}}])})(Vn),(function(n){function e(){return(Jn.canvg?Promise.resolve(Jn.canvg):DC(()=>import("./index.es-q4_ZHqgJ.js"),[])).catch((function(t){return Promise.reject(new Error("Could not load canvg: "+t))})).then((function(t){return t.default?t.default:t}))}Vn.API.addSvgAsImage=function(t,r,i,o,a,s,l,u){if(isNaN(r)||isNaN(i))throw Ui.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(o)||isNaN(a))throw Ui.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=o,c.height=a;var f=c.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,c.width,c.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return e().then((function(v){return v.fromString(f,t,h)}),(function(){return Promise.reject(new Error("Could not load canvg."))})).then((function(v){return v.render(h)})).then((function(){p.addImage(c.toDataURL("image/jpeg",1),r,i,o,a,l,u)}))}})(),Vn.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},Vn.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,o,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},s=Object.keys(a),l=[],u=0,c=0,f=0;function h(v,S){var y,_=!1;for(y=0;y<v.length;y+=1)v[y]===S&&(_=!0);return _}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var p=s.length;for(f=0;f<p;f+=1)t[s[f]].value=t[s[f]].defaultValue,t[s[f]].explicitSet=!1}if(Ci(n)==="object"){for(i in n)if(o=n[i],h(s,i)&&o!==void 0){if(t[i].type==="boolean"&&typeof o=="boolean")t[i].value=o;else if(t[i].type==="name"&&h(t[i].valueSet,o))t[i].value=o;else if(t[i].type==="integer"&&Number.isInteger(o))t[i].value=o;else if(t[i].type==="array"){for(u=0;u<o.length;u+=1)if(r=!0,o[u].length===1&&typeof o[u][0]=="number")l.push(String(o[u]-1));else if(o[u].length>1){for(c=0;c<o[u].length;c+=1)typeof o[u][c]!="number"&&(r=!1);r===!0&&l.push([o[u][0]-1,o[u][1]-1].join(" "))}t[i].value="["+l.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){var v,S=[];for(v in t)t[v].explicitSet===!0&&(t[v].type==="name"?S.push("/"+v+" /"+t[v].value):S.push("/"+v+" "+t[v].value));S.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+S.join(`
`)+`
>>`)})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(r)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),s=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=o.length+a.length+s.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+o+a+s+l),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(Vn.API),(function(n){var e=n.API,t=e.pdfEscape16=function(o,a){for(var s,l=a.metadata.Unicode.widths,u=["","0","00","000","0000"],c=[""],f=0,h=o.length;f<h;++f){if(s=a.metadata.characterToGlyph(o.charCodeAt(f)),a.metadata.glyIdsUsed.push(s),a.metadata.toUnicode[s]=o.charCodeAt(f),l.indexOf(s)==-1&&(l.push(s),l.push([parseInt(a.metadata.widthOfGlyph(s),10)])),s=="0")return c.join("");s=s.toString(16),c.push(u[4-s.length],s)}return c.join("")},r=function(o){var a,s,l,u,c,f,h;for(c=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],f=0,h=(s=Object.keys(o).sort((function(p,v){return p-v}))).length;f<h;f++)a=s[f],l.length>=100&&(c+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),o[a]!==void 0&&o[a]!==null&&typeof o[a].toString=="function"&&(u=("0000"+o[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),l.push("<"+a+"><"+u+">"));return l.length&&(c+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),c+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(a){var s=a.font,l=a.out,u=a.newObject,c=a.putStream;if(s.metadata instanceof n.API.TTFFont&&s.encoding==="Identity-H"){for(var f=s.metadata.Unicode.widths,h=s.metadata.subset.encode(s.metadata.glyIdsUsed,1),p="",v=0;v<h.length;v++)p+=String.fromCharCode(h[v]);var S=u();c({data:p,addLength1:!0,objectId:S}),l("endobj");var y=u();c({data:r(s.metadata.toUnicode),addLength1:!0,objectId:y}),l("endobj");var _=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Ym(s.fontName)),l("/FontFile2 "+S+" 0 R"),l("/FontBBox "+n.API.PDFObject.convert(s.metadata.bbox)),l("/Flags "+s.metadata.flags),l("/StemV "+s.metadata.stemV),l("/ItalicAngle "+s.metadata.italicAngle),l("/Ascent "+s.metadata.ascender),l("/Descent "+s.metadata.decender),l("/CapHeight "+s.metadata.capHeight),l(">>"),l("endobj");var w=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+Ym(s.fontName)),l("/FontDescriptor "+_+" 0 R"),l("/W "+n.API.PDFObject.convert(f)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+s.encoding+")"),l(">>"),l(">>"),l("endobj"),s.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+y+" 0 R"),l("/BaseFont /"+Ym(s.fontName)),l("/Encoding /"+s.encoding),l("/DescendantFonts ["+w+" 0 R]"),l(">>"),l("endobj"),s.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(a){var s=a.font,l=a.out,u=a.newObject,c=a.putStream;if(s.metadata instanceof n.API.TTFFont&&s.encoding==="WinAnsiEncoding"){for(var f=s.metadata.rawData,h="",p=0;p<f.length;p++)h+=String.fromCharCode(f[p]);var v=u();c({data:h,addLength1:!0,objectId:v}),l("endobj");var S=u();c({data:r(s.metadata.toUnicode),addLength1:!0,objectId:S}),l("endobj");var y=u();l("<<"),l("/Descent "+s.metadata.decender),l("/CapHeight "+s.metadata.capHeight),l("/StemV "+s.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+v+" 0 R"),l("/Flags 96"),l("/FontBBox "+n.API.PDFObject.convert(s.metadata.bbox)),l("/FontName /"+Ym(s.fontName)),l("/ItalicAngle "+s.metadata.italicAngle),l("/Ascent "+s.metadata.ascender),l(">>"),l("endobj"),s.objectNumber=u();for(var _=0;_<s.metadata.hmtx.widths.length;_++)s.metadata.hmtx.widths[_]=parseInt(s.metadata.hmtx.widths[_]*(1e3/s.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+S+" 0 R/BaseFont/"+Ym(s.fontName)+"/FontDescriptor "+y+" 0 R/Encoding/"+s.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(s.metadata.hmtx.widths)+">>"),l("endobj"),s.isAlreadyPutted=!0}})(o)}]);var i=function(o){var a,s=o.text||"",l=o.x,u=o.y,c=o.options||{},f=o.mutex||{},h=f.pdfEscape,p=f.activeFontKey,v=f.fonts,S=p,y="",_=0,w="",A=v[S].encoding;if(v[S].encoding!=="Identity-H")return{text:s,x:l,y:u,options:c,mutex:f};for(w=s,S=p,Array.isArray(s)&&(w=s[0]),_=0;_<w.length;_+=1)v[S].metadata.hasOwnProperty("cmap")&&(a=v[S].metadata.cmap.unicode.codeMap[w[_].charCodeAt(0)]),a||w[_].charCodeAt(0)<256&&v[S].metadata.hasOwnProperty("Unicode")?y+=w[_]:y+="";var E="";return parseInt(S.slice(1))<14||A==="WinAnsiEncoding"?E=h(y,S).split("").map((function(P){return P.charCodeAt(0).toString(16)})).join(""):A==="Identity-H"&&(E=t(y,v[S])),f.isHex=!0,{text:E,x:l,y:u,options:c,mutex:f}};e.events.push(["postProcessText",function(o){var a=o.text||"",s=[],l={text:a,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(a)){var u=0;for(u=0;u<a.length;u+=1)Array.isArray(a[u])&&a[u].length===3?s.push([i(Object.assign({},l,{text:a[u][0]})).text,a[u][1],a[u][2]]):s.push(i(Object.assign({},l,{text:a[u]})).text);o.text=s}else o.text=i(Object.assign({},l,{text:a})).text}])})(Vn),(function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(Vn.API),(function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,o,a,s,l,u,c,f=e,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],v={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},S={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},y=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],_=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),w=!1,A=0;this.__bidiEngine__={};var E=function(k){var z=k.charCodeAt(),W=z>>8,j=S[W];return j!==void 0?f[256*j+(255&z)]:W===252||W===253?"AL":_.test(W)?"L":W===8?"R":"N"},P=function(k){for(var z,W=0;W<k.length;W++){if((z=E(k.charAt(W)))==="L")return!1;if(z==="R")return!0}return!1},O=function(k,z,W,j){var se,Y,Q,X,Z=z[j];switch(Z){case"L":case"R":w=!1;break;case"N":case"AN":break;case"EN":w&&(Z="AN");break;case"AL":w=!0,Z="R";break;case"WS":Z="N";break;case"CS":j<1||j+1>=z.length||(se=W[j-1])!=="EN"&&se!=="AN"||(Y=z[j+1])!=="EN"&&Y!=="AN"?Z="N":w&&(Y="AN"),Z=Y===se?Y:"N";break;case"ES":Z=(se=j>0?W[j-1]:"B")==="EN"&&j+1<z.length&&z[j+1]==="EN"?"EN":"N";break;case"ET":if(j>0&&W[j-1]==="EN"){Z="EN";break}if(w){Z="N";break}for(Q=j+1,X=z.length;Q<X&&z[Q]==="ET";)Q++;Z=Q<X&&z[Q]==="EN"?"EN":"N";break;case"NSM":if(a&&!s){for(X=z.length,Q=j+1;Q<X&&z[Q]==="NSM";)Q++;if(Q<X){var oe=k[j],ee=oe>=1425&&oe<=2303||oe===64286;if(se=z[Q],ee&&(se==="R"||se==="AL")){Z="R";break}}}Z=j<1||(se=z[j-1])==="B"?"N":W[j-1];break;case"B":w=!1,i=!0,Z=A;break;case"S":o=!0,Z="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":w=!1;break;case"BN":Z="N"}return Z},L=function(k,z,W){var j=k.split("");return W&&D(j,W,{hiLevel:A}),j.reverse(),z&&z.reverse(),j.join("")},D=function(k,z,W){var j,se,Y,Q,X,Z=-1,oe=k.length,ee=0,G=[],ne=A?p:h,te=[];for(w=!1,i=!1,o=!1,se=0;se<oe;se++)te[se]=E(k[se]);for(Y=0;Y<oe;Y++){if(X=ee,G[Y]=O(k,te,G,Y),j=240&(ee=ne[X][v[G[Y]]]),ee&=15,z[Y]=Q=ne[ee][5],j>0)if(j===16){for(se=Z;se<Y;se++)z[se]=1;Z=-1}else Z=-1;if(ne[ee][6])Z===-1&&(Z=Y);else if(Z>-1){for(se=Z;se<Y;se++)z[se]=Q;Z=-1}te[Y]==="B"&&(z[Y]=0),W.hiLevel|=Q}o&&(function(de,me,be){for(var Ie=0;Ie<be;Ie++)if(de[Ie]==="S"){me[Ie]=A;for(var Ee=Ie-1;Ee>=0&&de[Ee]==="WS";Ee--)me[Ee]=A}})(te,z,oe)},F=function(k,z,W,j,se){if(!(se.hiLevel<k)){if(k===1&&A===1&&!i)return z.reverse(),void(W&&W.reverse());for(var Y,Q,X,Z,oe=z.length,ee=0;ee<oe;){if(j[ee]>=k){for(X=ee+1;X<oe&&j[X]>=k;)X++;for(Z=ee,Q=X-1;Z<Q;Z++,Q--)Y=z[Z],z[Z]=z[Q],z[Q]=Y,W&&(Y=W[Z],W[Z]=W[Q],W[Q]=Y);ee=X}ee++}}},U=function(k,z,W){var j=k.split(""),se={hiLevel:A};return W||(W=[]),D(j,W,se),(function(Y,Q,X){if(X.hiLevel!==0&&c)for(var Z,oe=0;oe<Y.length;oe++)Q[oe]===1&&(Z=y.indexOf(Y[oe]))>=0&&(Y[oe]=y[Z+1])})(j,W,se),F(2,j,z,W,se),F(1,j,z,W,se),j.join("")};return this.__bidiEngine__.doBidiReorder=function(k,z,W){if((function(se,Y){if(Y)for(var Q=0;Q<se.length;Q++)Y[Q]=Q;s===void 0&&(s=P(se)),u===void 0&&(u=P(se))})(k,z),a||!l||u)if(a&&l&&s^u)A=s?1:0,k=L(k,z,W);else if(!a&&l&&u)A=s?1:0,k=U(k,z,W),k=L(k,z);else if(!a||s||l||u){if(a&&!l&&s^u)k=L(k,z),s?(A=0,k=U(k,z,W)):(A=1,k=U(k,z,W),k=L(k,z));else if(a&&s&&!l&&u)A=1,k=U(k,z,W),k=L(k,z);else if(!a&&!l&&s^u){var j=c;s?(A=1,k=U(k,z,W),A=0,c=!1,k=U(k,z,W),c=j):(A=0,k=U(k,z,W),k=L(k,z),A=1,c=!1,k=U(k,z,W),c=j,k=L(k,z))}}else A=0,k=U(k,z,W);else A=s?1:0,k=U(k,z,W);return k},this.__bidiEngine__.setOptions=function(k){k&&(a=k.isInputVisual,l=k.isOutputVisual,s=k.isInputRtl,u=k.isOutputRtl,c=k.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text,o=(r.x,r.y,r.options||{}),a=(r.mutex,o.lang,[]);if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,t.setOptions(o),Object.prototype.toString.call(i)==="[object Array]"){var s=0;for(a=[],s=0;s<i.length;s+=1)Object.prototype.toString.call(i[s])==="[object Array]"?a.push([t.doBidiReorder(i[s][0]),i[s][1],i[s][2]]):a.push([t.doBidiReorder(i[s])]);r.text=a}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])})(Vn),Vn.API.TTFFont=(function(){function n(e){var t;if(this.rawData=e,t=this.contents=new vh(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new Zle(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new Ule(this.contents),this.head=new zle(this),this.name=new Wle(this),this.cmap=new jH(this),this.toUnicode={},this.hhea=new Hle(this),this.maxp=new jle(this),this.hmtx=new $le(this),this.post=new Gle(this),this.os2=new Vle(this),this.loca=new Jle(this),this.glyf=new Xle(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,i,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,s,l,u;for(u=[],a=0,s=(l=this.bbox).length;a<s;a++)e=l[a],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),(32768&(t=i>>16))!=0&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,o,a,s;for(a=0,o=0,s=(e=""+e).length;0<=s?o<s:o>s;o=0<=s?++o:--o)i=e.charCodeAt(o),a+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return a*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n})();var zc,vh=(function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,o,a,s,l;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),o=this.readByte(),a=this.readByte(),s=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^o)+65536*(255^a)+256*(255^s)+(255^l)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*o+65536*a+256*s+l},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,i,o;for(o=[],r=0,i=e.length;r<i;r++)t=e[r],o.push(this.writeByte(t));return o},n})(),Ule=(function(){var n;function e(t){var r,i,o;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,o=this.tableCount;0<=o?i<o:i>o;i=0<=o?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,o,a,s,l,u,c,f,h,p,v,S;for(S in p=Object.keys(t).length,l=Math.log(2),f=16*Math.floor(Math.log(p)/l),a=Math.floor(f/l),c=16*p-f,(i=new vh).writeInt(this.scalarType),i.writeShort(p),i.writeShort(f),i.writeShort(a),i.writeShort(c),o=16*p,u=i.pos+o,s=null,v=[],t)for(h=t[S],i.writeString(S),i.writeInt(n(h)),i.writeInt(u),i.writeInt(h.length),v=v.concat(h),S==="head"&&(s=u),u+=h.length;u%4;)v.push(0),u++;return i.write(v),r=2981146554-n(i.data),i.pos=s+8,i.writeUInt32(r),i.data},n=function(t){var r,i,o,a;for(t=$H.call(t);t.length%4;)t.push(0);for(o=new vh(t),i=0,r=0,a=t.length;r<a;r=r+=4)i+=o.readUInt32();return 4294967295&i},e})(),Ble={}.hasOwnProperty,Pf=function(n,e){for(var t in e)Ble.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};zc=(function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n})();var zle=(function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Pf(e,zc),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new vh).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e})(),v4=(function(){function n(e,t){var r,i,o,a,s,l,u,c,f,h,p,v,S,y,_,w,A;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),f=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(p=e.readUInt16(),h=p/2,e.pos+=6,o=(function(){var E,P;for(P=[],l=E=0;0<=h?E<h:E>h;l=0<=h?++E:--E)P.push(e.readUInt16());return P})(),e.pos+=2,S=(function(){var E,P;for(P=[],l=E=0;0<=h?E<h:E>h;l=0<=h?++E:--E)P.push(e.readUInt16());return P})(),u=(function(){var E,P;for(P=[],l=E=0;0<=h?E<h:E>h;l=0<=h?++E:--E)P.push(e.readUInt16());return P})(),c=(function(){var E,P;for(P=[],l=E=0;0<=h?E<h:E>h;l=0<=h?++E:--E)P.push(e.readUInt16());return P})(),i=(this.length-e.pos+this.offset)/2,s=(function(){var E,P;for(P=[],l=E=0;0<=i?E<i:E>i;l=0<=i?++E:--E)P.push(e.readUInt16());return P})(),l=_=0,A=o.length;_<A;l=++_)for(y=o[l],r=w=v=S[l];v<=y?w<=y:w>=y;r=v<=y?++w:--w)c[l]===0?a=r+u[l]:(a=s[c[l]/2+(r-v)-(h-l)]||0)!==0&&(a+=u[l]),this.codeMap[r]=65535&a}e.pos=f}return n.encode=function(e,t){var r,i,o,a,s,l,u,c,f,h,p,v,S,y,_,w,A,E,P,O,L,D,F,U,k,z,W,j,se,Y,Q,X,Z,oe,ee,G,ne,te,de,me,be,Ie,Ee,Xe,tt,Te;switch(j=new vh,a=Object.keys(e).sort((function(Je,Se){return Je-Se})),t){case"macroman":for(S=0,y=(function(){var Je=[];for(v=0;v<256;++v)Je.push(0);return Je})(),w={0:0},o={},se=0,Z=a.length;se<Z;se++)w[Ee=e[i=a[se]]]==null&&(w[Ee]=++S),o[i]={old:e[i],new:w[e[i]]},y[i]=w[e[i]];return j.writeUInt16(1),j.writeUInt16(0),j.writeUInt32(12),j.writeUInt16(0),j.writeUInt16(262),j.writeUInt16(0),j.write(y),{charMap:o,subtable:j.data,maxGlyphID:S+1};case"unicode":for(z=[],f=[],A=0,w={},r={},_=u=null,Y=0,oe=a.length;Y<oe;Y++)w[P=e[i=a[Y]]]==null&&(w[P]=++A),r[i]={old:P,new:w[P]},s=w[P]-i,_!=null&&s===u||(_&&f.push(_),z.push(i),u=s),_=i;for(_&&f.push(_),f.push(65535),z.push(65535),U=2*(F=z.length),D=2*Math.pow(Math.log(F)/Math.LN2,2),h=Math.log(D/2)/Math.LN2,L=2*F-D,l=[],O=[],p=[],v=Q=0,ee=z.length;Q<ee;v=++Q){if(k=z[v],c=f[v],k===65535){l.push(0),O.push(0);break}if(k-(W=r[k].new)>=32768)for(l.push(0),O.push(2*(p.length+F-v)),i=X=k;k<=c?X<=c:X>=c;i=k<=c?++X:--X)p.push(r[i].new);else l.push(W-k),O.push(0)}for(j.writeUInt16(3),j.writeUInt16(1),j.writeUInt32(12),j.writeUInt16(4),j.writeUInt16(16+8*F+2*p.length),j.writeUInt16(0),j.writeUInt16(U),j.writeUInt16(D),j.writeUInt16(h),j.writeUInt16(L),be=0,G=f.length;be<G;be++)i=f[be],j.writeUInt16(i);for(j.writeUInt16(0),Ie=0,ne=z.length;Ie<ne;Ie++)i=z[Ie],j.writeUInt16(i);for(Xe=0,te=l.length;Xe<te;Xe++)s=l[Xe],j.writeUInt16(s);for(tt=0,de=O.length;tt<de;tt++)E=O[tt],j.writeUInt16(E);for(Te=0,me=p.length;Te<me;Te++)S=p[Te],j.writeUInt16(S);return{charMap:r,subtable:j.data,maxGlyphID:A+1}}},n})(),jH=(function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Pf(e,zc),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,i,o;for(t.pos=this.offset,this.version=t.readUInt16(),o=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=o?i<o:i>o;i=0<=o?++i:--i)r=new v4(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var i,o;return r==null&&(r="macroman"),i=v4.encode(t,r),(o=new vh).writeUInt16(0),o.writeUInt16(1),i.table=o.data.concat(i.subtable),i},e})(),Hle=(function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Pf(e,zc),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e})(),Vle=(function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Pf(e,zc),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=(function(){var r,i;for(i=[],r=0;r<10;++r)i.push(t.readByte());return i})(),this.charRange=(function(){var r,i;for(i=[],r=0;r<4;++r)i.push(t.readInt());return i})(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=(function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(t.readInt());return i})(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e})(),Gle=(function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Pf(e,zc),e.prototype.tag="post",e.prototype.parse=function(t){var r,i,o;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var a;for(i=t.readUInt16(),this.glyphNameIndex=[],a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],o=[];t.pos<this.offset+this.length;)r=t.readByte(),o.push(this.names.push(t.readString(r)));return o;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 196608:break;case 262144:return this.map=(function(){var s,l,u;for(u=[],a=s=0,l=this.file.maxp.numGlyphs;0<=l?s<l:s>l;a=0<=l?++s:--s)u.push(t.readUInt32());return u}).call(this)}},e})(),qle=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Wle=(function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Pf(e,zc),e.prototype.tag="name",e.prototype.parse=function(t){var r,i,o,a,s,l,u,c,f,h,p;for(t.pos=this.offset,t.readShort(),r=t.readShort(),l=t.readShort(),i=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+l+t.readShort()});for(u={},a=f=0,h=i.length;f<h;a=++f)o=i[a],t.pos=o.offset,c=t.readString(o.length),s=new qle(c,o),u[p=o.nameID]==null&&(u[p]=[]),u[o.nameID].push(s);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},e})(),jle=(function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Pf(e,zc),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e})(),$le=(function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Pf(e,zc),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,i,o,a,s,l,u;for(t.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(o=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var c,f;for(f=[],r=c=0;0<=o?c<o:c>o;r=0<=o?++c:--c)f.push(t.readInt16());return f})(),this.widths=(function(){var c,f,h,p;for(p=[],c=0,f=(h=this.metrics).length;c<f;c++)a=h[c],p.push(a.advance);return p}).call(this),i=this.widths[this.widths.length-1],u=[],r=s=0;0<=o?s<o:s>o;r=0<=o?++s:--s)u.push(this.widths.push(i));return u},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e})(),$H=[].slice,Xle=(function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Pf(e,zc),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,i,o,a,s,l,u,c,f,h;return t in this.cache?this.cache[t]:(a=this.file.loca,r=this.file.contents,i=a.indexOf(t),(o=a.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+i,s=(l=new vh(r.read(o))).readShort(),c=l.readShort(),h=l.readShort(),u=l.readShort(),f=l.readShort(),this.cache[t]=s===-1?new Kle(l,c,h,u,f):new Yle(l,s,c,h,u,f),this.cache[t]))},e.prototype.encode=function(t,r,i){var o,a,s,l,u;for(s=[],a=[],l=0,u=r.length;l<u;l++)o=t[r[l]],a.push(s.length),o&&(s=s.concat(o.encode(i)));return a.push(s.length),{table:s,offsets:a}},e})(),Yle=(function(){function n(e,t,r,i,o,a){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=o,this.yMax=a,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n})(),Kle=(function(){function n(e,t,r,i,o){var a,s;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;s=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&s;)a.pos+=1&s?4:2,128&s?a.pos+=8:64&s?a.pos+=4:8&s&&(a.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new vh($H.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n})(),Jle=(function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Pf(e,zc),e.prototype.tag="loca",e.prototype.parse=function(t){var r,i;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var o,a;for(a=[],i=0,o=this.length;i<o;i+=2)a.push(2*t.readUInt16());return a}).call(this):(function(){var o,a;for(a=[],i=0,o=this.length;i<o;i+=4)a.push(t.readUInt32());return a}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var i=new Uint32Array(this.offsets.length),o=0,a=0,s=0;s<i.length;++s)if(i[s]=o,a<r.length&&r[a]==s){++a,i[s]=o;var l=this.offsets[s],u=this.offsets[s+1]-l;u>0&&(o+=u)}for(var c=new Array(4*i.length),f=0;f<i.length;++f)c[4*f+3]=255&i[f],c[4*f+2]=(65280&i[f])>>8,c[4*f+1]=(16711680&i[f])>>16,c[4*f]=(4278190080&i[f])>>24;return c},e})(),Zle=(function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,i,o;for(t in i=this.font.cmap.tables[0].codeMap,e={},o=this.subset)r=o[t],e[t]=i[r];return e},n.prototype.glyphsFor=function(e){var t,r,i,o,a,s,l;for(i={},a=0,s=e.length;a<s;a++)i[o=e[a]]=this.font.glyf.glyphFor(o);for(o in t=[],i)(r=i[o])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(o in l=this.glyphsFor(t))r=l[o],i[o]=r;return i},n.prototype.encode=function(e,t){var r,i,o,a,s,l,u,c,f,h,p,v,S,y,_;for(i in r=jH.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),p={0:0},_=r.charMap)p[(l=_[i]).old]=l.new;for(v in h=r.maxGlyphID,a)v in p||(p[v]=h++);return c=(function(w){var A,E;for(A in E={},w)E[w[A]]=A;return E})(p),f=Object.keys(c).sort((function(w,A){return w-A})),S=(function(){var w,A,E;for(E=[],w=0,A=f.length;w<A;w++)s=f[w],E.push(c[s]);return E})(),o=this.font.glyf.encode(a,S,p),u=this.font.loca.encode(o.offsets,S),y={cmap:this.font.cmap.raw(),glyf:o.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(y["OS/2"]=this.font.os2.raw()),this.font.directory.encode(y)},n})();Vn.API.PDFObject=(function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,i,o,a;if(Array.isArray(t))return"["+(function(){var s,l,u;for(u=[],s=0,l=t.length;s<l;s++)r=t[s],u.push(e.convert(r));return u})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in o=["<<"],t)a=t[i],o.push("/"+i+" "+e.convert(a));return o.push(">>"),o.join(`
`)}return""+t},e})();const Qle=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:Ile,AcroFormAppearance:Tn,AcroFormButton:Na,AcroFormCheckBox:y0,AcroFormChoiceField:Pp,AcroFormComboBox:Rp,AcroFormEditBox:g0,AcroFormListBox:Ip,AcroFormPasswordField:x0,AcroFormPushButton:v0,AcroFormRadioButton:Np,AcroFormTextField:fh,GState:Y0,ShadingPattern:ih,TilingPattern:yp,default:Vn,jsPDF:Vn},Symbol.toStringTag,{value:"Module"}));var r_={exports:{}};const eue=_9(Qle);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.2
 *
 *               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */var y4=r_.exports,x4;function tue(){return x4||(x4=1,(function(n,e){(function(r,i){n.exports=i((function(){try{return eue}catch{}})())})(typeof globalThis<"u"?globalThis:typeof y4<"u"?y4:typeof window<"u"?window:typeof self<"u"?self:$v,function(t){return(function(){var r={172:(function(s,l){var u=this&&this.__extends||(function(){var h=function(p,v){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,y){S.__proto__=y}||function(S,y){for(var _ in y)Object.prototype.hasOwnProperty.call(y,_)&&(S[_]=y[_])},h(p,v)};return function(p,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");h(p,v);function S(){this.constructor=p}p.prototype=v===null?Object.create(v):(S.prototype=v.prototype,new S)}})();Object.defineProperty(l,"__esModule",{value:!0}),l.CellHookData=l.HookData=void 0;var c=(function(){function h(p,v,S){this.table=v,this.pageNumber=v.pageNumber,this.pageCount=this.pageNumber,this.settings=v.settings,this.cursor=S,this.doc=p.getDocument()}return h})();l.HookData=c;var f=(function(h){u(p,h);function p(v,S,y,_,w,A){var E=h.call(this,v,S,A)||this;return E.cell=y,E.row=_,E.column=w,E.section=_.section,E}return p})(c);l.CellHookData=f}),340:(function(s,l,u){Object.defineProperty(l,"__esModule",{value:!0});var c=u(4),f=u(136),h=u(744),p=u(776),v=u(664),S=u(972);function y(_){_.API.autoTable=function(){for(var w=[],A=0;A<arguments.length;A++)w[A]=arguments[A];var E;w.length===1?E=w[0]:(console.error("Use of deprecated autoTable initiation"),E=w[2]||{},E.columns=w[0],E.body=w[1]);var P=(0,p.parseInput)(this,E),O=(0,S.createTable)(this,P);return(0,v.drawTable)(this,O),this},_.API.lastAutoTable=!1,_.API.previousAutoTable=!1,_.API.autoTable.previous=!1,_.API.autoTableText=function(w,A,E,P){(0,f.default)(w,A,E,P,this)},_.API.autoTableSetDefaults=function(w){return h.DocHandler.setDefaults(w,this),this},_.autoTableSetDefaults=function(w,A){h.DocHandler.setDefaults(w,A)},_.API.autoTableHtmlToJson=function(w,A){var E;if(A===void 0&&(A=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var P=new h.DocHandler(this),O=(0,c.parseHtml)(P,w,window,A,!1),L=O.head,D=O.body,F=((E=L[0])===null||E===void 0?void 0:E.map(function(U){return U.content}))||[];return{columns:F,rows:D,data:D}},_.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var w=this.lastAutoTable;return w&&w.finalY?w.finalY:0},_.API.autoTableAddPageContent=function(w){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),_.API.autoTable.globalDefaults||(_.API.autoTable.globalDefaults={}),_.API.autoTable.globalDefaults.addPageContent=w,this},_.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}l.default=y}),136:(function(s,l){Object.defineProperty(l,"__esModule",{value:!0});function u(c,f,h,p,v){p=p||{};var S=1.15,y=v.internal.scaleFactor,_=v.internal.getFontSize()/y,w=v.getLineHeightFactor?v.getLineHeightFactor():S,A=_*w,E=/\r\n|\r|\n/g,P="",O=1;if((p.valign==="middle"||p.valign==="bottom"||p.halign==="center"||p.halign==="right")&&(P=typeof c=="string"?c.split(E):c,O=P.length||1),h+=_*(2-S),p.valign==="middle"?h-=O/2*A:p.valign==="bottom"&&(h-=O*A),p.halign==="center"||p.halign==="right"){var L=_;if(p.halign==="center"&&(L*=.5),P&&O>=1){for(var D=0;D<P.length;D++)v.text(P[D],f-v.getStringUnitWidth(P[D])*L,h),h+=A;return v}f-=v.getStringUnitWidth(c)*L}return p.halign==="justify"?v.text(c,f,h,{maxWidth:p.maxWidth||100,align:"justify"}):v.text(c,f,h),v}l.default=u}),420:(function(s,l){Object.defineProperty(l,"__esModule",{value:!0}),l.getPageAvailableWidth=l.parseSpacing=l.getFillStyle=l.addTableBorder=l.getStringWidth=void 0;function u(v,S,y){y.applyStyles(S,!0);var _=Array.isArray(v)?v:[v],w=_.map(function(A){return y.getTextWidth(A)}).reduce(function(A,E){return Math.max(A,E)},0);return w}l.getStringWidth=u;function c(v,S,y,_){var w=S.settings.tableLineWidth,A=S.settings.tableLineColor;v.applyStyles({lineWidth:w,lineColor:A});var E=f(w,!1);E&&v.rect(y.x,y.y,S.getWidth(v.pageSize().width),_.y-y.y,E)}l.addTableBorder=c;function f(v,S){var y=v>0,_=S||S===0;return y&&_?"DF":y?"S":_?"F":null}l.getFillStyle=f;function h(v,S){var y,_,w,A;if(v=v||S,Array.isArray(v)){if(v.length>=4)return{top:v[0],right:v[1],bottom:v[2],left:v[3]};if(v.length===3)return{top:v[0],right:v[1],bottom:v[2],left:v[1]};if(v.length===2)return{top:v[0],right:v[1],bottom:v[0],left:v[1]};v.length===1?v=v[0]:v=S}return typeof v=="object"?(typeof v.vertical=="number"&&(v.top=v.vertical,v.bottom=v.vertical),typeof v.horizontal=="number"&&(v.right=v.horizontal,v.left=v.horizontal),{left:(y=v.left)!==null&&y!==void 0?y:S,top:(_=v.top)!==null&&_!==void 0?_:S,right:(w=v.right)!==null&&w!==void 0?w:S,bottom:(A=v.bottom)!==null&&A!==void 0?A:S}):(typeof v!="number"&&(v=S),{top:v,right:v,bottom:v,left:v})}l.parseSpacing=h;function p(v,S){var y=h(S.settings.margin,0);return v.pageSize().width-(y.left+y.right)}l.getPageAvailableWidth=p}),796:(function(s,l){var u=this&&this.__extends||(function(){var p=function(v,S){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,_){y.__proto__=_}||function(y,_){for(var w in _)Object.prototype.hasOwnProperty.call(_,w)&&(y[w]=_[w])},p(v,S)};return function(v,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");p(v,S);function y(){this.constructor=v}v.prototype=S===null?Object.create(S):(y.prototype=S.prototype,new y)}})();Object.defineProperty(l,"__esModule",{value:!0}),l.getTheme=l.defaultStyles=l.HtmlRowInput=void 0;var c=(function(p){u(v,p);function v(S){var y=p.call(this)||this;return y._element=S,y}return v})(Array);l.HtmlRowInput=c;function f(p){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/p,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}l.defaultStyles=f;function h(p){var v={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return v[p]}l.getTheme=h}),903:(function(s,l,u){Object.defineProperty(l,"__esModule",{value:!0}),l.parseCss=void 0;var c=u(420);function f(y,_,w,A,E){var P={},O=1.3333333333333333,L=p(_,function(Z){return E.getComputedStyle(Z).backgroundColor});L!=null&&(P.fillColor=L);var D=p(_,function(Z){return E.getComputedStyle(Z).color});D!=null&&(P.textColor=D);var F=S(A,w);F&&(P.cellPadding=F);var U="borderTopColor",k=O*w,z=A.borderTopWidth;if(A.borderBottomWidth===z&&A.borderRightWidth===z&&A.borderLeftWidth===z){var W=(parseFloat(z)||0)/k;W&&(P.lineWidth=W)}else P.lineWidth={top:(parseFloat(A.borderTopWidth)||0)/k,right:(parseFloat(A.borderRightWidth)||0)/k,bottom:(parseFloat(A.borderBottomWidth)||0)/k,left:(parseFloat(A.borderLeftWidth)||0)/k},P.lineWidth.top||(P.lineWidth.right?U="borderRightColor":P.lineWidth.bottom?U="borderBottomColor":P.lineWidth.left&&(U="borderLeftColor"));console.log(P.lineWidth);var j=p(_,function(Z){return E.getComputedStyle(Z)[U]});j!=null&&(P.lineColor=j);var se=["left","right","center","justify"];se.indexOf(A.textAlign)!==-1&&(P.halign=A.textAlign),se=["middle","bottom","top"],se.indexOf(A.verticalAlign)!==-1&&(P.valign=A.verticalAlign);var Y=parseInt(A.fontSize||"");isNaN(Y)||(P.fontSize=Y/O);var Q=h(A);Q&&(P.fontStyle=Q);var X=(A.fontFamily||"").toLowerCase();return y.indexOf(X)!==-1&&(P.font=X),P}l.parseCss=f;function h(y){var _="";return(y.fontWeight==="bold"||y.fontWeight==="bolder"||parseInt(y.fontWeight)>=700)&&(_="bold"),(y.fontStyle==="italic"||y.fontStyle==="oblique")&&(_+="italic"),_}function p(y,_){var w=v(y,_);if(!w)return null;var A=w.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!A||!Array.isArray(A))return null;var E=[parseInt(A[1]),parseInt(A[2]),parseInt(A[3])],P=parseInt(A[4]);return P===0||isNaN(E[0])||isNaN(E[1])||isNaN(E[2])?null:E}function v(y,_){var w=_(y);return w==="rgba(0, 0, 0, 0)"||w==="transparent"||w==="initial"||w==="inherit"?y.parentElement==null?null:v(y.parentElement,_):w}function S(y,_){var w=[y.paddingTop,y.paddingRight,y.paddingBottom,y.paddingLeft],A=96/(72/_),E=(parseInt(y.lineHeight)-parseInt(y.fontSize))/_/2,P=w.map(function(L){return parseInt(L||"0")/A}),O=(0,c.parseSpacing)(P,0);return E>O.top&&(O.top=E),E>O.bottom&&(O.bottom=E),O}}),744:(function(s,l){Object.defineProperty(l,"__esModule",{value:!0}),l.DocHandler=void 0;var u={},c=(function(){function f(h){this.jsPDFDocument=h,this.userStyles={textColor:h.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:h.internal.getFontSize(),fontStyle:h.internal.getFont().fontStyle,font:h.internal.getFont().fontName,lineWidth:h.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:h.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return f.setDefaults=function(h,p){p===void 0&&(p=null),p?p.__autoTableDocumentDefaults=h:u=h},f.unifyColor=function(h){return Array.isArray(h)?h:typeof h=="number"?[h,h,h]:typeof h=="string"?[h]:null},f.prototype.applyStyles=function(h,p){var v,S,y;p===void 0&&(p=!1),h.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(h.fontStyle);var _=this.jsPDFDocument.internal.getFont(),w=_.fontStyle,A=_.fontName;if(h.font&&(A=h.font),h.fontStyle){w=h.fontStyle;var E=this.getFontList()[A];E&&E.indexOf(w)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(E[0]),w=E[0])}if(this.jsPDFDocument.setFont(A,w),h.fontSize&&this.jsPDFDocument.setFontSize(h.fontSize),!p){var P=f.unifyColor(h.fillColor);P&&(v=this.jsPDFDocument).setFillColor.apply(v,P),P=f.unifyColor(h.textColor),P&&(S=this.jsPDFDocument).setTextColor.apply(S,P),P=f.unifyColor(h.lineColor),P&&(y=this.jsPDFDocument).setDrawColor.apply(y,P),typeof h.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(h.lineWidth)}},f.prototype.splitTextToSize=function(h,p,v){return this.jsPDFDocument.splitTextToSize(h,p,v)},f.prototype.rect=function(h,p,v,S,y){return this.jsPDFDocument.rect(h,p,v,S,y)},f.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},f.prototype.getTextWidth=function(h){return this.jsPDFDocument.getTextWidth(h)},f.prototype.getDocument=function(){return this.jsPDFDocument},f.prototype.setPage=function(h){this.jsPDFDocument.setPage(h)},f.prototype.addPage=function(){return this.jsPDFDocument.addPage()},f.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},f.prototype.getGlobalOptions=function(){return u||{}},f.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},f.prototype.pageSize=function(){var h=this.jsPDFDocument.internal.pageSize;return h.width==null&&(h={width:h.getWidth(),height:h.getHeight()}),h},f.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},f.prototype.getLineHeightFactor=function(){var h=this.jsPDFDocument;return h.getLineHeightFactor?h.getLineHeightFactor():1.15},f.prototype.getLineHeight=function(h){return h/this.scaleFactor()*this.getLineHeightFactor()},f.prototype.pageNumber=function(){var h=this.jsPDFDocument.internal.getCurrentPageInfo();return h?h.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},f})();l.DocHandler=c}),4:(function(s,l,u){Object.defineProperty(l,"__esModule",{value:!0}),l.parseHtml=void 0;var c=u(903),f=u(796);function h(S,y,_,w,A){var E,P;w===void 0&&(w=!1),A===void 0&&(A=!1);var O;typeof y=="string"?O=_.document.querySelector(y):O=y;var L=Object.keys(S.getFontList()),D=S.scaleFactor(),F=[],U=[],k=[];if(!O)return console.error("Html table could not be found with input: ",y),{head:F,body:U,foot:k};for(var z=0;z<O.rows.length;z++){var W=O.rows[z],j=(P=(E=W==null?void 0:W.parentElement)===null||E===void 0?void 0:E.tagName)===null||P===void 0?void 0:P.toLowerCase(),se=p(L,D,_,W,w,A);se&&(j==="thead"?F.push(se):j==="tfoot"?k.push(se):U.push(se))}return{head:F,body:U,foot:k}}l.parseHtml=h;function p(S,y,_,w,A,E){for(var P=new f.HtmlRowInput(w),O=0;O<w.cells.length;O++){var L=w.cells[O],D=_.getComputedStyle(L);if(A||D.display!=="none"){var F=void 0;E&&(F=(0,c.parseCss)(S,L,y,D,_)),P.push({rowSpan:L.rowSpan,colSpan:L.colSpan,styles:F,_element:L,content:v(L)})}}var U=_.getComputedStyle(w);if(P.length>0&&(A||U.display!=="none"))return P}function v(S){var y=S.cloneNode(!0);return y.innerHTML=y.innerHTML.replace(/\n/g,"").replace(/ +/g," "),y.innerHTML=y.innerHTML.split(/<br.*?>/).map(function(_){return _.trim()}).join(`
`),y.innerText||y.textContent||""}}),776:(function(s,l,u){Object.defineProperty(l,"__esModule",{value:!0}),l.parseInput=void 0;var c=u(4),f=u(356),h=u(420),p=u(744),v=u(792);function S(O,L){var D=new p.DocHandler(O),F=D.getDocumentOptions(),U=D.getGlobalOptions();(0,v.default)(D,U,F,L);var k=(0,f.assign)({},U,F,L),z;typeof window<"u"&&(z=window);var W=y(U,F,L),j=_(U,F,L),se=w(D,k),Y=E(D,k,z);return{id:L.tableId,content:Y,hooks:j,styles:W,settings:se}}l.parseInput=S;function y(O,L,D){for(var F={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},U=function(j){if(j==="columnStyles"){var se=O[j],Y=L[j],Q=D[j];F.columnStyles=(0,f.assign)({},se,Y,Q)}else{var X=[O,L,D],Z=X.map(function(oe){return oe[j]||{}});F[j]=(0,f.assign)({},Z[0],Z[1],Z[2])}},k=0,z=Object.keys(F);k<z.length;k++){var W=z[k];U(W)}return F}function _(O,L,D){for(var F=[O,L,D],U={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},k=0,z=F;k<z.length;k++){var W=z[k];W.didParseCell&&U.didParseCell.push(W.didParseCell),W.willDrawCell&&U.willDrawCell.push(W.willDrawCell),W.didDrawCell&&U.didDrawCell.push(W.didDrawCell),W.willDrawPage&&U.willDrawPage.push(W.willDrawPage),W.didDrawPage&&U.didDrawPage.push(W.didDrawPage)}return U}function w(O,L){var D,F,U,k,z,W,j,se,Y,Q,X,Z,oe=(0,h.parseSpacing)(L.margin,40/O.scaleFactor()),ee=(D=A(O,L.startY))!==null&&D!==void 0?D:oe.top,G;L.showFoot===!0?G="everyPage":L.showFoot===!1?G="never":G=(F=L.showFoot)!==null&&F!==void 0?F:"everyPage";var ne;L.showHead===!0?ne="everyPage":L.showHead===!1?ne="never":ne=(U=L.showHead)!==null&&U!==void 0?U:"everyPage";var te=(k=L.useCss)!==null&&k!==void 0?k:!1,de=L.theme||(te?"plain":"striped"),me=!!L.horizontalPageBreak,be=(z=L.horizontalPageBreakRepeat)!==null&&z!==void 0?z:null;return{includeHiddenHtml:(W=L.includeHiddenHtml)!==null&&W!==void 0?W:!1,useCss:te,theme:de,startY:ee,margin:oe,pageBreak:(j=L.pageBreak)!==null&&j!==void 0?j:"auto",rowPageBreak:(se=L.rowPageBreak)!==null&&se!==void 0?se:"auto",tableWidth:(Y=L.tableWidth)!==null&&Y!==void 0?Y:"auto",showHead:ne,showFoot:G,tableLineWidth:(Q=L.tableLineWidth)!==null&&Q!==void 0?Q:0,tableLineColor:(X=L.tableLineColor)!==null&&X!==void 0?X:200,horizontalPageBreak:me,horizontalPageBreakRepeat:be,horizontalPageBreakBehaviour:(Z=L.horizontalPageBreakBehaviour)!==null&&Z!==void 0?Z:"afterAllRows"}}function A(O,L){var D=O.getLastAutoTable(),F=O.scaleFactor(),U=O.pageNumber(),k=!1;if(D&&D.startPageNumber){var z=D.startPageNumber+D.pageNumber-1;k=z===U}return typeof L=="number"?L:(L==null||L===!1)&&k&&(D==null?void 0:D.finalY)!=null?D.finalY+20/F:null}function E(O,L,D){var F=L.head||[],U=L.body||[],k=L.foot||[];if(L.html){var z=L.includeHiddenHtml;if(D){var W=(0,c.parseHtml)(O,L.html,D,z,L.useCss)||{};F=W.head||F,U=W.body||F,k=W.foot||F}else console.error("Cannot parse html in non browser environment")}var j=L.columns||P(F,U,k);return{columns:j,head:F,body:U,foot:k}}function P(O,L,D){var F=O[0]||L[0]||D[0]||[],U=[];return Object.keys(F).filter(function(k){return k!=="_element"}).forEach(function(k){var z=1,W;Array.isArray(F)?W=F[parseInt(k)]:W=F[k],typeof W=="object"&&!Array.isArray(W)&&(z=(W==null?void 0:W.colSpan)||1);for(var j=0;j<z;j++){var se=void 0;Array.isArray(F)?se=U.length:se=k+(j>0?"_".concat(j):"");var Y={dataKey:se};U.push(Y)}}),U}}),792:(function(s,l){Object.defineProperty(l,"__esModule",{value:!0});function u(f,h,p,v){for(var S=function(A){A&&typeof A!="object"&&console.error("The options parameter should be of type object, is: "+typeof A),typeof A.extendWidth<"u"&&(A.tableWidth=A.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof A.margins<"u"&&(typeof A.margin>"u"&&(A.margin=A.margins),console.error("Use of deprecated option: margins, use margin instead.")),A.startY&&typeof A.startY!="number"&&(console.error("Invalid value for startY option",A.startY),delete A.startY),!A.didDrawPage&&(A.afterPageContent||A.beforePageContent||A.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),A.didDrawPage=function(k){f.applyStyles(f.userStyles),A.beforePageContent&&A.beforePageContent(k),f.applyStyles(f.userStyles),A.afterPageContent&&A.afterPageContent(k),f.applyStyles(f.userStyles),A.afterPageAdd&&k.pageNumber>1&&k.afterPageAdd(k),f.applyStyles(f.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(k){A[k]&&console.error('The "'.concat(k,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(k){var z=k[0],W=k[1];A[W]&&(console.error("Use of deprecated option ".concat(W,". Use ").concat(z," instead")),A[z]=A[W])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(k){var z=typeof k=="string"?k:k[0],W=typeof k=="string"?k:k[1];typeof A[z]<"u"&&(typeof A.styles[W]>"u"&&(A.styles[W]=A[z]),console.error("Use of deprecated option: "+z+", use the style "+W+" instead."))});for(var E=0,P=["styles","bodyStyles","headStyles","footStyles"];E<P.length;E++){var O=P[E];c(A[O]||{})}for(var L=A.columnStyles||{},D=0,F=Object.keys(L);D<F.length;D++){var U=F[D];c(L[U]||{})}},y=0,_=[h,p,v];y<_.length;y++){var w=_[y];S(w)}}l.default=u;function c(f){f.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),f.minCellHeight||(f.minCellHeight=f.rowHeight)):f.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),f.cellWidth||(f.cellWidth=f.columnWidth))}}),260:(function(s,l,u){Object.defineProperty(l,"__esModule",{value:!0}),l.Column=l.Cell=l.Row=l.Table=void 0;var c=u(796),f=u(172),h=u(420),p=(function(){function _(w,A){this.pageNumber=1,this.pageCount=1,this.id=w.id,this.settings=w.settings,this.styles=w.styles,this.hooks=w.hooks,this.columns=A.columns,this.head=A.head,this.body=A.body,this.foot=A.foot}return _.prototype.getHeadHeight=function(w){return this.head.reduce(function(A,E){return A+E.getMaxCellHeight(w)},0)},_.prototype.getFootHeight=function(w){return this.foot.reduce(function(A,E){return A+E.getMaxCellHeight(w)},0)},_.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},_.prototype.callCellHooks=function(w,A,E,P,O,L){for(var D=0,F=A;D<F.length;D++){var U=F[D],k=new f.CellHookData(w,this,E,P,O,L),z=U(k)===!1;if(E.text=Array.isArray(E.text)?E.text:[E.text],z)return!1}return!0},_.prototype.callEndPageHooks=function(w,A){w.applyStyles(w.userStyles);for(var E=0,P=this.hooks.didDrawPage;E<P.length;E++){var O=P[E];O(new f.HookData(w,this,A))}},_.prototype.callWillDrawPageHooks=function(w,A){for(var E=0,P=this.hooks.willDrawPage;E<P.length;E++){var O=P[E];O(new f.HookData(w,this,A))}},_.prototype.getWidth=function(w){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var A=this.columns.reduce(function(P,O){return P+O.wrappedWidth},0);return A}else{var E=this.settings.margin;return w-E.left-E.right}},_})();l.Table=p;var v=(function(){function _(w,A,E,P,O){O===void 0&&(O=!1),this.height=0,this.raw=w,w instanceof c.HtmlRowInput&&(this.raw=w._element,this.element=w._element),this.index=A,this.section=E,this.cells=P,this.spansMultiplePages=O}return _.prototype.getMaxCellHeight=function(w){var A=this;return w.reduce(function(E,P){var O;return Math.max(E,((O=A.cells[P.index])===null||O===void 0?void 0:O.height)||0)},0)},_.prototype.hasRowSpan=function(w){var A=this;return w.filter(function(E){var P=A.cells[E.index];return P?P.rowSpan>1:!1}).length>0},_.prototype.canEntireRowFit=function(w,A){return this.getMaxCellHeight(A)<=w},_.prototype.getMinimumRowHeight=function(w,A){var E=this;return w.reduce(function(P,O){var L=E.cells[O.index];if(!L)return 0;var D=A.getLineHeight(L.styles.fontSize),F=L.padding("vertical"),U=F+D;return U>P?U:P},0)},_})();l.Row=v;var S=(function(){function _(w,A,E){var P,O;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=A,this.section=E,this.raw=w;var L=w;w!=null&&typeof w=="object"&&!Array.isArray(w)?(this.rowSpan=w.rowSpan||1,this.colSpan=w.colSpan||1,L=(O=(P=w.content)!==null&&P!==void 0?P:w.title)!==null&&O!==void 0?O:w,w._element&&(this.raw=w._element)):(this.rowSpan=1,this.colSpan=1);var D=L!=null?""+L:"",F=/\r\n|\r|\n/g;this.text=D.split(F)}return _.prototype.getTextPos=function(){var w;if(this.styles.valign==="top")w=this.y+this.padding("top");else if(this.styles.valign==="bottom")w=this.y+this.height-this.padding("bottom");else{var A=this.height-this.padding("vertical");w=this.y+A/2+this.padding("top")}var E;if(this.styles.halign==="right")E=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var P=this.width-this.padding("horizontal");E=this.x+P/2+this.padding("left")}else E=this.x+this.padding("left");return{x:E,y:w}},_.prototype.getContentHeight=function(w,A){A===void 0&&(A=1.15);var E=Array.isArray(this.text)?this.text.length:1,P=this.styles.fontSize/w*A,O=E*P+this.padding("vertical");return Math.max(O,this.styles.minCellHeight)},_.prototype.padding=function(w){var A=(0,h.parseSpacing)(this.styles.cellPadding,0);return w==="vertical"?A.top+A.bottom:w==="horizontal"?A.left+A.right:A[w]},_})();l.Cell=S;var y=(function(){function _(w,A,E){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=w,this.raw=A,this.index=E}return _.prototype.getMaxCustomCellWidth=function(w){for(var A=0,E=0,P=w.allRows();E<P.length;E++){var O=P[E],L=O.cells[this.index];L&&typeof L.styles.cellWidth=="number"&&(A=Math.max(A,L.styles.cellWidth))}return A},_})();l.Column=y}),356:(function(s,l){Object.defineProperty(l,"__esModule",{value:!0}),l.assign=void 0;function u(c,f,h,p,v){if(c==null)throw new TypeError("Cannot convert undefined or null to object");for(var S=Object(c),y=1;y<arguments.length;y++){var _=arguments[y];if(_!=null)for(var w in _)Object.prototype.hasOwnProperty.call(_,w)&&(S[w]=_[w])}return S}l.assign=u}),972:(function(s,l,u){Object.defineProperty(l,"__esModule",{value:!0}),l.createTable=void 0;var c=u(744),f=u(260),h=u(324),p=u(796),v=u(356);function S(O,L){var D=new c.DocHandler(O),F=y(L,D.scaleFactor()),U=new f.Table(L,F);return(0,h.calculateWidths)(D,U),D.applyStyles(D.userStyles),U}l.createTable=S;function y(O,L){var D=O.content,F=E(D.columns);if(D.head.length===0){var U=w(F,"head");U&&D.head.push(U)}if(D.foot.length===0){var U=w(F,"foot");U&&D.foot.push(U)}var k=O.settings.theme,z=O.styles;return{columns:F,head:_("head",D.head,F,z,k,L),body:_("body",D.body,F,z,k,L),foot:_("foot",D.foot,F,z,k,L)}}function _(O,L,D,F,U,k){var z={},W=L.map(function(j,se){for(var Y=0,Q={},X=0,Z=0,oe=0,ee=D;oe<ee.length;oe++){var G=ee[oe];if(z[G.index]==null||z[G.index].left===0)if(Z===0){var ne=void 0;Array.isArray(j)?ne=j[G.index-X-Y]:ne=j[G.dataKey];var te={};typeof ne=="object"&&!Array.isArray(ne)&&(te=(ne==null?void 0:ne.styles)||{});var de=P(O,G,se,U,F,k,te),me=new f.Cell(ne,de,O);Q[G.dataKey]=me,Q[G.index]=me,Z=me.colSpan-1,z[G.index]={left:me.rowSpan-1,times:Z}}else Z--,X++;else z[G.index].left--,Z=z[G.index].times,Y++}return new f.Row(j,se,O,Q)});return W}function w(O,L){var D={};return O.forEach(function(F){if(F.raw!=null){var U=A(L,F.raw);U!=null&&(D[F.dataKey]=U)}}),Object.keys(D).length>0?D:null}function A(O,L){if(O==="head"){if(typeof L=="object")return L.header||L.title||null;if(typeof L=="string"||typeof L=="number")return L}else if(O==="foot"&&typeof L=="object")return L.footer;return null}function E(O){return O.map(function(L,D){var F,U,k;return typeof L=="object"?k=(U=(F=L.dataKey)!==null&&F!==void 0?F:L.key)!==null&&U!==void 0?U:D:k=D,new f.Column(k,L,D)})}function P(O,L,D,F,U,k,z){var W=(0,p.getTheme)(F),j;O==="head"?j=U.headStyles:O==="body"?j=U.bodyStyles:O==="foot"&&(j=U.footStyles);var se=(0,v.assign)({},W.table,W[O],U.styles,j),Y=U.columnStyles[L.dataKey]||U.columnStyles[L.index]||{},Q=O==="body"?Y:{},X=O==="body"&&D%2===0?(0,v.assign)({},W.alternateRow,U.alternateRowStyles):{},Z=(0,p.defaultStyles)(k),oe=(0,v.assign)({},Z,se,X,Q);return(0,v.assign)(oe,z)}}),664:(function(s,l,u){Object.defineProperty(l,"__esModule",{value:!0}),l.addPage=l.drawTable=void 0;var c=u(420),f=u(260),h=u(744),p=u(356),v=u(136),S=u(224);function y(Y,Q){var X=Q.settings,Z=X.startY,oe=X.margin,ee={x:oe.left,y:Z},G=Q.getHeadHeight(Q.columns)+Q.getFootHeight(Q.columns),ne=Z+oe.bottom+G;if(X.pageBreak==="avoid"){var te=Q.body,de=te.reduce(function(Ie,Ee){return Ie+Ee.height},0);ne+=de}var me=new h.DocHandler(Y);(X.pageBreak==="always"||X.startY!=null&&ne>me.pageSize().height)&&(se(me),ee.y=oe.top),Q.callWillDrawPageHooks(me,ee);var be=(0,p.assign)({},ee);Q.startPageNumber=me.pageNumber(),X.horizontalPageBreak?_(me,Q,be,ee):(me.applyStyles(me.userStyles),(X.showHead==="firstPage"||X.showHead==="everyPage")&&Q.head.forEach(function(Ie){return U(me,Q,Ie,ee,Q.columns)}),me.applyStyles(me.userStyles),Q.body.forEach(function(Ie,Ee){var Xe=Ee===Q.body.length-1;F(me,Q,Ie,Xe,be,ee,Q.columns)}),me.applyStyles(me.userStyles),(X.showFoot==="lastPage"||X.showFoot==="everyPage")&&Q.foot.forEach(function(Ie){return U(me,Q,Ie,ee,Q.columns)})),(0,c.addTableBorder)(me,Q,be,ee),Q.callEndPageHooks(me,ee),Q.finalY=ee.y,Y.lastAutoTable=Q,Y.previousAutoTable=Q,Y.autoTable&&(Y.autoTable.previous=Q),me.applyStyles(me.userStyles)}l.drawTable=y;function _(Y,Q,X,Z){var oe=(0,S.calculateAllColumnsCanFitInPage)(Y,Q),ee=Q.settings;if(ee.horizontalPageBreakBehaviour==="afterAllRows")oe.forEach(function(de,me){Y.applyStyles(Y.userStyles),me>0?j(Y,Q,X,Z,de.columns,!0):w(Y,Q,Z,de.columns),A(Y,Q,X,Z,de.columns),P(Y,Q,Z,de.columns)});else for(var G=-1,ne=oe[0],te=function(){var de=G;if(ne){Y.applyStyles(Y.userStyles);var me=ne.columns;G>=0?j(Y,Q,X,Z,me,!0):w(Y,Q,Z,me),de=E(Y,Q,G+1,Z,me),P(Y,Q,Z,me)}var be=de-G;oe.slice(1).forEach(function(Ie){Y.applyStyles(Y.userStyles),j(Y,Q,X,Z,Ie.columns,!0),E(Y,Q,G+1,Z,Ie.columns,be),P(Y,Q,Z,Ie.columns)}),G=de};G<Q.body.length-1;)te()}function w(Y,Q,X,Z){var oe=Q.settings;Y.applyStyles(Y.userStyles),(oe.showHead==="firstPage"||oe.showHead==="everyPage")&&Q.head.forEach(function(ee){return U(Y,Q,ee,X,Z)})}function A(Y,Q,X,Z,oe){Y.applyStyles(Y.userStyles),Q.body.forEach(function(ee,G){var ne=G===Q.body.length-1;F(Y,Q,ee,ne,X,Z,oe)})}function E(Y,Q,X,Z,oe,ee){Y.applyStyles(Y.userStyles),ee=ee??Q.body.length;var G=Math.min(X+ee,Q.body.length),ne=-1;return Q.body.slice(X,G).forEach(function(te,de){var me=X+de===Q.body.length-1,be=W(Y,Q,me,Z);te.canEntireRowFit(be,oe)&&(U(Y,Q,te,Z,oe),ne=X+de)}),ne}function P(Y,Q,X,Z){var oe=Q.settings;Y.applyStyles(Y.userStyles),(oe.showFoot==="lastPage"||oe.showFoot==="everyPage")&&Q.foot.forEach(function(ee){return U(Y,Q,ee,X,Z)})}function O(Y,Q,X){var Z=X.getLineHeight(Y.styles.fontSize),oe=Y.padding("vertical"),ee=Math.floor((Q-oe)/Z);return Math.max(0,ee)}function L(Y,Q,X,Z){var oe={};Y.spansMultiplePages=!0,Y.height=0;for(var ee=0,G=0,ne=X.columns;G<ne.length;G++){var te=ne[G],de=Y.cells[te.index];if(de){Array.isArray(de.text)||(de.text=[de.text]);var me=new f.Cell(de.raw,de.styles,de.section);me=(0,p.assign)(me,de),me.text=[];var be=O(de,Q,Z);de.text.length>be&&(me.text=de.text.splice(be,de.text.length));var Ie=Z.scaleFactor(),Ee=Z.getLineHeightFactor();de.contentHeight=de.getContentHeight(Ie,Ee),de.contentHeight>=Q&&(de.contentHeight=Q,me.styles.minCellHeight-=Q),de.contentHeight>Y.height&&(Y.height=de.contentHeight),me.contentHeight=me.getContentHeight(Ie,Ee),me.contentHeight>ee&&(ee=me.contentHeight),oe[te.index]=me}}var Xe=new f.Row(Y.raw,-1,Y.section,oe,!0);Xe.height=ee;for(var tt=0,Te=X.columns;tt<Te.length;tt++){var te=Te[tt],me=Xe.cells[te.index];me&&(me.height=Xe.height);var de=Y.cells[te.index];de&&(de.height=Y.height)}return Xe}function D(Y,Q,X,Z){var oe=Y.pageSize().height,ee=Z.settings.margin,G=ee.top+ee.bottom,ne=oe-G;Q.section==="body"&&(ne-=Z.getHeadHeight(Z.columns)+Z.getFootHeight(Z.columns));var te=Q.getMinimumRowHeight(Z.columns,Y),de=te<X;if(te>ne)return console.error("Will not be able to print row ".concat(Q.index," correctly since it's minimum height is larger than page height")),!0;if(!de)return!1;var me=Q.hasRowSpan(Z.columns),be=Q.getMaxCellHeight(Z.columns)>ne;return be?(me&&console.error("The content of row ".concat(Q.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(me||Z.settings.rowPageBreak==="avoid")}function F(Y,Q,X,Z,oe,ee,G){var ne=W(Y,Q,Z,ee);if(X.canEntireRowFit(ne,G))U(Y,Q,X,ee,G);else if(D(Y,X,ne,Q)){var te=L(X,ne,Q,Y);U(Y,Q,X,ee,G),j(Y,Q,oe,ee,G),F(Y,Q,te,Z,oe,ee,G)}else j(Y,Q,oe,ee,G),F(Y,Q,X,Z,oe,ee,G)}function U(Y,Q,X,Z,oe){Z.x=Q.settings.margin.left;for(var ee=0,G=oe;ee<G.length;ee++){var ne=G[ee],te=X.cells[ne.index];if(!te){Z.x+=ne.width;continue}Y.applyStyles(te.styles),te.x=Z.x,te.y=Z.y;var de=Q.callCellHooks(Y,Q.hooks.willDrawCell,te,X,ne,Z);if(de===!1){Z.x+=ne.width;continue}k(Y,te,Z);var me=te.getTextPos();(0,v.default)(te.text,me.x,me.y,{halign:te.styles.halign,valign:te.styles.valign,maxWidth:Math.ceil(te.width-te.padding("left")-te.padding("right"))},Y.getDocument()),Q.callCellHooks(Y,Q.hooks.didDrawCell,te,X,ne,Z),Z.x+=ne.width}Z.y+=X.height}function k(Y,Q,X){var Z=Q.styles;if(Y.getDocument().setFillColor(Y.getDocument().getFillColor()),typeof Z.lineWidth=="number"){var oe=(0,c.getFillStyle)(Z.lineWidth,Z.fillColor);oe&&Y.rect(Q.x,X.y,Q.width,Q.height,oe)}else typeof Z.lineWidth=="object"&&(Z.fillColor&&Y.rect(Q.x,X.y,Q.width,Q.height,"F"),z(Y,Q,X,Z.lineWidth))}function z(Y,Q,X,Z){var oe,ee,G,ne;Z.top&&(oe=X.x,ee=X.y,G=X.x+Q.width,ne=X.y,Z.right&&(G+=.5*Z.right),Z.left&&(oe-=.5*Z.left),te(Z.top,oe,ee,G,ne)),Z.bottom&&(oe=X.x,ee=X.y+Q.height,G=X.x+Q.width,ne=X.y+Q.height,Z.right&&(G+=.5*Z.right),Z.left&&(oe-=.5*Z.left),te(Z.bottom,oe,ee,G,ne)),Z.left&&(oe=X.x,ee=X.y,G=X.x,ne=X.y+Q.height,Z.top&&(ee-=.5*Z.top),Z.bottom&&(ne+=.5*Z.bottom),te(Z.left,oe,ee,G,ne)),Z.right&&(oe=X.x+Q.width,ee=X.y,G=X.x+Q.width,ne=X.y+Q.height,Z.top&&(ee-=.5*Z.top),Z.bottom&&(ne+=.5*Z.bottom),te(Z.right,oe,ee,G,ne));function te(de,me,be,Ie,Ee){Y.getDocument().setLineWidth(de),Y.getDocument().line(me,be,Ie,Ee,"S")}}function W(Y,Q,X,Z){var oe=Q.settings.margin.bottom,ee=Q.settings.showFoot;return(ee==="everyPage"||ee==="lastPage"&&X)&&(oe+=Q.getFootHeight(Q.columns)),Y.pageSize().height-Z.y-oe}function j(Y,Q,X,Z,oe,ee){oe===void 0&&(oe=[]),ee===void 0&&(ee=!1),Y.applyStyles(Y.userStyles),Q.settings.showFoot==="everyPage"&&!ee&&Q.foot.forEach(function(ne){return U(Y,Q,ne,Z,oe)}),Q.callEndPageHooks(Y,Z);var G=Q.settings.margin;(0,c.addTableBorder)(Y,Q,X,Z),se(Y),Q.pageNumber++,Q.pageCount++,Z.x=G.left,Z.y=G.top,X.y=G.top,Q.callWillDrawPageHooks(Y,Z),Q.settings.showHead==="everyPage"&&(Q.head.forEach(function(ne){return U(Y,Q,ne,Z,oe)}),Y.applyStyles(Y.userStyles))}l.addPage=j;function se(Y){var Q=Y.pageNumber();Y.setPage(Q+1);var X=Y.pageNumber();return X===Q?(Y.addPage(),!0):!1}}),224:(function(s,l,u){Object.defineProperty(l,"__esModule",{value:!0}),l.calculateAllColumnsCanFitInPage=void 0;var c=u(420);function f(p,v,S){var y;S===void 0&&(S={});var _=(0,c.getPageAvailableWidth)(p,v),w=new Map,A=[],E=[],P=[];v.settings.horizontalPageBreakRepeat,Array.isArray(v.settings.horizontalPageBreakRepeat)?P=v.settings.horizontalPageBreakRepeat:(typeof v.settings.horizontalPageBreakRepeat=="string"||typeof v.settings.horizontalPageBreakRepeat=="number")&&(P=[v.settings.horizontalPageBreakRepeat]),P.forEach(function(F){var U=v.columns.find(function(k){return k.dataKey===F||k.index===F});U&&!w.has(U.index)&&(w.set(U.index,!0),A.push(U.index),E.push(v.columns[U.index]),_-=U.wrappedWidth)});for(var O=!0,L=(y=S==null?void 0:S.start)!==null&&y!==void 0?y:0;L<v.columns.length;){if(w.has(L)){L++;continue}var D=v.columns[L].wrappedWidth;if(O||_>=D)O=!1,A.push(L),E.push(v.columns[L]),_-=D;else break;L++}return{colIndexes:A,columns:E,lastIndex:L-1}}function h(p,v){for(var S=[],y=0;y<v.columns.length;y++){var _=f(p,v,{start:y});_.columns.length&&(S.push(_),y=_.lastIndex)}return S}l.calculateAllColumnsCanFitInPage=h}),324:(function(s,l,u){Object.defineProperty(l,"__esModule",{value:!0}),l.ellipsize=l.resizeColumns=l.calculateWidths=void 0;var c=u(420);function f(A,E){h(A,E);var P=[],O=0;E.columns.forEach(function(D){var F=D.getMaxCustomCellWidth(E);F?D.width=F:(D.width=D.wrappedWidth,P.push(D)),O+=D.width});var L=E.getWidth(A.pageSize().width)-O;L&&(L=p(P,L,function(D){return Math.max(D.minReadableWidth,D.minWidth)})),L&&(L=p(P,L,function(D){return D.minWidth})),L=Math.abs(L),!E.settings.horizontalPageBreak&&L>.1/A.scaleFactor()&&(L=L<1?L:Math.round(L),console.warn("Of the table content, ".concat(L," units width could not fit page"))),S(E),y(E,A),v(E)}l.calculateWidths=f;function h(A,E){var P=A.scaleFactor(),O=E.settings.horizontalPageBreak,L=(0,c.getPageAvailableWidth)(A,E);E.allRows().forEach(function(D){for(var F=0,U=E.columns;F<U.length;F++){var k=U[F],z=D.cells[k.index];if(z){var W=E.hooks.didParseCell;E.callCellHooks(A,W,z,D,k,null);var j=z.padding("horizontal");z.contentWidth=(0,c.getStringWidth)(z.text,z.styles,A)+j;var se=(0,c.getStringWidth)(z.text.join(" ").split(/\s+/),z.styles,A);if(z.minReadableWidth=se+z.padding("horizontal"),typeof z.styles.cellWidth=="number")z.minWidth=z.styles.cellWidth,z.wrappedWidth=z.styles.cellWidth;else if(z.styles.cellWidth==="wrap"||O===!0)z.contentWidth>L?(z.minWidth=L,z.wrappedWidth=L):(z.minWidth=z.contentWidth,z.wrappedWidth=z.contentWidth);else{var Y=10/P;z.minWidth=z.styles.minCellWidth||Y,z.wrappedWidth=z.contentWidth,z.minWidth>z.wrappedWidth&&(z.wrappedWidth=z.minWidth)}}}}),E.allRows().forEach(function(D){for(var F=0,U=E.columns;F<U.length;F++){var k=U[F],z=D.cells[k.index];if(z&&z.colSpan===1)k.wrappedWidth=Math.max(k.wrappedWidth,z.wrappedWidth),k.minWidth=Math.max(k.minWidth,z.minWidth),k.minReadableWidth=Math.max(k.minReadableWidth,z.minReadableWidth);else{var W=E.styles.columnStyles[k.dataKey]||E.styles.columnStyles[k.index]||{},j=W.cellWidth||W.minCellWidth;j&&typeof j=="number"&&(k.minWidth=j,k.wrappedWidth=j)}z&&(z.colSpan>1&&!k.minWidth&&(k.minWidth=z.minWidth),z.colSpan>1&&!k.wrappedWidth&&(k.wrappedWidth=z.minWidth))}})}function p(A,E,P){for(var O=E,L=A.reduce(function(Y,Q){return Y+Q.wrappedWidth},0),D=0;D<A.length;D++){var F=A[D],U=F.wrappedWidth/L,k=O*U,z=F.width+k,W=P(F),j=z<W?W:z;E-=j-F.width,F.width=j}if(E=Math.round(E*1e10)/1e10,E){var se=A.filter(function(Y){return E<0?Y.width>P(Y):!0});se.length&&(E=p(se,E,P))}return E}l.resizeColumns=p;function v(A){for(var E={},P=1,O=A.allRows(),L=0;L<O.length;L++)for(var D=O[L],F=0,U=A.columns;F<U.length;F++){var k=U[F],z=E[k.index];if(P>1)P--,delete D.cells[k.index];else if(z)z.cell.height+=D.height,P=z.cell.colSpan,delete D.cells[k.index],z.left--,z.left<=1&&delete E[k.index];else{var W=D.cells[k.index];if(!W)continue;if(W.height=D.height,W.rowSpan>1){var j=O.length-L,se=W.rowSpan>j?j:W.rowSpan;E[k.index]={cell:W,left:se,row:D}}}}}function S(A){for(var E=A.allRows(),P=0;P<E.length;P++)for(var O=E[P],L=null,D=0,F=0,U=0;U<A.columns.length;U++){var k=A.columns[U];if(F-=1,F>1&&A.columns[U+1])D+=k.width,delete O.cells[k.index];else if(L){var z=L;delete O.cells[k.index],L=null,z.width=k.width+D}else{var z=O.cells[k.index];if(!z)continue;if(F=z.colSpan,D=0,z.colSpan>1){L=z,D+=k.width;continue}z.width=k.width+D}}}function y(A,E){for(var P={count:0,height:0},O=0,L=A.allRows();O<L.length;O++){for(var D=L[O],F=0,U=A.columns;F<U.length;F++){var k=U[F],z=D.cells[k.index];if(z){E.applyStyles(z.styles,!0);var W=z.width-z.padding("horizontal");if(z.styles.overflow==="linebreak")z.text=E.splitTextToSize(z.text,W+1/E.scaleFactor(),{fontSize:z.styles.fontSize});else if(z.styles.overflow==="ellipsize")z.text=_(z.text,W,z.styles,E,"...");else if(z.styles.overflow==="hidden")z.text=_(z.text,W,z.styles,E,"");else if(typeof z.styles.overflow=="function"){var j=z.styles.overflow(z.text,W);typeof j=="string"?z.text=[j]:z.text=j}z.contentHeight=z.getContentHeight(E.scaleFactor(),E.getLineHeightFactor());var se=z.contentHeight/z.rowSpan;z.rowSpan>1&&P.count*P.height<se*z.rowSpan?P={height:se,count:z.rowSpan}:P&&P.count>0&&P.height>se&&(se=P.height),se>D.height&&(D.height=se)}}P.count--}}function _(A,E,P,O,L){return A.map(function(D){return w(D,E,P,O,L)})}l.ellipsize=_;function w(A,E,P,O,L){var D=1e4*O.scaleFactor();if(E=Math.ceil(E*D)/D,E>=(0,c.getStringWidth)(A,P,O))return A;for(;E<(0,c.getStringWidth)(A+L,P,O)&&!(A.length<=1);)A=A.substring(0,A.length-1);return A.trim()+L}}),964:(function(s){if(typeof t>"u"){var l=new Error("Cannot find module 'undefined'");throw l.code="MODULE_NOT_FOUND",l}s.exports=t})},i={};function o(s){var l=i[s];if(l!==void 0)return l.exports;var u=i[s]={exports:{}};return r[s].call(u.exports,u,u.exports,o),u.exports}var a={};return(function(){var s=a;Object.defineProperty(s,"__esModule",{value:!0}),s.Cell=s.Column=s.Row=s.Table=s.CellHookData=s.__drawTable=s.__createTable=s.applyPlugin=void 0;var l=o(340),u=o(776),c=o(664),f=o(972),h=o(260);Object.defineProperty(s,"Table",{enumerable:!0,get:function(){return h.Table}});var p=o(172);Object.defineProperty(s,"CellHookData",{enumerable:!0,get:function(){return p.CellHookData}});var v=o(260);Object.defineProperty(s,"Cell",{enumerable:!0,get:function(){return v.Cell}}),Object.defineProperty(s,"Column",{enumerable:!0,get:function(){return v.Column}}),Object.defineProperty(s,"Row",{enumerable:!0,get:function(){return v.Row}});function S(E){(0,l.default)(E)}s.applyPlugin=S;function y(E,P){var O=(0,u.parseInput)(E,P),L=(0,f.createTable)(E,O);(0,c.drawTable)(E,L)}function _(E,P){var O=(0,u.parseInput)(E,P);return(0,f.createTable)(E,O)}s.__createTable=_;function w(E,P){(0,c.drawTable)(E,P)}s.__drawTable=w;try{var A=o(964);A.jsPDF&&(A=A.jsPDF),S(A)}catch{}s.default=y})(),a})()})})(r_)),r_.exports}var nue=tue();const i_=gi(nue),rue=({data:n,onClose:e})=>{var h;const[t,r]=Me.useState(null),[i,o]=Me.useState(0);Me.useEffect(()=>{const p=Math.floor(Math.random()*15)+85;let v=0;const S=setInterval(()=>{v<p?(v+=1,o(v)):clearInterval(S)},20);return()=>clearInterval(S)},[]);const a=()=>`--- NEURAL_SUMMARY_METADATA ---
ID: ${n.metadata.incidentId}
SCOPE: ${n.metadata.systemScope}
TIMESTAMP: ${new Date().toISOString()}
CLASSIFICATION: ${n.metadata.confidentiality}
SYSTEM: SRE_SYNAPSE_CORE_V4
-------------------------------

`,s=()=>{r("Markdown");let p=a();p+=`# ${n.reportTitle}

`,p+=`## Executive Summary
${n.executiveSummary}

`,p+=`## Key Findings
${n.keyFindings.map(v=>`- ${v}`).join(`
`)}

`,n.auditLog&&n.auditLog.length>0&&(p+=`## Data Integrity & Auto-Correction Log
| Discrepancy | Correction Applied | Confidence |
|---|---|---|
`,n.auditLog.forEach(v=>{p+=`| ${v.discrepancy} | ${v.correction} | ${v.confidence} |
`}),p+=`
`),p+=`## Action Plan
`,n.actionPlan.forEach(v=>{p+=`### Phase: ${v.phase}
${v.objectives.map(S=>`- ${S}`).join(`
`)}

`}),p+=`## Telemetry Overview
| Metric | Value | Status |
|---|---|---|
`,n.telemetryOverview.forEach(v=>{p+=`| ${v.metric} | ${v.value} | ${v.status} |
`}),f(p,`SYNAPSE_SUMMARY_${n.metadata.incidentId}.md`,"text/markdown"),r(null)},l=()=>{r("Text");let p=a();p+=`${n.reportTitle.toUpperCase()}
`,p+=`${"=".repeat(n.reportTitle.length)}

`,p+=`EXECUTIVE SUMMARY:
${n.executiveSummary}

`,p+=`KEY FINDINGS:
${n.keyFindings.map((v,S)=>`${S+1}. ${v}`).join(`
`)}

`,n.auditLog&&n.auditLog.length>0&&(p+=`AUDIT & CORRECTION LOG:
`,n.auditLog.forEach(v=>{p+=`[FIXED]: ${v.discrepancy} -> ${v.correction} (${v.confidence})
`}),p+=`
`),p+=`ACTION PLAN:
`,n.actionPlan.forEach(v=>{p+=`[ PHASE: ${v.phase} ]
${v.objectives.map(S=>`  > ${S}`).join(`
`)}

`}),p+=`TELEMETRY:
`,n.telemetryOverview.forEach(v=>{p+=`${v.metric.padEnd(25)}: ${v.value.padEnd(15)} [${v.status.toUpperCase()}]
`}),f(p,`SYNAPSE_LOG_${n.metadata.incidentId}.txt`,"text/plain"),r(null)},u=()=>{r("CSV");let p=`Type,Category/Phase,Metric/Objective,Value/Detail,Status
`;p+=`METADATA,System,Scope,${n.metadata.systemScope},N/A
`,p+=`METADATA,Security,Classification,${n.metadata.confidentiality},N/A
`,n.auditLog&&n.auditLog.forEach(v=>{p+=`AUDIT,Data_Correction,"${v.discrepancy}","${v.correction}","${v.confidence}"
`}),n.telemetryOverview.forEach(v=>{p+=`TELEMETRY,N/A,"${v.metric}","${v.value}","${v.status}"
`}),n.actionPlan.forEach(v=>{v.objectives.forEach(S=>{p+=`ACTION_PLAN,"${v.phase}","${S}",N/A,PENDING
`})}),f(p,`SYNAPSE_DATA_${n.metadata.incidentId}.csv`,"text/csv"),r(null)},c=()=>{r("PDF");try{const p=new Vn,v=new Date().toLocaleString();p.setFillColor(15,15,15),p.rect(0,0,210,297,"F"),p.setFillColor(0,240,255),p.rect(0,0,210,6,"F"),p.setTextColor(255,255,255),p.setFontSize(22),p.setFont("courier","bold"),p.text("SRE SYNAPSE // EXECUTIVE DOSSIER",15,25),p.setFontSize(8),p.setFont("courier","normal"),p.setTextColor(0,240,255),p.text(`ID: ${n.metadata.incidentId} | NODE: ENSEMBLE_PREVIEW_3.1 | AUTH: ENCRYPTED`,15,32),p.setDrawColor(255,255,255),p.setLineWidth(.1),p.line(15,38,195,38),p.setTextColor(255,255,255),p.setFontSize(14),p.setFont("helvetica","bold"),p.text(n.reportTitle.toUpperCase(),15,50),p.setFontSize(10),p.setFont("helvetica","normal"),p.setTextColor(200,200,200);const S=p.splitTextToSize(n.executiveSummary,180);p.text(S,15,60);let y=60+S.length*5+15;p.setTextColor(0,255,148),p.setFontSize(11),p.setFont("courier","bold"),p.text("FORENSIC_KEY_FINDINGS",15,y),y+=6,i_(p,{startY:y,head:[["#","Observation & Neural Correlation"]],body:n.keyFindings.map((w,A)=>[`0${A+1}`,w]),theme:"grid",styles:{fontSize:9,font:"helvetica",fillColor:[25,25,25],textColor:[220,220,220],lineColor:[50,50,50],lineWidth:.1},headStyles:{fillColor:[0,240,255],textColor:[0,0,0],fontStyle:"bold"},margin:{left:15,right:15}}),y=p.lastAutoTable.finalY+15,n.auditLog&&n.auditLog.length>0&&(p.setTextColor(255,62,0),p.setFontSize(11),p.text("DATA_INTEGRITY_AUDIT_LOG",15,y),y+=6,i_(p,{startY:y,head:[["Discrepancy Detected","Correction Applied","Confidence"]],body:n.auditLog.map(w=>[w.discrepancy,w.correction,w.confidence]),theme:"grid",styles:{fontSize:8,font:"courier",fillColor:[40,20,20],textColor:[255,200,200],lineColor:[100,50,50],lineWidth:.1},headStyles:{fillColor:[200,50,50],textColor:[255,255,255],fontStyle:"bold"}}),y=p.lastAutoTable.finalY+15),p.setTextColor(0,255,148),p.setFontSize(11),p.text("SYSTEM_TELEMETRY_MATRIX",15,y),y+=6,i_(p,{startY:y,head:[["Metric","Diagnostic Value","Status"]],body:n.telemetryOverview.map(w=>[w.metric.toUpperCase(),w.value,w.status]),theme:"grid",styles:{fontSize:9,font:"courier",fillColor:[30,30,30],textColor:[0,240,255],lineColor:[50,50,50],lineWidth:.1},headStyles:{fillColor:[20,20,20],textColor:[255,255,255],fontStyle:"bold"}}),y=p.lastAutoTable.finalY+15,p.setTextColor(0,255,148),p.setFontSize(11),p.text("TACTICAL_ACTION_PLAN",15,y),y+=6,n.actionPlan.forEach(w=>{y>250&&(p.addPage(),y=20),p.setTextColor(0,240,255),p.setFontSize(10),p.text(`> ${w.phase.toUpperCase()}`,15,y),y+=5,p.setTextColor(180,180,180),p.setFontSize(9),w.objectives.forEach(A=>{const E=p.splitTextToSize(`- ${A}`,170);p.text(E,20,y),y+=E.length*4+2}),y+=5});const _=p.internal.pages.length-1;for(let w=1;w<=_;w++)p.setPage(w),p.setFontSize(7),p.setTextColor(100,100,100),p.text(`CONFIDENTIALITY: ${n.metadata.confidentiality} | SYNCED: ${v}`,15,285),p.text(`PAGE ${w} OF ${_}`,195,285,{align:"right"});p.save(`SYNAPSE_DOSSIER_${n.metadata.incidentId}.pdf`)}catch(p){console.error("PDF generation error:",p)}finally{r(null)}},f=(p,v,S)=>{const y=new Blob([p],{type:S}),_=URL.createObjectURL(y),w=document.createElement("a");w.href=_,w.download=v,w.click(),URL.revokeObjectURL(_)};return re.jsx("div",{className:"fixed inset-0 z-[200] bg-gem-onyx/98 backdrop-blur-3xl flex items-center justify-center p-4 lg:p-12 overflow-y-auto custom-scrollbar",children:re.jsxs("div",{className:"w-full max-w-7xl bg-black border border-white/10 p-6 lg:p-20 relative glass-card animate-in fade-in zoom-in duration-700 shadow-[0_0_120px_rgba(0,240,255,0.15)] flex flex-col lg:flex-row gap-16",children:[re.jsx("button",{onClick:e,className:"absolute top-8 right-8 z-[300] bg-white/5 hover:bg-white/10 text-white/40 hover:text-white transition-all text-[10px] uppercase font-mono-data border border-white/10 px-8 py-4 tracking-[0.3em]",children:"[Exit_Protocol]"}),re.jsxs("div",{className:"flex-1 space-y-16",children:[re.jsxs("header",{children:[re.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[re.jsx("div",{className:"w-3 h-3 bg-gem-blue rounded-full shadow-[0_0_15px_#00F0FF] animate-pulse"}),re.jsx("span",{className:"text-[10px] text-gem-blue font-mono-data tracking-[0.6em] uppercase",children:"Intelligence Synthesis Complete"})]}),re.jsx("h1",{className:"text-4xl lg:text-6xl font-black italic tracking-tighter text-white uppercase leading-[0.95] mb-4",children:n.reportTitle}),re.jsxs("p",{className:"text-[10px] font-mono-data text-white/30 uppercase tracking-[0.4em]",children:["Source: Distributed Neural Nodes // Security: ",n.metadata.confidentiality]})]}),re.jsxs("section",{className:"space-y-6",children:[re.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.5em] text-gem-blue/60 border-b border-gem-blue/20 pb-4",children:"01_EXECUTIVE_SUMMARY"}),re.jsxs("p",{className:"text-lg lg:text-2xl leading-relaxed text-gem-offwhite font-light opacity-90 italic",children:['"',n.executiveSummary,'"']})]}),n.auditLog&&n.auditLog.length>0&&re.jsxs("section",{className:"space-y-6 animate-in slide-in-from-left-4 duration-700",children:[re.jsxs("h3",{className:"text-[10px] font-black uppercase tracking-[0.5em] text-red-500/80 border-b border-red-500/20 pb-4 flex items-center",children:[re.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full animate-ping mr-3"}),"02_DATA_INTEGRITY_AUDIT_LOG"]}),re.jsx("div",{className:"bg-red-500/[0.05] border-l-2 border-red-500 p-6 space-y-4",children:n.auditLog.map((p,v)=>re.jsxs("div",{className:"flex flex-col space-y-1",children:[re.jsxs("div",{className:"flex justify-between items-center text-xs font-mono-data",children:[re.jsx("span",{className:"text-white/60",children:"Discrepancy Detected:"}),re.jsx("span",{className:"text-red-400",children:p.discrepancy})]}),re.jsxs("div",{className:"flex justify-between items-center text-sm font-mono-data font-bold",children:[re.jsx("span",{className:"text-gem-teal",children:"Correction Applied:"}),re.jsx("span",{className:"text-white",children:p.correction})]}),re.jsxs("div",{className:"text-[9px] text-white/20 uppercase tracking-widest mt-1 text-right",children:["Confidence: ",p.confidence]})]},v))})]}),re.jsxs("section",{className:"space-y-10",children:[re.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.5em] text-gem-blue/60 border-b border-gem-blue/20 pb-4",children:"03_FORENSIC_OBSERVATIONS"}),re.jsx("div",{className:"grid grid-cols-1 gap-6",children:n.keyFindings.map((p,v)=>re.jsxs("div",{className:"flex group",children:[re.jsxs("span",{className:"text-gem-blue font-mono-data text-[10px] mt-1 tabular-nums mr-8 opacity-40 group-hover:opacity-100 transition-opacity",children:["0",v+1]}),re.jsx("div",{className:"flex-grow p-6 border border-white/5 bg-white/[0.01] hover:bg-white/[0.03] hover:border-white/10 transition-all",children:re.jsx("p",{className:"text-sm text-white/80 leading-relaxed font-light",children:p})})]},v))})]}),re.jsxs("section",{className:"space-y-10",children:[re.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.5em] text-gem-teal/60 border-b border-gem-teal/20 pb-4",children:"04_PHASED_REMEDIATION"}),re.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:n.actionPlan.map((p,v)=>re.jsxs("div",{className:"p-8 bg-gem-teal/[0.01] border border-gem-teal/10 relative overflow-hidden group hover:border-gem-teal/30 transition-all",children:[re.jsxs("div",{className:"absolute top-0 right-0 p-2 text-[40px] font-black text-gem-teal/5 tabular-nums pointer-events-none",children:["0",v+1]}),re.jsx("h4",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-gem-teal mb-8",children:p.phase}),re.jsx("ul",{className:"space-y-4",children:p.objectives.map((S,y)=>re.jsxs("li",{className:"text-[10px] text-white/40 flex items-start space-x-3 group-hover:text-white/70 transition-colors",children:[re.jsx("span",{className:"text-gem-teal mt-1",children:""}),re.jsx("span",{children:S})]},y))})]},v))})]})]}),re.jsxs("div",{className:"lg:w-[400px] shrink-0 space-y-12",children:[re.jsxs("div",{className:"p-10 border border-white/10 bg-white/[0.02] flex flex-col items-center text-center",children:[re.jsxs("div",{className:"relative w-40 h-40 mb-8",children:[re.jsxs("svg",{className:"w-full h-full transform -rotate-90",children:[re.jsx("circle",{cx:"80",cy:"80",r:"70",stroke:"currentColor",strokeWidth:"2",fill:"transparent",className:"text-white/5"}),re.jsx("circle",{cx:"80",cy:"80",r:"70",stroke:"currentColor",strokeWidth:"4",fill:"transparent",strokeDasharray:440,strokeDashoffset:440-440*i/100,className:"text-gem-teal transition-all duration-1000 ease-out"})]}),re.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[re.jsxs("span",{className:"text-4xl font-black text-white tabular-nums",children:[i,"%"]}),re.jsx("span",{className:"text-[8px] text-white/40 uppercase tracking-widest mt-1",children:"Structural Integrity"})]})]}),re.jsx("div",{className:"text-[10px] font-mono-data text-gem-teal uppercase tracking-widest animate-pulse",children:"Neural_Link_Verified"})]}),re.jsxs("section",{className:"space-y-8",children:[re.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.5em] text-white/40",children:"Realtime_Telemetry"}),re.jsx("div",{className:"space-y-4",children:(h=n.telemetryOverview)==null?void 0:h.map((p,v)=>re.jsxs("div",{className:"flex justify-between items-end border-b border-white/5 pb-4 group",children:[re.jsxs("div",{children:[re.jsx("div",{className:"text-[8px] text-white/20 uppercase tracking-widest mb-1 group-hover:text-gem-blue transition-colors",children:p.metric}),re.jsx("div",{className:"text-base font-mono-data text-white",children:p.value})]}),re.jsx("div",{className:`text-[8px] font-black px-3 py-1 rounded-sm border ${p.status.toLowerCase()==="critical"?"bg-red-500/10 text-red-500 border-red-500/20":p.status.toLowerCase()==="stable"?"bg-gem-teal/10 text-gem-teal border-gem-teal/20":"bg-gem-blue/10 text-gem-blue border-gem-blue/20"}`,children:p.status.toUpperCase()})]},v))})]}),re.jsxs("section",{className:"space-y-4",children:[re.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.5em] text-white/40 mb-6",children:"Execution_Matrix"}),re.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[re.jsxs("button",{onClick:c,disabled:!!t,className:"group relative w-full py-6 bg-gem-blue text-gem-onyx font-black text-[11px] uppercase tracking-[0.4em] hover:bg-white transition-all disabled:opacity-50 overflow-hidden",children:[re.jsx("span",{className:"relative z-10",children:t==="PDF"?"Compiling_Forensics...":"Execute_PDF_Export"}),t==="PDF"&&re.jsx("div",{className:"absolute bottom-0 left-0 h-1 bg-gem-onyx animate-progress-infinite w-full"})]}),re.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[re.jsx("button",{onClick:s,className:"py-4 border border-white/10 text-white/60 text-[9px] uppercase tracking-[0.2em] hover:text-white hover:border-white transition-all",children:"Markdown"}),re.jsx("button",{onClick:l,className:"py-4 border border-white/10 text-white/60 text-[9px] uppercase tracking-[0.2em] hover:text-white hover:border-white transition-all",children:"Plain_Text"})]}),re.jsx("button",{onClick:u,className:"w-full py-4 border border-white/10 text-white/60 text-[9px] uppercase tracking-[0.2em] hover:text-gem-teal hover:border-gem-teal transition-all",children:"Tabular_Matrix (CSV)"})]})]}),re.jsx("div",{className:"pt-10 border-t border-white/5 text-center",children:re.jsx("div",{className:"text-[8px] font-mono-data uppercase tracking-[0.4em] text-white/10",children:"SRE_SYNAPSE_SYSTEM_STABLE_4.2.0"})})]})]})})};function XH(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=XH(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function qr(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=XH(n))&&(r&&(r+=" "),r+=e);return r}var nA,_4;function Hl(){if(_4)return nA;_4=1;var n=Array.isArray;return nA=n,nA}var rA,S4;function YH(){if(S4)return rA;S4=1;var n=typeof $v=="object"&&$v&&$v.Object===Object&&$v;return rA=n,rA}var iA,w4;function If(){if(w4)return iA;w4=1;var n=YH(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=n||e||Function("return this")();return iA=t,iA}var oA,b4;function Jy(){if(b4)return oA;b4=1;var n=If(),e=n.Symbol;return oA=e,oA}var aA,A4;function iue(){if(A4)return aA;A4=1;var n=Jy(),e=Object.prototype,t=e.hasOwnProperty,r=e.toString,i=n?n.toStringTag:void 0;function o(a){var s=t.call(a,i),l=a[i];try{a[i]=void 0;var u=!0}catch{}var c=r.call(a);return u&&(s?a[i]=l:delete a[i]),c}return aA=o,aA}var sA,E4;function oue(){if(E4)return sA;E4=1;var n=Object.prototype,e=n.toString;function t(r){return e.call(r)}return sA=t,sA}var lA,T4;function md(){if(T4)return lA;T4=1;var n=Jy(),e=iue(),t=oue(),r="[object Null]",i="[object Undefined]",o=n?n.toStringTag:void 0;function a(s){return s==null?s===void 0?i:r:o&&o in Object(s)?e(s):t(s)}return lA=a,lA}var uA,M4;function gd(){if(M4)return uA;M4=1;function n(e){return e!=null&&typeof e=="object"}return uA=n,uA}var cA,C4;function Jg(){if(C4)return cA;C4=1;var n=md(),e=gd(),t="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&n(i)==t}return cA=r,cA}var fA,P4;function bI(){if(P4)return fA;P4=1;var n=Hl(),e=Jg(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(o,a){if(n(o))return!1;var s=typeof o;return s=="number"||s=="symbol"||s=="boolean"||o==null||e(o)?!0:r.test(o)||!t.test(o)||a!=null&&o in Object(a)}return fA=i,fA}var dA,I4;function bh(){if(I4)return dA;I4=1;function n(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return dA=n,dA}var hA,R4;function AI(){if(R4)return hA;R4=1;var n=md(),e=bh(),t="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",o="[object Proxy]";function a(s){if(!e(s))return!1;var l=n(s);return l==r||l==i||l==t||l==o}return hA=a,hA}var pA,N4;function aue(){if(N4)return pA;N4=1;var n=If(),e=n["__core-js_shared__"];return pA=e,pA}var mA,L4;function sue(){if(L4)return mA;L4=1;var n=aue(),e=(function(){var r=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function t(r){return!!e&&e in r}return mA=t,mA}var gA,O4;function KH(){if(O4)return gA;O4=1;var n=Function.prototype,e=n.toString;function t(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return gA=t,gA}var vA,D4;function lue(){if(D4)return vA;D4=1;var n=AI(),e=sue(),t=bh(),r=KH(),i=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,a=Function.prototype,s=Object.prototype,l=a.toString,u=s.hasOwnProperty,c=RegExp("^"+l.call(u).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(h){if(!t(h)||e(h))return!1;var p=n(h)?c:o;return p.test(r(h))}return vA=f,vA}var yA,k4;function uue(){if(k4)return yA;k4=1;function n(e,t){return e==null?void 0:e[t]}return yA=n,yA}var xA,F4;function Qp(){if(F4)return xA;F4=1;var n=lue(),e=uue();function t(r,i){var o=e(r,i);return n(o)?o:void 0}return xA=t,xA}var _A,U4;function Nw(){if(U4)return _A;U4=1;var n=Qp(),e=n(Object,"create");return _A=e,_A}var SA,B4;function cue(){if(B4)return SA;B4=1;var n=Nw();function e(){this.__data__=n?n(null):{},this.size=0}return SA=e,SA}var wA,z4;function fue(){if(z4)return wA;z4=1;function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return wA=n,wA}var bA,H4;function due(){if(H4)return bA;H4=1;var n=Nw(),e="__lodash_hash_undefined__",t=Object.prototype,r=t.hasOwnProperty;function i(o){var a=this.__data__;if(n){var s=a[o];return s===e?void 0:s}return r.call(a,o)?a[o]:void 0}return bA=i,bA}var AA,V4;function hue(){if(V4)return AA;V4=1;var n=Nw(),e=Object.prototype,t=e.hasOwnProperty;function r(i){var o=this.__data__;return n?o[i]!==void 0:t.call(o,i)}return AA=r,AA}var EA,G4;function pue(){if(G4)return EA;G4=1;var n=Nw(),e="__lodash_hash_undefined__";function t(r,i){var o=this.__data__;return this.size+=this.has(r)?0:1,o[r]=n&&i===void 0?e:i,this}return EA=t,EA}var TA,q4;function mue(){if(q4)return TA;q4=1;var n=cue(),e=fue(),t=due(),r=hue(),i=pue();function o(a){var s=-1,l=a==null?0:a.length;for(this.clear();++s<l;){var u=a[s];this.set(u[0],u[1])}}return o.prototype.clear=n,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=r,o.prototype.set=i,TA=o,TA}var MA,W4;function gue(){if(W4)return MA;W4=1;function n(){this.__data__=[],this.size=0}return MA=n,MA}var CA,j4;function EI(){if(j4)return CA;j4=1;function n(e,t){return e===t||e!==e&&t!==t}return CA=n,CA}var PA,$4;function Lw(){if($4)return PA;$4=1;var n=EI();function e(t,r){for(var i=t.length;i--;)if(n(t[i][0],r))return i;return-1}return PA=e,PA}var IA,X4;function vue(){if(X4)return IA;X4=1;var n=Lw(),e=Array.prototype,t=e.splice;function r(i){var o=this.__data__,a=n(o,i);if(a<0)return!1;var s=o.length-1;return a==s?o.pop():t.call(o,a,1),--this.size,!0}return IA=r,IA}var RA,Y4;function yue(){if(Y4)return RA;Y4=1;var n=Lw();function e(t){var r=this.__data__,i=n(r,t);return i<0?void 0:r[i][1]}return RA=e,RA}var NA,K4;function xue(){if(K4)return NA;K4=1;var n=Lw();function e(t){return n(this.__data__,t)>-1}return NA=e,NA}var LA,J4;function _ue(){if(J4)return LA;J4=1;var n=Lw();function e(t,r){var i=this.__data__,o=n(i,t);return o<0?(++this.size,i.push([t,r])):i[o][1]=r,this}return LA=e,LA}var OA,Z4;function Ow(){if(Z4)return OA;Z4=1;var n=gue(),e=vue(),t=yue(),r=xue(),i=_ue();function o(a){var s=-1,l=a==null?0:a.length;for(this.clear();++s<l;){var u=a[s];this.set(u[0],u[1])}}return o.prototype.clear=n,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=r,o.prototype.set=i,OA=o,OA}var DA,Q4;function TI(){if(Q4)return DA;Q4=1;var n=Qp(),e=If(),t=n(e,"Map");return DA=t,DA}var kA,eD;function Sue(){if(eD)return kA;eD=1;var n=mue(),e=Ow(),t=TI();function r(){this.size=0,this.__data__={hash:new n,map:new(t||e),string:new n}}return kA=r,kA}var FA,tD;function wue(){if(tD)return FA;tD=1;function n(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return FA=n,FA}var UA,nD;function Dw(){if(nD)return UA;nD=1;var n=wue();function e(t,r){var i=t.__data__;return n(r)?i[typeof r=="string"?"string":"hash"]:i.map}return UA=e,UA}var BA,rD;function bue(){if(rD)return BA;rD=1;var n=Dw();function e(t){var r=n(this,t).delete(t);return this.size-=r?1:0,r}return BA=e,BA}var zA,iD;function Aue(){if(iD)return zA;iD=1;var n=Dw();function e(t){return n(this,t).get(t)}return zA=e,zA}var HA,oD;function Eue(){if(oD)return HA;oD=1;var n=Dw();function e(t){return n(this,t).has(t)}return HA=e,HA}var VA,aD;function Tue(){if(aD)return VA;aD=1;var n=Dw();function e(t,r){var i=n(this,t),o=i.size;return i.set(t,r),this.size+=i.size==o?0:1,this}return VA=e,VA}var GA,sD;function MI(){if(sD)return GA;sD=1;var n=Sue(),e=bue(),t=Aue(),r=Eue(),i=Tue();function o(a){var s=-1,l=a==null?0:a.length;for(this.clear();++s<l;){var u=a[s];this.set(u[0],u[1])}}return o.prototype.clear=n,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=r,o.prototype.set=i,GA=o,GA}var qA,lD;function JH(){if(lD)return qA;lD=1;var n=MI(),e="Expected a function";function t(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var o=function(){var a=arguments,s=i?i.apply(this,a):a[0],l=o.cache;if(l.has(s))return l.get(s);var u=r.apply(this,a);return o.cache=l.set(s,u)||l,u};return o.cache=new(t.Cache||n),o}return t.Cache=n,qA=t,qA}var WA,uD;function Mue(){if(uD)return WA;uD=1;var n=JH(),e=500;function t(r){var i=n(r,function(a){return o.size===e&&o.clear(),a}),o=i.cache;return i}return WA=t,WA}var jA,cD;function Cue(){if(cD)return jA;cD=1;var n=Mue(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,r=n(function(i){var o=[];return i.charCodeAt(0)===46&&o.push(""),i.replace(e,function(a,s,l,u){o.push(l?u.replace(t,"$1"):s||a)}),o});return jA=r,jA}var $A,fD;function CI(){if(fD)return $A;fD=1;function n(e,t){for(var r=-1,i=e==null?0:e.length,o=Array(i);++r<i;)o[r]=t(e[r],r,e);return o}return $A=n,$A}var XA,dD;function Pue(){if(dD)return XA;dD=1;var n=Jy(),e=CI(),t=Hl(),r=Jg(),i=n?n.prototype:void 0,o=i?i.toString:void 0;function a(s){if(typeof s=="string")return s;if(t(s))return e(s,a)+"";if(r(s))return o?o.call(s):"";var l=s+"";return l=="0"&&1/s==-1/0?"-0":l}return XA=a,XA}var YA,hD;function ZH(){if(hD)return YA;hD=1;var n=Pue();function e(t){return t==null?"":n(t)}return YA=e,YA}var KA,pD;function QH(){if(pD)return KA;pD=1;var n=Hl(),e=bI(),t=Cue(),r=ZH();function i(o,a){return n(o)?o:e(o,a)?[o]:t(r(o))}return KA=i,KA}var JA,mD;function kw(){if(mD)return JA;mD=1;var n=Jg();function e(t){if(typeof t=="string"||n(t))return t;var r=t+"";return r=="0"&&1/t==-1/0?"-0":r}return JA=e,JA}var ZA,gD;function PI(){if(gD)return ZA;gD=1;var n=QH(),e=kw();function t(r,i){i=n(i,r);for(var o=0,a=i.length;r!=null&&o<a;)r=r[e(i[o++])];return o&&o==a?r:void 0}return ZA=t,ZA}var QA,vD;function eV(){if(vD)return QA;vD=1;var n=PI();function e(t,r,i){var o=t==null?void 0:n(t,r);return o===void 0?i:o}return QA=e,QA}var Iue=eV();const Hu=gi(Iue);var eE,yD;function Rue(){if(yD)return eE;yD=1;function n(e){return e==null}return eE=n,eE}var Nue=Rue();const mr=gi(Nue);var tE,xD;function Lue(){if(xD)return tE;xD=1;var n=md(),e=Hl(),t=gd(),r="[object String]";function i(o){return typeof o=="string"||!e(o)&&t(o)&&n(o)==r}return tE=i,tE}var Oue=Lue();const Zy=gi(Oue);var Due=AI();const Ar=gi(Due);var kue=bh();const Zg=gi(kue);var nE={exports:{}},_i={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _D;function Fue(){if(_D)return _i;_D=1;var n=typeof Symbol=="function"&&Symbol.for,e=n?Symbol.for("react.element"):60103,t=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,i=n?Symbol.for("react.strict_mode"):60108,o=n?Symbol.for("react.profiler"):60114,a=n?Symbol.for("react.provider"):60109,s=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,u=n?Symbol.for("react.concurrent_mode"):60111,c=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,h=n?Symbol.for("react.suspense_list"):60120,p=n?Symbol.for("react.memo"):60115,v=n?Symbol.for("react.lazy"):60116,S=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,_=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function A(P){if(typeof P=="object"&&P!==null){var O=P.$$typeof;switch(O){case e:switch(P=P.type,P){case l:case u:case r:case o:case i:case f:return P;default:switch(P=P&&P.$$typeof,P){case s:case c:case v:case p:case a:return P;default:return O}}case t:return O}}}function E(P){return A(P)===u}return _i.AsyncMode=l,_i.ConcurrentMode=u,_i.ContextConsumer=s,_i.ContextProvider=a,_i.Element=e,_i.ForwardRef=c,_i.Fragment=r,_i.Lazy=v,_i.Memo=p,_i.Portal=t,_i.Profiler=o,_i.StrictMode=i,_i.Suspense=f,_i.isAsyncMode=function(P){return E(P)||A(P)===l},_i.isConcurrentMode=E,_i.isContextConsumer=function(P){return A(P)===s},_i.isContextProvider=function(P){return A(P)===a},_i.isElement=function(P){return typeof P=="object"&&P!==null&&P.$$typeof===e},_i.isForwardRef=function(P){return A(P)===c},_i.isFragment=function(P){return A(P)===r},_i.isLazy=function(P){return A(P)===v},_i.isMemo=function(P){return A(P)===p},_i.isPortal=function(P){return A(P)===t},_i.isProfiler=function(P){return A(P)===o},_i.isStrictMode=function(P){return A(P)===i},_i.isSuspense=function(P){return A(P)===f},_i.isValidElementType=function(P){return typeof P=="string"||typeof P=="function"||P===r||P===u||P===o||P===i||P===f||P===h||typeof P=="object"&&P!==null&&(P.$$typeof===v||P.$$typeof===p||P.$$typeof===a||P.$$typeof===s||P.$$typeof===c||P.$$typeof===y||P.$$typeof===_||P.$$typeof===w||P.$$typeof===S)},_i.typeOf=A,_i}var SD;function Uue(){return SD||(SD=1,nE.exports=Fue()),nE.exports}var XC=Uue(),rE,wD;function tV(){if(wD)return rE;wD=1;var n=md(),e=gd(),t="[object Number]";function r(i){return typeof i=="number"||e(i)&&n(i)==t}return rE=r,rE}var iE,bD;function Bue(){if(bD)return iE;bD=1;var n=tV();function e(t){return n(t)&&t!=+t}return iE=e,iE}var zue=Bue();const Qg=gi(zue);var Hue=tV();const Vue=gi(Hue);var Ic=function(e){return e===0?0:e>0?1:-1},xp=function(e){return Zy(e)&&e.indexOf("%")===e.length-1},an=function(e){return Vue(e)&&!Qg(e)},Oa=function(e){return an(e)||Zy(e)},Gue=0,em=function(e){var t=++Gue;return"".concat(e||"").concat(t)},Vp=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!an(e)&&!Zy(e))return r;var o;if(xp(e)){var a=e.indexOf("%");o=t*parseFloat(e.slice(0,a))/100}else o=+e;return Qg(o)&&(o=r),i&&o>t&&(o=t),o},oh=function(e){if(!e)return null;var t=Object.keys(e);return t&&t.length?e[t[0]]:null},que=function(e){if(!Array.isArray(e))return!1;for(var t=e.length,r={},i=0;i<t;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},ra=function(e,t){return an(e)&&an(t)?function(r){return e+r*(t-e)}:function(){return t}};function K_(n,e,t){return!n||!n.length?null:n.find(function(r){return r&&(typeof e=="function"?e(r):Hu(r,e))===t})}var Wue=function(e){if(!e||!e.length)return null;for(var t=e.length,r=0,i=0,o=0,a=0,s=1/0,l=-1/0,u=0,c=0,f=0;f<t;f++)u=e[f].cx||0,c=e[f].cy||0,r+=u,i+=c,o+=u*c,a+=u*u,s=Math.min(s,u),l=Math.max(l,u);var h=t*a!==r*r?(t*o-r*i)/(t*a-r*r):0;return{xmin:s,xmax:l,a:h,b:(i-h*r)/t}};function fg(n,e){for(var t in n)if({}.hasOwnProperty.call(n,t)&&(!{}.hasOwnProperty.call(e,t)||n[t]!==e[t]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(n,r))return!1;return!0}function YC(n){"@babel/helpers - typeof";return YC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},YC(n)}var jue=["viewBox","children"],$ue=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],AD=["points","pathLength"],oE={svg:jue,polygon:AD,polyline:AD},II=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],J_=function(e,t){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(Me.isValidElement(e)&&(r=e.props),!Zg(r))return null;var i={};return Object.keys(r).forEach(function(o){II.includes(o)&&(i[o]=t||function(a){return r[o](r,a)})}),i},Xue=function(e,t,r){return function(i){return e(t,r,i),null}},K0=function(e,t,r){if(!Zg(e)||YC(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(o){var a=e[o];II.includes(o)&&typeof a=="function"&&(i||(i={}),i[o]=Xue(a,t,r))}),i},Yue=["children"],Kue=["children"];function ED(n,e){if(n==null)return{};var t=Jue(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Jue(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function KC(n){"@babel/helpers - typeof";return KC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},KC(n)}var TD={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},id=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},MD=null,aE=null,RI=function n(e){if(e===MD&&Array.isArray(aE))return aE;var t=[];return Me.Children.forEach(e,function(r){mr(r)||(XC.isFragment(r)?t=t.concat(n(r.props.children)):t.push(r))}),aE=t,MD=e,t};function Fl(n,e){var t=[],r=[];return Array.isArray(e)?r=e.map(function(i){return id(i)}):r=[id(e)],RI(n).forEach(function(i){var o=Hu(i,"type.displayName")||Hu(i,"type.name");r.indexOf(o)!==-1&&t.push(i)}),t}function lu(n,e){var t=Fl(n,e);return t&&t[0]}var CD=function(e){if(!e||!e.props)return!1;var t=e.props,r=t.width,i=t.height;return!(!an(r)||r<=0||!an(i)||i<=0)},Zue=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Que=function(e){return e&&e.type&&Zy(e.type)&&Zue.indexOf(e.type)>=0},nV=function(e){return e&&KC(e)==="object"&&"cx"in e&&"cy"in e&&"r"in e},ece=function(e,t,r,i){var o,a=(o=oE==null?void 0:oE[i])!==null&&o!==void 0?o:[];return!Ar(e)&&(i&&a.includes(t)||$ue.includes(t))||r&&II.includes(t)},pr=function(e,t,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(Me.isValidElement(e)&&(i=e.props),!Zg(i))return null;var o={};return Object.keys(i).forEach(function(a){var s;ece((s=i)===null||s===void 0?void 0:s[a],a,t,r)&&(o[a]=i[a])}),o},JC=function n(e,t){if(e===t)return!0;var r=Me.Children.count(e);if(r!==Me.Children.count(t))return!1;if(r===0)return!0;if(r===1)return PD(Array.isArray(e)?e[0]:e,Array.isArray(t)?t[0]:t);for(var i=0;i<r;i++){var o=e[i],a=t[i];if(Array.isArray(o)||Array.isArray(a)){if(!n(o,a))return!1}else if(!PD(o,a))return!1}return!0},PD=function(e,t){if(mr(e)&&mr(t))return!0;if(!mr(e)&&!mr(t)){var r=e.props||{},i=r.children,o=ED(r,Yue),a=t.props||{},s=a.children,l=ED(a,Kue);return i&&s?fg(o,l)&&JC(i,s):!i&&!s?fg(o,l):!1}return!1},ID=function(e,t){var r=[],i={};return RI(e).forEach(function(o,a){if(Que(o))r.push(o);else if(o){var s=id(o.type),l=t[s]||{},u=l.handler,c=l.once;if(u&&(!c||!i[s])){var f=u(o,s,a);r.push(f),i[s]=!0}}}),r},tce=function(e){var t=e&&e.type;return t&&TD[t]?TD[t]:null},nce=function(e,t){return RI(t).indexOf(e)},rce=["children","width","height","viewBox","className","style","title","desc"];function ZC(){return ZC=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ZC.apply(this,arguments)}function ice(n,e){if(n==null)return{};var t=oce(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function oce(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function QC(n){var e=n.children,t=n.width,r=n.height,i=n.viewBox,o=n.className,a=n.style,s=n.title,l=n.desc,u=ice(n,rce),c=i||{width:t,height:r,x:0,y:0},f=qr("recharts-surface",o);return Ve.createElement("svg",ZC({},pr(u,!0,"svg"),{className:f,width:t,height:r,style:a,viewBox:"".concat(c.x," ").concat(c.y," ").concat(c.width," ").concat(c.height)}),Ve.createElement("title",null,s),Ve.createElement("desc",null,l),e)}var ace=["children","className"];function e5(){return e5=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},e5.apply(this,arguments)}function sce(n,e){if(n==null)return{};var t=lce(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function lce(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}var pi=Ve.forwardRef(function(n,e){var t=n.children,r=n.className,i=sce(n,ace),o=qr("recharts-layer",r);return Ve.createElement("g",e5({className:o},pr(i,!0),{ref:e}),t)}),od=function(e,t){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o]},sE,RD;function uce(){if(RD)return sE;RD=1;function n(e,t,r){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),r=r>o?o:r,r<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(o);++i<o;)a[i]=e[i+t];return a}return sE=n,sE}var lE,ND;function cce(){if(ND)return lE;ND=1;var n=uce();function e(t,r,i){var o=t.length;return i=i===void 0?o:i,!r&&i>=o?t:n(t,r,i)}return lE=e,lE}var uE,LD;function rV(){if(LD)return uE;LD=1;var n="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+t+r,o="\\ufe0e\\ufe0f",a="\\u200d",s=RegExp("["+a+n+i+o+"]");function l(u){return s.test(u)}return uE=l,uE}var cE,OD;function fce(){if(OD)return cE;OD=1;function n(e){return e.split("")}return cE=n,cE}var fE,DD;function dce(){if(DD)return fE;DD=1;var n="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+t+r,o="\\ufe0e\\ufe0f",a="["+n+"]",s="["+i+"]",l="\\ud83c[\\udffb-\\udfff]",u="(?:"+s+"|"+l+")",c="[^"+n+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",p="\\u200d",v=u+"?",S="["+o+"]?",y="(?:"+p+"(?:"+[c,f,h].join("|")+")"+S+v+")*",_=S+v+y,w="(?:"+[c+s+"?",s,f,h,a].join("|")+")",A=RegExp(l+"(?="+l+")|"+w+_,"g");function E(P){return P.match(A)||[]}return fE=E,fE}var dE,kD;function hce(){if(kD)return dE;kD=1;var n=fce(),e=rV(),t=dce();function r(i){return e(i)?t(i):n(i)}return dE=r,dE}var hE,FD;function pce(){if(FD)return hE;FD=1;var n=cce(),e=rV(),t=hce(),r=ZH();function i(o){return function(a){a=r(a);var s=e(a)?t(a):void 0,l=s?s[0]:a.charAt(0),u=s?n(s,1).join(""):a.slice(1);return l[o]()+u}}return hE=i,hE}var pE,UD;function mce(){if(UD)return pE;UD=1;var n=pce(),e=n("toUpperCase");return pE=e,pE}var gce=mce();const Fw=gi(gce);function Xi(n){return function(){return n}}const iV=Math.cos,Z_=Math.sin,Hc=Math.sqrt,Q_=Math.PI,Uw=2*Q_,t5=Math.PI,n5=2*t5,up=1e-6,vce=n5-up;function oV(n){this._+=n[0];for(let e=1,t=n.length;e<t;++e)this._+=arguments[e]+n[e]}function yce(n){let e=Math.floor(n);if(!(e>=0))throw new Error(`invalid digits: ${n}`);if(e>15)return oV;const t=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*t)/t+r[i]}}class xce{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?oV:yce(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,r,i){this._append`Q${+e},${+t},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,t,r,i,o,a){this._append`C${+e},${+t},${+r},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(e,t,r,i,o){if(e=+e,t=+t,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,s=this._y1,l=r-e,u=i-t,c=a-e,f=s-t,h=c*c+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(h>up)if(!(Math.abs(f*l-u*c)>up)||!o)this._append`L${this._x1=e},${this._y1=t}`;else{let p=r-a,v=i-s,S=l*l+u*u,y=p*p+v*v,_=Math.sqrt(S),w=Math.sqrt(h),A=o*Math.tan((t5-Math.acos((S+h-y)/(2*_*w)))/2),E=A/w,P=A/_;Math.abs(E-1)>up&&this._append`L${e+E*c},${t+E*f}`,this._append`A${o},${o},0,0,${+(f*p>c*v)},${this._x1=e+P*l},${this._y1=t+P*u}`}}arc(e,t,r,i,o,a){if(e=+e,t=+t,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),l=r*Math.sin(i),u=e+s,c=t+l,f=1^a,h=a?i-o:o-i;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>up||Math.abs(this._y1-c)>up)&&this._append`L${u},${c}`,r&&(h<0&&(h=h%n5+n5),h>vce?this._append`A${r},${r},0,1,${f},${e-s},${t-l}A${r},${r},0,1,${f},${this._x1=u},${this._y1=c}`:h>up&&this._append`A${r},${r},0,${+(h>=t5)},${f},${this._x1=e+r*Math.cos(o)},${this._y1=t+r*Math.sin(o)}`)}rect(e,t,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function NI(n){let e=3;return n.digits=function(t){if(!arguments.length)return e;if(t==null)e=null;else{const r=Math.floor(t);if(!(r>=0))throw new RangeError(`invalid digits: ${t}`);e=r}return n},()=>new xce(e)}function LI(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function aV(n){this._context=n}aV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;default:this._context.lineTo(n,e);break}}};function Bw(n){return new aV(n)}function sV(n){return n[0]}function lV(n){return n[1]}function uV(n,e){var t=Xi(!0),r=null,i=Bw,o=null,a=NI(s);n=typeof n=="function"?n:n===void 0?sV:Xi(n),e=typeof e=="function"?e:e===void 0?lV:Xi(e);function s(l){var u,c=(l=LI(l)).length,f,h=!1,p;for(r==null&&(o=i(p=a())),u=0;u<=c;++u)!(u<c&&t(f=l[u],u,l))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+n(f,u,l),+e(f,u,l));if(p)return o=null,p+""||null}return s.x=function(l){return arguments.length?(n=typeof l=="function"?l:Xi(+l),s):n},s.y=function(l){return arguments.length?(e=typeof l=="function"?l:Xi(+l),s):e},s.defined=function(l){return arguments.length?(t=typeof l=="function"?l:Xi(!!l),s):t},s.curve=function(l){return arguments.length?(i=l,r!=null&&(o=i(r)),s):i},s.context=function(l){return arguments.length?(l==null?r=o=null:o=i(r=l),s):r},s}function Ux(n,e,t){var r=null,i=Xi(!0),o=null,a=Bw,s=null,l=NI(u);n=typeof n=="function"?n:n===void 0?sV:Xi(+n),e=typeof e=="function"?e:Xi(e===void 0?0:+e),t=typeof t=="function"?t:t===void 0?lV:Xi(+t);function u(f){var h,p,v,S=(f=LI(f)).length,y,_=!1,w,A=new Array(S),E=new Array(S);for(o==null&&(s=a(w=l())),h=0;h<=S;++h){if(!(h<S&&i(y=f[h],h,f))===_)if(_=!_)p=h,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),v=h-1;v>=p;--v)s.point(A[v],E[v]);s.lineEnd(),s.areaEnd()}_&&(A[h]=+n(y,h,f),E[h]=+e(y,h,f),s.point(r?+r(y,h,f):A[h],t?+t(y,h,f):E[h]))}if(w)return s=null,w+""||null}function c(){return uV().defined(i).curve(a).context(o)}return u.x=function(f){return arguments.length?(n=typeof f=="function"?f:Xi(+f),r=null,u):n},u.x0=function(f){return arguments.length?(n=typeof f=="function"?f:Xi(+f),u):n},u.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Xi(+f),u):r},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:Xi(+f),t=null,u):e},u.y0=function(f){return arguments.length?(e=typeof f=="function"?f:Xi(+f),u):e},u.y1=function(f){return arguments.length?(t=f==null?null:typeof f=="function"?f:Xi(+f),u):t},u.lineX0=u.lineY0=function(){return c().x(n).y(e)},u.lineY1=function(){return c().x(n).y(t)},u.lineX1=function(){return c().x(r).y(e)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Xi(!!f),u):i},u.curve=function(f){return arguments.length?(a=f,o!=null&&(s=a(o)),u):a},u.context=function(f){return arguments.length?(f==null?o=s=null:s=a(o=f),u):o},u}class cV{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t);break}}this._x0=e,this._y0=t}}function _ce(n){return new cV(n,!0)}function Sce(n){return new cV(n,!1)}const OI={draw(n,e){const t=Hc(e/Q_);n.moveTo(t,0),n.arc(0,0,t,0,Uw)}},wce={draw(n,e){const t=Hc(e/5)/2;n.moveTo(-3*t,-t),n.lineTo(-t,-t),n.lineTo(-t,-3*t),n.lineTo(t,-3*t),n.lineTo(t,-t),n.lineTo(3*t,-t),n.lineTo(3*t,t),n.lineTo(t,t),n.lineTo(t,3*t),n.lineTo(-t,3*t),n.lineTo(-t,t),n.lineTo(-3*t,t),n.closePath()}},fV=Hc(1/3),bce=fV*2,Ace={draw(n,e){const t=Hc(e/bce),r=t*fV;n.moveTo(0,-t),n.lineTo(r,0),n.lineTo(0,t),n.lineTo(-r,0),n.closePath()}},Ece={draw(n,e){const t=Hc(e),r=-t/2;n.rect(r,r,t,t)}},Tce=.8908130915292852,dV=Z_(Q_/10)/Z_(7*Q_/10),Mce=Z_(Uw/10)*dV,Cce=-iV(Uw/10)*dV,Pce={draw(n,e){const t=Hc(e*Tce),r=Mce*t,i=Cce*t;n.moveTo(0,-t),n.lineTo(r,i);for(let o=1;o<5;++o){const a=Uw*o/5,s=iV(a),l=Z_(a);n.lineTo(l*t,-s*t),n.lineTo(s*r-l*i,l*r+s*i)}n.closePath()}},mE=Hc(3),Ice={draw(n,e){const t=-Hc(e/(mE*3));n.moveTo(0,t*2),n.lineTo(-mE*t,-t),n.lineTo(mE*t,-t),n.closePath()}},Nu=-.5,Lu=Hc(3)/2,r5=1/Hc(12),Rce=(r5/2+1)*3,Nce={draw(n,e){const t=Hc(e/Rce),r=t/2,i=t*r5,o=r,a=t*r5+t,s=-o,l=a;n.moveTo(r,i),n.lineTo(o,a),n.lineTo(s,l),n.lineTo(Nu*r-Lu*i,Lu*r+Nu*i),n.lineTo(Nu*o-Lu*a,Lu*o+Nu*a),n.lineTo(Nu*s-Lu*l,Lu*s+Nu*l),n.lineTo(Nu*r+Lu*i,Nu*i-Lu*r),n.lineTo(Nu*o+Lu*a,Nu*a-Lu*o),n.lineTo(Nu*s+Lu*l,Nu*l-Lu*s),n.closePath()}};function Lce(n,e){let t=null,r=NI(i);n=typeof n=="function"?n:Xi(n||OI),e=typeof e=="function"?e:Xi(e===void 0?64:+e);function i(){let o;if(t||(t=o=r()),n.apply(this,arguments).draw(t,+e.apply(this,arguments)),o)return t=null,o+""||null}return i.type=function(o){return arguments.length?(n=typeof o=="function"?o:Xi(o),i):n},i.size=function(o){return arguments.length?(e=typeof o=="function"?o:Xi(+o),i):e},i.context=function(o){return arguments.length?(t=o??null,i):t},i}function eS(){}function tS(n,e,t){n._context.bezierCurveTo((2*n._x0+n._x1)/3,(2*n._y0+n._y1)/3,(n._x0+2*n._x1)/3,(n._y0+2*n._y1)/3,(n._x0+4*n._x1+e)/6,(n._y0+4*n._y1+t)/6)}function hV(n){this._context=n}hV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:tS(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:tS(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function Oce(n){return new hV(n)}function pV(n){this._context=n}pV.prototype={areaStart:eS,areaEnd:eS,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._x2=n,this._y2=e;break;case 1:this._point=2,this._x3=n,this._y3=e;break;case 2:this._point=3,this._x4=n,this._y4=e,this._context.moveTo((this._x0+4*this._x1+n)/6,(this._y0+4*this._y1+e)/6);break;default:tS(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function Dce(n){return new pV(n)}function mV(n){this._context=n}mV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var t=(this._x0+4*this._x1+n)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 3:this._point=4;default:tS(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function kce(n){return new mV(n)}function gV(n){this._context=n}gV.prototype={areaStart:eS,areaEnd:eS,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(n,e){n=+n,e=+e,this._point?this._context.lineTo(n,e):(this._point=1,this._context.moveTo(n,e))}};function Fce(n){return new gV(n)}function BD(n){return n<0?-1:1}function zD(n,e,t){var r=n._x1-n._x0,i=e-n._x1,o=(n._y1-n._y0)/(r||i<0&&-0),a=(t-n._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(BD(o)+BD(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function HD(n,e){var t=n._x1-n._x0;return t?(3*(n._y1-n._y0)/t-e)/2:e}function gE(n,e,t){var r=n._x0,i=n._y0,o=n._x1,a=n._y1,s=(o-r)/3;n._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*t,o,a)}function nS(n){this._context=n}nS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:gE(this,this._t0,HD(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){var t=NaN;if(n=+n,e=+e,!(n===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;break;case 2:this._point=3,gE(this,HD(this,t=zD(this,n,e)),t);break;default:gE(this,this._t0,t=zD(this,n,e));break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e,this._t0=t}}};function vV(n){this._context=new yV(n)}(vV.prototype=Object.create(nS.prototype)).point=function(n,e){nS.prototype.point.call(this,e,n)};function yV(n){this._context=n}yV.prototype={moveTo:function(n,e){this._context.moveTo(e,n)},closePath:function(){this._context.closePath()},lineTo:function(n,e){this._context.lineTo(e,n)},bezierCurveTo:function(n,e,t,r,i,o){this._context.bezierCurveTo(e,n,r,t,o,i)}};function Uce(n){return new nS(n)}function Bce(n){return new vV(n)}function xV(n){this._context=n}xV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var n=this._x,e=this._y,t=n.length;if(t)if(this._line?this._context.lineTo(n[0],e[0]):this._context.moveTo(n[0],e[0]),t===2)this._context.lineTo(n[1],e[1]);else for(var r=VD(n),i=VD(e),o=0,a=1;a<t;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],n[a],e[a]);(this._line||this._line!==0&&t===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(n,e){this._x.push(+n),this._y.push(+e)}};function VD(n){var e,t=n.length-1,r,i=new Array(t),o=new Array(t),a=new Array(t);for(i[0]=0,o[0]=2,a[0]=n[0]+2*n[1],e=1;e<t-1;++e)i[e]=1,o[e]=4,a[e]=4*n[e]+2*n[e+1];for(i[t-1]=2,o[t-1]=7,a[t-1]=8*n[t-1]+n[t],e=1;e<t;++e)r=i[e]/o[e-1],o[e]-=r,a[e]-=r*a[e-1];for(i[t-1]=a[t-1]/o[t-1],e=t-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[t-1]=(n[t]+i[t-1])/2,e=0;e<t-1;++e)o[e]=2*n[e+1]-i[e+1];return[i,o]}function zce(n){return new xV(n)}function zw(n,e){this._context=n,this._t=e}zw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(n,e);else{var t=this._x*(1-this._t)+n*this._t;this._context.lineTo(t,this._y),this._context.lineTo(t,e)}break}}this._x=n,this._y=e}};function Hce(n){return new zw(n,.5)}function Vce(n){return new zw(n,0)}function Gce(n){return new zw(n,1)}function bg(n,e){if((a=n.length)>1)for(var t=1,r,i,o=n[e[0]],a,s=o.length;t<a;++t)for(i=o,o=n[e[t]],r=0;r<s;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function i5(n){for(var e=n.length,t=new Array(e);--e>=0;)t[e]=e;return t}function qce(n,e){return n[e]}function Wce(n){const e=[];return e.key=n,e}function jce(){var n=Xi([]),e=i5,t=bg,r=qce;function i(o){var a=Array.from(n.apply(this,arguments),Wce),s,l=a.length,u=-1,c;for(const f of o)for(s=0,++u;s<l;++s)(a[s][u]=[0,+r(f,a[s].key,u,o)]).data=f;for(s=0,c=LI(e(a));s<l;++s)a[c[s]].index=s;return t(a,c),a}return i.keys=function(o){return arguments.length?(n=typeof o=="function"?o:Xi(Array.from(o)),i):n},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:Xi(+o),i):r},i.order=function(o){return arguments.length?(e=o==null?i5:typeof o=="function"?o:Xi(Array.from(o)),i):e},i.offset=function(o){return arguments.length?(t=o??bg,i):t},i}function $ce(n,e){if((r=n.length)>0){for(var t,r,i=0,o=n[0].length,a;i<o;++i){for(a=t=0;t<r;++t)a+=n[t][i][1]||0;if(a)for(t=0;t<r;++t)n[t][i][1]/=a}bg(n,e)}}function Xce(n,e){if((i=n.length)>0){for(var t=0,r=n[e[0]],i,o=r.length;t<o;++t){for(var a=0,s=0;a<i;++a)s+=n[a][t][1]||0;r[t][1]+=r[t][0]=-s/2}bg(n,e)}}function Yce(n,e){if(!(!((a=n.length)>0)||!((o=(i=n[e[0]]).length)>0))){for(var t=0,r=1,i,o,a;r<o;++r){for(var s=0,l=0,u=0;s<a;++s){for(var c=n[e[s]],f=c[r][1]||0,h=c[r-1][1]||0,p=(f-h)/2,v=0;v<s;++v){var S=n[e[v]],y=S[r][1]||0,_=S[r-1][1]||0;p+=y-_}l+=f,u+=p*f}i[r-1][1]+=i[r-1][0]=t,l&&(t-=u/l)}i[r-1][1]+=i[r-1][0]=t,bg(n,e)}}function J0(n){"@babel/helpers - typeof";return J0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J0(n)}var Kce=["type","size","sizeType"];function o5(){return o5=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},o5.apply(this,arguments)}function GD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function qD(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?GD(Object(t),!0).forEach(function(r){Jce(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):GD(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Jce(n,e,t){return e=Zce(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Zce(n){var e=Qce(n,"string");return J0(e)=="symbol"?e:String(e)}function Qce(n,e){if(J0(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(J0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function efe(n,e){if(n==null)return{};var t=tfe(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function tfe(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}var _V={symbolCircle:OI,symbolCross:wce,symbolDiamond:Ace,symbolSquare:Ece,symbolStar:Pce,symbolTriangle:Ice,symbolWye:Nce},nfe=Math.PI/180,rfe=function(e){var t="symbol".concat(Fw(e));return _V[t]||OI},ife=function(e,t,r){if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*nfe;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},ofe=function(e,t){_V["symbol".concat(Fw(e))]=t},Hw=function(e){var t=e.type,r=t===void 0?"circle":t,i=e.size,o=i===void 0?64:i,a=e.sizeType,s=a===void 0?"area":a,l=efe(e,Kce),u=qD(qD({},l),{},{type:r,size:o,sizeType:s}),c=function(){var y=rfe(r),_=Lce().type(y).size(ife(o,s,r));return _()},f=u.className,h=u.cx,p=u.cy,v=pr(u,!0);return h===+h&&p===+p&&o===+o?Ve.createElement("path",o5({},v,{className:qr("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(p,")"),d:c()})):null};Hw.registerSymbol=ofe;function Ag(n){"@babel/helpers - typeof";return Ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ag(n)}function a5(){return a5=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},a5.apply(this,arguments)}function WD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function afe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?WD(Object(t),!0).forEach(function(r){Z0(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):WD(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function sfe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function lfe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,wV(r.key),r)}}function ufe(n,e,t){return e&&lfe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function cfe(n,e,t){return e=rS(e),ffe(n,SV()?Reflect.construct(e,t||[],rS(n).constructor):e.apply(n,t))}function ffe(n,e){if(e&&(Ag(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dfe(n)}function dfe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function SV(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(SV=function(){return!!n})()}function rS(n){return rS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},rS(n)}function hfe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&s5(n,e)}function s5(n,e){return s5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},s5(n,e)}function Z0(n,e,t){return e=wV(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function wV(n){var e=pfe(n,"string");return Ag(e)=="symbol"?e:String(e)}function pfe(n,e){if(Ag(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Ag(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var Ou=32,DI=(function(n){hfe(e,n);function e(){return sfe(this,e),cfe(this,e,arguments)}return ufe(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,o=Ou/2,a=Ou/6,s=Ou/3,l=r.inactive?i:r.color;if(r.type==="plainline")return Ve.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:o,x2:Ou,y2:o,className:"recharts-legend-icon"});if(r.type==="line")return Ve.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(o,"h").concat(s,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*s,",").concat(o,`
            H`).concat(Ou,"M").concat(2*s,",").concat(o,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(s,",").concat(o),className:"recharts-legend-icon"});if(r.type==="rect")return Ve.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Ou/8,"h").concat(Ou,"v").concat(Ou*3/4,"h").concat(-Ou,"z"),className:"recharts-legend-icon"});if(Ve.isValidElement(r.legendIcon)){var u=afe({},r);return delete u.legendIcon,Ve.cloneElement(r.legendIcon,u)}return Ve.createElement(Hw,{fill:l,cx:o,cy:o,size:Ou,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,o=i.payload,a=i.iconSize,s=i.layout,l=i.formatter,u=i.inactiveColor,c={x:0,y:0,width:Ou,height:Ou},f={display:s==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return o.map(function(p,v){var S=p.formatter||l,y=qr(Z0(Z0({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",p.inactive));if(p.type==="none")return null;var _=Ar(p.value)?null:p.value;od(!Ar(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var w=p.inactive?u:p.color;return Ve.createElement("li",a5({className:y,style:f,key:"legend-item-".concat(v)},K0(r.props,p,v)),Ve.createElement(QC,{width:a,height:a,viewBox:c,style:h},r.renderIcon(p)),Ve.createElement("span",{className:"recharts-legend-item-text",style:{color:w}},S?S(_,p,v):_))})}},{key:"render",value:function(){var r=this.props,i=r.payload,o=r.layout,a=r.align;if(!i||!i.length)return null;var s={padding:0,margin:0,textAlign:o==="horizontal"?a:"left"};return Ve.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}]),e})(Me.PureComponent);Z0(DI,"displayName","Legend");Z0(DI,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var vE,jD;function mfe(){if(jD)return vE;jD=1;var n=Ow();function e(){this.__data__=new n,this.size=0}return vE=e,vE}var yE,$D;function gfe(){if($D)return yE;$D=1;function n(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}return yE=n,yE}var xE,XD;function vfe(){if(XD)return xE;XD=1;function n(e){return this.__data__.get(e)}return xE=n,xE}var _E,YD;function yfe(){if(YD)return _E;YD=1;function n(e){return this.__data__.has(e)}return _E=n,_E}var SE,KD;function xfe(){if(KD)return SE;KD=1;var n=Ow(),e=TI(),t=MI(),r=200;function i(o,a){var s=this.__data__;if(s instanceof n){var l=s.__data__;if(!e||l.length<r-1)return l.push([o,a]),this.size=++s.size,this;s=this.__data__=new t(l)}return s.set(o,a),this.size=s.size,this}return SE=i,SE}var wE,JD;function bV(){if(JD)return wE;JD=1;var n=Ow(),e=mfe(),t=gfe(),r=vfe(),i=yfe(),o=xfe();function a(s){var l=this.__data__=new n(s);this.size=l.size}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=r,a.prototype.has=i,a.prototype.set=o,wE=a,wE}var bE,ZD;function _fe(){if(ZD)return bE;ZD=1;var n="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,n),this}return bE=e,bE}var AE,QD;function Sfe(){if(QD)return AE;QD=1;function n(e){return this.__data__.has(e)}return AE=n,AE}var EE,ek;function AV(){if(ek)return EE;ek=1;var n=MI(),e=_fe(),t=Sfe();function r(i){var o=-1,a=i==null?0:i.length;for(this.__data__=new n;++o<a;)this.add(i[o])}return r.prototype.add=r.prototype.push=e,r.prototype.has=t,EE=r,EE}var TE,tk;function EV(){if(tk)return TE;tk=1;function n(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}return TE=n,TE}var ME,nk;function TV(){if(nk)return ME;nk=1;function n(e,t){return e.has(t)}return ME=n,ME}var CE,rk;function MV(){if(rk)return CE;rk=1;var n=AV(),e=EV(),t=TV(),r=1,i=2;function o(a,s,l,u,c,f){var h=l&r,p=a.length,v=s.length;if(p!=v&&!(h&&v>p))return!1;var S=f.get(a),y=f.get(s);if(S&&y)return S==s&&y==a;var _=-1,w=!0,A=l&i?new n:void 0;for(f.set(a,s),f.set(s,a);++_<p;){var E=a[_],P=s[_];if(u)var O=h?u(P,E,_,s,a,f):u(E,P,_,a,s,f);if(O!==void 0){if(O)continue;w=!1;break}if(A){if(!e(s,function(L,D){if(!t(A,D)&&(E===L||c(E,L,l,u,f)))return A.push(D)})){w=!1;break}}else if(!(E===P||c(E,P,l,u,f))){w=!1;break}}return f.delete(a),f.delete(s),w}return CE=o,CE}var PE,ik;function wfe(){if(ik)return PE;ik=1;var n=If(),e=n.Uint8Array;return PE=e,PE}var IE,ok;function bfe(){if(ok)return IE;ok=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i,o){r[++t]=[o,i]}),r}return IE=n,IE}var RE,ak;function kI(){if(ak)return RE;ak=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i){r[++t]=i}),r}return RE=n,RE}var NE,sk;function Afe(){if(sk)return NE;sk=1;var n=Jy(),e=wfe(),t=EI(),r=MV(),i=bfe(),o=kI(),a=1,s=2,l="[object Boolean]",u="[object Date]",c="[object Error]",f="[object Map]",h="[object Number]",p="[object RegExp]",v="[object Set]",S="[object String]",y="[object Symbol]",_="[object ArrayBuffer]",w="[object DataView]",A=n?n.prototype:void 0,E=A?A.valueOf:void 0;function P(O,L,D,F,U,k,z){switch(D){case w:if(O.byteLength!=L.byteLength||O.byteOffset!=L.byteOffset)return!1;O=O.buffer,L=L.buffer;case _:return!(O.byteLength!=L.byteLength||!k(new e(O),new e(L)));case l:case u:case h:return t(+O,+L);case c:return O.name==L.name&&O.message==L.message;case p:case S:return O==L+"";case f:var W=i;case v:var j=F&a;if(W||(W=o),O.size!=L.size&&!j)return!1;var se=z.get(O);if(se)return se==L;F|=s,z.set(O,L);var Y=r(W(O),W(L),F,U,k,z);return z.delete(O),Y;case y:if(E)return E.call(O)==E.call(L)}return!1}return NE=P,NE}var LE,lk;function CV(){if(lk)return LE;lk=1;function n(e,t){for(var r=-1,i=t.length,o=e.length;++r<i;)e[o+r]=t[r];return e}return LE=n,LE}var OE,uk;function Efe(){if(uk)return OE;uk=1;var n=CV(),e=Hl();function t(r,i,o){var a=i(r);return e(r)?a:n(a,o(r))}return OE=t,OE}var DE,ck;function Tfe(){if(ck)return DE;ck=1;function n(e,t){for(var r=-1,i=e==null?0:e.length,o=0,a=[];++r<i;){var s=e[r];t(s,r,e)&&(a[o++]=s)}return a}return DE=n,DE}var kE,fk;function Mfe(){if(fk)return kE;fk=1;function n(){return[]}return kE=n,kE}var FE,dk;function Cfe(){if(dk)return FE;dk=1;var n=Tfe(),e=Mfe(),t=Object.prototype,r=t.propertyIsEnumerable,i=Object.getOwnPropertySymbols,o=i?function(a){return a==null?[]:(a=Object(a),n(i(a),function(s){return r.call(a,s)}))}:e;return FE=o,FE}var UE,hk;function Pfe(){if(hk)return UE;hk=1;function n(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}return UE=n,UE}var BE,pk;function Ife(){if(pk)return BE;pk=1;var n=md(),e=gd(),t="[object Arguments]";function r(i){return e(i)&&n(i)==t}return BE=r,BE}var zE,mk;function FI(){if(mk)return zE;mk=1;var n=Ife(),e=gd(),t=Object.prototype,r=t.hasOwnProperty,i=t.propertyIsEnumerable,o=n((function(){return arguments})())?n:function(a){return e(a)&&r.call(a,"callee")&&!i.call(a,"callee")};return zE=o,zE}var Zv={exports:{}},HE,gk;function Rfe(){if(gk)return HE;gk=1;function n(){return!1}return HE=n,HE}Zv.exports;var vk;function PV(){return vk||(vk=1,(function(n,e){var t=If(),r=Rfe(),i=e&&!e.nodeType&&e,o=i&&!0&&n&&!n.nodeType&&n,a=o&&o.exports===i,s=a?t.Buffer:void 0,l=s?s.isBuffer:void 0,u=l||r;n.exports=u})(Zv,Zv.exports)),Zv.exports}var VE,yk;function UI(){if(yk)return VE;yk=1;var n=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(r,i){var o=typeof r;return i=i??n,!!i&&(o=="number"||o!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return VE=t,VE}var GE,xk;function BI(){if(xk)return GE;xk=1;var n=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=n}return GE=e,GE}var qE,_k;function Nfe(){if(_k)return qE;_k=1;var n=md(),e=BI(),t=gd(),r="[object Arguments]",i="[object Array]",o="[object Boolean]",a="[object Date]",s="[object Error]",l="[object Function]",u="[object Map]",c="[object Number]",f="[object Object]",h="[object RegExp]",p="[object Set]",v="[object String]",S="[object WeakMap]",y="[object ArrayBuffer]",_="[object DataView]",w="[object Float32Array]",A="[object Float64Array]",E="[object Int8Array]",P="[object Int16Array]",O="[object Int32Array]",L="[object Uint8Array]",D="[object Uint8ClampedArray]",F="[object Uint16Array]",U="[object Uint32Array]",k={};k[w]=k[A]=k[E]=k[P]=k[O]=k[L]=k[D]=k[F]=k[U]=!0,k[r]=k[i]=k[y]=k[o]=k[_]=k[a]=k[s]=k[l]=k[u]=k[c]=k[f]=k[h]=k[p]=k[v]=k[S]=!1;function z(W){return t(W)&&e(W.length)&&!!k[n(W)]}return qE=z,qE}var WE,Sk;function IV(){if(Sk)return WE;Sk=1;function n(e){return function(t){return e(t)}}return WE=n,WE}var Qv={exports:{}};Qv.exports;var wk;function Lfe(){return wk||(wk=1,(function(n,e){var t=YH(),r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,o=i&&i.exports===r,a=o&&t.process,s=(function(){try{var l=i&&i.require&&i.require("util").types;return l||a&&a.binding&&a.binding("util")}catch{}})();n.exports=s})(Qv,Qv.exports)),Qv.exports}var jE,bk;function RV(){if(bk)return jE;bk=1;var n=Nfe(),e=IV(),t=Lfe(),r=t&&t.isTypedArray,i=r?e(r):n;return jE=i,jE}var $E,Ak;function Ofe(){if(Ak)return $E;Ak=1;var n=Pfe(),e=FI(),t=Hl(),r=PV(),i=UI(),o=RV(),a=Object.prototype,s=a.hasOwnProperty;function l(u,c){var f=t(u),h=!f&&e(u),p=!f&&!h&&r(u),v=!f&&!h&&!p&&o(u),S=f||h||p||v,y=S?n(u.length,String):[],_=y.length;for(var w in u)(c||s.call(u,w))&&!(S&&(w=="length"||p&&(w=="offset"||w=="parent")||v&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||i(w,_)))&&y.push(w);return y}return $E=l,$E}var XE,Ek;function Dfe(){if(Ek)return XE;Ek=1;var n=Object.prototype;function e(t){var r=t&&t.constructor,i=typeof r=="function"&&r.prototype||n;return t===i}return XE=e,XE}var YE,Tk;function NV(){if(Tk)return YE;Tk=1;function n(e,t){return function(r){return e(t(r))}}return YE=n,YE}var KE,Mk;function kfe(){if(Mk)return KE;Mk=1;var n=NV(),e=n(Object.keys,Object);return KE=e,KE}var JE,Ck;function Ffe(){if(Ck)return JE;Ck=1;var n=Dfe(),e=kfe(),t=Object.prototype,r=t.hasOwnProperty;function i(o){if(!n(o))return e(o);var a=[];for(var s in Object(o))r.call(o,s)&&s!="constructor"&&a.push(s);return a}return JE=i,JE}var ZE,Pk;function Qy(){if(Pk)return ZE;Pk=1;var n=AI(),e=BI();function t(r){return r!=null&&e(r.length)&&!n(r)}return ZE=t,ZE}var QE,Ik;function Vw(){if(Ik)return QE;Ik=1;var n=Ofe(),e=Ffe(),t=Qy();function r(i){return t(i)?n(i):e(i)}return QE=r,QE}var eT,Rk;function Ufe(){if(Rk)return eT;Rk=1;var n=Efe(),e=Cfe(),t=Vw();function r(i){return n(i,t,e)}return eT=r,eT}var tT,Nk;function Bfe(){if(Nk)return tT;Nk=1;var n=Ufe(),e=1,t=Object.prototype,r=t.hasOwnProperty;function i(o,a,s,l,u,c){var f=s&e,h=n(o),p=h.length,v=n(a),S=v.length;if(p!=S&&!f)return!1;for(var y=p;y--;){var _=h[y];if(!(f?_ in a:r.call(a,_)))return!1}var w=c.get(o),A=c.get(a);if(w&&A)return w==a&&A==o;var E=!0;c.set(o,a),c.set(a,o);for(var P=f;++y<p;){_=h[y];var O=o[_],L=a[_];if(l)var D=f?l(L,O,_,a,o,c):l(O,L,_,o,a,c);if(!(D===void 0?O===L||u(O,L,s,l,c):D)){E=!1;break}P||(P=_=="constructor")}if(E&&!P){var F=o.constructor,U=a.constructor;F!=U&&"constructor"in o&&"constructor"in a&&!(typeof F=="function"&&F instanceof F&&typeof U=="function"&&U instanceof U)&&(E=!1)}return c.delete(o),c.delete(a),E}return tT=i,tT}var nT,Lk;function zfe(){if(Lk)return nT;Lk=1;var n=Qp(),e=If(),t=n(e,"DataView");return nT=t,nT}var rT,Ok;function Hfe(){if(Ok)return rT;Ok=1;var n=Qp(),e=If(),t=n(e,"Promise");return rT=t,rT}var iT,Dk;function LV(){if(Dk)return iT;Dk=1;var n=Qp(),e=If(),t=n(e,"Set");return iT=t,iT}var oT,kk;function Vfe(){if(kk)return oT;kk=1;var n=Qp(),e=If(),t=n(e,"WeakMap");return oT=t,oT}var aT,Fk;function Gfe(){if(Fk)return aT;Fk=1;var n=zfe(),e=TI(),t=Hfe(),r=LV(),i=Vfe(),o=md(),a=KH(),s="[object Map]",l="[object Object]",u="[object Promise]",c="[object Set]",f="[object WeakMap]",h="[object DataView]",p=a(n),v=a(e),S=a(t),y=a(r),_=a(i),w=o;return(n&&w(new n(new ArrayBuffer(1)))!=h||e&&w(new e)!=s||t&&w(t.resolve())!=u||r&&w(new r)!=c||i&&w(new i)!=f)&&(w=function(A){var E=o(A),P=E==l?A.constructor:void 0,O=P?a(P):"";if(O)switch(O){case p:return h;case v:return s;case S:return u;case y:return c;case _:return f}return E}),aT=w,aT}var sT,Uk;function qfe(){if(Uk)return sT;Uk=1;var n=bV(),e=MV(),t=Afe(),r=Bfe(),i=Gfe(),o=Hl(),a=PV(),s=RV(),l=1,u="[object Arguments]",c="[object Array]",f="[object Object]",h=Object.prototype,p=h.hasOwnProperty;function v(S,y,_,w,A,E){var P=o(S),O=o(y),L=P?c:i(S),D=O?c:i(y);L=L==u?f:L,D=D==u?f:D;var F=L==f,U=D==f,k=L==D;if(k&&a(S)){if(!a(y))return!1;P=!0,F=!1}if(k&&!F)return E||(E=new n),P||s(S)?e(S,y,_,w,A,E):t(S,y,L,_,w,A,E);if(!(_&l)){var z=F&&p.call(S,"__wrapped__"),W=U&&p.call(y,"__wrapped__");if(z||W){var j=z?S.value():S,se=W?y.value():y;return E||(E=new n),A(j,se,_,w,E)}}return k?(E||(E=new n),r(S,y,_,w,A,E)):!1}return sT=v,sT}var lT,Bk;function zI(){if(Bk)return lT;Bk=1;var n=qfe(),e=gd();function t(r,i,o,a,s){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:n(r,i,o,a,t,s)}return lT=t,lT}var uT,zk;function Wfe(){if(zk)return uT;zk=1;var n=bV(),e=zI(),t=1,r=2;function i(o,a,s,l){var u=s.length,c=u,f=!l;if(o==null)return!c;for(o=Object(o);u--;){var h=s[u];if(f&&h[2]?h[1]!==o[h[0]]:!(h[0]in o))return!1}for(;++u<c;){h=s[u];var p=h[0],v=o[p],S=h[1];if(f&&h[2]){if(v===void 0&&!(p in o))return!1}else{var y=new n;if(l)var _=l(v,S,p,o,a,y);if(!(_===void 0?e(S,v,t|r,l,y):_))return!1}}return!0}return uT=i,uT}var cT,Hk;function OV(){if(Hk)return cT;Hk=1;var n=bh();function e(t){return t===t&&!n(t)}return cT=e,cT}var fT,Vk;function jfe(){if(Vk)return fT;Vk=1;var n=OV(),e=Vw();function t(r){for(var i=e(r),o=i.length;o--;){var a=i[o],s=r[a];i[o]=[a,s,n(s)]}return i}return fT=t,fT}var dT,Gk;function DV(){if(Gk)return dT;Gk=1;function n(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}return dT=n,dT}var hT,qk;function $fe(){if(qk)return hT;qk=1;var n=Wfe(),e=jfe(),t=DV();function r(i){var o=e(i);return o.length==1&&o[0][2]?t(o[0][0],o[0][1]):function(a){return a===i||n(a,i,o)}}return hT=r,hT}var pT,Wk;function Xfe(){if(Wk)return pT;Wk=1;function n(e,t){return e!=null&&t in Object(e)}return pT=n,pT}var mT,jk;function Yfe(){if(jk)return mT;jk=1;var n=QH(),e=FI(),t=Hl(),r=UI(),i=BI(),o=kw();function a(s,l,u){l=n(l,s);for(var c=-1,f=l.length,h=!1;++c<f;){var p=o(l[c]);if(!(h=s!=null&&u(s,p)))break;s=s[p]}return h||++c!=f?h:(f=s==null?0:s.length,!!f&&i(f)&&r(p,f)&&(t(s)||e(s)))}return mT=a,mT}var gT,$k;function Kfe(){if($k)return gT;$k=1;var n=Xfe(),e=Yfe();function t(r,i){return r!=null&&e(r,i,n)}return gT=t,gT}var vT,Xk;function Jfe(){if(Xk)return vT;Xk=1;var n=zI(),e=eV(),t=Kfe(),r=bI(),i=OV(),o=DV(),a=kw(),s=1,l=2;function u(c,f){return r(c)&&i(f)?o(a(c),f):function(h){var p=e(h,c);return p===void 0&&p===f?t(h,c):n(f,p,s|l)}}return vT=u,vT}var yT,Yk;function ev(){if(Yk)return yT;Yk=1;function n(e){return e}return yT=n,yT}var xT,Kk;function Zfe(){if(Kk)return xT;Kk=1;function n(e){return function(t){return t==null?void 0:t[e]}}return xT=n,xT}var _T,Jk;function Qfe(){if(Jk)return _T;Jk=1;var n=PI();function e(t){return function(r){return n(r,t)}}return _T=e,_T}var ST,Zk;function ede(){if(Zk)return ST;Zk=1;var n=Zfe(),e=Qfe(),t=bI(),r=kw();function i(o){return t(o)?n(r(o)):e(o)}return ST=i,ST}var wT,Qk;function Ah(){if(Qk)return wT;Qk=1;var n=$fe(),e=Jfe(),t=ev(),r=Hl(),i=ede();function o(a){return typeof a=="function"?a:a==null?t:typeof a=="object"?r(a)?e(a[0],a[1]):n(a):i(a)}return wT=o,wT}var bT,eF;function kV(){if(eF)return bT;eF=1;function n(e,t,r,i){for(var o=e.length,a=r+(i?1:-1);i?a--:++a<o;)if(t(e[a],a,e))return a;return-1}return bT=n,bT}var AT,tF;function tde(){if(tF)return AT;tF=1;function n(e){return e!==e}return AT=n,AT}var ET,nF;function nde(){if(nF)return ET;nF=1;function n(e,t,r){for(var i=r-1,o=e.length;++i<o;)if(e[i]===t)return i;return-1}return ET=n,ET}var TT,rF;function rde(){if(rF)return TT;rF=1;var n=kV(),e=tde(),t=nde();function r(i,o,a){return o===o?t(i,o,a):n(i,e,a)}return TT=r,TT}var MT,iF;function ide(){if(iF)return MT;iF=1;var n=rde();function e(t,r){var i=t==null?0:t.length;return!!i&&n(t,r,0)>-1}return MT=e,MT}var CT,oF;function ode(){if(oF)return CT;oF=1;function n(e,t,r){for(var i=-1,o=e==null?0:e.length;++i<o;)if(r(t,e[i]))return!0;return!1}return CT=n,CT}var PT,aF;function ade(){if(aF)return PT;aF=1;function n(){}return PT=n,PT}var IT,sF;function sde(){if(sF)return IT;sF=1;var n=LV(),e=ade(),t=kI(),r=1/0,i=n&&1/t(new n([,-0]))[1]==r?function(o){return new n(o)}:e;return IT=i,IT}var RT,lF;function lde(){if(lF)return RT;lF=1;var n=AV(),e=ide(),t=ode(),r=TV(),i=sde(),o=kI(),a=200;function s(l,u,c){var f=-1,h=e,p=l.length,v=!0,S=[],y=S;if(c)v=!1,h=t;else if(p>=a){var _=u?null:i(l);if(_)return o(_);v=!1,h=r,y=new n}else y=u?[]:S;e:for(;++f<p;){var w=l[f],A=u?u(w):w;if(w=c||w!==0?w:0,v&&A===A){for(var E=y.length;E--;)if(y[E]===A)continue e;u&&y.push(A),S.push(w)}else h(y,A,c)||(y!==S&&y.push(A),S.push(w))}return S}return RT=s,RT}var NT,uF;function ude(){if(uF)return NT;uF=1;var n=Ah(),e=lde();function t(r,i){return r&&r.length?e(r,n(i,2)):[]}return NT=t,NT}var cde=ude();const cF=gi(cde);function FV(n,e,t){return e===!0?cF(n,t):Ar(e)?cF(n,e):n}function Eg(n){"@babel/helpers - typeof";return Eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eg(n)}var fde=["ref"];function fF(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function ip(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?fF(Object(t),!0).forEach(function(r){Gw(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):fF(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function dde(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function dF(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,zV(r.key),r)}}function hde(n,e,t){return e&&dF(n.prototype,e),t&&dF(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function pde(n,e,t){return e=iS(e),mde(n,UV()?Reflect.construct(e,t||[],iS(n).constructor):e.apply(n,t))}function mde(n,e){if(e&&(Eg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return BV(n)}function UV(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UV=function(){return!!n})()}function iS(n){return iS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},iS(n)}function BV(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function gde(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&l5(n,e)}function l5(n,e){return l5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},l5(n,e)}function Gw(n,e,t){return e=zV(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function zV(n){var e=vde(n,"string");return Eg(e)=="symbol"?e:String(e)}function vde(n,e){if(Eg(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Eg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function yde(n,e){if(n==null)return{};var t=xde(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function xde(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function _de(n){return n.value}function Sde(n,e){if(Ve.isValidElement(n))return Ve.cloneElement(n,e);if(typeof n=="function")return Ve.createElement(n,e);e.ref;var t=yde(e,fde);return Ve.createElement(DI,t)}var hF=1,Tg=(function(n){gde(e,n);function e(){var t;dde(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=pde(this,e,[].concat(i)),Gw(BV(t),"lastBoundingBox",{width:-1,height:-1}),t}return hde(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>hF||Math.abs(i.height-this.lastBoundingBox.height)>hF)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?ip({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,o=i.layout,a=i.align,s=i.verticalAlign,l=i.margin,u=i.chartWidth,c=i.chartHeight,f,h;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(a==="center"&&o==="vertical"){var p=this.getBBoxSnapshot();f={left:((u||0)-p.width)/2}}else f=a==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(s==="middle"){var v=this.getBBoxSnapshot();h={top:((c||0)-v.height)/2}}else h=s==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return ip(ip({},f),h)}},{key:"render",value:function(){var r=this,i=this.props,o=i.content,a=i.width,s=i.height,l=i.wrapperStyle,u=i.payloadUniqBy,c=i.payload,f=ip(ip({position:"absolute",width:a||"auto",height:s||"auto"},this.getDefaultPosition(l)),l);return Ve.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(p){r.wrapperNode=p}},Sde(o,ip(ip({},this.props),{},{payload:FV(c,u,_de)})))}}],[{key:"getWithHeight",value:function(r,i){var o=r.props.layout;return o==="vertical"&&an(r.props.height)?{height:r.props.height}:o==="horizontal"?{width:r.props.width||i}:null}}]),e})(Me.PureComponent);Gw(Tg,"displayName","Legend");Gw(Tg,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var LT,pF;function wde(){if(pF)return LT;pF=1;var n=Jy(),e=FI(),t=Hl(),r=n?n.isConcatSpreadable:void 0;function i(o){return t(o)||e(o)||!!(r&&o&&o[r])}return LT=i,LT}var OT,mF;function HV(){if(mF)return OT;mF=1;var n=CV(),e=wde();function t(r,i,o,a,s){var l=-1,u=r.length;for(o||(o=e),s||(s=[]);++l<u;){var c=r[l];i>0&&o(c)?i>1?t(c,i-1,o,a,s):n(s,c):a||(s[s.length]=c)}return s}return OT=t,OT}var DT,gF;function bde(){if(gF)return DT;gF=1;function n(e){return function(t,r,i){for(var o=-1,a=Object(t),s=i(t),l=s.length;l--;){var u=s[e?l:++o];if(r(a[u],u,a)===!1)break}return t}}return DT=n,DT}var kT,vF;function Ade(){if(vF)return kT;vF=1;var n=bde(),e=n();return kT=e,kT}var FT,yF;function VV(){if(yF)return FT;yF=1;var n=Ade(),e=Vw();function t(r,i){return r&&n(r,i,e)}return FT=t,FT}var UT,xF;function Ede(){if(xF)return UT;xF=1;var n=Qy();function e(t,r){return function(i,o){if(i==null)return i;if(!n(i))return t(i,o);for(var a=i.length,s=r?a:-1,l=Object(i);(r?s--:++s<a)&&o(l[s],s,l)!==!1;);return i}}return UT=e,UT}var BT,_F;function HI(){if(_F)return BT;_F=1;var n=VV(),e=Ede(),t=e(n);return BT=t,BT}var zT,SF;function GV(){if(SF)return zT;SF=1;var n=HI(),e=Qy();function t(r,i){var o=-1,a=e(r)?Array(r.length):[];return n(r,function(s,l,u){a[++o]=i(s,l,u)}),a}return zT=t,zT}var HT,wF;function Tde(){if(wF)return HT;wF=1;function n(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}return HT=n,HT}var VT,bF;function Mde(){if(bF)return VT;bF=1;var n=Jg();function e(t,r){if(t!==r){var i=t!==void 0,o=t===null,a=t===t,s=n(t),l=r!==void 0,u=r===null,c=r===r,f=n(r);if(!u&&!f&&!s&&t>r||s&&l&&c&&!u&&!f||o&&l&&c||!i&&c||!a)return 1;if(!o&&!s&&!f&&t<r||f&&i&&a&&!o&&!s||u&&i&&a||!l&&a||!c)return-1}return 0}return VT=e,VT}var GT,AF;function Cde(){if(AF)return GT;AF=1;var n=Mde();function e(t,r,i){for(var o=-1,a=t.criteria,s=r.criteria,l=a.length,u=i.length;++o<l;){var c=n(a[o],s[o]);if(c){if(o>=u)return c;var f=i[o];return c*(f=="desc"?-1:1)}}return t.index-r.index}return GT=e,GT}var qT,EF;function Pde(){if(EF)return qT;EF=1;var n=CI(),e=PI(),t=Ah(),r=GV(),i=Tde(),o=IV(),a=Cde(),s=ev(),l=Hl();function u(c,f,h){f.length?f=n(f,function(S){return l(S)?function(y){return e(y,S.length===1?S[0]:S)}:S}):f=[s];var p=-1;f=n(f,o(t));var v=r(c,function(S,y,_){var w=n(f,function(A){return A(S)});return{criteria:w,index:++p,value:S}});return i(v,function(S,y){return a(S,y,h)})}return qT=u,qT}var WT,TF;function Ide(){if(TF)return WT;TF=1;function n(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}return WT=n,WT}var jT,MF;function Rde(){if(MF)return jT;MF=1;var n=Ide(),e=Math.max;function t(r,i,o){return i=e(i===void 0?r.length-1:i,0),function(){for(var a=arguments,s=-1,l=e(a.length-i,0),u=Array(l);++s<l;)u[s]=a[i+s];s=-1;for(var c=Array(i+1);++s<i;)c[s]=a[s];return c[i]=o(u),n(r,this,c)}}return jT=t,jT}var $T,CF;function Nde(){if(CF)return $T;CF=1;function n(e){return function(){return e}}return $T=n,$T}var XT,PF;function qV(){if(PF)return XT;PF=1;var n=Qp(),e=(function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch{}})();return XT=e,XT}var YT,IF;function Lde(){if(IF)return YT;IF=1;var n=Nde(),e=qV(),t=ev(),r=e?function(i,o){return e(i,"toString",{configurable:!0,enumerable:!1,value:n(o),writable:!0})}:t;return YT=r,YT}var KT,RF;function Ode(){if(RF)return KT;RF=1;var n=800,e=16,t=Date.now;function r(i){var o=0,a=0;return function(){var s=t(),l=e-(s-a);if(a=s,l>0){if(++o>=n)return arguments[0]}else o=0;return i.apply(void 0,arguments)}}return KT=r,KT}var JT,NF;function Dde(){if(NF)return JT;NF=1;var n=Lde(),e=Ode(),t=e(n);return JT=t,JT}var ZT,LF;function kde(){if(LF)return ZT;LF=1;var n=ev(),e=Rde(),t=Dde();function r(i,o){return t(e(i,o,n),i+"")}return ZT=r,ZT}var QT,OF;function qw(){if(OF)return QT;OF=1;var n=EI(),e=Qy(),t=UI(),r=bh();function i(o,a,s){if(!r(s))return!1;var l=typeof a;return(l=="number"?e(s)&&t(a,s.length):l=="string"&&a in s)?n(s[a],o):!1}return QT=i,QT}var eM,DF;function Fde(){if(DF)return eM;DF=1;var n=HV(),e=Pde(),t=kde(),r=qw(),i=t(function(o,a){if(o==null)return[];var s=a.length;return s>1&&r(o,a[0],a[1])?a=[]:s>2&&r(a[0],a[1],a[2])&&(a=[a[0]]),e(o,n(a,1),[])});return eM=i,eM}var Ude=Fde();const VI=gi(Ude);function Q0(n){"@babel/helpers - typeof";return Q0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q0(n)}function u5(){return u5=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},u5.apply(this,arguments)}function Bde(n,e){return Gde(n)||Vde(n,e)||Hde(n,e)||zde()}function zde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hde(n,e){if(n){if(typeof n=="string")return kF(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return kF(n,e)}}function kF(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Vde(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(t=t.call(n)).next,e!==0)for(;!(l=(r=o.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function Gde(n){if(Array.isArray(n))return n}function FF(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function tM(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?FF(Object(t),!0).forEach(function(r){qde(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):FF(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function qde(n,e,t){return e=Wde(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Wde(n){var e=jde(n,"string");return Q0(e)=="symbol"?e:String(e)}function jde(n,e){if(Q0(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Q0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function $de(n){return Array.isArray(n)&&Oa(n[0])&&Oa(n[1])?n.join(" ~ "):n}var Xde=function(e){var t=e.separator,r=t===void 0?" : ":t,i=e.contentStyle,o=i===void 0?{}:i,a=e.itemStyle,s=a===void 0?{}:a,l=e.labelStyle,u=l===void 0?{}:l,c=e.payload,f=e.formatter,h=e.itemSorter,p=e.wrapperClassName,v=e.labelClassName,S=e.label,y=e.labelFormatter,_=e.accessibilityLayer,w=_===void 0?!1:_,A=function(){if(c&&c.length){var z={padding:0,margin:0},W=(h?VI(c,h):c).map(function(j,se){if(j.type==="none")return null;var Y=tM({display:"block",paddingTop:4,paddingBottom:4,color:j.color||"#000"},s),Q=j.formatter||f||$de,X=j.value,Z=j.name,oe=X,ee=Z;if(Q&&oe!=null&&ee!=null){var G=Q(X,Z,j,se,c);if(Array.isArray(G)){var ne=Bde(G,2);oe=ne[0],ee=ne[1]}else oe=G}return Ve.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(se),style:Y},Oa(ee)?Ve.createElement("span",{className:"recharts-tooltip-item-name"},ee):null,Oa(ee)?Ve.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,Ve.createElement("span",{className:"recharts-tooltip-item-value"},oe),Ve.createElement("span",{className:"recharts-tooltip-item-unit"},j.unit||""))});return Ve.createElement("ul",{className:"recharts-tooltip-item-list",style:z},W)}return null},E=tM({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),P=tM({margin:0},u),O=!mr(S),L=O?S:"",D=qr("recharts-default-tooltip",p),F=qr("recharts-tooltip-label",v);O&&y&&c!==void 0&&c!==null&&(L=y(S,c));var U=w?{role:"status","aria-live":"assertive"}:{};return Ve.createElement("div",u5({className:D,style:E},U),Ve.createElement("p",{className:F,style:P},Ve.isValidElement(L)?L:"".concat(L)),A())};function ey(n){"@babel/helpers - typeof";return ey=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ey(n)}function Bx(n,e,t){return e=Yde(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Yde(n){var e=Kde(n,"string");return ey(e)=="symbol"?e:String(e)}function Kde(n,e){if(ey(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(ey(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Uv="recharts-tooltip-wrapper",Jde={visibility:"hidden"};function Zde(n){var e=n.coordinate,t=n.translateX,r=n.translateY;return qr(Uv,Bx(Bx(Bx(Bx({},"".concat(Uv,"-right"),an(t)&&e&&an(e.x)&&t>=e.x),"".concat(Uv,"-left"),an(t)&&e&&an(e.x)&&t<e.x),"".concat(Uv,"-bottom"),an(r)&&e&&an(e.y)&&r>=e.y),"".concat(Uv,"-top"),an(r)&&e&&an(e.y)&&r<e.y))}function UF(n){var e=n.allowEscapeViewBox,t=n.coordinate,r=n.key,i=n.offsetTopLeft,o=n.position,a=n.reverseDirection,s=n.tooltipDimension,l=n.viewBox,u=n.viewBoxDimension;if(o&&an(o[r]))return o[r];var c=t[r]-s-i,f=t[r]+i;if(e[r])return a[r]?c:f;if(a[r]){var h=c,p=l[r];return h<p?Math.max(f,l[r]):Math.max(c,l[r])}var v=f+s,S=l[r]+u;return v>S?Math.max(c,l[r]):Math.max(f,l[r])}function Qde(n){var e=n.translateX,t=n.translateY,r=n.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(t,"px, 0)"):"translate(".concat(e,"px, ").concat(t,"px)")}}function ehe(n){var e=n.allowEscapeViewBox,t=n.coordinate,r=n.offsetTopLeft,i=n.position,o=n.reverseDirection,a=n.tooltipBox,s=n.useTranslate3d,l=n.viewBox,u,c,f;return a.height>0&&a.width>0&&t?(c=UF({allowEscapeViewBox:e,coordinate:t,key:"x",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:a.width,viewBox:l,viewBoxDimension:l.width}),f=UF({allowEscapeViewBox:e,coordinate:t,key:"y",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:a.height,viewBox:l,viewBoxDimension:l.height}),u=Qde({translateX:c,translateY:f,useTranslate3d:s})):u=Jde,{cssProperties:u,cssClasses:Zde({translateX:c,translateY:f,coordinate:t})}}function Mg(n){"@babel/helpers - typeof";return Mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mg(n)}function BF(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function zF(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?BF(Object(t),!0).forEach(function(r){d5(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):BF(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function the(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function nhe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,jV(r.key),r)}}function rhe(n,e,t){return e&&nhe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function ihe(n,e,t){return e=oS(e),ohe(n,WV()?Reflect.construct(e,t||[],oS(n).constructor):e.apply(n,t))}function ohe(n,e){if(e&&(Mg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return c5(n)}function WV(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(WV=function(){return!!n})()}function oS(n){return oS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},oS(n)}function c5(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ahe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&f5(n,e)}function f5(n,e){return f5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},f5(n,e)}function d5(n,e,t){return e=jV(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function jV(n){var e=she(n,"string");return Mg(e)=="symbol"?e:String(e)}function she(n,e){if(Mg(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Mg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var HF=1,lhe=(function(n){ahe(e,n);function e(){var t;the(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=ihe(this,e,[].concat(i)),d5(c5(t),"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),d5(c5(t),"handleKeyDown",function(a){if(a.key==="Escape"){var s,l,u,c;t.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(l=t.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&s!==void 0?s:0,y:(u=(c=t.props.coordinate)===null||c===void 0?void 0:c.y)!==null&&u!==void 0?u:0}})}}),t}return rhe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>HF||Math.abs(r.height-this.state.lastBoundingBox.height)>HF)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,o=i.active,a=i.allowEscapeViewBox,s=i.animationDuration,l=i.animationEasing,u=i.children,c=i.coordinate,f=i.hasPayload,h=i.isAnimationActive,p=i.offset,v=i.position,S=i.reverseDirection,y=i.useTranslate3d,_=i.viewBox,w=i.wrapperStyle,A=ehe({allowEscapeViewBox:a,coordinate:c,offsetTopLeft:p,position:v,reverseDirection:S,tooltipBox:this.state.lastBoundingBox,useTranslate3d:y,viewBox:_}),E=A.cssClasses,P=A.cssProperties,O=zF(zF({transition:h&&o?"transform ".concat(s,"ms ").concat(l):void 0},P),{},{pointerEvents:"none",visibility:!this.state.dismissed&&o&&f?"visible":"hidden",position:"absolute",top:0,left:0},w);return Ve.createElement("div",{tabIndex:-1,className:E,style:O,ref:function(D){r.wrapperNode=D}},u)}}]),e})(Me.PureComponent),uhe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Eh={isSsr:uhe()};function Cg(n){"@babel/helpers - typeof";return Cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cg(n)}function VF(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function GF(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?VF(Object(t),!0).forEach(function(r){GI(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):VF(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function che(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function fhe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,XV(r.key),r)}}function dhe(n,e,t){return e&&fhe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function hhe(n,e,t){return e=aS(e),phe(n,$V()?Reflect.construct(e,t||[],aS(n).constructor):e.apply(n,t))}function phe(n,e){if(e&&(Cg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mhe(n)}function mhe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function $V(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($V=function(){return!!n})()}function aS(n){return aS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},aS(n)}function ghe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&h5(n,e)}function h5(n,e){return h5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},h5(n,e)}function GI(n,e,t){return e=XV(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function XV(n){var e=vhe(n,"string");return Cg(e)=="symbol"?e:String(e)}function vhe(n,e){if(Cg(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Cg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function yhe(n){return n.dataKey}function xhe(n,e){return Ve.isValidElement(n)?Ve.cloneElement(n,e):typeof n=="function"?Ve.createElement(n,e):Ve.createElement(Xde,e)}var cf=(function(n){ghe(e,n);function e(){return che(this,e),hhe(this,e,arguments)}return dhe(e,[{key:"render",value:function(){var r=this,i=this.props,o=i.active,a=i.allowEscapeViewBox,s=i.animationDuration,l=i.animationEasing,u=i.content,c=i.coordinate,f=i.filterNull,h=i.isAnimationActive,p=i.offset,v=i.payload,S=i.payloadUniqBy,y=i.position,_=i.reverseDirection,w=i.useTranslate3d,A=i.viewBox,E=i.wrapperStyle,P=v??[];f&&P.length&&(P=FV(v.filter(function(L){return L.value!=null&&(L.hide!==!0||r.props.includeHidden)}),S,yhe));var O=P.length>0;return Ve.createElement(lhe,{allowEscapeViewBox:a,animationDuration:s,animationEasing:l,isAnimationActive:h,active:o,coordinate:c,hasPayload:O,offset:p,position:y,reverseDirection:_,useTranslate3d:w,viewBox:A,wrapperStyle:E},xhe(u,GF(GF({},this.props),{},{payload:P})))}}]),e})(Me.PureComponent);GI(cf,"displayName","Tooltip");GI(cf,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Eh.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var nM,qF;function _he(){if(qF)return nM;qF=1;var n=If(),e=function(){return n.Date.now()};return nM=e,nM}var rM,WF;function She(){if(WF)return rM;WF=1;var n=/\s/;function e(t){for(var r=t.length;r--&&n.test(t.charAt(r)););return r}return rM=e,rM}var iM,jF;function whe(){if(jF)return iM;jF=1;var n=She(),e=/^\s+/;function t(r){return r&&r.slice(0,n(r)+1).replace(e,"")}return iM=t,iM}var oM,$F;function YV(){if($F)return oM;$F=1;var n=whe(),e=bh(),t=Jg(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt;function l(u){if(typeof u=="number")return u;if(t(u))return r;if(e(u)){var c=typeof u.valueOf=="function"?u.valueOf():u;u=e(c)?c+"":c}if(typeof u!="string")return u===0?u:+u;u=n(u);var f=o.test(u);return f||a.test(u)?s(u.slice(2),f?2:8):i.test(u)?r:+u}return oM=l,oM}var aM,XF;function bhe(){if(XF)return aM;XF=1;var n=bh(),e=_he(),t=YV(),r="Expected a function",i=Math.max,o=Math.min;function a(s,l,u){var c,f,h,p,v,S,y=0,_=!1,w=!1,A=!0;if(typeof s!="function")throw new TypeError(r);l=t(l)||0,n(u)&&(_=!!u.leading,w="maxWait"in u,h=w?i(t(u.maxWait)||0,l):h,A="trailing"in u?!!u.trailing:A);function E(W){var j=c,se=f;return c=f=void 0,y=W,p=s.apply(se,j),p}function P(W){return y=W,v=setTimeout(D,l),_?E(W):p}function O(W){var j=W-S,se=W-y,Y=l-j;return w?o(Y,h-se):Y}function L(W){var j=W-S,se=W-y;return S===void 0||j>=l||j<0||w&&se>=h}function D(){var W=e();if(L(W))return F(W);v=setTimeout(D,O(W))}function F(W){return v=void 0,A&&c?E(W):(c=f=void 0,p)}function U(){v!==void 0&&clearTimeout(v),y=0,c=S=f=v=void 0}function k(){return v===void 0?p:F(e())}function z(){var W=e(),j=L(W);if(c=arguments,f=this,S=W,j){if(v===void 0)return P(S);if(w)return clearTimeout(v),v=setTimeout(D,l),E(S)}return v===void 0&&(v=setTimeout(D,l)),p}return z.cancel=U,z.flush=k,z}return aM=a,aM}var sM,YF;function Ahe(){if(YF)return sM;YF=1;var n=bhe(),e=bh(),t="Expected a function";function r(i,o,a){var s=!0,l=!0;if(typeof i!="function")throw new TypeError(t);return e(a)&&(s="leading"in a?!!a.leading:s,l="trailing"in a?!!a.trailing:l),n(i,o,{leading:s,maxWait:o,trailing:l})}return sM=r,sM}var Ehe=Ahe();const KV=gi(Ehe);function ty(n){"@babel/helpers - typeof";return ty=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ty(n)}function KF(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function zx(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?KF(Object(t),!0).forEach(function(r){The(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):KF(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function The(n,e,t){return e=Mhe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Mhe(n){var e=Che(n,"string");return ty(e)=="symbol"?e:String(e)}function Che(n,e){if(ty(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(ty(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Phe(n,e){return Lhe(n)||Nhe(n,e)||Rhe(n,e)||Ihe()}function Ihe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rhe(n,e){if(n){if(typeof n=="string")return JF(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return JF(n,e)}}function JF(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Nhe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(t=t.call(n)).next,e!==0)for(;!(l=(r=o.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function Lhe(n){if(Array.isArray(n))return n}var Ohe=Me.forwardRef(function(n,e){var t=n.aspect,r=n.initialDimension,i=r===void 0?{width:-1,height:-1}:r,o=n.width,a=o===void 0?"100%":o,s=n.height,l=s===void 0?"100%":s,u=n.minWidth,c=u===void 0?0:u,f=n.minHeight,h=n.maxHeight,p=n.children,v=n.debounce,S=v===void 0?0:v,y=n.id,_=n.className,w=n.onResize,A=n.style,E=A===void 0?{}:A,P=Me.useRef(null),O=Me.useRef();O.current=w,Me.useImperativeHandle(e,function(){return Object.defineProperty(P.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),P.current},configurable:!0})});var L=Me.useState({containerWidth:i.width,containerHeight:i.height}),D=Phe(L,2),F=D[0],U=D[1],k=Me.useCallback(function(W,j){U(function(se){var Y=Math.round(W),Q=Math.round(j);return se.containerWidth===Y&&se.containerHeight===Q?se:{containerWidth:Y,containerHeight:Q}})},[]);Me.useEffect(function(){var W=function(Z){var oe,ee=Z[0].contentRect,G=ee.width,ne=ee.height;k(G,ne),(oe=O.current)===null||oe===void 0||oe.call(O,G,ne)};S>0&&(W=KV(W,S,{trailing:!0,leading:!1}));var j=new ResizeObserver(W),se=P.current.getBoundingClientRect(),Y=se.width,Q=se.height;return k(Y,Q),j.observe(P.current),function(){j.disconnect()}},[k,S]);var z=Me.useMemo(function(){var W=F.containerWidth,j=F.containerHeight;if(W<0||j<0)return null;od(xp(a)||xp(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,l),od(!t||t>0,"The aspect(%s) must be greater than zero.",t);var se=xp(a)?W:a,Y=xp(l)?j:l;t&&t>0&&(se?Y=se/t:Y&&(se=Y*t),h&&Y>h&&(Y=h)),od(se>0||Y>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,se,Y,a,l,c,f,t);var Q=!Array.isArray(p)&&XC.isElement(p)&&id(p.type).endsWith("Chart");return Ve.Children.map(p,function(X){return XC.isElement(X)?Me.cloneElement(X,zx({width:se,height:Y},Q?{style:zx({height:"100%",width:"100%",maxHeight:Y,maxWidth:se},X.props.style)}:{})):X})},[t,p,l,h,f,c,F,a]);return Ve.createElement("div",{id:y?"".concat(y):void 0,className:qr("recharts-responsive-container",_),style:zx(zx({},E),{},{width:a,height:l,minWidth:c,minHeight:f,maxHeight:h}),ref:P},z)}),qI=function(e){return null};qI.displayName="Cell";function ny(n){"@babel/helpers - typeof";return ny=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ny(n)}function ZF(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function p5(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ZF(Object(t),!0).forEach(function(r){Dhe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ZF(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Dhe(n,e,t){return e=khe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function khe(n){var e=Fhe(n,"string");return ny(e)=="symbol"?e:String(e)}function Fhe(n,e){if(ny(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(ny(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Hm={widthCache:{},cacheCount:0},Uhe=2e3,Bhe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},QF="recharts_measurement_span";function zhe(n){var e=p5({},n);return Object.keys(e).forEach(function(t){e[t]||delete e[t]}),e}var _0=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Eh.isSsr)return{width:0,height:0};var r=zhe(t),i=JSON.stringify({text:e,copyStyle:r});if(Hm.widthCache[i])return Hm.widthCache[i];try{var o=document.getElementById(QF);o||(o=document.createElement("span"),o.setAttribute("id",QF),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var a=p5(p5({},Bhe),r);Object.assign(o.style,a),o.textContent="".concat(e);var s=o.getBoundingClientRect(),l={width:s.width,height:s.height};return Hm.widthCache[i]=l,++Hm.cacheCount>Uhe&&(Hm.cacheCount=0,Hm.widthCache={}),l}catch{return{width:0,height:0}}},Hhe=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function ry(n){"@babel/helpers - typeof";return ry=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ry(n)}function sS(n,e){return Whe(n)||qhe(n,e)||Ghe(n,e)||Vhe()}function Vhe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ghe(n,e){if(n){if(typeof n=="string")return eU(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return eU(n,e)}}function eU(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function qhe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=o.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function Whe(n){if(Array.isArray(n))return n}function jhe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function tU(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Xhe(r.key),r)}}function $he(n,e,t){return e&&tU(n.prototype,e),t&&tU(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Xhe(n){var e=Yhe(n,"string");return ry(e)=="symbol"?e:String(e)}function Yhe(n,e){if(ry(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(ry(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var nU=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,rU=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Khe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Jhe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,JV={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Zhe=Object.keys(JV),ig="NaN";function Qhe(n,e){return n*JV[e]}var Hx=(function(){function n(e,t){jhe(this,n),this.num=e,this.unit=t,this.num=e,this.unit=t,Number.isNaN(e)&&(this.unit=""),t!==""&&!Khe.test(t)&&(this.num=NaN,this.unit=""),Zhe.includes(t)&&(this.num=Qhe(e,t),this.unit="px")}return $he(n,[{key:"add",value:function(t){return this.unit!==t.unit?new n(NaN,""):new n(this.num+t.num,this.unit)}},{key:"subtract",value:function(t){return this.unit!==t.unit?new n(NaN,""):new n(this.num-t.num,this.unit)}},{key:"multiply",value:function(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new n(NaN,""):new n(this.num*t.num,this.unit||t.unit)}},{key:"divide",value:function(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new n(NaN,""):new n(this.num/t.num,this.unit||t.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(t){var r,i=(r=Jhe.exec(t))!==null&&r!==void 0?r:[],o=sS(i,3),a=o[1],s=o[2];return new n(parseFloat(a),s??"")}}]),n})();function ZV(n){if(n.includes(ig))return ig;for(var e=n;e.includes("*")||e.includes("/");){var t,r=(t=nU.exec(e))!==null&&t!==void 0?t:[],i=sS(r,4),o=i[1],a=i[2],s=i[3],l=Hx.parse(o??""),u=Hx.parse(s??""),c=a==="*"?l.multiply(u):l.divide(u);if(c.isNaN())return ig;e=e.replace(nU,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,h=(f=rU.exec(e))!==null&&f!==void 0?f:[],p=sS(h,4),v=p[1],S=p[2],y=p[3],_=Hx.parse(v??""),w=Hx.parse(y??""),A=S==="+"?_.add(w):_.subtract(w);if(A.isNaN())return ig;e=e.replace(rU,A.toString())}return e}var iU=/\(([^()]*)\)/;function epe(n){for(var e=n;e.includes("(");){var t=iU.exec(e),r=sS(t,2),i=r[1];e=e.replace(iU,ZV(i))}return e}function tpe(n){var e=n.replace(/\s+/g,"");return e=epe(e),e=ZV(e),e}function npe(n){try{return tpe(n)}catch{return ig}}function lM(n){var e=npe(n.slice(5,-1));return e===ig?"":e}var rpe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],ipe=["dx","dy","angle","className","breakAll"];function m5(){return m5=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},m5.apply(this,arguments)}function oU(n,e){if(n==null)return{};var t=ope(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function ope(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function aU(n,e){return upe(n)||lpe(n,e)||spe(n,e)||ape()}function ape(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function spe(n,e){if(n){if(typeof n=="string")return sU(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return sU(n,e)}}function sU(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function lpe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=o.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function upe(n){if(Array.isArray(n))return n}var QV=/[ \f\n\r\t\v\u2028\u2029]+/,eG=function(e){var t=e.children,r=e.breakAll,i=e.style;try{var o=[];mr(t)||(r?o=t.toString().split(""):o=t.toString().split(QV));var a=o.map(function(l){return{word:l,width:_0(l,i).width}}),s=r?0:_0("",i).width;return{wordsWithComputedWidth:a,spaceWidth:s}}catch{return null}},cpe=function(e,t,r,i,o){var a=e.maxLines,s=e.children,l=e.style,u=e.breakAll,c=an(a),f=s,h=function(){var se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return se.reduce(function(Y,Q){var X=Q.word,Z=Q.width,oe=Y[Y.length-1];if(oe&&(i==null||o||oe.width+Z+r<Number(i)))oe.words.push(X),oe.width+=Z+r;else{var ee={words:[X],width:Z};Y.push(ee)}return Y},[])},p=h(t),v=function(se){return se.reduce(function(Y,Q){return Y.width>Q.width?Y:Q})};if(!c)return p;for(var S="",y=function(se){var Y=f.slice(0,se),Q=eG({breakAll:u,style:l,children:Y+S}).wordsWithComputedWidth,X=h(Q),Z=X.length>a||v(X).width>Number(i);return[Z,X]},_=0,w=f.length-1,A=0,E;_<=w&&A<=f.length-1;){var P=Math.floor((_+w)/2),O=P-1,L=y(O),D=aU(L,2),F=D[0],U=D[1],k=y(P),z=aU(k,1),W=z[0];if(!F&&!W&&(_=P+1),F&&W&&(w=P-1),!F&&W){E=U;break}A++}return E||p},lU=function(e){var t=mr(e)?[]:e.toString().split(QV);return[{words:t}]},fpe=function(e){var t=e.width,r=e.scaleToFit,i=e.children,o=e.style,a=e.breakAll,s=e.maxLines;if((t||r)&&!Eh.isSsr){var l,u,c=eG({breakAll:a,children:i,style:o});if(c){var f=c.wordsWithComputedWidth,h=c.spaceWidth;l=f,u=h}else return lU(i);return cpe({breakAll:a,children:i,maxLines:s,style:o},l,u,t,r)}return lU(i)},uU="#808080",lS=function(e){var t=e.x,r=t===void 0?0:t,i=e.y,o=i===void 0?0:i,a=e.lineHeight,s=a===void 0?"1em":a,l=e.capHeight,u=l===void 0?"0.71em":l,c=e.scaleToFit,f=c===void 0?!1:c,h=e.textAnchor,p=h===void 0?"start":h,v=e.verticalAnchor,S=v===void 0?"end":v,y=e.fill,_=y===void 0?uU:y,w=oU(e,rpe),A=Me.useMemo(function(){return fpe({breakAll:w.breakAll,children:w.children,maxLines:w.maxLines,scaleToFit:f,style:w.style,width:w.width})},[w.breakAll,w.children,w.maxLines,f,w.style,w.width]),E=w.dx,P=w.dy,O=w.angle,L=w.className,D=w.breakAll,F=oU(w,ipe);if(!Oa(r)||!Oa(o))return null;var U=r+(an(E)?E:0),k=o+(an(P)?P:0),z;switch(S){case"start":z=lM("calc(".concat(u,")"));break;case"middle":z=lM("calc(".concat((A.length-1)/2," * -").concat(s," + (").concat(u," / 2))"));break;default:z=lM("calc(".concat(A.length-1," * -").concat(s,")"));break}var W=[];if(f){var j=A[0].width,se=w.width;W.push("scale(".concat((an(se)?se/j:1)/j,")"))}return O&&W.push("rotate(".concat(O,", ").concat(U,", ").concat(k,")")),W.length&&(F.transform=W.join(" ")),Ve.createElement("text",m5({},pr(F,!0),{x:U,y:k,className:qr("recharts-text",L),textAnchor:p,fill:_.includes("url")?uU:_}),A.map(function(Y,Q){var X=Y.words.join(D?"":" ");return Ve.createElement("tspan",{x:U,dy:Q===0?z:s,key:X},X)}))};function dh(n,e){return n==null||e==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function dpe(n,e){return n==null||e==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function WI(n){let e,t,r;n.length!==2?(e=dh,t=(s,l)=>dh(n(s),l),r=(s,l)=>n(s)-l):(e=n===dh||n===dpe?n:hpe,t=n,r=n);function i(s,l,u=0,c=s.length){if(u<c){if(e(l,l)!==0)return c;do{const f=u+c>>>1;t(s[f],l)<0?u=f+1:c=f}while(u<c)}return u}function o(s,l,u=0,c=s.length){if(u<c){if(e(l,l)!==0)return c;do{const f=u+c>>>1;t(s[f],l)<=0?u=f+1:c=f}while(u<c)}return u}function a(s,l,u=0,c=s.length){const f=i(s,l,u,c-1);return f>u&&r(s[f-1],l)>-r(s[f],l)?f-1:f}return{left:i,center:a,right:o}}function hpe(){return 0}function tG(n){return n===null?NaN:+n}function*ppe(n,e){for(let t of n)t!=null&&(t=+t)>=t&&(yield t)}const mpe=WI(dh),e1=mpe.right;WI(tG).center;class cU extends Map{constructor(e,t=ype){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(fU(this,e))}has(e){return super.has(fU(this,e))}set(e,t){return super.set(gpe(this,e),t)}delete(e){return super.delete(vpe(this,e))}}function fU({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):t}function gpe({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):(n.set(r,t),t)}function vpe({_intern:n,_key:e},t){const r=e(t);return n.has(r)&&(t=n.get(r),n.delete(r)),t}function ype(n){return n!==null&&typeof n=="object"?n.valueOf():n}function xpe(n=dh){if(n===dh)return nG;if(typeof n!="function")throw new TypeError("compare is not a function");return(e,t)=>{const r=n(e,t);return r||r===0?r:(n(t,t)===0)-(n(e,e)===0)}}function nG(n,e){return(n==null||!(n>=n))-(e==null||!(e>=e))||(n<e?-1:n>e?1:0)}const _pe=Math.sqrt(50),Spe=Math.sqrt(10),wpe=Math.sqrt(2);function uS(n,e,t){const r=(e-n)/Math.max(0,t),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=_pe?10:o>=Spe?5:o>=wpe?2:1;let s,l,u;return i<0?(u=Math.pow(10,-i)/a,s=Math.round(n*u),l=Math.round(e*u),s/u<n&&++s,l/u>e&&--l,u=-u):(u=Math.pow(10,i)*a,s=Math.round(n/u),l=Math.round(e/u),s*u<n&&++s,l*u>e&&--l),l<s&&.5<=t&&t<2?uS(n,e,t*2):[s,l,u]}function g5(n,e,t){if(e=+e,n=+n,t=+t,!(t>0))return[];if(n===e)return[n];const r=e<n,[i,o,a]=r?uS(e,n,t):uS(n,e,t);if(!(o>=i))return[];const s=o-i+1,l=new Array(s);if(r)if(a<0)for(let u=0;u<s;++u)l[u]=(o-u)/-a;else for(let u=0;u<s;++u)l[u]=(o-u)*a;else if(a<0)for(let u=0;u<s;++u)l[u]=(i+u)/-a;else for(let u=0;u<s;++u)l[u]=(i+u)*a;return l}function v5(n,e,t){return e=+e,n=+n,t=+t,uS(n,e,t)[2]}function y5(n,e,t){e=+e,n=+n,t=+t;const r=e<n,i=r?v5(e,n,t):v5(n,e,t);return(r?-1:1)*(i<0?1/-i:i)}function dU(n,e){let t;for(const r of n)r!=null&&(t<r||t===void 0&&r>=r)&&(t=r);return t}function hU(n,e){let t;for(const r of n)r!=null&&(t>r||t===void 0&&r>=r)&&(t=r);return t}function rG(n,e,t=0,r=1/0,i){if(e=Math.floor(e),t=Math.floor(Math.max(0,t)),r=Math.floor(Math.min(n.length-1,r)),!(t<=e&&e<=r))return n;for(i=i===void 0?nG:xpe(i);r>t;){if(r-t>600){const l=r-t+1,u=e-t+1,c=Math.log(l),f=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*f*(l-f)/l)*(u-l/2<0?-1:1),p=Math.max(t,Math.floor(e-u*f/l+h)),v=Math.min(r,Math.floor(e+(l-u)*f/l+h));rG(n,e,p,v,i)}const o=n[e];let a=t,s=r;for(Bv(n,t,e),i(n[r],o)>0&&Bv(n,t,r);a<s;){for(Bv(n,a,s),++a,--s;i(n[a],o)<0;)++a;for(;i(n[s],o)>0;)--s}i(n[t],o)===0?Bv(n,t,s):(++s,Bv(n,s,r)),s<=e&&(t=s+1),e<=s&&(r=s-1)}return n}function Bv(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function bpe(n,e,t){if(n=Float64Array.from(ppe(n)),!(!(r=n.length)||isNaN(e=+e))){if(e<=0||r<2)return hU(n);if(e>=1)return dU(n);var r,i=(r-1)*e,o=Math.floor(i),a=dU(rG(n,o).subarray(0,o+1)),s=hU(n.subarray(o+1));return a+(s-a)*(i-o)}}function Ape(n,e,t=tG){if(!(!(r=n.length)||isNaN(e=+e))){if(e<=0||r<2)return+t(n[0],0,n);if(e>=1)return+t(n[r-1],r-1,n);var r,i=(r-1)*e,o=Math.floor(i),a=+t(n[o],o,n),s=+t(n[o+1],o+1,n);return a+(s-a)*(i-o)}}function Epe(n,e,t){n=+n,e=+e,t=(i=arguments.length)<2?(e=n,n=0,1):i<3?1:+t;for(var r=-1,i=Math.max(0,Math.ceil((e-n)/t))|0,o=new Array(i);++r<i;)o[r]=n+r*t;return o}function qu(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}function vd(n,e){switch(arguments.length){case 0:break;case 1:{typeof n=="function"?this.interpolator(n):this.range(n);break}default:{this.domain(n),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const x5=Symbol("implicit");function jI(){var n=new cU,e=[],t=[],r=x5;function i(o){let a=n.get(o);if(a===void 0){if(r!==x5)return r;n.set(o,a=e.push(o)-1)}return t[a%t.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],n=new cU;for(const a of o)n.has(a)||n.set(a,e.push(a)-1);return i},i.range=function(o){return arguments.length?(t=Array.from(o),i):t.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return jI(e,t).unknown(r)},qu.apply(i,arguments),i}function iy(){var n=jI().unknown(void 0),e=n.domain,t=n.range,r=0,i=1,o,a,s=!1,l=0,u=0,c=.5;delete n.unknown;function f(){var h=e().length,p=i<r,v=p?i:r,S=p?r:i;o=(S-v)/Math.max(1,h-l+u*2),s&&(o=Math.floor(o)),v+=(S-v-o*(h-l))*c,a=o*(1-l),s&&(v=Math.round(v),a=Math.round(a));var y=Epe(h).map(function(_){return v+o*_});return t(p?y.reverse():y)}return n.domain=function(h){return arguments.length?(e(h),f()):e()},n.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,f()):[r,i]},n.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,s=!0,f()},n.bandwidth=function(){return a},n.step=function(){return o},n.round=function(h){return arguments.length?(s=!!h,f()):s},n.padding=function(h){return arguments.length?(l=Math.min(1,u=+h),f()):l},n.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),f()):l},n.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},n.align=function(h){return arguments.length?(c=Math.max(0,Math.min(1,h)),f()):c},n.copy=function(){return iy(e(),[r,i]).round(s).paddingInner(l).paddingOuter(u).align(c)},qu.apply(f(),arguments)}function iG(n){var e=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return iG(e())},n}function S0(){return iG(iy.apply(null,arguments).paddingInner(1))}function $I(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function oG(n,e){var t=Object.create(n.prototype);for(var r in e)t[r]=e[r];return t}function t1(){}var oy=.7,cS=1/oy,dg="\\s*([+-]?\\d+)\\s*",ay="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",_f="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Tpe=/^#([0-9a-f]{3,8})$/,Mpe=new RegExp(`^rgb\\(${dg},${dg},${dg}\\)$`),Cpe=new RegExp(`^rgb\\(${_f},${_f},${_f}\\)$`),Ppe=new RegExp(`^rgba\\(${dg},${dg},${dg},${ay}\\)$`),Ipe=new RegExp(`^rgba\\(${_f},${_f},${_f},${ay}\\)$`),Rpe=new RegExp(`^hsl\\(${ay},${_f},${_f}\\)$`),Npe=new RegExp(`^hsla\\(${ay},${_f},${_f},${ay}\\)$`),pU={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};$I(t1,sy,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:mU,formatHex:mU,formatHex8:Lpe,formatHsl:Ope,formatRgb:gU,toString:gU});function mU(){return this.rgb().formatHex()}function Lpe(){return this.rgb().formatHex8()}function Ope(){return aG(this).formatHsl()}function gU(){return this.rgb().formatRgb()}function sy(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=Tpe.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?vU(e):t===3?new Dl(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Vx(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Vx(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Mpe.exec(n))?new Dl(e[1],e[2],e[3],1):(e=Cpe.exec(n))?new Dl(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Ppe.exec(n))?Vx(e[1],e[2],e[3],e[4]):(e=Ipe.exec(n))?Vx(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Rpe.exec(n))?_U(e[1],e[2]/100,e[3]/100,1):(e=Npe.exec(n))?_U(e[1],e[2]/100,e[3]/100,e[4]):pU.hasOwnProperty(n)?vU(pU[n]):n==="transparent"?new Dl(NaN,NaN,NaN,0):null}function vU(n){return new Dl(n>>16&255,n>>8&255,n&255,1)}function Vx(n,e,t,r){return r<=0&&(n=e=t=NaN),new Dl(n,e,t,r)}function Dpe(n){return n instanceof t1||(n=sy(n)),n?(n=n.rgb(),new Dl(n.r,n.g,n.b,n.opacity)):new Dl}function _5(n,e,t,r){return arguments.length===1?Dpe(n):new Dl(n,e,t,r??1)}function Dl(n,e,t,r){this.r=+n,this.g=+e,this.b=+t,this.opacity=+r}$I(Dl,_5,oG(t1,{brighter(n){return n=n==null?cS:Math.pow(cS,n),new Dl(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?oy:Math.pow(oy,n),new Dl(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Dl(Lp(this.r),Lp(this.g),Lp(this.b),fS(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:yU,formatHex:yU,formatHex8:kpe,formatRgb:xU,toString:xU}));function yU(){return`#${_p(this.r)}${_p(this.g)}${_p(this.b)}`}function kpe(){return`#${_p(this.r)}${_p(this.g)}${_p(this.b)}${_p((isNaN(this.opacity)?1:this.opacity)*255)}`}function xU(){const n=fS(this.opacity);return`${n===1?"rgb(":"rgba("}${Lp(this.r)}, ${Lp(this.g)}, ${Lp(this.b)}${n===1?")":`, ${n})`}`}function fS(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Lp(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function _p(n){return n=Lp(n),(n<16?"0":"")+n.toString(16)}function _U(n,e,t,r){return r<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new Pc(n,e,t,r)}function aG(n){if(n instanceof Pc)return new Pc(n.h,n.s,n.l,n.opacity);if(n instanceof t1||(n=sy(n)),!n)return new Pc;if(n instanceof Pc)return n;n=n.rgb();var e=n.r/255,t=n.g/255,r=n.b/255,i=Math.min(e,t,r),o=Math.max(e,t,r),a=NaN,s=o-i,l=(o+i)/2;return s?(e===o?a=(t-r)/s+(t<r)*6:t===o?a=(r-e)/s+2:a=(e-t)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new Pc(a,s,l,n.opacity)}function Fpe(n,e,t,r){return arguments.length===1?aG(n):new Pc(n,e,t,r??1)}function Pc(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}$I(Pc,Fpe,oG(t1,{brighter(n){return n=n==null?cS:Math.pow(cS,n),new Pc(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?oy:Math.pow(oy,n),new Pc(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,i=2*t-r;return new Dl(uM(n>=240?n-240:n+120,i,r),uM(n,i,r),uM(n<120?n+240:n-120,i,r),this.opacity)},clamp(){return new Pc(SU(this.h),Gx(this.s),Gx(this.l),fS(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=fS(this.opacity);return`${n===1?"hsl(":"hsla("}${SU(this.h)}, ${Gx(this.s)*100}%, ${Gx(this.l)*100}%${n===1?")":`, ${n})`}`}}));function SU(n){return n=(n||0)%360,n<0?n+360:n}function Gx(n){return Math.max(0,Math.min(1,n||0))}function uM(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const XI=n=>()=>n;function Upe(n,e){return function(t){return n+t*e}}function Bpe(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(r){return Math.pow(n+r*e,t)}}function zpe(n){return(n=+n)==1?sG:function(e,t){return t-e?Bpe(e,t,n):XI(isNaN(e)?t:e)}}function sG(n,e){var t=e-n;return t?Upe(n,t):XI(isNaN(n)?e:n)}const wU=(function n(e){var t=zpe(e);function r(i,o){var a=t((i=_5(i)).r,(o=_5(o)).r),s=t(i.g,o.g),l=t(i.b,o.b),u=sG(i.opacity,o.opacity);return function(c){return i.r=a(c),i.g=s(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=n,r})(1);function Hpe(n,e){e||(e=[]);var t=n?Math.min(e.length,n.length):0,r=e.slice(),i;return function(o){for(i=0;i<t;++i)r[i]=n[i]*(1-o)+e[i]*o;return r}}function Vpe(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Gpe(n,e){var t=e?e.length:0,r=n?Math.min(t,n.length):0,i=new Array(r),o=new Array(t),a;for(a=0;a<r;++a)i[a]=tv(n[a],e[a]);for(;a<t;++a)o[a]=e[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function qpe(n,e){var t=new Date;return n=+n,e=+e,function(r){return t.setTime(n*(1-r)+e*r),t}}function dS(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}function Wpe(n,e){var t={},r={},i;(n===null||typeof n!="object")&&(n={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in n?t[i]=tv(n[i],e[i]):r[i]=e[i];return function(o){for(i in t)r[i]=t[i](o);return r}}var S5=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,cM=new RegExp(S5.source,"g");function jpe(n){return function(){return n}}function $pe(n){return function(e){return n(e)+""}}function Xpe(n,e){var t=S5.lastIndex=cM.lastIndex=0,r,i,o,a=-1,s=[],l=[];for(n=n+"",e=e+"";(r=S5.exec(n))&&(i=cM.exec(e));)(o=i.index)>t&&(o=e.slice(t,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:dS(r,i)})),t=cM.lastIndex;return t<e.length&&(o=e.slice(t),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?$pe(l[0].x):jpe(e):(e=l.length,function(u){for(var c=0,f;c<e;++c)s[(f=l[c]).i]=f.x(u);return s.join("")})}function tv(n,e){var t=typeof e,r;return e==null||t==="boolean"?XI(e):(t==="number"?dS:t==="string"?(r=sy(e))?(e=r,wU):Xpe:e instanceof sy?wU:e instanceof Date?qpe:Vpe(e)?Hpe:Array.isArray(e)?Gpe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Wpe:dS)(n,e)}function YI(n,e){return n=+n,e=+e,function(t){return Math.round(n*(1-t)+e*t)}}function Ype(n,e){e===void 0&&(e=n,n=tv);for(var t=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);t<r;)o[t]=n(i,i=e[++t]);return function(a){var s=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return o[s](a-s)}}function Kpe(n){return function(){return n}}function hS(n){return+n}var bU=[0,1];function tl(n){return n}function w5(n,e){return(e-=n=+n)?function(t){return(t-n)/e}:Kpe(isNaN(e)?NaN:.5)}function Jpe(n,e){var t;return n>e&&(t=n,n=e,e=t),function(r){return Math.max(n,Math.min(e,r))}}function Zpe(n,e,t){var r=n[0],i=n[1],o=e[0],a=e[1];return i<r?(r=w5(i,r),o=t(a,o)):(r=w5(r,i),o=t(o,a)),function(s){return o(r(s))}}function Qpe(n,e,t){var r=Math.min(n.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=w5(n[a],n[a+1]),o[a]=t(e[a],e[a+1]);return function(s){var l=e1(n,s,1,r)-1;return o[l](i[l](s))}}function n1(n,e){return e.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function Ww(){var n=bU,e=bU,t=tv,r,i,o,a=tl,s,l,u;function c(){var h=Math.min(n.length,e.length);return a!==tl&&(a=Jpe(n[0],n[h-1])),s=h>2?Qpe:Zpe,l=u=null,f}function f(h){return h==null||isNaN(h=+h)?o:(l||(l=s(n.map(r),e,t)))(r(a(h)))}return f.invert=function(h){return a(i((u||(u=s(e,n.map(r),dS)))(h)))},f.domain=function(h){return arguments.length?(n=Array.from(h,hS),c()):n.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),c()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),t=YI,c()},f.clamp=function(h){return arguments.length?(a=h?!0:tl,c()):a!==tl},f.interpolate=function(h){return arguments.length?(t=h,c()):t},f.unknown=function(h){return arguments.length?(o=h,f):o},function(h,p){return r=h,i=p,c()}}function KI(){return Ww()(tl,tl)}function eme(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function pS(n,e){if((t=(n=e?n.toExponential(e-1):n.toExponential()).indexOf("e"))<0)return null;var t,r=n.slice(0,t);return[r.length>1?r[0]+r.slice(2):r,+n.slice(t+1)]}function Pg(n){return n=pS(Math.abs(n)),n?n[1]:NaN}function tme(n,e){return function(t,r){for(var i=t.length,o=[],a=0,s=n[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(t.substring(i-=s,i+s)),!((l+=s+1)>r));)s=n[a=(a+1)%n.length];return o.reverse().join(e)}}function nme(n){return function(e){return e.replace(/[0-9]/g,function(t){return n[+t]})}}var rme=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ly(n){if(!(e=rme.exec(n)))throw new Error("invalid format: "+n);var e;return new JI({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}ly.prototype=JI.prototype;function JI(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}JI.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ime(n){e:for(var e=n.length,t=1,r=-1,i;t<e;++t)switch(n[t]){case".":r=i=t;break;case"0":r===0&&(r=t),i=t;break;default:if(!+n[t])break e;r>0&&(r=0);break}return r>0?n.slice(0,r)+n.slice(i+1):n}var lG;function ome(n,e){var t=pS(n,e);if(!t)return n+"";var r=t[0],i=t[1],o=i-(lG=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+pS(n,Math.max(0,e+o-1))[0]}function AU(n,e){var t=pS(n,e);if(!t)return n+"";var r=t[0],i=t[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const EU={"%":(n,e)=>(n*100).toFixed(e),b:n=>Math.round(n).toString(2),c:n=>n+"",d:eme,e:(n,e)=>n.toExponential(e),f:(n,e)=>n.toFixed(e),g:(n,e)=>n.toPrecision(e),o:n=>Math.round(n).toString(8),p:(n,e)=>AU(n*100,e),r:AU,s:ome,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function TU(n){return n}var MU=Array.prototype.map,CU=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function ame(n){var e=n.grouping===void 0||n.thousands===void 0?TU:tme(MU.call(n.grouping,Number),n.thousands+""),t=n.currency===void 0?"":n.currency[0]+"",r=n.currency===void 0?"":n.currency[1]+"",i=n.decimal===void 0?".":n.decimal+"",o=n.numerals===void 0?TU:nme(MU.call(n.numerals,String)),a=n.percent===void 0?"%":n.percent+"",s=n.minus===void 0?"":n.minus+"",l=n.nan===void 0?"NaN":n.nan+"";function u(f){f=ly(f);var h=f.fill,p=f.align,v=f.sign,S=f.symbol,y=f.zero,_=f.width,w=f.comma,A=f.precision,E=f.trim,P=f.type;P==="n"?(w=!0,P="g"):EU[P]||(A===void 0&&(A=12),E=!0,P="g"),(y||h==="0"&&p==="=")&&(y=!0,h="0",p="=");var O=S==="$"?t:S==="#"&&/[boxX]/.test(P)?"0"+P.toLowerCase():"",L=S==="$"?r:/[%p]/.test(P)?a:"",D=EU[P],F=/[defgprs%]/.test(P);A=A===void 0?6:/[gprs]/.test(P)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function U(k){var z=O,W=L,j,se,Y;if(P==="c")W=D(k)+W,k="";else{k=+k;var Q=k<0||1/k<0;if(k=isNaN(k)?l:D(Math.abs(k),A),E&&(k=ime(k)),Q&&+k==0&&v!=="+"&&(Q=!1),z=(Q?v==="("?v:s:v==="-"||v==="("?"":v)+z,W=(P==="s"?CU[8+lG/3]:"")+W+(Q&&v==="("?")":""),F){for(j=-1,se=k.length;++j<se;)if(Y=k.charCodeAt(j),48>Y||Y>57){W=(Y===46?i+k.slice(j+1):k.slice(j))+W,k=k.slice(0,j);break}}}w&&!y&&(k=e(k,1/0));var X=z.length+k.length+W.length,Z=X<_?new Array(_-X+1).join(h):"";switch(w&&y&&(k=e(Z+k,Z.length?_-W.length:1/0),Z=""),p){case"<":k=z+k+W+Z;break;case"=":k=z+Z+k+W;break;case"^":k=Z.slice(0,X=Z.length>>1)+z+k+W+Z.slice(X);break;default:k=Z+z+k+W;break}return o(k)}return U.toString=function(){return f+""},U}function c(f,h){var p=u((f=ly(f),f.type="f",f)),v=Math.max(-8,Math.min(8,Math.floor(Pg(h)/3)))*3,S=Math.pow(10,-v),y=CU[8+v/3];return function(_){return p(S*_)+y}}return{format:u,formatPrefix:c}}var qx,ZI,uG;sme({thousands:",",grouping:[3],currency:["$",""]});function sme(n){return qx=ame(n),ZI=qx.format,uG=qx.formatPrefix,qx}function lme(n){return Math.max(0,-Pg(Math.abs(n)))}function ume(n,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Pg(e)/3)))*3-Pg(Math.abs(n)))}function cme(n,e){return n=Math.abs(n),e=Math.abs(e)-n,Math.max(0,Pg(e)-Pg(n))+1}function cG(n,e,t,r){var i=y5(n,e,t),o;switch(r=ly(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(n),Math.abs(e));return r.precision==null&&!isNaN(o=ume(i,a))&&(r.precision=o),uG(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=cme(i,Math.max(Math.abs(n),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=lme(i))&&(r.precision=o-(r.type==="%")*2);break}}return ZI(r)}function Th(n){var e=n.domain;return n.ticks=function(t){var r=e();return g5(r[0],r[r.length-1],t??10)},n.tickFormat=function(t,r){var i=e();return cG(i[0],i[i.length-1],t??10,r)},n.nice=function(t){t==null&&(t=10);var r=e(),i=0,o=r.length-1,a=r[i],s=r[o],l,u,c=10;for(s<a&&(u=a,a=s,s=u,u=i,i=o,o=u);c-- >0;){if(u=v5(a,s,t),u===l)return r[i]=a,r[o]=s,e(r);if(u>0)a=Math.floor(a/u)*u,s=Math.ceil(s/u)*u;else if(u<0)a=Math.ceil(a*u)/u,s=Math.floor(s*u)/u;else break;l=u}return n},n}function mS(){var n=KI();return n.copy=function(){return n1(n,mS())},qu.apply(n,arguments),Th(n)}function fG(n){var e;function t(r){return r==null||isNaN(r=+r)?e:r}return t.invert=t,t.domain=t.range=function(r){return arguments.length?(n=Array.from(r,hS),t):n.slice()},t.unknown=function(r){return arguments.length?(e=r,t):e},t.copy=function(){return fG(n).unknown(e)},n=arguments.length?Array.from(n,hS):[0,1],Th(t)}function dG(n,e){n=n.slice();var t=0,r=n.length-1,i=n[t],o=n[r],a;return o<i&&(a=t,t=r,r=a,a=i,i=o,o=a),n[t]=e.floor(i),n[r]=e.ceil(o),n}function PU(n){return Math.log(n)}function IU(n){return Math.exp(n)}function fme(n){return-Math.log(-n)}function dme(n){return-Math.exp(-n)}function hme(n){return isFinite(n)?+("1e"+n):n<0?0:n}function pme(n){return n===10?hme:n===Math.E?Math.exp:e=>Math.pow(n,e)}function mme(n){return n===Math.E?Math.log:n===10&&Math.log10||n===2&&Math.log2||(n=Math.log(n),e=>Math.log(e)/n)}function RU(n){return(e,t)=>-n(-e,t)}function QI(n){const e=n(PU,IU),t=e.domain;let r=10,i,o;function a(){return i=mme(r),o=pme(r),t()[0]<0?(i=RU(i),o=RU(o),n(fme,dme)):n(PU,IU),e}return e.base=function(s){return arguments.length?(r=+s,a()):r},e.domain=function(s){return arguments.length?(t(s),a()):t()},e.ticks=s=>{const l=t();let u=l[0],c=l[l.length-1];const f=c<u;f&&([u,c]=[c,u]);let h=i(u),p=i(c),v,S;const y=s==null?10:+s;let _=[];if(!(r%1)&&p-h<y){if(h=Math.floor(h),p=Math.ceil(p),u>0){for(;h<=p;++h)for(v=1;v<r;++v)if(S=h<0?v/o(-h):v*o(h),!(S<u)){if(S>c)break;_.push(S)}}else for(;h<=p;++h)for(v=r-1;v>=1;--v)if(S=h>0?v/o(-h):v*o(h),!(S<u)){if(S>c)break;_.push(S)}_.length*2<y&&(_=g5(u,c,y))}else _=g5(h,p,Math.min(p-h,y)).map(o);return f?_.reverse():_},e.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=ly(l)).precision==null&&(l.trim=!0),l=ZI(l)),s===1/0)return l;const u=Math.max(1,r*s/e.ticks().length);return c=>{let f=c/o(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=u?l(c):""}},e.nice=()=>t(dG(t(),{floor:s=>o(Math.floor(i(s))),ceil:s=>o(Math.ceil(i(s)))})),e}function hG(){const n=QI(Ww()).domain([1,10]);return n.copy=()=>n1(n,hG()).base(n.base()),qu.apply(n,arguments),n}function NU(n){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/n))}}function LU(n){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*n}}function eR(n){var e=1,t=n(NU(e),LU(e));return t.constant=function(r){return arguments.length?n(NU(e=+r),LU(e)):e},Th(t)}function pG(){var n=eR(Ww());return n.copy=function(){return n1(n,pG()).constant(n.constant())},qu.apply(n,arguments)}function OU(n){return function(e){return e<0?-Math.pow(-e,n):Math.pow(e,n)}}function gme(n){return n<0?-Math.sqrt(-n):Math.sqrt(n)}function vme(n){return n<0?-n*n:n*n}function tR(n){var e=n(tl,tl),t=1;function r(){return t===1?n(tl,tl):t===.5?n(gme,vme):n(OU(t),OU(1/t))}return e.exponent=function(i){return arguments.length?(t=+i,r()):t},Th(e)}function nR(){var n=tR(Ww());return n.copy=function(){return n1(n,nR()).exponent(n.exponent())},qu.apply(n,arguments),n}function yme(){return nR.apply(null,arguments).exponent(.5)}function DU(n){return Math.sign(n)*n*n}function xme(n){return Math.sign(n)*Math.sqrt(Math.abs(n))}function mG(){var n=KI(),e=[0,1],t=!1,r;function i(o){var a=xme(n(o));return isNaN(a)?r:t?Math.round(a):a}return i.invert=function(o){return n.invert(DU(o))},i.domain=function(o){return arguments.length?(n.domain(o),i):n.domain()},i.range=function(o){return arguments.length?(n.range((e=Array.from(o,hS)).map(DU)),i):e.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(t=!!o,i):t},i.clamp=function(o){return arguments.length?(n.clamp(o),i):n.clamp()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return mG(n.domain(),e).round(t).clamp(n.clamp()).unknown(r)},qu.apply(i,arguments),Th(i)}function gG(){var n=[],e=[],t=[],r;function i(){var a=0,s=Math.max(1,e.length);for(t=new Array(s-1);++a<s;)t[a-1]=Ape(n,a/s);return o}function o(a){return a==null||isNaN(a=+a)?r:e[e1(t,a)]}return o.invertExtent=function(a){var s=e.indexOf(a);return s<0?[NaN,NaN]:[s>0?t[s-1]:n[0],s<t.length?t[s]:n[n.length-1]]},o.domain=function(a){if(!arguments.length)return n.slice();n=[];for(let s of a)s!=null&&!isNaN(s=+s)&&n.push(s);return n.sort(dh),i()},o.range=function(a){return arguments.length?(e=Array.from(a),i()):e.slice()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.quantiles=function(){return t.slice()},o.copy=function(){return gG().domain(n).range(e).unknown(r)},qu.apply(o,arguments)}function vG(){var n=0,e=1,t=1,r=[.5],i=[0,1],o;function a(l){return l!=null&&l<=l?i[e1(r,l,0,t)]:o}function s(){var l=-1;for(r=new Array(t);++l<t;)r[l]=((l+1)*e-(l-t)*n)/(t+1);return a}return a.domain=function(l){return arguments.length?([n,e]=l,n=+n,e=+e,s()):[n,e]},a.range=function(l){return arguments.length?(t=(i=Array.from(l)).length-1,s()):i.slice()},a.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[n,r[0]]:u>=t?[r[t-1],e]:[r[u-1],r[u]]},a.unknown=function(l){return arguments.length&&(o=l),a},a.thresholds=function(){return r.slice()},a.copy=function(){return vG().domain([n,e]).range(i).unknown(o)},qu.apply(Th(a),arguments)}function yG(){var n=[.5],e=[0,1],t,r=1;function i(o){return o!=null&&o<=o?e[e1(n,o,0,r)]:t}return i.domain=function(o){return arguments.length?(n=Array.from(o),r=Math.min(n.length,e.length-1),i):n.slice()},i.range=function(o){return arguments.length?(e=Array.from(o),r=Math.min(n.length,e.length-1),i):e.slice()},i.invertExtent=function(o){var a=e.indexOf(o);return[n[a-1],n[a]]},i.unknown=function(o){return arguments.length?(t=o,i):t},i.copy=function(){return yG().domain(n).range(e).unknown(t)},qu.apply(i,arguments)}const fM=new Date,dM=new Date;function Ua(n,e,t,r){function i(o){return n(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(n(o=new Date(+o)),o),i.ceil=o=>(n(o=new Date(o-1)),e(o,1),n(o),o),i.round=o=>{const a=i(o),s=i.ceil(o);return o-a<s-o?a:s},i.offset=(o,a)=>(e(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,s)=>{const l=[];if(o=i.ceil(o),s=s==null?1:Math.floor(s),!(o<a)||!(s>0))return l;let u;do l.push(u=new Date(+o)),e(o,s),n(o);while(u<o&&o<a);return l},i.filter=o=>Ua(a=>{if(a>=a)for(;n(a),!o(a);)a.setTime(a-1)},(a,s)=>{if(a>=a)if(s<0)for(;++s<=0;)for(;e(a,-1),!o(a););else for(;--s>=0;)for(;e(a,1),!o(a););}),t&&(i.count=(o,a)=>(fM.setTime(+o),dM.setTime(+a),n(fM),n(dM),Math.floor(t(fM,dM))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?a=>r(a)%o===0:a=>i.count(0,a)%o===0):i)),i}const gS=Ua(()=>{},(n,e)=>{n.setTime(+n+e)},(n,e)=>e-n);gS.every=n=>(n=Math.floor(n),!isFinite(n)||!(n>0)?null:n>1?Ua(e=>{e.setTime(Math.floor(e/n)*n)},(e,t)=>{e.setTime(+e+t*n)},(e,t)=>(t-e)/n):gS);gS.range;const ed=1e3,Bu=ed*60,td=Bu*60,ud=td*24,rR=ud*7,kU=ud*30,hM=ud*365,Sp=Ua(n=>{n.setTime(n-n.getMilliseconds())},(n,e)=>{n.setTime(+n+e*ed)},(n,e)=>(e-n)/ed,n=>n.getUTCSeconds());Sp.range;const iR=Ua(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*ed)},(n,e)=>{n.setTime(+n+e*Bu)},(n,e)=>(e-n)/Bu,n=>n.getMinutes());iR.range;const oR=Ua(n=>{n.setUTCSeconds(0,0)},(n,e)=>{n.setTime(+n+e*Bu)},(n,e)=>(e-n)/Bu,n=>n.getUTCMinutes());oR.range;const aR=Ua(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*ed-n.getMinutes()*Bu)},(n,e)=>{n.setTime(+n+e*td)},(n,e)=>(e-n)/td,n=>n.getHours());aR.range;const sR=Ua(n=>{n.setUTCMinutes(0,0,0)},(n,e)=>{n.setTime(+n+e*td)},(n,e)=>(e-n)/td,n=>n.getUTCHours());sR.range;const r1=Ua(n=>n.setHours(0,0,0,0),(n,e)=>n.setDate(n.getDate()+e),(n,e)=>(e-n-(e.getTimezoneOffset()-n.getTimezoneOffset())*Bu)/ud,n=>n.getDate()-1);r1.range;const jw=Ua(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/ud,n=>n.getUTCDate()-1);jw.range;const xG=Ua(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/ud,n=>Math.floor(n/ud));xG.range;function tm(n){return Ua(e=>{e.setDate(e.getDate()-(e.getDay()+7-n)%7),e.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+t*7)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Bu)/rR)}const $w=tm(0),vS=tm(1),_me=tm(2),Sme=tm(3),Ig=tm(4),wme=tm(5),bme=tm(6);$w.range;vS.range;_me.range;Sme.range;Ig.range;wme.range;bme.range;function nm(n){return Ua(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-n)%7),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t*7)},(e,t)=>(t-e)/rR)}const Xw=nm(0),yS=nm(1),Ame=nm(2),Eme=nm(3),Rg=nm(4),Tme=nm(5),Mme=nm(6);Xw.range;yS.range;Ame.range;Eme.range;Rg.range;Tme.range;Mme.range;const lR=Ua(n=>{n.setDate(1),n.setHours(0,0,0,0)},(n,e)=>{n.setMonth(n.getMonth()+e)},(n,e)=>e.getMonth()-n.getMonth()+(e.getFullYear()-n.getFullYear())*12,n=>n.getMonth());lR.range;const uR=Ua(n=>{n.setUTCDate(1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCMonth(n.getUTCMonth()+e)},(n,e)=>e.getUTCMonth()-n.getUTCMonth()+(e.getUTCFullYear()-n.getUTCFullYear())*12,n=>n.getUTCMonth());uR.range;const cd=Ua(n=>{n.setMonth(0,1),n.setHours(0,0,0,0)},(n,e)=>{n.setFullYear(n.getFullYear()+e)},(n,e)=>e.getFullYear()-n.getFullYear(),n=>n.getFullYear());cd.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:Ua(e=>{e.setFullYear(Math.floor(e.getFullYear()/n)*n),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t*n)});cd.range;const fd=Ua(n=>{n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCFullYear(n.getUTCFullYear()+e)},(n,e)=>e.getUTCFullYear()-n.getUTCFullYear(),n=>n.getUTCFullYear());fd.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:Ua(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/n)*n),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t*n)});fd.range;function _G(n,e,t,r,i,o){const a=[[Sp,1,ed],[Sp,5,5*ed],[Sp,15,15*ed],[Sp,30,30*ed],[o,1,Bu],[o,5,5*Bu],[o,15,15*Bu],[o,30,30*Bu],[i,1,td],[i,3,3*td],[i,6,6*td],[i,12,12*td],[r,1,ud],[r,2,2*ud],[t,1,rR],[e,1,kU],[e,3,3*kU],[n,1,hM]];function s(u,c,f){const h=c<u;h&&([u,c]=[c,u]);const p=f&&typeof f.range=="function"?f:l(u,c,f),v=p?p.range(u,+c+1):[];return h?v.reverse():v}function l(u,c,f){const h=Math.abs(c-u)/f,p=WI(([,,y])=>y).right(a,h);if(p===a.length)return n.every(y5(u/hM,c/hM,f));if(p===0)return gS.every(Math.max(y5(u,c,f),1));const[v,S]=a[h/a[p-1][2]<a[p][2]/h?p-1:p];return v.every(S)}return[s,l]}const[Cme,Pme]=_G(fd,uR,Xw,xG,sR,oR),[Ime,Rme]=_G(cd,lR,$w,r1,aR,iR);function pM(n){if(0<=n.y&&n.y<100){var e=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return e.setFullYear(n.y),e}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function mM(n){if(0<=n.y&&n.y<100){var e=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return e.setUTCFullYear(n.y),e}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function zv(n,e,t){return{y:n,m:e,d:t,H:0,M:0,S:0,L:0}}function Nme(n){var e=n.dateTime,t=n.date,r=n.time,i=n.periods,o=n.days,a=n.shortDays,s=n.months,l=n.shortMonths,u=Hv(i),c=Vv(i),f=Hv(o),h=Vv(o),p=Hv(a),v=Vv(a),S=Hv(s),y=Vv(s),_=Hv(l),w=Vv(l),A={a:Q,A:X,b:Z,B:oe,c:null,d:VU,e:VU,f:tge,g:fge,G:hge,H:Zme,I:Qme,j:ege,L:SG,m:nge,M:rge,p:ee,q:G,Q:WU,s:jU,S:ige,u:oge,U:age,V:sge,w:lge,W:uge,x:null,X:null,y:cge,Y:dge,Z:pge,"%":qU},E={a:ne,A:te,b:de,B:me,c:null,d:GU,e:GU,f:yge,g:Cge,G:Ige,H:mge,I:gge,j:vge,L:bG,m:xge,M:_ge,p:be,q:Ie,Q:WU,s:jU,S:Sge,u:wge,U:bge,V:Age,w:Ege,W:Tge,x:null,X:null,y:Mge,Y:Pge,Z:Rge,"%":qU},P={a:U,A:k,b:z,B:W,c:j,d:zU,e:zU,f:Xme,g:BU,G:UU,H:HU,I:HU,j:qme,L:$me,m:Gme,M:Wme,p:F,q:Vme,Q:Kme,s:Jme,S:jme,u:Fme,U:Ume,V:Bme,w:kme,W:zme,x:se,X:Y,y:BU,Y:UU,Z:Hme,"%":Yme};A.x=O(t,A),A.X=O(r,A),A.c=O(e,A),E.x=O(t,E),E.X=O(r,E),E.c=O(e,E);function O(Ee,Xe){return function(tt){var Te=[],Je=-1,Se=0,Ge=Ee.length,ye,Ct,ft;for(tt instanceof Date||(tt=new Date(+tt));++Je<Ge;)Ee.charCodeAt(Je)===37&&(Te.push(Ee.slice(Se,Je)),(Ct=FU[ye=Ee.charAt(++Je)])!=null?ye=Ee.charAt(++Je):Ct=ye==="e"?" ":"0",(ft=Xe[ye])&&(ye=ft(tt,Ct)),Te.push(ye),Se=Je+1);return Te.push(Ee.slice(Se,Je)),Te.join("")}}function L(Ee,Xe){return function(tt){var Te=zv(1900,void 0,1),Je=D(Te,Ee,tt+="",0),Se,Ge;if(Je!=tt.length)return null;if("Q"in Te)return new Date(Te.Q);if("s"in Te)return new Date(Te.s*1e3+("L"in Te?Te.L:0));if(Xe&&!("Z"in Te)&&(Te.Z=0),"p"in Te&&(Te.H=Te.H%12+Te.p*12),Te.m===void 0&&(Te.m="q"in Te?Te.q:0),"V"in Te){if(Te.V<1||Te.V>53)return null;"w"in Te||(Te.w=1),"Z"in Te?(Se=mM(zv(Te.y,0,1)),Ge=Se.getUTCDay(),Se=Ge>4||Ge===0?yS.ceil(Se):yS(Se),Se=jw.offset(Se,(Te.V-1)*7),Te.y=Se.getUTCFullYear(),Te.m=Se.getUTCMonth(),Te.d=Se.getUTCDate()+(Te.w+6)%7):(Se=pM(zv(Te.y,0,1)),Ge=Se.getDay(),Se=Ge>4||Ge===0?vS.ceil(Se):vS(Se),Se=r1.offset(Se,(Te.V-1)*7),Te.y=Se.getFullYear(),Te.m=Se.getMonth(),Te.d=Se.getDate()+(Te.w+6)%7)}else("W"in Te||"U"in Te)&&("w"in Te||(Te.w="u"in Te?Te.u%7:"W"in Te?1:0),Ge="Z"in Te?mM(zv(Te.y,0,1)).getUTCDay():pM(zv(Te.y,0,1)).getDay(),Te.m=0,Te.d="W"in Te?(Te.w+6)%7+Te.W*7-(Ge+5)%7:Te.w+Te.U*7-(Ge+6)%7);return"Z"in Te?(Te.H+=Te.Z/100|0,Te.M+=Te.Z%100,mM(Te)):pM(Te)}}function D(Ee,Xe,tt,Te){for(var Je=0,Se=Xe.length,Ge=tt.length,ye,Ct;Je<Se;){if(Te>=Ge)return-1;if(ye=Xe.charCodeAt(Je++),ye===37){if(ye=Xe.charAt(Je++),Ct=P[ye in FU?Xe.charAt(Je++):ye],!Ct||(Te=Ct(Ee,tt,Te))<0)return-1}else if(ye!=tt.charCodeAt(Te++))return-1}return Te}function F(Ee,Xe,tt){var Te=u.exec(Xe.slice(tt));return Te?(Ee.p=c.get(Te[0].toLowerCase()),tt+Te[0].length):-1}function U(Ee,Xe,tt){var Te=p.exec(Xe.slice(tt));return Te?(Ee.w=v.get(Te[0].toLowerCase()),tt+Te[0].length):-1}function k(Ee,Xe,tt){var Te=f.exec(Xe.slice(tt));return Te?(Ee.w=h.get(Te[0].toLowerCase()),tt+Te[0].length):-1}function z(Ee,Xe,tt){var Te=_.exec(Xe.slice(tt));return Te?(Ee.m=w.get(Te[0].toLowerCase()),tt+Te[0].length):-1}function W(Ee,Xe,tt){var Te=S.exec(Xe.slice(tt));return Te?(Ee.m=y.get(Te[0].toLowerCase()),tt+Te[0].length):-1}function j(Ee,Xe,tt){return D(Ee,e,Xe,tt)}function se(Ee,Xe,tt){return D(Ee,t,Xe,tt)}function Y(Ee,Xe,tt){return D(Ee,r,Xe,tt)}function Q(Ee){return a[Ee.getDay()]}function X(Ee){return o[Ee.getDay()]}function Z(Ee){return l[Ee.getMonth()]}function oe(Ee){return s[Ee.getMonth()]}function ee(Ee){return i[+(Ee.getHours()>=12)]}function G(Ee){return 1+~~(Ee.getMonth()/3)}function ne(Ee){return a[Ee.getUTCDay()]}function te(Ee){return o[Ee.getUTCDay()]}function de(Ee){return l[Ee.getUTCMonth()]}function me(Ee){return s[Ee.getUTCMonth()]}function be(Ee){return i[+(Ee.getUTCHours()>=12)]}function Ie(Ee){return 1+~~(Ee.getUTCMonth()/3)}return{format:function(Ee){var Xe=O(Ee+="",A);return Xe.toString=function(){return Ee},Xe},parse:function(Ee){var Xe=L(Ee+="",!1);return Xe.toString=function(){return Ee},Xe},utcFormat:function(Ee){var Xe=O(Ee+="",E);return Xe.toString=function(){return Ee},Xe},utcParse:function(Ee){var Xe=L(Ee+="",!0);return Xe.toString=function(){return Ee},Xe}}}var FU={"-":"",_:" ",0:"0"},ts=/^\s*\d+/,Lme=/^%/,Ome=/[\\^$*+?|[\]().{}]/g;function ci(n,e,t){var r=n<0?"-":"",i=(r?-n:n)+"",o=i.length;return r+(o<t?new Array(t-o+1).join(e)+i:i)}function Dme(n){return n.replace(Ome,"\\$&")}function Hv(n){return new RegExp("^(?:"+n.map(Dme).join("|")+")","i")}function Vv(n){return new Map(n.map((e,t)=>[e.toLowerCase(),t]))}function kme(n,e,t){var r=ts.exec(e.slice(t,t+1));return r?(n.w=+r[0],t+r[0].length):-1}function Fme(n,e,t){var r=ts.exec(e.slice(t,t+1));return r?(n.u=+r[0],t+r[0].length):-1}function Ume(n,e,t){var r=ts.exec(e.slice(t,t+2));return r?(n.U=+r[0],t+r[0].length):-1}function Bme(n,e,t){var r=ts.exec(e.slice(t,t+2));return r?(n.V=+r[0],t+r[0].length):-1}function zme(n,e,t){var r=ts.exec(e.slice(t,t+2));return r?(n.W=+r[0],t+r[0].length):-1}function UU(n,e,t){var r=ts.exec(e.slice(t,t+4));return r?(n.y=+r[0],t+r[0].length):-1}function BU(n,e,t){var r=ts.exec(e.slice(t,t+2));return r?(n.y=+r[0]+(+r[0]>68?1900:2e3),t+r[0].length):-1}function Hme(n,e,t){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(t,t+6));return r?(n.Z=r[1]?0:-(r[2]+(r[3]||"00")),t+r[0].length):-1}function Vme(n,e,t){var r=ts.exec(e.slice(t,t+1));return r?(n.q=r[0]*3-3,t+r[0].length):-1}function Gme(n,e,t){var r=ts.exec(e.slice(t,t+2));return r?(n.m=r[0]-1,t+r[0].length):-1}function zU(n,e,t){var r=ts.exec(e.slice(t,t+2));return r?(n.d=+r[0],t+r[0].length):-1}function qme(n,e,t){var r=ts.exec(e.slice(t,t+3));return r?(n.m=0,n.d=+r[0],t+r[0].length):-1}function HU(n,e,t){var r=ts.exec(e.slice(t,t+2));return r?(n.H=+r[0],t+r[0].length):-1}function Wme(n,e,t){var r=ts.exec(e.slice(t,t+2));return r?(n.M=+r[0],t+r[0].length):-1}function jme(n,e,t){var r=ts.exec(e.slice(t,t+2));return r?(n.S=+r[0],t+r[0].length):-1}function $me(n,e,t){var r=ts.exec(e.slice(t,t+3));return r?(n.L=+r[0],t+r[0].length):-1}function Xme(n,e,t){var r=ts.exec(e.slice(t,t+6));return r?(n.L=Math.floor(r[0]/1e3),t+r[0].length):-1}function Yme(n,e,t){var r=Lme.exec(e.slice(t,t+1));return r?t+r[0].length:-1}function Kme(n,e,t){var r=ts.exec(e.slice(t));return r?(n.Q=+r[0],t+r[0].length):-1}function Jme(n,e,t){var r=ts.exec(e.slice(t));return r?(n.s=+r[0],t+r[0].length):-1}function VU(n,e){return ci(n.getDate(),e,2)}function Zme(n,e){return ci(n.getHours(),e,2)}function Qme(n,e){return ci(n.getHours()%12||12,e,2)}function ege(n,e){return ci(1+r1.count(cd(n),n),e,3)}function SG(n,e){return ci(n.getMilliseconds(),e,3)}function tge(n,e){return SG(n,e)+"000"}function nge(n,e){return ci(n.getMonth()+1,e,2)}function rge(n,e){return ci(n.getMinutes(),e,2)}function ige(n,e){return ci(n.getSeconds(),e,2)}function oge(n){var e=n.getDay();return e===0?7:e}function age(n,e){return ci($w.count(cd(n)-1,n),e,2)}function wG(n){var e=n.getDay();return e>=4||e===0?Ig(n):Ig.ceil(n)}function sge(n,e){return n=wG(n),ci(Ig.count(cd(n),n)+(cd(n).getDay()===4),e,2)}function lge(n){return n.getDay()}function uge(n,e){return ci(vS.count(cd(n)-1,n),e,2)}function cge(n,e){return ci(n.getFullYear()%100,e,2)}function fge(n,e){return n=wG(n),ci(n.getFullYear()%100,e,2)}function dge(n,e){return ci(n.getFullYear()%1e4,e,4)}function hge(n,e){var t=n.getDay();return n=t>=4||t===0?Ig(n):Ig.ceil(n),ci(n.getFullYear()%1e4,e,4)}function pge(n){var e=n.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+ci(e/60|0,"0",2)+ci(e%60,"0",2)}function GU(n,e){return ci(n.getUTCDate(),e,2)}function mge(n,e){return ci(n.getUTCHours(),e,2)}function gge(n,e){return ci(n.getUTCHours()%12||12,e,2)}function vge(n,e){return ci(1+jw.count(fd(n),n),e,3)}function bG(n,e){return ci(n.getUTCMilliseconds(),e,3)}function yge(n,e){return bG(n,e)+"000"}function xge(n,e){return ci(n.getUTCMonth()+1,e,2)}function _ge(n,e){return ci(n.getUTCMinutes(),e,2)}function Sge(n,e){return ci(n.getUTCSeconds(),e,2)}function wge(n){var e=n.getUTCDay();return e===0?7:e}function bge(n,e){return ci(Xw.count(fd(n)-1,n),e,2)}function AG(n){var e=n.getUTCDay();return e>=4||e===0?Rg(n):Rg.ceil(n)}function Age(n,e){return n=AG(n),ci(Rg.count(fd(n),n)+(fd(n).getUTCDay()===4),e,2)}function Ege(n){return n.getUTCDay()}function Tge(n,e){return ci(yS.count(fd(n)-1,n),e,2)}function Mge(n,e){return ci(n.getUTCFullYear()%100,e,2)}function Cge(n,e){return n=AG(n),ci(n.getUTCFullYear()%100,e,2)}function Pge(n,e){return ci(n.getUTCFullYear()%1e4,e,4)}function Ige(n,e){var t=n.getUTCDay();return n=t>=4||t===0?Rg(n):Rg.ceil(n),ci(n.getUTCFullYear()%1e4,e,4)}function Rge(){return"+0000"}function qU(){return"%"}function WU(n){return+n}function jU(n){return Math.floor(+n/1e3)}var Vm,EG,TG;Nge({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Nge(n){return Vm=Nme(n),EG=Vm.format,Vm.parse,TG=Vm.utcFormat,Vm.utcParse,Vm}function Lge(n){return new Date(n)}function Oge(n){return n instanceof Date?+n:+new Date(+n)}function cR(n,e,t,r,i,o,a,s,l,u){var c=KI(),f=c.invert,h=c.domain,p=u(".%L"),v=u(":%S"),S=u("%I:%M"),y=u("%I %p"),_=u("%a %d"),w=u("%b %d"),A=u("%B"),E=u("%Y");function P(O){return(l(O)<O?p:s(O)<O?v:a(O)<O?S:o(O)<O?y:r(O)<O?i(O)<O?_:w:t(O)<O?A:E)(O)}return c.invert=function(O){return new Date(f(O))},c.domain=function(O){return arguments.length?h(Array.from(O,Oge)):h().map(Lge)},c.ticks=function(O){var L=h();return n(L[0],L[L.length-1],O??10)},c.tickFormat=function(O,L){return L==null?P:u(L)},c.nice=function(O){var L=h();return(!O||typeof O.range!="function")&&(O=e(L[0],L[L.length-1],O??10)),O?h(dG(L,O)):c},c.copy=function(){return n1(c,cR(n,e,t,r,i,o,a,s,l,u))},c}function Dge(){return qu.apply(cR(Ime,Rme,cd,lR,$w,r1,aR,iR,Sp,EG).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function kge(){return qu.apply(cR(Cme,Pme,fd,uR,Xw,jw,sR,oR,Sp,TG).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Yw(){var n=0,e=1,t,r,i,o,a=tl,s=!1,l;function u(f){return f==null||isNaN(f=+f)?l:a(i===0?.5:(f=(o(f)-t)*i,s?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([n,e]=f,t=o(n=+n),r=o(e=+e),i=t===r?0:1/(r-t),u):[n,e]},u.clamp=function(f){return arguments.length?(s=!!f,u):s},u.interpolator=function(f){return arguments.length?(a=f,u):a};function c(f){return function(h){var p,v;return arguments.length?([p,v]=h,a=f(p,v),u):[a(0),a(1)]}}return u.range=c(tv),u.rangeRound=c(YI),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return o=f,t=f(n),r=f(e),i=t===r?0:1/(r-t),u}}function Mh(n,e){return e.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown())}function MG(){var n=Th(Yw()(tl));return n.copy=function(){return Mh(n,MG())},vd.apply(n,arguments)}function CG(){var n=QI(Yw()).domain([1,10]);return n.copy=function(){return Mh(n,CG()).base(n.base())},vd.apply(n,arguments)}function PG(){var n=eR(Yw());return n.copy=function(){return Mh(n,PG()).constant(n.constant())},vd.apply(n,arguments)}function fR(){var n=tR(Yw());return n.copy=function(){return Mh(n,fR()).exponent(n.exponent())},vd.apply(n,arguments)}function Fge(){return fR.apply(null,arguments).exponent(.5)}function IG(){var n=[],e=tl;function t(r){if(r!=null&&!isNaN(r=+r))return e((e1(n,r,1)-1)/(n.length-1))}return t.domain=function(r){if(!arguments.length)return n.slice();n=[];for(let i of r)i!=null&&!isNaN(i=+i)&&n.push(i);return n.sort(dh),t},t.interpolator=function(r){return arguments.length?(e=r,t):e},t.range=function(){return n.map((r,i)=>e(i/(n.length-1)))},t.quantiles=function(r){return Array.from({length:r+1},(i,o)=>bpe(n,o/r))},t.copy=function(){return IG(e).domain(n)},vd.apply(t,arguments)}function Kw(){var n=0,e=.5,t=1,r=1,i,o,a,s,l,u=tl,c,f=!1,h;function p(S){return isNaN(S=+S)?h:(S=.5+((S=+c(S))-o)*(r*S<r*o?s:l),u(f?Math.max(0,Math.min(1,S)):S))}p.domain=function(S){return arguments.length?([n,e,t]=S,i=c(n=+n),o=c(e=+e),a=c(t=+t),s=i===o?0:.5/(o-i),l=o===a?0:.5/(a-o),r=o<i?-1:1,p):[n,e,t]},p.clamp=function(S){return arguments.length?(f=!!S,p):f},p.interpolator=function(S){return arguments.length?(u=S,p):u};function v(S){return function(y){var _,w,A;return arguments.length?([_,w,A]=y,u=Ype(S,[_,w,A]),p):[u(0),u(.5),u(1)]}}return p.range=v(tv),p.rangeRound=v(YI),p.unknown=function(S){return arguments.length?(h=S,p):h},function(S){return c=S,i=S(n),o=S(e),a=S(t),s=i===o?0:.5/(o-i),l=o===a?0:.5/(a-o),r=o<i?-1:1,p}}function RG(){var n=Th(Kw()(tl));return n.copy=function(){return Mh(n,RG())},vd.apply(n,arguments)}function NG(){var n=QI(Kw()).domain([.1,1,10]);return n.copy=function(){return Mh(n,NG()).base(n.base())},vd.apply(n,arguments)}function LG(){var n=eR(Kw());return n.copy=function(){return Mh(n,LG()).constant(n.constant())},vd.apply(n,arguments)}function dR(){var n=tR(Kw());return n.copy=function(){return Mh(n,dR()).exponent(n.exponent())},vd.apply(n,arguments)}function Uge(){return dR.apply(null,arguments).exponent(.5)}const $U=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:iy,scaleDiverging:RG,scaleDivergingLog:NG,scaleDivergingPow:dR,scaleDivergingSqrt:Uge,scaleDivergingSymlog:LG,scaleIdentity:fG,scaleImplicit:x5,scaleLinear:mS,scaleLog:hG,scaleOrdinal:jI,scalePoint:S0,scalePow:nR,scaleQuantile:gG,scaleQuantize:vG,scaleRadial:mG,scaleSequential:MG,scaleSequentialLog:CG,scaleSequentialPow:fR,scaleSequentialQuantile:IG,scaleSequentialSqrt:Fge,scaleSequentialSymlog:PG,scaleSqrt:yme,scaleSymlog:pG,scaleThreshold:yG,scaleTime:Dge,scaleUtc:kge,tickFormat:cG},Symbol.toStringTag,{value:"Module"}));var gM,XU;function OG(){if(XU)return gM;XU=1;var n=Jg();function e(t,r,i){for(var o=-1,a=t.length;++o<a;){var s=t[o],l=r(s);if(l!=null&&(u===void 0?l===l&&!n(l):i(l,u)))var u=l,c=s}return c}return gM=e,gM}var vM,YU;function Bge(){if(YU)return vM;YU=1;function n(e,t){return e>t}return vM=n,vM}var yM,KU;function zge(){if(KU)return yM;KU=1;var n=OG(),e=Bge(),t=ev();function r(i){return i&&i.length?n(i,t,e):void 0}return yM=r,yM}var Hge=zge();const lh=gi(Hge);var xM,JU;function Vge(){if(JU)return xM;JU=1;function n(e,t){return e<t}return xM=n,xM}var _M,ZU;function Gge(){if(ZU)return _M;ZU=1;var n=OG(),e=Vge(),t=ev();function r(i){return i&&i.length?n(i,t,e):void 0}return _M=r,_M}var qge=Gge();const Jw=gi(qge);var SM,QU;function Wge(){if(QU)return SM;QU=1;var n=CI(),e=Ah(),t=GV(),r=Hl();function i(o,a){var s=r(o)?n:t;return s(o,e(a,3))}return SM=i,SM}var wM,e6;function jge(){if(e6)return wM;e6=1;var n=HV(),e=Wge();function t(r,i){return n(e(r,i),1)}return wM=t,wM}var $ge=jge();const Xge=gi($ge);var bM,t6;function Yge(){if(t6)return bM;t6=1;var n=zI();function e(t,r){return n(t,r)}return bM=e,bM}var Kge=Yge();const Gp=gi(Kge);var nv=1e9,Jge={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},pR,vo=!0,Gu="[DecimalError] ",Op=Gu+"Invalid argument: ",hR=Gu+"Exponent out of range: ",rv=Math.floor,cp=Math.pow,Zge=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,uu,Za=1e7,oo=7,DG=9007199254740991,xS=rv(DG/oo),En={};En.absoluteValue=En.abs=function(){var n=new this.constructor(this);return n.s&&(n.s=1),n};En.comparedTo=En.cmp=function(n){var e,t,r,i,o=this;if(n=new o.constructor(n),o.s!==n.s)return o.s||-n.s;if(o.e!==n.e)return o.e>n.e^o.s<0?1:-1;for(r=o.d.length,i=n.d.length,e=0,t=r<i?r:i;e<t;++e)if(o.d[e]!==n.d[e])return o.d[e]>n.d[e]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1};En.decimalPlaces=En.dp=function(){var n=this,e=n.d.length-1,t=(e-n.e)*oo;if(e=n.d[e],e)for(;e%10==0;e/=10)t--;return t<0?0:t};En.dividedBy=En.div=function(n){return ad(this,new this.constructor(n))};En.dividedToIntegerBy=En.idiv=function(n){var e=this,t=e.constructor;return Bi(ad(e,new t(n),0,1),t.precision)};En.equals=En.eq=function(n){return!this.cmp(n)};En.exponent=function(){return ya(this)};En.greaterThan=En.gt=function(n){return this.cmp(n)>0};En.greaterThanOrEqualTo=En.gte=function(n){return this.cmp(n)>=0};En.isInteger=En.isint=function(){return this.e>this.d.length-2};En.isNegative=En.isneg=function(){return this.s<0};En.isPositive=En.ispos=function(){return this.s>0};En.isZero=function(){return this.s===0};En.lessThan=En.lt=function(n){return this.cmp(n)<0};En.lessThanOrEqualTo=En.lte=function(n){return this.cmp(n)<1};En.logarithm=En.log=function(n){var e,t=this,r=t.constructor,i=r.precision,o=i+5;if(n===void 0)n=new r(10);else if(n=new r(n),n.s<1||n.eq(uu))throw Error(Gu+"NaN");if(t.s<1)throw Error(Gu+(t.s?"NaN":"-Infinity"));return t.eq(uu)?new r(0):(vo=!1,e=ad(uy(t,o),uy(n,o),o),vo=!0,Bi(e,i))};En.minus=En.sub=function(n){var e=this;return n=new e.constructor(n),e.s==n.s?UG(e,n):kG(e,(n.s=-n.s,n))};En.modulo=En.mod=function(n){var e,t=this,r=t.constructor,i=r.precision;if(n=new r(n),!n.s)throw Error(Gu+"NaN");return t.s?(vo=!1,e=ad(t,n,0,1).times(n),vo=!0,t.minus(e)):Bi(new r(t),i)};En.naturalExponential=En.exp=function(){return FG(this)};En.naturalLogarithm=En.ln=function(){return uy(this)};En.negated=En.neg=function(){var n=new this.constructor(this);return n.s=-n.s||0,n};En.plus=En.add=function(n){var e=this;return n=new e.constructor(n),e.s==n.s?kG(e,n):UG(e,(n.s=-n.s,n))};En.precision=En.sd=function(n){var e,t,r,i=this;if(n!==void 0&&n!==!!n&&n!==1&&n!==0)throw Error(Op+n);if(e=ya(i)+1,r=i.d.length-1,t=r*oo+1,r=i.d[r],r){for(;r%10==0;r/=10)t--;for(r=i.d[0];r>=10;r/=10)t++}return n&&e>t?e:t};En.squareRoot=En.sqrt=function(){var n,e,t,r,i,o,a,s=this,l=s.constructor;if(s.s<1){if(!s.s)return new l(0);throw Error(Gu+"NaN")}for(n=ya(s),vo=!1,i=Math.sqrt(+s),i==0||i==1/0?(e=pf(s.d),(e.length+n)%2==0&&(e+="0"),i=Math.sqrt(e),n=rv((n+1)/2)-(n<0||n%2),i==1/0?e="5e"+n:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+n),r=new l(e)):r=new l(i.toString()),t=l.precision,i=a=t+3;;)if(o=r,r=o.plus(ad(s,o,a+2)).times(.5),pf(o.d).slice(0,a)===(e=pf(r.d)).slice(0,a)){if(e=e.slice(a-3,a+1),i==a&&e=="4999"){if(Bi(o,t+1,0),o.times(o).eq(s)){r=o;break}}else if(e!="9999")break;a+=4}return vo=!0,Bi(r,t)};En.times=En.mul=function(n){var e,t,r,i,o,a,s,l,u,c=this,f=c.constructor,h=c.d,p=(n=new f(n)).d;if(!c.s||!n.s)return new f(0);for(n.s*=c.s,t=c.e+n.e,l=h.length,u=p.length,l<u&&(o=h,h=p,p=o,a=l,l=u,u=a),o=[],a=l+u,r=a;r--;)o.push(0);for(r=u;--r>=0;){for(e=0,i=l+r;i>r;)s=o[i]+p[r]*h[i-r-1]+e,o[i--]=s%Za|0,e=s/Za|0;o[i]=(o[i]+e)%Za|0}for(;!o[--a];)o.pop();return e?++t:o.shift(),n.d=o,n.e=t,vo?Bi(n,f.precision):n};En.toDecimalPlaces=En.todp=function(n,e){var t=this,r=t.constructor;return t=new r(t),n===void 0?t:(Tf(n,0,nv),e===void 0?e=r.rounding:Tf(e,0,8),Bi(t,n+ya(t)+1,e))};En.toExponential=function(n,e){var t,r=this,i=r.constructor;return n===void 0?t=qp(r,!0):(Tf(n,0,nv),e===void 0?e=i.rounding:Tf(e,0,8),r=Bi(new i(r),n+1,e),t=qp(r,!0,n+1)),t};En.toFixed=function(n,e){var t,r,i=this,o=i.constructor;return n===void 0?qp(i):(Tf(n,0,nv),e===void 0?e=o.rounding:Tf(e,0,8),r=Bi(new o(i),n+ya(i)+1,e),t=qp(r.abs(),!1,n+ya(r)+1),i.isneg()&&!i.isZero()?"-"+t:t)};En.toInteger=En.toint=function(){var n=this,e=n.constructor;return Bi(new e(n),ya(n)+1,e.rounding)};En.toNumber=function(){return+this};En.toPower=En.pow=function(n){var e,t,r,i,o,a,s=this,l=s.constructor,u=12,c=+(n=new l(n));if(!n.s)return new l(uu);if(s=new l(s),!s.s){if(n.s<1)throw Error(Gu+"Infinity");return s}if(s.eq(uu))return s;if(r=l.precision,n.eq(uu))return Bi(s,r);if(e=n.e,t=n.d.length-1,a=e>=t,o=s.s,a){if((t=c<0?-c:c)<=DG){for(i=new l(uu),e=Math.ceil(r/oo+4),vo=!1;t%2&&(i=i.times(s),r6(i.d,e)),t=rv(t/2),t!==0;)s=s.times(s),r6(s.d,e);return vo=!0,n.s<0?new l(uu).div(i):Bi(i,r)}}else if(o<0)throw Error(Gu+"NaN");return o=o<0&&n.d[Math.max(e,t)]&1?-1:1,s.s=1,vo=!1,i=n.times(uy(s,r+u)),vo=!0,i=FG(i),i.s=o,i};En.toPrecision=function(n,e){var t,r,i=this,o=i.constructor;return n===void 0?(t=ya(i),r=qp(i,t<=o.toExpNeg||t>=o.toExpPos)):(Tf(n,1,nv),e===void 0?e=o.rounding:Tf(e,0,8),i=Bi(new o(i),n,e),t=ya(i),r=qp(i,n<=t||t<=o.toExpNeg,n)),r};En.toSignificantDigits=En.tosd=function(n,e){var t=this,r=t.constructor;return n===void 0?(n=r.precision,e=r.rounding):(Tf(n,1,nv),e===void 0?e=r.rounding:Tf(e,0,8)),Bi(new r(t),n,e)};En.toString=En.valueOf=En.val=En.toJSON=En[Symbol.for("nodejs.util.inspect.custom")]=function(){var n=this,e=ya(n),t=n.constructor;return qp(n,e<=t.toExpNeg||e>=t.toExpPos)};function kG(n,e){var t,r,i,o,a,s,l,u,c=n.constructor,f=c.precision;if(!n.s||!e.s)return e.s||(e=new c(n)),vo?Bi(e,f):e;if(l=n.d,u=e.d,a=n.e,i=e.e,l=l.slice(),o=a-i,o){for(o<0?(r=l,o=-o,s=u.length):(r=u,i=a,s=l.length),a=Math.ceil(f/oo),s=a>s?a+1:s+1,o>s&&(o=s,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for(s=l.length,o=u.length,s-o<0&&(o=s,r=u,u=l,l=r),t=0;o;)t=(l[--o]=l[o]+u[o]+t)/Za|0,l[o]%=Za;for(t&&(l.unshift(t),++i),s=l.length;l[--s]==0;)l.pop();return e.d=l,e.e=i,vo?Bi(e,f):e}function Tf(n,e,t){if(n!==~~n||n<e||n>t)throw Error(Op+n)}function pf(n){var e,t,r,i=n.length-1,o="",a=n[0];if(i>0){for(o+=a,e=1;e<i;e++)r=n[e]+"",t=oo-r.length,t&&(o+=nh(t)),o+=r;a=n[e],r=a+"",t=oo-r.length,t&&(o+=nh(t))}else if(a===0)return"0";for(;a%10===0;)a/=10;return o+a}var ad=(function(){function n(r,i){var o,a=0,s=r.length;for(r=r.slice();s--;)o=r[s]*i+a,r[s]=o%Za|0,a=o/Za|0;return a&&r.unshift(a),r}function e(r,i,o,a){var s,l;if(o!=a)l=o>a?1:-1;else for(s=l=0;s<o;s++)if(r[s]!=i[s]){l=r[s]>i[s]?1:-1;break}return l}function t(r,i,o){for(var a=0;o--;)r[o]-=a,a=r[o]<i[o]?1:0,r[o]=a*Za+r[o]-i[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,o,a){var s,l,u,c,f,h,p,v,S,y,_,w,A,E,P,O,L,D,F=r.constructor,U=r.s==i.s?1:-1,k=r.d,z=i.d;if(!r.s)return new F(r);if(!i.s)throw Error(Gu+"Division by zero");for(l=r.e-i.e,L=z.length,P=k.length,p=new F(U),v=p.d=[],u=0;z[u]==(k[u]||0);)++u;if(z[u]>(k[u]||0)&&--l,o==null?w=o=F.precision:a?w=o+(ya(r)-ya(i))+1:w=o,w<0)return new F(0);if(w=w/oo+2|0,u=0,L==1)for(c=0,z=z[0],w++;(u<P||c)&&w--;u++)A=c*Za+(k[u]||0),v[u]=A/z|0,c=A%z|0;else{for(c=Za/(z[0]+1)|0,c>1&&(z=n(z,c),k=n(k,c),L=z.length,P=k.length),E=L,S=k.slice(0,L),y=S.length;y<L;)S[y++]=0;D=z.slice(),D.unshift(0),O=z[0],z[1]>=Za/2&&++O;do c=0,s=e(z,S,L,y),s<0?(_=S[0],L!=y&&(_=_*Za+(S[1]||0)),c=_/O|0,c>1?(c>=Za&&(c=Za-1),f=n(z,c),h=f.length,y=S.length,s=e(f,S,h,y),s==1&&(c--,t(f,L<h?D:z,h))):(c==0&&(s=c=1),f=z.slice()),h=f.length,h<y&&f.unshift(0),t(S,f,y),s==-1&&(y=S.length,s=e(z,S,L,y),s<1&&(c++,t(S,L<y?D:z,y))),y=S.length):s===0&&(c++,S=[0]),v[u++]=c,s&&S[0]?S[y++]=k[E]||0:(S=[k[E]],y=1);while((E++<P||S[0]!==void 0)&&w--)}return v[0]||v.shift(),p.e=l,Bi(p,a?o+ya(p)+1:o)}})();function FG(n,e){var t,r,i,o,a,s,l=0,u=0,c=n.constructor,f=c.precision;if(ya(n)>16)throw Error(hR+ya(n));if(!n.s)return new c(uu);for(vo=!1,s=f,a=new c(.03125);n.abs().gte(.1);)n=n.times(a),u+=5;for(r=Math.log(cp(2,u))/Math.LN10*2+5|0,s+=r,t=i=o=new c(uu),c.precision=s;;){if(i=Bi(i.times(n),s),t=t.times(++l),a=o.plus(ad(i,t,s)),pf(a.d).slice(0,s)===pf(o.d).slice(0,s)){for(;u--;)o=Bi(o.times(o),s);return c.precision=f,e==null?(vo=!0,Bi(o,f)):o}o=a}}function ya(n){for(var e=n.e*oo,t=n.d[0];t>=10;t/=10)e++;return e}function AM(n,e,t){if(e>n.LN10.sd())throw vo=!0,t&&(n.precision=t),Error(Gu+"LN10 precision limit exceeded");return Bi(new n(n.LN10),e)}function nh(n){for(var e="";n--;)e+="0";return e}function uy(n,e){var t,r,i,o,a,s,l,u,c,f=1,h=10,p=n,v=p.d,S=p.constructor,y=S.precision;if(p.s<1)throw Error(Gu+(p.s?"NaN":"-Infinity"));if(p.eq(uu))return new S(0);if(e==null?(vo=!1,u=y):u=e,p.eq(10))return e==null&&(vo=!0),AM(S,u);if(u+=h,S.precision=u,t=pf(v),r=t.charAt(0),o=ya(p),Math.abs(o)<15e14){for(;r<7&&r!=1||r==1&&t.charAt(1)>3;)p=p.times(n),t=pf(p.d),r=t.charAt(0),f++;o=ya(p),r>1?(p=new S("0."+t),o++):p=new S(r+"."+t.slice(1))}else return l=AM(S,u+2,y).times(o+""),p=uy(new S(r+"."+t.slice(1)),u-h).plus(l),S.precision=y,e==null?(vo=!0,Bi(p,y)):p;for(s=a=p=ad(p.minus(uu),p.plus(uu),u),c=Bi(p.times(p),u),i=3;;){if(a=Bi(a.times(c),u),l=s.plus(ad(a,new S(i),u)),pf(l.d).slice(0,u)===pf(s.d).slice(0,u))return s=s.times(2),o!==0&&(s=s.plus(AM(S,u+2,y).times(o+""))),s=ad(s,new S(f),u),S.precision=y,e==null?(vo=!0,Bi(s,y)):s;s=l,i+=2}}function n6(n,e){var t,r,i;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(t<0&&(t=r),t+=+e.slice(r+1),e=e.substring(0,r)):t<0&&(t=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,t=t-r-1,n.e=rv(t/oo),n.d=[],r=(t+1)%oo,t<0&&(r+=oo),r<i){for(r&&n.d.push(+e.slice(0,r)),i-=oo;r<i;)n.d.push(+e.slice(r,r+=oo));e=e.slice(r),r=oo-e.length}else r-=i;for(;r--;)e+="0";if(n.d.push(+e),vo&&(n.e>xS||n.e<-xS))throw Error(hR+t)}else n.s=0,n.e=0,n.d=[0];return n}function Bi(n,e,t){var r,i,o,a,s,l,u,c,f=n.d;for(a=1,o=f[0];o>=10;o/=10)a++;if(r=e-a,r<0)r+=oo,i=e,u=f[c=0];else{if(c=Math.ceil((r+1)/oo),o=f.length,c>=o)return n;for(u=o=f[c],a=1;o>=10;o/=10)a++;r%=oo,i=r-oo+a}if(t!==void 0&&(o=cp(10,a-i-1),s=u/o%10|0,l=e<0||f[c+1]!==void 0||u%o,l=t<4?(s||l)&&(t==0||t==(n.s<0?3:2)):s>5||s==5&&(t==4||l||t==6&&(r>0?i>0?u/cp(10,a-i):0:f[c-1])%10&1||t==(n.s<0?8:7))),e<1||!f[0])return l?(o=ya(n),f.length=1,e=e-o-1,f[0]=cp(10,(oo-e%oo)%oo),n.e=rv(-e/oo)||0):(f.length=1,f[0]=n.e=n.s=0),n;if(r==0?(f.length=c,o=1,c--):(f.length=c+1,o=cp(10,oo-r),f[c]=i>0?(u/cp(10,a-i)%cp(10,i)|0)*o:0),l)for(;;)if(c==0){(f[0]+=o)==Za&&(f[0]=1,++n.e);break}else{if(f[c]+=o,f[c]!=Za)break;f[c--]=0,o=1}for(r=f.length;f[--r]===0;)f.pop();if(vo&&(n.e>xS||n.e<-xS))throw Error(hR+ya(n));return n}function UG(n,e){var t,r,i,o,a,s,l,u,c,f,h=n.constructor,p=h.precision;if(!n.s||!e.s)return e.s?e.s=-e.s:e=new h(n),vo?Bi(e,p):e;if(l=n.d,f=e.d,r=e.e,u=n.e,l=l.slice(),a=u-r,a){for(c=a<0,c?(t=l,a=-a,s=f.length):(t=f,r=u,s=l.length),i=Math.max(Math.ceil(p/oo),s)+2,a>i&&(a=i,t.length=1),t.reverse(),i=a;i--;)t.push(0);t.reverse()}else{for(i=l.length,s=f.length,c=i<s,c&&(s=i),i=0;i<s;i++)if(l[i]!=f[i]){c=l[i]<f[i];break}a=0}for(c&&(t=l,l=f,f=t,e.s=-e.s),s=l.length,i=f.length-s;i>0;--i)l[s++]=0;for(i=f.length;i>a;){if(l[--i]<f[i]){for(o=i;o&&l[--o]===0;)l[o]=Za-1;--l[o],l[i]+=Za}l[i]-=f[i]}for(;l[--s]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,vo?Bi(e,p):e):new h(0)}function qp(n,e,t){var r,i=ya(n),o=pf(n.d),a=o.length;return e?(t&&(r=t-a)>0?o=o.charAt(0)+"."+o.slice(1)+nh(r):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+nh(-i-1)+o,t&&(r=t-a)>0&&(o+=nh(r))):i>=a?(o+=nh(i+1-a),t&&(r=t-i-1)>0&&(o=o+"."+nh(r))):((r=i+1)<a&&(o=o.slice(0,r)+"."+o.slice(r)),t&&(r=t-a)>0&&(i+1===a&&(o+="."),o+=nh(r))),n.s<0?"-"+o:o}function r6(n,e){if(n.length>e)return n.length=e,!0}function BG(n){var e,t,r;function i(o){var a=this;if(!(a instanceof i))return new i(o);if(a.constructor=i,o instanceof i){a.s=o.s,a.e=o.e,a.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(Op+o);if(o>0)a.s=1;else if(o<0)o=-o,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(o===~~o&&o<1e7){a.e=0,a.d=[o];return}return n6(a,o.toString())}else if(typeof o!="string")throw Error(Op+o);if(o.charCodeAt(0)===45?(o=o.slice(1),a.s=-1):a.s=1,Zge.test(o))n6(a,o);else throw Error(Op+o)}if(i.prototype=En,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=BG,i.config=i.set=Qge,n===void 0&&(n={}),n)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)n.hasOwnProperty(t=r[e++])||(n[t]=this[t]);return i.config(n),i}function Qge(n){if(!n||typeof n!="object")throw Error(Gu+"Object expected");var e,t,r,i=["precision",1,nv,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=n[t=i[e]])!==void 0)if(rv(r)===r&&r>=i[e+1]&&r<=i[e+2])this[t]=r;else throw Error(Op+t+": "+r);if((r=n[t="LN10"])!==void 0)if(r==Math.LN10)this[t]=new this(r);else throw Error(Op+t+": "+r);return this}var pR=BG(Jge);uu=new pR(1);const Li=pR;function eve(n){return ive(n)||rve(n)||nve(n)||tve()}function tve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nve(n,e){if(n){if(typeof n=="string")return b5(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return b5(n,e)}}function rve(n){if(typeof Symbol<"u"&&Symbol.iterator in Object(n))return Array.from(n)}function ive(n){if(Array.isArray(n))return b5(n)}function b5(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var ove=function(e){return e},zG={},HG=function(e){return e===zG},i6=function(e){return function t(){return arguments.length===0||arguments.length===1&&HG(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},ave=function n(e,t){return e===1?t:i6(function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=i.filter(function(s){return s!==zG}).length;return a>=e?t.apply(void 0,i):n(e-a,i6(function(){for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];var c=i.map(function(f){return HG(f)?l.shift():f});return t.apply(void 0,eve(c).concat(l))}))})},Zw=function(e){return ave(e.length,e)},A5=function(e,t){for(var r=[],i=e;i<t;++i)r[i-e]=i;return r},sve=Zw(function(n,e){return Array.isArray(e)?e.map(n):Object.keys(e).map(function(t){return e[t]}).map(n)}),lve=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.length)return ove;var i=t.reverse(),o=i[0],a=i.slice(1);return function(){return a.reduce(function(s,l){return l(s)},o.apply(void 0,arguments))}},E5=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},VG=function(e){var t=null,r=null;return function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t&&o.every(function(s,l){return s===t[l]})||(t=o,r=e.apply(void 0,o)),r}};function uve(n){var e;return n===0?e=1:e=Math.floor(new Li(n).abs().log(10).toNumber())+1,e}function cve(n,e,t){for(var r=new Li(n),i=0,o=[];r.lt(e)&&i<1e5;)o.push(r.toNumber()),r=r.add(t),i++;return o}var fve=Zw(function(n,e,t){var r=+n,i=+e;return r+t*(i-r)}),dve=Zw(function(n,e,t){var r=e-+n;return r=r||1/0,(t-n)/r}),hve=Zw(function(n,e,t){var r=e-+n;return r=r||1/0,Math.max(0,Math.min(1,(t-n)/r))});const Qw={rangeStep:cve,getDigitCount:uve,interpolateNumber:fve,uninterpolateNumber:dve,uninterpolateTruncation:hve};function T5(n){return gve(n)||mve(n)||GG(n)||pve()}function pve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mve(n){if(typeof Symbol<"u"&&Symbol.iterator in Object(n))return Array.from(n)}function gve(n){if(Array.isArray(n))return M5(n)}function cy(n,e){return xve(n)||yve(n,e)||GG(n,e)||vve()}function vve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GG(n,e){if(n){if(typeof n=="string")return M5(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return M5(n,e)}}function M5(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function yve(n,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(n)))){var t=[],r=!0,i=!1,o=void 0;try{for(var a=n[Symbol.iterator](),s;!(r=(s=a.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(l){i=!0,o=l}finally{try{!r&&a.return!=null&&a.return()}finally{if(i)throw o}}return t}}function xve(n){if(Array.isArray(n))return n}function qG(n){var e=cy(n,2),t=e[0],r=e[1],i=t,o=r;return t>r&&(i=r,o=t),[i,o]}function WG(n,e,t){if(n.lte(0))return new Li(0);var r=Qw.getDigitCount(n.toNumber()),i=new Li(10).pow(r),o=n.div(i),a=r!==1?.05:.1,s=new Li(Math.ceil(o.div(a).toNumber())).add(t).mul(a),l=s.mul(i);return e?l:new Li(Math.ceil(l))}function _ve(n,e,t){var r=1,i=new Li(n);if(!i.isint()&&t){var o=Math.abs(n);o<1?(r=new Li(10).pow(Qw.getDigitCount(n)-1),i=new Li(Math.floor(i.div(r).toNumber())).mul(r)):o>1&&(i=new Li(Math.floor(n)))}else n===0?i=new Li(Math.floor((e-1)/2)):t||(i=new Li(Math.floor(n)));var a=Math.floor((e-1)/2),s=lve(sve(function(l){return i.add(new Li(l-a).mul(r)).toNumber()}),A5);return s(0,e)}function jG(n,e,t,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-n)/(t-1)))return{step:new Li(0),tickMin:new Li(0),tickMax:new Li(0)};var o=WG(new Li(e).sub(n).div(t-1),r,i),a;n<=0&&e>=0?a=new Li(0):(a=new Li(n).add(e).div(2),a=a.sub(new Li(a).mod(o)));var s=Math.ceil(a.sub(n).div(o).toNumber()),l=Math.ceil(new Li(e).sub(a).div(o).toNumber()),u=s+l+1;return u>t?jG(n,e,t,r,i+1):(u<t&&(l=e>0?l+(t-u):l,s=e>0?s:s+(t-u)),{step:o,tickMin:a.sub(new Li(s).mul(o)),tickMax:a.add(new Li(l).mul(o))})}function Sve(n){var e=cy(n,2),t=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(i,2),s=qG([t,r]),l=cy(s,2),u=l[0],c=l[1];if(u===-1/0||c===1/0){var f=c===1/0?[u].concat(T5(A5(0,i-1).map(function(){return 1/0}))):[].concat(T5(A5(0,i-1).map(function(){return-1/0})),[c]);return t>r?E5(f):f}if(u===c)return _ve(u,i,o);var h=jG(u,c,a,o),p=h.step,v=h.tickMin,S=h.tickMax,y=Qw.rangeStep(v,S.add(new Li(.1).mul(p)),p);return t>r?E5(y):y}function wve(n,e){var t=cy(n,2),r=t[0],i=t[1],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=qG([r,i]),s=cy(a,2),l=s[0],u=s[1];if(l===-1/0||u===1/0)return[r,i];if(l===u)return[l];var c=Math.max(e,2),f=WG(new Li(u).sub(l).div(c-1),o,0),h=[].concat(T5(Qw.rangeStep(new Li(l),new Li(u).sub(new Li(.99).mul(f)),f)),[u]);return r>i?E5(h):h}var bve=VG(Sve),Ave=VG(wve),Eve="Invariant failed";function Wp(n,e){throw new Error(Eve)}var Tve=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function _S(){return _S=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_S.apply(this,arguments)}function Mve(n,e){return Rve(n)||Ive(n,e)||Pve(n,e)||Cve()}function Cve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pve(n,e){if(n){if(typeof n=="string")return o6(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return o6(n,e)}}function o6(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Ive(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(t=t.call(n)).next,e!==0)for(;!(l=(r=o.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function Rve(n){if(Array.isArray(n))return n}function Nve(n,e){if(n==null)return{};var t=Lve(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Lve(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function iv(n){var e=n.offset,t=n.layout,r=n.width,i=n.dataKey,o=n.data,a=n.dataPointFormatter,s=n.xAxis,l=n.yAxis,u=Nve(n,Tve),c=pr(u,!1);n.direction==="x"&&s.type!=="number"&&Wp();var f=o.map(function(h){var p=a(h,i),v=p.x,S=p.y,y=p.value,_=p.errorVal;if(!_)return null;var w=[],A,E;if(Array.isArray(_)){var P=Mve(_,2);A=P[0],E=P[1]}else A=E=_;if(t==="vertical"){var O=s.scale,L=S+e,D=L+r,F=L-r,U=O(y-A),k=O(y+E);w.push({x1:k,y1:D,x2:k,y2:F}),w.push({x1:U,y1:L,x2:k,y2:L}),w.push({x1:U,y1:D,x2:U,y2:F})}else if(t==="horizontal"){var z=l.scale,W=v+e,j=W-r,se=W+r,Y=z(y-A),Q=z(y+E);w.push({x1:j,y1:Q,x2:se,y2:Q}),w.push({x1:W,y1:Y,x2:W,y2:Q}),w.push({x1:j,y1:Y,x2:se,y2:Y})}return Ve.createElement(pi,_S({className:"recharts-errorBar",key:"bar-".concat(w.map(function(X){return"".concat(X.x1,"-").concat(X.x2,"-").concat(X.y1,"-").concat(X.y2)}))},c),w.map(function(X){return Ve.createElement("line",_S({},X,{key:"line-".concat(X.x1,"-").concat(X.x2,"-").concat(X.y1,"-").concat(X.y2)}))}))});return Ve.createElement(pi,{className:"recharts-errorBars"},f)}iv.defaultProps={stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"};iv.displayName="ErrorBar";function fy(n){"@babel/helpers - typeof";return fy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fy(n)}function a6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function EM(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?a6(Object(t),!0).forEach(function(r){Ove(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):a6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Ove(n,e,t){return e=Dve(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Dve(n){var e=kve(n,"string");return fy(e)=="symbol"?e:String(e)}function kve(n,e){if(fy(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(fy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var $G=function(e){var t=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,o=e.legendContent,a=lu(t,Tg);if(!a)return null;var s;return a.props&&a.props.payload?s=a.props&&a.props.payload:o==="children"?s=(r||[]).reduce(function(l,u){var c=u.item,f=u.props,h=f.sectors||f.data||[];return l.concat(h.map(function(p){return{type:a.props.iconType||c.props.legendType,value:p.name,color:p.fill,payload:p}}))},[]):s=(r||[]).map(function(l){var u=l.item,c=u.props,f=c.dataKey,h=c.name,p=c.legendType,v=c.hide;return{inactive:v,dataKey:f,type:a.props.iconType||p||"square",color:mR(u),value:h||f,payload:u.props}}),EM(EM(EM({},a.props),Tg.getWithHeight(a,i)),{},{payload:s,item:a})};function dy(n){"@babel/helpers - typeof";return dy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dy(n)}function s6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Fu(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?s6(Object(t),!0).forEach(function(r){hg(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):s6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function hg(n,e,t){return e=Fve(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Fve(n){var e=Uve(n,"string");return dy(e)=="symbol"?e:String(e)}function Uve(n,e){if(dy(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(dy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function l6(n){return Vve(n)||Hve(n)||zve(n)||Bve()}function Bve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zve(n,e){if(n){if(typeof n=="string")return C5(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return C5(n,e)}}function Hve(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Vve(n){if(Array.isArray(n))return C5(n)}function C5(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Da(n,e,t){return mr(n)||mr(e)?t:Oa(e)?Hu(n,e,t):Ar(e)?e(n):t}function w0(n,e,t,r){var i=Xge(n,function(s){return Da(s,e)});if(t==="number"){var o=i.filter(function(s){return an(s)||parseFloat(s)});return o.length?[Jw(o),lh(o)]:[1/0,-1/0]}var a=r?i.filter(function(s){return!mr(s)}):i;return a.map(function(s){return Oa(s)||s instanceof Date?s:""})}var Gve=function(e){var t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,a=-1,s=(t=r==null?void 0:r.length)!==null&&t!==void 0?t:0;if(s<=1)return 0;if(o&&o.axisType==="angleAxis"&&Math.abs(Math.abs(o.range[1]-o.range[0])-360)<=1e-6)for(var l=o.range,u=0;u<s;u++){var c=u>0?i[u-1].coordinate:i[s-1].coordinate,f=i[u].coordinate,h=u>=s-1?i[0].coordinate:i[u+1].coordinate,p=void 0;if(Ic(f-c)!==Ic(h-f)){var v=[];if(Ic(h-f)===Ic(l[1]-l[0])){p=h;var S=f+l[1]-l[0];v[0]=Math.min(S,(S+c)/2),v[1]=Math.max(S,(S+c)/2)}else{p=c;var y=h+l[1]-l[0];v[0]=Math.min(f,(y+f)/2),v[1]=Math.max(f,(y+f)/2)}var _=[Math.min(f,(p+f)/2),Math.max(f,(p+f)/2)];if(e>_[0]&&e<=_[1]||e>=v[0]&&e<=v[1]){a=i[u].index;break}}else{var w=Math.min(c,h),A=Math.max(c,h);if(e>(w+f)/2&&e<=(A+f)/2){a=i[u].index;break}}}else for(var E=0;E<s;E++)if(E===0&&e<=(r[E].coordinate+r[E+1].coordinate)/2||E>0&&E<s-1&&e>(r[E].coordinate+r[E-1].coordinate)/2&&e<=(r[E].coordinate+r[E+1].coordinate)/2||E===s-1&&e>(r[E].coordinate+r[E-1].coordinate)/2){a=r[E].index;break}return a},mR=function(e){var t=e,r=t.type.displayName,i=e.props,o=i.stroke,a=i.fill,s;switch(r){case"Line":s=o;break;case"Area":case"Radar":s=o&&o!=="none"?o:a;break;default:s=a;break}return s},qve=function(e){var t=e.barSize,r=e.totalSize,i=e.stackGroups,o=i===void 0?{}:i;if(!o)return{};for(var a={},s=Object.keys(o),l=0,u=s.length;l<u;l++)for(var c=o[s[l]].stackGroups,f=Object.keys(c),h=0,p=f.length;h<p;h++){var v=c[f[h]],S=v.items,y=v.cateAxisId,_=S.filter(function(P){return id(P.type).indexOf("Bar")>=0});if(_&&_.length){var w=_[0].props.barSize,A=_[0].props[y];a[A]||(a[A]=[]);var E=mr(w)?t:w;a[A].push({item:_[0],stackList:_.slice(1),barSize:mr(E)?void 0:Vp(E,r,0)})}}return a},Wve=function(e){var t=e.barGap,r=e.barCategoryGap,i=e.bandSize,o=e.sizeList,a=o===void 0?[]:o,s=e.maxBarSize,l=a.length;if(l<1)return null;var u=Vp(t,i,0,!0),c,f=[];if(a[0].barSize===+a[0].barSize){var h=!1,p=i/l,v=a.reduce(function(E,P){return E+P.barSize||0},0);v+=(l-1)*u,v>=i&&(v-=(l-1)*u,u=0),v>=i&&p>0&&(h=!0,p*=.9,v=l*p);var S=(i-v)/2>>0,y={offset:S-u,size:0};c=a.reduce(function(E,P){var O={item:P.item,position:{offset:y.offset+y.size+u,size:h?p:P.barSize}},L=[].concat(l6(E),[O]);return y=L[L.length-1].position,P.stackList&&P.stackList.length&&P.stackList.forEach(function(D){L.push({item:D,position:y})}),L},f)}else{var _=Vp(r,i,0,!0);i-2*_-(l-1)*u<=0&&(u=0);var w=(i-2*_-(l-1)*u)/l;w>1&&(w>>=0);var A=s===+s?Math.min(w,s):w;c=a.reduce(function(E,P,O){var L=[].concat(l6(E),[{item:P.item,position:{offset:_+(w+u)*O+(w-A)/2,size:A}}]);return P.stackList&&P.stackList.length&&P.stackList.forEach(function(D){L.push({item:D,position:L[L.length-1].position})}),L},f)}return c},jve=function(e,t,r,i){var o=r.children,a=r.width,s=r.margin,l=a-(s.left||0)-(s.right||0),u=$G({children:o,legendWidth:l});if(u){var c=i||{},f=c.width,h=c.height,p=u.align,v=u.verticalAlign,S=u.layout;if((S==="vertical"||S==="horizontal"&&v==="middle")&&p!=="center"&&an(e[p]))return Fu(Fu({},e),{},hg({},p,e[p]+(f||0)));if((S==="horizontal"||S==="vertical"&&p==="center")&&v!=="middle"&&an(e[v]))return Fu(Fu({},e),{},hg({},v,e[v]+(h||0)))}return e},$ve=function(e,t,r){return mr(t)?!0:e==="horizontal"?t==="yAxis":e==="vertical"||r==="x"?t==="xAxis":r==="y"?t==="yAxis":!0},XG=function(e,t,r,i,o){var a=t.props.children,s=Fl(a,iv).filter(function(u){return $ve(i,o,u.props.direction)});if(s&&s.length){var l=s.map(function(u){return u.props.dataKey});return e.reduce(function(u,c){var f=Da(c,r);if(mr(f))return u;var h=Array.isArray(f)?[Jw(f),lh(f)]:[f,f],p=l.reduce(function(v,S){var y=Da(c,S,0),_=h[0]-Math.abs(Array.isArray(y)?y[0]:y),w=h[1]+Math.abs(Array.isArray(y)?y[1]:y);return[Math.min(_,v[0]),Math.max(w,v[1])]},[1/0,-1/0]);return[Math.min(p[0],u[0]),Math.max(p[1],u[1])]},[1/0,-1/0])}return null},Xve=function(e,t,r,i,o){var a=t.map(function(s){return XG(e,s,r,o,i)}).filter(function(s){return!mr(s)});return a&&a.length?a.reduce(function(s,l){return[Math.min(s[0],l[0]),Math.max(s[1],l[1])]},[1/0,-1/0]):null},YG=function(e,t,r,i,o){var a=t.map(function(l){var u=l.props.dataKey;return r==="number"&&u&&XG(e,l,u,i)||w0(e,u,r,o)});if(r==="number")return a.reduce(function(l,u){return[Math.min(l[0],u[0]),Math.max(l[1],u[1])]},[1/0,-1/0]);var s={};return a.reduce(function(l,u){for(var c=0,f=u.length;c<f;c++)s[u[c]]||(s[u[c]]=!0,l.push(u[c]));return l},[])},KG=function(e,t){return e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis"},JG=function(e,t,r,i){if(i)return e.map(function(l){return l.coordinate});var o,a,s=e.map(function(l){return l.coordinate===t&&(o=!0),l.coordinate===r&&(a=!0),l.coordinate});return o||s.push(t),a||s.push(r),s},nd=function(e,t,r){if(!e)return null;var i=e.scale,o=e.duplicateDomain,a=e.type,s=e.range,l=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(t||r)&&a==="category"&&i.bandwidth?i.bandwidth()/l:0;if(u=e.axisType==="angleAxis"&&(s==null?void 0:s.length)>=2?Ic(s[0]-s[1])*2*u:u,t&&(e.ticks||e.niceTicks)){var c=(e.ticks||e.niceTicks).map(function(f){var h=o?o.indexOf(f):f;return{coordinate:i(h)+u,value:f,offset:u}});return c.filter(function(f){return!Qg(f.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(f,h){return{coordinate:i(f)+u,value:f,index:h,offset:u}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(f){return{coordinate:i(f)+u,value:f,offset:u}}):i.domain().map(function(f,h){return{coordinate:i(f)+u,value:o?o[f]:f,index:h,offset:u}})},TM=new WeakMap,Wx=function(e,t){if(typeof t!="function")return e;TM.has(e)||TM.set(e,new WeakMap);var r=TM.get(e);if(r.has(t))return r.get(t);var i=function(){e.apply(void 0,arguments),t.apply(void 0,arguments)};return r.set(t,i),i},Yve=function(e,t,r){var i=e.scale,o=e.type,a=e.layout,s=e.axisType;if(i==="auto")return a==="radial"&&s==="radiusAxis"?{scale:iy(),realScaleType:"band"}:a==="radial"&&s==="angleAxis"?{scale:mS(),realScaleType:"linear"}:o==="category"&&t&&(t.indexOf("LineChart")>=0||t.indexOf("AreaChart")>=0||t.indexOf("ComposedChart")>=0&&!r)?{scale:S0(),realScaleType:"point"}:o==="category"?{scale:iy(),realScaleType:"band"}:{scale:mS(),realScaleType:"linear"};if(Zy(i)){var l="scale".concat(Fw(i));return{scale:($U[l]||S0)(),realScaleType:$U[l]?l:"point"}}return Ar(i)?{scale:i}:{scale:S0(),realScaleType:"point"}},u6=1e-4,Kve=function(e){var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,i=e.range(),o=Math.min(i[0],i[1])-u6,a=Math.max(i[0],i[1])+u6,s=e(t[0]),l=e(t[r-1]);(s<o||s>a||l<o||l>a)&&e.domain([t[0],t[r-1]])}},Jve=function(e,t){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===t)return e[r].position;return null},Zve=function(e,t){if(!t||t.length!==2||!an(t[0])||!an(t[1]))return e;var r=Math.min(t[0],t[1]),i=Math.max(t[0],t[1]),o=[e[0],e[1]];return(!an(e[0])||e[0]<r)&&(o[0]=r),(!an(e[1])||e[1]>i)&&(o[1]=i),o[0]>i&&(o[0]=i),o[1]<r&&(o[1]=r),o},Qve=function(e){var t=e.length;if(!(t<=0))for(var r=0,i=e[0].length;r<i;++r)for(var o=0,a=0,s=0;s<t;++s){var l=Qg(e[s][r][1])?e[s][r][0]:e[s][r][1];l>=0?(e[s][r][0]=o,e[s][r][1]=o+l,o=e[s][r][1]):(e[s][r][0]=a,e[s][r][1]=a+l,a=e[s][r][1])}},e0e=function(e){var t=e.length;if(!(t<=0))for(var r=0,i=e[0].length;r<i;++r)for(var o=0,a=0;a<t;++a){var s=Qg(e[a][r][1])?e[a][r][0]:e[a][r][1];s>=0?(e[a][r][0]=o,e[a][r][1]=o+s,o=e[a][r][1]):(e[a][r][0]=0,e[a][r][1]=0)}},t0e={sign:Qve,expand:$ce,none:bg,silhouette:Xce,wiggle:Yce,positive:e0e},n0e=function(e,t,r){var i=t.map(function(s){return s.props.dataKey}),o=t0e[r],a=jce().keys(i).value(function(s,l){return+Da(s,l,0)}).order(i5).offset(o);return a(e)},r0e=function(e,t,r,i,o,a){if(!e)return null;var s=a?t.reverse():t,l={},u=s.reduce(function(f,h){var p=h.props,v=p.stackId,S=p.hide;if(S)return f;var y=h.props[r],_=f[y]||{hasStack:!1,stackGroups:{}};if(Oa(v)){var w=_.stackGroups[v]||{numericAxisId:r,cateAxisId:i,items:[]};w.items.push(h),_.hasStack=!0,_.stackGroups[v]=w}else _.stackGroups[em("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[h]};return Fu(Fu({},f),{},hg({},y,_))},l),c={};return Object.keys(u).reduce(function(f,h){var p=u[h];if(p.hasStack){var v={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(S,y){var _=p.stackGroups[y];return Fu(Fu({},S),{},hg({},y,{numericAxisId:r,cateAxisId:i,items:_.items,stackedData:n0e(e,_.items,o)}))},v)}return Fu(Fu({},f),{},hg({},h,p))},c)},i0e=function(e,t){var r=t.realScaleType,i=t.type,o=t.tickCount,a=t.originalDomain,s=t.allowDecimals,l=r||t.scale;if(l!=="auto"&&l!=="linear")return null;if(o&&i==="number"&&a&&(a[0]==="auto"||a[1]==="auto")){var u=e.domain();if(!u.length)return null;var c=bve(u,o,s);return e.domain([Jw(c),lh(c)]),{niceTicks:c}}if(o&&i==="number"){var f=e.domain(),h=Ave(f,o,s);return{niceTicks:h}}return null};function Ng(n){var e=n.axis,t=n.ticks,r=n.bandSize,i=n.entry,o=n.index,a=n.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!mr(i[e.dataKey])){var s=K_(t,"value",i[e.dataKey]);if(s)return s.coordinate+r/2}return t[o]?t[o].coordinate+r/2:null}var l=Da(i,mr(a)?e.dataKey:a);return mr(l)?null:e.scale(l)}var c6=function(e){var t=e.axis,r=e.ticks,i=e.offset,o=e.bandSize,a=e.entry,s=e.index;if(t.type==="category")return r[s]?r[s].coordinate+i:null;var l=Da(a,t.dataKey,t.domain[s]);return mr(l)?null:t.scale(l)-o/2+i},o0e=function(e){var t=e.numericAxis,r=t.scale.domain();if(t.type==="number"){var i=Math.min(r[0],r[1]),o=Math.max(r[0],r[1]);return i<=0&&o>=0?0:o<0?o:i}return r[0]},a0e=function(e,t){var r=e.props.stackId;if(Oa(r)){var i=t[r];if(i){var o=i.items.indexOf(e);return o>=0?i.stackedData[o]:null}}return null},s0e=function(e){return e.reduce(function(t,r){return[Jw(r.concat([t[0]]).filter(an)),lh(r.concat([t[1]]).filter(an))]},[1/0,-1/0])},ZG=function(e,t,r){return Object.keys(e).reduce(function(i,o){var a=e[o],s=a.stackedData,l=s.reduce(function(u,c){var f=s0e(c.slice(t,r+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},f6=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,d6=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,P5=function(e,t,r){if(Ar(e))return e(t,r);if(!Array.isArray(e))return t;var i=[];if(an(e[0]))i[0]=r?e[0]:Math.min(e[0],t[0]);else if(f6.test(e[0])){var o=+f6.exec(e[0])[1];i[0]=t[0]-o}else Ar(e[0])?i[0]=e[0](t[0]):i[0]=t[0];if(an(e[1]))i[1]=r?e[1]:Math.max(e[1],t[1]);else if(d6.test(e[1])){var a=+d6.exec(e[1])[1];i[1]=t[1]+a}else Ar(e[1])?i[1]=e[1](t[1]):i[1]=t[1];return i},SS=function(e,t,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&t&&t.length>=2){for(var o=VI(t,function(f){return f.coordinate}),a=1/0,s=1,l=o.length;s<l;s++){var u=o[s],c=o[s-1];a=Math.min((u.coordinate||0)-(c.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0},h6=function(e,t,r){return!e||!e.length||Gp(e,Hu(r,"type.defaultProps.domain"))?t:e},QG=function(e,t){var r=e.props,i=r.dataKey,o=r.name,a=r.unit,s=r.formatter,l=r.tooltipType,u=r.chartType,c=r.hide;return Fu(Fu({},pr(e,!1)),{},{dataKey:i,unit:a,formatter:s,name:o||i,color:mR(e),value:Da(t,i),type:l,payload:t,chartType:u,hide:c})};function hy(n){"@babel/helpers - typeof";return hy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hy(n)}function p6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function m6(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?p6(Object(t),!0).forEach(function(r){l0e(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):p6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function l0e(n,e,t){return e=u0e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function u0e(n){var e=c0e(n,"string");return hy(e)=="symbol"?e:String(e)}function c0e(n,e){if(hy(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(hy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var wS=Math.PI/180,f0e=function(e){return e*180/Math.PI},cs=function(e,t,r,i){return{x:e+Math.cos(-wS*i)*r,y:t+Math.sin(-wS*i)*r}},d0e=function(e,t){var r=e.x,i=e.y,o=t.x,a=t.y;return Math.sqrt(Math.pow(r-o,2)+Math.pow(i-a,2))},h0e=function(e,t){var r=e.x,i=e.y,o=t.cx,a=t.cy,s=d0e({x:r,y:i},{x:o,y:a});if(s<=0)return{radius:s};var l=(r-o)/s,u=Math.acos(l);return i>a&&(u=2*Math.PI-u),{radius:s,angle:f0e(u),angleInRadian:u}},p0e=function(e){var t=e.startAngle,r=e.endAngle,i=Math.floor(t/360),o=Math.floor(r/360),a=Math.min(i,o);return{startAngle:t-a*360,endAngle:r-a*360}},m0e=function(e,t){var r=t.startAngle,i=t.endAngle,o=Math.floor(r/360),a=Math.floor(i/360),s=Math.min(o,a);return e+s*360},g6=function(e,t){var r=e.x,i=e.y,o=h0e({x:r,y:i},t),a=o.radius,s=o.angle,l=t.innerRadius,u=t.outerRadius;if(a<l||a>u)return!1;if(a===0)return!0;var c=p0e(t),f=c.startAngle,h=c.endAngle,p=s,v;if(f<=h){for(;p>h;)p-=360;for(;p<f;)p+=360;v=p>=f&&p<=h}else{for(;p>f;)p-=360;for(;p<h;)p+=360;v=p>=h&&p<=f}return v?m6(m6({},t),{},{radius:a,angle:m0e(p,t)}):null};function py(n){"@babel/helpers - typeof";return py=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},py(n)}var g0e=["offset"];function v0e(n){return S0e(n)||_0e(n)||x0e(n)||y0e()}function y0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function x0e(n,e){if(n){if(typeof n=="string")return I5(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return I5(n,e)}}function _0e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function S0e(n){if(Array.isArray(n))return I5(n)}function I5(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function w0e(n,e){if(n==null)return{};var t=b0e(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function b0e(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function v6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ra(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?v6(Object(t),!0).forEach(function(r){A0e(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):v6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function A0e(n,e,t){return e=E0e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function E0e(n){var e=T0e(n,"string");return py(e)=="symbol"?e:String(e)}function T0e(n,e){if(py(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(py(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function my(){return my=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},my.apply(this,arguments)}var M0e=function(e){var t=e.value,r=e.formatter,i=mr(e.children)?t:e.children;return Ar(r)?r(i):i},C0e=function(e,t){var r=Ic(t-e),i=Math.min(Math.abs(t-e),360);return r*i},P0e=function(e,t,r){var i=e.position,o=e.viewBox,a=e.offset,s=e.className,l=o,u=l.cx,c=l.cy,f=l.innerRadius,h=l.outerRadius,p=l.startAngle,v=l.endAngle,S=l.clockWise,y=(f+h)/2,_=C0e(p,v),w=_>=0?1:-1,A,E;i==="insideStart"?(A=p+w*a,E=S):i==="insideEnd"?(A=v-w*a,E=!S):i==="end"&&(A=v+w*a,E=S),E=_<=0?E:!E;var P=cs(u,c,y,A),O=cs(u,c,y,A+(E?1:-1)*359),L="M".concat(P.x,",").concat(P.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(E?0:1,`,
    `).concat(O.x,",").concat(O.y),D=mr(e.id)?em("recharts-radial-line-"):e.id;return Ve.createElement("text",my({},r,{dominantBaseline:"central",className:qr("recharts-radial-bar-label",s)}),Ve.createElement("defs",null,Ve.createElement("path",{id:D,d:L})),Ve.createElement("textPath",{xlinkHref:"#".concat(D)},t))},I0e=function(e){var t=e.viewBox,r=e.offset,i=e.position,o=t,a=o.cx,s=o.cy,l=o.innerRadius,u=o.outerRadius,c=o.startAngle,f=o.endAngle,h=(c+f)/2;if(i==="outside"){var p=cs(a,s,u+r,h),v=p.x,S=p.y;return{x:v,y:S,textAnchor:v>=a?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"end"};var y=(l+u)/2,_=cs(a,s,y,h),w=_.x,A=_.y;return{x:w,y:A,textAnchor:"middle",verticalAnchor:"middle"}},R0e=function(e){var t=e.viewBox,r=e.parentViewBox,i=e.offset,o=e.position,a=t,s=a.x,l=a.y,u=a.width,c=a.height,f=c>=0?1:-1,h=f*i,p=f>0?"end":"start",v=f>0?"start":"end",S=u>=0?1:-1,y=S*i,_=S>0?"end":"start",w=S>0?"start":"end";if(o==="top"){var A={x:s+u/2,y:l-f*i,textAnchor:"middle",verticalAnchor:p};return Ra(Ra({},A),r?{height:Math.max(l-r.y,0),width:u}:{})}if(o==="bottom"){var E={x:s+u/2,y:l+c+h,textAnchor:"middle",verticalAnchor:v};return Ra(Ra({},E),r?{height:Math.max(r.y+r.height-(l+c),0),width:u}:{})}if(o==="left"){var P={x:s-y,y:l+c/2,textAnchor:_,verticalAnchor:"middle"};return Ra(Ra({},P),r?{width:Math.max(P.x-r.x,0),height:c}:{})}if(o==="right"){var O={x:s+u+y,y:l+c/2,textAnchor:w,verticalAnchor:"middle"};return Ra(Ra({},O),r?{width:Math.max(r.x+r.width-O.x,0),height:c}:{})}var L=r?{width:u,height:c}:{};return o==="insideLeft"?Ra({x:s+y,y:l+c/2,textAnchor:w,verticalAnchor:"middle"},L):o==="insideRight"?Ra({x:s+u-y,y:l+c/2,textAnchor:_,verticalAnchor:"middle"},L):o==="insideTop"?Ra({x:s+u/2,y:l+h,textAnchor:"middle",verticalAnchor:v},L):o==="insideBottom"?Ra({x:s+u/2,y:l+c-h,textAnchor:"middle",verticalAnchor:p},L):o==="insideTopLeft"?Ra({x:s+y,y:l+h,textAnchor:w,verticalAnchor:v},L):o==="insideTopRight"?Ra({x:s+u-y,y:l+h,textAnchor:_,verticalAnchor:v},L):o==="insideBottomLeft"?Ra({x:s+y,y:l+c-h,textAnchor:w,verticalAnchor:p},L):o==="insideBottomRight"?Ra({x:s+u-y,y:l+c-h,textAnchor:_,verticalAnchor:p},L):Zg(o)&&(an(o.x)||xp(o.x))&&(an(o.y)||xp(o.y))?Ra({x:s+Vp(o.x,u),y:l+Vp(o.y,c),textAnchor:"end",verticalAnchor:"end"},L):Ra({x:s+u/2,y:l+c/2,textAnchor:"middle",verticalAnchor:"middle"},L)},N0e=function(e){return"cx"in e&&an(e.cx)};function Ns(n){var e=n.offset,t=e===void 0?5:e,r=w0e(n,g0e),i=Ra({offset:t},r),o=i.viewBox,a=i.position,s=i.value,l=i.children,u=i.content,c=i.className,f=c===void 0?"":c,h=i.textBreakAll;if(!o||mr(s)&&mr(l)&&!Me.isValidElement(u)&&!Ar(u))return null;if(Me.isValidElement(u))return Me.cloneElement(u,i);var p;if(Ar(u)){if(p=Me.createElement(u,i),Me.isValidElement(p))return p}else p=M0e(i);var v=N0e(o),S=pr(i,!0);if(v&&(a==="insideStart"||a==="insideEnd"||a==="end"))return P0e(i,p,S);var y=v?I0e(i):R0e(i);return Ve.createElement(lS,my({className:qr("recharts-label",f)},S,y,{breakAll:h}),p)}Ns.displayName="Label";var eq=function(e){var t=e.cx,r=e.cy,i=e.angle,o=e.startAngle,a=e.endAngle,s=e.r,l=e.radius,u=e.innerRadius,c=e.outerRadius,f=e.x,h=e.y,p=e.top,v=e.left,S=e.width,y=e.height,_=e.clockWise,w=e.labelViewBox;if(w)return w;if(an(S)&&an(y)){if(an(f)&&an(h))return{x:f,y:h,width:S,height:y};if(an(p)&&an(v))return{x:p,y:v,width:S,height:y}}return an(f)&&an(h)?{x:f,y:h,width:0,height:0}:an(t)&&an(r)?{cx:t,cy:r,startAngle:o||i||0,endAngle:a||i||0,innerRadius:u||0,outerRadius:c||l||s||0,clockWise:_}:e.viewBox?e.viewBox:{}},L0e=function(e,t){return e?e===!0?Ve.createElement(Ns,{key:"label-implicit",viewBox:t}):Oa(e)?Ve.createElement(Ns,{key:"label-implicit",viewBox:t,value:e}):Me.isValidElement(e)?e.type===Ns?Me.cloneElement(e,{key:"label-implicit",viewBox:t}):Ve.createElement(Ns,{key:"label-implicit",content:e,viewBox:t}):Ar(e)?Ve.createElement(Ns,{key:"label-implicit",content:e,viewBox:t}):Zg(e)?Ve.createElement(Ns,my({viewBox:t},e,{key:"label-implicit"})):null:null},O0e=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,o=eq(e),a=Fl(i,Ns).map(function(l,u){return Me.cloneElement(l,{viewBox:t||o,key:"label-".concat(u)})});if(!r)return a;var s=L0e(e.label,t||o);return[s].concat(v0e(a))};Ns.parseViewBox=eq;Ns.renderCallByParent=O0e;var MM,y6;function D0e(){if(y6)return MM;y6=1;function n(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}return MM=n,MM}var k0e=D0e();const F0e=gi(k0e);function gy(n){"@babel/helpers - typeof";return gy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gy(n)}var U0e=["valueAccessor"],B0e=["data","dataKey","clockWise","id","textBreakAll"];function z0e(n){return q0e(n)||G0e(n)||V0e(n)||H0e()}function H0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V0e(n,e){if(n){if(typeof n=="string")return R5(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return R5(n,e)}}function G0e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function q0e(n){if(Array.isArray(n))return R5(n)}function R5(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function bS(){return bS=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},bS.apply(this,arguments)}function x6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function _6(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?x6(Object(t),!0).forEach(function(r){W0e(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):x6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function W0e(n,e,t){return e=j0e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function j0e(n){var e=$0e(n,"string");return gy(e)=="symbol"?e:String(e)}function $0e(n,e){if(gy(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(gy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function S6(n,e){if(n==null)return{};var t=X0e(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function X0e(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}var Y0e=function(e){return Array.isArray(e.value)?F0e(e.value):e.value};function Sf(n){var e=n.valueAccessor,t=e===void 0?Y0e:e,r=S6(n,U0e),i=r.data,o=r.dataKey,a=r.clockWise,s=r.id,l=r.textBreakAll,u=S6(r,B0e);return!i||!i.length?null:Ve.createElement(pi,{className:"recharts-label-list"},i.map(function(c,f){var h=mr(o)?t(c,f):Da(c&&c.payload,o),p=mr(s)?{}:{id:"".concat(s,"-").concat(f)};return Ve.createElement(Ns,bS({},pr(c,!0),u,p,{parentViewBox:c.parentViewBox,value:h,textBreakAll:l,viewBox:Ns.parseViewBox(mr(a)?c:_6(_6({},c),{},{clockWise:a})),key:"label-".concat(f),index:f}))}))}Sf.displayName="LabelList";function K0e(n,e){return n?n===!0?Ve.createElement(Sf,{key:"labelList-implicit",data:e}):Ve.isValidElement(n)||Ar(n)?Ve.createElement(Sf,{key:"labelList-implicit",data:e,content:n}):Zg(n)?Ve.createElement(Sf,bS({data:e},n,{key:"labelList-implicit"})):null:null}function J0e(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!n||!n.children&&t&&!n.label)return null;var r=n.children,i=Fl(r,Sf).map(function(a,s){return Me.cloneElement(a,{data:e,key:"labelList-".concat(s)})});if(!t)return i;var o=K0e(n.label,e);return[o].concat(z0e(i))}Sf.renderCallByParent=J0e;function vy(n){"@babel/helpers - typeof";return vy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vy(n)}function N5(){return N5=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},N5.apply(this,arguments)}function w6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function b6(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?w6(Object(t),!0).forEach(function(r){Z0e(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):w6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Z0e(n,e,t){return e=Q0e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Q0e(n){var e=eye(n,"string");return vy(e)=="symbol"?e:String(e)}function eye(n,e){if(vy(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(vy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var tye=function(e,t){var r=Ic(t-e),i=Math.min(Math.abs(t-e),359.999);return r*i},jx=function(e){var t=e.cx,r=e.cy,i=e.radius,o=e.angle,a=e.sign,s=e.isExternal,l=e.cornerRadius,u=e.cornerIsExternal,c=l*(s?1:-1)+i,f=Math.asin(l/c)/wS,h=u?o:o+a*f,p=cs(t,r,c,h),v=cs(t,r,i,h),S=u?o-a*f:o,y=cs(t,r,c*Math.cos(f*wS),S);return{center:p,circleTangency:v,lineTangency:y,theta:f}},tq=function(e){var t=e.cx,r=e.cy,i=e.innerRadius,o=e.outerRadius,a=e.startAngle,s=e.endAngle,l=tye(a,s),u=a+l,c=cs(t,r,o,a),f=cs(t,r,o,u),h="M ".concat(c.x,",").concat(c.y,`
    A `).concat(o,",").concat(o,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(a>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(i>0){var p=cs(t,r,i,a),v=cs(t,r,i,u);h+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(a<=u),`,
            `).concat(p.x,",").concat(p.y," Z")}else h+="L ".concat(t,",").concat(r," Z");return h},nye=function(e){var t=e.cx,r=e.cy,i=e.innerRadius,o=e.outerRadius,a=e.cornerRadius,s=e.forceCornerRadius,l=e.cornerIsExternal,u=e.startAngle,c=e.endAngle,f=Ic(c-u),h=jx({cx:t,cy:r,radius:o,angle:u,sign:f,cornerRadius:a,cornerIsExternal:l}),p=h.circleTangency,v=h.lineTangency,S=h.theta,y=jx({cx:t,cy:r,radius:o,angle:c,sign:-f,cornerRadius:a,cornerIsExternal:l}),_=y.circleTangency,w=y.lineTangency,A=y.theta,E=l?Math.abs(u-c):Math.abs(u-c)-S-A;if(E<0)return s?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):tq({cx:t,cy:r,innerRadius:i,outerRadius:o,startAngle:u,endAngle:c});var P="M ".concat(v.x,",").concat(v.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(o,",").concat(o,",0,").concat(+(E>180),",").concat(+(f<0),",").concat(_.x,",").concat(_.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(w.x,",").concat(w.y,`
  `);if(i>0){var O=jx({cx:t,cy:r,radius:i,angle:u,sign:f,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),L=O.circleTangency,D=O.lineTangency,F=O.theta,U=jx({cx:t,cy:r,radius:i,angle:c,sign:-f,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),k=U.circleTangency,z=U.lineTangency,W=U.theta,j=l?Math.abs(u-c):Math.abs(u-c)-F-W;if(j<0&&a===0)return"".concat(P,"L").concat(t,",").concat(r,"Z");P+="L".concat(z.x,",").concat(z.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(k.x,",").concat(k.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(j>180),",").concat(+(f>0),",").concat(L.x,",").concat(L.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(D.x,",").concat(D.y,"Z")}else P+="L".concat(t,",").concat(r,"Z");return P},rye={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},nq=function(e){var t=b6(b6({},rye),e),r=t.cx,i=t.cy,o=t.innerRadius,a=t.outerRadius,s=t.cornerRadius,l=t.forceCornerRadius,u=t.cornerIsExternal,c=t.startAngle,f=t.endAngle,h=t.className;if(a<o||c===f)return null;var p=qr("recharts-sector",h),v=a-o,S=Vp(s,v,0,!0),y;return S>0&&Math.abs(c-f)<360?y=nye({cx:r,cy:i,innerRadius:o,outerRadius:a,cornerRadius:Math.min(S,v/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:c,endAngle:f}):y=tq({cx:r,cy:i,innerRadius:o,outerRadius:a,startAngle:c,endAngle:f}),Ve.createElement("path",N5({},pr(t,!0),{className:p,d:y,role:"img"}))};function yy(n){"@babel/helpers - typeof";return yy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yy(n)}function L5(){return L5=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},L5.apply(this,arguments)}function A6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function E6(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?A6(Object(t),!0).forEach(function(r){iye(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):A6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function iye(n,e,t){return e=oye(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function oye(n){var e=aye(n,"string");return yy(e)=="symbol"?e:String(e)}function aye(n,e){if(yy(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(yy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var T6={curveBasisClosed:Dce,curveBasisOpen:kce,curveBasis:Oce,curveBumpX:_ce,curveBumpY:Sce,curveLinearClosed:Fce,curveLinear:Bw,curveMonotoneX:Uce,curveMonotoneY:Bce,curveNatural:zce,curveStep:Hce,curveStepAfter:Gce,curveStepBefore:Vce},$x=function(e){return e.x===+e.x&&e.y===+e.y},Gv=function(e){return e.x},qv=function(e){return e.y},sye=function(e,t){if(Ar(e))return e;var r="curve".concat(Fw(e));return(r==="curveMonotone"||r==="curveBump")&&t?T6["".concat(r).concat(t==="vertical"?"Y":"X")]:T6[r]||Bw},lye=function(e){var t=e.type,r=t===void 0?"linear":t,i=e.points,o=i===void 0?[]:i,a=e.baseLine,s=e.layout,l=e.connectNulls,u=l===void 0?!1:l,c=sye(r,s),f=u?o.filter(function(S){return $x(S)}):o,h;if(Array.isArray(a)){var p=u?a.filter(function(S){return $x(S)}):a,v=f.map(function(S,y){return E6(E6({},S),{},{base:p[y]})});return s==="vertical"?h=Ux().y(qv).x1(Gv).x0(function(S){return S.base.x}):h=Ux().x(Gv).y1(qv).y0(function(S){return S.base.y}),h.defined($x).curve(c),h(v)}return s==="vertical"&&an(a)?h=Ux().y(qv).x1(Gv).x0(a):an(a)?h=Ux().x(Gv).y1(qv).y0(a):h=uV().x(Gv).y(qv),h.defined($x).curve(c),h(f)},Dp=function(e){var t=e.className,r=e.points,i=e.path,o=e.pathRef;if((!r||!r.length)&&!i)return null;var a=r&&r.length?lye(e):i;return Ve.createElement("path",L5({},pr(e,!1),J_(e),{className:qr("recharts-curve",t),d:a,ref:o}))};const{getOwnPropertyNames:uye,getOwnPropertySymbols:cye}=Object,{hasOwnProperty:fye}=Object.prototype;function CM(n,e){return function(r,i,o){return n(r,i,o)&&e(r,i,o)}}function Xx(n){return function(t,r,i){if(!t||!r||typeof t!="object"||typeof r!="object")return n(t,r,i);const{cache:o}=i,a=o.get(t),s=o.get(r);if(a&&s)return a===r&&s===t;o.set(t,r),o.set(r,t);const l=n(t,r,i);return o.delete(t),o.delete(r),l}}function dye(n){return n!=null?n[Symbol.toStringTag]:void 0}function M6(n){return uye(n).concat(cye(n))}const hye=Object.hasOwn||((n,e)=>fye.call(n,e));function rm(n,e){return n===e||!n&&!e&&n!==n&&e!==e}const pye="__v",mye="__o",gye="_owner",{getOwnPropertyDescriptor:C6,keys:P6}=Object;function vye(n,e){return n.byteLength===e.byteLength&&AS(new Uint8Array(n),new Uint8Array(e))}function yye(n,e,t){let r=n.length;if(e.length!==r)return!1;for(;r-- >0;)if(!t.equals(n[r],e[r],r,r,n,e,t))return!1;return!0}function xye(n,e){return n.byteLength===e.byteLength&&AS(new Uint8Array(n.buffer,n.byteOffset,n.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function _ye(n,e){return rm(n.getTime(),e.getTime())}function Sye(n,e){return n.name===e.name&&n.message===e.message&&n.cause===e.cause&&n.stack===e.stack}function wye(n,e){return n===e}function I6(n,e,t){const r=n.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),o=n.entries();let a,s,l=0;for(;(a=o.next())&&!a.done;){const u=e.entries();let c=!1,f=0;for(;(s=u.next())&&!s.done;){if(i[f]){f++;continue}const h=a.value,p=s.value;if(t.equals(h[0],p[0],l,f,n,e,t)&&t.equals(h[1],p[1],h[0],p[0],n,e,t)){c=i[f]=!0;break}f++}if(!c)return!1;l++}return!0}const bye=rm;function Aye(n,e,t){const r=P6(n);let i=r.length;if(P6(e).length!==i)return!1;for(;i-- >0;)if(!rq(n,e,t,r[i]))return!1;return!0}function Wv(n,e,t){const r=M6(n);let i=r.length;if(M6(e).length!==i)return!1;let o,a,s;for(;i-- >0;)if(o=r[i],!rq(n,e,t,o)||(a=C6(n,o),s=C6(e,o),(a||s)&&(!a||!s||a.configurable!==s.configurable||a.enumerable!==s.enumerable||a.writable!==s.writable)))return!1;return!0}function Eye(n,e){return rm(n.valueOf(),e.valueOf())}function Tye(n,e){return n.source===e.source&&n.flags===e.flags}function R6(n,e,t){const r=n.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),o=n.values();let a,s;for(;(a=o.next())&&!a.done;){const l=e.values();let u=!1,c=0;for(;(s=l.next())&&!s.done;){if(!i[c]&&t.equals(a.value,s.value,a.value,s.value,n,e,t)){u=i[c]=!0;break}c++}if(!u)return!1}return!0}function AS(n,e){let t=n.byteLength;if(e.byteLength!==t||n.byteOffset!==e.byteOffset)return!1;for(;t-- >0;)if(n[t]!==e[t])return!1;return!0}function Mye(n,e){return n.hostname===e.hostname&&n.pathname===e.pathname&&n.protocol===e.protocol&&n.port===e.port&&n.hash===e.hash&&n.username===e.username&&n.password===e.password}function rq(n,e,t,r){return(r===gye||r===mye||r===pye)&&(n.$$typeof||e.$$typeof)?!0:hye(e,r)&&t.equals(n[r],e[r],r,r,n,e,t)}const Cye="[object ArrayBuffer]",Pye="[object Arguments]",Iye="[object Boolean]",Rye="[object DataView]",Nye="[object Date]",Lye="[object Error]",Oye="[object Map]",Dye="[object Number]",kye="[object Object]",Fye="[object RegExp]",Uye="[object Set]",Bye="[object String]",zye={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},Hye="[object URL]",Vye=Object.prototype.toString;function Gye({areArrayBuffersEqual:n,areArraysEqual:e,areDataViewsEqual:t,areDatesEqual:r,areErrorsEqual:i,areFunctionsEqual:o,areMapsEqual:a,areNumbersEqual:s,areObjectsEqual:l,arePrimitiveWrappersEqual:u,areRegExpsEqual:c,areSetsEqual:f,areTypedArraysEqual:h,areUrlsEqual:p,unknownTagComparators:v}){return function(y,_,w){if(y===_)return!0;if(y==null||_==null)return!1;const A=typeof y;if(A!==typeof _)return!1;if(A!=="object")return A==="number"?s(y,_,w):A==="function"?o(y,_,w):!1;const E=y.constructor;if(E!==_.constructor)return!1;if(E===Object)return l(y,_,w);if(Array.isArray(y))return e(y,_,w);if(E===Date)return r(y,_,w);if(E===RegExp)return c(y,_,w);if(E===Map)return a(y,_,w);if(E===Set)return f(y,_,w);const P=Vye.call(y);if(P===Nye)return r(y,_,w);if(P===Fye)return c(y,_,w);if(P===Oye)return a(y,_,w);if(P===Uye)return f(y,_,w);if(P===kye)return typeof y.then!="function"&&typeof _.then!="function"&&l(y,_,w);if(P===Hye)return p(y,_,w);if(P===Lye)return i(y,_,w);if(P===Pye)return l(y,_,w);if(zye[P])return h(y,_,w);if(P===Cye)return n(y,_,w);if(P===Rye)return t(y,_,w);if(P===Iye||P===Dye||P===Bye)return u(y,_,w);if(v){let O=v[P];if(!O){const L=dye(y);L&&(O=v[L])}if(O)return O(y,_,w)}return!1}}function qye({circular:n,createCustomConfig:e,strict:t}){let r={areArrayBuffersEqual:vye,areArraysEqual:t?Wv:yye,areDataViewsEqual:xye,areDatesEqual:_ye,areErrorsEqual:Sye,areFunctionsEqual:wye,areMapsEqual:t?CM(I6,Wv):I6,areNumbersEqual:bye,areObjectsEqual:t?Wv:Aye,arePrimitiveWrappersEqual:Eye,areRegExpsEqual:Tye,areSetsEqual:t?CM(R6,Wv):R6,areTypedArraysEqual:t?CM(AS,Wv):AS,areUrlsEqual:Mye,unknownTagComparators:void 0};if(e&&(r=Object.assign({},r,e(r))),n){const i=Xx(r.areArraysEqual),o=Xx(r.areMapsEqual),a=Xx(r.areObjectsEqual),s=Xx(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:a,areSetsEqual:s})}return r}function Wye(n){return function(e,t,r,i,o,a,s){return n(e,t,s)}}function jye({circular:n,comparator:e,createState:t,equals:r,strict:i}){if(t)return function(s,l){const{cache:u=n?new WeakMap:void 0,meta:c}=t();return e(s,l,{cache:u,equals:r,meta:c,strict:i})};if(n)return function(s,l){return e(s,l,{cache:new WeakMap,equals:r,meta:void 0,strict:i})};const o={cache:void 0,equals:r,meta:void 0,strict:i};return function(s,l){return e(s,l,o)}}const $ye=Ch();Ch({strict:!0});Ch({circular:!0});Ch({circular:!0,strict:!0});Ch({createInternalComparator:()=>rm});Ch({strict:!0,createInternalComparator:()=>rm});Ch({circular:!0,createInternalComparator:()=>rm});Ch({circular:!0,createInternalComparator:()=>rm,strict:!0});function Ch(n={}){const{circular:e=!1,createInternalComparator:t,createState:r,strict:i=!1}=n,o=qye(n),a=Gye(o),s=t?t(a):Wye(a);return jye({circular:e,comparator:a,createState:r,equals:s,strict:i})}function Xye(n){typeof requestAnimationFrame<"u"&&requestAnimationFrame(n)}function N6(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=-1,r=function i(o){t<0&&(t=o),o-t>e?(n(o),t=-1):Xye(i)};requestAnimationFrame(r)}function O5(n){"@babel/helpers - typeof";return O5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O5(n)}function Yye(n){return Qye(n)||Zye(n)||Jye(n)||Kye()}function Kye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jye(n,e){if(n){if(typeof n=="string")return L6(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return L6(n,e)}}function L6(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Zye(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Qye(n){if(Array.isArray(n))return n}function e1e(){var n={},e=function(){return null},t=!1,r=function i(o){if(!t){if(Array.isArray(o)){if(!o.length)return;var a=o,s=Yye(a),l=s[0],u=s.slice(1);if(typeof l=="number"){N6(i.bind(null,u),l);return}i(l),N6(i.bind(null,u));return}O5(o)==="object"&&(n=o,e(n)),typeof o=="function"&&o()}};return{stop:function(){t=!0},start:function(o){t=!1,r(o)},subscribe:function(o){return e=o,function(){e=function(){return null}}}}}function xy(n){"@babel/helpers - typeof";return xy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xy(n)}function O6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function D6(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?O6(Object(t),!0).forEach(function(r){iq(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):O6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function iq(n,e,t){return e=t1e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function t1e(n){var e=n1e(n,"string");return xy(e)==="symbol"?e:String(e)}function n1e(n,e){if(xy(n)!=="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(xy(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var r1e=function(e,t){return[Object.keys(e),Object.keys(t)].reduce(function(r,i){return r.filter(function(o){return i.includes(o)})})},i1e=function(e){return e},o1e=function(e){return e.replace(/([A-Z])/g,function(t){return"-".concat(t.toLowerCase())})},b0=function(e,t){return Object.keys(t).reduce(function(r,i){return D6(D6({},r),{},iq({},i,e(i,t[i])))},{})},k6=function(e,t,r){return e.map(function(i){return"".concat(o1e(i)," ").concat(t,"ms ").concat(r)}).join(",")};function a1e(n,e){return u1e(n)||l1e(n,e)||oq(n,e)||s1e()}function s1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l1e(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(t=t.call(n)).next,e!==0)for(;!(l=(r=o.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function u1e(n){if(Array.isArray(n))return n}function c1e(n){return h1e(n)||d1e(n)||oq(n)||f1e()}function f1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oq(n,e){if(n){if(typeof n=="string")return D5(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return D5(n,e)}}function d1e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function h1e(n){if(Array.isArray(n))return D5(n)}function D5(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var ES=1e-4,aq=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},sq=function(e,t){return e.map(function(r,i){return r*Math.pow(t,i)}).reduce(function(r,i){return r+i})},F6=function(e,t){return function(r){var i=aq(e,t);return sq(i,r)}},p1e=function(e,t){return function(r){var i=aq(e,t),o=[].concat(c1e(i.map(function(a,s){return a*s}).slice(1)),[0]);return sq(o,r)}},U6=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],o=t[1],a=t[2],s=t[3];if(t.length===1)switch(t[0]){case"linear":i=0,o=0,a=1,s=1;break;case"ease":i=.25,o=.1,a=.25,s=1;break;case"ease-in":i=.42,o=0,a=1,s=1;break;case"ease-out":i=.42,o=0,a=.58,s=1;break;case"ease-in-out":i=0,o=0,a=.58,s=1;break;default:{var l=t[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var u=l[1].split(")")[0].split(",").map(function(y){return parseFloat(y)}),c=a1e(u,4);i=c[0],o=c[1],a=c[2],s=c[3]}}}var f=F6(i,a),h=F6(o,s),p=p1e(i,a),v=function(_){return _>1?1:_<0?0:_},S=function(_){for(var w=_>1?1:_,A=w,E=0;E<8;++E){var P=f(A)-w,O=p(A);if(Math.abs(P-w)<ES||O<ES)return h(A);A=v(A-P/O)}return h(A)};return S.isStepper=!1,S},m1e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.stiff,r=t===void 0?100:t,i=e.damping,o=i===void 0?8:i,a=e.dt,s=a===void 0?17:a,l=function(c,f,h){var p=-(c-f)*r,v=h*o,S=h+(p-v)*s/1e3,y=h*s/1e3+c;return Math.abs(y-f)<ES&&Math.abs(S)<ES?[f,0]:[y,S]};return l.isStepper=!0,l.dt=s,l},g1e=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return U6(i);case"spring":return m1e();default:if(i.split("(")[0]==="cubic-bezier")return U6(i)}return typeof i=="function"?i:null};function _y(n){"@babel/helpers - typeof";return _y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_y(n)}function B6(n){return x1e(n)||y1e(n)||lq(n)||v1e()}function v1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y1e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function x1e(n){if(Array.isArray(n))return F5(n)}function z6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function us(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?z6(Object(t),!0).forEach(function(r){k5(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):z6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function k5(n,e,t){return e=_1e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _1e(n){var e=S1e(n,"string");return _y(e)==="symbol"?e:String(e)}function S1e(n,e){if(_y(n)!=="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(_y(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function w1e(n,e){return E1e(n)||A1e(n,e)||lq(n,e)||b1e()}function b1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lq(n,e){if(n){if(typeof n=="string")return F5(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return F5(n,e)}}function F5(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function A1e(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(t=t.call(n)).next,e!==0)for(;!(l=(r=o.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function E1e(n){if(Array.isArray(n))return n}var TS=function(e,t,r){return e+(t-e)*r},U5=function(e){var t=e.from,r=e.to;return t!==r},T1e=function n(e,t,r){var i=b0(function(o,a){if(U5(a)){var s=e(a.from,a.to,a.velocity),l=w1e(s,2),u=l[0],c=l[1];return us(us({},a),{},{from:u,velocity:c})}return a},t);return r<1?b0(function(o,a){return U5(a)?us(us({},a),{},{velocity:TS(a.velocity,i[o].velocity,r),from:TS(a.from,i[o].from,r)}):a},t):n(e,i,r-1)};const M1e=(function(n,e,t,r,i){var o=r1e(n,e),a=o.reduce(function(y,_){return us(us({},y),{},k5({},_,[n[_],e[_]]))},{}),s=o.reduce(function(y,_){return us(us({},y),{},k5({},_,{from:n[_],velocity:0,to:e[_]}))},{}),l=-1,u,c,f=function(){return null},h=function(){return b0(function(_,w){return w.from},s)},p=function(){return!Object.values(s).filter(U5).length},v=function(_){u||(u=_);var w=_-u,A=w/t.dt;s=T1e(t,s,A),i(us(us(us({},n),e),h())),u=_,p()||(l=requestAnimationFrame(f))},S=function(_){c||(c=_);var w=(_-c)/r,A=b0(function(P,O){return TS.apply(void 0,B6(O).concat([t(w)]))},a);if(i(us(us(us({},n),e),A)),w<1)l=requestAnimationFrame(f);else{var E=b0(function(P,O){return TS.apply(void 0,B6(O).concat([t(1)]))},a);i(us(us(us({},n),e),E))}};return f=t.isStepper?v:S,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(l)}}});function Lg(n){"@babel/helpers - typeof";return Lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lg(n)}var C1e=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function P1e(n,e){if(n==null)return{};var t=I1e(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function I1e(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function PM(n){return O1e(n)||L1e(n)||N1e(n)||R1e()}function R1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function N1e(n,e){if(n){if(typeof n=="string")return B5(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return B5(n,e)}}function L1e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function O1e(n){if(Array.isArray(n))return B5(n)}function B5(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function H6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function bc(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?H6(Object(t),!0).forEach(function(r){e0(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):H6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function e0(n,e,t){return e=uq(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function D1e(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function k1e(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,uq(r.key),r)}}function F1e(n,e,t){return e&&k1e(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function uq(n){var e=U1e(n,"string");return Lg(e)==="symbol"?e:String(e)}function U1e(n,e){if(Lg(n)!=="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Lg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function B1e(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&z5(n,e)}function z5(n,e){return z5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},z5(n,e)}function z1e(n){var e=H1e();return function(){var r=MS(n),i;if(e){var o=MS(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return H5(this,i)}}function H5(n,e){if(e&&(Lg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return V5(n)}function V5(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function H1e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function MS(n){return MS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},MS(n)}var Dc=(function(n){B1e(t,n);var e=z1e(t);function t(r,i){var o;D1e(this,t),o=e.call(this,r,i);var a=o.props,s=a.isActive,l=a.attributeName,u=a.from,c=a.to,f=a.steps,h=a.children,p=a.duration;if(o.handleStyleChange=o.handleStyleChange.bind(V5(o)),o.changeStyle=o.changeStyle.bind(V5(o)),!s||p<=0)return o.state={style:{}},typeof h=="function"&&(o.state={style:c}),H5(o);if(f&&f.length)o.state={style:f[0].style};else if(u){if(typeof h=="function")return o.state={style:u},H5(o);o.state={style:l?e0({},l,u):u}}else o.state={style:{}};return o}return F1e(t,[{key:"componentDidMount",value:function(){var i=this.props,o=i.isActive,a=i.canBegin;this.mounted=!0,!(!o||!a)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var o=this.props,a=o.isActive,s=o.canBegin,l=o.attributeName,u=o.shouldReAnimate,c=o.to,f=o.from,h=this.state.style;if(s){if(!a){var p={style:l?e0({},l,c):c};this.state&&h&&(l&&h[l]!==c||!l&&h!==c)&&this.setState(p);return}if(!($ye(i.to,c)&&i.canBegin&&i.isActive)){var v=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var S=v||u?f:i.to;if(this.state&&h){var y={style:l?e0({},l,S):S};(l&&h[l]!==S||!l&&h!==S)&&this.setState(y)}this.runAnimation(bc(bc({},this.props),{},{from:S,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var o=this,a=i.from,s=i.to,l=i.duration,u=i.easing,c=i.begin,f=i.onAnimationEnd,h=i.onAnimationStart,p=M1e(a,s,g1e(u),l,this.changeStyle),v=function(){o.stopJSAnimation=p()};this.manager.start([h,c,v,l,f])}},{key:"runStepAnimation",value:function(i){var o=this,a=i.steps,s=i.begin,l=i.onAnimationStart,u=a[0],c=u.style,f=u.duration,h=f===void 0?0:f,p=function(S,y,_){if(_===0)return S;var w=y.duration,A=y.easing,E=A===void 0?"ease":A,P=y.style,O=y.properties,L=y.onAnimationEnd,D=_>0?a[_-1]:y,F=O||Object.keys(P);if(typeof E=="function"||E==="spring")return[].concat(PM(S),[o.runJSAnimation.bind(o,{from:D.style,to:P,duration:w,easing:E}),w]);var U=k6(F,w,E),k=bc(bc(bc({},D.style),P),{},{transition:U});return[].concat(PM(S),[k,w,L]).filter(i1e)};return this.manager.start([l].concat(PM(a.reduce(p,[c,Math.max(h,s)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=e1e());var o=i.begin,a=i.duration,s=i.attributeName,l=i.to,u=i.easing,c=i.onAnimationStart,f=i.onAnimationEnd,h=i.steps,p=i.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof u=="function"||typeof p=="function"||u==="spring"){this.runJSAnimation(i);return}if(h.length>1){this.runStepAnimation(i);return}var S=s?e0({},s,l):l,y=k6(Object.keys(S),a,u);v.start([c,o,bc(bc({},S),{},{transition:y}),a,f])}},{key:"render",value:function(){var i=this.props,o=i.children;i.begin;var a=i.duration;i.attributeName,i.easing;var s=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=P1e(i,C1e),u=Me.Children.count(o),c=this.state.style;if(typeof o=="function")return o(c);if(!s||u===0||a<=0)return o;var f=function(p){var v=p.props,S=v.style,y=S===void 0?{}:S,_=v.className,w=Me.cloneElement(p,bc(bc({},l),{},{style:bc(bc({},y),c),className:_}));return w};return u===1?f(Me.Children.only(o)):Ve.createElement("div",null,Me.Children.map(o,function(h){return f(h)}))}}]),t})(Me.PureComponent);Dc.displayName="Animate";Dc.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Dc.propTypes={from:xi.oneOfType([xi.object,xi.string]),to:xi.oneOfType([xi.object,xi.string]),attributeName:xi.string,duration:xi.number,begin:xi.number,easing:xi.oneOfType([xi.string,xi.func]),steps:xi.arrayOf(xi.shape({duration:xi.number.isRequired,style:xi.object.isRequired,easing:xi.oneOfType([xi.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),xi.func]),properties:xi.arrayOf("string"),onAnimationEnd:xi.func})),children:xi.oneOfType([xi.node,xi.func]),isActive:xi.bool,canBegin:xi.bool,onAnimationEnd:xi.func,shouldReAnimate:xi.bool,onAnimationStart:xi.func,onAnimationReStart:xi.func};function Sy(n){"@babel/helpers - typeof";return Sy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sy(n)}function CS(){return CS=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},CS.apply(this,arguments)}function V1e(n,e){return j1e(n)||W1e(n,e)||q1e(n,e)||G1e()}function G1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q1e(n,e){if(n){if(typeof n=="string")return V6(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return V6(n,e)}}function V6(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function W1e(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(t=t.call(n)).next,e!==0)for(;!(l=(r=o.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function j1e(n){if(Array.isArray(n))return n}function G6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function q6(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?G6(Object(t),!0).forEach(function(r){$1e(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):G6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function $1e(n,e,t){return e=X1e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function X1e(n){var e=Y1e(n,"string");return Sy(e)=="symbol"?e:String(e)}function Y1e(n,e){if(Sy(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Sy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var W6=function(e,t,r,i,o){var a=Math.min(Math.abs(r)/2,Math.abs(i)/2),s=i>=0?1:-1,l=r>=0?1:-1,u=i>=0&&r>=0||i<0&&r<0?1:0,c;if(a>0&&o instanceof Array){for(var f=[0,0,0,0],h=0,p=4;h<p;h++)f[h]=o[h]>a?a:o[h];c="M".concat(e,",").concat(t+s*f[0]),f[0]>0&&(c+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(e+l*f[0],",").concat(t)),c+="L ".concat(e+r-l*f[1],",").concat(t),f[1]>0&&(c+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(e+r,",").concat(t+s*f[1])),c+="L ".concat(e+r,",").concat(t+i-s*f[2]),f[2]>0&&(c+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(e+r-l*f[2],",").concat(t+i)),c+="L ".concat(e+l*f[3],",").concat(t+i),f[3]>0&&(c+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(t+i-s*f[3])),c+="Z"}else if(a>0&&o===+o&&o>0){var v=Math.min(a,o);c="M ".concat(e,",").concat(t+s*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(e+l*v,",").concat(t,`
            L `).concat(e+r-l*v,",").concat(t,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(e+r,",").concat(t+s*v,`
            L `).concat(e+r,",").concat(t+i-s*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(e+r-l*v,",").concat(t+i,`
            L `).concat(e+l*v,",").concat(t+i,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(e,",").concat(t+i-s*v," Z")}else c="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return c},K1e=function(e,t){if(!e||!t)return!1;var r=e.x,i=e.y,o=t.x,a=t.y,s=t.width,l=t.height;if(Math.abs(s)>0&&Math.abs(l)>0){var u=Math.min(o,o+s),c=Math.max(o,o+s),f=Math.min(a,a+l),h=Math.max(a,a+l);return r>=u&&r<=c&&i>=f&&i<=h}return!1},J1e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},gR=function(e){var t=q6(q6({},J1e),e),r=Me.useRef(),i=Me.useState(-1),o=V1e(i,2),a=o[0],s=o[1];Me.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var E=r.current.getTotalLength();E&&s(E)}catch{}},[]);var l=t.x,u=t.y,c=t.width,f=t.height,h=t.radius,p=t.className,v=t.animationEasing,S=t.animationDuration,y=t.animationBegin,_=t.isAnimationActive,w=t.isUpdateAnimationActive;if(l!==+l||u!==+u||c!==+c||f!==+f||c===0||f===0)return null;var A=qr("recharts-rectangle",p);return w?Ve.createElement(Dc,{canBegin:a>0,from:{width:c,height:f,x:l,y:u},to:{width:c,height:f,x:l,y:u},duration:S,animationEasing:v,isActive:w},function(E){var P=E.width,O=E.height,L=E.x,D=E.y;return Ve.createElement(Dc,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:S,isActive:_,easing:v},Ve.createElement("path",CS({},pr(t,!0),{className:A,d:W6(L,D,P,O,h),ref:r})))}):Ve.createElement("path",CS({},pr(t,!0),{className:A,d:W6(l,u,c,f,h)}))};function G5(){return G5=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},G5.apply(this,arguments)}var eb=function(e){var t=e.cx,r=e.cy,i=e.r,o=e.className,a=qr("recharts-dot",o);return t===+t&&r===+r&&i===+i?Ve.createElement("circle",G5({},pr(e,!1),J_(e),{className:a,cx:t,cy:r,r:i})):null};function wy(n){"@babel/helpers - typeof";return wy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wy(n)}var Z1e=["x","y","top","left","width","height","className"];function q5(){return q5=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},q5.apply(this,arguments)}function j6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Q1e(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?j6(Object(t),!0).forEach(function(r){exe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):j6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function exe(n,e,t){return e=txe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function txe(n){var e=nxe(n,"string");return wy(e)=="symbol"?e:String(e)}function nxe(n,e){if(wy(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(wy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function rxe(n,e){if(n==null)return{};var t=ixe(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function ixe(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}var oxe=function(e,t,r,i,o,a){return"M".concat(e,",").concat(o,"v").concat(i,"M").concat(a,",").concat(t,"h").concat(r)},axe=function(e){var t=e.x,r=t===void 0?0:t,i=e.y,o=i===void 0?0:i,a=e.top,s=a===void 0?0:a,l=e.left,u=l===void 0?0:l,c=e.width,f=c===void 0?0:c,h=e.height,p=h===void 0?0:h,v=e.className,S=rxe(e,Z1e),y=Q1e({x:r,y:o,top:s,left:u,width:f,height:p},S);return!an(r)||!an(o)||!an(f)||!an(p)||!an(s)||!an(u)?null:Ve.createElement("path",q5({},pr(y,!0),{className:qr("recharts-cross",v),d:oxe(r,o,f,p,s,u)}))},IM,$6;function sxe(){if($6)return IM;$6=1;var n=NV(),e=n(Object.getPrototypeOf,Object);return IM=e,IM}var RM,X6;function lxe(){if(X6)return RM;X6=1;var n=md(),e=sxe(),t=gd(),r="[object Object]",i=Function.prototype,o=Object.prototype,a=i.toString,s=o.hasOwnProperty,l=a.call(Object);function u(c){if(!t(c)||n(c)!=r)return!1;var f=e(c);if(f===null)return!0;var h=s.call(f,"constructor")&&f.constructor;return typeof h=="function"&&h instanceof h&&a.call(h)==l}return RM=u,RM}var uxe=lxe();const cxe=gi(uxe);var NM,Y6;function fxe(){if(Y6)return NM;Y6=1;var n=md(),e=gd(),t="[object Boolean]";function r(i){return i===!0||i===!1||e(i)&&n(i)==t}return NM=r,NM}var dxe=fxe();const hxe=gi(dxe);function by(n){"@babel/helpers - typeof";return by=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},by(n)}function PS(){return PS=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},PS.apply(this,arguments)}function pxe(n,e){return yxe(n)||vxe(n,e)||gxe(n,e)||mxe()}function mxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gxe(n,e){if(n){if(typeof n=="string")return K6(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return K6(n,e)}}function K6(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function vxe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(t=t.call(n)).next,e!==0)for(;!(l=(r=o.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function yxe(n){if(Array.isArray(n))return n}function J6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Z6(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?J6(Object(t),!0).forEach(function(r){xxe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):J6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function xxe(n,e,t){return e=_xe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _xe(n){var e=Sxe(n,"string");return by(e)=="symbol"?e:String(e)}function Sxe(n,e){if(by(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(by(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Q6=function(e,t,r,i,o){var a=r-i,s;return s="M ".concat(e,",").concat(t),s+="L ".concat(e+r,",").concat(t),s+="L ".concat(e+r-a/2,",").concat(t+o),s+="L ".concat(e+r-a/2-i,",").concat(t+o),s+="L ".concat(e,",").concat(t," Z"),s},wxe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},bxe=function(e){var t=Z6(Z6({},wxe),e),r=Me.useRef(),i=Me.useState(-1),o=pxe(i,2),a=o[0],s=o[1];Me.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var A=r.current.getTotalLength();A&&s(A)}catch{}},[]);var l=t.x,u=t.y,c=t.upperWidth,f=t.lowerWidth,h=t.height,p=t.className,v=t.animationEasing,S=t.animationDuration,y=t.animationBegin,_=t.isUpdateAnimationActive;if(l!==+l||u!==+u||c!==+c||f!==+f||h!==+h||c===0&&f===0||h===0)return null;var w=qr("recharts-trapezoid",p);return _?Ve.createElement(Dc,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:h,x:l,y:u},to:{upperWidth:c,lowerWidth:f,height:h,x:l,y:u},duration:S,animationEasing:v,isActive:_},function(A){var E=A.upperWidth,P=A.lowerWidth,O=A.height,L=A.x,D=A.y;return Ve.createElement(Dc,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:S,easing:v},Ve.createElement("path",PS({},pr(t,!0),{className:w,d:Q6(L,D,E,P,O),ref:r})))}):Ve.createElement("g",null,Ve.createElement("path",PS({},pr(t,!0),{className:w,d:Q6(l,u,c,f,h)})))},Axe=["option","shapeType","propTransformer","activeClassName","isActive"];function Ay(n){"@babel/helpers - typeof";return Ay=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ay(n)}function Exe(n,e){if(n==null)return{};var t=Txe(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Txe(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function eB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function IS(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?eB(Object(t),!0).forEach(function(r){Mxe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):eB(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Mxe(n,e,t){return e=Cxe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Cxe(n){var e=Pxe(n,"string");return Ay(e)=="symbol"?e:String(e)}function Pxe(n,e){if(Ay(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Ay(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Ixe(n,e){return IS(IS({},e),n)}function Rxe(n,e){return n==="symbols"}function tB(n){var e=n.shapeType,t=n.elementProps;switch(e){case"rectangle":return Ve.createElement(gR,t);case"trapezoid":return Ve.createElement(bxe,t);case"sector":return Ve.createElement(nq,t);case"symbols":if(Rxe(e))return Ve.createElement(Hw,t);break;default:return null}}function Nxe(n){return Me.isValidElement(n)?n.props:n}function W5(n){var e=n.option,t=n.shapeType,r=n.propTransformer,i=r===void 0?Ixe:r,o=n.activeClassName,a=o===void 0?"recharts-active-shape":o,s=n.isActive,l=Exe(n,Axe),u;if(Me.isValidElement(e))u=Me.cloneElement(e,IS(IS({},l),Nxe(e)));else if(Ar(e))u=e(l);else if(cxe(e)&&!hxe(e)){var c=i(e,l);u=Ve.createElement(tB,{shapeType:t,elementProps:c})}else{var f=l;u=Ve.createElement(tB,{shapeType:t,elementProps:f})}return s?Ve.createElement(pi,{className:a},u):u}function tb(n,e){return e!=null&&"trapezoids"in n.props}function nb(n,e){return e!=null&&"sectors"in n.props}function Ey(n,e){return e!=null&&"points"in n.props}function Lxe(n,e){var t,r,i=n.x===(e==null||(t=e.labelViewBox)===null||t===void 0?void 0:t.x)||n.x===e.x,o=n.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||n.y===e.y;return i&&o}function Oxe(n,e){var t=n.endAngle===e.endAngle,r=n.startAngle===e.startAngle;return t&&r}function Dxe(n,e){var t=n.x===e.x,r=n.y===e.y,i=n.z===e.z;return t&&r&&i}function kxe(n,e){var t;return tb(n,e)?t=Lxe:nb(n,e)?t=Oxe:Ey(n,e)&&(t=Dxe),t}function Fxe(n,e){var t;return tb(n,e)?t="trapezoids":nb(n,e)?t="sectors":Ey(n,e)&&(t="points"),t}function Uxe(n,e){if(tb(n,e)){var t;return(t=e.tooltipPayload)===null||t===void 0||(t=t[0])===null||t===void 0||(t=t.payload)===null||t===void 0?void 0:t.payload}if(nb(n,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return Ey(n,e)?e.payload:{}}function Bxe(n){var e=n.activeTooltipItem,t=n.graphicalItem,r=n.itemData,i=Fxe(t,e),o=Uxe(t,e),a=r.filter(function(l,u){var c=Gp(o,l),f=t.props[i].filter(function(v){var S=kxe(t,e);return S(v,e)}),h=t.props[i].indexOf(f[f.length-1]),p=u===h;return c&&p}),s=r.indexOf(a[a.length-1]);return s}var LM,nB;function zxe(){if(nB)return LM;nB=1;var n=Math.ceil,e=Math.max;function t(r,i,o,a){for(var s=-1,l=e(n((i-r)/(o||1)),0),u=Array(l);l--;)u[a?l:++s]=r,r+=o;return u}return LM=t,LM}var OM,rB;function cq(){if(rB)return OM;rB=1;var n=YV(),e=1/0,t=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=n(i),i===e||i===-e){var o=i<0?-1:1;return o*t}return i===i?i:0}return OM=r,OM}var DM,iB;function Hxe(){if(iB)return DM;iB=1;var n=zxe(),e=qw(),t=cq();function r(i){return function(o,a,s){return s&&typeof s!="number"&&e(o,a,s)&&(a=s=void 0),o=t(o),a===void 0?(a=o,o=0):a=t(a),s=s===void 0?o<a?1:-1:t(s),n(o,a,s,i)}}return DM=r,DM}var kM,oB;function Vxe(){if(oB)return kM;oB=1;var n=Hxe(),e=n();return kM=e,kM}var Gxe=Vxe();const RS=gi(Gxe);function Ty(n){"@babel/helpers - typeof";return Ty=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ty(n)}function aB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function sB(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?aB(Object(t),!0).forEach(function(r){fq(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):aB(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function fq(n,e,t){return e=qxe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function qxe(n){var e=Wxe(n,"string");return Ty(e)=="symbol"?e:String(e)}function Wxe(n,e){if(Ty(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Ty(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var jxe=["Webkit","Moz","O","ms"],$xe=function(e,t){var r=e.replace(/(\w)/,function(o){return o.toUpperCase()}),i=jxe.reduce(function(o,a){return sB(sB({},o),{},fq({},a+r,t))},{});return i[e]=t,i};function Og(n){"@babel/helpers - typeof";return Og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Og(n)}function NS(){return NS=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},NS.apply(this,arguments)}function lB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function FM(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?lB(Object(t),!0).forEach(function(r){su(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):lB(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Xxe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function uB(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,hq(r.key),r)}}function Yxe(n,e,t){return e&&uB(n.prototype,e),t&&uB(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Kxe(n,e,t){return e=LS(e),Jxe(n,dq()?Reflect.construct(e,t||[],LS(n).constructor):e.apply(n,t))}function Jxe(n,e){if(e&&(Og(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uf(n)}function dq(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dq=function(){return!!n})()}function LS(n){return LS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},LS(n)}function uf(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Zxe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&j5(n,e)}function j5(n,e){return j5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},j5(n,e)}function su(n,e,t){return e=hq(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function hq(n){var e=Qxe(n,"string");return Og(e)=="symbol"?e:String(e)}function Qxe(n,e){if(Og(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Og(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var e_e=function(e){var t=e.data,r=e.startIndex,i=e.endIndex,o=e.x,a=e.width,s=e.travellerWidth;if(!t||!t.length)return{};var l=t.length,u=S0().domain(RS(0,l)).range([o,o+a-s]),c=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(i),scale:u,scaleValues:c}},cB=function(e){return e.changedTouches&&!!e.changedTouches.length},jp=(function(n){Zxe(e,n);function e(t){var r;return Xxe(this,e),r=Kxe(this,e,[t]),su(uf(r),"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),su(uf(r),"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),su(uf(r),"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,o=i.endIndex,a=i.onDragEnd,s=i.startIndex;a==null||a({endIndex:o,startIndex:s})}),r.detachDragEndListener()}),su(uf(r),"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),su(uf(r),"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),su(uf(r),"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),su(uf(r),"handleSlideDragStart",function(i){var o=cB(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:o.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(uf(r),"startX"),endX:r.handleTravellerDragStart.bind(uf(r),"endX")},r.state={},r}return Yxe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,o=r.endX,a=this.state.scaleValues,s=this.props,l=s.gap,u=s.data,c=u.length-1,f=Math.min(i,o),h=Math.max(i,o),p=e.getIndexInRange(a,f),v=e.getIndexInRange(a,h);return{startIndex:p-p%l,endIndex:v===c?c:v-v%l}}},{key:"getTextOfTick",value:function(r){var i=this.props,o=i.data,a=i.tickFormatter,s=i.dataKey,l=Da(o[r],s,r);return Ar(a)?a(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,o=i.slideMoveStartX,a=i.startX,s=i.endX,l=this.props,u=l.x,c=l.width,f=l.travellerWidth,h=l.startIndex,p=l.endIndex,v=l.onChange,S=r.pageX-o;S>0?S=Math.min(S,u+c-f-s,u+c-f-a):S<0&&(S=Math.max(S,u-a,u-s));var y=this.getIndex({startX:a+S,endX:s+S});(y.startIndex!==h||y.endIndex!==p)&&v&&v(y),this.setState({startX:a+S,endX:s+S,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var o=cB(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:o.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,o=i.brushMoveStartX,a=i.movingTravellerId,s=i.endX,l=i.startX,u=this.state[a],c=this.props,f=c.x,h=c.width,p=c.travellerWidth,v=c.onChange,S=c.gap,y=c.data,_={startX:this.state.startX,endX:this.state.endX},w=r.pageX-o;w>0?w=Math.min(w,f+h-p-u):w<0&&(w=Math.max(w,f-u)),_[a]=u+w;var A=this.getIndex(_),E=A.startIndex,P=A.endIndex,O=function(){var D=y.length-1;return a==="startX"&&(s>l?E%S===0:P%S===0)||s<l&&P===D||a==="endX"&&(s>l?P%S===0:E%S===0)||s>l&&P===D};this.setState(su(su({},a,u+w),"brushMoveStartX",r.pageX),function(){v&&O()&&v(A)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var o=this,a=this.state,s=a.scaleValues,l=a.startX,u=a.endX,c=this.state[i],f=s.indexOf(c);if(f!==-1){var h=f+r;if(!(h===-1||h>=s.length)){var p=s[h];i==="startX"&&p>=u||i==="endX"&&p<=l||this.setState(su({},i,p),function(){o.props.onChange(o.getIndex({startX:o.state.startX,endX:o.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,o=r.y,a=r.width,s=r.height,l=r.fill,u=r.stroke;return Ve.createElement("rect",{stroke:u,fill:l,x:i,y:o,width:a,height:s})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,o=r.y,a=r.width,s=r.height,l=r.data,u=r.children,c=r.padding,f=Me.Children.only(u);return f?Ve.cloneElement(f,{x:i,y:o,width:a,height:s,margin:c,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,i){var o,a,s=this,l=this.props,u=l.y,c=l.travellerWidth,f=l.height,h=l.traveller,p=l.ariaLabel,v=l.data,S=l.startIndex,y=l.endIndex,_=Math.max(r,this.props.x),w=FM(FM({},pr(this.props,!1)),{},{x:_,y:u,width:c,height:f}),A=p||"Min value: ".concat((o=v[S])===null||o===void 0?void 0:o.name,", Max value: ").concat((a=v[y])===null||a===void 0?void 0:a.name);return Ve.createElement(pi,{tabIndex:0,role:"slider","aria-label":A,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(P){["ArrowLeft","ArrowRight"].includes(P.key)&&(P.preventDefault(),P.stopPropagation(),s.handleTravellerMoveKeyboard(P.key==="ArrowRight"?1:-1,i))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(h,w))}},{key:"renderSlide",value:function(r,i){var o=this.props,a=o.y,s=o.height,l=o.stroke,u=o.travellerWidth,c=Math.min(r,i)+u,f=Math.max(Math.abs(i-r)-u,0);return Ve.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:c,y:a,width:f,height:s})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,o=r.endIndex,a=r.y,s=r.height,l=r.travellerWidth,u=r.stroke,c=this.state,f=c.startX,h=c.endX,p=5,v={pointerEvents:"none",fill:u};return Ve.createElement(pi,{className:"recharts-brush-texts"},Ve.createElement(lS,NS({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,h)-p,y:a+s/2},v),this.getTextOfTick(i)),Ve.createElement(lS,NS({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,h)+l+p,y:a+s/2},v),this.getTextOfTick(o)))}},{key:"render",value:function(){var r=this.props,i=r.data,o=r.className,a=r.children,s=r.x,l=r.y,u=r.width,c=r.height,f=r.alwaysShowText,h=this.state,p=h.startX,v=h.endX,S=h.isTextActive,y=h.isSlideMoving,_=h.isTravellerMoving,w=h.isTravellerFocused;if(!i||!i.length||!an(s)||!an(l)||!an(u)||!an(c)||u<=0||c<=0)return null;var A=qr("recharts-brush",o),E=Ve.Children.count(a)===1,P=$xe("userSelect","none");return Ve.createElement(pi,{className:A,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:P},this.renderBackground(),E&&this.renderPanorama(),this.renderSlide(p,v),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(v,"endX"),(S||y||_||w||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,o=r.y,a=r.width,s=r.height,l=r.stroke,u=Math.floor(o+s/2)-1;return Ve.createElement(Ve.Fragment,null,Ve.createElement("rect",{x:i,y:o,width:a,height:s,fill:l,stroke:"none"}),Ve.createElement("line",{x1:i+1,y1:u,x2:i+a-1,y2:u,fill:"none",stroke:"#fff"}),Ve.createElement("line",{x1:i+1,y1:u+2,x2:i+a-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var o;return Ve.isValidElement(r)?o=Ve.cloneElement(r,i):Ar(r)?o=r(i):o=e.renderDefaultTraveller(i),o}},{key:"getDerivedStateFromProps",value:function(r,i){var o=r.data,a=r.width,s=r.x,l=r.travellerWidth,u=r.updateId,c=r.startIndex,f=r.endIndex;if(o!==i.prevData||u!==i.prevUpdateId)return FM({prevData:o,prevTravellerWidth:l,prevUpdateId:u,prevX:s,prevWidth:a},o&&o.length?e_e({data:o,width:a,x:s,travellerWidth:l,startIndex:c,endIndex:f}):{scale:null,scaleValues:null});if(i.scale&&(a!==i.prevWidth||s!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([s,s+a-l]);var h=i.scale.domain().map(function(p){return i.scale(p)});return{prevData:o,prevTravellerWidth:l,prevUpdateId:u,prevX:s,prevWidth:a,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(r,i){for(var o=r.length,a=0,s=o-1;s-a>1;){var l=Math.floor((a+s)/2);r[l]>i?s=l:a=l}return i>=r[s]?s:a}}]),e})(Me.PureComponent);su(jp,"displayName","Brush");su(jp,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var UM,fB;function t_e(){if(fB)return UM;fB=1;var n=HI();function e(t,r){var i;return n(t,function(o,a,s){return i=r(o,a,s),!i}),!!i}return UM=e,UM}var BM,dB;function n_e(){if(dB)return BM;dB=1;var n=EV(),e=Ah(),t=t_e(),r=Hl(),i=qw();function o(a,s,l){var u=r(a)?n:t;return l&&i(a,s,l)&&(s=void 0),u(a,e(s,3))}return BM=o,BM}var r_e=n_e();const i_e=gi(r_e);var wf=function(e,t){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===t},zM,hB;function o_e(){if(hB)return zM;hB=1;var n=qV();function e(t,r,i){r=="__proto__"&&n?n(t,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[r]=i}return zM=e,zM}var HM,pB;function a_e(){if(pB)return HM;pB=1;var n=o_e(),e=VV(),t=Ah();function r(i,o){var a={};return o=t(o,3),e(i,function(s,l,u){n(a,l,o(s,l,u))}),a}return HM=r,HM}var s_e=a_e();const l_e=gi(s_e);var VM,mB;function u_e(){if(mB)return VM;mB=1;function n(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(!t(e[r],r,e))return!1;return!0}return VM=n,VM}var GM,gB;function c_e(){if(gB)return GM;gB=1;var n=HI();function e(t,r){var i=!0;return n(t,function(o,a,s){return i=!!r(o,a,s),i}),i}return GM=e,GM}var qM,vB;function f_e(){if(vB)return qM;vB=1;var n=u_e(),e=c_e(),t=Ah(),r=Hl(),i=qw();function o(a,s,l){var u=r(a)?n:e;return l&&i(a,s,l)&&(s=void 0),u(a,t(s,3))}return qM=o,qM}var d_e=f_e();const pq=gi(d_e);var h_e=["x","y"];function My(n){"@babel/helpers - typeof";return My=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},My(n)}function $5(){return $5=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},$5.apply(this,arguments)}function yB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function jv(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?yB(Object(t),!0).forEach(function(r){p_e(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):yB(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function p_e(n,e,t){return e=m_e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function m_e(n){var e=g_e(n,"string");return My(e)=="symbol"?e:String(e)}function g_e(n,e){if(My(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(My(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function v_e(n,e){if(n==null)return{};var t=y_e(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function y_e(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function x_e(n,e){var t=n.x,r=n.y,i=v_e(n,h_e),o="".concat(t),a=parseInt(o,10),s="".concat(r),l=parseInt(s,10),u="".concat(e.height||i.height),c=parseInt(u,10),f="".concat(e.width||i.width),h=parseInt(f,10);return jv(jv(jv(jv(jv({},e),i),a?{x:a}:{}),l?{y:l}:{}),{},{height:c,width:h,name:e.name,radius:e.radius})}function xB(n){return Ve.createElement(W5,$5({shapeType:"rectangle",propTransformer:x_e,activeClassName:"recharts-active-bar"},n))}var __e=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var o=typeof r=="number";return o?e(r,i):(o||Wp(),t)}},S_e=["value","background"],mq;function Dg(n){"@babel/helpers - typeof";return Dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dg(n)}function w_e(n,e){if(n==null)return{};var t=b_e(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function b_e(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function OS(){return OS=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},OS.apply(this,arguments)}function _B(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ja(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_B(Object(t),!0).forEach(function(r){uh(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):_B(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function A_e(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function SB(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,vq(r.key),r)}}function E_e(n,e,t){return e&&SB(n.prototype,e),t&&SB(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function T_e(n,e,t){return e=DS(e),M_e(n,gq()?Reflect.construct(e,t||[],DS(n).constructor):e.apply(n,t))}function M_e(n,e){if(e&&(Dg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return t0(n)}function gq(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gq=function(){return!!n})()}function DS(n){return DS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},DS(n)}function t0(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function C_e(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&X5(n,e)}function X5(n,e){return X5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},X5(n,e)}function uh(n,e,t){return e=vq(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function vq(n){var e=P_e(n,"string");return Dg(e)=="symbol"?e:String(e)}function P_e(n,e){if(Dg(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Dg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var im=(function(n){C_e(e,n);function e(){var t;A_e(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=T_e(this,e,[].concat(i)),uh(t0(t),"state",{isAnimationFinished:!1}),uh(t0(t),"id",em("recharts-bar-")),uh(t0(t),"handleAnimationEnd",function(){var a=t.props.onAnimationEnd;t.setState({isAnimationFinished:!0}),a&&a()}),uh(t0(t),"handleAnimationStart",function(){var a=t.props.onAnimationStart;t.setState({isAnimationFinished:!1}),a&&a()}),t}return E_e(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,o=this.props,a=o.shape,s=o.dataKey,l=o.activeIndex,u=o.activeBar,c=pr(this.props,!1);return r&&r.map(function(f,h){var p=h===l,v=p?u:a,S=Ja(Ja(Ja({},c),f),{},{isActive:p,option:v,index:h,dataKey:s,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return Ve.createElement(pi,OS({className:"recharts-bar-rectangle"},K0(i.props,f,h),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value)}),Ve.createElement(xB,S))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,o=i.data,a=i.layout,s=i.isAnimationActive,l=i.animationBegin,u=i.animationDuration,c=i.animationEasing,f=i.animationId,h=this.state.prevData;return Ve.createElement(Dc,{begin:l,duration:u,isActive:s,easing:c,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var v=p.t,S=o.map(function(y,_){var w=h&&h[_];if(w){var A=ra(w.x,y.x),E=ra(w.y,y.y),P=ra(w.width,y.width),O=ra(w.height,y.height);return Ja(Ja({},y),{},{x:A(v),y:E(v),width:P(v),height:O(v)})}if(a==="horizontal"){var L=ra(0,y.height),D=L(v);return Ja(Ja({},y),{},{y:y.y+y.height-D,height:D})}var F=ra(0,y.width),U=F(v);return Ja(Ja({},y),{},{width:U})});return Ve.createElement(pi,null,r.renderRectanglesStatically(S))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,o=r.isAnimationActive,a=this.state.prevData;return o&&i&&i.length&&(!a||!Gp(a,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,o=i.data,a=i.dataKey,s=i.activeIndex,l=pr(this.props.background,!1);return o.map(function(u,c){u.value;var f=u.background,h=w_e(u,S_e);if(!f)return null;var p=Ja(Ja(Ja(Ja(Ja({},h),{},{fill:"#eee"},f),l),K0(r.props,u,c)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:a,index:c,key:"background-bar-".concat(c),className:"recharts-bar-background-rectangle"});return Ve.createElement(xB,OS({option:r.props.background,isActive:c===s},p))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,a=o.data,s=o.xAxis,l=o.yAxis,u=o.layout,c=o.children,f=Fl(c,iv);if(!f)return null;var h=u==="vertical"?a[0].height/2:a[0].width/2,p=function(y,_){var w=Array.isArray(y.value)?y.value[1]:y.value;return{x:y.x,y:y.y,value:w,errorVal:Da(y,_)}},v={clipPath:r?"url(#clipPath-".concat(i,")"):null};return Ve.createElement(pi,v,f.map(function(S){return Ve.cloneElement(S,{key:"error-bar-".concat(i,"-").concat(S.props.dataKey),data:a,xAxis:s,yAxis:l,layout:u,offset:h,dataPointFormatter:p})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,o=r.data,a=r.className,s=r.xAxis,l=r.yAxis,u=r.left,c=r.top,f=r.width,h=r.height,p=r.isAnimationActive,v=r.background,S=r.id;if(i||!o||!o.length)return null;var y=this.state.isAnimationFinished,_=qr("recharts-bar",a),w=s&&s.allowDataOverflow,A=l&&l.allowDataOverflow,E=w||A,P=mr(S)?this.id:S;return Ve.createElement(pi,{className:_},w||A?Ve.createElement("defs",null,Ve.createElement("clipPath",{id:"clipPath-".concat(P)},Ve.createElement("rect",{x:w?u:u-f/2,y:A?c:c-h/2,width:w?f:f*2,height:A?h:h*2}))):null,Ve.createElement(pi,{className:"recharts-bar-rectangles",clipPath:E?"url(#clipPath-".concat(P,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(E,P),(!p||y)&&Sf.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}]),e})(Me.PureComponent);mq=im;uh(im,"displayName","Bar");uh(im,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Eh.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});uh(im,"getComposedData",function(n){var e=n.props,t=n.item,r=n.barPosition,i=n.bandSize,o=n.xAxis,a=n.yAxis,s=n.xAxisTicks,l=n.yAxisTicks,u=n.stackedData,c=n.dataStartIndex,f=n.displayedData,h=n.offset,p=Jve(r,t);if(!p)return null;var v=e.layout,S=t.props,y=S.dataKey,_=S.children,w=S.minPointSize,A=v==="horizontal"?a:o,E=u?A.scale.domain():null,P=o0e({numericAxis:A}),O=Fl(_,qI),L=f.map(function(D,F){var U,k,z,W,j,se;u?U=Zve(u[c+F],E):(U=Da(D,y),Array.isArray(U)||(U=[P,U]));var Y=__e(w,mq.defaultProps.minPointSize)(U[1],F);if(v==="horizontal"){var Q,X=[a.scale(U[0]),a.scale(U[1])],Z=X[0],oe=X[1];k=c6({axis:o,ticks:s,bandSize:i,offset:p.offset,entry:D,index:F}),z=(Q=oe??Z)!==null&&Q!==void 0?Q:void 0,W=p.size;var ee=Z-oe;if(j=Number.isNaN(ee)?0:ee,se={x:k,y:a.y,width:W,height:a.height},Math.abs(Y)>0&&Math.abs(j)<Math.abs(Y)){var G=Ic(j||Y)*(Math.abs(Y)-Math.abs(j));z-=G,j+=G}}else{var ne=[o.scale(U[0]),o.scale(U[1])],te=ne[0],de=ne[1];if(k=te,z=c6({axis:a,ticks:l,bandSize:i,offset:p.offset,entry:D,index:F}),W=de-te,j=p.size,se={x:o.x,y:z,width:o.width,height:j},Math.abs(Y)>0&&Math.abs(W)<Math.abs(Y)){var me=Ic(W||Y)*(Math.abs(Y)-Math.abs(W));W+=me}}return Ja(Ja(Ja({},D),{},{x:k,y:z,width:W,height:j,value:u?U:U[1],payload:D,background:se},O&&O[F]&&O[F].props),{},{tooltipPayload:[QG(t,D)],tooltipPosition:{x:k+W/2,y:z+j/2}})});return Ja({data:L,layout:v},h)});function Cy(n){"@babel/helpers - typeof";return Cy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cy(n)}function I_e(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function wB(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,yq(r.key),r)}}function R_e(n,e,t){return e&&wB(n.prototype,e),t&&wB(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function bB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ec(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?bB(Object(t),!0).forEach(function(r){rb(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):bB(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function rb(n,e,t){return e=yq(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function yq(n){var e=N_e(n,"string");return Cy(e)=="symbol"?e:String(e)}function N_e(n,e){if(Cy(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Cy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var L_e=function(e,t,r,i,o){var a=e.width,s=e.height,l=e.layout,u=e.children,c=Object.keys(t),f={left:r.left,leftMirror:r.left,right:a-r.right,rightMirror:a-r.right,top:r.top,topMirror:r.top,bottom:s-r.bottom,bottomMirror:s-r.bottom},h=!!lu(u,im);return c.reduce(function(p,v){var S=t[v],y=S.orientation,_=S.domain,w=S.padding,A=w===void 0?{}:w,E=S.mirror,P=S.reversed,O="".concat(y).concat(E?"Mirror":""),L,D,F,U,k;if(S.type==="number"&&(S.padding==="gap"||S.padding==="no-gap")){var z=_[1]-_[0],W=1/0,j=S.categoricalDomain.sort();if(j.forEach(function(te,de){de>0&&(W=Math.min((te||0)-(j[de-1]||0),W))}),Number.isFinite(W)){var se=W/z,Y=S.layout==="vertical"?r.height:r.width;if(S.padding==="gap"&&(L=se*Y/2),S.padding==="no-gap"){var Q=Vp(e.barCategoryGap,se*Y),X=se*Y/2;L=X-Q-(X-Q)/Y*Q}}}i==="xAxis"?D=[r.left+(A.left||0)+(L||0),r.left+r.width-(A.right||0)-(L||0)]:i==="yAxis"?D=l==="horizontal"?[r.top+r.height-(A.bottom||0),r.top+(A.top||0)]:[r.top+(A.top||0)+(L||0),r.top+r.height-(A.bottom||0)-(L||0)]:D=S.range,P&&(D=[D[1],D[0]]);var Z=Yve(S,o,h),oe=Z.scale,ee=Z.realScaleType;oe.domain(_).range(D),Kve(oe);var G=i0e(oe,Ec(Ec({},S),{},{realScaleType:ee}));i==="xAxis"?(k=y==="top"&&!E||y==="bottom"&&E,F=r.left,U=f[O]-k*S.height):i==="yAxis"&&(k=y==="left"&&!E||y==="right"&&E,F=f[O]-k*S.width,U=r.top);var ne=Ec(Ec(Ec({},S),G),{},{realScaleType:ee,x:F,y:U,scale:oe,width:i==="xAxis"?r.width:S.width,height:i==="yAxis"?r.height:S.height});return ne.bandSize=SS(ne,G),!S.hide&&i==="xAxis"?f[O]+=(k?-1:1)*ne.height:S.hide||(f[O]+=(k?-1:1)*ne.width),Ec(Ec({},p),{},rb({},v,ne))},{})},xq=function(e,t){var r=e.x,i=e.y,o=t.x,a=t.y;return{x:Math.min(r,o),y:Math.min(i,a),width:Math.abs(o-r),height:Math.abs(a-i)}},O_e=function(e){var t=e.x1,r=e.y1,i=e.x2,o=e.y2;return xq({x:t,y:r},{x:i,y:o})},_q=(function(){function n(e){I_e(this,n),this.scale=e}return R_e(n,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,o=r.position;if(t!==void 0){if(o)switch(o){case"start":return this.scale(t);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}},{key:"isInRange",value:function(t){var r=this.range(),i=r[0],o=r[r.length-1];return i<=o?t>=i&&t<=o:t>=o&&t<=i}}],[{key:"create",value:function(t){return new n(t)}}]),n})();rb(_q,"EPS",1e-4);var vR=function(e){var t=Object.keys(e).reduce(function(r,i){return Ec(Ec({},r),{},rb({},i,_q.create(e[i])))},{});return Ec(Ec({},t),{},{apply:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=o.bandAware,s=o.position;return l_e(i,function(l,u){return t[u].apply(l,{bandAware:a,position:s})})},isInRange:function(i){return pq(i,function(o,a){return t[a].isInRange(o)})}})};function D_e(n){return(n%180+180)%180}var k_e=function(e){var t=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=D_e(i),a=o*Math.PI/180,s=Math.atan(r/t),l=a>s&&a<Math.PI-s?r/Math.sin(a):t/Math.cos(a);return Math.abs(l)},WM,AB;function F_e(){if(AB)return WM;AB=1;var n=Ah(),e=Qy(),t=Vw();function r(i){return function(o,a,s){var l=Object(o);if(!e(o)){var u=n(a,3);o=t(o),a=function(f){return u(l[f],f,l)}}var c=i(o,a,s);return c>-1?l[u?o[c]:c]:void 0}}return WM=r,WM}var jM,EB;function U_e(){if(EB)return jM;EB=1;var n=cq();function e(t){var r=n(t),i=r%1;return r===r?i?r-i:r:0}return jM=e,jM}var $M,TB;function B_e(){if(TB)return $M;TB=1;var n=kV(),e=Ah(),t=U_e(),r=Math.max;function i(o,a,s){var l=o==null?0:o.length;if(!l)return-1;var u=s==null?0:t(s);return u<0&&(u=r(l+u,0)),n(o,e(a,3),u)}return $M=i,$M}var XM,MB;function z_e(){if(MB)return XM;MB=1;var n=F_e(),e=B_e(),t=n(e);return XM=t,XM}var H_e=z_e();const V_e=gi(H_e);var G_e=JH();const q_e=gi(G_e);var W_e=q_e(function(n){return{x:n.left,y:n.top,width:n.width,height:n.height}},function(n){return["l",n.left,"t",n.top,"w",n.width,"h",n.height].join("")}),yR=Me.createContext(void 0),xR=Me.createContext(void 0),Sq=Me.createContext(void 0),wq=Me.createContext({}),bq=Me.createContext(void 0),Aq=Me.createContext(0),Eq=Me.createContext(0),CB=function(e){var t=e.state,r=t.xAxisMap,i=t.yAxisMap,o=t.offset,a=e.clipPathId,s=e.children,l=e.width,u=e.height,c=W_e(o);return Ve.createElement(yR.Provider,{value:r},Ve.createElement(xR.Provider,{value:i},Ve.createElement(wq.Provider,{value:o},Ve.createElement(Sq.Provider,{value:c},Ve.createElement(bq.Provider,{value:a},Ve.createElement(Aq.Provider,{value:u},Ve.createElement(Eq.Provider,{value:l},s)))))))},j_e=function(){return Me.useContext(bq)},Tq=function(e){var t=Me.useContext(yR);t==null&&Wp();var r=t[e];return r==null&&Wp(),r},$_e=function(){var e=Me.useContext(yR);return oh(e)},X_e=function(){var e=Me.useContext(xR),t=V_e(e,function(r){return pq(r.domain,Number.isFinite)});return t||oh(e)},Mq=function(e){var t=Me.useContext(xR);t==null&&Wp();var r=t[e];return r==null&&Wp(),r},Y_e=function(){var e=Me.useContext(Sq);return e},K_e=function(){return Me.useContext(wq)},_R=function(){return Me.useContext(Eq)},SR=function(){return Me.useContext(Aq)};function Py(n){"@babel/helpers - typeof";return Py=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Py(n)}function PB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function IB(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?PB(Object(t),!0).forEach(function(r){J_e(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):PB(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function J_e(n,e,t){return e=Z_e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Z_e(n){var e=Q_e(n,"string");return Py(e)=="symbol"?e:String(e)}function Q_e(n,e){if(Py(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Py(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function eSe(n,e){return iSe(n)||rSe(n,e)||nSe(n,e)||tSe()}function tSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nSe(n,e){if(n){if(typeof n=="string")return RB(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return RB(n,e)}}function RB(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function rSe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(t=t.call(n)).next,e!==0)for(;!(l=(r=o.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function iSe(n){if(Array.isArray(n))return n}function Y5(){return Y5=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Y5.apply(this,arguments)}var oSe=function(e,t){var r;return Ve.isValidElement(e)?r=Ve.cloneElement(e,t):Ar(e)?r=e(t):r=Ve.createElement("line",Y5({},t,{className:"recharts-reference-line-line"})),r},aSe=function(e,t,r,i,o,a,s,l,u){var c=o.x,f=o.y,h=o.width,p=o.height;if(r){var v=u.y,S=e.y.apply(v,{position:a});if(wf(u,"discard")&&!e.y.isInRange(S))return null;var y=[{x:c+h,y:S},{x:c,y:S}];return l==="left"?y.reverse():y}if(t){var _=u.x,w=e.x.apply(_,{position:a});if(wf(u,"discard")&&!e.x.isInRange(w))return null;var A=[{x:w,y:f+p},{x:w,y:f}];return s==="top"?A.reverse():A}if(i){var E=u.segment,P=E.map(function(O){return e.apply(O,{position:a})});return wf(u,"discard")&&i_e(P,function(O){return!e.isInRange(O)})?null:P}return null};function ib(n){var e=n.x,t=n.y,r=n.segment,i=n.xAxisId,o=n.yAxisId,a=n.shape,s=n.className,l=n.alwaysShow,u=j_e(),c=Tq(i),f=Mq(o),h=Y_e();if(!u||!h)return null;od(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=vR({x:c.scale,y:f.scale}),v=Oa(e),S=Oa(t),y=r&&r.length===2,_=aSe(p,v,S,y,h,n.position,c.orientation,f.orientation,n);if(!_)return null;var w=eSe(_,2),A=w[0],E=A.x,P=A.y,O=w[1],L=O.x,D=O.y,F=wf(n,"hidden")?"url(#".concat(u,")"):void 0,U=IB(IB({clipPath:F},pr(n,!0)),{},{x1:E,y1:P,x2:L,y2:D});return Ve.createElement(pi,{className:qr("recharts-reference-line",s)},oSe(a,U),Ns.renderCallByParent(n,O_e({x1:E,y1:P,x2:L,y2:D})))}ib.displayName="ReferenceLine";ib.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"};function Iy(n){"@babel/helpers - typeof";return Iy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Iy(n)}function K5(){return K5=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},K5.apply(this,arguments)}function NB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function LB(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?NB(Object(t),!0).forEach(function(r){sSe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):NB(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function sSe(n,e,t){return e=lSe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function lSe(n){var e=uSe(n,"string");return Iy(e)=="symbol"?e:String(e)}function uSe(n,e){if(Iy(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Iy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var cSe=function(e){var t=e.x,r=e.y,i=e.xAxis,o=e.yAxis,a=vR({x:i.scale,y:o.scale}),s=a.apply({x:t,y:r},{bandAware:!0});return wf(e,"discard")&&!a.isInRange(s)?null:s};function i1(n){var e=n.x,t=n.y,r=n.r,i=n.alwaysShow,o=n.clipPathId,a=Oa(e),s=Oa(t);if(od(i===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!a||!s)return null;var l=cSe(n);if(!l)return null;var u=l.x,c=l.y,f=n.shape,h=n.className,p=wf(n,"hidden")?"url(#".concat(o,")"):void 0,v=LB(LB({clipPath:p},pr(n,!0)),{},{cx:u,cy:c});return Ve.createElement(pi,{className:qr("recharts-reference-dot",h)},i1.renderDot(f,v),Ns.renderCallByParent(n,{x:u-r,y:c-r,width:2*r,height:2*r}))}i1.displayName="ReferenceDot";i1.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1};i1.renderDot=function(n,e){var t;return Ve.isValidElement(n)?t=Ve.cloneElement(n,e):Ar(n)?t=n(e):t=Ve.createElement(eb,K5({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),t};function Ry(n){"@babel/helpers - typeof";return Ry=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ry(n)}function J5(){return J5=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},J5.apply(this,arguments)}function OB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function DB(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?OB(Object(t),!0).forEach(function(r){fSe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):OB(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function fSe(n,e,t){return e=dSe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function dSe(n){var e=hSe(n,"string");return Ry(e)=="symbol"?e:String(e)}function hSe(n,e){if(Ry(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Ry(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var pSe=function(e,t,r,i,o){var a=o.x1,s=o.x2,l=o.y1,u=o.y2,c=o.xAxis,f=o.yAxis;if(!c||!f)return null;var h=vR({x:c.scale,y:f.scale}),p={x:e?h.x.apply(a,{position:"start"}):h.x.rangeMin,y:r?h.y.apply(l,{position:"start"}):h.y.rangeMin},v={x:t?h.x.apply(s,{position:"end"}):h.x.rangeMax,y:i?h.y.apply(u,{position:"end"}):h.y.rangeMax};return wf(o,"discard")&&(!h.isInRange(p)||!h.isInRange(v))?null:xq(p,v)};function o1(n){var e=n.x1,t=n.x2,r=n.y1,i=n.y2,o=n.className,a=n.alwaysShow,s=n.clipPathId;od(a===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var l=Oa(e),u=Oa(t),c=Oa(r),f=Oa(i),h=n.shape;if(!l&&!u&&!c&&!f&&!h)return null;var p=pSe(l,u,c,f,n);if(!p&&!h)return null;var v=wf(n,"hidden")?"url(#".concat(s,")"):void 0;return Ve.createElement(pi,{className:qr("recharts-reference-area",o)},o1.renderRect(h,DB(DB({clipPath:v},pr(n,!0)),p)),Ns.renderCallByParent(n,p))}o1.displayName="ReferenceArea";o1.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1};o1.renderRect=function(n,e){var t;return Ve.isValidElement(n)?t=Ve.cloneElement(n,e):Ar(n)?t=n(e):t=Ve.createElement(gR,J5({},e,{className:"recharts-reference-area-rect"})),t};function Cq(n,e,t){if(e<1)return[];if(e===1&&t===void 0)return n;for(var r=[],i=0;i<n.length;i+=e)r.push(n[i]);return r}function mSe(n,e,t){var r={width:n.width+e.width,height:n.height+e.height};return k_e(r,t)}function gSe(n,e,t){var r=t==="width",i=n.x,o=n.y,a=n.width,s=n.height;return e===1?{start:r?i:o,end:r?i+a:o+s}:{start:r?i+a:o+s,end:r?i:o}}function kS(n,e,t,r,i){if(n*e<n*r||n*e>n*i)return!1;var o=t();return n*(e-n*o/2-r)>=0&&n*(e+n*o/2-i)<=0}function vSe(n,e){return Cq(n,e+1)}function ySe(n,e,t,r,i){for(var o=(r||[]).slice(),a=e.start,s=e.end,l=0,u=1,c=a,f=function(){var v=r==null?void 0:r[l];if(v===void 0)return{v:Cq(r,u)};var S=l,y,_=function(){return y===void 0&&(y=t(v,S)),y},w=v.coordinate,A=l===0||kS(n,w,_,c,s);A||(l=0,c=a,u+=1),A&&(c=w+n*(_()/2+i),l+=u)},h;u<=o.length;)if(h=f(),h)return h.v;return[]}function Ny(n){"@babel/helpers - typeof";return Ny=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ny(n)}function kB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Rs(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?kB(Object(t),!0).forEach(function(r){xSe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):kB(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function xSe(n,e,t){return e=_Se(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _Se(n){var e=SSe(n,"string");return Ny(e)=="symbol"?e:String(e)}function SSe(n,e){if(Ny(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Ny(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function wSe(n,e,t,r,i){for(var o=(r||[]).slice(),a=o.length,s=e.start,l=e.end,u=function(h){var p=o[h],v,S=function(){return v===void 0&&(v=t(p,h)),v};if(h===a-1){var y=n*(p.coordinate+n*S()/2-l);o[h]=p=Rs(Rs({},p),{},{tickCoord:y>0?p.coordinate-y*n:p.coordinate})}else o[h]=p=Rs(Rs({},p),{},{tickCoord:p.coordinate});var _=kS(n,p.tickCoord,S,s,l);_&&(l=p.tickCoord-n*(S()/2+i),o[h]=Rs(Rs({},p),{},{isShow:!0}))},c=a-1;c>=0;c--)u(c);return o}function bSe(n,e,t,r,i,o){var a=(r||[]).slice(),s=a.length,l=e.start,u=e.end;if(o){var c=r[s-1],f=t(c,s-1),h=n*(c.coordinate+n*f/2-u);a[s-1]=c=Rs(Rs({},c),{},{tickCoord:h>0?c.coordinate-h*n:c.coordinate});var p=kS(n,c.tickCoord,function(){return f},l,u);p&&(u=c.tickCoord-n*(f/2+i),a[s-1]=Rs(Rs({},c),{},{isShow:!0}))}for(var v=o?s-1:s,S=function(w){var A=a[w],E,P=function(){return E===void 0&&(E=t(A,w)),E};if(w===0){var O=n*(A.coordinate-n*P()/2-l);a[w]=A=Rs(Rs({},A),{},{tickCoord:O<0?A.coordinate-O*n:A.coordinate})}else a[w]=A=Rs(Rs({},A),{},{tickCoord:A.coordinate});var L=kS(n,A.tickCoord,P,l,u);L&&(l=A.tickCoord+n*(P()/2+i),a[w]=Rs(Rs({},A),{},{isShow:!0}))},y=0;y<v;y++)S(y);return a}function wR(n,e,t){var r=n.tick,i=n.ticks,o=n.viewBox,a=n.minTickGap,s=n.orientation,l=n.interval,u=n.tickFormatter,c=n.unit,f=n.angle;if(!i||!i.length||!r)return[];if(an(l)||Eh.isSsr)return vSe(i,typeof l=="number"&&an(l)?l:0);var h=[],p=s==="top"||s==="bottom"?"width":"height",v=c&&p==="width"?_0(c,{fontSize:e,letterSpacing:t}):{width:0,height:0},S=function(A,E){var P=Ar(u)?u(A.value,E):A.value;return p==="width"?mSe(_0(P,{fontSize:e,letterSpacing:t}),v,f):_0(P,{fontSize:e,letterSpacing:t})[p]},y=i.length>=2?Ic(i[1].coordinate-i[0].coordinate):1,_=gSe(o,y,p);return l==="equidistantPreserveStart"?ySe(y,_,S,i,a):(l==="preserveStart"||l==="preserveStartEnd"?h=bSe(y,_,S,i,a,l==="preserveStartEnd"):h=wSe(y,_,S,i,a),h.filter(function(w){return w.isShow}))}var ASe=["viewBox"],ESe=["viewBox"],TSe=["ticks"];function kg(n){"@babel/helpers - typeof";return kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kg(n)}function og(){return og=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},og.apply(this,arguments)}function FB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ys(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?FB(Object(t),!0).forEach(function(r){bR(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):FB(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function YM(n,e){if(n==null)return{};var t=MSe(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function MSe(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function CSe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function UB(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Iq(r.key),r)}}function PSe(n,e,t){return e&&UB(n.prototype,e),t&&UB(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function ISe(n,e,t){return e=FS(e),RSe(n,Pq()?Reflect.construct(e,t||[],FS(n).constructor):e.apply(n,t))}function RSe(n,e){if(e&&(kg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NSe(n)}function NSe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Pq(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Pq=function(){return!!n})()}function FS(n){return FS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},FS(n)}function LSe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Z5(n,e)}function Z5(n,e){return Z5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Z5(n,e)}function bR(n,e,t){return e=Iq(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Iq(n){var e=OSe(n,"string");return kg(e)=="symbol"?e:String(e)}function OSe(n,e){if(kg(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(kg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var ov=(function(n){LSe(e,n);function e(t){var r;return CSe(this,e),r=ISe(this,e,[t]),r.state={fontSize:"",letterSpacing:""},r}return PSe(e,[{key:"shouldComponentUpdate",value:function(r,i){var o=r.viewBox,a=YM(r,ASe),s=this.props,l=s.viewBox,u=YM(s,ESe);return!fg(o,l)||!fg(a,u)||!fg(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,o=i.x,a=i.y,s=i.width,l=i.height,u=i.orientation,c=i.tickSize,f=i.mirror,h=i.tickMargin,p,v,S,y,_,w,A=f?-1:1,E=r.tickSize||c,P=an(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":p=v=r.coordinate,y=a+ +!f*l,S=y-A*E,w=S-A*h,_=P;break;case"left":S=y=r.coordinate,v=o+ +!f*s,p=v-A*E,_=p-A*h,w=P;break;case"right":S=y=r.coordinate,v=o+ +f*s,p=v+A*E,_=p+A*h,w=P;break;default:p=v=r.coordinate,y=a+ +f*l,S=y+A*E,w=S+A*h,_=P;break}return{line:{x1:p,y1:S,x2:v,y2:y},tick:{x:_,y:w}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,o=r.mirror,a;switch(i){case"left":a=o?"start":"end";break;case"right":a=o?"end":"start";break;default:a="middle";break}return a}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,o=r.mirror,a="end";switch(i){case"left":case"right":a="middle";break;case"top":a=o?"start":"end";break;default:a=o?"end":"start";break}return a}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,o=r.y,a=r.width,s=r.height,l=r.orientation,u=r.mirror,c=r.axisLine,f=Ys(Ys(Ys({},pr(this.props,!1)),pr(c,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var h=+(l==="top"&&!u||l==="bottom"&&u);f=Ys(Ys({},f),{},{x1:i,y1:o+h*s,x2:i+a,y2:o+h*s})}else{var p=+(l==="left"&&!u||l==="right"&&u);f=Ys(Ys({},f),{},{x1:i+p*a,y1:o,x2:i+p*a,y2:o+s})}return Ve.createElement("line",og({},f,{className:qr("recharts-cartesian-axis-line",Hu(c,"className"))}))}},{key:"renderTicks",value:function(r,i,o){var a=this,s=this.props,l=s.tickLine,u=s.stroke,c=s.tick,f=s.tickFormatter,h=s.unit,p=wR(Ys(Ys({},this.props),{},{ticks:r}),i,o),v=this.getTickTextAnchor(),S=this.getTickVerticalAnchor(),y=pr(this.props,!1),_=pr(c,!1),w=Ys(Ys({},y),{},{fill:"none"},pr(l,!1)),A=p.map(function(E,P){var O=a.getTickLineCoord(E),L=O.line,D=O.tick,F=Ys(Ys(Ys(Ys({textAnchor:v,verticalAnchor:S},y),{},{stroke:"none",fill:u},_),D),{},{index:P,payload:E,visibleTicksCount:p.length,tickFormatter:f});return Ve.createElement(pi,og({className:"recharts-cartesian-axis-tick",key:"tick-".concat(E.value,"-").concat(E.coordinate,"-").concat(E.tickCoord)},K0(a.props,E,P)),l&&Ve.createElement("line",og({},w,L,{className:qr("recharts-cartesian-axis-tick-line",Hu(l,"className"))})),c&&e.renderTickItem(c,F,"".concat(Ar(f)?f(E.value,P):E.value).concat(h||"")))});return Ve.createElement("g",{className:"recharts-cartesian-axis-ticks"},A)}},{key:"render",value:function(){var r=this,i=this.props,o=i.axisLine,a=i.width,s=i.height,l=i.ticksGenerator,u=i.className,c=i.hide;if(c)return null;var f=this.props,h=f.ticks,p=YM(f,TSe),v=h;return Ar(l)&&(v=h&&h.length>0?l(this.props):l(p)),a<=0||s<=0||!v||!v.length?null:Ve.createElement(pi,{className:qr("recharts-cartesian-axis",u),ref:function(y){r.layerReference=y}},o&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),Ns.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,o){var a;return Ve.isValidElement(r)?a=Ve.cloneElement(r,i):Ar(r)?a=r(i):a=Ve.createElement(lS,og({},i,{className:"recharts-cartesian-axis-tick-value"}),o),a}}]),e})(Me.Component);bR(ov,"displayName","CartesianAxis");bR(ov,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var DSe=["x1","y1","x2","y2","key"],kSe=["offset"];function $p(n){"@babel/helpers - typeof";return $p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$p(n)}function BB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ls(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?BB(Object(t),!0).forEach(function(r){FSe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):BB(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function FSe(n,e,t){return e=USe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function USe(n){var e=BSe(n,"string");return $p(e)=="symbol"?e:String(e)}function BSe(n,e){if($p(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if($p(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function wp(){return wp=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},wp.apply(this,arguments)}function zB(n,e){if(n==null)return{};var t=zSe(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function zSe(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}var HSe=function(e){var t=e.fill;if(!t||t==="none")return null;var r=e.fillOpacity,i=e.x,o=e.y,a=e.width,s=e.height;return Ve.createElement("rect",{x:i,y:o,width:a,height:s,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Rq(n,e){var t;if(Ve.isValidElement(n))t=Ve.cloneElement(n,e);else if(Ar(n))t=n(e);else{var r=e.x1,i=e.y1,o=e.x2,a=e.y2,s=e.key,l=zB(e,DSe),u=pr(l,!1);u.offset;var c=zB(u,kSe);t=Ve.createElement("line",wp({},c,{x1:r,y1:i,x2:o,y2:a,fill:"none",key:s}))}return t}function VSe(n){var e=n.x,t=n.width,r=n.horizontal,i=r===void 0?!0:r,o=n.horizontalPoints;if(!i||!o||!o.length)return null;var a=o.map(function(s,l){var u=Ls(Ls({},n),{},{x1:e,y1:s,x2:e+t,y2:s,key:"line-".concat(l),index:l});return Rq(i,u)});return Ve.createElement("g",{className:"recharts-cartesian-grid-horizontal"},a)}function GSe(n){var e=n.y,t=n.height,r=n.vertical,i=r===void 0?!0:r,o=n.verticalPoints;if(!i||!o||!o.length)return null;var a=o.map(function(s,l){var u=Ls(Ls({},n),{},{x1:s,y1:e,x2:s,y2:e+t,key:"line-".concat(l),index:l});return Rq(i,u)});return Ve.createElement("g",{className:"recharts-cartesian-grid-vertical"},a)}function qSe(n){var e=n.horizontalFill,t=n.fillOpacity,r=n.x,i=n.y,o=n.width,a=n.height,s=n.horizontalPoints,l=n.horizontal,u=l===void 0?!0:l;if(!u||!e||!e.length)return null;var c=s.map(function(h){return Math.round(h+i-i)}).sort(function(h,p){return h-p});i!==c[0]&&c.unshift(0);var f=c.map(function(h,p){var v=!c[p+1],S=v?i+a-h:c[p+1]-h;if(S<=0)return null;var y=p%e.length;return Ve.createElement("rect",{key:"react-".concat(p),y:h,x:r,height:S,width:o,stroke:"none",fill:e[y],fillOpacity:t,className:"recharts-cartesian-grid-bg"})});return Ve.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function WSe(n){var e=n.vertical,t=e===void 0?!0:e,r=n.verticalFill,i=n.fillOpacity,o=n.x,a=n.y,s=n.width,l=n.height,u=n.verticalPoints;if(!t||!r||!r.length)return null;var c=u.map(function(h){return Math.round(h+o-o)}).sort(function(h,p){return h-p});o!==c[0]&&c.unshift(0);var f=c.map(function(h,p){var v=!c[p+1],S=v?o+s-h:c[p+1]-h;if(S<=0)return null;var y=p%r.length;return Ve.createElement("rect",{key:"react-".concat(p),x:h,y:a,width:S,height:l,stroke:"none",fill:r[y],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return Ve.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var jSe=function(e,t){var r=e.xAxis,i=e.width,o=e.height,a=e.offset;return JG(wR(Ls(Ls(Ls({},ov.defaultProps),r),{},{ticks:nd(r,!0),viewBox:{x:0,y:0,width:i,height:o}})),a.left,a.left+a.width,t)},$Se=function(e,t){var r=e.yAxis,i=e.width,o=e.height,a=e.offset;return JG(wR(Ls(Ls(Ls({},ov.defaultProps),r),{},{ticks:nd(r,!0),viewBox:{x:0,y:0,width:i,height:o}})),a.top,a.top+a.height,t)},Gm={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Nq(n){var e,t,r,i,o,a,s=_R(),l=SR(),u=K_e(),c=Ls(Ls({},n),{},{stroke:(e=n.stroke)!==null&&e!==void 0?e:Gm.stroke,fill:(t=n.fill)!==null&&t!==void 0?t:Gm.fill,horizontal:(r=n.horizontal)!==null&&r!==void 0?r:Gm.horizontal,horizontalFill:(i=n.horizontalFill)!==null&&i!==void 0?i:Gm.horizontalFill,vertical:(o=n.vertical)!==null&&o!==void 0?o:Gm.vertical,verticalFill:(a=n.verticalFill)!==null&&a!==void 0?a:Gm.verticalFill,x:an(n.x)?n.x:u.left,y:an(n.y)?n.y:u.top,width:an(n.width)?n.width:u.width,height:an(n.height)?n.height:u.height}),f=c.x,h=c.y,p=c.width,v=c.height,S=c.syncWithTicks,y=c.horizontalValues,_=c.verticalValues,w=$_e(),A=X_e();if(!an(p)||p<=0||!an(v)||v<=0||!an(f)||f!==+f||!an(h)||h!==+h)return null;var E=c.verticalCoordinatesGenerator||jSe,P=c.horizontalCoordinatesGenerator||$Se,O=c.horizontalPoints,L=c.verticalPoints;if((!O||!O.length)&&Ar(P)){var D=y&&y.length,F=P({yAxis:A?Ls(Ls({},A),{},{ticks:D?y:A.ticks}):void 0,width:s,height:l,offset:u},D?!0:S);od(Array.isArray(F),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat($p(F),"]")),Array.isArray(F)&&(O=F)}if((!L||!L.length)&&Ar(E)){var U=_&&_.length,k=E({xAxis:w?Ls(Ls({},w),{},{ticks:U?_:w.ticks}):void 0,width:s,height:l,offset:u},U?!0:S);od(Array.isArray(k),"verticalCoordinatesGenerator should return Array but instead it returned [".concat($p(k),"]")),Array.isArray(k)&&(L=k)}return Ve.createElement("g",{className:"recharts-cartesian-grid"},Ve.createElement(HSe,{fill:c.fill,fillOpacity:c.fillOpacity,x:c.x,y:c.y,width:c.width,height:c.height}),Ve.createElement(VSe,wp({},c,{offset:u,horizontalPoints:O,xAxis:w,yAxis:A})),Ve.createElement(GSe,wp({},c,{offset:u,verticalPoints:L,xAxis:w,yAxis:A})),Ve.createElement(qSe,wp({},c,{horizontalPoints:O})),Ve.createElement(WSe,wp({},c,{verticalPoints:L})))}Nq.displayName="CartesianGrid";var XSe=["type","layout","connectNulls","ref"];function Fg(n){"@babel/helpers - typeof";return Fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fg(n)}function YSe(n,e){if(n==null)return{};var t=KSe(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function KSe(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function A0(){return A0=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},A0.apply(this,arguments)}function HB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function au(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?HB(Object(t),!0).forEach(function(r){Tc(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):HB(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function qm(n){return ewe(n)||QSe(n)||ZSe(n)||JSe()}function JSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZSe(n,e){if(n){if(typeof n=="string")return Q5(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Q5(n,e)}}function QSe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function ewe(n){if(Array.isArray(n))return Q5(n)}function Q5(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function twe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function VB(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Oq(r.key),r)}}function nwe(n,e,t){return e&&VB(n.prototype,e),t&&VB(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function rwe(n,e,t){return e=US(e),iwe(n,Lq()?Reflect.construct(e,t||[],US(n).constructor):e.apply(n,t))}function iwe(n,e){if(e&&(Fg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zd(n)}function Lq(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Lq=function(){return!!n})()}function US(n){return US=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},US(n)}function Zd(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function owe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&eP(n,e)}function eP(n,e){return eP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},eP(n,e)}function Tc(n,e,t){return e=Oq(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Oq(n){var e=awe(n,"string");return Fg(e)=="symbol"?e:String(e)}function awe(n,e){if(Fg(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Fg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var a1=(function(n){owe(e,n);function e(){var t;twe(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=rwe(this,e,[].concat(i)),Tc(Zd(t),"state",{isAnimationFinished:!0,totalLength:0}),Tc(Zd(t),"generateSimpleStrokeDasharray",function(a,s){return"".concat(s,"px ").concat(a-s,"px")}),Tc(Zd(t),"getStrokeDasharray",function(a,s,l){var u=l.reduce(function(_,w){return _+w});if(!u)return t.generateSimpleStrokeDasharray(s,a);for(var c=Math.floor(a/u),f=a%u,h=s-a,p=[],v=0,S=0;v<l.length;S+=l[v],++v)if(S+l[v]>f){p=[].concat(qm(l.slice(0,v)),[f-S]);break}var y=p.length%2===0?[0,h]:[h];return[].concat(qm(e.repeat(l,c)),qm(p),y).map(function(_){return"".concat(_,"px")}).join(", ")}),Tc(Zd(t),"id",em("recharts-line-")),Tc(Zd(t),"pathRef",function(a){t.mainCurve=a}),Tc(Zd(t),"handleAnimationEnd",function(){t.setState({isAnimationFinished:!0}),t.props.onAnimationEnd&&t.props.onAnimationEnd()}),Tc(Zd(t),"handleAnimationStart",function(){t.setState({isAnimationFinished:!1}),t.props.onAnimationStart&&t.props.onAnimationStart()}),t}return nwe(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,a=o.points,s=o.xAxis,l=o.yAxis,u=o.layout,c=o.children,f=Fl(c,iv);if(!f)return null;var h=function(S,y){return{x:S.x,y:S.y,value:S.value,errorVal:Da(S.payload,y)}},p={clipPath:r?"url(#clipPath-".concat(i,")"):null};return Ve.createElement(pi,p,f.map(function(v){return Ve.cloneElement(v,{key:"bar-".concat(v.props.dataKey),data:a,xAxis:s,yAxis:l,layout:u,dataPointFormatter:h})}))}},{key:"renderDots",value:function(r,i,o){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var s=this.props,l=s.dot,u=s.points,c=s.dataKey,f=pr(this.props,!1),h=pr(l,!0),p=u.map(function(S,y){var _=au(au(au({key:"dot-".concat(y),r:3},f),h),{},{value:S.value,dataKey:c,cx:S.x,cy:S.y,index:y,payload:S.payload});return e.renderDotItem(l,_)}),v={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(o,")"):null};return Ve.createElement(pi,A0({className:"recharts-line-dots",key:"dots"},v),p)}},{key:"renderCurveStatically",value:function(r,i,o,a){var s=this.props,l=s.type,u=s.layout,c=s.connectNulls;s.ref;var f=YSe(s,XSe),h=au(au(au({},pr(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(o,")"):null,points:r},a),{},{type:l,layout:u,connectNulls:c});return Ve.createElement(Dp,A0({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var o=this,a=this.props,s=a.points,l=a.strokeDasharray,u=a.isAnimationActive,c=a.animationBegin,f=a.animationDuration,h=a.animationEasing,p=a.animationId,v=a.animateNewValues,S=a.width,y=a.height,_=this.state,w=_.prevPoints,A=_.totalLength;return Ve.createElement(Dc,{begin:c,duration:f,isActive:u,easing:h,from:{t:0},to:{t:1},key:"line-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(E){var P=E.t;if(w){var O=w.length/s.length,L=s.map(function(z,W){var j=Math.floor(W*O);if(w[j]){var se=w[j],Y=ra(se.x,z.x),Q=ra(se.y,z.y);return au(au({},z),{},{x:Y(P),y:Q(P)})}if(v){var X=ra(S*2,z.x),Z=ra(y/2,z.y);return au(au({},z),{},{x:X(P),y:Z(P)})}return au(au({},z),{},{x:z.x,y:z.y})});return o.renderCurveStatically(L,r,i)}var D=ra(0,A),F=D(P),U;if(l){var k="".concat(l).split(/[,\s]+/gim).map(function(z){return parseFloat(z)});U=o.getStrokeDasharray(F,A,k)}else U=o.generateSimpleStrokeDasharray(A,F);return o.renderCurveStatically(s,r,i,{strokeDasharray:U})})}},{key:"renderCurve",value:function(r,i){var o=this.props,a=o.points,s=o.isAnimationActive,l=this.state,u=l.prevPoints,c=l.totalLength;return s&&a&&a.length&&(!u&&c>0||!Gp(u,a))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(a,r,i)}},{key:"render",value:function(){var r,i=this.props,o=i.hide,a=i.dot,s=i.points,l=i.className,u=i.xAxis,c=i.yAxis,f=i.top,h=i.left,p=i.width,v=i.height,S=i.isAnimationActive,y=i.id;if(o||!s||!s.length)return null;var _=this.state.isAnimationFinished,w=s.length===1,A=qr("recharts-line",l),E=u&&u.allowDataOverflow,P=c&&c.allowDataOverflow,O=E||P,L=mr(y)?this.id:y,D=(r=pr(a,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},F=D.r,U=F===void 0?3:F,k=D.strokeWidth,z=k===void 0?2:k,W=nV(a)?a:{},j=W.clipDot,se=j===void 0?!0:j,Y=U*2+z;return Ve.createElement(pi,{className:A},E||P?Ve.createElement("defs",null,Ve.createElement("clipPath",{id:"clipPath-".concat(L)},Ve.createElement("rect",{x:E?h:h-p/2,y:P?f:f-v/2,width:E?p:p*2,height:P?v:v*2})),!se&&Ve.createElement("clipPath",{id:"clipPath-dots-".concat(L)},Ve.createElement("rect",{x:h-Y/2,y:f-Y/2,width:p+Y,height:v+Y}))):null,!w&&this.renderCurve(O,L),this.renderErrorBar(O,L),(w||a)&&this.renderDots(O,se,L),(!S||_)&&Sf.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var o=r.length%2!==0?[].concat(qm(r),[0]):r,a=[],s=0;s<i;++s)a=[].concat(qm(a),qm(o));return a}},{key:"renderDotItem",value:function(r,i){var o;if(Ve.isValidElement(r))o=Ve.cloneElement(r,i);else if(Ar(r))o=r(i);else{var a=qr("recharts-line-dot",typeof r!="boolean"?r.className:"");o=Ve.createElement(eb,A0({},i,{className:a}))}return o}}]),e})(Me.PureComponent);Tc(a1,"displayName","Line");Tc(a1,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Eh.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Tc(a1,"getComposedData",function(n){var e=n.props,t=n.xAxis,r=n.yAxis,i=n.xAxisTicks,o=n.yAxisTicks,a=n.dataKey,s=n.bandSize,l=n.displayedData,u=n.offset,c=e.layout,f=l.map(function(h,p){var v=Da(h,a);return c==="horizontal"?{x:Ng({axis:t,ticks:i,bandSize:s,entry:h,index:p}),y:mr(v)?null:r.scale(v),value:v,payload:h}:{x:mr(v)?null:t.scale(v),y:Ng({axis:r,ticks:o,bandSize:s,entry:h,index:p}),value:v,payload:h}});return au({points:f,layout:c},u)});var swe=["layout","type","stroke","connectNulls","isRange","ref"],Dq;function Ug(n){"@babel/helpers - typeof";return Ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ug(n)}function lwe(n,e){if(n==null)return{};var t=uwe(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function uwe(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function bp(){return bp=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},bp.apply(this,arguments)}function GB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Qd(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?GB(Object(t),!0).forEach(function(r){mf(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):GB(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function cwe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function qB(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Fq(r.key),r)}}function fwe(n,e,t){return e&&qB(n.prototype,e),t&&qB(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function dwe(n,e,t){return e=BS(e),hwe(n,kq()?Reflect.construct(e,t||[],BS(n).constructor):e.apply(n,t))}function hwe(n,e){if(e&&(Ug(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return n0(n)}function kq(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kq=function(){return!!n})()}function BS(n){return BS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},BS(n)}function n0(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function pwe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&tP(n,e)}function tP(n,e){return tP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},tP(n,e)}function mf(n,e,t){return e=Fq(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Fq(n){var e=mwe(n,"string");return Ug(e)=="symbol"?e:String(e)}function mwe(n,e){if(Ug(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Ug(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Ph=(function(n){pwe(e,n);function e(){var t;cwe(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=dwe(this,e,[].concat(i)),mf(n0(t),"state",{isAnimationFinished:!0}),mf(n0(t),"id",em("recharts-area-")),mf(n0(t),"handleAnimationEnd",function(){var a=t.props.onAnimationEnd;t.setState({isAnimationFinished:!0}),Ar(a)&&a()}),mf(n0(t),"handleAnimationStart",function(){var a=t.props.onAnimationStart;t.setState({isAnimationFinished:!1}),Ar(a)&&a()}),t}return fwe(e,[{key:"renderDots",value:function(r,i,o){var a=this.props.isAnimationActive,s=this.state.isAnimationFinished;if(a&&!s)return null;var l=this.props,u=l.dot,c=l.points,f=l.dataKey,h=pr(this.props,!1),p=pr(u,!0),v=c.map(function(y,_){var w=Qd(Qd(Qd({key:"dot-".concat(_),r:3},h),p),{},{index:_,cx:y.x,cy:y.y,dataKey:f,value:y.value,payload:y.payload,points:c});return e.renderDotItem(u,w)}),S={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(o,")"):null};return Ve.createElement(pi,bp({className:"recharts-area-dots"},S),v)}},{key:"renderHorizontalRect",value:function(r){var i=this.props,o=i.baseLine,a=i.points,s=i.strokeWidth,l=a[0].x,u=a[a.length-1].x,c=r*Math.abs(l-u),f=lh(a.map(function(h){return h.y||0}));return an(o)&&typeof o=="number"?f=Math.max(o,f):o&&Array.isArray(o)&&o.length&&(f=Math.max(lh(o.map(function(h){return h.y||0})),f)),an(f)?Ve.createElement("rect",{x:l<u?l:l-c,y:0,width:c,height:Math.floor(f+(s?parseInt("".concat(s),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var i=this.props,o=i.baseLine,a=i.points,s=i.strokeWidth,l=a[0].y,u=a[a.length-1].y,c=r*Math.abs(l-u),f=lh(a.map(function(h){return h.x||0}));return an(o)&&typeof o=="number"?f=Math.max(o,f):o&&Array.isArray(o)&&o.length&&(f=Math.max(lh(o.map(function(h){return h.x||0})),f)),an(f)?Ve.createElement("rect",{x:0,y:l<u?l:l-c,width:f+(s?parseInt("".concat(s),10):1),height:Math.floor(c)}):null}},{key:"renderClipRect",value:function(r){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,i,o,a){var s=this.props,l=s.layout,u=s.type,c=s.stroke,f=s.connectNulls,h=s.isRange;s.ref;var p=lwe(s,swe);return Ve.createElement(pi,{clipPath:o?"url(#clipPath-".concat(a,")"):null},Ve.createElement(Dp,bp({},pr(p,!0),{points:r,connectNulls:f,type:u,baseLine:i,layout:l,stroke:"none",className:"recharts-area-area"})),c!=="none"&&Ve.createElement(Dp,bp({},pr(this.props,!1),{className:"recharts-area-curve",layout:l,type:u,connectNulls:f,fill:"none",points:r})),c!=="none"&&h&&Ve.createElement(Dp,bp({},pr(this.props,!1),{className:"recharts-area-curve",layout:l,type:u,connectNulls:f,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(r,i){var o=this,a=this.props,s=a.points,l=a.baseLine,u=a.isAnimationActive,c=a.animationBegin,f=a.animationDuration,h=a.animationEasing,p=a.animationId,v=this.state,S=v.prevPoints,y=v.prevBaseLine;return Ve.createElement(Dc,{begin:c,duration:f,isActive:u,easing:h,from:{t:0},to:{t:1},key:"area-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(_){var w=_.t;if(S){var A=S.length/s.length,E=s.map(function(D,F){var U=Math.floor(F*A);if(S[U]){var k=S[U],z=ra(k.x,D.x),W=ra(k.y,D.y);return Qd(Qd({},D),{},{x:z(w),y:W(w)})}return D}),P;if(an(l)&&typeof l=="number"){var O=ra(y,l);P=O(w)}else if(mr(l)||Qg(l)){var L=ra(y,0);P=L(w)}else P=l.map(function(D,F){var U=Math.floor(F*A);if(y[U]){var k=y[U],z=ra(k.x,D.x),W=ra(k.y,D.y);return Qd(Qd({},D),{},{x:z(w),y:W(w)})}return D});return o.renderAreaStatically(E,P,r,i)}return Ve.createElement(pi,null,Ve.createElement("defs",null,Ve.createElement("clipPath",{id:"animationClipPath-".concat(i)},o.renderClipRect(w))),Ve.createElement(pi,{clipPath:"url(#animationClipPath-".concat(i,")")},o.renderAreaStatically(s,l,r,i)))})}},{key:"renderArea",value:function(r,i){var o=this.props,a=o.points,s=o.baseLine,l=o.isAnimationActive,u=this.state,c=u.prevPoints,f=u.prevBaseLine,h=u.totalLength;return l&&a&&a.length&&(!c&&h>0||!Gp(c,a)||!Gp(f,s))?this.renderAreaWithAnimation(r,i):this.renderAreaStatically(a,s,r,i)}},{key:"render",value:function(){var r,i=this.props,o=i.hide,a=i.dot,s=i.points,l=i.className,u=i.top,c=i.left,f=i.xAxis,h=i.yAxis,p=i.width,v=i.height,S=i.isAnimationActive,y=i.id;if(o||!s||!s.length)return null;var _=this.state.isAnimationFinished,w=s.length===1,A=qr("recharts-area",l),E=f&&f.allowDataOverflow,P=h&&h.allowDataOverflow,O=E||P,L=mr(y)?this.id:y,D=(r=pr(a,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},F=D.r,U=F===void 0?3:F,k=D.strokeWidth,z=k===void 0?2:k,W=nV(a)?a:{},j=W.clipDot,se=j===void 0?!0:j,Y=U*2+z;return Ve.createElement(pi,{className:A},E||P?Ve.createElement("defs",null,Ve.createElement("clipPath",{id:"clipPath-".concat(L)},Ve.createElement("rect",{x:E?c:c-p/2,y:P?u:u-v/2,width:E?p:p*2,height:P?v:v*2})),!se&&Ve.createElement("clipPath",{id:"clipPath-dots-".concat(L)},Ve.createElement("rect",{x:c-Y/2,y:u-Y/2,width:p+Y,height:v+Y}))):null,w?null:this.renderArea(O,L),(a||w)&&this.renderDots(O,se,L),(!S||_)&&Sf.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:r.points!==i.curPoints||r.baseLine!==i.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}]),e})(Me.PureComponent);Dq=Ph;mf(Ph,"displayName","Area");mf(Ph,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Eh.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});mf(Ph,"getBaseValue",function(n,e,t,r){var i=n.layout,o=n.baseValue,a=e.props.baseValue,s=a??o;if(an(s)&&typeof s=="number")return s;var l=i==="horizontal"?r:t,u=l.scale.domain();if(l.type==="number"){var c=Math.max(u[0],u[1]),f=Math.min(u[0],u[1]);return s==="dataMin"?f:s==="dataMax"||c<0?c:Math.max(Math.min(u[0],u[1]),0)}return s==="dataMin"?u[0]:s==="dataMax"?u[1]:u[0]});mf(Ph,"getComposedData",function(n){var e=n.props,t=n.item,r=n.xAxis,i=n.yAxis,o=n.xAxisTicks,a=n.yAxisTicks,s=n.bandSize,l=n.dataKey,u=n.stackedData,c=n.dataStartIndex,f=n.displayedData,h=n.offset,p=e.layout,v=u&&u.length,S=Dq.getBaseValue(e,t,r,i),y=p==="horizontal",_=!1,w=f.map(function(E,P){var O;v?O=u[c+P]:(O=Da(E,l),Array.isArray(O)?_=!0:O=[S,O]);var L=O[1]==null||v&&Da(E,l)==null;return y?{x:Ng({axis:r,ticks:o,bandSize:s,entry:E,index:P}),y:L?null:i.scale(O[1]),value:O,payload:E}:{x:L?null:r.scale(O[1]),y:Ng({axis:i,ticks:a,bandSize:s,entry:E,index:P}),value:O,payload:E}}),A;return v||_?A=w.map(function(E){var P=Array.isArray(E.value)?E.value[0]:null;return y?{x:E.x,y:P!=null&&E.y!=null?i.scale(P):null}:{x:P!=null?r.scale(P):null,y:E.y}}):A=y?i.scale(S):r.scale(S),Qd({points:w,baseLine:A,layout:p,isRange:_},h)});mf(Ph,"renderDotItem",function(n,e){var t;if(Ve.isValidElement(n))t=Ve.cloneElement(n,e);else if(Ar(n))t=n(e);else{var r=qr("recharts-area-dot",typeof n!="boolean"?n.className:"");t=Ve.createElement(eb,bp({},e,{className:r}))}return t});var ob=function(){return null};ob.displayName="ZAxis";ob.defaultProps={zAxisId:0,range:[64,64],scale:"auto",type:"number"};var gwe=["option","isActive"];function E0(){return E0=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},E0.apply(this,arguments)}function vwe(n,e){if(n==null)return{};var t=ywe(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function ywe(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function xwe(n){var e=n.option,t=n.isActive,r=vwe(n,gwe);return typeof e=="string"?Ve.createElement(W5,E0({option:Ve.createElement(Hw,E0({type:e},r)),isActive:t,shapeType:"symbols"},r)):Ve.createElement(W5,E0({option:e,isActive:t,shapeType:"symbols"},r))}function Bg(n){"@babel/helpers - typeof";return Bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bg(n)}function T0(){return T0=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},T0.apply(this,arguments)}function WB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function ku(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?WB(Object(t),!0).forEach(function(r){ch(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):WB(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function _we(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function jB(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Bq(r.key),r)}}function Swe(n,e,t){return e&&jB(n.prototype,e),t&&jB(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function wwe(n,e,t){return e=zS(e),bwe(n,Uq()?Reflect.construct(e,t||[],zS(n).constructor):e.apply(n,t))}function bwe(n,e){if(e&&(Bg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return r0(n)}function Uq(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Uq=function(){return!!n})()}function zS(n){return zS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},zS(n)}function r0(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Awe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&nP(n,e)}function nP(n,e){return nP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},nP(n,e)}function ch(n,e,t){return e=Bq(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Bq(n){var e=Ewe(n,"string");return Bg(e)=="symbol"?e:String(e)}function Ewe(n,e){if(Bg(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Bg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var s1=(function(n){Awe(e,n);function e(){var t;_we(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=wwe(this,e,[].concat(i)),ch(r0(t),"state",{isAnimationFinished:!1}),ch(r0(t),"handleAnimationEnd",function(){t.setState({isAnimationFinished:!0})}),ch(r0(t),"handleAnimationStart",function(){t.setState({isAnimationFinished:!1})}),ch(r0(t),"id",em("recharts-scatter-")),t}return Swe(e,[{key:"renderSymbolsStatically",value:function(r){var i=this,o=this.props,a=o.shape,s=o.activeShape,l=o.activeIndex,u=pr(this.props,!1);return r.map(function(c,f){var h=l===f,p=h?s:a,v=ku(ku({key:"symbol-".concat(f)},u),c);return Ve.createElement(pi,T0({className:"recharts-scatter-symbol"},K0(i.props,c,f),{key:"symbol-".concat(c==null?void 0:c.cx,"-").concat(c==null?void 0:c.cy,"-").concat(c==null?void 0:c.size,"-").concat(f),role:"img"}),Ve.createElement(xwe,T0({option:p,isActive:h},v)))})}},{key:"renderSymbolsWithAnimation",value:function(){var r=this,i=this.props,o=i.points,a=i.isAnimationActive,s=i.animationBegin,l=i.animationDuration,u=i.animationEasing,c=i.animationId,f=this.state.prevPoints;return Ve.createElement(Dc,{begin:s,duration:l,isActive:a,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(c),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(h){var p=h.t,v=o.map(function(S,y){var _=f&&f[y];if(_){var w=ra(_.cx,S.cx),A=ra(_.cy,S.cy),E=ra(_.size,S.size);return ku(ku({},S),{},{cx:w(p),cy:A(p),size:E(p)})}var P=ra(0,S.size);return ku(ku({},S),{},{size:P(p)})});return Ve.createElement(pi,null,r.renderSymbolsStatically(v))})}},{key:"renderSymbols",value:function(){var r=this.props,i=r.points,o=r.isAnimationActive,a=this.state.prevPoints;return o&&i&&i.length&&(!a||!Gp(a,i))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(i)}},{key:"renderErrorBar",value:function(){var r=this.props.isAnimationActive;if(r&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,a=i.xAxis,s=i.yAxis,l=i.children,u=Fl(l,iv);return u?u.map(function(c,f){var h=c.props,p=h.direction,v=h.dataKey;return Ve.cloneElement(c,{key:"".concat(p,"-").concat(v,"-").concat(o[f]),data:o,xAxis:a,yAxis:s,layout:p==="x"?"vertical":"horizontal",dataPointFormatter:function(y,_){return{x:y.cx,y:y.cy,value:p==="x"?+y.node.x:+y.node.y,errorVal:Da(y,_)}}})}):null}},{key:"renderLine",value:function(){var r=this.props,i=r.points,o=r.line,a=r.lineType,s=r.lineJointType,l=pr(this.props,!1),u=pr(o,!1),c,f;if(a==="joint")c=i.map(function(A){return{x:A.cx,y:A.cy}});else if(a==="fitting"){var h=Wue(i),p=h.xmin,v=h.xmax,S=h.a,y=h.b,_=function(E){return S*E+y};c=[{x:p,y:_(p)},{x:v,y:_(v)}]}var w=ku(ku(ku({},l),{},{fill:"none",stroke:l&&l.fill},u),{},{points:c});return Ve.isValidElement(o)?f=Ve.cloneElement(o,w):Ar(o)?f=o(w):f=Ve.createElement(Dp,T0({},w,{type:s})),Ve.createElement(pi,{className:"recharts-scatter-line",key:"recharts-scatter-line"},f)}},{key:"render",value:function(){var r=this.props,i=r.hide,o=r.points,a=r.line,s=r.className,l=r.xAxis,u=r.yAxis,c=r.left,f=r.top,h=r.width,p=r.height,v=r.id,S=r.isAnimationActive;if(i||!o||!o.length)return null;var y=this.state.isAnimationFinished,_=qr("recharts-scatter",s),w=l&&l.allowDataOverflow,A=u&&u.allowDataOverflow,E=w||A,P=mr(v)?this.id:v;return Ve.createElement(pi,{className:_,clipPath:E?"url(#clipPath-".concat(P,")"):null},w||A?Ve.createElement("defs",null,Ve.createElement("clipPath",{id:"clipPath-".concat(P)},Ve.createElement("rect",{x:w?c:c-h/2,y:A?f:f-p/2,width:w?h:h*2,height:A?p:p*2}))):null,a&&this.renderLine(),this.renderErrorBar(),Ve.createElement(pi,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!S||y)&&Sf.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}}]),e})(Me.PureComponent);ch(s1,"displayName","Scatter");ch(s1,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!Eh.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});ch(s1,"getComposedData",function(n){var e=n.xAxis,t=n.yAxis,r=n.zAxis,i=n.item,o=n.displayedData,a=n.xAxisTicks,s=n.yAxisTicks,l=n.offset,u=i.props.tooltipType,c=Fl(i.props.children,qI),f=mr(e.dataKey)?i.props.dataKey:e.dataKey,h=mr(t.dataKey)?i.props.dataKey:t.dataKey,p=r&&r.dataKey,v=r?r.range:ob.defaultProps.range,S=v&&v[0],y=e.scale.bandwidth?e.scale.bandwidth():0,_=t.scale.bandwidth?t.scale.bandwidth():0,w=o.map(function(A,E){var P=Da(A,f),O=Da(A,h),L=!mr(p)&&Da(A,p)||"-",D=[{name:mr(e.dataKey)?i.props.name:e.name||e.dataKey,unit:e.unit||"",value:P,payload:A,dataKey:f,type:u},{name:mr(t.dataKey)?i.props.name:t.name||t.dataKey,unit:t.unit||"",value:O,payload:A,dataKey:h,type:u}];L!=="-"&&D.push({name:r.name||r.dataKey,unit:r.unit||"",value:L,payload:A,dataKey:p,type:u});var F=Ng({axis:e,ticks:a,bandSize:y,entry:A,index:E,dataKey:f}),U=Ng({axis:t,ticks:s,bandSize:_,entry:A,index:E,dataKey:h}),k=L!=="-"?r.scale(L):S,z=Math.sqrt(Math.max(k,0)/Math.PI);return ku(ku({},A),{},{cx:F,cy:U,x:F-z,y:U-z,xAxis:e,yAxis:t,zAxis:r,width:2*z,height:2*z,size:k,node:{x:P,y:O,z:L},tooltipPayload:D,tooltipPosition:{x:F,y:U},payload:A},c&&c[E]&&c[E].props)});return ku({points:w},l)});function rP(){return rP=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},rP.apply(this,arguments)}var ab=function(e){var t=e.xAxisId,r=_R(),i=SR(),o=Tq(t);return o==null?null:Ve.createElement(ov,rP({},o,{className:qr("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(s){return nd(s,!0)}}))};ab.displayName="XAxis";ab.defaultProps={allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0};function iP(){return iP=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},iP.apply(this,arguments)}var sb=function(e){var t=e.yAxisId,r=_R(),i=SR(),o=Mq(t);return o==null?null:Ve.createElement(ov,iP({},o,{className:qr("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(s){return nd(s,!0)}}))};sb.displayName="YAxis";sb.defaultProps={allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1};function $B(n){return Pwe(n)||Cwe(n)||Mwe(n)||Twe()}function Twe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mwe(n,e){if(n){if(typeof n=="string")return oP(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return oP(n,e)}}function Cwe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Pwe(n){if(Array.isArray(n))return oP(n)}function oP(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var aP=function(e,t,r,i,o){var a=Fl(e,ib),s=Fl(e,i1),l=[].concat($B(a),$B(s)),u=Fl(e,o1),c="".concat(i,"Id"),f=i[0],h=t;if(l.length&&(h=l.reduce(function(S,y){if(y.props[c]===r&&wf(y.props,"extendDomain")&&an(y.props[f])){var _=y.props[f];return[Math.min(S[0],_),Math.max(S[1],_)]}return S},h)),u.length){var p="".concat(f,"1"),v="".concat(f,"2");h=u.reduce(function(S,y){if(y.props[c]===r&&wf(y.props,"extendDomain")&&an(y.props[p])&&an(y.props[v])){var _=y.props[p],w=y.props[v];return[Math.min(S[0],_,w),Math.max(S[1],_,w)]}return S},h)}return o&&o.length&&(h=o.reduce(function(S,y){return an(y)?[Math.min(S[0],y),Math.max(S[1],y)]:S},h)),h},KM={exports:{}},XB;function Iwe(){return XB||(XB=1,(function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function i(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function o(l,u,c,f,h){if(typeof c!="function")throw new TypeError("The listener must be a function");var p=new i(c,f||l,h),v=t?t+u:u;return l._events[v]?l._events[v].fn?l._events[v]=[l._events[v],p]:l._events[v].push(p):(l._events[v]=p,l._eventsCount++),l}function a(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var u=[],c,f;if(this._eventsCount===0)return u;for(f in c=this._events)e.call(c,f)&&u.push(t?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},s.prototype.listeners=function(u){var c=t?t+u:u,f=this._events[c];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,p=f.length,v=new Array(p);h<p;h++)v[h]=f[h].fn;return v},s.prototype.listenerCount=function(u){var c=t?t+u:u,f=this._events[c];return f?f.fn?1:f.length:0},s.prototype.emit=function(u,c,f,h,p,v){var S=t?t+u:u;if(!this._events[S])return!1;var y=this._events[S],_=arguments.length,w,A;if(y.fn){switch(y.once&&this.removeListener(u,y.fn,void 0,!0),_){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,c),!0;case 3:return y.fn.call(y.context,c,f),!0;case 4:return y.fn.call(y.context,c,f,h),!0;case 5:return y.fn.call(y.context,c,f,h,p),!0;case 6:return y.fn.call(y.context,c,f,h,p,v),!0}for(A=1,w=new Array(_-1);A<_;A++)w[A-1]=arguments[A];y.fn.apply(y.context,w)}else{var E=y.length,P;for(A=0;A<E;A++)switch(y[A].once&&this.removeListener(u,y[A].fn,void 0,!0),_){case 1:y[A].fn.call(y[A].context);break;case 2:y[A].fn.call(y[A].context,c);break;case 3:y[A].fn.call(y[A].context,c,f);break;case 4:y[A].fn.call(y[A].context,c,f,h);break;default:if(!w)for(P=1,w=new Array(_-1);P<_;P++)w[P-1]=arguments[P];y[A].fn.apply(y[A].context,w)}}return!0},s.prototype.on=function(u,c,f){return o(this,u,c,f,!1)},s.prototype.once=function(u,c,f){return o(this,u,c,f,!0)},s.prototype.removeListener=function(u,c,f,h){var p=t?t+u:u;if(!this._events[p])return this;if(!c)return a(this,p),this;var v=this._events[p];if(v.fn)v.fn===c&&(!h||v.once)&&(!f||v.context===f)&&a(this,p);else{for(var S=0,y=[],_=v.length;S<_;S++)(v[S].fn!==c||h&&!v[S].once||f&&v[S].context!==f)&&y.push(v[S]);y.length?this._events[p]=y.length===1?y[0]:y:a(this,p)}return this},s.prototype.removeAllListeners=function(u){var c;return u?(c=t?t+u:u,this._events[c]&&a(this,c)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=t,s.EventEmitter=s,n.exports=s})(KM)),KM.exports}var Rwe=Iwe();const Nwe=gi(Rwe);var JM=new Nwe,ZM="recharts.syncMouseEvents";function Ly(n){"@babel/helpers - typeof";return Ly=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ly(n)}function Lwe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Owe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,zq(r.key),r)}}function Dwe(n,e,t){return e&&Owe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function QM(n,e,t){return e=zq(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function zq(n){var e=kwe(n,"string");return Ly(e)=="symbol"?e:String(e)}function kwe(n,e){if(Ly(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Ly(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Fwe=(function(){function n(){Lwe(this,n),QM(this,"activeIndex",0),QM(this,"coordinateList",[]),QM(this,"layout","horizontal")}return Dwe(n,[{key:"setDetails",value:function(t){var r,i=t.coordinateList,o=i===void 0?null:i,a=t.container,s=a===void 0?null:a,l=t.layout,u=l===void 0?null:l,c=t.offset,f=c===void 0?null:c,h=t.mouseHandlerCallback,p=h===void 0?null:h;this.coordinateList=(r=o??this.coordinateList)!==null&&r!==void 0?r:[],this.container=s??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(t){if(this.coordinateList.length!==0)switch(t.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(t){this.activeIndex=t}},{key:"spoofMouse",value:function(){var t,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),o=i.x,a=i.y,s=i.height,l=this.coordinateList[this.activeIndex].coordinate,u=((t=window)===null||t===void 0?void 0:t.scrollX)||0,c=((r=window)===null||r===void 0?void 0:r.scrollY)||0,f=o+l+u,h=a+this.offset.top+s/2+c;this.mouseHandlerCallback({pageX:f,pageY:h})}}}]),n})();function Uwe(n,e,t){if(t==="number"&&e===!0&&Array.isArray(n)){var r=n==null?void 0:n[0],i=n==null?void 0:n[1];if(r&&i&&an(r)&&an(i))return!0}return!1}function Bwe(n,e,t,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:n==="horizontal"?e.x-i:t.left+.5,y:n==="horizontal"?t.top+.5:e.y-i,width:n==="horizontal"?r:t.width-1,height:n==="horizontal"?t.height-1:r}}function Hq(n){var e=n.cx,t=n.cy,r=n.radius,i=n.startAngle,o=n.endAngle,a=cs(e,t,r,i),s=cs(e,t,r,o);return{points:[a,s],cx:e,cy:t,radius:r,startAngle:i,endAngle:o}}function zwe(n,e,t){var r,i,o,a;if(n==="horizontal")r=e.x,o=r,i=t.top,a=t.top+t.height;else if(n==="vertical")i=e.y,a=i,r=t.left,o=t.left+t.width;else if(e.cx!=null&&e.cy!=null)if(n==="centric"){var s=e.cx,l=e.cy,u=e.innerRadius,c=e.outerRadius,f=e.angle,h=cs(s,l,u,f),p=cs(s,l,c,f);r=h.x,i=h.y,o=p.x,a=p.y}else return Hq(e);return[{x:r,y:i},{x:o,y:a}]}function Oy(n){"@babel/helpers - typeof";return Oy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oy(n)}function YB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Yx(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?YB(Object(t),!0).forEach(function(r){Hwe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):YB(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Hwe(n,e,t){return e=Vwe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Vwe(n){var e=Gwe(n,"string");return Oy(e)=="symbol"?e:String(e)}function Gwe(n,e){if(Oy(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Oy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function qwe(n){var e=n.element,t=n.tooltipEventType,r=n.isActive,i=n.activeCoordinate,o=n.activePayload,a=n.offset,s=n.activeTooltipIndex,l=n.tooltipAxisBandSize,u=n.layout,c=n.chartName;if(!e||!e.props.cursor||!r||!i||c!=="ScatterChart"&&t!=="axis")return null;var f,h=Dp;if(c==="ScatterChart")f=i,h=axe;else if(c==="BarChart")f=Bwe(u,i,a,l),h=gR;else if(u==="radial"){var p=Hq(i),v=p.cx,S=p.cy,y=p.radius,_=p.startAngle,w=p.endAngle;f={cx:v,cy:S,startAngle:_,endAngle:w,innerRadius:y,outerRadius:y},h=nq}else f={points:zwe(u,i,a)},h=Dp;var A=Yx(Yx(Yx(Yx({stroke:"#ccc",pointerEvents:"none"},a),f),pr(e.props.cursor,!1)),{},{payload:o,payloadIndex:s,className:qr("recharts-tooltip-cursor",e.props.cursor.className)});return Me.isValidElement(e.props.cursor)?Me.cloneElement(e.props.cursor,A):Me.createElement(h,A)}var Wwe=["item"],jwe=["children","className","width","height","style","compact","title","desc"];function zg(n){"@babel/helpers - typeof";return zg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zg(n)}function M0(){return M0=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},M0.apply(this,arguments)}function KB(n,e){return Ywe(n)||Xwe(n,e)||Gq(n,e)||$we()}function $we(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xwe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(t=t.call(n)).next,e!==0)for(;!(l=(r=o.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function Ywe(n){if(Array.isArray(n))return n}function JB(n,e){if(n==null)return{};var t=Kwe(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Kwe(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function Jwe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Zwe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,qq(r.key),r)}}function Qwe(n,e,t){return e&&Zwe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function ebe(n,e,t){return e=HS(e),tbe(n,Vq()?Reflect.construct(e,t||[],HS(n).constructor):e.apply(n,t))}function tbe(n,e){if(e&&(zg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qr(n)}function Vq(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Vq=function(){return!!n})()}function HS(n){return HS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},HS(n)}function Qr(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function nbe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&sP(n,e)}function sP(n,e){return sP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},sP(n,e)}function Hg(n){return obe(n)||ibe(n)||Gq(n)||rbe()}function rbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gq(n,e){if(n){if(typeof n=="string")return lP(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return lP(n,e)}}function ibe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function obe(n){if(Array.isArray(n))return lP(n)}function lP(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function ZB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ut(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ZB(Object(t),!0).forEach(function(r){Zn(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ZB(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Zn(n,e,t){return e=qq(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function qq(n){var e=abe(n,"string");return zg(e)=="symbol"?e:String(e)}function abe(n,e){if(zg(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(zg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var sbe={xAxis:["bottom","top"],yAxis:["left","right"]},lbe={width:"100%",height:"100%"},Wq={x:0,y:0};function Kx(n){return n}var ube=function(e,t){return t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius},cbe=function(e,t,r,i){var o=t.find(function(c){return c&&c.index===r});if(o){if(e==="horizontal")return{x:o.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:o.coordinate};if(e==="centric"){var a=o.coordinate,s=i.radius;return Ut(Ut(Ut({},i),cs(i.cx,i.cy,s,a)),{},{angle:a,radius:s})}var l=o.coordinate,u=i.angle;return Ut(Ut(Ut({},i),cs(i.cx,i.cy,l,u)),{},{angle:u,radius:l})}return Wq},lb=function(e,t){var r=t.graphicalItems,i=t.dataStartIndex,o=t.dataEndIndex,a=(r??[]).reduce(function(s,l){var u=l.props.data;return u&&u.length?[].concat(Hg(s),Hg(u)):s},[]);return a.length>0?a:e&&e.length&&an(i)&&an(o)?e.slice(i,o+1):[]};function jq(n){return n==="number"?[0,"auto"]:void 0}var uP=function(e,t,r,i){var o=e.graphicalItems,a=e.tooltipAxis,s=lb(t,e);return r<0||!o||!o.length||r>=s.length?null:o.reduce(function(l,u){var c,f=(c=u.props.data)!==null&&c!==void 0?c:t;f&&e.dataStartIndex+e.dataEndIndex!==0&&(f=f.slice(e.dataStartIndex,e.dataEndIndex+1));var h;if(a.dataKey&&!a.allowDuplicatedCategory){var p=f===void 0?s:f;h=K_(p,a.dataKey,i)}else h=f&&f[r]||s[r];return h?[].concat(Hg(l),[QG(u,h)]):l},[])},QB=function(e,t,r,i){var o=i||{x:e.chartX,y:e.chartY},a=ube(o,r),s=e.orderedTooltipTicks,l=e.tooltipAxis,u=e.tooltipTicks,c=Gve(a,s,u,l);if(c>=0&&u){var f=u[c]&&u[c].value,h=uP(e,t,c,f),p=cbe(r,s,c,o);return{activeTooltipIndex:c,activeLabel:f,activePayload:h,activeCoordinate:p}}return null},fbe=function(e,t){var r=t.axes,i=t.graphicalItems,o=t.axisType,a=t.axisIdKey,s=t.stackGroups,l=t.dataStartIndex,u=t.dataEndIndex,c=e.layout,f=e.children,h=e.stackOffset,p=KG(c,o);return r.reduce(function(v,S){var y,_=S.props,w=_.type,A=_.dataKey,E=_.allowDataOverflow,P=_.allowDuplicatedCategory,O=_.scale,L=_.ticks,D=_.includeHidden,F=S.props[a];if(v[F])return v;var U=lb(e.data,{graphicalItems:i.filter(function(G){return G.props[a]===F}),dataStartIndex:l,dataEndIndex:u}),k=U.length,z,W,j;Uwe(S.props.domain,E,w)&&(z=P5(S.props.domain,null,E),p&&(w==="number"||O!=="auto")&&(j=w0(U,A,"category")));var se=jq(w);if(!z||z.length===0){var Y,Q=(Y=S.props.domain)!==null&&Y!==void 0?Y:se;if(A){if(z=w0(U,A,w),w==="category"&&p){var X=que(z);P&&X?(W=z,z=RS(0,k)):P||(z=h6(Q,z,S).reduce(function(G,ne){return G.indexOf(ne)>=0?G:[].concat(Hg(G),[ne])},[]))}else if(w==="category")P?z=z.filter(function(G){return G!==""&&!mr(G)}):z=h6(Q,z,S).reduce(function(G,ne){return G.indexOf(ne)>=0||ne===""||mr(ne)?G:[].concat(Hg(G),[ne])},[]);else if(w==="number"){var Z=Xve(U,i.filter(function(G){return G.props[a]===F&&(D||!G.props.hide)}),A,o,c);Z&&(z=Z)}p&&(w==="number"||O!=="auto")&&(j=w0(U,A,"category"))}else p?z=RS(0,k):s&&s[F]&&s[F].hasStack&&w==="number"?z=h==="expand"?[0,1]:ZG(s[F].stackGroups,l,u):z=YG(U,i.filter(function(G){return G.props[a]===F&&(D||!G.props.hide)}),w,c,!0);if(w==="number")z=aP(f,z,F,o,L),Q&&(z=P5(Q,z,E));else if(w==="category"&&Q){var oe=Q,ee=z.every(function(G){return oe.indexOf(G)>=0});ee&&(z=oe)}}return Ut(Ut({},v),{},Zn({},F,Ut(Ut({},S.props),{},{axisType:o,domain:z,categoricalDomain:j,duplicateDomain:W,originalDomain:(y=S.props.domain)!==null&&y!==void 0?y:se,isCategorical:p,layout:c})))},{})},dbe=function(e,t){var r=t.graphicalItems,i=t.Axis,o=t.axisType,a=t.axisIdKey,s=t.stackGroups,l=t.dataStartIndex,u=t.dataEndIndex,c=e.layout,f=e.children,h=lb(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:u}),p=h.length,v=KG(c,o),S=-1;return r.reduce(function(y,_){var w=_.props[a],A=jq("number");if(!y[w]){S++;var E;return v?E=RS(0,p):s&&s[w]&&s[w].hasStack?(E=ZG(s[w].stackGroups,l,u),E=aP(f,E,w,o)):(E=P5(A,YG(h,r.filter(function(P){return P.props[a]===w&&!P.props.hide}),"number",c),i.defaultProps.allowDataOverflow),E=aP(f,E,w,o)),Ut(Ut({},y),{},Zn({},w,Ut(Ut({axisType:o},i.defaultProps),{},{hide:!0,orientation:Hu(sbe,"".concat(o,".").concat(S%2),null),domain:E,originalDomain:A,isCategorical:v,layout:c})))}return y},{})},hbe=function(e,t){var r=t.axisType,i=r===void 0?"xAxis":r,o=t.AxisComp,a=t.graphicalItems,s=t.stackGroups,l=t.dataStartIndex,u=t.dataEndIndex,c=e.children,f="".concat(i,"Id"),h=Fl(c,o),p={};return h&&h.length?p=fbe(e,{axes:h,graphicalItems:a,axisType:i,axisIdKey:f,stackGroups:s,dataStartIndex:l,dataEndIndex:u}):a&&a.length&&(p=dbe(e,{Axis:o,graphicalItems:a,axisType:i,axisIdKey:f,stackGroups:s,dataStartIndex:l,dataEndIndex:u})),p},pbe=function(e){var t=oh(e),r=nd(t,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:VI(r,function(i){return i.coordinate}),tooltipAxis:t,tooltipAxisBandSize:SS(t,r)}},e8=function(e){var t=e.children,r=e.defaultShowTooltip,i=lu(t,jp),o=0,a=0;return e.data&&e.data.length!==0&&(a=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(o=i.props.startIndex),i.props.endIndex>=0&&(a=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:a,activeTooltipIndex:-1,isTooltipActive:!!r}},mbe=function(e){return!e||!e.length?!1:e.some(function(t){var r=id(t&&t.type);return r&&r.indexOf("Bar")>=0})},t8=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},gbe=function(e,t){var r=e.props,i=e.graphicalItems,o=e.xAxisMap,a=o===void 0?{}:o,s=e.yAxisMap,l=s===void 0?{}:s,u=r.width,c=r.height,f=r.children,h=r.margin||{},p=lu(f,jp),v=lu(f,Tg),S=Object.keys(l).reduce(function(P,O){var L=l[O],D=L.orientation;return!L.mirror&&!L.hide?Ut(Ut({},P),{},Zn({},D,P[D]+L.width)):P},{left:h.left||0,right:h.right||0}),y=Object.keys(a).reduce(function(P,O){var L=a[O],D=L.orientation;return!L.mirror&&!L.hide?Ut(Ut({},P),{},Zn({},D,Hu(P,"".concat(D))+L.height)):P},{top:h.top||0,bottom:h.bottom||0}),_=Ut(Ut({},y),S),w=_.bottom;p&&(_.bottom+=p.props.height||jp.defaultProps.height),v&&t&&(_=jve(_,i,r,t));var A=u-_.left-_.right,E=c-_.top-_.bottom;return Ut(Ut({brushBottom:w},_),{},{width:Math.max(A,0),height:Math.max(E,0)})},vbe=function(e,t){if(t==="xAxis")return e[t].width;if(t==="yAxis")return e[t].height},ybe=function(e){var t,r=e.chartName,i=e.GraphicalChild,o=e.defaultTooltipEventType,a=o===void 0?"axis":o,s=e.validateTooltipEventTypes,l=s===void 0?["axis"]:s,u=e.axisComponents,c=e.legendContent,f=e.formatAxisMap,h=e.defaultProps,p=function(y,_){var w=_.graphicalItems,A=_.stackGroups,E=_.offset,P=_.updateId,O=_.dataStartIndex,L=_.dataEndIndex,D=y.barSize,F=y.layout,U=y.barGap,k=y.barCategoryGap,z=y.maxBarSize,W=t8(F),j=W.numericAxisName,se=W.cateAxisName,Y=mbe(w),Q=[];return w.forEach(function(X,Z){var oe=lb(y.data,{graphicalItems:[X],dataStartIndex:O,dataEndIndex:L}),ee=X.props,G=ee.dataKey,ne=ee.maxBarSize,te=X.props["".concat(j,"Id")],de=X.props["".concat(se,"Id")],me={},be=u.reduce(function(lt,ve){var le=_["".concat(ve.axisType,"Map")],He=X.props["".concat(ve.axisType,"Id")];le&&le[He]||ve.axisType==="zAxis"||Wp();var rt=le[He];return Ut(Ut({},lt),{},Zn(Zn({},ve.axisType,rt),"".concat(ve.axisType,"Ticks"),nd(rt)))},me),Ie=be[se],Ee=be["".concat(se,"Ticks")],Xe=A&&A[te]&&A[te].hasStack&&a0e(X,A[te].stackGroups),tt=id(X.type).indexOf("Bar")>=0,Te=SS(Ie,Ee),Je=[],Se=Y&&qve({barSize:D,stackGroups:A,totalSize:vbe(be,se)});if(tt){var Ge,ye,Ct=mr(ne)?z:ne,ft=(Ge=(ye=SS(Ie,Ee,!0))!==null&&ye!==void 0?ye:Ct)!==null&&Ge!==void 0?Ge:0;Je=Wve({barGap:U,barCategoryGap:k,bandSize:ft!==Te?ft:Te,sizeList:Se[de],maxBarSize:Ct}),ft!==Te&&(Je=Je.map(function(lt){return Ut(Ut({},lt),{},{position:Ut(Ut({},lt.position),{},{offset:lt.position.offset-ft/2})})}))}var mt=X&&X.type&&X.type.getComposedData;mt&&Q.push({props:Ut(Ut({},mt(Ut(Ut({},be),{},{displayedData:oe,props:y,dataKey:G,item:X,bandSize:Te,barPosition:Je,offset:E,stackedData:Xe,layout:F,dataStartIndex:O,dataEndIndex:L}))),{},Zn(Zn(Zn({key:X.key||"item-".concat(Z)},j,be[j]),se,be[se]),"animationId",P)),childIndex:nce(X,y.children),item:X})}),Q},v=function(y,_){var w=y.props,A=y.dataStartIndex,E=y.dataEndIndex,P=y.updateId;if(!CD({props:w}))return null;var O=w.children,L=w.layout,D=w.stackOffset,F=w.data,U=w.reverseStackOrder,k=t8(L),z=k.numericAxisName,W=k.cateAxisName,j=Fl(O,i),se=r0e(F,j,"".concat(z,"Id"),"".concat(W,"Id"),D,U),Y=u.reduce(function(ee,G){var ne="".concat(G.axisType,"Map");return Ut(Ut({},ee),{},Zn({},ne,hbe(w,Ut(Ut({},G),{},{graphicalItems:j,stackGroups:G.axisType===z&&se,dataStartIndex:A,dataEndIndex:E}))))},{}),Q=gbe(Ut(Ut({},Y),{},{props:w,graphicalItems:j}),_==null?void 0:_.legendBBox);Object.keys(Y).forEach(function(ee){Y[ee]=f(w,Y[ee],Q,ee.replace("Map",""),r)});var X=Y["".concat(W,"Map")],Z=pbe(X),oe=p(w,Ut(Ut({},Y),{},{dataStartIndex:A,dataEndIndex:E,updateId:P,graphicalItems:j,stackGroups:se,offset:Q}));return Ut(Ut({formattedGraphicalItems:oe,graphicalItems:j,offset:Q,stackGroups:se},Z),Y)};return t=(function(S){nbe(y,S);function y(_){var w,A,E;return Jwe(this,y),E=ebe(this,y,[_]),Zn(Qr(E),"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Zn(Qr(E),"accessibilityManager",new Fwe),Zn(Qr(E),"handleLegendBBoxUpdate",function(P){if(P){var O=E.state,L=O.dataStartIndex,D=O.dataEndIndex,F=O.updateId;E.setState(Ut({legendBBox:P},v({props:E.props,dataStartIndex:L,dataEndIndex:D,updateId:F},Ut(Ut({},E.state),{},{legendBBox:P}))))}}),Zn(Qr(E),"handleReceiveSyncEvent",function(P,O,L){if(E.props.syncId===P){if(L===E.eventEmitterSymbol&&typeof E.props.syncMethod!="function")return;E.applySyncEvent(O)}}),Zn(Qr(E),"handleBrushChange",function(P){var O=P.startIndex,L=P.endIndex;if(O!==E.state.dataStartIndex||L!==E.state.dataEndIndex){var D=E.state.updateId;E.setState(function(){return Ut({dataStartIndex:O,dataEndIndex:L},v({props:E.props,dataStartIndex:O,dataEndIndex:L,updateId:D},E.state))}),E.triggerSyncEvent({dataStartIndex:O,dataEndIndex:L})}}),Zn(Qr(E),"handleMouseEnter",function(P){var O=E.getMouseInfo(P);if(O){var L=Ut(Ut({},O),{},{isTooltipActive:!0});E.setState(L),E.triggerSyncEvent(L);var D=E.props.onMouseEnter;Ar(D)&&D(L,P)}}),Zn(Qr(E),"triggeredAfterMouseMove",function(P){var O=E.getMouseInfo(P),L=O?Ut(Ut({},O),{},{isTooltipActive:!0}):{isTooltipActive:!1};E.setState(L),E.triggerSyncEvent(L);var D=E.props.onMouseMove;Ar(D)&&D(L,P)}),Zn(Qr(E),"handleItemMouseEnter",function(P){E.setState(function(){return{isTooltipActive:!0,activeItem:P,activePayload:P.tooltipPayload,activeCoordinate:P.tooltipPosition||{x:P.cx,y:P.cy}}})}),Zn(Qr(E),"handleItemMouseLeave",function(){E.setState(function(){return{isTooltipActive:!1}})}),Zn(Qr(E),"handleMouseMove",function(P){P.persist(),E.throttleTriggeredAfterMouseMove(P)}),Zn(Qr(E),"handleMouseLeave",function(P){E.throttleTriggeredAfterMouseMove.cancel();var O={isTooltipActive:!1};E.setState(O),E.triggerSyncEvent(O);var L=E.props.onMouseLeave;Ar(L)&&L(O,P)}),Zn(Qr(E),"handleOuterEvent",function(P){var O=tce(P),L=Hu(E.props,"".concat(O));if(O&&Ar(L)){var D,F;/.*touch.*/i.test(O)?F=E.getMouseInfo(P.changedTouches[0]):F=E.getMouseInfo(P),L((D=F)!==null&&D!==void 0?D:{},P)}}),Zn(Qr(E),"handleClick",function(P){var O=E.getMouseInfo(P);if(O){var L=Ut(Ut({},O),{},{isTooltipActive:!0});E.setState(L),E.triggerSyncEvent(L);var D=E.props.onClick;Ar(D)&&D(L,P)}}),Zn(Qr(E),"handleMouseDown",function(P){var O=E.props.onMouseDown;if(Ar(O)){var L=E.getMouseInfo(P);O(L,P)}}),Zn(Qr(E),"handleMouseUp",function(P){var O=E.props.onMouseUp;if(Ar(O)){var L=E.getMouseInfo(P);O(L,P)}}),Zn(Qr(E),"handleTouchMove",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&E.throttleTriggeredAfterMouseMove(P.changedTouches[0])}),Zn(Qr(E),"handleTouchStart",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&E.handleMouseDown(P.changedTouches[0])}),Zn(Qr(E),"handleTouchEnd",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&E.handleMouseUp(P.changedTouches[0])}),Zn(Qr(E),"triggerSyncEvent",function(P){E.props.syncId!==void 0&&JM.emit(ZM,E.props.syncId,P,E.eventEmitterSymbol)}),Zn(Qr(E),"applySyncEvent",function(P){var O=E.props,L=O.layout,D=O.syncMethod,F=E.state.updateId,U=P.dataStartIndex,k=P.dataEndIndex;if(P.dataStartIndex!==void 0||P.dataEndIndex!==void 0)E.setState(Ut({dataStartIndex:U,dataEndIndex:k},v({props:E.props,dataStartIndex:U,dataEndIndex:k,updateId:F},E.state)));else if(P.activeTooltipIndex!==void 0){var z=P.chartX,W=P.chartY,j=P.activeTooltipIndex,se=E.state,Y=se.offset,Q=se.tooltipTicks;if(!Y)return;if(typeof D=="function")j=D(Q,P);else if(D==="value"){j=-1;for(var X=0;X<Q.length;X++)if(Q[X].value===P.activeLabel){j=X;break}}var Z=Ut(Ut({},Y),{},{x:Y.left,y:Y.top}),oe=Math.min(z,Z.x+Z.width),ee=Math.min(W,Z.y+Z.height),G=Q[j]&&Q[j].value,ne=uP(E.state,E.props.data,j),te=Q[j]?{x:L==="horizontal"?Q[j].coordinate:oe,y:L==="horizontal"?ee:Q[j].coordinate}:Wq;E.setState(Ut(Ut({},P),{},{activeLabel:G,activeCoordinate:te,activePayload:ne,activeTooltipIndex:j}))}else E.setState(P)}),Zn(Qr(E),"renderCursor",function(P){var O,L=E.state,D=L.isTooltipActive,F=L.activeCoordinate,U=L.activePayload,k=L.offset,z=L.activeTooltipIndex,W=L.tooltipAxisBandSize,j=E.getTooltipEventType(),se=(O=P.props.active)!==null&&O!==void 0?O:D,Y=E.props.layout,Q=P.key||"_recharts-cursor";return Ve.createElement(qwe,{key:Q,activeCoordinate:F,activePayload:U,activeTooltipIndex:z,chartName:r,element:P,isActive:se,layout:Y,offset:k,tooltipAxisBandSize:W,tooltipEventType:j})}),Zn(Qr(E),"renderPolarAxis",function(P,O,L){var D=Hu(P,"type.axisType"),F=Hu(E.state,"".concat(D,"Map")),U=F&&F[P.props["".concat(D,"Id")]];return Me.cloneElement(P,Ut(Ut({},U),{},{className:qr(D,U.className),key:P.key||"".concat(O,"-").concat(L),ticks:nd(U,!0)}))}),Zn(Qr(E),"renderPolarGrid",function(P){var O=P.props,L=O.radialLines,D=O.polarAngles,F=O.polarRadius,U=E.state,k=U.radiusAxisMap,z=U.angleAxisMap,W=oh(k),j=oh(z),se=j.cx,Y=j.cy,Q=j.innerRadius,X=j.outerRadius;return Me.cloneElement(P,{polarAngles:Array.isArray(D)?D:nd(j,!0).map(function(Z){return Z.coordinate}),polarRadius:Array.isArray(F)?F:nd(W,!0).map(function(Z){return Z.coordinate}),cx:se,cy:Y,innerRadius:Q,outerRadius:X,key:P.key||"polar-grid",radialLines:L})}),Zn(Qr(E),"renderLegend",function(){var P=E.state.formattedGraphicalItems,O=E.props,L=O.children,D=O.width,F=O.height,U=E.props.margin||{},k=D-(U.left||0)-(U.right||0),z=$G({children:L,formattedGraphicalItems:P,legendWidth:k,legendContent:c});if(!z)return null;var W=z.item,j=JB(z,Wwe);return Me.cloneElement(W,Ut(Ut({},j),{},{chartWidth:D,chartHeight:F,margin:U,onBBoxUpdate:E.handleLegendBBoxUpdate}))}),Zn(Qr(E),"renderTooltip",function(){var P,O=E.props,L=O.children,D=O.accessibilityLayer,F=lu(L,cf);if(!F)return null;var U=E.state,k=U.isTooltipActive,z=U.activeCoordinate,W=U.activePayload,j=U.activeLabel,se=U.offset,Y=(P=F.props.active)!==null&&P!==void 0?P:k;return Me.cloneElement(F,{viewBox:Ut(Ut({},se),{},{x:se.left,y:se.top}),active:Y,label:j,payload:Y?W:[],coordinate:z,accessibilityLayer:D})}),Zn(Qr(E),"renderBrush",function(P){var O=E.props,L=O.margin,D=O.data,F=E.state,U=F.offset,k=F.dataStartIndex,z=F.dataEndIndex,W=F.updateId;return Me.cloneElement(P,{key:P.key||"_recharts-brush",onChange:Wx(E.handleBrushChange,P.props.onChange),data:D,x:an(P.props.x)?P.props.x:U.left,y:an(P.props.y)?P.props.y:U.top+U.height+U.brushBottom-(L.bottom||0),width:an(P.props.width)?P.props.width:U.width,startIndex:k,endIndex:z,updateId:"brush-".concat(W)})}),Zn(Qr(E),"renderReferenceElement",function(P,O,L){if(!P)return null;var D=Qr(E),F=D.clipPathId,U=E.state,k=U.xAxisMap,z=U.yAxisMap,W=U.offset,j=P.props,se=j.xAxisId,Y=j.yAxisId;return Me.cloneElement(P,{key:P.key||"".concat(O,"-").concat(L),xAxis:k[se],yAxis:z[Y],viewBox:{x:W.left,y:W.top,width:W.width,height:W.height},clipPathId:F})}),Zn(Qr(E),"renderActivePoints",function(P){var O=P.item,L=P.activePoint,D=P.basePoint,F=P.childIndex,U=P.isRange,k=[],z=O.props.key,W=O.item.props,j=W.activeDot,se=W.dataKey,Y=Ut(Ut({index:F,dataKey:se,cx:L.x,cy:L.y,r:4,fill:mR(O.item),strokeWidth:2,stroke:"#fff",payload:L.payload,value:L.value,key:"".concat(z,"-activePoint-").concat(F)},pr(j,!1)),J_(j));return k.push(y.renderActiveDot(j,Y)),D?k.push(y.renderActiveDot(j,Ut(Ut({},Y),{},{cx:D.x,cy:D.y,key:"".concat(z,"-basePoint-").concat(F)}))):U&&k.push(null),k}),Zn(Qr(E),"renderGraphicChild",function(P,O,L){var D=E.filterFormatItem(P,O,L);if(!D)return null;var F=E.getTooltipEventType(),U=E.state,k=U.isTooltipActive,z=U.tooltipAxis,W=U.activeTooltipIndex,j=U.activeLabel,se=E.props.children,Y=lu(se,cf),Q=D.props,X=Q.points,Z=Q.isRange,oe=Q.baseLine,ee=D.item.props,G=ee.activeDot,ne=ee.hide,te=ee.activeBar,de=ee.activeShape,me=!!(!ne&&k&&Y&&(G||te||de)),be={};F!=="axis"&&Y&&Y.props.trigger==="click"?be={onClick:Wx(E.handleItemMouseEnter,P.props.onClick)}:F!=="axis"&&(be={onMouseLeave:Wx(E.handleItemMouseLeave,P.props.onMouseLeave),onMouseEnter:Wx(E.handleItemMouseEnter,P.props.onMouseEnter)});var Ie=Me.cloneElement(P,Ut(Ut({},D.props),be));function Ee(ve){return typeof z.dataKey=="function"?z.dataKey(ve.payload):null}if(me)if(W>=0){var Xe,tt;if(z.dataKey&&!z.allowDuplicatedCategory){var Te=typeof z.dataKey=="function"?Ee:"payload.".concat(z.dataKey.toString());Xe=K_(X,Te,j),tt=Z&&oe&&K_(oe,Te,j)}else Xe=X==null?void 0:X[W],tt=Z&&oe&&oe[W];if(de||te){var Je=P.props.activeIndex!==void 0?P.props.activeIndex:W;return[Me.cloneElement(P,Ut(Ut(Ut({},D.props),be),{},{activeIndex:Je})),null,null]}if(!mr(Xe))return[Ie].concat(Hg(E.renderActivePoints({item:D,activePoint:Xe,basePoint:tt,childIndex:W,isRange:Z})))}else{var Se,Ge=(Se=E.getItemByXY(E.state.activeCoordinate))!==null&&Se!==void 0?Se:{graphicalItem:Ie},ye=Ge.graphicalItem,Ct=ye.item,ft=Ct===void 0?P:Ct,mt=ye.childIndex,lt=Ut(Ut(Ut({},D.props),be),{},{activeIndex:mt});return[Me.cloneElement(ft,lt),null,null]}return Z?[Ie,null,null]:[Ie,null]}),Zn(Qr(E),"renderCustomized",function(P,O,L){return Me.cloneElement(P,Ut(Ut({key:"recharts-customized-".concat(L)},E.props),E.state))}),Zn(Qr(E),"renderMap",{CartesianGrid:{handler:Kx,once:!0},ReferenceArea:{handler:E.renderReferenceElement},ReferenceLine:{handler:Kx},ReferenceDot:{handler:E.renderReferenceElement},XAxis:{handler:Kx},YAxis:{handler:Kx},Brush:{handler:E.renderBrush,once:!0},Bar:{handler:E.renderGraphicChild},Line:{handler:E.renderGraphicChild},Area:{handler:E.renderGraphicChild},Radar:{handler:E.renderGraphicChild},RadialBar:{handler:E.renderGraphicChild},Scatter:{handler:E.renderGraphicChild},Pie:{handler:E.renderGraphicChild},Funnel:{handler:E.renderGraphicChild},Tooltip:{handler:E.renderCursor,once:!0},PolarGrid:{handler:E.renderPolarGrid,once:!0},PolarAngleAxis:{handler:E.renderPolarAxis},PolarRadiusAxis:{handler:E.renderPolarAxis},Customized:{handler:E.renderCustomized}}),E.clipPathId="".concat((w=_.id)!==null&&w!==void 0?w:em("recharts"),"-clip"),E.throttleTriggeredAfterMouseMove=KV(E.triggeredAfterMouseMove,(A=_.throttleDelay)!==null&&A!==void 0?A:1e3/60),E.state={},E}return Qwe(y,[{key:"componentDidMount",value:function(){var w,A;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(A=this.props.margin.top)!==null&&A!==void 0?A:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var w=this.props,A=w.children,E=w.data,P=w.height,O=w.layout,L=lu(A,cf);if(L){var D=L.props.defaultIndex;if(!(typeof D!="number"||D<0||D>this.state.tooltipTicks.length)){var F=this.state.tooltipTicks[D]&&this.state.tooltipTicks[D].value,U=uP(this.state,E,D,F),k=this.state.tooltipTicks[D].coordinate,z=(this.state.offset.top+P)/2,W=O==="horizontal",j=W?{x:k,y:z}:{y:k,x:z},se=this.state.formattedGraphicalItems.find(function(Q){var X=Q.item;return X.type.name==="Scatter"});se&&(j=Ut(Ut({},j),se.props.points[D].tooltipPosition),U=se.props.points[D].tooltipPayload);var Y={activeTooltipIndex:D,isTooltipActive:!0,activeLabel:F,activePayload:U,activeCoordinate:j};this.setState(Y),this.renderCursor(L),this.accessibilityManager.setIndex(D)}}}},{key:"getSnapshotBeforeUpdate",value:function(w,A){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==A.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==w.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==w.margin){var E,P;this.accessibilityManager.setDetails({offset:{left:(E=this.props.margin.left)!==null&&E!==void 0?E:0,top:(P=this.props.margin.top)!==null&&P!==void 0?P:0}})}return null}},{key:"componentDidUpdate",value:function(w){JC([lu(w.children,cf)],[lu(this.props.children,cf)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var w=lu(this.props.children,cf);if(w&&typeof w.props.shared=="boolean"){var A=w.props.shared?"axis":"item";return l.indexOf(A)>=0?A:a}return a}},{key:"getMouseInfo",value:function(w){if(!this.container)return null;var A=this.container,E=A.getBoundingClientRect(),P=Hhe(E),O={chartX:Math.round(w.pageX-P.left),chartY:Math.round(w.pageY-P.top)},L=E.width/A.offsetWidth||1,D=this.inRange(O.chartX,O.chartY,L);if(!D)return null;var F=this.state,U=F.xAxisMap,k=F.yAxisMap,z=this.getTooltipEventType();if(z!=="axis"&&U&&k){var W=oh(U).scale,j=oh(k).scale,se=W&&W.invert?W.invert(O.chartX):null,Y=j&&j.invert?j.invert(O.chartY):null;return Ut(Ut({},O),{},{xValue:se,yValue:Y})}var Q=QB(this.state,this.props.data,this.props.layout,D);return Q?Ut(Ut({},O),Q):null}},{key:"inRange",value:function(w,A){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,P=this.props.layout,O=w/E,L=A/E;if(P==="horizontal"||P==="vertical"){var D=this.state.offset,F=O>=D.left&&O<=D.left+D.width&&L>=D.top&&L<=D.top+D.height;return F?{x:O,y:L}:null}var U=this.state,k=U.angleAxisMap,z=U.radiusAxisMap;if(k&&z){var W=oh(k);return g6({x:O,y:L},W)}return null}},{key:"parseEventsOfWrapper",value:function(){var w=this.props.children,A=this.getTooltipEventType(),E=lu(w,cf),P={};E&&A==="axis"&&(E.props.trigger==="click"?P={onClick:this.handleClick}:P={onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd});var O=J_(this.props,this.handleOuterEvent);return Ut(Ut({},O),P)}},{key:"addListener",value:function(){JM.on(ZM,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){JM.removeListener(ZM,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(w,A,E){for(var P=this.state.formattedGraphicalItems,O=0,L=P.length;O<L;O++){var D=P[O];if(D.item===w||D.props.key===w.key||A===id(D.item.type)&&E===D.childIndex)return D}return null}},{key:"renderClipPath",value:function(){var w=this.clipPathId,A=this.state.offset,E=A.left,P=A.top,O=A.height,L=A.width;return Ve.createElement("defs",null,Ve.createElement("clipPath",{id:w},Ve.createElement("rect",{x:E,y:P,height:O,width:L})))}},{key:"getXScales",value:function(){var w=this.state.xAxisMap;return w?Object.entries(w).reduce(function(A,E){var P=KB(E,2),O=P[0],L=P[1];return Ut(Ut({},A),{},Zn({},O,L.scale))},{}):null}},{key:"getYScales",value:function(){var w=this.state.yAxisMap;return w?Object.entries(w).reduce(function(A,E){var P=KB(E,2),O=P[0],L=P[1];return Ut(Ut({},A),{},Zn({},O,L.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(w){var A;return(A=this.state.xAxisMap)===null||A===void 0||(A=A[w])===null||A===void 0?void 0:A.scale}},{key:"getYScaleByAxisId",value:function(w){var A;return(A=this.state.yAxisMap)===null||A===void 0||(A=A[w])===null||A===void 0?void 0:A.scale}},{key:"getItemByXY",value:function(w){var A=this.state,E=A.formattedGraphicalItems,P=A.activeItem;if(E&&E.length)for(var O=0,L=E.length;O<L;O++){var D=E[O],F=D.props,U=D.item,k=id(U.type);if(k==="Bar"){var z=(F.data||[]).find(function(Y){return K1e(w,Y)});if(z)return{graphicalItem:D,payload:z}}else if(k==="RadialBar"){var W=(F.data||[]).find(function(Y){return g6(w,Y)});if(W)return{graphicalItem:D,payload:W}}else if(tb(D,P)||nb(D,P)||Ey(D,P)){var j=Bxe({graphicalItem:D,activeTooltipItem:P,itemData:U.props.data}),se=U.props.activeIndex===void 0?j:U.props.activeIndex;return{graphicalItem:Ut(Ut({},D),{},{childIndex:se}),payload:Ey(D,P)?U.props.data[j]:D.props.data[j]}}}return null}},{key:"render",value:function(){var w=this;if(!CD(this))return null;var A=this.props,E=A.children,P=A.className,O=A.width,L=A.height,D=A.style,F=A.compact,U=A.title,k=A.desc,z=JB(A,jwe),W=pr(z,!1);if(F)return Ve.createElement(CB,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Ve.createElement(QC,M0({},W,{width:O,height:L,title:U,desc:k}),this.renderClipPath(),ID(E,this.renderMap)));if(this.props.accessibilityLayer){var j,se;W.tabIndex=(j=this.props.tabIndex)!==null&&j!==void 0?j:0,W.role=(se=this.props.role)!==null&&se!==void 0?se:"application",W.onKeyDown=function(Q){w.accessibilityManager.keyboardEvent(Q)},W.onFocus=function(){w.accessibilityManager.focus()}}var Y=this.parseEventsOfWrapper();return Ve.createElement(CB,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Ve.createElement("div",M0({className:qr("recharts-wrapper",P),style:Ut({position:"relative",cursor:"default",width:O,height:L},D)},Y,{ref:function(X){w.container=X}}),Ve.createElement(QC,M0({},W,{width:O,height:L,title:U,desc:k,style:lbe}),this.renderClipPath(),ID(E,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}]),y})(Me.Component),Zn(t,"displayName",r),Zn(t,"defaultProps",Ut({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),Zn(t,"getDerivedStateFromProps",function(S,y){var _=S.dataKey,w=S.data,A=S.children,E=S.width,P=S.height,O=S.layout,L=S.stackOffset,D=S.margin,F=y.dataStartIndex,U=y.dataEndIndex;if(y.updateId===void 0){var k=e8(S);return Ut(Ut(Ut({},k),{},{updateId:0},v(Ut(Ut({props:S},k),{},{updateId:0}),y)),{},{prevDataKey:_,prevData:w,prevWidth:E,prevHeight:P,prevLayout:O,prevStackOffset:L,prevMargin:D,prevChildren:A})}if(_!==y.prevDataKey||w!==y.prevData||E!==y.prevWidth||P!==y.prevHeight||O!==y.prevLayout||L!==y.prevStackOffset||!fg(D,y.prevMargin)){var z=e8(S),W={chartX:y.chartX,chartY:y.chartY,isTooltipActive:y.isTooltipActive},j=Ut(Ut({},QB(y,w,O)),{},{updateId:y.updateId+1}),se=Ut(Ut(Ut({},z),W),j);return Ut(Ut(Ut({},se),v(Ut({props:S},se),y)),{},{prevDataKey:_,prevData:w,prevWidth:E,prevHeight:P,prevLayout:O,prevStackOffset:L,prevMargin:D,prevChildren:A})}if(!JC(A,y.prevChildren)){var Y,Q,X,Z,oe=lu(A,jp),ee=oe&&(Y=(Q=oe.props)===null||Q===void 0?void 0:Q.startIndex)!==null&&Y!==void 0?Y:F,G=oe&&(X=(Z=oe.props)===null||Z===void 0?void 0:Z.endIndex)!==null&&X!==void 0?X:U,ne=ee!==F||G!==U,te=!mr(w),de=te&&!ne?y.updateId:y.updateId+1;return Ut(Ut({updateId:de},v(Ut(Ut({props:S},y),{},{updateId:de,dataStartIndex:ee,dataEndIndex:G}),y)),{},{prevChildren:A,dataStartIndex:ee,dataEndIndex:G})}return null}),Zn(t,"renderActiveDot",function(S,y){var _;return Me.isValidElement(S)?_=Me.cloneElement(S,y):Ar(S)?_=S(y):_=Ve.createElement(eb,y),Ve.createElement(pi,{className:"recharts-active-dot",key:y.key},_)}),t},xbe=ybe({chartName:"ComposedChart",GraphicalChild:[a1,Ph,im,s1],axisComponents:[{axisType:"xAxis",AxisComp:ab},{axisType:"yAxis",AxisComp:sb},{axisType:"zAxis",AxisComp:ob}],formatAxisMap:L_e});const _be=({active:n,payload:e,label:t})=>{if(n&&e&&e.length){const r=e[0].payload;return re.jsxs("div",{className:"bg-gem-onyx/95 border border-gem-blue/40 p-3 font-mono-data text-[10px] shadow-2xl rounded-sm backdrop-blur-sm z-50",children:[re.jsx("p",{className:"text-white mb-1 uppercase tracking-widest",children:r.label||`Index ${r.index}`}),re.jsxs("div",{className:"flex items-center space-x-2",children:[re.jsx("span",{className:"w-2 h-2 bg-gem-blue rounded-full"}),re.jsxs("p",{className:"text-gem-blue font-bold",children:["Value: ",r.value]})]}),r.confidenceHigh!==void 0&&r.confidenceLow!==void 0&&re.jsxs("div",{className:"mt-1 pt-1 border-t border-white/10",children:[re.jsx("p",{className:"text-gem-teal opacity-80 font-bold",children:"Confidence Range:"}),re.jsxs("p",{className:"text-white/60",children:["Low: ",r.confidenceLow]}),re.jsxs("p",{className:"text-white/60",children:["High: ",r.confidenceHigh]})]})]})}return null},Sbe=({data:n})=>{const e=n.visualType==="lotteryPattern",t=n.visualType==="prediction",r=n.visualType==="distribution",[i,o]=Me.useState(e||r?"bar":"composed");if(!n||!n.points||n.points.length===0)return re.jsx("div",{className:"w-full p-6 border border-red-500/20 bg-red-500/5 rounded-sm flex items-center justify-center text-red-500 font-mono-data text-xs",children:"DATA_VISUALIZATION_ERROR: EMPTY_DATASET"});const a=Me.useMemo(()=>n.points.map(c=>({...c,range:c.confidenceLow!==void 0&&c.confidenceHigh!==void 0?[c.confidenceLow,c.confidenceHigh]:[c.value*.9,c.value*1.1]})),[n.points]),s=e?"#00FF94":"#00F0FF",l=t?"#00F0FF":"#ffffff",u=()=>{const c=["Index","Label","Value","Confidence Low","Confidence High"],f=n.points.map(y=>[y.index,y.label||"",y.value,y.confidenceLow||"",y.confidenceHigh||""].join(",")),h=[c.join(","),...f].join(`
`),p=new Blob([h],{type:"text/csv"}),v=URL.createObjectURL(p),S=document.createElement("a");S.href=v,S.download=`SYNAPSE_DATA_${Date.now()}.csv`,S.click(),URL.revokeObjectURL(v)};return re.jsxs("div",{className:"w-full my-6 p-6 border border-gem-blue/20 bg-gem-blue/5 rounded-sm animate-in fade-in zoom-in duration-500 relative overflow-hidden group",children:[re.jsx("div",{className:"absolute inset-0 opacity-5 pointer-events-none",style:{backgroundImage:`linear-gradient(${s} 1px, transparent 1px), linear-gradient(90deg, ${s} 1px, transparent 1px)`,backgroundSize:"40px 40px"}}),re.jsxs("div",{className:"flex flex-wrap justify-between items-center mb-6 relative z-10",children:[re.jsxs("div",{className:"flex items-center space-x-3",children:[re.jsx("div",{className:`w-2 h-2 ${e?"bg-gem-teal":"bg-gem-blue"} animate-pulse`}),re.jsxs("div",{children:[re.jsx("h4",{className:"text-xs font-black text-white uppercase tracking-[0.2em]",children:n.chartTitle||(e?"NEURAL_PATTERN_PROJECTION":"DATA_ANALYSIS")}),re.jsxs("div",{className:"text-[8px] text-white/40 uppercase tracking-widest font-mono-data mt-1",children:[n.visualType.toUpperCase()," // SIG: ",(n.sentiment||0).toFixed(2)]})]})]}),re.jsxs("div",{className:"flex items-center space-x-4 mt-2 sm:mt-0",children:[re.jsx("button",{onClick:u,className:"text-[9px] uppercase tracking-widest text-white/40 hover:text-gem-teal transition-colors",children:"[Export_CSV]"}),re.jsx("div",{className:"flex space-x-1",children:["composed","bar","area"].map(c=>re.jsx("button",{onClick:()=>o(c),className:`px-3 py-1 text-[9px] uppercase tracking-widest border transition-all ${i===c?`border-${e?"gem-teal":"gem-blue"} bg-${e?"gem-teal":"gem-blue"}/20 text-white`:"border-white/10 text-white/40 hover:border-white/30"}`,children:c},c))})]})]}),re.jsx("div",{className:"h-[300px] w-full relative z-10",children:re.jsx(Ohe,{width:"100%",height:"100%",children:re.jsxs(xbe,{data:a,margin:{top:10,right:10,bottom:0,left:-20},children:[re.jsxs("defs",{children:[re.jsxs("linearGradient",{id:"colorValue",x1:"0",y1:"0",x2:"0",y2:"1",children:[re.jsx("stop",{offset:"5%",stopColor:s,stopOpacity:.3}),re.jsx("stop",{offset:"95%",stopColor:s,stopOpacity:0})]}),re.jsxs("linearGradient",{id:"colorRange",x1:"0",y1:"0",x2:"0",y2:"1",children:[re.jsx("stop",{offset:"5%",stopColor:l,stopOpacity:.2}),re.jsx("stop",{offset:"95%",stopColor:l,stopOpacity:.05})]}),re.jsx("pattern",{id:"patternStripe",width:"8",height:"8",patternUnits:"userSpaceOnUse",patternTransform:"rotate(45)",children:re.jsx("rect",{width:"4",height:"8",transform:"translate(0,0)",fill:s,fillOpacity:"0.1"})})]}),re.jsx(Nq,{strokeDasharray:"3 3",stroke:"#ffffff10",vertical:!1}),re.jsx(ab,{dataKey:"label",stroke:"#ffffff40",fontSize:9,tickLine:!1,axisLine:!1,fontFamily:"JetBrains Mono",interval:"preserveStartEnd"}),re.jsx(sb,{stroke:"#ffffff40",fontSize:9,tickLine:!1,axisLine:!1,fontFamily:"JetBrains Mono"}),re.jsx(cf,{content:re.jsx(_be,{}),cursor:{stroke:"#ffffff20",strokeWidth:1}}),re.jsx(Tg,{wrapperStyle:{fontSize:"10px",fontFamily:"JetBrains Mono",paddingTop:"10px"}}),re.jsx(jp,{dataKey:"index",height:20,stroke:s,fill:"#111111",tickFormatter:()=>"",travellerWidth:10}),(i==="composed"||i==="area")&&re.jsx(Ph,{type:"monotone",dataKey:"range",stroke:"none",fill:t?"url(#colorRange)":"#ffffff",fillOpacity:1,connectNulls:!0,name:"Confidence Interval"}),(i==="bar"||i==="composed"&&e)&&re.jsx(im,{dataKey:"value",fill:"url(#colorValue)",barSize:e?12:20,stroke:s,strokeOpacity:.5,name:e?"Frequency":"Value"}),i==="composed"&&re.jsx(a1,{type:"monotone",dataKey:"value",stroke:s,strokeWidth:2,dot:e?!1:{fill:s,r:3,strokeWidth:0},activeDot:{r:5,stroke:"#ffffff",strokeWidth:1},animationDuration:1e3,name:t?"Forecasted Value":"Trend Line"}),i==="composed"&&e&&re.jsx(s1,{dataKey:"value",fill:"#ffffff",line:!1,shape:"cross",name:"Hit Marker"}),e&&re.jsx(ib,{y:n.points.reduce((c,f)=>c+f.value,0)/n.points.length,stroke:"#ffffff40",strokeDasharray:"3 3",label:{position:"right",value:"AVG",fill:"#ffffff40",fontSize:8}})]})})}),re.jsxs("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-4 border-t border-white/5 pt-4",children:[re.jsxs("div",{className:"flex items-center space-x-2",children:[re.jsx("span",{className:"text-[8px] text-white/40 uppercase tracking-widest font-mono-data",children:"Points"}),re.jsx("span",{className:"text-xs font-bold text-white font-mono-data",children:n.points.length})]}),re.jsxs("div",{className:"flex items-center space-x-2",children:[re.jsx("span",{className:"text-[8px] text-white/40 uppercase tracking-widest font-mono-data",children:"Max"}),re.jsx("span",{className:"text-xs font-bold text-gem-teal font-mono-data",children:Math.max(...n.points.map(c=>c.value))})]}),re.jsxs("div",{className:"flex items-center space-x-2",children:[re.jsx("span",{className:"text-[8px] text-white/40 uppercase tracking-widest font-mono-data",children:"Mean"}),re.jsx("span",{className:"text-xs font-bold text-gem-blue font-mono-data",children:(n.points.reduce((c,f)=>c+f.value,0)/n.points.length).toFixed(1)})]}),re.jsxs("div",{className:"flex items-center space-x-2",children:[re.jsx("span",{className:"text-[8px] text-white/40 uppercase tracking-widest font-mono-data",children:"Mode"}),re.jsx("span",{className:"text-xs font-bold text-white font-mono-data",children:e?"DISCRETE":t?"PREDICTIVE":"CONTINUOUS"})]})]})]})},wbe=({active:n})=>re.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 ${n?"text-red-500 animate-pulse":"text-white/40 group-hover:text-white"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:re.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),bbe=()=>re.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-gem-onyx",fill:"currentColor",viewBox:"0 0 24 24",children:re.jsx("rect",{x:"6",y:"6",width:"12",height:"12"})}),Abe=()=>re.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[re.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),re.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),Ebe=({documentName:n,history:e,isQueryLoading:t,isUploading:r,uploadProgress:i,onSendMessage:o,onRecordMessage:a,onNewChat:s,onExportLog:l,onUploadNewFiles:u,onAbort:c,exampleQuestions:f,ingestedParts:h,analysisContext:p})=>{const[v,S]=Me.useState(!1),[y,_]=Me.useState("idle"),[w,A]=Me.useState(""),[E,P]=Me.useState(null),[O,L]=Me.useState(0),[D,F]=Me.useState(0),[U,k]=Me.useState(0),[z,W]=Me.useState(null),[j,se]=Me.useState(!1),[Y,Q]=Me.useState(!1),[X,Z]=Me.useState(0),[oe,ee]=Me.useState(!1),[G,ne]=Me.useState(!1),[te,de]=Me.useState(!1),[me,be]=Me.useState(!1),[Ie,Ee]=Me.useState(1),[Xe,tt]=Me.useState(""),[Te,Je]=Me.useState([]),[Se,Ge]=Me.useState(!1),[ye,Ct]=Me.useState("en-US"),[ft,mt]=Me.useState(!1),[lt,ve]=Me.useState(!1),le=Me.useRef(null),He=Me.useRef(null),rt=Me.useRef([]),vt=Me.useRef(-1),[ht,qt]=Me.useState(!1),[Ft,Rt]=Me.useState(!1),[tn,it]=Me.useState([]),[Zt,Xt]=Me.useState(""),[un,Wt]=Me.useState(""),[mn,fn]=Me.useState(null),nn=Me.useRef(null),Ke=Me.useRef(null),ot=Me.useRef(!1),pt=Me.useRef(null),It=Me.useRef(null),Ht=Me.useRef(null),Lt=Me.useRef(null),rn=Me.useRef(null),ir=Me.useRef(0),$n=Me.useRef(new Set),Gn=Me.useRef(null),Br=Me.useRef(null),gn=Me.useRef(null),Di=Me.useRef(null),vi=Me.useRef(""),Er=Me.useRef(""),xr=Me.useRef(!1);Me.useEffect(()=>{const Ne=()=>{const Be=window.speechSynthesis.getVoices();if(Je(Be),!Xe&&Be.length>0){const Et=Be.find(ut=>ut.name.includes("Google US English"))||Be.find(ut=>ut.lang.startsWith("en"))||Be[0];tt(Et.voiceURI)}};Ne(),window.speechSynthesis.onvoiceschanged=Ne},[Xe]),Me.useEffect(()=>{const Be=setInterval(()=>{const Et=ao.isThrottled();Q(Et),Et&&Z(Math.ceil(ao.getCooldownTime()/1e3))},1e3);return()=>clearInterval(Be)},[]),Me.useEffect(()=>{if(t){fn("DISTRIBUTED_COMPUTING: Analysis Node");const Ne=setTimeout(()=>fn("VERIFICATION_NODE: Cross-referencing"),1500);return()=>clearTimeout(Ne)}else if(fn(null),G&&e.length>0){const Ne=e.length-1,Be=e[Ne];Be.role==="model"&&Ne>vt.current&&Be.parts[0].text&&(vt.current=Ne,uo(Be.parts[0].text))}},[t,e,G]);const Cr=async()=>{if(!(e.length<1)){se(!0),Rt(!1);try{const Ne=await ao.generateDeepAnalysis(e,p||void 0);W(Ne)}catch(Ne){console.error(Ne)}finally{se(!1)}}},zr=()=>{const Ne=["Role","Message","Timestamp"],Be=e.map(Ot=>{const Qt=Ot.parts.map(cn=>cn.text).join(" ").replace(/"/g,'""');return`"${Ot.role}","${Qt}","${new Date().toISOString()}"`}),Et=[Ne.join(","),...Be].join(`
`),ut=new Blob([Et],{type:"text/csv"}),St=URL.createObjectURL(ut),Bt=document.createElement("a");Bt.href=St,Bt.download=`SYNAPSE_CHAT_${Date.now()}.csv`,Bt.click(),URL.revokeObjectURL(St)},Un=()=>{const Ne=new Vn;Ne.setFillColor(5,5,5),Ne.rect(0,0,210,30,"F"),Ne.setTextColor(0,240,255),Ne.setFontSize(16),Ne.setFont("courier","bold"),Ne.text("SRE SYNAPSE // EXPORT",14,15),Ne.setFontSize(10),Ne.setFont("courier","normal"),Ne.text(`DOC: ${n}`,14,22),p&&Ne.text(`CAT: ${p.category}`,14,27);const Be=e.map(Et=>[Et.role.toUpperCase(),Et.parts.map(ut=>ut.text).join(`
`)]);i_(Ne,{startY:35,head:[["Role","Content"]],body:Be,theme:"grid",headStyles:{fillColor:[20,20,20],textColor:[0,240,255],font:"courier"},styles:{font:"courier",fontSize:8,cellPadding:4,overflow:"linebreak"},columnStyles:{0:{cellWidth:30},1:{cellWidth:"auto"}}}),Ne.save(`SYNAPSE_EXPORT_${Date.now()}.pdf`)},Po=()=>{window.speechSynthesis.cancel(),de(!1),_("idle")},uo=async Ne=>{if(!v)if(Po(),de(!0),fn("VERIFICATION_NODE: Content Integrity Check"),Ne.length>5){fn("SYNTHESIS_NODE: Web Speech API Active");const Be=Ne.replace(/[*#`]/g,"").replace(/\[.*?\]/g,""),Et=new SpeechSynthesisUtterance(Be),ut=Te.find(St=>St.voiceURI===Xe);ut&&(Et.voice=ut),Et.volume=Ie,Et.rate=1,Et.pitch=1,Et.onstart=()=>{_("speaking")},Et.onend=()=>{_("idle"),de(!1),fn(null)},Et.onerror=St=>{console.error("Speech Synthesis Error",St),_("poisoned"),setTimeout(()=>_("idle"),1e3),de(!1),fn("ERR: AUDIO_DRIVER_FAULT")},window.speechSynthesis.speak(Et)}else de(!1),fn(null)},ue=async()=>{if(Se){we();return}if(ft)try{const Ne=await navigator.mediaDevices.getUserMedia({audio:!0});pt.current=Ne;const Be=window.AudioContext||window.webkitAudioContext,Et=new Be,ut=Et.createMediaStreamSource(Ne),St=Et.createAnalyser();St.fftSize=256,ut.connect(St),Ht.current=St;const Bt=()=>{if(!St)return;const Qt=new Uint8Array(St.frequencyBinCount);St.getByteFrequencyData(Qt),Se&&requestAnimationFrame(Bt)};Bt();const Ot=new MediaRecorder(Ne);rt.current=[],Ot.ondataavailable=Qt=>{Qt.data.size>0&&rt.current.push(Qt.data)},Ot.onstop=async()=>{if(Et.close(),Ne.getTracks().forEach(Qt=>Qt.stop()),rt.current.length>0){ve(!0),_("processing");const Qt=new Blob(rt.current,{type:"audio/webm"}),cn=new FileReader;cn.readAsDataURL(Qt),cn.onloadend=async()=>{try{const Kt=cn.result.split(",")[1],_n=await ao.transcribeAudio(Kt,"audio/webm");A(Vt=>Vt+(Vt?" ":"")+_n)}catch(Kt){console.error("Neural Transcription Failed",Kt),P("NEURAL_TRANSCRIPTION_FAILED"),setTimeout(()=>P(null),3e3)}finally{ve(!1),_("idle")}}}},He.current=Ot,Ot.start(),Ge(!0),_("listening")}catch(Ne){console.error("Microphone access denied",Ne),alert("Microphone access required for Neural Dictation.")}else{const Ne=window.SpeechRecognition||window.webkitSpeechRecognition;if(!Ne){alert("Voice input is not supported in this browser.");return}const Be=new Ne;Be.continuous=!1,Be.interimResults=!0,Be.lang=ye,Be.onstart=()=>{Ge(!0),_("listening")},Be.onresult=Et=>{const ut=Array.from(Et.results).map(St=>St[0].transcript).join("");A(ut)},Be.onerror=Et=>{console.error("Dictation error",Et.error),we(),_("poisoned"),setTimeout(()=>_("idle"),1e3)},Be.onend=()=>{we()},le.current=Be,Be.start()}},we=()=>{ft?(He.current&&He.current.state!=="inactive"&&He.current.stop(),Ge(!1)):(le.current&&(le.current.stop(),le.current=null),Ge(!1),_("idle"))};Me.useEffect(()=>{var Ne;if(nn.current&&(nn.current.scrollTop=nn.current.scrollHeight),e.length===0||e.length===1)if((p==null?void 0:p.category)==="INCOME_TAX")it([`Identify deductions for ${p.metadata.jurisdiction}`,"Calculate liability","Audit risk assessment"]);else if((p==null?void 0:p.category)==="FINANCIAL_MARKET"){const Be=((Ne=p.metadata.entities)==null?void 0:Ne.slice(0,2).join(", "))||"portfolio";it([`Technical analysis for ${Be}`,"Fundamental health check","Volatility projection"])}else it(f.length?f:["Initial system scan","Status report","Ingest new data"]);else{const Be=e[e.length-1];Be.role==="model"&&(Be.parts[0].text.toLowerCase().includes("deduction")?it(["Verify eligibility","Show calculation","List limits"]):Be.parts[0].text.toLowerCase().includes("trend")?it(["Forecast next week","Show support levels","Compare with S&P500"]):it(["Deep scan analysis","Identify anomalies","Generate report"]))}},[e,t,r,Zt,un,f,p]);const ze=Me.useCallback(()=>{var Ne,Be,Et,ut;if(ot.current=!1,Ke.current){try{Ke.current.close()}catch{}Ke.current=null}pt.current&&(pt.current.getTracks().forEach(St=>St.stop()),pt.current=null),gn.current&&(gn.current.disconnect(),gn.current=null),Di.current&&(Di.current.disconnect(),Di.current=null),((Ne=Lt.current)==null?void 0:Ne.state)!=="closed"&&((Be=Lt.current)==null||Be.close()),((Et=rn.current)==null?void 0:Et.state)!=="closed"&&((ut=rn.current)==null||ut.close()),Lt.current=null,rn.current=null,Br.current&&(window.clearTimeout(Br.current),Br.current=null),S(!1),_("idle"),L(0),F(0),$n.current.forEach(St=>{try{St.stop()}catch{}}),$n.current.clear(),ir.current=0,xr.current=!1,Xt(""),Wt("")},[]),ct=async(Ne=!1)=>{if(!Ne&&v){ze();return}G&&ne(!1),Po(),P(null),_("processing"),ee(!1);try{const{client:Be}=ao.getClient(),Et=window.AudioContext||window.webkitAudioContext,ut=new Et({sampleRate:16e3,latencyHint:"interactive"}),St=new Et({sampleRate:24e3,latencyHint:"interactive"});Lt.current=ut,rn.current=St;const Bt=async()=>{St.state==="suspended"&&await St.resume(),ut.state==="suspended"&&await ut.resume()};await Bt();const Ot=St.createAnalyser();Ot.fftSize=512,Ot.smoothingTimeConstant=.1,It.current=Ot;const Qt=ut.createAnalyser();Qt.fftSize=256,Ht.current=Qt;const cn=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,channelCount:1,sampleRate:16e3}});pt.current=cn;const Kt=()=>{if(!Ht.current)return;const Vt=new Uint8Array(Ht.current.frequencyBinCount);Ht.current.getByteFrequencyData(Vt);const kt=Vt.reduce((Mn,Sn)=>Mn+Sn)/Vt.length;F(kt/255),ot.current&&requestAnimationFrame(Kt)},_n=Be.live.connect({model:"gemini-2.5-flash-native-audio-preview-12-2025",callbacks:{onopen:()=>{ot.current=!0,S(!0),_("listening"),L(20),k(0),ir.current=St.currentTime,Kt();const Vt=ut.createMediaStreamSource(cn);Di.current=Vt,Vt.connect(Qt);const kt=ut.createScriptProcessor(2048,1,1);gn.current=kt,kt.onaudioprocess=Mn=>{if(!ot.current)return;const Sn=Mn.inputBuffer.getChannelData(0),gr=YJ(Sn);_n.then(vr=>{vr.sendRealtimeInput({media:gr})}).catch(()=>{})},Vt.connect(kt),kt.connect(ut.destination)},onmessage:async Vt=>{var Mn,Sn,gr,vr,fr,Fn,kn;await Bt(),(Mn=Vt.serverContent)!=null&&Mn.inputAudioTranscription&&(vi.current+=Vt.serverContent.inputAudioTranscription.text,Xt(vi.current)),(Sn=Vt.serverContent)!=null&&Sn.outputAudioTranscription&&(Er.current+=Vt.serverContent.outputAudioTranscription.text,Wt(Er.current),_("speaking"),xr.current=!0),(gr=Vt.serverContent)!=null&&gr.turnComplete&&(xr.current=!1,vi.current&&a("user",vi.current),Er.current&&a("model",Er.current),vi.current="",Er.current="",Xt(""),Wt(""));const kt=((fr=(vr=Vt.serverContent)==null?void 0:vr.modelTurn)==null?void 0:fr.parts)||[];for(const Pn of kt)if((Fn=Pn.inlineData)!=null&&Fn.data){_("speaking"),xr.current=!0;const jn=Pn.inlineData.data,er=X8(jn),Si=await Y8(er,St,24e3,1),Pr=St.currentTime,Io=Pr+.01;ir.current<Io&&(ir.current=Io);const oa=St.createBufferSource();oa.buffer=Si,oa.connect(Ot),Ot.connect(St.destination),oa.start(ir.current),ir.current+=Si.duration,$n.current.add(oa),oa.onended=()=>{$n.current.delete(oa),$n.current.size===0&&!xr.current&&_("listening")},L(Math.floor((ir.current-Pr)*1e3))}(kn=Vt.serverContent)!=null&&kn.interrupted&&($n.current.forEach(Pn=>{try{Pn.stop()}catch{}}),$n.current.clear(),ir.current=St.currentTime+.01,_("listening"),xr.current=!1,vi.current="",Er.current="",Xt(""),Wt(""))},onerror:Vt=>xt(Vt),onclose:()=>{ot.current&&xt("UPLINK_TERMINATED")}},config:{responseModalities:[pg.AUDIO],inputAudioTranscription:{},outputAudioTranscription:{},speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Zephyr"}}},systemInstruction:`IDENTITY: SRE SYNAPSE MULTIMODAL ANALYST. 
                    DIRECTIVE: You are an expert system capable of switching between Engineering (SRE), Financial/Tax, and Stock Market modes.
                    CONTEXT: Current investigation: ${n}. 
                    If tax/income documents are present, use financial forensic terminology. 
                    If stock market data is present, use technical analysis terminology.
                    ACCENT: Speak with a fixed standard US American accent.`}}).catch(Vt=>{throw xt(Vt),Vt});Ke.current=await _n}catch(Be){xt(Be)}},xt=Ne=>{ao.parseError(Ne),_("poisoned"),S(!1),ot.current=!1;const Be=Math.min(1e3*Math.pow(2,U),1e4);k(Et=>Et+1),U<2?(P(`RECONNECTING (${U+1})...`),Br.current=window.setTimeout(()=>ct(!0),Be)):(P("CRITICAL_FAULT"),ee(!0))},ae=Ne=>{Y||(o(Ne),_("processing"))},Ce=()=>{s(),qt(!1),_("idle")},De=Ne=>{const Be=/```json\s*(\{[\s\S]*?\})\s*```/i,Et=/(\{[\s\S]*"visualType"[\s\S]*\})/i;let ut=Ne.match(Be)||Ne.match(Et);if(ut)try{const St=ut[1],Bt=JSON.parse(St),Ot=Ne.replace(ut[0],"").trim();if(Bt.visualType&&Bt.points)return{text:Ot,visualData:Bt}}catch{}return{text:Ne}},Ue=Ne=>{const Be=Ne.parts[0].text,{text:Et,visualData:ut}=De(Be);return re.jsxs("div",{className:"flex space-x-4",children:[(ut==null?void 0:ut.sentiment)!==void 0&&re.jsxs("div",{className:"w-1 rounded-full self-stretch bg-gray-800 relative overflow-hidden shrink-0",title:`Sentiment: ${ut.sentiment}`,children:[re.jsx("div",{className:`absolute w-full bottom-0 transition-all duration-500 ${ut.sentiment>=0?"bg-gem-teal bottom-1/2":"bg-red-500 top-1/2"}`,style:{height:`${Math.abs(ut.sentiment)*50}%`,top:ut.sentiment<0?"50%":"auto",bottom:ut.sentiment>=0?"50%":"auto"}}),re.jsx("div",{className:"absolute top-1/2 w-full h-[1px] bg-white/20"})]}),re.jsxs("div",{className:"flex-grow min-w-0",children:[Et&&re.jsx("p",{className:"whitespace-pre-wrap mb-4 font-normal",children:Et}),ut&&re.jsx(Sbe,{data:ut}),Ne.role==="model"&&re.jsxs("div",{className:"mt-2 flex items-center space-x-2 opacity-40",children:[re.jsx("span",{className:"w-1 h-1 bg-gem-teal rounded-full"}),re.jsx("span",{className:"text-[8px] uppercase tracking-widest font-mono-data text-gem-teal",children:"VERIFIED: NODE_GAMMA // CONFIDENCE: 99.9%"})]})]})]})},Re=()=>{var Ne;return p?p.category==="INCOME_TAX"?re.jsxs("div",{className:"flex items-center space-x-2 border-l border-white/10 pl-4 ml-4",children:[re.jsx("span",{className:"text-[9px] text-white/40 uppercase tracking-widest",children:"Jurisdiction"}),re.jsx("span",{className:"text-[9px] text-gem-teal uppercase font-bold bg-gem-teal/10 px-2 py-0.5 rounded-sm",children:p.metadata.jurisdiction||"General"})]}):p.category==="FINANCIAL_MARKET"?re.jsxs("div",{className:"flex items-center space-x-2 border-l border-white/10 pl-4 ml-4",children:[re.jsx("span",{className:"text-[9px] text-white/40 uppercase tracking-widest",children:"Watching"}),re.jsx("span",{className:"text-[9px] text-gem-blue uppercase font-bold bg-gem-blue/10 px-2 py-0.5 rounded-sm truncate max-w-[150px]",children:((Ne=p.metadata.entities)==null?void 0:Ne.join(", "))||"Global"})]}):null:null};return re.jsxs("div",{className:"flex flex-col lg:flex-row h-screen bg-gem-onyx overflow-hidden relative font-sans text-gem-offwhite",children:[re.jsxs("div",{className:"flex-1 flex flex-col relative z-20 border-r border-white/5 order-2 lg:order-1 min-w-0",children:[re.jsxs("header",{className:"h-16 lg:h-20 flex items-center justify-between px-6 lg:px-8 border-b border-white/5 bg-gem-onyx/90 backdrop-blur-md sticky top-0 z-30",children:[re.jsxs("div",{className:"flex items-center space-x-6",children:[re.jsxs("div",{className:"flex flex-col",children:[re.jsx("h2",{className:"text-lg lg:text-xl font-black italic tracking-tighter uppercase text-white truncate max-w-[200px] lg:max-w-md",children:n}),re.jsxs("div",{className:"flex items-center space-x-2 mt-0.5",children:[re.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${Y||E?"bg-red-500 animate-pulse":"bg-gem-teal"}`}),re.jsx("span",{className:"text-[9px] text-gem-blue uppercase tracking-widest font-mono-data opacity-60",children:Y?`Status: COOLDOWN (${X}s)`:E?`Status: ${E}`:"Status: OPTIMIZED_ACOUSTIC_LINK"})]})]}),Re()]}),re.jsxs("div",{className:"flex items-center space-x-4",children:[re.jsxs("div",{className:"relative group",children:[re.jsxs("div",{className:"flex items-center space-x-1 border border-white/10 bg-white/5 rounded-sm overflow-hidden",children:[re.jsxs("button",{onClick:()=>ne(!G),disabled:v,className:`flex items-center space-x-2 px-3 py-1.5 transition-all ${G?"bg-gem-teal/10 text-gem-teal":"text-white/40 hover:text-white"} ${v?"opacity-30 cursor-not-allowed":""}`,title:"Auto-read verified findings using Web Speech API",children:[re.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${G?"bg-gem-teal animate-pulse":"bg-gray-500"}`}),re.jsx("span",{className:"text-[9px] font-bold uppercase tracking-widest",children:"Auto_Vocalize"})]}),re.jsx("button",{onClick:()=>be(!me),className:"px-2 py-1.5 border-l border-white/10 text-white/40 hover:text-white transition-colors",title:"Voice Output Settings",children:re.jsx(Abe,{})})]}),me&&re.jsxs("div",{className:"absolute top-full right-0 mt-2 w-64 bg-gem-onyx border border-white/10 shadow-2xl p-4 z-50 animate-in fade-in zoom-in-95",children:[re.jsx("h4",{className:"text-[9px] font-black uppercase tracking-widest text-gem-blue mb-4",children:"Acoustic_Output_Parameters"}),re.jsxs("div",{className:"space-y-4",children:[re.jsxs("div",{children:[re.jsx("label",{className:"block text-[8px] text-white/60 uppercase mb-1",children:"Synthesizer_Voice"}),re.jsx("select",{value:Xe,onChange:Ne=>tt(Ne.target.value),className:"w-full bg-black border border-white/20 text-[9px] text-white p-2 outline-none focus:border-gem-teal",children:Te.map(Ne=>re.jsxs("option",{value:Ne.voiceURI,children:[Ne.name," (",Ne.lang,")"]},Ne.voiceURI))})]}),re.jsxs("div",{children:[re.jsxs("label",{className:"block text-[8px] text-white/60 uppercase mb-1",children:["Gain_Level: ",(Ie*100).toFixed(0),"%"]}),re.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:Ie,onChange:Ne=>Ee(parseFloat(Ne.target.value)),className:"w-full accent-gem-teal"})]})]})]})]}),re.jsxs("div",{className:"relative",children:[re.jsx("button",{onClick:()=>Rt(!Ft),className:`p-2 transition-colors border rounded-sm ${j?"animate-pulse text-gem-blue border-gem-blue/50":"text-white/40 hover:text-gem-blue border-transparent bg-white/5 hover:bg-gem-blue/10"}`,title:"Forensic Reporting Suite",children:re.jsx(ele,{})}),Ft&&re.jsxs("div",{className:"absolute top-full right-0 mt-2 w-56 bg-gem-onyx border border-white/10 shadow-2xl p-2 z-50 animate-in fade-in zoom-in-95 flex flex-col gap-1",children:[re.jsx("div",{className:"px-3 py-1 text-[8px] font-black uppercase tracking-widest text-white/20 mb-1",children:"AI_Dossier_Suite"}),re.jsxs("button",{onClick:Cr,className:"text-left px-3 py-2 text-[10px] uppercase font-bold bg-gem-blue/10 text-gem-blue hover:bg-gem-blue hover:text-gem-onyx transition-all flex items-center justify-between",children:["Generate Deep Analysis",re.jsx("span",{className:"w-1.5 h-1.5 bg-gem-blue rounded-full animate-ping"})]}),re.jsx("div",{className:"h-[1px] bg-white/5 my-1"}),re.jsx("button",{onClick:()=>{Un(),Rt(!1)},className:"text-left px-3 py-2 text-[10px] uppercase hover:bg-white/10 text-white/80 hover:text-white transition-colors",children:"Export Chat PDF"}),re.jsx("button",{onClick:()=>{zr(),Rt(!1)},className:"text-left px-3 py-2 text-[10px] uppercase hover:bg-white/10 text-white/80 hover:text-white transition-colors",children:"Export Raw CSV"})]})]}),ht?re.jsxs("div",{className:"flex items-center space-x-2 animate-in fade-in bg-red-950/30 p-1 rounded-sm border border-red-500/30",children:[re.jsx("span",{className:"text-[10px] uppercase text-red-500 font-bold px-2",children:"Confirm Purge?"}),re.jsx("button",{onClick:Ce,className:"text-[10px] text-white bg-red-500/80 px-3 py-1 hover:bg-red-500 transition-colors uppercase font-bold rounded-sm","aria-label":"Confirm chat reset",children:"Yes"}),re.jsx("button",{onClick:()=>qt(!1),className:"text-[10px] text-white/60 bg-transparent border border-white/10 px-3 py-1 hover:bg-white/10 hover:text-white transition-colors uppercase font-bold rounded-sm","aria-label":"Cancel chat reset",children:"No"})]}):re.jsx("button",{onClick:()=>qt(!0),className:"p-2 text-white/40 hover:text-red-500 transition-colors border border-transparent hover:border-red-500/20 bg-white/5 hover:bg-red-500/10 rounded-sm group",title:"Reset Chat Protocol","aria-label":"Reset Chat",children:re.jsx(tle,{})})]})]}),re.jsxs("div",{ref:nn,className:"flex-grow overflow-y-auto p-6 lg:p-12 space-y-8 lg:space-y-12 custom-scrollbar pb-32",children:[e.map((Ne,Be)=>re.jsx("div",{className:`flex ${Ne.role==="user"?"justify-end":"justify-start"} animate-in slide-in-from-bottom-2`,children:re.jsxs("div",{className:`max-w-[90%] lg:max-w-[90%] ${Ne.role==="user"?"bg-gem-blue/10 border border-gem-blue/20 p-6":"bg-white/5 p-6 border border-white/5"} rounded-sm shadow-xl relative group`,children:[re.jsx("div",{className:"text-[8px] uppercase tracking-widest mb-4 opacity-30 font-mono-data",children:Ne.role==="user"?"User_Entry":"Synapse_Response"}),re.jsx("div",{className:"text-base leading-relaxed font-light",children:Ue(Ne)})]})},Be)),Zt&&re.jsx("div",{className:"flex justify-end animate-pulse opacity-70",children:re.jsxs("div",{className:"max-w-[85%] bg-gem-blue/5 border border-gem-blue/10 p-5 rounded-sm",children:[re.jsx("div",{className:"text-[8px] uppercase tracking-widest mb-2 opacity-30 font-mono-data",children:"Neural_Input_Stream"}),re.jsx("p",{className:"text-base font-light italic",children:Zt})]})}),un&&re.jsx("div",{className:"flex justify-start animate-in fade-in duration-300",children:re.jsxs("div",{className:"max-w-[85%] bg-white/5 border border-white/10 p-5 rounded-sm",children:[re.jsx("div",{className:"text-[8px] uppercase tracking-widest mb-2 opacity-30 font-mono-data",children:"Neural_Output_Stream"}),re.jsx("p",{className:"text-base font-light leading-relaxed",children:un})]})}),t&&re.jsx("div",{className:"flex justify-start",children:re.jsx(JO,{variant:"terminal",message:mn||"Synthesizing_Core_Response",subMessage:"Processing Node Active"})}),j&&re.jsx("div",{className:"flex justify-center w-full py-12",children:re.jsx(JO,{variant:"pulse",message:"Performing_Deep_Neural_Synthesis",subMessage:"Compiling Forensic Report Matrix"})})]}),re.jsxs("footer",{className:"p-6 lg:p-8 bg-gem-onyx border-t border-white/5 sticky bottom-0 z-30",children:[re.jsx("div",{className:"flex space-x-2 overflow-x-auto pb-4 custom-scrollbar mb-2",children:tn.map((Ne,Be)=>re.jsx("button",{onClick:()=>ae(Ne),className:"whitespace-nowrap px-4 py-2 border border-white/10 bg-white/5 text-[10px] uppercase tracking-widest text-white/60 hover:text-white hover:border-gem-blue hover:bg-gem-blue/10 transition-all rounded-sm",children:Ne},Be))}),re.jsx("div",{className:"max-w-4xl mx-auto space-y-4 lg:space-y-6",children:re.jsxs("div",{className:`flex items-center space-x-3 lg:space-x-4 bg-white/5 border p-2 transition-all ${Y?"border-red-500/40 opacity-80":"border-white/10 focus-within:border-gem-blue"}`,children:[re.jsx("button",{onClick:()=>{var Ne;return(Ne=Gn.current)==null?void 0:Ne.click()},className:"p-3 lg:p-4 text-white/30 hover:text-gem-blue transition-colors",children:re.jsx("span",{className:"text-xl",children:"+"})}),re.jsxs("div",{className:"flex-grow relative",children:[re.jsx("input",{type:"text",value:w,disabled:Y||Se,onChange:Ne=>A(Ne.target.value),onKeyDown:Ne=>Ne.key==="Enter"&&(ae(w),A("")),placeholder:Se?lt?"Transcribing audio...":"Listening...":Y?`RECOVERY_IN_PROGRESS: ${X}s...`:"Execute analytical query...",className:`w-full bg-transparent border-none outline-none text-base font-light placeholder:text-white/20 ${Se?"text-gem-teal animate-pulse":"text-white"}`}),Se&&re.jsxs("div",{className:"absolute right-0 top-1/2 transform -translate-y-1/2 flex items-center space-x-2",children:[re.jsx("div",{className:"w-1.5 h-1.5 bg-red-500 rounded-full animate-ping"}),re.jsx("span",{className:"text-[9px] text-red-500 font-bold uppercase tracking-widest",children:"Rec"})]})]}),re.jsxs("div",{className:"flex items-center space-x-1 border-l border-white/10 pl-2",children:[re.jsx("button",{onClick:ue,disabled:Y||v,className:`p-3 group transition-all rounded-full ${Se?"bg-red-500/10":"hover:bg-white/10"}`,title:Se?"Stop Recording":ft?"Start Neural Dictation":"Start Voice Dictation",children:Se?re.jsx(bbe,{}):re.jsx(wbe,{active:Se})}),re.jsx("button",{onClick:()=>mt(!ft),className:`text-[8px] uppercase font-bold tracking-wider px-2 py-1 border transition-all ${ft?"border-gem-blue bg-gem-blue/10 text-gem-blue":"border-white/10 text-white/30 hover:text-white"}`,title:ft?"Neural Mode Active (High Accuracy)":"Standard Mode Active (Fast)",children:ft?"NEURAL":"STD"})]}),!ft&&re.jsxs("select",{value:ye,onChange:Ne=>Ct(Ne.target.value),className:"bg-black/40 border border-white/10 text-[9px] text-white/40 uppercase outline-none focus:border-gem-blue w-16",title:"Dictation Language",children:[re.jsx("option",{value:"en-US",children:"EN-US"}),re.jsx("option",{value:"en-GB",children:"EN-GB"}),re.jsx("option",{value:"es-ES",children:"ES"}),re.jsx("option",{value:"fr-FR",children:"FR"}),re.jsx("option",{value:"de-DE",children:"DE"}),re.jsx("option",{value:"ja-JP",children:"JP"})]}),re.jsx("button",{onClick:()=>{ae(w),A("")},disabled:Y||!w.trim(),className:"px-6 py-3 bg-gem-blue text-gem-onyx font-black text-[10px] uppercase tracking-widest hover:bg-white transition-all",children:"Send"})]})})]})]}),re.jsxs("div",{className:"lg:w-[40%] bg-black/40 border-l border-white/5 flex flex-col order-1 lg:order-2 shrink-0 h-[400px] lg:h-auto relative overflow-hidden",children:[oe&&re.jsxs("div",{className:"absolute inset-0 z-50 bg-red-950/90 backdrop-blur-md flex flex-col items-center justify-center p-12 text-center",children:[re.jsx("h3",{className:"text-xl font-black text-white uppercase tracking-tighter mb-4",children:"Link_Critical_Fault"}),re.jsx("p",{className:"text-xs text-red-400 uppercase tracking-widest mb-8",children:"Neural handshake rejected. Manual reset required."}),re.jsx("button",{onClick:()=>{k(0),ct()},className:"px-8 py-3 bg-red-500 text-white font-black text-[10px] uppercase tracking-widest",children:"Force_Reset"})]}),re.jsx("div",{className:"flex-grow relative flex items-center justify-center",children:re.jsx("div",{className:"w-full h-full max-w-[600px] max-h-[600px]",children:re.jsx(PH,{state:Y?"poisoned":t||te||Se||lt?"processing":y,analyser:It.current||Ht.current})})}),re.jsxs("div",{className:"p-8 lg:p-12 space-y-8 bg-gradient-to-t from-gem-onyx to-transparent z-10",children:[(t||te||Se||lt)&&re.jsx("div",{className:"w-full flex justify-center mb-4",children:re.jsxs("div",{className:"flex items-center space-x-2 bg-gem-blue/5 border border-gem-blue/20 px-3 py-1.5 rounded-sm",children:[re.jsx("span",{className:`w-1 h-1 rounded-full animate-ping ${te||Se?"bg-gem-blue":"bg-gem-teal"}`}),re.jsxs("span",{className:"text-[8px] text-gem-blue font-bold uppercase tracking-widest font-mono-data",children:["SYNC: ",lt?"NEURAL_TRANSCRIPTION_NODE":Se?"AUDIO_INPUT_STREAM":mn||"CALCULATING"]})]})}),re.jsx("button",{onClick:()=>ct(),className:`w-full py-5 font-black text-xs uppercase tracking-[0.4em] transition-all border shadow-2xl ${v?"bg-red-500/10 border-red-500 text-red-500 hover:bg-red-500 hover:text-white":"bg-gem-blue/10 border-gem-blue text-gem-blue hover:bg-gem-blue hover:text-gem-onyx"}`,children:v?"Terminate_Voice_Link":"Initialize_Voice_Link"}),re.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[re.jsxs("div",{className:"p-4 bg-white/5 border border-white/5 rounded-sm",children:[re.jsx("div",{className:"text-[8px] text-white/30 uppercase tracking-widest mb-1",children:"Queue_Pressure"}),re.jsxs("div",{className:"text-sm font-mono-data text-gem-blue",children:[O,"ms"]})]}),re.jsxs("div",{className:"p-4 bg-white/5 border border-white/5 rounded-sm",children:[re.jsx("div",{className:"text-[8px] text-white/30 uppercase tracking-widest mb-1",children:"Audio_Load"}),re.jsx("div",{className:"w-full bg-white/10 h-1 mt-2",children:re.jsx("div",{className:"h-full bg-gem-teal transition-all",style:{width:`${Math.min(D*100,100)}%`}})})]})]})]})]}),re.jsx("input",{type:"file",multiple:!0,ref:Gn,className:"hidden",onChange:Ne=>Ne.target.files&&u(Array.from(Ne.target.files))}),z&&re.jsx(rue,{data:z,onClose:()=>W(null)})]})},Tbe=({onSuccess:n,onCancel:e})=>{const[t,r]=Me.useState(""),[i,o]=Me.useState(""),[a,s]=Me.useState(null),l=u=>{u.preventDefault();const c=ao.security.authenticate(t,i);c.success&&c.user?n(c.user):(s(c.error||"AUTH_REJECTED"),setTimeout(()=>s(null),2e3))};return re.jsxs("div",{className:"h-screen w-full flex items-center justify-center bg-gem-onyx font-mono-data overflow-hidden relative",children:[re.jsx("div",{className:"absolute inset-0 opacity-5 pointer-events-none",children:re.jsx("div",{className:"w-full h-full bg-[radial-gradient(#00F0FF_1px,transparent_1px)] [background-size:32px_32px]"})}),re.jsxs("div",{className:`w-full max-w-md p-10 border transition-all duration-500 ${a?"border-red-500 shadow-[0_0_60px_rgba(239,68,68,0.3)]":"border-gem-blue/20 bg-gem-blue/5 backdrop-blur-md shadow-2xl"}`,children:[re.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[re.jsx("div",{className:`w-2 h-2 rounded-full ${a?"bg-red-500":"bg-gem-blue"} animate-pulse`}),re.jsx("span",{className:"text-[10px] text-white/40 uppercase tracking-[0.5em]",children:"Neural_Security_Gateway"})]}),re.jsx("h2",{className:"text-3xl font-black text-white italic tracking-tighter mb-10 uppercase leading-none",children:"Access_Control"}),re.jsxs("form",{onSubmit:l,className:"space-y-8",children:[re.jsxs("div",{className:"space-y-3",children:[re.jsx("label",{className:"text-[9px] text-gem-blue uppercase tracking-widest font-black",children:"Identity_Identifier"}),re.jsx("input",{type:"text",value:t,onChange:u=>r(u.target.value),placeholder:"username@synapse",className:"w-full bg-black/40 border border-white/10 p-5 text-white text-sm outline-none focus:border-gem-blue focus:bg-gem-blue/5 transition-all rounded-sm placeholder:opacity-20",autoFocus:!0})]}),re.jsxs("div",{className:"space-y-3",children:[re.jsx("label",{className:"text-[9px] text-gem-blue uppercase tracking-widest font-black",children:"Command_Key_Phrase"}),re.jsx("input",{type:"password",value:i,onChange:u=>o(u.target.value),placeholder:"",className:"w-full bg-black/40 border border-white/10 p-5 text-white text-sm outline-none focus:border-gem-blue focus:bg-gem-blue/5 transition-all rounded-sm placeholder:opacity-20"}),i===""&&re.jsx("p",{className:"text-[8px] text-gem-teal uppercase tracking-widest opacity-60",children:"Hint: Leave blank if initiating first-time handshake."})]}),a&&re.jsx("div",{className:"p-4 bg-red-500/10 border border-red-500/20 animate-in shake duration-500",children:re.jsxs("p",{className:"text-[10px] text-red-500 uppercase font-black text-center tracking-widest",children:["ERROR_CODE: ",a]})}),re.jsxs("div",{className:"flex flex-col space-y-4 pt-4",children:[re.jsx("button",{type:"submit",className:"w-full py-5 bg-gem-blue text-gem-onyx font-black text-xs uppercase tracking-[0.4em] hover:bg-white hover:scale-[1.02] transition-all shadow-[0_0_20px_rgba(0,240,255,0.2)]",children:"Establish_Link"}),re.jsx("button",{type:"button",onClick:e,className:"w-full py-4 border border-white/5 text-white/30 text-[9px] uppercase tracking-[0.4em] hover:text-white hover:border-white/20 transition-all",children:"Abort_Sequence"})]})]})]}),re.jsxs("div",{className:"absolute bottom-10 left-10 text-[8px] text-white/10 font-mono-data tracking-widest uppercase pointer-events-none",children:["Encryption_Standard: AES-256-SYNAPSE // Node_ID: ",Math.random().toString(36).substring(7).toUpperCase()]})]})},Mbe=({onConfigComplete:n})=>{const[e,t]=Me.useState(""),[r,i]=Me.useState(null),o=()=>{if(!e.trim()){i("API Key cannot be empty.");return}try{let s=ao.security.getAllUsers().find(l=>l.role===kp.Admin);s?ao.security.updateApiKey(s.id,e):ao.security.createUser("sre-admin-recovered","temporal-recovery",kp.Admin,e),n()}catch{i("Failed to save configuration.")}};return re.jsxs("div",{className:"bg-gem-offwhite/5 border border-gem-teal/30 p-6 rounded-lg backdrop-blur-md",children:[re.jsx("h3",{className:"text-gem-teal font-bold mb-4 uppercase tracking-wider text-sm",children:"Vital System Component Missing"}),re.jsx("p",{className:"text-xs text-white/60 mb-4",children:"The Neural Core requires a valid Google Gemini API Key to function. Please input your key below to restore system uplink."}),re.jsxs("div",{className:"flex flex-col space-y-4",children:[re.jsx("input",{type:"password",value:e,onChange:a=>t(a.target.value),placeholder:"Enter Gemini API Key (AIza...)",className:"bg-black/40 border border-white/10 p-3 text-gem-offwhite rounded focus:border-gem-teal focus:outline-none font-mono text-sm"}),r&&re.jsx("p",{className:"text-red-400 text-xs",children:r}),re.jsx("button",{onClick:o,className:"bg-gem-teal text-black font-bold py-2 rounded uppercase tracking-wider hover:bg-gem-teal/80 transition-colors",children:"Initialize Uplink"})]})]})},Cbe=()=>{const[n,e]=Me.useState(Vo.Welcome),[t,r]=Me.useState(null),[i,o]=Me.useState(null),[a,s]=Me.useState(!1),[l,u]=Me.useState([]),[c,f]=Me.useState([]),[h,p]=Me.useState(!1),[v,S]=Me.useState(!1),[y,_]=Me.useState(0),[w,A]=Me.useState([]),[E,P]=Me.useState(""),[O,L]=Me.useState([]),[D,F]=Me.useState(null),U=Me.useRef({isAborted:!1,receivedData:!1}),k=Me.useCallback(()=>{U.current.isAborted=!0,p(!1)},[]),z=(Z,oe)=>{console.error(Z,oe);const ee=ao.parseError(oe),G=typeof oe=="string"?oe:(oe==null?void 0:oe.message)||JSON.stringify(oe);ee===Qx.QUOTA?(f(ne=>[...ne,{role:"model",parts:[{text:"[NEURAL_QUOTA_EXHAUSTED]: Saturation detected. Automatic thermal reset in progress. System is currently being throttled to protect neural core integrity."}]}]),p(!1)):ee===Qx.AUTH?(o("AUTHENTICATION_FAILURE: API Key missing or invalid."),s(!0),e(Vo.Error)):ee===Qx.NETWORK?(o("NETWORK_DISRUPTION: Packet loss detected in neural uplink. Check local gateway connectivity."),e(Vo.Error)):(o(`${Z}: ${G.substring(0,200)}`),e(Vo.Error)),ao.reportFailure(oe)},W=()=>{o(null),e(Vo.Welcome)},j=async(Z=O)=>{var oe;if(Z.length!==0)try{S(!0),_(0);const ee=await jJ(Z,de=>_(de));u(de=>[...de,...ee]);const G=await KJ(ee);F(G),console.log("[CLASSIFICATION_RESULT]:",G.category,"Confidence:",G.metadata.confidence);let ne="Unknown Document Type",te="";G.category==="LOTTERY"?ne="Lottery/Stochastic Intelligence":G.category==="INCOME_TAX"?(ne="Income Tax & Liability",te=`Jurisdiction: ${G.metadata.jurisdiction||"N/A"}`):G.category==="FINANCIAL_MARKET"?(ne="Equities & Market Analysis",te=`Scripts: ${((oe=G.metadata.entities)==null?void 0:oe.join(", "))||"N/A"}`):G.category==="TECHNICAL_SRE"?ne="Engineering & SRE Ops":G.category==="OTHER"&&(ne="General Document"),n!==Vo.Chatting?(A(G.questions),P(Z.length===1?Z[0].name:`${Z.length} Sources`),f([{role:"model",parts:[{text:`[NEURAL_LINK_ESTABLISHED]: Data stream analyzed.
                    
**CLASSIFICATION**: ${ne}
${te?`**CONTEXT**: ${te}`:""}

High-precision analysis protocols active.`}]}]),e(Vo.Chatting)):(P(de=>`${de} + ${Z.length} New Sources`),f(de=>[...de,{role:"model",parts:[{text:`[SYSTEM_UPDATE]: Successfully ingested ${Z.length} new data sources. Neural correlation updated for current stream: **${ne}**.`}]}])),L([])}catch(ee){z("Ingestion Fault",ee)}finally{S(!1),_(0)}},se=async Z=>{if(h)return;const oe=[...c],ee={role:"user",parts:[{text:Z}]};f(G=>[...G,ee]),p(!0),U.current={isAborted:!1,receivedData:!1};try{const G=$J(Z,l,oe,D||void 0);let ne="",te=!0;for await(const de of G){if(U.current.isAborted)break;U.current.receivedData=!0,ne+=de,te?(te=!1,f(me=>[...me,{role:"model",parts:[{text:ne}]}])):f(me=>{const be=[...me],Ie=be.length-1;return be[Ie].role==="model"&&(be[Ie]={...be[Ie],parts:[{text:ne}]}),be})}!U.current.receivedData&&!U.current.isAborted&&f(de=>[...de,{role:"model",parts:[{text:"[NEURAL_LINK_DROPPED]: The uplink received an empty packet. The system is re-calibrating. Please retry your query."}]}])}catch(G){U.current.isAborted||z("Neural Correlation Fault",G)}finally{p(!1)}},Y=Me.useCallback((Z,oe)=>{f(ee=>{const G=ee[ee.length-1];return G&&G.role===Z&&G.parts[0].text===oe?ee:[...ee,{role:Z,parts:[{text:oe}]}]})},[]),Q=Me.useCallback(()=>{const Z=JSON.stringify({metadata:{timestamp:Date.now(),document:E,version:"3.12.0",context:D},entries:c},null,2),oe=new Blob([Z],{type:"application/json"}),ee=URL.createObjectURL(oe),G=document.createElement("a");G.href=ee,G.download=`SYNAPSE_LOG_${Date.now()}.json`,G.click(),URL.revokeObjectURL(ee)},[c,E,D]),X=()=>{ao.security.logout(),r(null),e(Vo.Welcome)};return re.jsxs("main",{className:"h-screen bg-gem-onyx text-gem-offwhite",children:[n===Vo.Welcome&&re.jsx(Qse,{onUpload:()=>j(),files:O,setFiles:L,isUploading:v,uploadProgress:y,onAdminClick:()=>e(Vo.AdminLogin)}),n===Vo.AdminLogin&&re.jsx(Tbe,{onSuccess:Z=>{r(Z),Z.mustResetPassword?e(Vo.PasswordReset):e(Vo.AdminDashboard)},onCancel:()=>e(Vo.Welcome)}),n===Vo.PasswordReset&&t&&re.jsx(PasswordReset,{user:t,onSuccess:()=>e(Vo.AdminDashboard)}),n===Vo.AdminDashboard&&t&&re.jsx(AdminPortal,{adminUser:t,onLogout:X}),n===Vo.Uploading&&re.jsx("div",{className:"h-screen w-full bg-gem-onyx flex flex-col items-center justify-center p-20",children:re.jsx(IH,{progress:y,total:100,message:"SYSTEM_INGESTION_IN_PROGRESS",fileName:O.map(Z=>Z.name).join(", ")})}),n===Vo.Chatting&&re.jsx(Ebe,{documentName:E,history:c,isQueryLoading:h,isUploading:v,uploadProgress:y,onSendMessage:se,onRecordMessage:Y,onNewChat:()=>{u([]),f([]),P(""),L([]),F(null),e(Vo.Welcome)},onExportLog:Q,onUploadNewFiles:Z=>j(Z),exampleQuestions:w,onAbort:k,ingestedParts:l,analysisContext:D}),n===Vo.Error&&re.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-gem-onyx text-red-400 font-mono-data p-12 text-center animate-in fade-in duration-700",children:[re.jsx("div",{className:"w-24 h-24 mb-12 border-4 border-red-500 rounded-full flex items-center justify-center animate-pulse",children:re.jsx("span",{className:"text-5xl font-black italic",children:"!"})}),re.jsx("h1",{className:"text-4xl font-black mb-4 uppercase tracking-tighter",children:"System_Critical_Fault"}),re.jsx("p",{className:"text-xs mb-12 max-w-lg opacity-60 leading-relaxed uppercase tracking-widest",children:i}),a&&re.jsx("div",{className:"mb-12 w-full max-w-md",children:re.jsx(Mbe,{onConfigComplete:()=>{s(!1),W()}})}),re.jsxs("div",{className:"flex space-x-6",children:[re.jsx("button",{onClick:W,className:"px-12 py-5 bg-red-500 text-white font-black uppercase tracking-[0.4em] hover:bg-white hover:text-red-500 transition-all shadow-[0_0_30px_rgba(239,68,68,0.3)]",children:"Initiate_Reboot"}),re.jsx("button",{onClick:()=>window.location.reload(),className:"px-12 py-5 border border-white/20 text-white/40 font-black uppercase tracking-[0.4em] hover:border-white hover:text-white transition-all",children:"Hard_Reset"})]})]})]})};class ag{constructor(){this.logs=[],this.MAX_LOGS=1e3}static getInstance(){return ag.instance||(ag.instance=new ag),ag.instance}addLog(e,t,r){const i={timestamp:new Date().toISOString(),level:e,message:t,context:r};console.log(`[${e.toUpperCase()}] ${t}`,r||""),this.logs.unshift(i),this.logs.length>this.MAX_LOGS&&this.logs.pop()}info(e,t){this.addLog("info",e,t)}warn(e,t){this.addLog("warn",e,t)}error(e,t){this.addLog("error",e,{error:t==null?void 0:t.toString(),stack:t==null?void 0:t.stack})}critical(e,t){this.addLog("critical",e,{error:t==null?void 0:t.toString(),stack:t==null?void 0:t.stack})}getLogs(){return this.logs}measurePerformance(e,t){this.info(`perf: ${e}`,{value:t})}}const Pbe=ag.getInstance();class Ibe extends Me.Component{constructor(){super(...arguments),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){Pbe.critical("Uncaught exception in React tree",{error:e,errorInfo:t})}render(){var e;return this.state.hasError?re.jsx("div",{className:"w-full h-screen bg-gem-onyx flex items-center justify-center text-gem-offwhite font-mono-data",children:re.jsxs("div",{className:"max-w-2xl w-full p-8 border border-red-500/30 bg-red-900/10 rounded-lg backdrop-blur",children:[re.jsx("h1",{className:"text-2xl font-bold text-red-400 mb-4",children:"system.critical_fault"}),re.jsx("p",{className:"font-outfit mb-6",children:"The neural interface has encountered an unrecoverable error. Telemetry has been logged."}),re.jsx("div",{className:"p-4 bg-black/50 rounded mb-6 overflow-auto text-sm",children:re.jsx("code",{children:(e=this.state.error)==null?void 0:e.message})}),re.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-gem-teal/20 hover:bg-gem-teal/30 text-gem-teal border border-gem-teal/50 rounded transition-colors",children:"system.reboot()"})]})}):this.props.children}}const $q=document.getElementById("root");if(!$q)throw new Error("Could not find root element to mount to");const Rbe=I9.createRoot($q);Rbe.render(re.jsx(Ve.StrictMode,{children:re.jsx(Ibe,{children:re.jsx(Cbe,{})})}));export{Ci as _,$v as c,gi as g};
